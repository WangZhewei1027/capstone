<!DOCTYPE html>
<html>
  <head>
    <title>K-Nearest Neighbors</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 20px;
      }
      #inputForm {
        margin-bottom: 20px;
      }
      #result {
        margin-top: 20px;
        border: 1px solid #ccc;
        padding: 10px;
        width: 400px;
      }
      .nearest {
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>K-Nearest Neighbors</h1>

    <div id="inputForm">
      <label for="k">K (Number of Neighbors):</label>
      <input type="number" id="k" value="3" min="1" /><br /><br />

      <label for="feature1">Feature 1:</label>
      <input type="number" id="feature1" value="25" /><br /><br />

      <label for="feature2">Feature 2:</label>
      <input type="number" id="feature2" value="35" /><br /><br />

      <button id="searchButton">Search</button>
    </div>

    <div id="result"></div>

    <script>
      // Sample Data (Feature 1, Feature 2, Class)
      const data = [
        { feature1: 10, feature2: 20, class: "A" },
        { feature1: 15, feature2: 25, class: "A" },
        { feature1: 30, feature2: 40, class: "B" },
        { feature1: 35, feature2: 45, class: "B" },
        { feature1: 12, feature2: 22, class: "A" },
        { feature1: 28, feature2: 38, class: "B" },
        { feature1: 22, feature2: 30, class: "A" },
      ];

      // Function to calculate Euclidean distance
      function euclideanDistance(point1, point2) {
        return Math.sqrt(
          Math.pow(point1.feature1 - point2.feature1, 2) +
            Math.pow(point1.feature2 - point2.feature2, 2)
        );
      }

      // Function to find K-Nearest Neighbors
      function findKNearestNeighbors(inputPoint, k) {
        const distances = data.map((item) => ({
          item: item,
          distance: euclideanDistance(inputPoint, item),
        }));

        distances.sort((a, b) => a.distance - b.distance);

        const nearestNeighbors = distances.slice(0, k);
        return nearestNeighbors;
      }

      // Function to predict the class
      function predictClass(nearestNeighbors) {
        const classCounts = {};
        nearestNeighbors.forEach((neighbor) => {
          const className = neighbor.item.class;
          classCounts[className] = (classCounts[className] || 0) + 1;
        });

        let predictedClass = null;
        let maxCount = 0;
        for (const className in classCounts) {
          if (classCounts[className] > maxCount) {
            maxCount = classCounts[className];
            predictedClass = className;
          }
        }
        return predictedClass;
      }

      // Event listener for the search button
      document
        .getElementById("searchButton")
        .addEventListener("click", function () {
          const kValue = parseInt(document.getElementById("k").value);
          const feature1Value = parseFloat(
            document.getElementById("feature1").value
          );
          const feature2Value = parseFloat(
            document.getElementById("feature2").value
          );

          const inputPoint = {
            feature1: feature1Value,
            feature2: feature2Value,
          };
          const nearestNeighbors = findKNearestNeighbors(inputPoint, kValue);
          const predictedClass = predictClass(nearestNeighbors);

          let resultHTML = "K-Nearest Neighbors (K=" + kValue + "):<br>";
          nearestNeighbors.forEach((neighbor) => {
            resultHTML += `<span class="nearest">${
              neighbor.item.class
            } (Distance: ${neighbor.distance.toFixed(2)})</span><br>`;
          });
          resultHTML +=
            "<br>Predicted Class: <span class='nearest'>" +
            predictedClass +
            "</span>";

          document.getElementById("result").innerHTML = resultHTML;
        });
    </script>
  </body>
</html>
