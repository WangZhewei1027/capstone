!DOCTYPE html>
html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bubble Sort Visualization</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f7fa;
        color: #333;
      }
      .container {
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        padding: 25px;
      }
      h1 {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 20px;
      }
      .description {
        background: #e8f4fc;
        border-left: 4px solid #3498db;
        padding: 15px 20px;
        margin-bottom: 20px;
        border-radius: 0 4px 4px 0;
      }
      .array-container {
        display: flex;
        gap: 8px;
        margin: 15px 0;
        height: 40px;
        overflow: hidden;
        border: 1px solid #ddd;
        border-radius: 4px;
        background: #f9f9f9;
      }
      .bar {
        height: 100%;
        background: #3498db;
        border-radius: 4px;
        width: 20px;
        transition: height 0.5s ease;
        cursor: pointer;
      }
      .bar.active {
        background: #e74c3c;
        animation: pulse 1s;
      }
      .bar.highlight {
        background: #2ecc71;
        animation: pulse 2s;
      }
      .controls {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }
      button {
        padding: 8px 15px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s;
      }
      button:hover {
        background: #2980b9;
        transform: translateY(-1px);
      }
      button:active {
        transform: translateY(0);
      }
      .status {
        text-align: center;
        font-size: 14px;
        color: #7f8c8d;
        margin-top: 10px;
        padding: 5px;
        background: #f0f2f5;
        border-radius: 4px;
      }
      .info {
        background: #e8f4fc;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
        border-left: 4px solid #3498db;
      }
      .info h3 {
        color: #2c3e50;
        margin-top: 0;
      }
      .info p {
        line-height: 1.6;
      }
      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
        }
        70% {
          box-shadow: 0 0 0 15px rgba(255, 255, 255, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
        }
      }
      .algorithm-explanation {
        background: #f9f9f9;
        border-radius: 8px;
        padding: 12px;
        margin-top: 10px;
        border-left: 3px solid #3498db;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Bubble Sort Visualization</h1>

      <div class="description">
        <p>
          Watch how Bubble Sort works by comparing adjacent elements and
          swapping them if they're in the wrong order. The largest elements
          "bubble" to the end of the array with each pass.
        </p>
      </div>

      <div class="array-container" id="array-container">
        <!-- Bars will be generated by JavaScript -->
      </div>

      <div class="status" id="status">Ready to sort</div>

      <div class="controls">
        <button id="start-btn">Start Sorting</button>
        <button id="reset-btn">Reset</button>
        <button id="speed-btn">Slow</button>
        <button id="speed-btn">Fast</button>
      </div>

      <div class="info">
        <h3>How Bubble Sort Works</h3>
        <p>
          Bubble Sort repeatedly steps through the list, compares adjacent
          elements and swaps them if they are in the wrong order. The process is
          repeated until the list is sorted. It's a simple but inefficient
          algorithm for large datasets.
        </p>
      </div>

      <div class="algorithm-explanation">
        <h3>Algorithm Steps</h3>
        <ol>
          <li>Compare adjacent elements in the array</li>
          <li>
            If the left element is greater than the right element, swap them
          </li>
          <li>Repeat this process for all elements in the array</li>
          <li>
            After each pass, the largest unsorted element "bubbles" to its
            correct position at the end
          </li>
          <li>Repeat until no swaps are needed (array is sorted)</li>
        </ol>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const arrayContainer = document.getElementById("array-container");
        const startBtn = document.getElementById("start-btn");
        const resetBtn = document.getElementById("reset-btn");
        const status = document.getElementById("status");

        // Generate a random array of numbers
        function generateRandomArray(size = 10) {
          const array = [];
          for (let i = 0; i < size; i++) {
            array.push(Math.floor(Math.random() * 100));
          }
          return array;
        }

        // Create the array bars
        function createArrayBars(array) {
          arrayContainer.innerHTML = "";
          array.forEach((num) => {
            const bar = document.createElement("div");
            bar.className = "bar";
            bar.style.height = `${num * 3}px`;
            bar.dataset.value = num;
            arrayContainer.appendChild(bar);
          });
        }

        // Update bar colors based on state
        function updateBarColors() {
          const bars = document.querySelectorAll(".bar");
          bars.forEach((bar) => {
            bar.classList.remove("active", "highlight");
          });
        }

        // Sort the array using bubble sort
        function bubbleSort(array, speed = 0.5) {
          const n = array.length;
          let swapped;
          status.textContent = `Sorting... (Pass ${passCount})`;

          for (let i = 0; i < n - 1; i++) {
            swapped = false;

            for (let j = 0; j < n - i - 1; j++) {
              // Highlight current elements
              const bar1 = document.querySelector(
                `.bar[data-value="${array[j]}"]`
              );
              const bar2 = document.querySelector(
                `.bar[data-value="${array[j + 1]}"]`
              );

              if (bar1 && bar2) {
                bar1.classList.add("highlight");
                bar2.classList.add("highlight");
              }

              // Check if swap needed
              if (array[j] > array[j + 1]) {
                // Swap elements
                [array[j], array[j + 1]] = [array[j + 1], array[j]];

                // Update visual
                bar1.classList.add("active");
                bar2.classList.add("active");

                // Reset after animation
                setTimeout(() => {
                  bar1.classList.remove("active");
                  bar2.classList.remove("active");
                  bar1.classList.remove("highlight");
                  bar2.classList.remove("highlight");
                }, 100);

                swapped = true;
              }
            }

            if (!swapped) break;
          }

          // Update status
          status.textContent = `Sorted! (${passCount} passes)`;
          passCount++;

          // Check if sorting is complete
          if (isSorted(array)) {
            status.textContent = "Array is sorted!";
          }
        }

        // Check if array is sorted
        function isSorted(array) {
          for (let i = 0; i < array.length - 1; i++) {
            if (array[i] > array[i + 1]) {
              return false;
            }
          }
          return true;
        }

        // Initialize the sort
        function initSort() {
          const array = generateRandomArray(10);
          createArrayBars(array);
          passCount = 0;
          status.textContent = "Ready to sort";
        }

        // Event listeners
        startBtn.addEventListener("click", function () {
          initSort();
          bubbleSort(array, 0.5);
        });

        resetBtn.addEventListener("click", function () {
          initSort();
        });

        // Initialize the array
        initSort();

        // Track pass count
        let passCount = 0;
      });
    </script>
  </body>
</html>
