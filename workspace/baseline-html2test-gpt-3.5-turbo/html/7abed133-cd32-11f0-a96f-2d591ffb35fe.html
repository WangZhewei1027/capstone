<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Divide and Conquer Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2em;
    background: #f0f4f8;
    color: #333;
  }
  h1 {
    text-align: center;
  }
  .container {
    max-width: 700px;
    margin: 1em auto;
    padding: 1em 2em;
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  label {
    font-weight: bold;
  }
  input[type="text"] {
    width: 100%;
    padding: 0.5em;
    margin-top: 0.25em;
    margin-bottom: 1em;
    font-size: 1em;
  }
  button {
    background-color: #2e86de;
    color: white;
    border: none;
    padding: 0.7em 1.5em;
    font-size: 1em;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background-color: #1b4f72;
  }
  pre {
    background-color: #e8f0fe;
    border-radius: 6px;
    padding: 1em;
    overflow-x: auto;
    white-space: pre-wrap;
    font-family: Consolas, monospace;
  }
  .trace {
    background: #f9f9f9;
    margin-top: 1em;
    border-left: 4px solid #2e86de;
    padding-left: 1em;
    font-family: Consolas, monospace;
    max-height: 300px;
    overflow-y: auto;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Divide and Conquer: Merge Sort Visualization</h1>
    <p>Enter a list of numbers separated by commas, spaces, or new lines to see how the divide and conquer technique is applied in <strong>Merge Sort</strong>.</p>
    <label for="inputArray">Input array:</label>
    <input type="text" id="inputArray" placeholder="e.g. 38, 27, 43, 3, 9, 82, 10" value="38, 27, 43, 3, 9, 82, 10" />
    <button id="sortButton">Sort and Visualize</button>
    <h2>Sorted Array:</h2>
    <pre id="output"></pre>
    <h2>Divide and Conquer Trace:</h2>
    <div id="trace" class="trace"></div>
  </div>

<script>
  /*
    Merge Sort demonstrates the Divide and Conquer approach:
    1. Divide: Split the array into halves recursively until subarrays have size 1.
    2. Conquer: Merge sorted subarrays back into a sorted array.
  */

  const inputEl = document.getElementById('inputArray');
  const outputEl = document.getElementById('output');
  const traceEl = document.getElementById('trace');
  const sortBtn = document.getElementById('sortButton');

  let stepCount = 0;

  function parseInput(text) {
    // Split by commas, spaces, or new lines and filter numbers
    return text
      .split(/[\s,]+/)
      .map(s => s.trim())
      .filter(s => s !== '')
      .map(Number)
      .filter(n => !isNaN(n));
  }

  function logTrace(message) {
    const line = document.createElement('div');
    line.textContent = message;
    traceEl.appendChild(line);
    // Scroll down to the newest message:
    traceEl.scrollTop = traceEl.scrollHeight;
  }

  function merge(left, right) {
    let merged = [];
    let i = 0, j = 0;
    logTrace(`Merging left [${left}] and right [${right}]`);

    while (i < left.length && j < right.length) {
      if (left[i] < right[j]) {
        merged.push(left[i]);
        i++;
      } else {
        merged.push(right[j]);
        j++;
      }
    }

    // Add remaining elements
    merged = merged.concat(left.slice(i)).concat(right.slice(j));
    logTrace(`--> Result: [${merged}]`);
    return merged;
  }

  function mergeSort(arr, depth=0) {
    stepCount++;
    const indent = '  '.repeat(depth);

    if (arr.length <= 1) {
      logTrace(`${indent}Base case reached with [${arr}]`);
      return arr;
    }

    const mid = Math.floor(arr.length / 2);
    const left = arr.slice(0, mid);
    const right = arr.slice(mid);

    logTrace(`${indent}Dividing: [${arr}] into`);
    logTrace(`${indent}  Left:  [${left}]`);
    logTrace(`${indent}  Right: [${right}]`);

    const sortedLeft = mergeSort(left, depth + 1);
    const sortedRight = mergeSort(right, depth + 1);

    const sorted = merge(sortedLeft, sortedRight);
    return sorted;
  }

  sortBtn.addEventListener('click', () => {
    traceEl.textContent = '';
    outputEl.textContent = '';
    stepCount = 0;

    const arr = parseInput(inputEl.value);
    if (arr.length === 0) {
      outputEl.textContent = 'Please enter a valid list of numbers.';
      return;
    }

    logTrace('Starting Merge Sort (Divide and Conquer)...');
    const sorted = mergeSort(arr);
    logTrace('Merge Sort Complete!');
    outputEl.textContent = `[${sorted.join(', ')}]`;
  });
</script>
</body>
</html>