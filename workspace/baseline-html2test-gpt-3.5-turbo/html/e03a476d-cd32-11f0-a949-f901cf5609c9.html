<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Recursion Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f8ff;
    color: #333;
  }
  h1 {
    color: #026494;
  }
  label, button {
    font-size: 1rem;
    margin-top: 1rem;
    display: block;
  }
  input[type="number"] {
    font-size: 1rem;
    padding: 0.25rem;
    width: 5rem;
    margin-top: 0.5rem;
  }
  #result {
    margin-top: 1rem;
    background: #fff;
    padding: 1rem;
    border-radius: 6px;
    border: 1px solid #ccc;
    white-space: pre-wrap;
    max-height: 300px;
    overflow-y: auto;
  }
  #call-stack {
    margin-top: 1rem;
    background: #e0f7fa;
    padding: 1rem;
    border-radius: 6px;
    border: 1px solid #0097a7;
    max-height: 250px;
    overflow-y: auto;
    font-family: monospace;
  }
</style>
</head>
<body>
<h1>Recursion Demonstration: Factorial Calculation</h1>

<label for="numberInput">Enter a non-negative integer:</label>
<input type="number" id="numberInput" min="0" max="20" value="5" />
<button id="calcBtn">Calculate Factorial</button>

<h2>Result</h2>
<div id="result">Enter a number and click "Calculate Factorial" to see the result.</div>

<h2>Recursive Call Stack Trace</h2>
<div id="call-stack">Call stack will be displayed here.</div>

<script>
  // Recursive function with tracing
  function factorial(n, depth = 0, callStack) {
    callStack.push(' '.repeat(depth * 2) + `factorial(${n}) called`);
    if (n === 0) {
      callStack.push(' '.repeat(depth * 2) + `factorial(${n}) returns 1`);
      return 1;
    } else {
      const result = n * factorial(n - 1, depth + 1, callStack);
      callStack.push(' '.repeat(depth * 2) + `factorial(${n}) returns ${result}`);
      return result;
    }
  }

  const input = document.getElementById('numberInput');
  const btn = document.getElementById('calcBtn');
  const resultDiv = document.getElementById('result');
  const callStackDiv = document.getElementById('call-stack');

  btn.addEventListener('click', () => {
    const n = parseInt(input.value, 10);
    if (isNaN(n) || n < 0 || n > 20) {
      resultDiv.textContent = "Please enter a non-negative integer between 0 and 20.";
      callStackDiv.textContent = '';
      return;
    }
    const callStack = [];
    const fact = factorial(n, 0, callStack);
    resultDiv.textContent = `Factorial of ${n} is:\n${fact}`;
    callStackDiv.textContent = callStack.join('\n');
  });
</script>
</body>
</html>