<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Two Pointers Technique Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: 40px auto;
    padding: 0 20px;
    background: #f0f2f5;
  }
  h1 {
    text-align: center;
    color: #333;
  }
  .section {
    background: #fff;
    padding: 20px 25px;
    margin-bottom: 25px;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
  }
  label {
    font-weight: bold;
    display: block;
    margin-bottom: 6px;
  }
  input[type="text"], input[type="number"] {
    padding: 8px;
    width: 100%;
    font-size: 1em;
    border-radius: 4px;
    border: 1px solid #ccc;
    box-sizing: border-box;
  }
  button {
    margin-top: 15px;
    padding: 10px 18px;
    font-size: 1em;
    border: none;
    background-color: #007bff;
    border-radius: 6px;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background-color: #0056b3;
  }
  pre {
    background: #272822;
    color: #f8f8f2;
    padding: 12px;
    border-radius: 5px;
    max-height: 200px;
    overflow: auto;
    font-size: 14px;
  }
  .output {
    white-space: pre-wrap;
    background: #e9ecef;
    padding: 12px 16px;
    border-radius: 6px;
    font-family: Consolas, monospace;
    font-size: 15px;
    margin-top: 12px;
    min-height: 50px;
  }
  .explanation {
    font-size: 0.9em;
    margin-top: 10px;
    color: #555;
  }
</style>
</head>
<body>

<h1>Two Pointers Technique Demonstration</h1>

<div class="section">
  <h2>1. Example Problem: Pair Sum in Sorted Array</h2>
  <p>Given a <strong>sorted</strong> array of integers, determine if there exist two numbers that add up to a <em>target sum</em>.</p>
  
  <label for="arrayInput">Enter a sorted array (comma separated):</label>
  <input type="text" id="arrayInput" placeholder="e.g. 1, 2, 3, 4, 6, 8" value="1, 2, 3, 4, 6, 8" />
  
  <label for="targetInput">Enter target sum:</label>
  <input type="number" id="targetInput" placeholder="e.g. 10" value="10" />
  
  <button id="checkPairBtn">Check Pair</button>
  
  <div class="output" id="pairResult"></div>
  
  <div class="explanation">
    <strong>How it works:</strong> We use two pointers starting at the beginning and end of the array. We sum their values:
    <ul>
      <li>If the sum equals the target, we have found our pair.</li>
      <li>If the sum is less than the target, move left pointer right to increase sum.</li>
      <li>If the sum is greater than the target, move right pointer left to decrease sum.</li>
    </ul>
  </div>
</div>

<div class="section">
  <h2>2. Visualization of Two Pointers</h2>
  <p>Watch how the two pointers move through the array to find the sum.</p>
  
  <button id="startVisualBtn">Start Visualization</button>
  <div id="visualArrayContainer" style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap; font-weight: bold; font-size: 1.2em;"></div>
  <div id="visualStatus" style="margin-top: 15px; font-size: 1.1em;"></div>
</div>

<script>
  const arrayInput = document.getElementById('arrayInput');
  const targetInput = document.getElementById('targetInput');
  const pairResult = document.getElementById('pairResult');
  const checkPairBtn = document.getElementById('checkPairBtn');
  const startVisualBtn = document.getElementById('startVisualBtn');
  const visualArrayContainer = document.getElementById('visualArrayContainer');
  const visualStatus = document.getElementById('visualStatus');

  function parseArray(str) {
    return str.split(',')
      .map(s => s.trim())
      .map(s => Number(s))
      .filter(n => !isNaN(n));
  }

  function twoPointersPairSum(arr, target) {
    let left = 0;
    let right = arr.length - 1;

    while (left < right) {
      const sum = arr[left] + arr[right];
      if (sum === target) {
        return [left, right];
      } else if (sum < target) {
        left++;
      } else {
        right--;
      }
    }
    return null;
  }

  checkPairBtn.addEventListener('click', () => {
    const arr = parseArray(arrayInput.value);
    const target = Number(targetInput.value);
    if (arr.length < 2) {
      pairResult.textContent = 'Enter at least two numbers.';
      return;
    }
    if (isNaN(target)) {
      pairResult.textContent = 'Enter a valid target sum.';
      return;
    }
    // Assumes sorted input
    const result = twoPointersPairSum(arr, target);
    if (result) {
      pairResult.textContent = `Pair found: arr[${result[0]}] = ${arr[result[0]]} + arr[${result[1]}] = ${arr[result[1]]} = ${target}`;
    } else {
      pairResult.textContent = 'No pair found with the given target sum.';
    }
  });

  function resetVisual() {
    visualArrayContainer.innerHTML = '';
    visualStatus.textContent = '';
  }

  function createVisualBlocks(arr) {
    visualArrayContainer.innerHTML = '';
    arr.forEach((num, idx) => {
      const block = document.createElement('div');
      block.textContent = num;
      block.style.padding = '10px 14px';
      block.style.border = '2px solid #ccc';
      block.style.borderRadius = '5px';
      block.style.minWidth = '40px';
      block.style.textAlign = 'center';
      block.dataset.index = idx;
      visualArrayContainer.appendChild(block);
    });
  }

  function highlightPointers(left, right) {
    const blocks = visualArrayContainer.children;
    for (let i = 0; i < blocks.length; i++) {
      blocks[i].style.backgroundColor = '';
      blocks[i].style.borderColor = '#ccc';
      blocks[i].style.color = '#333';
    }
    if (left >= 0 && left < blocks.length) {
      blocks[left].style.backgroundColor = '#d1e7dd'; // green-ish
      blocks[left].style.borderColor = '#0f5132';
      blocks[left].style.color = '#0f5132';
    }
    if (right >= 0 && right < blocks.length) {
      blocks[right].style.backgroundColor = '#f8d7da'; // red-ish
      blocks[right].style.borderColor = '#842029';
      blocks[right].style.color = '#842029';
    }
  }

  async function visualizeTwoPointers(arr, target) {
    resetVisual();
    createVisualBlocks(arr);
    visualStatus.textContent = '';
    let left = 0;
    let right = arr.length - 1;

    while (left < right) {
      highlightPointers(left, right);
      const sum = arr[left] + arr[right];
      visualStatus.textContent = `Checking arr[${left}] + arr[${right}] = ${arr[left]} + ${arr[right]} = ${sum}`;

      await new Promise(resolve => setTimeout(resolve, 1500));

      if (sum === target) {
        visualStatus.textContent = `Pair found at indices ${left} and ${right} with values ${arr[left]} + ${arr[right]} = ${target}`;
        highlightPointers(left, right);
        return;
      } else if (sum < target) {
        left++;
      } else {
        right--;
      }
    }
    visualStatus.textContent = 'No pair found.';
  }

  startVisualBtn.addEventListener('click', () => {
    const arr = parseArray(arrayInput.value);
    const target = Number(targetInput.value);
    if (arr.length < 2) {
      visualStatus.textContent = 'Enter at least two numbers.';
      return;
    }
    if (isNaN(target)) {
      visualStatus.textContent = 'Enter a valid target sum.';
      return;
    }
    visualizeTwoPointers(arr, target);
  });
</script>

</body>
</html>