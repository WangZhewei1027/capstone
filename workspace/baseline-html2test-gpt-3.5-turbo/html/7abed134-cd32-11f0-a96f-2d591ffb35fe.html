<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sliding Window Visualization</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 30px;
    background: #f4f7fc;
    color: #333;
  }
  h1 {
    text-align: center;
    margin-bottom: 15px;
  }
  .array-container {
    display: flex;
    justify-content: center;
    margin-bottom: 25px;
  }
  .elem {
    width: 40px;
    height: 40px;
    margin: 0 5px;
    background: #ddd;
    border-radius: 6px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 16px;
    transition: background-color 0.3s;
    user-select: none;
  }
  .elem.window {
    background: #4a90e2;
    color: white;
    box-shadow: 0 0 10px #4a90e2;
  }
  .elem.current {
    background: #f5a623;
    color: white;
    box-shadow: 0 0 10px #f5a623;
  }
  .controls {
    text-align: center;
    margin-bottom: 20px;
  }
  input[type="number"] {
    width: 50px;
    font-size: 16px;
    padding: 5px;
    margin-left: 10px;
    margin-right: 20px;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  button {
    padding: 8px 14px;
    font-size: 16px;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    user-select: none;
  }
  button:disabled {
    background: #a0c4f7;
    cursor: default;
  }
  .info {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
    font-size: 18px;
    min-height: 40px;
  }
  .array-input-container {
    text-align: center;
    margin-bottom: 15px;
  }
  input[type="text"] {
    width: 300px;
    font-size: 16px;
    padding: 7px;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  .footer {
    margin-top: 40px;
    font-size: 14px;
    text-align: center;
    color: #666;
  }
  @media (max-width: 480px) {
    .elem {
      width: 32px;
      height: 32px;
      margin: 0 3px;
      font-size: 14px;
    }
    input[type="text"] {
      width: 100%;
      max-width: 280px;
    }
  }
</style>
</head>
<body>
<h1>Sliding Window Technique Visualization</h1>

<div class="array-input-container">
  <label for="arrayInput">Enter array (comma separated): </label>
  <input id="arrayInput" type="text" value="2,1,5,2,3,2" />
</div>

<div class="controls">
  <label for="windowSize">Window Size (k):</label>
  <input id="windowSize" type="number" min="1" max="20" value="3" />
  <button id="startBtn">Start</button>
  <button id="stepBtn" disabled>Next Step</button>
  <button id="resetBtn" disabled>Reset</button>
</div>

<div class="array-container" id="arrayContainer"></div>

<div class="info" id="info">Click "Start" to begin the sliding window demonstration.</div>

<div class="footer">
  <p><em>Example: Find maximum in each subarray of size k</em></p>
</div>

<script>
  /*
    Sliding Window Visualization:
    - User inputs an array and window size k.
    - Visualizes the sliding window moving from left to right.
    - At each step highlights the window elements.
    - Demonstrates the "maximum in each subarray of size k" problem.
  */

  const arrayInput = document.getElementById('arrayInput');
  const windowSizeInput = document.getElementById('windowSize');
  const arrayContainer = document.getElementById('arrayContainer');
  const info = document.getElementById('info');
  const startBtn = document.getElementById('startBtn');
  const stepBtn = document.getElementById('stepBtn');
  const resetBtn = document.getElementById('resetBtn');

  let arr = [];
  let k = 0;
  let currentPos = 0; // current starting pos of the sliding window
  let sliding = false;
  let maxes = [];

  // Helper to render the array with sliding window indicated
  function renderArray(windowStart = -1, windowEnd = -1, highlightMaxIndex = -1) {
    arrayContainer.innerHTML = '';
    for (let i = 0; i < arr.length; i++) {
      const elemDiv = document.createElement('div');
      elemDiv.className = 'elem';
      elemDiv.textContent = arr[i];

      if (i >= windowStart && i <= windowEnd) {
        elemDiv.classList.add('window');
      }
      if (i === highlightMaxIndex) {
        elemDiv.classList.remove('window');
        elemDiv.classList.add('current');
      }

      arrayContainer.appendChild(elemDiv);
    }
  }

  // Compute max for each sliding window using a simple approach (for demonstration)
  function computeMaxForWindowAt(start) {
    let maxVal = arr[start];
    let maxIdx = start;
    for (let i = start + 1; i < start + k; i++) {
      if (arr[i] > maxVal) {
        maxVal = arr[i];
        maxIdx = i;
      }
    }
    return {maxVal, maxIdx};
  }

  function validateInputs() {
    // Validate array
    let arrayStr = arrayInput.value.trim();
    if (!arrayStr) {
      alert('Array input cannot be empty.');
      return false;
    }
    let parts = arrayStr.split(',').map(s => s.trim());
    let tempArr = [];
    for (let p of parts) {
      if (p === '') continue;
      let num = Number(p);
      if (isNaN(num)) {
        alert('Array must contain only numbers separated by commas.');
        return false;
      }
      tempArr.push(num);
    }
    if (tempArr.length === 0) {
      alert('Array cannot be empty.');
      return false;
    }
    // Validate k
    let kVal = Number(windowSizeInput.value);
    if (isNaN(kVal) || kVal < 1) {
      alert('Window size k must be a positive integer.');
      return false;
    }
    if (kVal > tempArr.length) {
      alert('Window size k cannot be greater than the array length.');
      return false;
    }
    arr = tempArr;
    k = kVal;
    return true;
  }

  function startSliding() {
    if (!validateInputs()) return;

    currentPos = 0;
    maxes = [];

    startBtn.disabled = true;
    stepBtn.disabled = false;
    resetBtn.disabled = false;
    arrayInput.disabled = true;
    windowSizeInput.disabled = true;
    sliding = true;
    info.textContent = `Sliding the window of size ${k} over the array. Click "Next Step" to move the window.`;

    renderArray(currentPos, currentPos + k -1);
  }

  function stepSliding() {
    if (!sliding) return;
    if (currentPos > arr.length - k) {
      info.textContent = `Sliding complete! Maximums for each window: [${maxes.join(', ')}]. Click Reset to try again.`;
      stepBtn.disabled = true;
      return;
    }

    const {maxVal, maxIdx} = computeMaxForWindowAt(currentPos);
    maxes.push(maxVal);

    renderArray(currentPos, currentPos + k -1, maxIdx);

    info.textContent = `Window position: [${currentPos}..${currentPos + k -1}] Maximum: ${maxVal} (highlighted in orange)`;

    currentPos++;
    if (currentPos > arr.length - k) {
      info.textContent = `Sliding complete! Maximums for each window: [${maxes.join(', ')}]. Click Reset to try again.`;
      stepBtn.disabled = true;
    }
  }

  function resetSliding() {
    sliding = false;
    startBtn.disabled = false;
    stepBtn.disabled = true;
    resetBtn.disabled = true;
    arrayInput.disabled = false;
    windowSizeInput.disabled = false;
    info.textContent = 'Click "Start" to begin the sliding window demonstration.';
    arrayContainer.innerHTML = '';
  }

  startBtn.addEventListener('click', startSliding);
  stepBtn.addEventListener('click', stepSliding);
  resetBtn.addEventListener('click', resetSliding);

  // Initial render (empty)
  renderArray();

</script>

</body>
</html>