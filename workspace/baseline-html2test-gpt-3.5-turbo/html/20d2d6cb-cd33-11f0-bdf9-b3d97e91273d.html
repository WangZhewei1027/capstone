<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Longest Common Subsequence (LCS) Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f5f7fa;
    color: #222;
  }
  h1 {
    text-align: center;
    color: #34495e;
  }
  label {
    font-weight: bold;
    display: block;
    margin-top: 1rem;
    margin-bottom: 0.3rem;
  }
  input[type="text"] {
    width: 100%;
    padding: 0.6rem;
    border: 1px solid #bbb;
    border-radius: 4px;
    font-size: 1.1rem;
    box-sizing: border-box;
  }
  button {
    margin-top: 1rem;
    background-color: #2980b9;
    color: white;
    border: none;
    padding: 0.7rem 1.4rem;
    font-size: 1.1rem;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background-color: #1c5d8a;
  }
  .result {
    margin-top: 1.5rem;
    background: white;
    border-radius: 8px;
    padding: 1rem 1.5rem;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  }
  .matrix {
    overflow-x: auto; 
    margin-top: 1rem;
  }
  table {
    border-collapse: collapse;
    width: auto;
    margin: 0 auto;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 6px 12px;
    text-align: center;
  }
  th {
    background-color: #2980b9;
    color: white;
  }
  .highlight {
    background-color: #82ca9d;
    font-weight: 700;
  }
  .lcs-sequence {
    font-size: 1.3rem;
    color: #27ae60;
    font-weight: 700;
  }
  footer {
    margin-top: 3rem;
    font-size: 0.9rem;
    color: #999;
    text-align: center;
  }
</style>
</head>
<body>
  <h1>Longest Common Subsequence (LCS) Calculator</h1>

  <label for="string1">First String:</label>
  <input id="string1" type="text" placeholder="Enter the first string" value="AGGTAB" />

  <label for="string2">Second String:</label>
  <input id="string2" type="text" placeholder="Enter the second string" value="GXTXAYB" />

  <button id="computeBtn">Compute LCS</button>

  <div id="output" class="result" aria-live="polite"></div>

<script>
  function computeLCS(s1, s2) {
    const m = s1.length, n = s2.length;
    // Create a 2D array (m+1) x (n+1) filled with 0
    const dp = Array.from({length: m+1}, () => Array(n+1).fill(0));

    // Fill dp table bottom-up
    for (let i = 1; i <= m; i++) {
      for (let j = 1; j <= n; j++) {
        if (s1[i-1] === s2[j-1]) {
          dp[i][j] = dp[i-1][j-1] + 1;
        } else {
          dp[i][j] = Math.max(dp[i-1][j], dp[i][j-1]);
        }
      }
    }

    // Backtrack to find one LCS sequence
    let lcs = [];
    let i = m, j = n;
    while(i > 0 && j > 0) {
      if (s1[i-1] === s2[j-1]) {
        lcs.push(s1[i-1]);
        i--; j--;
      } else if (dp[i-1][j] > dp[i][j-1]) {
        i--;
      } else {
        j--;
      }
    }
    lcs.reverse();

    return { length: dp[m][n], sequence: lcs.join(''), dp };
  }

  function createMatrixTable(dp, s1, s2, highlightCoords = []) {
    const m = s1.length;
    const n = s2.length;
    // We'll build a table showing dp values including headers for strings
    // First row has empty corner + s2 chars
    // First column has s1 chars
    
    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const headRow = document.createElement('tr');

    // Top-left cell empty
    let th = document.createElement('th');
    th.textContent = '';
    headRow.appendChild(th);

    // s2 characters header
    for(let j=0; j<=n; j++) {
      let th = document.createElement('th');
      if(j === 0){
        th.textContent = '0';
      } else {
        th.textContent = s2[j-1];
      }
      headRow.appendChild(th);
    }
    thead.appendChild(headRow);
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    for(let i=0; i<=m; i++) {
      const row = document.createElement('tr');
      // s1 char header on first column
      let th = document.createElement('th');
      if(i === 0) {
        th.textContent = '0';
      } else {
        th.textContent = s1[i-1];
      }
      row.appendChild(th);

      for(let j=0; j<=n; j++) {
        let td = document.createElement('td');
        td.textContent = dp[i][j];

        // Highlight cells on the LCS path if any
        if (highlightCoords.some(([x,y]) => x === i && y === j)) {
          td.classList.add('highlight');
        }

        row.appendChild(td);
      }
      tbody.appendChild(row);
    }
    table.appendChild(tbody);
    return table;
  }

  function findLCSCellsOnPath(dp, s1, s2) {
    // For visual tracing highlight cells on the path chosen for LCS in dp table
    let i = s1.length, j = s2.length;
    const path = [];
    while(i > 0 && j > 0) {
      path.push([i, j]);
      if (s1[i-1] === s2[j-1]) {
        i--; j--;
      } else if (dp[i-1][j] > dp[i][j-1]) {
        i--;
      } else {
        j--;
      }
    }
    path.push([0,0]);
    return path;
  }

  document.getElementById('computeBtn').addEventListener('click', () => {
    const s1 = document.getElementById('string1').value.trim();
    const s2 = document.getElementById('string2').value.trim();
    const output = document.getElementById('output');
    output.innerHTML = '';

    if(!s1 || !s2) {
      output.textContent = 'Please enter both strings.';
      return;
    }

    // Compute LCS
    const { length, sequence, dp } = computeLCS(s1, s2);

    // Find path for highlighting
    const highlightCells = findLCSCellsOnPath(dp, s1, s2);

    // Create result display
    const p1 = document.createElement('p');
    p1.innerHTML = `<strong>Length of LCS:</strong> ${length}`;
    output.appendChild(p1);

    const p2 = document.createElement('p');
    p2.innerHTML = `<strong>Longest Common Subsequence:</strong> <span class="lcs-sequence">${sequence || '(empty string)'}</span>`;
    output.appendChild(p2);

    const matrixDiv = document.createElement('div');
    matrixDiv.className = 'matrix';
    const matrixTable = createMatrixTable(dp, s1, s2, highlightCells);
    matrixDiv.appendChild(matrixTable);

    const matrixCaption = document.createElement('p');
    matrixCaption.innerHTML = `<em>DP Matrix (rows: first string, columns: second string). Highlighted cells show the path of the LCS.</em>`;
    output.appendChild(matrixCaption);

    output.appendChild(matrixDiv);
  });

  // Compute default example on load
  window.onload = () => {
    document.getElementById('computeBtn').click();
  };
</script>
<footer>
  &copy; 2024 - Longest Common Subsequence Demo
</footer>
</body>
</html>