<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linear Search Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f4f8;
    color: #333;
  }
  h1 {
    text-align: center;
    color: #004085;
  }
  #arrayContainer {
    margin: 1rem 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .array-element {
    width: 35px;
    height: 35px;
    border-radius: 4px;
    background-color: #e2e6ea;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 1rem;
    border: 1.5px solid #bfc7cd;
    transition: background-color 0.4s, border-color 0.4s;
  }
  .current {
    border-color: #17a2b8;
    background-color: #d1ecf1;
  }
  .found {
    background-color: #28a745;
    color: white;
    border-color: #218838;
  }
  .not-found {
    background-color: #dc3545;
    color: white;
    border-color: #bd2130;
  }
  label {
    display: block;
    margin-top: 1rem;
    font-weight: bold;
  }
  input[type="text"], input[type="number"] {
    padding: 0.4rem 0.6rem;
    font-size: 1rem;
    margin-top: 0.3rem;
    width: 100%;
    max-width: 200px;
    box-sizing: border-box;
  }
  button {
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    cursor: pointer;
    border: none;
    border-radius: 4px;
    background-color: #004085;
    color: white;
    transition: background-color 0.3s;
  }
  button:hover:not(:disabled) {
    background-color: #002752;
  }
  button:disabled {
    background-color: #999;
    cursor: not-allowed;
  }
  #message {
    margin-top: 1rem;
    font-weight: bold;
    font-size: 1.1rem;
    min-height: 1.2em;
  }
  #speedContainer {
    margin-top: 1rem;
    max-width: 200px;
  }
  #speedLabel {
    font-weight: normal;
  }
  footer {
    margin-top: 3rem;
    font-size: 0.85rem;
    color: #555;
    text-align: center;
  }
  @media (max-width: 400px) {
    .array-element {
      width: 28px;
      height: 28px;
      font-size: 0.85rem;
    }
  }
</style>
</head>
<body>

<h1>Linear Search Visualization</h1>

<label for="arrayInput">Enter array elements (comma separated):</label>
<input type="text" id="arrayInput" placeholder="e.g. 3, 6, 8, 2, 10" value="3,6,8,2,10,7,4" />

<label for="targetInput">Enter target element to search:</label>
<input type="number" id="targetInput" placeholder="e.g. 10" />

<div id="speedContainer">
  <label id="speedLabel" for="speedRange">Animation Speed: <span id="speedValue">500</span> ms</label>
  <input type="range" id="speedRange" min="100" max="2000" value="500" step="100" />
</div>

<button id="startBtn">Start Linear Search</button>
<button id="resetBtn" disabled>Reset</button>

<div id="arrayContainer" aria-live="polite" aria-label="Array elements container"></div>

<div id="message" role="alert" aria-live="assertive"></div>

<footer>
  Linear search algorithm: Sequentially checks each element to find the target.
</footer>

<script>
(() => {
  const arrayInput = document.getElementById('arrayInput');
  const targetInput = document.getElementById('targetInput');
  const startBtn = document.getElementById('startBtn');
  const resetBtn = document.getElementById('resetBtn');
  const arrayContainer = document.getElementById('arrayContainer');
  const messageEl = document.getElementById('message');
  const speedRange = document.getElementById('speedRange');
  const speedValue = document.getElementById('speedValue');

  let arr = [];
  let target = null;
  let currentIndex = 0;
  let animationInterval = null;
  let animationSpeed = 500;

  function parseInputArray(input) {
    // Split by commas, trim spaces and filter out empty values
    return input.split(',')
      .map(e => e.trim())
      .filter(e => e.length > 0)
      .map(e => {
        const n = Number(e);
        return isNaN(n) ? e : n;
      });
  }

  function createArrayElements(array) {
    arrayContainer.innerHTML = '';
    array.forEach((item, index) => {
      const div = document.createElement('div');
      div.classList.add('array-element');
      div.textContent = item;
      div.setAttribute('data-index', index);
      arrayContainer.appendChild(div);
    });
  }

  function updateMessage(text, success = null) {
    messageEl.textContent = text;
    if (success === true) {
      messageEl.style.color = '#28a745';
    } else if (success === false) {
      messageEl.style.color = '#dc3545';
    } else {
      messageEl.style.color = '#333';
    }
  }

  function resetSearch() {
    clearInterval(animationInterval);
    animationInterval = null;
    currentIndex = 0;
    updateMessage('');
    createArrayElements(arr);
    startBtn.disabled = false;
    resetBtn.disabled = true;
    arrayInput.disabled = false;
    targetInput.disabled = false;
    speedRange.disabled = false;
  }

  function highlightIndex(index, state) {
    // state: 'current', 'found', 'not-found', or ''
    const elements = arrayContainer.querySelectorAll('.array-element');
    elements.forEach(el => {
      el.classList.remove('current', 'found', 'not-found');
    });
    if (state) {
      const el = elements[index];
      if (el) el.classList.add(state);
    }
  }

  function startLinearSearch() {
    arr = parseInputArray(arrayInput.value);
    target = targetInput.value;
    // Validate target is a string or number, try to convert to number if possible
    const numTarget = Number(target);
    if (target === '') {
      updateMessage('Please enter a target element to search.', false);
      return;
    }
    target = isNaN(numTarget) ? target : numTarget;

    if (arr.length === 0) {
      updateMessage('Please enter a valid array.', false);
      return;
    }

    createArrayElements(arr);
    updateMessage('Starting linear search...');
    startBtn.disabled = true;
    resetBtn.disabled = false;
    arrayInput.disabled = true;
    targetInput.disabled = true;
    speedRange.disabled = true;
    currentIndex = 0;

    animationInterval = setInterval(() => {
      if (currentIndex > 0) {
        // Remove highlight from previous element
        highlightIndex(currentIndex - 1, '');
      }

      if (currentIndex >= arr.length) {
        // Target not found
        updateMessage(`Element "${target}" not found in the array.`, false);
        resetBtn.disabled = false;
        clearInterval(animationInterval);
        animationInterval = null;
        return;
      }

      highlightIndex(currentIndex, 'current');
      updateMessage(`Checking element at index ${currentIndex}: ${arr[currentIndex]}`);

      if (arr[currentIndex] === target) {
        highlightIndex(currentIndex, 'found');
        updateMessage(`Element "${target}" found at index ${currentIndex}!`, true);
        clearInterval(animationInterval);
        animationInterval = null;
        return;
      }

      currentIndex++;
    }, animationSpeed);
  }

  startBtn.addEventListener('click', startLinearSearch);

  resetBtn.addEventListener('click', resetSearch);

  speedRange.addEventListener('input', () => {
    animationSpeed = Number(speedRange.value);
    speedValue.textContent = animationSpeed;
    if (animationInterval) {
      // Restart animation with new speed
      clearInterval(animationInterval);
      animationInterval = null;
      currentIndex = 0;
      createArrayElements(arr);
      startLinearSearch();
    }
  });

  // Initialize with default array display
  arr = parseInputArray(arrayInput.value);
  createArrayElements(arr);
  speedValue.textContent = animationSpeed;
})();
</script>

</body>
</html>