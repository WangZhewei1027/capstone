<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Two Pointers Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    max-width: 600px;
  }
  h1 {
    text-align: center;
  }
  input[type="text"] {
    width: 100%;
    padding: 0.5rem;
    font-size: 1rem;
  }
  button {
    margin-top: 1rem;
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    cursor: pointer;
  }
  .array-container {
    margin-top: 1.5rem;
    font-family: monospace;
    font-size: 1.2rem;
    user-select: none;
    white-space: pre-wrap;
  }
  .pointer {
    display: inline-block;
    width: 2rem;
    text-align: center;
    font-weight: bold;
    color: white;
    border-radius: 4px;
    margin: 0 0.15rem;
  }
  .left-pointer {
    background: #007bff;
  }
  .right-pointer {
    background: #dc3545;
  }
  .normal {
    display: inline-block;
    width: 2rem;
    text-align: center;
    margin: 0 0.15rem;
  }
  .highlight {
    background-color: #ffc107;
    border-radius: 4px;
  }
  .output {
    margin-top: 2rem;
    background-color: #f8f9fa;
    padding: 1rem;
    border-radius: 6px;
    border: 1px solid #ddd;
    min-height: 3rem;
    white-space: pre-wrap;
  }
  .explanation {
    margin-top: 1rem;
    font-style: italic;
    color: #555;
  }
</style>
</head>
<body>
<h1>Two Pointers Technique Demo</h1>

<p>Enter a sorted array of numbers (comma separated):</p>
<input type="text" id="arrayInput" placeholder="e.g. 1,2,3,4,5,6,7,8,9" value="2,3,4,5,6,7,8,9,10"/>

<p>Enter target sum to find two numbers that add up to:</p>
<input type="number" id="targetInput" placeholder="e.g. 13" value="13" />

<button id="startBtn">Start Two Pointers</button>

<div class="array-container" id="arrayDisplay"></div>

<div class="output" id="output"></div>

<div class="explanation">
  <strong>Explanation:</strong> This demo shows the two pointers approach to find two numbers in a <em>sorted</em> array that add up to the target sum.
  Two pointers start at the beginning (left) and end (right) of the array and move inward based on the sum compared to the target.
</div>

<script>
  // Helper: sleep for ms milliseconds
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // Function to render the array with pointers highlighted
  function renderArray(arr, leftIndex = null, rightIndex = null, highlightIndices = []) {
    const container = document.getElementById('arrayDisplay');
    container.innerHTML = ''; // clear

    arr.forEach((num, i) => {
      let span = document.createElement('span');
      span.textContent = num.toString().padStart(2, ' ');
      span.className = 'normal';

      if (i === leftIndex && i === rightIndex) {
        // Same position (only one pointer)
        span.className = 'pointer left-pointer right-pointer highlight';
        span.style.background = '#6f42c1'; // purple for overlap
      } else if (i === leftIndex) {
        span.className = 'pointer left-pointer';
      } else if (i === rightIndex) {
        span.className = 'pointer right-pointer';
      }

      if (highlightIndices.includes(i)) {
        span.classList.add('highlight');
      }
      container.appendChild(span);
    });
  }

  async function twoPointersDemo(arr, target) {
    const output = document.getElementById('output');
    let left = 0;
    let right = arr.length - 1;

    output.textContent = '';
    renderArray(arr, left, right);

    while (left < right) {
      let sum = arr[left] + arr[right];
      output.textContent = `Checking elements at left (${left}): ${arr[left]} and right (${right}): ${arr[right]}, sum = ${sum}`;

      renderArray(arr, left, right, [left, right]);
      await sleep(1500);

      if (sum === target) {
        output.textContent = `Found! Elements at indices ${left} and ${right} sum to ${target} (${arr[left]} + ${arr[right]}).`;
        renderArray(arr, left, right, [left, right]);
        return;
      } else if (sum < target) {
        output.textContent += `\nSum is less than target (${sum} < ${target}), moving left pointer rightwards.`;
        left++;
      } else {
        output.textContent += `\nSum is more than target (${sum} > ${target}), moving right pointer leftwards.`;
        right--;
      }
      renderArray(arr, left, right);
      await sleep(1500);
    }
    output.textContent = `No two elements found that add up to ${target}.`;
    renderArray(arr);
  }

  document.getElementById('startBtn').addEventListener('click', async () => {
    const inputStr = document.getElementById('arrayInput').value.trim();
    const targetStr = document.getElementById('targetInput').value.trim();

    if (!inputStr) {
      alert('Please enter a sorted array of numbers.');
      return;
    }
    if (!targetStr) {
      alert('Please enter a target sum.');
      return;
    }

    let arr = inputStr.split(',').map(s => s.trim()).filter(s => s !== '').map(Number);
    if (arr.some(isNaN)) {
      alert('Please enter only valid numbers separated by commas.');
      return;
    }

    // Check if array is sorted (non-decreasing)
    for (let i=1; i<arr.length; i++) {
      if (arr[i] < arr[i-1]) {
        alert('Array is not sorted! Please enter a sorted array in ascending order for this demo.');
        return;
      }
    }

    let target = Number(targetStr);

    document.getElementById('output').textContent = 'Starting...';
    renderArray(arr);
    await twoPointersDemo(arr, target);
  });
</script>
</body>
</html>