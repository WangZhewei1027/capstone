{
  "id": "e039f943-cd32-11f0-a949-f901cf5609c9",
  "timestamp": "2025-11-29T14:52:45.602Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Binary Search Tree (BST)",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Binary Search Tree (BST) Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f4f7fa;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  h1 {\n    color: #023e8a;\n  }\n  #controls {\n    margin-bottom: 20px;\n  }\n  input[type=\"number\"] {\n    width: 80px;\n    padding: 6px;\n    margin-right: 10px;\n    font-size: 16px;\n  }\n  button {\n    padding: 8px 14px;\n    margin-right: 6px;\n    font-size: 16px;\n    border: none;\n    background: #0077b6;\n    color: white;\n    cursor: pointer;\n    border-radius: 4px;\n    transition: background 0.3s ease;\n  }\n  button:hover {\n    background: #023e8a;\n  }\n  #message {\n    margin-top: 10px;\n    min-height: 18px;\n    color: #0077b6;\n    font-weight: bold;\n  }\n  #tree-container {\n    margin-top: 20px;\n    position: relative;\n    width: 100%;\n    max-width: 900px;\n    height: 380px;\n    background: white;\n    border: 2px solid #0077b6;\n    border-radius: 8px;\n    overflow-x: auto;\n    overflow-y: hidden;\n    padding-top: 20px;\n  }\n  svg {\n    display: block;\n    margin: 0 auto;\n  }\n  .node {\n    fill: #caf0f8;\n    stroke: #0077b6;\n    stroke-width: 2;\n    cursor: pointer;\n  }\n  .node.highlight {\n    fill: #ffb703;\n  }\n  text {\n    font-weight: bold;\n    fill: #03045e;\n    user-select: none;\n  }\n  line {\n    stroke: #0077b6;\n    stroke-width: 2;\n  }\n</style>\n</head>\n<body>\n  <h1>Binary Search Tree (BST) Demo</h1>\n  <div id=\"controls\">\n    <input type=\"number\" id=\"valueInput\" placeholder=\"Enter number\" />\n    <button id=\"insertBtn\">Insert</button>\n    <button id=\"searchBtn\">Search</button>\n    <button id=\"inorderBtn\">In-order Traversal</button>\n    <button id=\"preorderBtn\">Pre-order Traversal</button>\n    <button id=\"postorderBtn\">Post-order Traversal</button>\n    <button id=\"clearBtn\" style=\"background:#d90429;\">Clear</button>\n  </div>\n  <div id=\"message\"></div>\n  <div id=\"tree-container\">\n    <!-- SVG will be injected here -->\n  </div>\n\n<script>\nclass Node {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n    // Position for visualization\n    this.x = 0;\n    this.y = 0;\n  }\n}\n\nclass BST {\n  constructor() {\n    this.root = null;\n  }\n\n  insert(value) {\n    if(this.root === null) {\n      this.root = new Node(value);\n      return true;\n    }\n    return this._insert(this.root, value);\n  }\n\n  _insert(node, value) {\n    if(value === node.value) {\n      return false; // duplicate, do not insert\n    }\n    if(value < node.value) {\n      if(node.left == null) {\n        node.left = new Node(value);\n        return true;\n      } else {\n        return this._insert(node.left, value);\n      }\n    } else {\n      if(node.right == null) {\n        node.right = new Node(value);\n        return true;\n      } else {\n        return this._insert(node.right, value);\n      }\n    }\n  }\n\n  search(value) {\n    return this._search(this.root, value);\n  }\n\n  _search(node, value) {\n    if(node == null) return null;\n    if(value === node.value) return node;\n    if(value < node.value) return this._search(node.left, value);\n    return this._search(node.right, value);\n  }\n\n  inorder() {\n    const result = [];\n    this._inorder(this.root, result);\n    return result;\n  }\n  _inorder(node, result) {\n    if(node === null) return;\n    this._inorder(node.left, result);\n    result.push(node.value);\n    this._inorder(node.right, result);\n  }\n\n  preorder() {\n    const result = [];\n    this._preorder(this.root, result);\n    return result;\n  }\n  _preorder(node, result) {\n    if(node === null) return;\n    result.push(node.value);\n    this._preorder(node.left, result);\n    this._preorder(node.right, result);\n  }\n\n  postorder() {\n    const result = [];\n    this._postorder(this.root, result);\n    return result;\n  }\n  _postorder(node, result) {\n    if(node === null) return;\n    this._postorder(node.left, result);\n    this._postorder(node.right, result);\n    result.push(node.value);\n  }\n}\n\n// Visualization logic\nconst treeContainer = document.getElementById('tree-container');\nconst messageDiv = document.getElementById('message');\n\nconst NODE_RADIUS = 20;\nconst LEVEL_HEIGHT = 80;\n\nlet bst = new BST();\n\nfunction clearMessage() {\n  messageDiv.textContent = '';\n}\n\nfunction showMessage(msg, isError = false) {\n  messageDiv.textContent = msg;\n  messageDiv.style.color = isError ? '#d90429' : '#0077b6';\n}\n\nfunction computeNodePositions(root) {\n  // We will do an inorder x-position assignment and level-based y-position\n  let positions = [];\n  let x = 0;\n\n  function assignPositions(node, depth) {\n    if (!node) return;\n    assignPositions(node.left, depth + 1);\n    node.x = x++;\n    node.y = depth;\n    assignPositions(node.right, depth + 1);\n  }\n\n  assignPositions(root, 0);\n}\n\nfunction drawTree(root) {\n  treeContainer.innerHTML = '';\n  if(!root) return;\n\n  computeNodePositions(root);\n\n  // Find width needed\n  let totalNodes = 0;\n  function countNodes(n) {\n    if(!n) return 0;\n    return 1 + countNodes(n.left) + countNodes(n.right);\n  }\n  totalNodes = countNodes(root);\n\n  // Calculate dimensions\n  // Horizontal spacing between nodes\n  const H_SPACING = 70;\n  const width = Math.max(treeContainer.clientWidth, totalNodes * H_SPACING + 40);\n  const height = LEVEL_HEIGHT * (maxDepth(root) + 1) + 40;\n\n  // Create SVG\n  let svgNS = \"http://www.w3.org/2000/svg\";\n  let svg = document.createElementNS(svgNS, \"svg\");\n  svg.setAttribute(\"width\", width);\n  svg.setAttribute(\"height\", height);\n  svg.setAttribute(\"style\", \"overflow: visible\");\n\n  // Draw lines (edges) first\n  function drawEdges(node) {\n    if(!node) return;\n    if(node.left) {\n      let line = document.createElementNS(svgNS, \"line\");\n      line.setAttribute(\"x1\", node.x * H_SPACING + NODE_RADIUS + 10);\n      line.setAttribute(\"y1\", node.y * LEVEL_HEIGHT + NODE_RADIUS + 10);\n      line.setAttribute(\"x2\", node.left.x * H_SPACING + NODE_RADIUS + 10);\n      line.setAttribute(\"y2\", node.left.y * LEVEL_HEIGHT + NODE_RADIUS + 10);\n      svg.appendChild(line);\n      drawEdges(node.left);\n    }\n    if(node.right) {\n      let line = document.createElementNS(svgNS, \"line\");\n      line.setAttribute(\"x1\", node.x * H_SPACING + NODE_RADIUS + 10);\n      line.setAttribute(\"y1\", node.y * LEVEL_HEIGHT + NODE_RADIUS + 10);\n      line.setAttribute(\"x2\", node.right.x * H_SPACING + NODE_RADIUS + 10);\n      line.setAttribute(\"y2\", node.right.y * LEVEL_HEIGHT + NODE_RADIUS + 10);\n      svg.appendChild(line);\n      drawEdges(node.right);\n    }\n  }\n\n  drawEdges(root);\n\n  // Draw nodes\n  function drawNodes(node) {\n    if(!node) return;\n    let g = document.createElementNS(svgNS, \"g\");\n    g.setAttribute(\"class\", \"node-group\");\n    g.setAttribute(\"transform\", `translate(${node.x * H_SPACING + 10}, ${node.y * LEVEL_HEIGHT + 10})`);\n    g.style.cursor = 'pointer';\n\n    let circle = document.createElementNS(svgNS, \"circle\");\n    circle.classList.add(\"node\");\n    circle.setAttribute(\"r\", NODE_RADIUS);\n    circle.setAttribute(\"cx\", NODE_RADIUS);\n    circle.setAttribute(\"cy\", NODE_RADIUS);\n\n    let text = document.createElementNS(svgNS, \"text\");\n    text.setAttribute(\"x\", NODE_RADIUS);\n    text.setAttribute(\"y\", NODE_RADIUS + 6);\n    text.setAttribute(\"text-anchor\", \"middle\");\n    text.textContent = node.value;\n\n    g.appendChild(circle);\n    g.appendChild(text);\n\n    // Add tooltip and click: highlight node on click\n    g.title = `Value: ${node.value}`;\n    g.addEventListener(\"click\", () => {\n      clearHighlights();\n      circle.classList.add('highlight');\n      showMessage(`Node clicked: ${node.value}`);\n    });\n\n    svg.appendChild(g);\n\n    drawNodes(node.left);\n    drawNodes(node.right);\n  }\n  drawNodes(root);\n\n  treeContainer.appendChild(svg);\n}\n\n// utility: max depth of tree\nfunction maxDepth(node) {\n  if(!node) return 0;\n  return 1 + Math.max(maxDepth(node.left), maxDepth(node.right));\n}\n\nfunction clearHighlights() {\n  const circles = document.querySelectorAll('.node.highlight');\n  circles.forEach(c => c.classList.remove('highlight'));\n}\n\n// Animate highlighting a node (during search or traversals)\nasync function highlightNode(value) {\n  const circles = [...document.querySelectorAll('circle.node')];\n  for(let circle of circles) {\n    if(circle.nextSibling && +circle.nextSibling.textContent === value) {\n      circle.classList.add('highlight');\n      await sleep(700);\n      circle.classList.remove('highlight');\n      break;\n    }\n  }\n}\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n// Traversal animation\nasync function animateTraversal(values, traversalName) {\n  clearHighlights();\n  showMessage(`${traversalName} traversal: ${values.join(', ')}`);\n  for(let val of values) {\n    await highlightNode(val);\n  }\n  showMessage(`${traversalName} traversal complete.`);\n}\n\n// Handlers\ndocument.getElementById('insertBtn').addEventListener('click', () => {\n  clearMessage();\n  const input = document.getElementById('valueInput');\n  const val = parseInt(input.value);\n  if(isNaN(val)) {\n    showMessage(\"Please enter a valid number.\", true);\n    return;\n  }\n  const inserted = bst.insert(val);\n  if(!inserted) {\n    showMessage(`Value ${val} already exists in the BST.`, true);\n  } else {\n    showMessage(`Inserted ${val} into BST.`);\n  }\n  input.value = '';\n  drawTree(bst.root);\n});\n\ndocument.getElementById('searchBtn').addEventListener('click', async () => {\n  clearMessage();\n  const input = document.getElementById('valueInput');\n  const val = parseInt(input.value);\n  if(isNaN(val)) {\n    showMessage(\"Please enter a valid number to search.\", true);\n    return;\n  }\n  clearHighlights();\n  let node = bst.root;\n  let found = false;\n  while(node) {\n    await highlightNode(node.value);\n    if(val === node.value) {\n      found = true;\n      break;\n    }\n    node = val < node.value ? node.left : node.right;\n  }\n  if(found) {\n    showMessage(`Value ${val} found in BST.`);\n  } else {\n    showMessage(`Value ${val} not found in BST.`, true);\n  }\n  input.value = '';\n});\n\ndocument.getElementById('inorderBtn').addEventListener('click', async () => {\n  clearMessage();\n  const values = bst.inorder();\n  if(values.length === 0) {\n    showMessage(\"BST is empty.\", true);\n    return;\n  }\n  await animateTraversal(values, \"In-order\");\n});\n\ndocument.getElementById('preorderBtn').addEventListener('click', async () => {\n  clearMessage();\n  const values = bst.preorder();\n  if(values.length === 0) {\n    showMessage(\"BST is empty.\", true);\n    return;\n  }\n  await animateTraversal(values, \"Pre-order\");\n});\n\ndocument.getElementById('postorderBtn').addEventListener('click', async () => {\n  clearMessage();\n  const values = bst.postorder();\n  if(values.length === 0) {\n    showMessage(\"BST is empty.\", true);\n    return;\n  }\n  await animateTraversal(values, \"Post-order\");\n});\n\ndocument.getElementById('clearBtn').addEventListener('click', () => {\n  bst = new BST();\n  clearHighlights();\n  drawTree(bst.root);\n  clearMessage();\n});\n\n// Initialize empty tree view\ndrawTree(bst.root);\n\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Binary Search Tree (BST)"
    }
  ],
  "topic": "Binary Search Tree (BST)",
  "hasFSM": false,
  "hasTest": true
}