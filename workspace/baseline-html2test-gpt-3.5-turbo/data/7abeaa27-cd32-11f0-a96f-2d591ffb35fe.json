{
  "id": "7abeaa27-cd32-11f0-a96f-2d591ffb35fe",
  "timestamp": "2025-11-29T14:49:17.831Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Counting Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Counting Sort Demonstration</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 30px;\n    max-width: 700px;\n    line-height: 1.6;\n    background-color: #f9f9f9;\n  }\n  h1 {\n    text-align: center;\n    color: #004080;\n  }\n  label {\n    font-weight: bold;\n  }\n  input, button {\n    font-size: 16px;\n    padding: 6px 10px;\n    margin-top: 8px;\n  }\n  input[type=\"text\"] {\n    width: 80%;\n    margin-right: 10px;\n  }\n  #output {\n    background: #fff;\n    padding: 15px;\n    border: 2px solid #ddd;\n    margin-top: 20px;\n    min-height: 120px;\n    white-space: pre-wrap;\n    font-family: 'Courier New', monospace;\n  }\n  .step {\n    margin-bottom: 15px;\n    background: #eef6ff;\n    border-left: 5px solid #0077cc;\n    padding: 10px 15px;\n    border-radius: 4px;\n  }\n  .error {\n    color: #b00020;\n    margin-top: 10px;\n  }\n</style>\n</head>\n<body>\n  <h1>Counting Sort Algorithm Visualization</h1>\n\n  <label for=\"arrayInput\">Enter integers (comma or space separated):</label><br/>\n  <input type=\"text\" id=\"arrayInput\" placeholder=\"e.g. 4, 2, 2, 8, 3, 3, 1\" />\n  <button id=\"sortBtn\">Sort</button>\n  <div id=\"errorMsg\" class=\"error\"></div>\n\n  <div id=\"output\"></div>\n\n<script>\n/**\n * Counting Sort visualization.\n */\n\nconst arrayInput = document.getElementById('arrayInput');\nconst sortBtn = document.getElementById('sortBtn');\nconst output = document.getElementById('output');\nconst errorMsg = document.getElementById('errorMsg');\n\nsortBtn.addEventListener('click', () => {\n  errorMsg.textContent = '';\n  output.innerHTML = '';\n  let inputStr = arrayInput.value.trim();\n\n  if (!inputStr) {\n    errorMsg.textContent = 'Please enter at least one integer.';\n    return;\n  }\n\n  // Parse input into array of integers\n  let arr = inputStr.split(/[\\s,]+/).map(x => x.trim()).filter(x => x !== '');\n  let nums = [];\n  for(let v of arr){\n    if(!/^[-+]?\\d+$/.test(v)){\n      errorMsg.textContent = 'Invalid input: only integers are allowed.';\n      return;\n    }\n    nums.push(parseInt(v, 10));\n  }\n\n  if(nums.length === 0){\n    errorMsg.textContent = 'Please enter valid integers.';\n    return;\n  }\n\n  // Determine range for counting sort\n  let min = Math.min(...nums);\n  let max = Math.max(...nums);\n\n  if(max - min > 100000){\n    errorMsg.textContent = 'Range too large for counting sort visualization. Max - min should be <= 100000.';\n    return;\n  }\n\n  countingSortVisual(nums, min, max);\n});\n\nfunction countingSortVisual(arr, min, max){\n  output.innerHTML = '';\n  const n = arr.length;\n  let steps = [];\n\n  // Step 1: Show original array\n  steps.push({\n    title: 'Original Array',\n    desc: `The input array is:\\n[ ${arr.join(', ')} ]`\n  });\n\n  // Step 2: Initialize count array\n  const range = max - min + 1;\n  let count = new Array(range).fill(0);\n\n  steps.push({\n    title: 'Initialize Count Array',\n    desc: `Count array initialized with zeros. Length = max - min + 1 = ${range}\\n` +\n          `count = [${count.join(', ')}]`\n  });\n\n  // Step 3: Store count of each number\n  for(let num of arr){\n    count[num - min]++;\n  }\n  steps.push({\n    title: 'Count Frequencies',\n    desc: 'Count each number\\'s occurrences:\\n' +\n          `count = [${count.join(', ')}]\\n` +\n          'Index in count corresponds to (value - min).'\n  });\n\n  // Step 4: Modify count array to store cumulative counts\n  for(let i = 1; i < count.length; i++){\n    count[i] += count[i -1];\n  }\n  steps.push({\n    title: 'Cumulative Count',\n    desc: 'Update count array to contain cumulative sums:\\n' +\n          `count = [${count.join(', ')}]\\n` +\n          'This helps to place elements directly in output array.'\n  });\n\n  // Step 5: Build output array\n  let outputArr = new Array(n);\n  // Iterate backward to make Counting Sort stable\n  for(let i = n -1; i >= 0; i--){\n    let current = arr[i];\n    count[current - min]--;\n    let position = count[current - min];\n    outputArr[position] = current;\n  }\n  steps.push({\n    title: 'Build Sorted Output',\n    desc: `Place each element in output array using cumulative count indices, iterating backward for stable sort.\\n` +\n          `Sorted array:\\n[ ${outputArr.join(', ')} ]`\n  });\n\n  // Step 6: Final sorted array\n  steps.push({\n    title: 'Final Sorted Array',\n    desc: `[ ${outputArr.join(', ')} ]`\n  });\n\n  displaySteps(steps);\n}\n\nfunction displaySteps(steps){\n  output.innerHTML = '';\n  steps.forEach((step, i) => {\n    let stepDiv = document.createElement('div');\n    stepDiv.className = 'step';\n    stepDiv.innerHTML = `<strong>Step ${i + 1}: ${step.title}</strong>\\n<pre>${step.desc}</pre>`;\n    output.appendChild(stepDiv);\n  });\n}\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Counting Sort"
    }
  ],
  "topic": "Counting Sort",
  "hasFSM": false,
  "hasTest": true
}