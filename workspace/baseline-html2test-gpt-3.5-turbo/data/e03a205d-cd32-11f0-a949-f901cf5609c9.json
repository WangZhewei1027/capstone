{
  "id": "e03a205d-cd32-11f0-a949-f901cf5609c9",
  "timestamp": "2025-11-29T14:52:32.098Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Counting Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Counting Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  #input-section {\n    max-width: 600px;\n    margin: 0 auto 30px;\n    padding: 15px 20px;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);\n  }\n  label {\n    font-weight: bold;\n    display: block;\n    margin-bottom: 8px;\n  }\n  input[type=\"text\"] {\n    width: 100%;\n    font-size: 1rem;\n    padding: 8px;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n    box-sizing: border-box;\n  }\n  button {\n    margin-top: 15px;\n    padding: 10px 20px;\n    font-weight: 600;\n    font-size: 1rem;\n    color: white;\n    background-color: #0077E6;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n  }\n  button:disabled {\n    background-color: #999;\n    cursor: not-allowed;\n  }\n  #output-section {\n    max-width: 700px;\n    margin: 0 auto;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 12px rgb(0 0 0 / 0.1);\n    padding: 20px;\n  }\n  .step {\n    margin-bottom: 30px;\n  }\n  .step-title {\n    font-weight: 700;\n    margin-bottom: 12px;\n    font-size: 1.1rem;\n    border-bottom: 2px solid #0077E6;\n    padding-bottom: 4px;\n  }\n  .array-container {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px;\n    margin-top: 8px;\n  }\n  .element {\n    width: 30px;\n    height: 30px;\n    background: #0077E6;\n    color: white;\n    font-weight: 700;\n    text-align: center;\n    line-height: 30px;\n    border-radius: 4px;\n    user-select: none;\n  }\n  .count-element {\n    width: 40px;\n    height: 40px;\n    background: #33a852;\n    color: white;\n    font-weight: 700;\n    text-align: center;\n    line-height: 40px;\n    border-radius: 4px;\n    user-select: none;\n    position: relative;\n  }\n  .count-label {\n    position: absolute;\n    top: -18px;\n    width: 100%;\n    font-size: 0.8rem;\n    color: #333;\n  }\n  .highlight {\n    box-shadow: 0 0 8px 3px #ffbb33;\n  }\n  .info {\n    font-style: italic;\n    color: #666;\n    margin-top: 8px;\n  }\n  #error-message {\n    color: #cc0000;\n    font-weight: 600;\n    margin-top: 10px;\n  }\n\n  footer {\n    margin-top: 40px;\n    text-align: center;\n    color: #777;\n    font-size: 0.9rem;\n  }\n</style>\n</head>\n<body>\n<h1>Counting Sort Demonstration</h1>\n\n<section id=\"input-section\" aria-label=\"Input Section\">\n  <label for=\"arrayInput\">\n    Enter a list of non-negative integers (comma or space separated):\n  </label>\n  <input\n    id=\"arrayInput\"\n    type=\"text\"\n    placeholder=\"e.g. 4, 2, 2, 8, 3, 3, 1\"\n    aria-describedby=\"error-message\"\n  />\n  <button id=\"sortButton\">Sort using Counting Sort</button>\n  <div id=\"error-message\" role=\"alert\" aria-live=\"assertive\"></div>\n</section>\n\n<section id=\"output-section\" aria-live=\"polite\" aria-atomic=\"true\">\n  <!-- Steps will be injected here -->\n</section>\n\n<script>\n  (() => {\n    const arrayInput = document.getElementById('arrayInput');\n    const sortButton = document.getElementById('sortButton');\n    const outputSection = document.getElementById('output-section');\n    const errorMessage = document.getElementById('error-message');\n\n    // Utility: create a container showing array elements.\n    function createArrayDisplay(arr, highlightIndices = [], className = 'element') {\n      const container = document.createElement('div');\n      container.className = 'array-container';\n      arr.forEach((val, idx) => {\n        const el = document.createElement('div');\n        el.className = className;\n        el.textContent = val;\n        if (highlightIndices.includes(idx)) {\n          el.classList.add('highlight');\n        }\n        container.appendChild(el);\n      });\n      return container;\n    }\n\n    // Create counting array display with labels and counts\n    function createCountDisplay(countArr, highlightIndex = -1) {\n      const container = document.createElement('div');\n      container.className = 'array-container';\n      countArr.forEach((count, index) => {\n        const el = document.createElement('div');\n        el.className = 'count-element';\n        if (index === highlightIndex) el.classList.add('highlight');\n\n        const label = document.createElement('div');\n        label.textContent = index;\n        label.className = 'count-label';\n        el.appendChild(label);\n\n        const countVal = document.createElement('div');\n        countVal.textContent = count;\n        el.appendChild(countVal);\n\n        container.appendChild(el);\n      });\n      return container;\n    }\n\n    // Parse and validate user input\n    function parseInput(inputStr) {\n      if (!inputStr.trim()) return null;\n      // Split by comma or whitespace\n      const tokens = inputStr.trim().split(/[\\s,]+/);\n      let arr = [];\n      for (let t of tokens) {\n        if (!/^\\d+$/.test(t)) return null; // invalid if not integer >= 0\n        const num = parseInt(t, 10);\n        if (num < 0) return null;\n        arr.push(num);\n      }\n      return arr;\n    }\n\n    // Clear output and error\n    function clearOutput() {\n      outputSection.innerHTML = '';\n      errorMessage.textContent = '';\n    }\n\n    // Display a step in the sorting process\n    function displayStep(title, description, contentElement) {\n      const stepDiv = document.createElement('div');\n      stepDiv.className = 'step';\n\n      const stepTitle = document.createElement('h2');\n      stepTitle.className = 'step-title';\n      stepTitle.textContent = title;\n      stepDiv.appendChild(stepTitle);\n\n      const descP = document.createElement('p');\n      descP.className = 'info';\n      descP.textContent = description;\n      stepDiv.appendChild(descP);\n\n      stepDiv.appendChild(contentElement);\n      outputSection.appendChild(stepDiv);\n    }\n\n    // The counting sort demonstration function\n    function countingSortDemo(arr) {\n      clearOutput();\n\n      // Step 1: Show the original unsorted array\n      displayStep(\n        'Step 1: Original Array',\n        'This is the unsorted array you provided.',\n        createArrayDisplay(arr)\n      );\n\n      // Find max value (k)\n      const maxVal = Math.max(...arr);\n\n      displayStep(\n        'Step 2: Determine Range',\n        `The maximum value in the array is ${maxVal}. We create a count array of size ${maxVal +\n          1} to count the occurrences of each integer.`,\n        createArrayDisplay([maxVal], [], 'element')\n      );\n\n      // Step 3: Initialize count array\n      const count = new Array(maxVal + 1).fill(0);\n\n      // Step 4: Count frequencies\n      let stepCount = 3;\n      arr.forEach((num, index) => {\n        count[num]++;\n        // For demonstration, we can update the count array after counting each element\n        displayStep(\n          `Step ${stepCount}: Count Frequencies (Processing element arr[${index}] = ${num})`,\n          `Increment count of number ${num}.`,\n          createCountDisplay(count, num)\n        );\n        stepCount++;\n      });\n\n      // Step 5: Calculate cumulative counts (prefix sums)\n      displayStep(\n        `Step ${stepCount}: Count Array Before Cumulative Sum`,\n        'Current counts of each integer:',\n        createCountDisplay(count)\n      );\n      stepCount++;\n\n      for (let i = 1; i < count.length; i++) {\n        count[i] += count[i - 1];\n        displayStep(\n          `Step ${stepCount}: Cumulative Count at index ${i}`,\n          `Add count[${i - 1}] to count[${i}].`,\n          createCountDisplay(count, i)\n        );\n        stepCount++;\n      }\n\n      // Step 6: Place elements into output array in sorted order\n      const output = new Array(arr.length);\n      displayStep(\n        `Step ${stepCount}: Initialize Output Array`,\n        'Create an empty array to place sorted elements.',\n        document.createElement('div')\n      );\n      stepCount++;\n\n      // We must iterate from right to left to maintain stability\n      for (let i = arr.length - 1; i >= 0; i--) {\n        const num = arr[i];\n        count[num]--;\n        output[count[num]] = num;\n        displayStep(\n          `Step ${stepCount}: Place element ${num} at output index ${count[num]}`,\n          `Decrement count[${num}] to ${count[num]} and place ${num} at output[${count[num]}].`,\n          createArrayDisplay(output.filter(_ => _ !== undefined))\n        );\n        stepCount++;\n      }\n\n      // Step 7: Final sorted output\n      displayStep(\n        'Step ' + stepCount + ': Sorted Array',\n        'This is the final sorted array produced by Counting Sort.',\n        createArrayDisplay(output)\n      );\n    }\n\n    sortButton.addEventListener('click', () => {\n      clearOutput();\n      const arr = parseInput(arrayInput.value);\n      if (arr === null) {\n        errorMessage.textContent =\n          'Please enter a valid list of non-negative integers separated by commas or spaces.';\n        return;\n      }\n      if (arr.length === 0) {\n        errorMessage.textContent = 'Input array cannot be empty.';\n        return;\n      }\n      if (arr.length > 50) {\n        errorMessage.textContent = 'Please enter 50 or fewer numbers for visualization.';\n        return;\n      }\n      countingSortDemo(arr);\n    });\n  })();\n</script>\n<footer>Counting Sort Visualization &copy; 2024</footer>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Counting Sort"
    }
  ],
  "topic": "Counting Sort",
  "hasFSM": false,
  "hasTest": true
}