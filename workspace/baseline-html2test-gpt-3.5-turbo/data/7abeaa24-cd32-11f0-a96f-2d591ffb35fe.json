{
  "id": "7abeaa24-cd32-11f0-a96f-2d591ffb35fe",
  "timestamp": "2025-11-29T14:49:35.412Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Merge Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Merge Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f5f5f5;\n  }\n  h1 {\n    text-align: center;\n  }\n  #inputSection {\n    text-align: center;\n    margin-bottom: 10px;\n  }\n  #arrayInput {\n    width: 300px;\n    padding: 8px;\n    font-size: 16px;\n  }\n  #sortBtn {\n    padding: 9px 16px;\n    font-size: 16px;\n    margin-left: 8px;\n    cursor: pointer;\n  }\n  #visualization {\n    margin: 0 auto;\n    margin-top: 20px;\n    width: 90%;\n    max-width: 900px;\n    height: 300px;\n    border: 1px solid #ccc;\n    display: flex;\n    align-items: flex-end;\n    background: white;\n    position: relative;\n    overflow-x: auto;\n    padding-bottom: 20px;\n  }\n  .bar {\n    margin: 0 2px;\n    background-color: #007bff;\n    text-align: center;\n    color: white;\n    font-size: 12px;\n    border-radius: 3px 3px 0 0;\n    user-select: none;\n    transition: background-color 0.3s;\n  }\n  .bar.comparing {\n    background-color: #dc3545;\n  }\n  .bar.merging {\n    background-color: #28a745;\n  }\n  #stepsLog {\n    max-height: 150px;\n    overflow-y: auto;\n    margin-top: 16px;\n    background: #fff;\n    border: 1px solid #ccc;\n    padding: 12px;\n    font-family: monospace;\n    white-space: pre-wrap;\n  }\n  #footer {\n    text-align: center;\n    margin-top: 30px;\n    color: #777;\n  }\n  .highlight {\n    font-weight: bold;\n    color: #dc3545;\n  }\n</style>\n</head>\n<body>\n\n<h1>Merge Sort Visualization</h1>\n\n<div id=\"inputSection\">\n  <input\n    type=\"text\"\n    id=\"arrayInput\"\n    placeholder=\"Enter numbers separated by commas\"\n    value=\"38,27,43,3,9,82,10\"\n  />\n  <button id=\"sortBtn\">Sort</button>\n</div>\n\n<div id=\"visualization\"></div>\n\n<div id=\"stepsLog\"></div>\n\n<div id=\"footer\">\n  Enter a list of numbers separated by commas and click Sort to see Merge Sort in action.\n</div>\n\n<script>\n  const input = document.getElementById(\"arrayInput\");\n  const sortBtn = document.getElementById(\"sortBtn\");\n  const visualization = document.getElementById(\"visualization\");\n  const stepsLog = document.getElementById(\"stepsLog\");\n\n  let bars = [];\n  let delay = 500; // milliseconds between steps\n\n  function createBars(arr) {\n    visualization.innerHTML = \"\";\n    bars = [];\n    // Find max value to scale heights\n    const maxVal = Math.max(...arr);\n    for (let i = 0; i < arr.length; i++) {\n      const bar = document.createElement(\"div\");\n      bar.classList.add(\"bar\");\n      bar.style.height = `${(arr[i] / maxVal) * 100}%`;\n      bar.style.width = `calc((90% / ${arr.length}) - 4px)`;\n      bar.textContent = arr[i];\n      visualization.appendChild(bar);\n      bars.push(bar);\n    }\n  }\n\n  function logStep(message) {\n    stepsLog.textContent += message + \"\\n\";\n    stepsLog.scrollTop = stepsLog.scrollHeight;\n  }\n\n  // Async wait helper\n  function wait(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  // Merge function with visualization\n  async function merge(arr, left, mid, right) {\n    let n1 = mid - left + 1;\n    let n2 = right - mid;\n\n    let L = new Array(n1);\n    let R = new Array(n2);\n\n    for (let i = 0; i < n1; i++) {\n      L[i] = arr[left + i];\n    }\n    for (let j = 0; j < n2; j++) {\n      R[j] = arr[mid + 1 + j];\n    }\n\n    logStep(\n      `Merging left: [${L.join(\", \")}] and right: [${R.join(\", \")}] at positions ${left} to ${right}`\n    );\n\n    let i = 0,\n      j = 0,\n      k = left;\n\n    while (i < n1 && j < n2) {\n      // Highlight bars being compared\n      bars[k].classList.add(\"merging\");\n      bars[left + i].classList.add(\"comparing\");\n      bars[mid + 1 + j].classList.add(\"comparing\");\n\n      await wait(delay);\n\n      if (L[i] <= R[j]) {\n        arr[k] = L[i];\n        bars[k].textContent = L[i];\n        bars[k].style.height = `${(L[i] / Math.max(...arr)) * 100}%`;\n        i++;\n      } else {\n        arr[k] = R[j];\n        bars[k].textContent = R[j];\n        bars[k].style.height = `${(R[j] / Math.max(...arr)) * 100}%`;\n        j++;\n      }\n\n      // Remove highlight for compared bars\n      bars[left + i - (L[i-1] === arr[k] ? 1 : 0)]?.classList.remove(\"comparing\");\n      bars[mid + 1 + j - (R[j-1] === arr[k] ? 1 : 0)]?.classList.remove(\"comparing\");\n      bars[k].classList.remove(\"merging\");\n\n      await wait(delay);\n\n      k++;\n    }\n\n    // Copy remaining elements of L[]\n    while (i < n1) {\n      bars[k].classList.add(\"merging\");\n      bars[left + i].classList.add(\"comparing\");\n      await wait(delay);\n\n      arr[k] = L[i];\n      bars[k].textContent = L[i];\n      bars[k].style.height = `${(L[i] / Math.max(...arr)) * 100}%`;\n\n      bars[left + i].classList.remove(\"comparing\");\n      bars[k].classList.remove(\"merging\");\n\n      i++;\n      k++;\n\n      await wait(delay);\n    }\n\n    // Copy remaining elements of R[]\n    while (j < n2) {\n      bars[k].classList.add(\"merging\");\n      bars[mid + 1 + j].classList.add(\"comparing\");\n      await wait(delay);\n\n      arr[k] = R[j];\n      bars[k].textContent = R[j];\n      bars[k].style.height = `${(R[j] / Math.max(...arr)) * 100}%`;\n\n      bars[mid + 1 + j].classList.remove(\"comparing\");\n      bars[k].classList.remove(\"merging\");\n\n      j++;\n      k++;\n\n      await wait(delay);\n    }\n    logStep(`Merged portion: [${arr.slice(left, right + 1).join(\", \")}]\\n`);\n  }\n\n  async function mergeSort(arr, left, right) {\n    if (left >= right) {\n      return;\n    }\n    const mid = Math.floor((left + right) / 2);\n\n    logStep(`Splitting array at positions [${left}..${mid}] and [${mid + 1}..${right}]`);\n\n    await mergeSort(arr, left, mid);\n    await mergeSort(arr, mid + 1, right);\n\n    await merge(arr, left, mid, right);\n  }\n\n  sortBtn.addEventListener(\"click\", async () => {\n    stepsLog.textContent = \"\";\n    const rawInput = input.value.trim();\n\n    if (!rawInput) {\n      alert(\"Please enter some numbers separated by commas.\");\n      return;\n    }\n\n    let arr = rawInput.split(\",\").map((v) => Number(v.trim()));\n\n    if (arr.some((x) => isNaN(x))) {\n      alert(\"Please enter valid numbers separated by commas.\");\n      return;\n    }\n    if (arr.length === 0) return;\n\n    createBars(arr);\n    sortBtn.disabled = true;\n    input.disabled = true;\n\n    logStep(`Initial array: [${arr.join(\", \")}]\\n`);\n\n    await mergeSort(arr, 0, arr.length - 1);\n\n    logStep(`Sorting complete! Final sorted array: [${arr.join(\", \")}]`);\n    sortBtn.disabled = false;\n    input.disabled = false;\n  });\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Merge Sort"
    }
  ],
  "topic": "Merge Sort",
  "hasFSM": false,
  "hasTest": true
}