{
  "id": "20d2afb1-cd33-11f0-bdf9-b3d97e91273d",
  "timestamp": "2025-11-29T14:54:15.145Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Priority Queue",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Priority Queue Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 1rem;\n    background: #f9fafb;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  .container {\n    max-width: 480px;\n    margin: 0 auto;\n    background: #fff;\n    padding: 1rem 2rem 2rem;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n    border-radius: 6px;\n  }\n  label {\n    display: block;\n    margin-top: 1rem;\n  }\n  input[type=\"text\"], input[type=\"number\"] {\n    width: 100%;\n    box-sizing: border-box;\n    padding: 0.4rem 0.6rem;\n    margin-top: 0.3rem;\n    font-size: 1rem;\n  }\n  button {\n    margin-top: 1.3rem;\n    font-size: 1rem;\n    padding: 0.5rem 1.2rem;\n    border-radius: 4px;\n    border: none;\n    cursor: pointer;\n    background: #2563eb;\n    color: white;\n  }\n  button:disabled {\n    background: #94a3b8;\n    cursor: not-allowed;\n  }\n  .queue-view {\n    margin-top: 2rem;\n  }\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 0.6rem;\n  }\n  th, td {\n    border-bottom: 1px solid #ddd;\n    padding: 0.6rem 0.8rem;\n    text-align: left;\n  }\n  th {\n    background-color: #e0e7ff;\n  }\n  .output {\n    margin-top: 1.5rem;\n    padding: 1rem;\n    background: #f3f4f6;\n    border-radius: 4px;\n    font-family: monospace;\n    white-space: pre-wrap;\n    max-height: 150px;\n    overflow-y: auto;\n  }\n</style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>Priority Queue Demo</h1>\n    <p>Insert elements with priority and dequeue highest priority first (lowest priority number = highest priority).</p>\n\n    <label for=\"itemInput\">Item Value:</label>\n    <input type=\"text\" id=\"itemInput\" placeholder=\"Enter value (string)\" />\n\n    <label for=\"priorityInput\">Priority (integer):</label>\n    <input type=\"number\" id=\"priorityInput\" placeholder=\"Enter priority (lower = higher priority)\" min=\"0\" />\n\n    <button id=\"enqueueBtn\" disabled>Add to Priority Queue</button>\n    <button id=\"dequeueBtn\" disabled>Dequeue Highest Priority</button>\n\n    <div class=\"queue-view\">\n      <h3>Current Queue (sorted by priority):</h3>\n      <table>\n        <thead><tr><th>Index</th><th>Item</th><th>Priority</th></tr></thead>\n        <tbody id=\"queueBody\">\n          <tr><td colspan=\"3\" style=\"text-align:center;color:#777;\">Queue is empty</td></tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class=\"output\" id=\"outputArea\" aria-live=\"polite\" aria-atomic=\"true\"></div>\n  </div>\n\n<script>\n// Priority Queue implemented with a binary min-heap for efficiency\nclass PriorityQueue {\n  constructor() {\n    this.heap = [];\n  }\n\n  _parentIndex(i) {\n    return Math.floor((i - 1) / 2);\n  }\n  _leftChildIndex(i) {\n    return 2 * i + 1;\n  }\n  _rightChildIndex(i) {\n    return 2 * i + 2;\n  }\n\n  _swap(i, j) {\n    [this.heap[i], this.heap[j]] = [this.heap[j], this.heap[i]];\n  }\n\n  _heapifyUp(index) {\n    let currentIndex = index;\n    while (currentIndex > 0) {\n      let parent = this._parentIndex(currentIndex);\n      if (this.heap[parent].priority > this.heap[currentIndex].priority) {\n        this._swap(parent, currentIndex);\n        currentIndex = parent;\n      } else {\n        break;\n      }\n    }\n  }\n\n  _heapifyDown(index) {\n    let currentIndex = index;\n    let left, right, smallest;\n\n    while (true) {\n      left = this._leftChildIndex(currentIndex);\n      right = this._rightChildIndex(currentIndex);\n      smallest = currentIndex;\n\n      if (\n        left < this.heap.length &&\n        this.heap[left].priority < this.heap[smallest].priority\n      ) {\n        smallest = left;\n      }\n      if (\n        right < this.heap.length &&\n        this.heap[right].priority < this.heap[smallest].priority\n      ) {\n        smallest = right;\n      }\n\n      if (smallest !== currentIndex) {\n        this._swap(currentIndex, smallest);\n        currentIndex = smallest;\n      } else {\n        break;\n      }\n    }\n  }\n\n  enqueue(item, priority) {\n    if (priority == null || isNaN(priority)) {\n      throw new Error(\"Priority must be a number\");\n    }\n    let node = { item, priority: Number(priority) };\n    this.heap.push(node);\n    this._heapifyUp(this.heap.length - 1);\n  }\n\n  dequeue() {\n    if (this.isEmpty()) return null;\n    const root = this.heap[0];\n    const last = this.heap.pop();\n    if (!this.isEmpty()) {\n      this.heap[0] = last;\n      this._heapifyDown(0);\n    }\n    return root;\n  }\n\n  peek() {\n    return this.isEmpty() ? null : this.heap[0];\n  }\n\n  size() {\n    return this.heap.length;\n  }\n\n  isEmpty() {\n    return this.heap.length === 0;\n  }\n\n  // Return a sorted array (lowest priority first) without altering heap\n  toSortedArray() {\n    // clone the heap array\n    let copy = this.heap.slice();\n    let result = [];\n    let tempPQ = new PriorityQueue();\n    tempPQ.heap = copy;\n    while (!tempPQ.isEmpty()) {\n      result.push(tempPQ.dequeue());\n    }\n    return result;\n  }\n}\n\n// UI Logic\nconst pq = new PriorityQueue();\n\nconst itemInput = document.getElementById('itemInput');\nconst priorityInput = document.getElementById('priorityInput');\nconst enqueueBtn = document.getElementById('enqueueBtn');\nconst dequeueBtn = document.getElementById('dequeueBtn');\nconst queueBody = document.getElementById('queueBody');\nconst outputArea = document.getElementById('outputArea');\n\nfunction updateButtons() {\n  enqueueBtn.disabled =\n    itemInput.value.trim() === '' ||\n    priorityInput.value.trim() === '' ||\n    isNaN(priorityInput.value);\n  dequeueBtn.disabled = pq.isEmpty();\n}\n\nfunction renderQueue() {\n  const arr = pq.toSortedArray();\n  queueBody.innerHTML = '';\n  if (arr.length === 0) {\n    queueBody.innerHTML =\n      '<tr><td colspan=\"3\" style=\"text-align:center;color:#777;\">Queue is empty</td></tr>';\n    return;\n  }\n  arr.forEach(({ item, priority }, i) => {\n    const tr = document.createElement('tr');\n    tr.innerHTML = `<td>${i + 1}</td><td>${escapeHTML(item)}</td><td>${priority}</td>`;\n    queueBody.appendChild(tr);\n  });\n}\n\nfunction escapeHTML(text) {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\nfunction logOutput(msg) {\n  outputArea.textContent = msg;\n}\n\nenqueueBtn.addEventListener('click', () => {\n  const item = itemInput.value.trim();\n  const priorityVal = priorityInput.value.trim();\n  if (item === '' || priorityVal === '' || isNaN(priorityVal)) {\n    alert('Please enter valid item and numeric priority.');\n    return;\n  }\n  try {\n    pq.enqueue(item, Number(priorityVal));\n    logOutput(`Enqueued: \"${item}\" with priority ${priorityVal}`);\n    renderQueue();\n    updateButtons();\n    itemInput.value = '';\n    priorityInput.value = '';\n    itemInput.focus();\n  } catch (e) {\n    alert(e.message);\n  }\n});\n\ndequeueBtn.addEventListener('click', () => {\n  const removed = pq.dequeue();\n  if (removed) {\n    logOutput(`Dequeued: \"${removed.item}\" with priority ${removed.priority}`);\n  } else {\n    logOutput(`Queue is empty.`);\n  }\n  renderQueue();\n  updateButtons();\n});\n\nitemInput.addEventListener('input', updateButtons);\npriorityInput.addEventListener('input', updateButtons);\n\nupdateButtons();\nrenderQueue();\n\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Priority Queue"
    }
  ],
  "topic": "Priority Queue",
  "hasFSM": false,
  "hasTest": true
}