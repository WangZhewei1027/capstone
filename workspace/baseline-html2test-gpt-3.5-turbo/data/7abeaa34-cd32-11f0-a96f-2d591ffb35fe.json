{
  "id": "7abeaa34-cd32-11f0-a96f-2d591ffb35fe",
  "timestamp": "2025-11-29T14:49:30.284Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Knapsack Problem",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>0/1 Knapsack Problem Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 1em;\n    max-width: 900px;\n  }\n  h1 {\n    text-align: center;\n  }\n  label {\n    display: block;\n    margin: 0.5em 0 0.2em;\n  }\n  input[type=number], textarea {\n    width: 100%;\n    box-sizing: border-box;\n    font-family: monospace;\n    font-size: 1em;\n    padding: 0.3em;\n  }\n  textarea {\n    height: 100px;\n  }\n  button {\n    margin-top: 1em;\n    padding: 0.6em 1.2em;\n    font-size: 1em;\n    cursor: pointer;\n  }\n  .result {\n    margin-top: 1.5em;\n    border-top: 2px solid #444;\n    padding-top: 1em;\n  }\n  table {\n    border-collapse: collapse;\n    margin-top: 0.5em;\n    width: 100%;\n  }\n  th, td {\n    border: 1px solid #666;\n    padding: 0.3em 0.6em;\n    text-align: center;\n  }\n  .explanation {\n    margin-top: 1em;\n    background: #f9f9f9;\n    border: 1px solid #bbb;\n    padding: 0.6em;\n    font-size: 0.9em;\n    white-space: pre-wrap;\n  }\n  .footer {\n    margin-top: 3em;\n    font-size: 0.8em;\n    text-align: center;\n    color: #666;\n  }\n</style>\n</head>\n<body>\n<h1>0/1 Knapsack Problem Solver</h1>\n\n<p>\n  Enter items as one per line in the format: <code>value weight</code><br />\n  Example:<br />\n  <code>60 10<br />\n  100 20<br />\n  120 30</code><br />\n</p>\n\n<label for=\"items\">Items (value weight):</label>\n<textarea id=\"items\" aria-label=\"List of items with value and weight\"></textarea>\n\n<label for=\"capacity\">Knapsack Capacity (weight limit):</label>\n<input type=\"number\" id=\"capacity\" min=\"1\" value=\"50\" aria-label=\"Knapsack capacity\" />\n\n<button id=\"solveBtn\">Solve Knapsack</button>\n\n<div class=\"result\" id=\"result\" aria-live=\"polite\" aria-atomic=\"true\"></div>\n\n<script>\n(() => {\n  // Parse input items from textarea\n  function parseItems(text) {\n    const lines = text.trim().split('\\n');\n    const items = [];\n    for(let i=0; i<lines.length; i++) {\n      const line = lines[i].trim();\n      if(!line) continue;\n      const parts = line.split(/\\s+/);\n      if(parts.length !== 2) {\n        throw new Error(`Line ${i+1} is invalid. Expected format: value weight`);\n      }\n      const value = Number(parts[0]);\n      const weight = Number(parts[1]);\n      if(isNaN(value) || isNaN(weight) || value < 0 || weight <= 0) {\n        throw new Error(`Line ${i+1} invalid values. Value must be â‰¥ 0, weight > 0`);\n      }\n      items.push({value, weight, index: i+1});\n    }\n    if(items.length === 0) {\n      throw new Error(\"No valid items provided.\");\n    }\n    return items;\n  }\n\n  // Solve 0/1 Knapsack Problem using dynamic programming\n  // Returns {maxValue, selectedItems} \n  // selectedItems: array of item objects included in optimal solution\n  function knapsack(items, capacity) {\n    const n = items.length;\n    // dp[i][w] = max value using first i items and capacity w\n    // Use one-based indexing for code clarity:\n    // dp array dimensions: (n+1) x (capacity+1)\n    const dp = new Array(n+1);\n    for(let i=0; i<=n; i++) {\n      dp[i] = new Array(capacity+1).fill(0);\n    }\n    // Fill dp table\n    for(let i=1; i<=n; i++) {\n      const {value, weight} = items[i-1];\n      for(let w=0; w<=capacity; w++) {\n        if(weight > w) {\n          dp[i][w] = dp[i-1][w];\n        } else {\n          dp[i][w] = Math.max(\n            dp[i-1][w],\n            dp[i-1][w - weight] + value\n          );\n        }\n      }\n    }\n    // Backtrack to find selected items\n    let w = capacity;\n    const selectedItems = [];\n    for(let i=n; i>0; i--) {\n      if(dp[i][w] !== dp[i-1][w]) {\n        selectedItems.push(items[i-1]);\n        w -= items[i-1].weight;\n      }\n    }\n    selectedItems.reverse();\n\n    return {maxValue: dp[n][capacity], selectedItems, dp};\n  }\n\n  // Render detailed DP table for visualization\n  function renderDpTable(dp, items, capacity) {\n    let html = '<table><thead><tr><th>i\\\\w</th>';\n    for(let w=0; w<=capacity; w++) {\n      html += `<th>${w}</th>`;\n    }\n    html += '</tr></thead><tbody>';\n    for(let i=0; i<=items.length; i++) {\n      html += `<tr><th>${i}</th>`;\n      for(let w=0; w<=capacity; w++) {\n        html += `<td>${dp[i][w]}</td>`;\n      }\n      html += '</tr>';\n    }\n    html += '</tbody></table>';\n    return html;\n  }\n\n  // Show explanation of solution\n  function generateExplanation(data) {\n    const {maxValue, selectedItems, dp, capacity, items} = data;\n    let explanation = `Maximum value achievable with capacity ${capacity} is ${maxValue}.\\n\\n`;\n    explanation += \"Items included in the optimal solution:\\n\";\n    if(selectedItems.length === 0) {\n      explanation += \"  None (Knapsack is empty)\\n\";\n    } else {\n      selectedItems.forEach(({index, value, weight}) => {\n        explanation += `  Item #${index}: value = ${value}, weight = ${weight}\\n`;\n      });\n    }\n    explanation += `\\nThe DP table rows correspond to items considered (from 0 to ${items.length}), \\n` +\n                   `columns correspond to weight capacities (0 to ${capacity}).\\n` +\n                   `Each cell dp[i][w] holds the max value achievable using first i items with capacity w.\\n` +\n                   `A cell value is the max between not including the item i (same as dp[i-1][w]) \\n` +\n                   `or including it (dp[i-1][w - item_weight] + item_value) if possible.\\n`;\n    return explanation;\n  }\n\n  // Setup event and interaction\n  const itemsInput = document.getElementById('items');\n  const capacityInput = document.getElementById('capacity');\n  const solveBtn = document.getElementById('solveBtn');\n  const resultDiv = document.getElementById('result');\n\n  // Provide a default example\n  itemsInput.value = \"60 10\\n100 20\\n120 30\";\n\n  solveBtn.addEventListener('click', () => {\n    resultDiv.innerHTML = '';\n    try {\n      const items = parseItems(itemsInput.value);\n      const capacity = Number(capacityInput.value);\n      if(isNaN(capacity) || capacity <= 0) {\n        throw new Error(\"Capacity must be a positive integer.\");\n      }\n      const {maxValue, selectedItems, dp} = knapsack(items, capacity);\n\n      let html = `<p><strong>Maximum value the knapsack can hold:</strong> ${maxValue}</p>`;\n      html += \"<p><strong>Items selected:</strong></p>\";\n      if(selectedItems.length === 0) {\n        html += \"<p>(none)</p>\";\n      } else {\n        html += '<table><thead><tr><th>Item #</th><th>Value</th><th>Weight</th></tr></thead><tbody>';\n        selectedItems.forEach(({index, value, weight}) => {\n          html += `<tr><td>${index}</td><td>${value}</td><td>${weight}</td></tr>`;\n        });\n        html += '</tbody></table>';\n      }\n\n      html += '<details><summary>Show Dynamic Programming Table</summary>';\n      html += renderDpTable(dp, items, capacity);\n      html += '</details>';\n\n      html += '<details open><summary>Explanation</summary><pre class=\"explanation\">';\n      html += generateExplanation({maxValue, selectedItems, dp, capacity, items});\n      html += '</pre></details>';\n\n      resultDiv.innerHTML = html;\n\n    } catch(e) {\n      resultDiv.innerHTML = `<p style=\"color:red;\">Error: ${e.message}</p>`;\n    }\n  });\n})();\n</script>\n\n<div class=\"footer\">\n  Demonstration of 0/1 Knapsack Problem with dynamic programming.<br/>\n  Format: one item per line - <code>value weight</code>. Capacity is a positive integer.\n</div>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Knapsack Problem"
    }
  ],
  "topic": "Knapsack Problem",
  "hasFSM": false,
  "hasTest": true
}