{
  "id": "7abeaa2f-cd32-11f0-a96f-2d591ffb35fe",
  "timestamp": "2025-11-29T14:49:51.946Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Floyd-Warshall Algorithm",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Floyd-Warshall Algorithm Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f4f8;\n  }\n  h1 {\n    text-align: center;\n    margin-bottom: 5px;\n  }\n  #container {\n    max-width: 900px;\n    margin: 0 auto;\n  }\n  textarea {\n    width: 100%;\n    height: 90px;\n    font-family: monospace;\n    font-size: 14px;\n    padding: 8px;\n    margin-bottom: 10px;\n  }\n  label {\n    font-weight: bold;\n  }\n  button {\n    background: #1976d2;\n    color: white;\n    border: none;\n    padding: 12px 20px;\n    cursor: pointer;\n    font-size: 16px;\n    border-radius: 4px;\n  }\n  button:disabled {\n    background: #90caf9;\n    cursor: default;\n  }\n  .tables {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    margin-top: 20px;\n    justify-content: center;\n  }\n  table {\n    border-collapse: collapse;\n    margin-top: 10px;\n    min-width: 280px;\n    background: white;\n    box-shadow: 0 0 8px rgb(0 0 0 / 0.1);\n    border-radius: 5px;\n    overflow: hidden;\n  }\n  th, td {\n    border: 1px solid #bbb;\n    padding: 6px 10px;\n    text-align: center;\n    min-width: 30px;\n  }\n  th {\n    background: #1976d2;\n    color: white;\n  }\n  td.infinite {\n    color: #b71c1c;\n    font-weight: bold;\n  }\n  #step-info {\n    margin-top: 20px;\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n  }\n  #controls {\n    margin-top: 15px;\n    text-align: center;\n  }\n  #error {\n    color: #b71c1c;\n    font-weight: bold;\n    margin-top: 10px;\n    white-space: pre-wrap;\n  }\n  @media (max-width: 600px) {\n    .tables {\n      flex-direction: column;\n      align-items: center;\n    }\n    table {\n      width: 100%;\n      max-width: 400px;\n    }\n  }\n</style>\n</head>\n<body>\n<div id=\"container\">\n  <h1>Floyd-Warshall Algorithm Demonstration</h1>\n  <label for=\"graph-input\">Enter graph adjacency matrix (use comma or space separated; use \"INF\" or \"âˆž\" for no direct edge):</label><br />\n  <textarea id=\"graph-input\" aria-label=\"Graph adjacency matrix input\" spellcheck=\"false\">0 3 INF 7\n8 0 2 INF\n5 INF 0 1\n2 INF INF 0</textarea>\n  <div id=\"error\" aria-live=\"assertive\"></div>\n  <button id=\"start-btn\">Start Floyd-Warshall</button>\n\n  <div id=\"step-info\" aria-live=\"polite\" style=\"min-height: 1.5em;\"></div>\n  <div id=\"controls\" aria-label=\"Step controls\" hidden>\n    <button id=\"prev-step\" aria-label=\"Previous step\">&larr; Previous</button>\n    <button id=\"next-step\" aria-label=\"Next step\">Next &rarr;</button>\n    <button id=\"auto-run\" aria-label=\"Auto run toggle\">Auto Run â–¶</button>\n    <button id=\"reset\" aria-label=\"Reset algorithm\">Reset ðŸ”„</button>\n  </div>\n\n  <div class=\"tables\">\n    <div>\n      <div><strong>Distance Matrix (D)</strong></div>\n      <div id=\"distance-matrix\"></div>\n    </div>\n    <div>\n      <div><strong>Predecessor Matrix (P)</strong></div>\n      <div id=\"predecessor-matrix\"></div>\n    </div>\n  </div>\n</div>\n\n<script>\n(() => {\n  const INF = Number.POSITIVE_INFINITY;\n\n  const graphInput = document.getElementById('graph-input');\n  const startBtn = document.getElementById('start-btn');\n  const errorDiv = document.getElementById('error');\n  const stepInfo = document.getElementById('step-info');\n  const distanceMatrixDiv = document.getElementById('distance-matrix');\n  const predecessorMatrixDiv = document.getElementById('predecessor-matrix');\n  const prevStepBtn = document.getElementById('prev-step');\n  const nextStepBtn = document.getElementById('next-step');\n  const autoRunBtn = document.getElementById('auto-run');\n  const resetBtn = document.getElementById('reset');\n  const controlsDiv = document.getElementById('controls');\n\n  let matrices = [];\n  let n = 0;\n  let autoRunInterval = null;\n  let currentStep = -1;\n\n  function parseGraphInput(text) {\n    /*\n      Parses input text to a 2D array representing adjacency matrix, \n      with INF for no direct edge.\n    */\n    const rows = text.trim().split(/\\n+/);\n    const matrix = [];\n    let size = rows.length;\n    for (let r = 0; r < size; r++) {\n      const line = rows[r].trim();\n      if (!line) continue;\n      // Split by comma or whitespace\n      let elements = line.split(/[,\\s]+/);\n      if (elements.length !== size) {\n        throw new Error(`Row ${r + 1} length (${elements.length}) does not match expected size (${size}).`);\n      }\n      let row = elements.map(e => {\n        e = e.trim();\n        if (/^(INF|âˆž|inf)$/i.test(e)) return INF;\n        let val = Number(e);\n        if (Number.isNaN(val)) throw new Error(`Invalid number '${e}' in input.`);\n        if (val < 0) throw new Error('Negative weights not supported in Floyd-Warshall.');\n        return val;\n      });\n      matrix.push(row);\n    }\n    return matrix;\n  }\n\n  function createMatrixHTML(matrix, isDistance) {\n    /*\n      Returns an HTML table element representing the matrix.\n      For distances, INF is shown as âˆž in red.\n      For predecessors, null or -1 is shown as \"-\".\n    */\n    const table = document.createElement('table');\n    const n = matrix.length;\n\n    // Header row\n    const thead = document.createElement('thead');\n    const headerRow = document.createElement('tr');\n    headerRow.appendChild(document.createElement('th')); // blank corner\n    for (let c = 0; c < n; c++) {\n      const th = document.createElement('th');\n      th.textContent = c;\n      th.setAttribute('scope', 'col');\n      headerRow.appendChild(th);\n    }\n    thead.appendChild(headerRow);\n    table.appendChild(thead);\n\n    // Body rows\n    const tbody = document.createElement('tbody');\n    for (let r = 0; r < n; r++) {\n      const tr = document.createElement('tr');\n      const th = document.createElement('th');\n      th.textContent = r;\n      th.setAttribute('scope', 'row');\n      tr.appendChild(th);\n      for (let c = 0; c < n; c++) {\n        const td = document.createElement('td');\n        let val = matrix[r][c];\n        if (isDistance) {\n          if (val === INF) {\n            td.textContent = 'âˆž';\n            td.classList.add('infinite');\n            td.setAttribute('aria-label', 'Infinity');\n          } else {\n            td.textContent = val.toString();\n            td.setAttribute('aria-label', `Distance ${val}`);\n          }\n        } else {\n          // Predecessor matrix\n          if (val === null || val === -1 || val === undefined) {\n            td.textContent = '-';\n            td.setAttribute('aria-label', 'No predecessor');\n          } else {\n            td.textContent = val.toString();\n            td.setAttribute('aria-label', `Predecessor ${val}`);\n          }\n        }\n        tr.appendChild(td);\n      }\n      tbody.appendChild(tr);\n    }\n    table.appendChild(tbody);\n    return table;\n  }\n\n  function floydWarshallSteps(distOrig) {\n    /*\n      Returns an array of step objects representing each iteration of Floyd-Warshall.\n      Each step contains:\n        - k: current intermediate vertex\n        - dist: distance matrix at this step\n        - pred: predecessor matrix at this step\n    */\n    const n = distOrig.length;\n    // Initialize matrices\n    let dist = [];\n    let pred = [];\n    for (let i = 0; i < n; i++) {\n      dist[i] = [];\n      pred[i] = [];\n      for (let j = 0; j < n; j++) {\n        dist[i][j] = distOrig[i][j];\n        if (i === j || distOrig[i][j] === INF) {\n          pred[i][j] = null;\n        } else {\n          pred[i][j] = i;\n        }\n      }\n    }\n    // We'll collect matrices at each outer loop k\n    let steps = [];\n    // Initial step k=-1\n    steps.push({\n      k: -1,\n      dist: JSON.parse(JSON.stringify(dist)),\n      pred: JSON.parse(JSON.stringify(pred)),\n      description: 'Initial distance and predecessor matrices'\n    });\n\n    for (let k = 0; k < n; k++) {\n      // Create new matrices for this step (deep copy)\n      let newDist = [];\n      let newPred = [];\n      for (let i = 0; i < n; i++) {\n        newDist[i] = dist[i].slice();\n        newPred[i] = pred[i].slice();\n      }\n      // Update distances using vertex k as intermediate\n      for (let i = 0; i < n; i++) {\n        for (let j = 0; j < n; j++) {\n          if (newDist[i][k] === INF || newDist[k][j] === INF) continue;\n          let newDistVal = newDist[i][k] + newDist[k][j];\n          if (newDistVal < newDist[i][j]) {\n            newDist[i][j] = newDistVal;\n            newPred[i][j] = newPred[k][j];\n          }\n        }\n      }\n      dist = newDist;\n      pred = newPred;\n      steps.push({\n        k: k,\n        dist: JSON.parse(JSON.stringify(dist)),\n        pred: JSON.parse(JSON.stringify(pred)),\n        description: `After considering intermediate vertex k = ${k}`\n      });\n    }\n    return steps;\n  }\n\n  function displayStep(stepIndex) {\n    if (stepIndex < 0 || stepIndex >= matrices.length) return;\n    const step = matrices[stepIndex];\n    stepInfo.textContent = step.description;\n\n    // Distance matrix HTML\n    distanceMatrixDiv.innerHTML = '';\n    let distTable = createMatrixHTML(step.dist, true);\n    distanceMatrixDiv.appendChild(distTable);\n\n    // Predecessor matrix HTML\n    predecessorMatrixDiv.innerHTML = '';\n    let predTable = createMatrixHTML(step.pred, false);\n    predecessorMatrixDiv.appendChild(predTable);\n\n    currentStep = stepIndex;\n    prevStepBtn.disabled = currentStep <= 0;\n    nextStepBtn.disabled = currentStep >= matrices.length - 1;\n  }\n\n  function toggleAutoRun() {\n    if (autoRunInterval !== null) {\n      clearInterval(autoRunInterval);\n      autoRunInterval = null;\n      autoRunBtn.textContent = 'Auto Run â–¶';\n      prevStepBtn.disabled = false;\n      nextStepBtn.disabled = false;\n      resetBtn.disabled = false;\n      startBtn.disabled = false;\n      graphInput.disabled = false;\n    } else {\n      autoRunBtn.textContent = 'Pause â¸';\n      prevStepBtn.disabled = true;\n      nextStepBtn.disabled = true;\n      resetBtn.disabled = true;\n      startBtn.disabled = true;\n      graphInput.disabled = true;\n      autoRunInterval = setInterval(() => {\n        if (currentStep >= matrices.length - 1) {\n          toggleAutoRun();\n          return;\n        }\n        displayStep(currentStep + 1);\n      }, 1500);\n    }\n  }\n\n  function resetDemo() {\n    currentStep = 0;\n    displayStep(currentStep);\n  }\n\n  // Event listeners\n  startBtn.addEventListener('click', () => {\n    errorDiv.textContent = '';\n    matrices = [];\n    currentStep = -1;\n    controlsDiv.hidden = true;\n\n    try {\n      const inputMatrix = parseGraphInput(graphInput.value);\n      if (inputMatrix.length === 0) {\n        throw new Error('Input matrix is empty.');\n      }\n      n = inputMatrix.length;\n      // Run Floyd-Warshall to get steps\n      matrices = floydWarshallSteps(inputMatrix);\n\n      controlsDiv.hidden = false;\n      displayStep(0);\n    } catch (e) {\n      errorDiv.textContent = 'Error: ' + e.message;\n      distanceMatrixDiv.innerHTML = '';\n      predecessorMatrixDiv.innerHTML = '';\n      stepInfo.textContent = '';\n      controlsDiv.hidden = true;\n    }\n  });\n\n  prevStepBtn.addEventListener('click', () => {\n    if (currentStep > 0) displayStep(currentStep - 1);\n  });\n\n  nextStepBtn.addEventListener('click', () => {\n    if (currentStep < matrices.length - 1) displayStep(currentStep + 1);\n  });\n\n  autoRunBtn.addEventListener('click', () => {\n    toggleAutoRun();\n  });\n\n  resetBtn.addEventListener('click', () => {\n    if (matrices.length > 0) {\n      displayStep(0);\n    }\n  });\n\n  // Accessibility: Allow keyboard navigation for step controls\n  [prevStepBtn, nextStepBtn, autoRunBtn, resetBtn].forEach(btn => {\n    btn.tabIndex = 0;\n  });\n\n  // Initialize display with default input\n  startBtn.click();\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Floyd-Warshall Algorithm"
    }
  ],
  "topic": "Floyd-Warshall Algorithm",
  "hasFSM": false,
  "hasTest": true
}