{
  "id": "7abeaa21-cd32-11f0-a96f-2d591ffb35fe",
  "timestamp": "2025-11-29T14:49:32.286Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Bubble Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f0f0;\n  }\n  h1 {\n    text-align: center;\n  }\n  #arrayInput {\n    width: 80%;\n    max-width: 600px;\n    font-size: 1.1em;\n    padding: 8px;\n  }\n  #sortButton {\n    font-size: 1.1em;\n    padding: 8px 15px;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  #arrayContainer {\n    margin-top: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 300px;\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 8px 20px rgba(0,0,0,0.1);\n    padding: 15px;\n    overflow-x: auto;\n  }\n  .bar {\n    margin: 0 2px;\n    background-color: #3498db;\n    width: 25px;\n    border-radius: 4px 4px 0 0;\n    display: flex;\n    justify-content: center;\n    color: white;\n    font-weight: bold;\n    user-select: none;\n    transition: background-color 0.3s;\n    position: relative;\n  }\n  .bar span {\n    position: absolute;\n    bottom: -24px;\n    width: 100%;\n    font-size: 0.85em;\n    color: #333;\n  }\n  .comparing {\n    background-color: #e67e22 !important;\n  }\n  .swapped {\n    background-color: #e74c3c !important;\n  }\n  .sorted {\n    background-color: #2ecc71 !important;\n  }\n  #speedControl {\n    margin: 20px auto;\n    max-width: 600px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  #speedControl label {\n    margin-right: 10px;\n    font-weight: bold;\n  }\n  #output {\n    max-width: 600px;\n    margin: 20px auto;\n    font-family: monospace;\n    white-space: pre-wrap;\n    background: #fff;\n    padding: 15px;\n    border-radius: 8px;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n    min-height: 60px;\n  }\n  @media (max-width: 500px) {\n    .bar {\n      width: 18px;\n      margin: 0 1px;\n      font-size: 0.75em;\n    }\n  }\n</style>\n</head>\n<body>\n<h1>Bubble Sort Visualization</h1>\n<div style=\"text-align:center;\">\n  <input id=\"arrayInput\" placeholder=\"Enter numbers separated by commas (e.g. 5,3,8,4,2)\" />\n  <button id=\"sortButton\">Start Bubble Sort</button>\n</div>\n\n<div id=\"speedControl\">\n  <label for=\"speedRange\">Animation Speed:</label>\n  <input type=\"range\" id=\"speedRange\" min=\"50\" max=\"1500\" value=\"500\" step=\"50\" />\n  <span id=\"speedValue\">500 ms</span>\n</div>\n\n<div id=\"arrayContainer\"></div>\n<div id=\"output\"></div>\n\n<script>\n  const arrayInput = document.getElementById(\"arrayInput\");\n  const sortButton = document.getElementById(\"sortButton\");\n  const arrayContainer = document.getElementById(\"arrayContainer\");\n  const output = document.getElementById(\"output\");\n  const speedRange = document.getElementById(\"speedRange\");\n  const speedValue = document.getElementById(\"speedValue\");\n  let animationSpeed = parseInt(speedRange.value);\n\n  speedRange.addEventListener(\"input\", () => {\n    animationSpeed = parseInt(speedRange.value);\n    speedValue.textContent = animationSpeed + \" ms\";\n  });\n\n  // Helper to create bars for the array\n  function renderArray(arr, highlightIndices = [], swappedIndices = [], sortedIndices = []) {\n    arrayContainer.innerHTML = \"\";\n    arr.forEach((val, i) => {\n      const bar = document.createElement(\"div\");\n      bar.classList.add(\"bar\");\n      bar.style.height = (val * 5 + 20) + \"px\"; // scale height for better visualization\n      bar.textContent = val;\n      // add a small label below bar for readability\n      const label = document.createElement(\"span\");\n      label.textContent = val;\n      bar.appendChild(label);\n\n      if (sortedIndices.includes(i)) {\n        bar.classList.add(\"sorted\");\n      } else if (swappedIndices.includes(i)) {\n        bar.classList.add(\"swapped\");\n      } else if (highlightIndices.includes(i)) {\n        bar.classList.add(\"comparing\");\n      }\n      arrayContainer.appendChild(bar);\n    });\n  }\n\n  // Bubble Sort with animation\n  async function bubbleSortAnimation(arr) {\n    output.textContent = \"Starting Bubble Sort...\\n\";\n    let n = arr.length;\n    let arrayCopy = arr.slice();\n    for (let i = 0; i < n - 1; i++) {\n      let swapped = false;\n      for (let j = 0; j < n - i - 1; j++) {\n        // Highlight the two elements being compared\n        renderArray(arrayCopy, [j, j+1], [], getSortedIndices(n, i));\n        output.textContent += `Comparing indices ${j} and ${j+1}: values ${arrayCopy[j]} and ${arrayCopy[j+1]}\\n`;\n        await sleep(animationSpeed);\n\n        if (arrayCopy[j] > arrayCopy[j + 1]) {\n          // Swap\n          output.textContent += `Swapping ${arrayCopy[j]} and ${arrayCopy[j+1]}\\n`;\n          [arrayCopy[j], arrayCopy[j + 1]] = [arrayCopy[j + 1], arrayCopy[j]];\n          swapped = true;\n          renderArray(arrayCopy, [], [j, j+1], getSortedIndices(n, i));\n          await sleep(animationSpeed);\n        }\n      }\n      // Mark the last element as sorted\n      renderArray(arrayCopy, [], [], getSortedIndices(n, i+1));\n      output.textContent += `Index ${n - i - 1} is now sorted.\\n\\n`;\n      if (!swapped) {\n        output.textContent += \"No swaps done in this pass, array is sorted early.\\n\";\n        break;\n      }\n    }\n    // Mark all elements sorted finally\n    renderArray(arrayCopy, [], [], [...Array(n).keys()]);\n    output.textContent += \"\\nArray is fully sorted!\\n\";\n    return arrayCopy;\n  }\n\n  function getSortedIndices(arrayLength, pass) {\n    // After pass i, last i elements are sorted\n    let sorted = [];\n    for(let k=arrayLength - pass; k < arrayLength; k++) {\n      if (k >= 0) sorted.push(k);\n    }\n    return sorted;\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  function parseInput(input) {\n    let parts = input.split(\",\").map(s => s.trim());\n    let nums = [];\n    for(let p of parts) {\n      if(p === \"\") continue;\n      let num = Number(p);\n      if(isNaN(num)) return null;\n      nums.push(num);\n    }\n    return nums.length > 0 ? nums : null;\n  }\n\n  sortButton.addEventListener(\"click\", async () => {\n    let arr = parseInput(arrayInput.value);\n    if (!arr) {\n      alert(\"Please enter a valid list of numbers separated by commas.\");\n      return;\n    }\n    sortButton.disabled = true;\n    arrayInput.disabled = true;\n    speedRange.disabled = true;\n    output.textContent = \"\";\n    await bubbleSortAnimation(arr);\n    sortButton.disabled = false;\n    arrayInput.disabled = false;\n    speedRange.disabled = false;\n  });\n\n  // Initialize with example\n  arrayInput.value = \"5,3,8,4,2,7,1,6\";\n  renderArray(parseInput(arrayInput.value));\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": false,
  "hasTest": true
}