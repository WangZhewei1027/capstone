{
  "id": "e03a205a-cd32-11f0-a949-f901cf5609c9",
  "timestamp": "2025-11-29T14:52:24.189Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Merge Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Merge Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n  }\n  h1 {\n    text-align: center;\n    color: #333;\n  }\n  #inputSection {\n    max-width: 600px;\n    margin: 0 auto 20px auto;\n    text-align: center;\n  }\n  #arrayInput {\n    width: 80%;\n    padding: 10px;\n    font-size: 16px;\n  }\n  button {\n    margin-left: 10px;\n    padding: 10px 15px;\n    font-size: 16px;\n    cursor: pointer;\n  }\n  #error {\n    color: red;\n    margin-top: 5px;\n  }\n  #visualization {\n    max-width: 800px;\n    margin: 0 auto;\n    min-height: 200px;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n    padding: 15px;\n  }\n  .barContainer {\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    margin-bottom: 30px;\n  }\n  .bar {\n    margin: 0 3px;\n    background-color: #4caf50;\n    color: white;\n    text-align: center;\n    font-size: 14px;\n    border-radius: 4px 4px 0 0;\n    transition: background-color 0.3s;\n  }\n  .bar.comparing {\n    background-color: #ff9800;\n  }\n  .bar.merging {\n    background-color: #2196f3;\n  }\n  #log {\n    max-width: 600px;\n    margin: 15px auto;\n    background: #222;\n    color: #eee;\n    padding: 10px;\n    height: 150px;\n    overflow-y: auto;\n    font-family: monospace;\n    border-radius: 6px;\n  }\n</style>\n</head>\n<body>\n\n<h1>Merge Sort Visualization</h1>\n\n<div id=\"inputSection\">\n  <input id=\"arrayInput\" type=\"text\" placeholder=\"Enter integers separated by commas\" />\n  <button id=\"startSort\">Start Merge Sort</button>\n  <div id=\"error\"></div>\n</div>\n\n<div id=\"visualization\"></div>\n<div id=\"log\"></div>\n\n<script>\n  const arrayInput = document.getElementById('arrayInput');\n  const startSortBtn = document.getElementById('startSort');\n  const visualization = document.getElementById('visualization');\n  const log = document.getElementById('log');\n  const errorDiv = document.getElementById('error');\n\n  function logMessage(msg) {\n    log.textContent += msg + \"\\\\n\";\n    log.scrollTop = log.scrollHeight;\n  }\n\n  // Create bars for the array display\n  function createBars(arr, highlightIndices = [], mergeIndices = []) {\n    visualization.innerHTML = '';\n    const container = document.createElement('div');\n    container.className = 'barContainer';\n\n    // Find max for relative height scaling\n    const maxVal = Math.max(...arr.map(e => Math.abs(e)));\n\n    arr.forEach((value, index) => {\n      const bar = document.createElement('div');\n      bar.className = 'bar';\n      bar.style.height = (maxVal === 0 ? 30 : 30 + (70 * Math.abs(value) / maxVal)) + 'px';\n      bar.textContent = value;\n      bar.style.width = '30px';\n      if (highlightIndices.includes(index)) {\n        bar.classList.add('comparing');\n      }\n      if (mergeIndices.includes(index)) {\n        bar.classList.add('merging');\n      }\n      container.appendChild(bar);\n    });\n    visualization.appendChild(container);\n  }\n\n  // Pause helper for animation speed\n  function delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function mergeSort(arr, left = 0, right = arr.length -1) {\n    if (left >= right) return;\n\n    const mid = Math.floor((left + right) / 2);\n\n    await mergeSort(arr, left, mid);\n    await mergeSort(arr, mid + 1, right);\n    await merge(arr, left, mid, right);\n  }\n\n  async function merge(arr, left, mid, right) {\n    logMessage(`Merging subarrays [${left}..${mid}] and [${mid+1}..${right}]`);\n    let n1 = mid - left + 1;\n    let n2 = right - mid;\n\n    let leftArr = [];\n    let rightArr = [];\n\n    for (let i = 0; i < n1; i++) {\n      leftArr[i] = arr[left + i];\n    }\n    for (let j = 0; j < n2; j++) {\n      rightArr[j] = arr[mid + 1 + j];\n    }\n\n    let i = 0;\n    let j = 0;\n    let k = left;\n\n    while (i < n1 && j < n2) {\n      createBars(arr, [k], [k]);\n      await delay(500);\n\n      if (leftArr[i] <= rightArr[j]) {\n        arr[k] = leftArr[i];\n        logMessage(`Placed ${leftArr[i]} into position ${k}`);\n        i++;\n      } else {\n        arr[k] = rightArr[j];\n        logMessage(`Placed ${rightArr[j]} into position ${k}`);\n        j++;\n      }\n      k++;\n      createBars(arr, [], [...Array(right - left + 1).keys()].map(x => x + left));\n      await delay(400);\n    }\n\n    while (i < n1) {\n      arr[k] = leftArr[i];\n      logMessage(`Copy remaining left value ${leftArr[i]} to position ${k}`);\n      i++;\n      k++;\n      createBars(arr, [], [...Array(right - left + 1).keys()].map(x => x + left));\n      await delay(400);\n    }\n\n    while (j < n2) {\n      arr[k] = rightArr[j];\n      logMessage(`Copy remaining right value ${rightArr[j]} to position ${k}`);\n      j++;\n      k++;\n      createBars(arr, [], [...Array(right - left + 1).keys()].map(x => x + left));\n      await delay(400);\n    }\n  }\n\n  startSortBtn.addEventListener('click', async () => {\n    errorDiv.textContent = '';\n    log.textContent = '';\n    let inputStr = arrayInput.value.trim();\n    if (!inputStr.length) {\n      errorDiv.textContent = 'Please enter some numbers separated by commas.';\n      return;\n    }\n\n    // Parse input\n    let inputs = inputStr.split(',').map(s => s.trim());\n    let arr = [];\n\n    for (let s of inputs) {\n      if (s === '') continue;\n      let num = Number(s);\n      if (Number.isNaN(num)) {\n        errorDiv.textContent = `Invalid number: \"${s}\"`;\n        return;\n      }\n      arr.push(num);\n    }\n\n    if(arr.length === 0) {\n      errorDiv.textContent = \"No valid numbers found.\";\n      return;\n    }\n\n    if(arr.length > 50) {\n      errorDiv.textContent = \"Please enter 50 or fewer numbers for better visualization.\";\n      return;\n    }\n\n    logMessage(\"Starting Merge Sort\");\n    createBars(arr);\n    await delay(500);\n    await mergeSort(arr);\n\n    createBars(arr);\n    logMessage(\"Merge Sort Completed!\");\n  });\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Merge Sort"
    }
  ],
  "topic": "Merge Sort",
  "hasFSM": false,
  "hasTest": true
}