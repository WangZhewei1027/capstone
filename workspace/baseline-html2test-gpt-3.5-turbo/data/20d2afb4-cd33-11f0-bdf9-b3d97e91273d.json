{
  "id": "20d2afb4-cd33-11f0-bdf9-b3d97e91273d",
  "timestamp": "2025-11-29T14:54:08.543Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Insertion Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Insertion Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  h1 {\n    margin-bottom: 10px;\n  }\n  #arrayInput {\n    width: 300px;\n    font-size: 16px;\n    padding: 8px;\n  }\n  #startBtn {\n    margin-left: 10px;\n    padding: 8px 16px;\n    font-size: 16px;\n    cursor: pointer;\n  }\n  #barContainer {\n    margin-top: 40px;\n    width: 90vw;\n    max-width: 800px;\n    height: 300px;\n    position: relative;\n    border: 1px solid #ccc;\n    background: white;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n  }\n  .bar {\n    margin: 0 2px;\n    background-color: steelblue;\n    width: 25px;\n    border-radius: 3px 3px 0 0;\n    transition: background-color 0.3s ease;\n    position: relative;\n  }\n  .bar.highlight {\n    background-color: orange;\n  }\n  .bar.inserted {\n    background-color: seagreen;\n  }\n  .bar.compared {\n    background-color: tomato;\n  }\n  .bar-label {\n    position: absolute;\n    bottom: -20px;\n    width: 100%;\n    text-align: center;\n    font-size: 12px;\n    color: #333;\n  }\n  #info {\n    margin-top: 20px;\n    font-size: 18px;\n    min-height: 24px;\n  }\n  #footer {\n    margin-top: 40px;\n    font-size: 14px;\n    color: #555;\n  }\n</style>\n</head>\n<body>\n<h1>Insertion Sort Visualization</h1>\n<div>\n  <input id=\"arrayInput\" type=\"text\" placeholder=\"Enter numbers comma separated\" value=\"5,3,8,6,2,7,4,1\" />\n  <button id=\"startBtn\">Start Sort</button>\n</div>\n<div id=\"info\"></div>\n<div id=\"barContainer\"></div>\n<div id=\"footer\">Visualization highlights the current key (orange), compared bars (tomato), and inserted position (green).</div>\n\n<script>\n  const arrayInput = document.getElementById('arrayInput');\n  const startBtn = document.getElementById('startBtn');\n  const barContainer = document.getElementById('barContainer');\n  const info = document.getElementById('info');\n\n  let array = [];\n  let bars = [];\n  let delay = 600;\n\n  function createBars(arr) {\n    barContainer.innerHTML = '';\n    bars = [];\n    const maxVal = Math.max(...arr);\n    for (let i = 0; i < arr.length; i++) {\n      const bar = document.createElement('div');\n      bar.classList.add('bar');\n      const heightPercent = (arr[i] / maxVal) * 100;\n      bar.style.height = heightPercent + '%';\n      bar.style.width = `${Math.min(600 / arr.length, 40)}px`;\n      bar.dataset.index = i;\n      bar.title = arr[i];\n\n      let label = document.createElement('div');\n      label.classList.add('bar-label');\n      label.textContent = arr[i];\n      bar.appendChild(label);\n\n      barContainer.appendChild(bar);\n      bars.push(bar);\n    }\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function insertionSort(arr) {\n    info.textContent = 'Starting Insertion Sort...';\n    for (let i = 1; i < arr.length; i++) {\n      let key = arr[i];\n      let j = i - 1;\n\n      highlightKey(i);\n\n      info.textContent = `Selecting key = ${key} at index ${i}`;\n      await sleep(delay);\n\n      while (j >= 0 && arr[j] > key) {\n        highlightCompared(j, j+1);\n        info.textContent = `Compare arr[${j}] = ${arr[j]} with key = ${key} â†’ Move arr[${j}] right`;\n        await sleep(delay);\n        \n        arr[j+1] = arr[j];\n        updateBarHeight(j+1, arr[j+1]);\n        removeCompared(j, j+1);\n        j--;\n      }\n      arr[j+1] = key;\n      updateBarHeight(j+1, key);\n      highlightInserted(j+1);\n\n      info.textContent = `Insert key = ${key} at index ${j+1}`;\n      await sleep(delay);\n\n      resetHighlights();\n    }\n    info.textContent = 'Array is sorted!';\n  }\n\n  function highlightKey(i) {\n    resetHighlights();\n    bars[i].classList.add('highlight');\n  }\n\n  function highlightCompared(i, j) {\n    bars[i].classList.add('compared');\n    bars[j].classList.add('compared');\n  }\n\n  function removeCompared(i, j) {\n    bars[i].classList.remove('compared');\n    bars[j].classList.remove('compared');\n  }\n\n  function highlightInserted(i) {\n    bars[i].classList.add('inserted');\n  }\n\n  function resetHighlights() {\n    bars.forEach(bar => {\n      bar.classList.remove('highlight');\n      bar.classList.remove('compared');\n      bar.classList.remove('inserted');\n    });\n  }\n\n  function updateBarHeight(i, val) {\n    const maxVal = Math.max(...array);\n    bars[i].style.height = (val / maxVal) * 100 + '%';\n    bars[i].title = val;\n    bars[i].querySelector('.bar-label').textContent = val;\n  }\n\n  startBtn.addEventListener('click', () => {\n    const inputStr = arrayInput.value.trim();\n    if (!inputStr) {\n      alert('Please enter some numbers separated by commas.');\n      return;\n    }\n    let inputArr = inputStr.split(',').map(x => x.trim()).map(Number);\n    if (inputArr.some(isNaN)) {\n      alert('Invalid input: please enter only numbers separated by commas.');\n      return;\n    }\n    if (inputArr.length < 2) {\n      alert('Please enter at least two numbers to sort.');\n      return;\n    }\n    array = inputArr;\n    createBars(array);\n    startBtn.disabled = true;\n    arrayInput.disabled = true;\n    insertionSort(array).then(() => {\n      startBtn.disabled = false;\n      arrayInput.disabled = false;\n    });\n  });\n\n  // Initial display\n  array = [5,3,8,6,2,7,4,1];\n  createBars(array);\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Insertion Sort"
    }
  ],
  "topic": "Insertion Sort",
  "hasFSM": false,
  "hasTest": true
}