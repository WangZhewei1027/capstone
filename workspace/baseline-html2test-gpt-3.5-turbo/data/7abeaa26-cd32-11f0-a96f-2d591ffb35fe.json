{
  "id": "7abeaa26-cd32-11f0-a96f-2d591ffb35fe",
  "timestamp": "2025-11-29T14:49:21.735Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Heap Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Heap Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n  }\n  h1 {\n    text-align: center;\n    margin-bottom: 0.5em;\n  }\n  #controls {\n    max-width: 600px;\n    margin: 0 auto 20px auto;\n    text-align: center;\n  }\n  #arrayInput {\n    width: 80%;\n    padding: 8px;\n    font-size: 1em;\n  }\n  button {\n    padding: 10px 15px;\n    margin: 5px;\n    font-size: 1em;\n    cursor: pointer;\n  }\n  #bars {\n    max-width: 600px;\n    height: 300px;\n    margin: 20px auto;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n    border: 1px solid #ccc;\n    background: white;\n    position: relative;\n  }\n  .bar {\n    background-color: #4a90e2;\n    margin: 0 2px;\n    width: 20px;\n    text-align: center;\n    color: white;\n    font-size: 0.8em;\n    border-radius: 3px 3px 0 0;\n    transition: background-color 0.3s ease;\n    user-select: none;\n  }\n  .bar.highlight {\n    background-color: #e94e77;\n  }\n  .bar.swap {\n    background-color: #f5a623;\n  }\n  #description {\n    max-width: 600px;\n    margin: 20px auto;\n    font-size: 0.9em;\n    line-height: 1.4em;\n    background: white;\n    padding: 15px 20px;\n    border-radius: 6px;\n    box-shadow: 0 0 5px #ccc;\n  }\n</style>\n</head>\n<body>\n<h1>Heap Sort Visualization</h1>\n<div id=\"controls\">\n  <input id=\"arrayInput\" type=\"text\" placeholder=\"Enter numbers separated by commas\" />\n  <button id=\"generateBtn\">Generate Random Array</button>\n  <button id=\"startBtn\">Start Heap Sort</button>\n</div>\n<div id=\"bars\"></div>\n<div id=\"description\">\n  Enter a comma-separated list of numbers or generate a random array, then click “Start Heap Sort” to see the sorting process step by step. The red bars indicate elements being compared or considered, orange bars are elements being swapped.\n</div>\n\n<script>\n  const barsContainer = document.getElementById(\"bars\");\n  const arrayInput = document.getElementById(\"arrayInput\");\n  const startBtn = document.getElementById(\"startBtn\");\n  const generateBtn = document.getElementById(\"generateBtn\");\n\n  let array = [];\n  let speed = 500; // delay in ms\n\n  function generateRandomArray(size = 20, maxVal = 100) {\n    const arr = [];\n    for (let i = 0; i < size; i++) {\n      arr.push(Math.floor(Math.random() * maxVal) + 1);\n    }\n    return arr;\n  }\n\n  function renderArray(arr, highlights = [], swaps = []) {\n    barsContainer.innerHTML = \"\";\n    const maxVal = Math.max(...arr);\n    arr.forEach((val, i) => {\n      const bar = document.createElement(\"div\");\n      bar.classList.add(\"bar\");\n      if (highlights.includes(i)) bar.classList.add(\"highlight\");\n      if (swaps.includes(i)) bar.classList.add(\"swap\");\n      bar.style.height = (val / maxVal) * 100 + \"%\";\n      bar.textContent = val;\n      barsContainer.appendChild(bar);\n    });\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function heapSort(arr) {\n    let n = arr.length;\n\n    // Build max heap\n    for (let i = Math.floor(n / 2) - 1; i >= 0; i--) {\n      await heapify(arr, n, i);\n    }\n\n    // One by one extract element from heap\n    for (let i = n - 1; i > 0; i--) {\n      // Move current root to end\n      [arr[0], arr[i]] = [arr[i], arr[0]];\n      renderArray(arr, [], [0, i]);\n      await sleep(speed);\n\n      // call max heapify on the reduced heap\n      await heapify(arr, i, 0);\n    }\n  }\n\n  async function heapify(arr, n, i) {\n    let largest = i;\n    let l = 2 * i + 1;\n    let r = 2 * i + 2;\n\n    // Highlight the current root being heapified\n    renderArray(arr, [i]);\n    await sleep(speed);\n\n    if (l < n) {\n      renderArray(arr, [i, l]);\n      await sleep(speed);\n      if (arr[l] > arr[largest]) {\n        largest = l;\n      }\n    }\n\n    if (r < n) {\n      renderArray(arr, [i, r]);\n      await sleep(speed);\n      if (arr[r] > arr[largest]) {\n        largest = r;\n      }\n    }\n\n    if (largest !== i) {\n      [arr[i], arr[largest]] = [arr[largest], arr[i]];\n      renderArray(arr, [], [i, largest]);\n      await sleep(speed);\n      await heapify(arr, n, largest);\n    }\n  }\n\n  function parseInput(input) {\n    return input\n      .split(\",\")\n      .map(x => x.trim())\n      .filter(x => x !== \"\")\n      .map(Number)\n      .filter(x => !isNaN(x));\n  }\n\n  generateBtn.addEventListener(\"click\", () => {\n    array = generateRandomArray(20, 100);\n    arrayInput.value = array.join(\", \");\n    renderArray(array);\n  });\n\n  startBtn.addEventListener(\"click\", async () => {\n    let inputArr = parseInput(arrayInput.value);\n    if (inputArr.length === 0) {\n      alert(\"Please enter a valid array of numbers.\");\n      return;\n    }\n    array = [...inputArr];\n    startBtn.disabled = true;\n    generateBtn.disabled = true;\n    arrayInput.disabled = true;\n    try {\n      await heapSort(array);\n    } catch (e) {\n      console.error(e);\n    }\n    renderArray(array);\n    startBtn.disabled = false;\n    generateBtn.disabled = false;\n    arrayInput.disabled = false;\n  });\n\n  // Initialize with random array\n  array = generateRandomArray(20, 100);\n  arrayInput.value = array.join(\", \");\n  renderArray(array);\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Heap Sort"
    }
  ],
  "topic": "Heap Sort",
  "hasFSM": false,
  "hasTest": true
}