{
  "id": "e03a476a-cd32-11f0-a949-f901cf5609c9",
  "timestamp": "2025-11-29T14:52:28.418Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Knapsack Problem",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Knapsack Problem Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2rem;\n    max-width: 800px;\n  }\n  h1 {\n    text-align: center;\n  }\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-bottom: 1rem;\n  }\n  th, td {\n    border: 1px solid #666;\n    padding: 0.5rem;\n    text-align: center;\n  }\n  input[type=number] {\n    width: 4rem;\n  }\n  button {\n    padding: 0.5rem 1rem;\n    font-size: 1rem;\n  }\n  .result {\n    margin-top: 1rem;\n    padding: 1rem;\n    background: #f0f8ff;\n    border: 1px solid #a0c0ff;\n    border-radius: 5px;\n  }\n  .dp-table-container {\n    max-height: 250px;\n    overflow: auto;\n    margin-top: 1rem;\n    border: 1px solid #ccc;\n  }\n  table.dp-table th, table.dp-table td {\n    font-size: 0.75rem;\n    min-width: 30px;\n    padding: 0.2rem 0.3rem;\n  }\n</style>\n</head>\n<body>\n\n<h1>0/1 Knapsack Problem Solver</h1>\n\n<p>\n  Enter items with their weights and values, then specify the maximum knapsack capacity.\n  The solver will find the maximum total value achievable without exceeding capacity.\n</p>\n\n<form id=\"knapsackForm\">\n  <table id=\"itemsTable\" aria-label=\"Items input table\">\n    <thead>\n      <tr>\n        <th>#</th>\n        <th>Weight</th>\n        <th>Value</th>\n        <th>Remove</th>\n      </tr>\n    </thead>\n    <tbody id=\"itemsBody\">\n      <tr>\n        <td>1</td>\n        <td><input type=\"number\" name=\"weight\" min=\"1\" value=\"3\" required /></td>\n        <td><input type=\"number\" name=\"value\" min=\"0\" value=\"25\" required /></td>\n        <td><button type=\"button\" class=\"removeBtn\" aria-label=\"Remove item 1\">−</button></td>\n      </tr>\n      <tr>\n        <td>2</td>\n        <td><input type=\"number\" name=\"weight\" min=\"1\" value=\"2\" required /></td>\n        <td><input type=\"number\" name=\"value\" min=\"0\" value=\"20\" required /></td>\n        <td><button type=\"button\" class=\"removeBtn\" aria-label=\"Remove item 2\">−</button></td>\n      </tr>\n      <tr>\n        <td>3</td>\n        <td><input type=\"number\" name=\"weight\" min=\"1\" value=\"1\" required /></td>\n        <td><input type=\"number\" name=\"value\" min=\"0\" value=\"15\" required /></td>\n        <td><button type=\"button\" class=\"removeBtn\" aria-label=\"Remove item 3\">−</button></td>\n      </tr>\n    </tbody>\n  </table>\n  <button type=\"button\" id=\"addItemBtn\">Add Item +</button>\n  <p>\n    <label for=\"capacityInput\"><strong>Knapsack Capacity:</strong></label>\n    <input type=\"number\" id=\"capacityInput\" name=\"capacity\" min=\"1\" value=\"5\" required />\n  </p>\n  <button type=\"submit\">Solve</button>\n</form>\n\n<div class=\"result\" id=\"result\" aria-live=\"polite\"></div>\n\n<div class=\"dp-table-container\" id=\"dpContainer\" aria-label=\"Dynamic programming table container\"></div>\n\n<script>\n(() => {\n  const itemsBody = document.getElementById('itemsBody');\n  const addItemBtn = document.getElementById('addItemBtn');\n  const knapsackForm = document.getElementById('knapsackForm');\n  const resultDiv = document.getElementById('result');\n  const dpContainer = document.getElementById('dpContainer');\n\n  // Add new item row\n  addItemBtn.addEventListener('click', () => {\n    const rowCount = itemsBody.rows.length + 1;\n    const row = document.createElement('tr');\n    row.innerHTML = \\`\n      <td>\\${rowCount}</td>\n      <td><input type=\"number\" name=\"weight\" min=\"1\" value=\"1\" required /></td>\n      <td><input type=\"number\" name=\"value\" min=\"0\" value=\"0\" required /></td>\n      <td><button type=\"button\" class=\"removeBtn\" aria-label=\"Remove item \\${rowCount}\">−</button></td>\n    \\`;\n    itemsBody.appendChild(row);\n    updateRemoveButtons();\n  });\n\n  // Remove an item row\n  function updateRemoveButtons() {\n    const removeButtons = itemsBody.querySelectorAll('.removeBtn');\n    removeButtons.forEach((btn, i) => {\n      btn.onclick = () => {\n        btn.closest('tr').remove();\n        updateRowNumbers();\n      };\n    });\n  }\n\n  // Update row numbers after remove\n  function updateRowNumbers() {\n    [...itemsBody.rows].forEach((row, i) => {\n      row.cells[0].textContent = i + 1;\n      const removeBtn = row.querySelector('.removeBtn');\n      if (removeBtn) {\n        removeBtn.setAttribute('aria-label', 'Remove item ' + (i + 1));\n      }\n    });\n  }\n\n  updateRemoveButtons();\n\n  // Solve knapsack on form submit\n  knapsackForm.addEventListener('submit', e => {\n    e.preventDefault();\n\n    // Read items data\n    const weights = [];\n    const values = [];\n    let valid = true;\n    [...itemsBody.rows].forEach((row) => {\n      const weightInput = row.querySelector('input[name=\"weight\"]');\n      const valueInput = row.querySelector('input[name=\"value\"]');\n      const w = parseInt(weightInput.value, 10);\n      const v = parseInt(valueInput.value, 10);\n\n      if (isNaN(w) || w < 1) {\n        weightInput.setCustomValidity('Weight must be a positive integer');\n        weightInput.reportValidity();\n        valid = false;\n      } else {\n        weightInput.setCustomValidity('');\n      }\n      if (isNaN(v) || v < 0) {\n        valueInput.setCustomValidity('Value must be a non-negative integer');\n        valueInput.reportValidity();\n        valid = false;\n      } else {\n        valueInput.setCustomValidity('');\n      }\n      weights.push(w);\n      values.push(v);\n    });\n    const capacityInput = document.getElementById('capacityInput');\n    const capacity = parseInt(capacityInput.value, 10);\n    if (isNaN(capacity) || capacity < 1) {\n      capacityInput.setCustomValidity('Capacity must be a positive integer');\n      capacityInput.reportValidity();\n      valid = false;\n    } else {\n      capacityInput.setCustomValidity('');\n    }\n\n    if (!valid) return;\n\n    const n = weights.length;\n\n    // DP table: dp[i][w] = max value using first i items within weight w\n    const dp = Array.from({ length: n + 1 }, () => Array(capacity + 1).fill(0));\n\n    for (let i = 1; i <= n; i++) {\n      const wt = weights[i - 1];\n      const val = values[i - 1];\n      for (let w = 0; w <= capacity; w++) {\n        if (wt <= w) {\n          dp[i][w] = Math.max(dp[i - 1][w], dp[i - 1][w - wt] + val);\n        } else {\n          dp[i][w] = dp[i - 1][w];\n        }\n      }\n    }\n\n    // Find which items to take (reconstruct solution)\n    let w = capacity;\n    const taken = [];\n    for (let i = n; i > 0; i--) {\n      if (dp[i][w] !== dp[i - 1][w]) {\n        taken.push(i - 1); // zero-based index of taken item\n        w -= weights[i - 1];\n      }\n    }\n    taken.reverse();\n\n    // Display results\n    const maxValue = dp[n][capacity];\n    const totalWeight = taken.reduce((acc, idx) => acc + weights[idx], 0);\n\n    resultDiv.innerHTML = \\`\n      <h2>Solution</h2>\n      <p><strong>Maximum value achievable:</strong> \\${maxValue}</p>\n      <p><strong>Total weight of chosen items:</strong> \\${totalWeight} / \\${capacity}</p>\n      <p><strong>Items chosen (index, weight, value):</strong></p>\n      <ul>\n        \\${taken.length > 0\n          ? taken.map(i => '<li>Item ' + (i+1) + ': weight = ' + weights[i] + ', value = ' + values[i] + '</li>').join('')\n          : '<li><em>No items selected</em></li>'\n        }\n      </ul>\n    \\`;\n\n    // Display DP table for small cases (capacity <= 50 & n <= 20)\n    if (n <= 20 && capacity <= 50) {\n      dpContainer.innerHTML = generateDpTable(dp, weights, values, capacity);\n    } else {\n      dpContainer.innerHTML = '<p><em>DP table display is skipped for large input.</em></p>';\n    }\n  });\n\n  // Function to generate a table showing dp array\n  function generateDpTable(dp, weights, values, capacity) {\n    let html = '<h3>DP Table (max values for item count vs capacity)</h3>';\n    html += '<table class=\"dp-table\" aria-label=\"Dynamic programming table\">' +\n      '<thead><tr><th>Items\\\\W</th>';\n    for (let w = 0; w <= capacity; w++) {\n      html += '<th>' + w + '</th>';\n    }\n    html += '</tr></thead><tbody>';\n    for (let i = 0; i < dp.length; i++) {\n      html += '<tr>';\n      if (i === 0) {\n        html += '<th>0 (no items)</th>';\n      } else {\n        html += '<th>' + i + '<br>(w=' + weights[i-1] + '<br>v=' + values[i-1] + ')</th>';\n      }\n      for (let w = 0; w <= capacity; w++) {\n        html += '<td>' + dp[i][w] + '</td>';\n      }\n      html += '</tr>';\n    }\n    html += '</tbody></table>';\n    return html;\n  }\n})();\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Knapsack Problem"
    }
  ],
  "topic": "Knapsack Problem",
  "hasFSM": false,
  "hasTest": true
}