{
  "id": "e03a205b-cd32-11f0-a949-f901cf5609c9",
  "timestamp": "2025-11-29T14:52:32.881Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Quick Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Quick Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  #inputArea {\n    text-align: center;\n    margin-bottom: 15px;\n  }\n  #arrayInput {\n    width: 300px;\n    font-size: 1em;\n    padding: 5px;\n  }\n  button {\n    font-size: 1em;\n    padding: 6px 12px;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  #visualizer {\n    margin: 20px auto;\n    width: 90%;\n    max-width: 800px;\n    height: 300px;\n    border: 1px solid #ccc;\n    position: relative;\n    background: #fff;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n  }\n  .bar {\n    margin: 0 2px;\n    background-color: #69a3ff;\n    width: 20px;\n    transition: all 0.3s ease;\n    position: relative;\n  }\n  .bar.pivot {\n    background-color: #ff6b6b !important;\n  }\n  .bar.compare {\n    background-color: #f3c623 !important;\n  }\n  .bar.swap {\n    background-color: #47d147 !important;\n  }\n  .bar.sorted {\n    background-color: #6bcf69 !important;\n  }\n  #legend {\n    max-width: 800px;\n    margin: 10px auto 0 auto;\n    display: flex;\n    justify-content: center;\n    gap: 20px;\n  }\n  .legend-item {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n  }\n  .legend-color {\n    width: 20px;\n    height: 20px;\n    background-color: #69a3ff;\n  }\n  .legend-pivot {\n    background-color: #ff6b6b !important;\n  }\n  .legend-compare {\n    background-color: #f3c623 !important;\n  }\n  .legend-swap {\n    background-color: #47d147 !important;\n  }\n  .legend-sorted {\n    background-color: #6bcf69 !important;\n  }\n  #speedControl {\n    margin-top: 15px;\n    text-align: center;\n  }\n  label {\n    font-size: 0.9em;\n  }\n</style>\n</head>\n<body>\n\n<h1>Quick Sort Visualization</h1>\n\n<div id=\"inputArea\">\n  <input id=\"arrayInput\" type=\"text\" placeholder=\"Enter numbers separated by commas\" value=\"25,17,31,13,2,8,24,42,7\" />\n  <button id=\"startBtn\">Start Quick Sort</button>\n</div>\n\n<div id=\"speedControl\">\n  <label for=\"speedRange\">Animation Speed: </label>\n  <input type=\"range\" id=\"speedRange\" min=\"100\" max=\"2000\" value=\"500\" step=\"100\" />\n  <span id=\"speedVal\">500 ms</span>\n</div>\n\n<div id=\"visualizer\"></div>\n\n<div id=\"legend\">\n  <div class=\"legend-item\"><div class=\"legend-color\"></div>Normal</div>\n  <div class=\"legend-item\"><div class=\"legend-color legend-pivot\"></div>Pivot</div>\n  <div class=\"legend-item\"><div class=\"legend-color legend-compare\"></div>Comparing</div>\n  <div class=\"legend-item\"><div class=\"legend-color legend-swap\"></div>Swapping</div>\n  <div class=\"legend-item\"><div class=\"legend-color legend-sorted\"></div>Sorted</div>\n</div>\n\n<script>\n  (function(){\n    const visualizer = document.getElementById('visualizer');\n    const startBtn = document.getElementById('startBtn');\n    const arrayInput = document.getElementById('arrayInput');\n    const speedRange = document.getElementById('speedRange');\n    const speedVal = document.getElementById('speedVal');\n\n    let array = [];\n    let bars = [];\n    let delay = +speedRange.value;\n\n    speedRange.addEventListener('input', () => {\n      delay = +speedRange.value;\n      speedVal.textContent = delay + ' ms';\n    });\n\n    function createBars(arr) {\n      visualizer.innerHTML = '';\n      bars = [];\n      const maxVal = Math.max(...arr, 10);\n      const containerWidth = visualizer.clientWidth;\n      const barWidth = Math.min(30, Math.floor(containerWidth / arr.length) - 4);\n      arr.forEach(val => {\n        const bar = document.createElement('div');\n        bar.classList.add('bar');\n        bar.style.height = (val / maxVal * 100) + '%';\n        bar.style.width = barWidth + 'px';\n        bar.title = val;\n        visualizer.appendChild(bar);\n        bars.push(bar);\n      });\n    }\n\n    async function quickSort(arr, left = 0, right = arr.length - 1) {\n      if (left < right) {\n        let pivotIndex = await partition(arr, left, right);\n        // mark pivot as sorted\n        bars[pivotIndex].classList.add('sorted');\n        await quickSort(arr, left, pivotIndex - 1);\n        await quickSort(arr, pivotIndex + 1, right);\n      } else if (left === right) {\n        bars[left].classList.add('sorted');\n      }\n    }\n\n    async function partition(arr, left, right) {\n      // pivot is last element\n      let pivotVal = arr[right];\n      highlightPivot(right);\n      let i = left - 1;\n\n      for (let j = left; j < right; j++) {\n        highlightCompare(j);\n        await sleep(delay);\n        if (arr[j] <= pivotVal) {\n          i++;\n          if(i !== j) {\n            await swap(arr, i, j);\n          }\n          clearCompare(j);\n        } else {\n          clearCompare(j);\n        }\n      }\n      if(i + 1 !== right) {\n        await swap(arr, i + 1, right);\n      }\n      clearPivot(right);\n      return i + 1;\n    }\n\n    function highlightPivot(index) {\n      bars[index].classList.add('pivot');\n    }\n    function clearPivot(index) {\n      bars[index].classList.remove('pivot');\n    }\n    function highlightCompare(index) {\n      bars[index].classList.add('compare');\n    }\n    function clearCompare(index) {\n      bars[index].classList.remove('compare');\n    }\n    async function swap(arr, i, j) {\n      // highlight bars being swapped\n      bars[i].classList.add('swap');\n      bars[j].classList.add('swap');\n      await sleep(delay);\n\n      // swap heights & values\n      let tempHeight = bars[i].style.height;\n      bars[i].style.height = bars[j].style.height;\n      bars[j].style.height = tempHeight;\n\n      let tempVal = arr[i];\n      arr[i] = arr[j];\n      arr[j] = tempVal;\n\n      bars[i].title = arr[i];\n      bars[j].title = arr[j];\n\n      await sleep(delay);\n      bars[i].classList.remove('swap');\n      bars[j].classList.remove('swap');\n    }\n\n    function sleep(ms) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    startBtn.addEventListener('click', async () => {\n      // Parse input array\n      let inputStr = arrayInput.value.trim();\n      if (!inputStr) return;\n      let parsedArr = inputStr.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));\n      if(parsedArr.length === 0) return alert('Please enter a valid list of numbers separated by commas.');\n\n      array = parsedArr;\n      createBars(array);\n      startBtn.disabled = true;\n      arrayInput.disabled = true;\n      speedRange.disabled = true;\n\n      await quickSort(array);\n\n      startBtn.disabled = false;\n      arrayInput.disabled = false;\n      speedRange.disabled = false;\n    });\n\n    // Initialize the view with default input\n    (()=>{\n      const initialArr = arrayInput.value.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));\n      array = initialArr;\n      createBars(array);\n    })();\n\n  })();\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Quick Sort"
    }
  ],
  "topic": "Quick Sort",
  "hasFSM": false,
  "hasTest": true
}