{
  "id": "e03a476c-cd32-11f0-a949-f901cf5609c9",
  "timestamp": "2025-11-29T14:52:15.075Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Huffman Coding",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Huffman Coding Demonstration</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2rem;\n    background: #f4f4f9;\n    color: #222;\n  }\n  h1 {\n    text-align: center;\n    color: #3a3a8f;\n  }\n  textarea {\n    width: 100%;\n    height: 80px;\n    font-size: 1.2rem;\n    padding: 0.5rem;\n    resize: vertical;\n  }\n  button {\n    margin-top: 1rem;\n    padding: 0.6rem 1.2rem;\n    font-size: 1.1rem;\n    background-color: #3a3a8f;\n    border: none;\n    color: white;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  button:hover {\n    background-color: #2c2c6f;\n  }\n  .result {\n    margin-top: 2rem;\n    background: white;\n    padding: 1rem;\n    border-radius: 6px;\n    box-shadow: 0 0 5px #aaa;\n  }\n  .tree-node {\n    display: inline-block;\n    vertical-align: top;\n    text-align: center;\n    font-size: 0.9rem;\n    margin: 0.2rem 1rem 2rem 1rem;\n  }\n  .tree-branch {\n    border-left: 2px solid #555;\n    margin-left: 50%;\n    height: 40px;\n  }\n  .tree-children {\n    display: flex;\n    justify-content: center;\n  }\n  .code-table {\n    border-collapse: collapse;\n    width: auto;\n    margin-top: 1rem;\n  }\n  .code-table th, .code-table td {\n    border: 1px solid #ddd;\n    padding: 0.4rem 0.7rem;\n    text-align: center;\n  }\n  .code-table th {\n    background-color: #3a3a8f;\n    color: white;\n  }\n  .binary-output {\n    font-family: monospace;\n    background: #222;\n    color: #8f8;\n    padding: 0.7rem;\n    margin-top: 1rem;\n    white-space: pre-wrap;\n    word-break: break-word;\n  }\n  .explanation {\n    margin-top: 1rem;\n    font-size: 0.9rem;\n    color: #555;\n  }\n  footer {\n    text-align: center;\n    margin-top: 3rem;\n    font-size: 0.85rem;\n    color: #666;\n  }\n</style>\n</head>\n<body>\n<h1>Huffman Coding Demonstration</h1>\n<p>Enter a string below and see its Huffman encoding, decoding, and tree visualization.</p>\n<textarea id=\"inputText\" placeholder=\"Type your text here (e.g. hello huffman)\"></textarea>\n<button id=\"encodeBtn\">Encode & Decode</button>\n\n<div class=\"result\" id=\"result\" style=\"display:none;\">\n  <h2>Frequency Table:</h2>\n  <table class=\"code-table\" id=\"freqTable\"></table>\n\n  <h2>Huffman Tree Visualization:</h2>\n  <div id=\"treeContainer\"></div>\n\n  <h2>Huffman Codes:</h2>\n  <table class=\"code-table\" id=\"codeTable\"></table>\n\n  <h2>Encoded Binary String:</h2>\n  <div class=\"binary-output\" id=\"encodedOutput\"></div>\n\n  <h2>Decoded String:</h2>\n  <p id=\"decodedOutput\" style=\"font-weight:bold; font-size:1.1rem;\"></p>\n\n  <div class=\"explanation\" id=\"explanation\"></div>\n</div>\n\n<script>\n  // Build Huffman coding classes and functions\n\n  class HuffmanNode {\n    constructor(char, freq, left=null, right=null) {\n      this.char = char;\n      this.freq = freq;\n      this.left = left;\n      this.right = right;\n    }\n    // Check if leaf\n    isLeaf() {\n      return !this.left && !this.right;\n    }\n  }\n\n  function buildFrequencyTable(str) {\n    const freqMap = new Map();\n    for (let ch of str) {\n      freqMap.set(ch, (freqMap.get(ch)||0)+1);\n    }\n    return freqMap;\n  }\n\n  // Build min-priority queue based on freq using array (for simplicity)\n  function buildHuffmanTree(freqMap) {\n    let nodes = [];\n    // create leaf nodes\n    for (let [ch,freq] of freqMap) {\n      nodes.push(new HuffmanNode(ch, freq));\n    }\n\n    if(nodes.length === 0) return null;\n\n    // edge: if only one char, make a dummy node as parent for correct coding\n    if (nodes.length === 1) {\n      let loneNode = nodes[0];\n      return new HuffmanNode(null, loneNode.freq, loneNode, null);\n    }\n\n    // build tree\n    while (nodes.length > 1) {\n      nodes.sort((a,b)=>a.freq - b.freq);\n      let left = nodes.shift();\n      let right = nodes.shift();\n      let parent = new HuffmanNode(null, left.freq + right.freq, left, right);\n      nodes.push(parent);\n    }\n    return nodes[0];\n  }\n\n  // Generate codes by traversing tree\n  function generateCodes(root) {\n    const codes = new Map();\n    function traverse(node, path) {\n      if (!node) return;\n      if (node.isLeaf()) {\n        codes.set(node.char, path || \"0\");  // if single char tree, assign \"0\"\n      } else {\n        traverse(node.left, path + \"0\");\n        traverse(node.right, path + \"1\");\n      }\n    }\n    traverse(root, \"\");\n    return codes;\n  }\n\n  // Encode string to bits:\n  function encode(str, codes) {\n    let result = \"\";\n    for (let ch of str) {\n      result += codes.get(ch);\n    }\n    return result;\n  }\n\n  // Decode bits to string using tree\n  function decode(bits, root) {\n    let result = \"\";\n    let node = root;\n    for(let bit of bits){\n      node = bit === \"0\" ? node.left : node.right;\n      if(node.isLeaf()){\n        result += node.char;\n        node = root;\n      }\n    }\n    return result;\n  }\n\n  // Visualization of tree as nested divs with branching lines:\n  // We'll draw each node and below its two children horizontally aligned.\n\n  function createTreeDiv(node) {\n    if (!node) return null;\n\n    const div = document.createElement(\"div\");\n    div.className = \"tree-node\";\n\n    // Label for node\n    let label = \"\";\n    if (node.isLeaf()) {\n      label = `\"${node.char}\"<br/><small>freq: ${node.freq}</small>`;\n    } else {\n      label = `<small>freq: ${node.freq}</small>`;\n    }\n    div.innerHTML = `<div style=\"padding:4px 10px; border: 2px solid #3a3a8f; border-radius: 6px; background:#e0e0f8;\">${label}</div>`;\n\n    if (!node.isLeaf()) {\n      // create horizontal container for children\n      const childrenDiv = document.createElement(\"div\");\n      childrenDiv.className = \"tree-children\";\n\n      // create branches\n      const leftDiv = createTreeDiv(node.left);\n      const rightDiv = createTreeDiv(node.right);\n\n      childrenDiv.appendChild(leftDiv);\n      childrenDiv.appendChild(rightDiv);\n\n      // vertical connection line from parent to children\n      const branchDiv = document.createElement(\"div\");\n      branchDiv.className = \"tree-branch\";\n\n      div.appendChild(branchDiv);\n      div.appendChild(childrenDiv);\n    }\n    return div;\n  }\n\n  // Fill frequency table\n  function fillFrequencyTable(freqMap, el) {\n    el.innerHTML = \"\";\n    if (freqMap.size === 0) return;\n    const header = document.createElement(\"tr\");\n    header.innerHTML = \"<th>Character</th><th>Frequency</th>\";\n    el.appendChild(header);\n\n    Array.from(freqMap.entries())\n      .sort((a,b)=>b[1]-a[1])\n      .forEach(([ch,freq]) => {\n      const row = document.createElement(\"tr\");\n      const dispChar = ch === \" \" ? \"(space)\" : ch === \"\\n\" ? \"\\\\n\" : ch === \"\\t\" ? \"\\\\t\" : ch;\n      row.innerHTML = `<td>${dispChar}</td><td>${freq}</td>`;\n      el.appendChild(row);\n    });\n  }\n\n  // Fill codes table\n  function fillCodesTable(codes, freqMap, el) {\n    el.innerHTML = \"\";\n    const header = document.createElement(\"tr\");\n    header.innerHTML = \"<th>Character</th><th>Frequency</th><th>Huffman Code</th>\";\n    el.appendChild(header);\n\n    Array.from(codes.entries())\n      .sort((a,b)=>{\n        // Sort by frequency desc for display only\n        const fa = freqMap.get(a[0]) || 0;\n        const fb = freqMap.get(b[0]) || 0;\n        return fb - fa;\n      })\n      .forEach(([ch, code]) => {\n      const freq = freqMap.get(ch);\n      const dispChar = ch === \" \" ? \"(space)\" : ch === \"\\n\" ? \"\\\\n\" : ch === \"\\t\" ? \"\\\\t\" : ch;\n      const row = document.createElement(\"tr\");\n      row.innerHTML = `<td>${dispChar}</td><td>${freq}</td><td style=\"font-family: monospace;\">${code}</td>`;\n      el.appendChild(row);\n    });\n  }\n\n  document.getElementById(\"encodeBtn\").addEventListener(\"click\", () => {\n    const input = document.getElementById(\"inputText\").value;\n    const resultDiv = document.getElementById(\"result\");\n    const freqMap = buildFrequencyTable(input);\n    \n    // Hide result if empty input\n    if(input.length === 0){\n      alert(\"Please enter some text to encode.\");\n      return;\n    }\n\n    // build tree and codes\n    const root = buildHuffmanTree(freqMap);\n    if(!root){\n      alert(\"Input string cannot be encoded.\");\n      return;\n    }\n    const codes = generateCodes(root);\n    const encoded = encode(input, codes);\n    const decoded = decode(encoded, root);\n\n    // Fill frequency table\n    fillFrequencyTable(freqMap, document.getElementById(\"freqTable\"));\n    // Fill code table\n    fillCodesTable(codes, freqMap, document.getElementById(\"codeTable\"));\n\n    // Show encoded output with spacing of 8 bits for readability\n    const spacedEncoded = encoded.match(/.{1,8}/g).join(' ');\n\n    document.getElementById(\"encodedOutput\").textContent = spacedEncoded;\n    document.getElementById(\"decodedOutput\").textContent = decoded;\n\n    // Visualize tree\n    const treeContainer = document.getElementById(\"treeContainer\");\n    treeContainer.innerHTML = \"\";\n    treeContainer.appendChild(createTreeDiv(root));\n\n    // Show explanation\n    const explanationEl = document.getElementById(\"explanation\");\n    explanationEl.innerHTML = `\n    <strong>How Huffman Coding Works:</strong><br/>\n    - The string's characters are counted to create a frequency table.<br/>\n    - A binary tree is built by combining the least frequent nodes first.<br/>\n    - Each character is assigned a unique prefix code based on its path in the tree, with <code>0</code> for left and <code>1</code> for right.<br/>\n    - The input string is encoded by replacing each character with its code.<br/>\n    - Decoding uses the tree to translate the binary back to characters.<br/>\n    - Huffman coding produces an optimal prefix-free binary encoding minimizing the average code length.\n    `;\n\n    resultDiv.style.display = \"block\";\n  });\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Huffman Coding"
    }
  ],
  "topic": "Huffman Coding",
  "hasFSM": false,
  "hasTest": true
}