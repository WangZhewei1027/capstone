{
  "id": "e03a205c-cd32-11f0-a949-f901cf5609c9",
  "timestamp": "2025-11-29T14:52:23.618Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Heap Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Heap Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n  }\n  h1 {\n    text-align: center;\n  }\n  #arrayInput {\n    width: 80%;\n    padding: 8px;\n    font-size: 16px;\n  }\n  #sortButton {\n    padding: 8px 16px;\n    font-size: 16px;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  #arrayContainer {\n    margin-top: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 300px;\n    gap: 5px;\n    border: 1px solid #ccc;\n    background: white;\n    padding: 10px;\n    border-radius: 5px;\n  }\n  .array-bar {\n    background-color: #6495ed;\n    width: 30px;\n    margin: 0 2px;\n    color: white;\n    font-weight: bold;\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    border-radius: 4px 4px 0 0;\n    user-select: none;\n  }\n  .highlight {\n    background-color: #ff6347 !important;\n  }\n  .swapping {\n    background-color: #3cb371 !important;\n  }\n  #log {\n    margin-top: 20px;\n    background: #fff;\n    border: 1px solid #ccc;\n    height: 150px;\n    overflow-y: auto;\n    padding: 10px;\n    font-family: monospace;\n    white-space: pre-wrap;\n    border-radius: 5px;\n  }\n  #controls {\n    text-align: center;\n    margin-bottom: 10px;\n  }\n  #speedRange {\n    width: 150px;\n    margin-left: 10px;\n  }\n</style>\n</head>\n<body>\n  <h1>Heap Sort Visualization</h1>\n  <div id=\"controls\">\n    <input id=\"arrayInput\" type=\"text\" placeholder=\"Enter numbers separated by commas\" value=\"5,3,8,4,2,7,1,10,6,9\" />\n    <button id=\"sortButton\">Start Heap Sort</button>\n    <label for=\"speedRange\">Speed:\n      <input type=\"range\" id=\"speedRange\" min=\"50\" max=\"1500\" value=\"500\" step=\"50\" />\n    </label>\n  </div>\n  <div id=\"arrayContainer\"></div>\n  <div id=\"log\"></div>\n\n<script>\n  const arrayInput = document.getElementById('arrayInput');\n  const sortButton = document.getElementById('sortButton');\n  const arrayContainer = document.getElementById('arrayContainer');\n  const logElem = document.getElementById('log');\n  const speedRange = document.getElementById('speedRange');\n\n  let speed = parseInt(speedRange.value);\n\n  speedRange.addEventListener('input', () => {\n    speed = parseInt(speedRange.value);\n  });\n\n  function log(msg) {\n    logElem.textContent += msg + \"\\n\";\n    logElem.scrollTop = logElem.scrollHeight;\n  }\n\n  function createBars(arr) {\n    arrayContainer.innerHTML = '';\n    for (let i = 0; i < arr.length; i++) {\n      const bar = document.createElement('div');\n      bar.classList.add('array-bar');\n      bar.style.height = arr[i] * 20 + 'px';\n      bar.textContent = arr[i];\n      bar.dataset.index = i;\n      arrayContainer.appendChild(bar);\n    }\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function swap(arr, i, j) {\n    log(`Swapping index ${i} (${arr[i]}) and index ${j} (${arr[j]})`);\n    // Swap in array\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n    // Swap bars visually\n    const bars = arrayContainer.children;\n    bars[i].classList.add('swapping');\n    bars[j].classList.add('swapping');\n\n    // Animate swap by exchanging heights and text\n    let heightI = bars[i].style.height;\n    let heightJ = bars[j].style.height;\n    let textI = bars[i].textContent;\n    let textJ = bars[j].textContent;\n\n    bars[i].style.height = heightJ;\n    bars[j].style.height = heightI;\n    bars[i].textContent = textJ;\n    bars[j].textContent = textI;\n\n    await sleep(speed);\n\n    bars[i].classList.remove('swapping');\n    bars[j].classList.remove('swapping');\n  }\n\n  async function heapify(arr, n, i) {\n    let largest = i;\n    let left = 2*i + 1;\n    let right = 2*i + 2;\n\n    const bars = arrayContainer.children;\n\n    // Highlight current index i\n    if(bars[i]) bars[i].classList.add('highlight');\n    if(bars[left]) bars[left].classList.add('highlight');\n    if(bars[right]) bars[right].classList.add('highlight');\n\n    log(`Heapify called on index ${i} (value: ${arr[i]}) with left child index ${left} and right child index ${right}`);\n\n    await sleep(speed);\n\n    if (left < n) {\n      log(`Compare left child arr[${left}] (${arr[left]}) with arr[${largest}] (${arr[largest]})`);\n      if (arr[left] > arr[largest]) {\n        largest = left;\n      }\n      await sleep(speed);\n    }\n\n    if (right < n) {\n      log(`Compare right child arr[${right}] (${arr[right]}) with arr[${largest}] (${arr[largest]})`);\n      if (arr[right] > arr[largest]) {\n        largest = right;\n      }\n      await sleep(speed);\n    }\n\n    if (largest !== i) {\n      if(bars[i]) bars[i].classList.remove('highlight');\n      if(bars[left]) bars[left].classList.remove('highlight');\n      if(bars[right]) bars[right].classList.remove('highlight');\n\n      await swap(arr, i, largest);\n      await heapify(arr, n, largest);\n    } else {\n      if(bars[i]) bars[i].classList.remove('highlight');\n      if(bars[left]) bars[left].classList.remove('highlight');\n      if(bars[right]) bars[right].classList.remove('highlight');\n      log(`No swap needed at index ${i}`);\n      await sleep(speed);\n    }\n  }\n\n  async function heapSort(arr) {\n    log(\"Building the heap...\");\n    let n = arr.length;\n\n    // Build max heap\n    for (let i = Math.floor(n/2) - 1; i >= 0; i--) {\n      await heapify(arr, n, i);\n    }\n\n    log(\"Heap built. Extracting elements...\");\n    // One by one extract elements\n    for (let i = n - 1; i > 0; i--) {\n      await swap(arr, 0, i); // Move current root to end\n      log(`Heapifying root after swap up to index ${i}`);\n      await heapify(arr, i, 0);\n    }\n    log(\"Heap Sort completed!\");\n  }\n\n  function parseInput(input) {\n    try {\n      return input.split(\",\").map(x => parseInt(x.trim())).filter(x => !isNaN(x));\n    } catch {\n      return [];\n    }\n  }\n\n  sortButton.addEventListener('click', async () => {\n    sortButton.disabled = true;\n    arrayInput.disabled = true;\n    logElem.textContent = '';\n    let arr = parseInput(arrayInput.value);\n    if(arr.length === 0) {\n      alert(\"Please enter a valid list of numbers separated by commas.\");\n      sortButton.disabled = false;\n      arrayInput.disabled = false;\n      return;\n    }\n    createBars(arr);\n    await heapSort(arr);\n    sortButton.disabled = false;\n    arrayInput.disabled = false;\n  });\n\n  // Initialize bars on page load\n  window.onload = () => {\n    let arr = parseInput(arrayInput.value);\n    createBars(arr);\n  };\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Heap Sort"
    }
  ],
  "topic": "Heap Sort",
  "hasFSM": false,
  "hasTest": true
}