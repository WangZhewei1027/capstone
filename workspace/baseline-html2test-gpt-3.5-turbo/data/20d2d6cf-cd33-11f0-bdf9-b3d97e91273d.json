{
  "id": "20d2d6cf-cd33-11f0-bdf9-b3d97e91273d",
  "timestamp": "2025-11-29T14:54:36.433Z",
  "type": "html-to-test",
  "htmlModel": "gpt-3.5-turbo",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Sliding Window",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Sliding Window Visualizer</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f4f8;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n    margin-bottom: 5px;\n  }\n  p {\n    text-align: center;\n    margin-top: 0;\n    margin-bottom: 20px;\n    color: #555;\n  }\n  #container {\n    max-width: 700px;\n    margin: 0 auto;\n  }\n  label {\n    display: inline-block;\n    margin: 10px 0 5px 0;\n    font-weight: bold;\n  }\n  input[type=\"text\"], input[type=\"number\"] {\n    width: 100%;\n    padding: 8px;\n    font-size: 1rem;\n    box-sizing: border-box;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n    margin-bottom: 15px;\n  }\n  button {\n    padding: 10px 20px;\n    font-size: 1rem;\n    border: none;\n    border-radius: 5px;\n    background-color: #007bff;\n    color: white;\n    cursor: pointer;\n    margin-bottom: 15px;\n  }\n  button:disabled {\n    background-color: #8ab4f8;\n    cursor: not-allowed;\n  }\n  .array-visual {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    gap: 8px;\n    margin-bottom: 20px;\n  }\n  .array-item {\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    background: white;\n    border-radius: 5px;\n    border: 1.5px solid #ccc;\n    text-align: center;\n    font-weight: bold;\n    user-select: none;\n    transition: background-color 0.3s, border-color 0.3s;\n  }\n  .window {\n    background-color: #007bff;\n    color: white;\n    border-color: #0056b3;\n  }\n  .current-max {\n    border-color: #28a745 !important;\n    box-shadow: 0 0 8px #28a745;\n  }\n  #steps {\n    max-height: 220px;\n    overflow-y: auto;\n    background: white;\n    border-radius: 8px;\n    padding: 15px;\n    color: #222;\n    line-height: 1.5;\n    font-family: monospace;\n    user-select: none;\n    box-shadow: 0 3px 8px rgb(0 0 0 / 0.1);\n  }\n  #steps p {\n    margin: 4px 0;\n  }\n  #controls {\n    text-align: center;\n    margin-bottom: 30px;\n  }\n  #speedLabel {\n    margin-left: 10px;\n    font-weight: normal;\n    font-size: 0.9rem;\n    color: #555;\n  }\n  #speed {\n    vertical-align: middle;\n  }\n  @media (max-width: 480px) {\n    .array-item {\n      width: 32px;\n      height: 32px;\n      line-height: 32px;\n      font-size: 0.85rem;\n    }\n  }\n</style>\n</head>\n<body>\n  <h1>Sliding Window Maximum Visualizer</h1>\n  <p>Demonstration of the Sliding Window technique to find maximums in each window</p>\n  <div id=\"container\">\n    <label for=\"arrayInput\">Enter array (comma separated numbers):</label>\n    <input type=\"text\" id=\"arrayInput\" placeholder=\"e.g. 2,1,3,4,6,3,8,9,10,12,56\" />\n    <label for=\"windowSize\">Window size (k):</label>\n    <input type=\"number\" id=\"windowSize\" min=\"1\" placeholder=\"e.g. 3\" />\n    <div id=\"controls\">\n      <button id=\"startBtn\">Start Visualization</button>\n      <label for=\"speed\">Speed:</label>\n      <input type=\"range\" id=\"speed\" min=\"100\" max=\"2000\" value=\"800\" step=\"100\" />\n      <span id=\"speedLabel\">800 ms</span>\n    </div>\n    <div class=\"array-visual\" id=\"arrayVisual\"></div>\n    <h3>Steps:</h3>\n    <div id=\"steps\"></div>\n  </div>\n\n<script>\n(() => {\n  const arrayInput = document.getElementById('arrayInput');\n  const windowSizeInput = document.getElementById('windowSize');\n  const startBtn = document.getElementById('startBtn');\n  const arrayVisual = document.getElementById('arrayVisual');\n  const stepsDiv = document.getElementById('steps');\n  const speedInput = document.getElementById('speed');\n  const speedLabel = document.getElementById('speedLabel');\n\n  let currentTimeout = null;\n\n  speedInput.addEventListener('input', () => {\n    speedLabel.textContent = speedInput.value + ' ms';\n  });\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  function clearVisual() {\n    arrayVisual.innerHTML = '';\n    stepsDiv.innerHTML = '';\n  }\n\n  function renderArray(arr, windowStart, windowEnd, deque, currentMaxIndex) {\n    arrayVisual.innerHTML = '';\n    const n = arr.length;\n    for(let i=0; i<n; i++) {\n      const div = document.createElement('div');\n      div.className = 'array-item';\n      div.textContent = arr[i];\n\n      // Highlight window\n      if(i >= windowStart && i <= windowEnd) {\n        div.classList.add('window');\n      }\n\n      // Highlight current max\n      if(i === currentMaxIndex) {\n        div.classList.add('current-max');\n      }\n\n      // Show deque elements as border color (for explanation)\n      if(deque.includes(i)) {\n        div.style.borderStyle = 'dashed';\n      }\n\n      arrayVisual.appendChild(div);\n    }\n  }\n\n  function logStep(text) {\n    const p = document.createElement('p');\n    p.textContent = text;\n    stepsDiv.appendChild(p);\n    stepsDiv.scrollTop = stepsDiv.scrollHeight;\n  }\n\n  async function visualizeSlidingWindowMax(arr, k) {\n    clearVisual();\n    const n = arr.length;\n    if(k > n) {\n      logStep('Window size larger than array length. No output.');\n      return;\n    }\n    let deque = []; // Will store indices; elements in deque are always in descending order by value\n\n    logStep(`Starting sliding window maximum with window size k=${k}...`);\n    // Process first k elements\n    for(let i=0; i<k; i++) {\n      while(deque.length && arr[i] >= arr[deque[deque.length-1]]) {\n        logStep(`Removing index ${deque[deque.length-1]} (value ${arr[deque[deque.length-1]]}) from deque because ${arr[i]} >= ${arr[deque[deque.length-1]]}`);\n        deque.pop();\n        renderArray(arr, 0, i, deque, deque.length ? deque[0] : null);\n        await sleep(speedInput.value);\n      }\n      deque.push(i);\n      logStep(`Adding index ${i} (value ${arr[i]}) to deque`);\n      renderArray(arr, 0, i, deque, deque[0]);\n      await sleep(speedInput.value);\n    }\n\n    logStep(`Window [0..${k-1}] max is value ${arr[deque[0]]} at index ${deque[0]}`);\n    renderArray(arr, 0, k-1, deque, deque[0]);\n    await sleep(speedInput.value);\n\n    // Process the rest of the elements\n    for(let i=k; i<n; i++) {\n      // Remove elements out of this window\n      if(deque.length && deque[0] <= i - k) {\n        logStep(`Removing index ${deque[0]} (value ${arr[deque[0]]}) from deque because it is out of window [${i-k+1}..${i}]`);\n        deque.shift();\n        renderArray(arr, i-k+1, i, deque, deque.length ? deque[0] : null);\n        await sleep(speedInput.value);\n      }\n\n      // Remove smaller elements as they can't be max\n      while(deque.length && arr[i] >= arr[deque[deque.length-1]]) {\n        logStep(`Removing index ${deque[deque.length-1]} (value ${arr[deque[deque.length-1]]}) from deque because ${arr[i]} >= ${arr[deque[deque.length-1]]}`);\n        deque.pop();\n        renderArray(arr, i-k+1, i, deque, deque.length ? deque[0] : null);\n        await sleep(speedInput.value);\n      }\n\n      deque.push(i);\n      logStep(`Adding index ${i} (value ${arr[i]}) to deque`);\n\n      // Current window max\n      logStep(`Window [${i-k+1}..${i}] max is value ${arr[deque[0]]} at index ${deque[0]}`);\n\n      renderArray(arr, i-k+1, i, deque, deque[0]);\n      await sleep(speedInput.value);\n    }\n\n    logStep('Sliding window maximum completed.');\n  }\n\n  startBtn.addEventListener('click', async () => {\n    if(currentTimeout) {\n      clearTimeout(currentTimeout);\n      currentTimeout = null;\n    }\n    const arrStr = arrayInput.value.trim();\n    const k = parseInt(windowSizeInput.value, 10);\n\n    if(!arrStr) {\n      alert('Please enter an array.');\n      return;\n    }\n    if(!k || k < 1) {\n      alert('Please enter a valid window size >= 1.');\n      return;\n    }\n\n    // Parse array\n    let arr = arrStr.split(',').map(x => x.trim()).filter(x => x !== '').map(Number);\n    if(arr.some(v => isNaN(v))) {\n      alert('Array contains invalid numbers.');\n      return;\n    }\n    if(k > arr.length) {\n      alert('Window size cannot be larger than the array length.');\n      return;\n    }\n\n    startBtn.disabled = true;\n    arrayInput.disabled = true;\n    windowSizeInput.disabled = true;\n    speedInput.disabled = true;\n\n    try {\n      await visualizeSlidingWindowMax(arr, k);\n    } catch(e) {\n      console.error(e);\n      alert('An error occurred during visualization.');\n    }\n\n    startBtn.disabled = false;\n    arrayInput.disabled = false;\n    windowSizeInput.disabled = false;\n    speedInput.disabled = false;\n  });\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Sliding Window"
    }
  ],
  "topic": "Sliding Window",
  "hasFSM": false,
  "hasTest": true
}