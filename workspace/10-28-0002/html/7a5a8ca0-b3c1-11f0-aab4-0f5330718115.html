<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Array Demo</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; line-height: 1.5; margin: 2rem; color: #222; }
    h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
    p { margin-top: 0; color: #444; }
    button { padding: 0.5rem 0.8rem; border: 1px solid #ccc; background: #f8f8f8; border-radius: 6px; cursor: pointer; }
    button:hover { background: #f0f0f0; }
    pre { background: #f6f8fa; padding: 1rem; border-radius: 6px; overflow: auto; border: 1px solid #e5e7eb; }
    .controls { display: flex; gap: 0.5rem; margin: 1rem 0; flex-wrap: wrap; }
    .input-row { display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap; }
    input[type="text"] { padding: 0.45rem; border: 1px solid #ccc; border-radius: 6px; min-width: 12rem; }
    small { color: #666; }
  </style>
</head>
<body>
  <h1>Array</h1>
  <p>This simple page shows a few basic JavaScript array operations.</p>

  <div class="input-row">
    <label for="arrayInput"><strong>Start array</strong></label>
    <input id="arrayInput" type="text" value="1,2,3,4,5" aria-label="Initial array values (comma separated)" />
    <small>Enter comma-separated values, then run the demo.</small>
  </div>

  <div class="controls">
    <button id="runBtn">Run Demo</button>
    <button id="clearBtn">Clear Output</button>
  </div>

  <pre id="output" aria-live="polite"></pre>

  <script>
    const outputEl = document.getElementById('output');
    const inputEl = document.getElementById('arrayInput');
    const runBtn = document.getElementById('runBtn');
    const clearBtn = document.getElementById('clearBtn');

    function log(title, value) {
      const line = `${title}: ${format(value)}`;
      outputEl.textContent += line + '\n';
    }

    function format(v) {
      try {
        return typeof v === 'string' ? `"${v}"` : JSON.stringify(v);
      } catch {
        return String(v);
      }
    }

    function parseInput(str) {
      // Split by comma, trim spaces, try to coerce numbers when possible
      return str
        .split(',')
        .map(s => s.trim())
        .filter(s => s.length > 0)
        .map(s => {
          const n = Number(s);
          return Number.isFinite(n) && s !== '' && !/\s/.test(s) ? n : s;
        });
    }

    function runDemo() {
      outputEl.textContent = '';
      const arr = parseInput(inputEl.value);
      log('Initial', arr);

      // Non-mutating examples
      const mapped = arr.map(x => (typeof x === 'number' ? x * 2 : x));
      log('map(x => x*2)', mapped);

      const filtered = arr.filter(x => typeof x === 'number' ? x % 2 === 0 : false);
      log('filter(even numbers)', filtered);

      const sum = arr.reduce((acc, x) => acc + (typeof x === 'number' ? x : 0), 0);
      log('reduce(sum of numbers)', sum);

      const includesThree = arr.includes(3);
      log('includes(3)', includesThree);

      const foundGtThree = arr.find(x => typeof x === 'number' && x > 3);
      log('find(x > 3)', foundGtThree === undefined ? 'not found' : foundGtThree);

      // Mutating examples on a copy
      const copy = arr.slice();
      copy.push('new');
      log('push("new")', copy);

      const popped = copy.pop();
      log('pop() -> removed', popped);
      log('After pop', copy);

      // Sorting numbers sensibly (non-mutating by copying first)
      const numericSorted = arr
        .filter(x => typeof x === 'number')
        .slice()
        .sort((a, b) => a - b);
      log('sorted numbers (asc)', numericSorted);

      log('Length', arr.length);
    }

    runBtn.addEventListener('click', runDemo);
    clearBtn.addEventListener('click', () => { outputEl.textContent = ''; });

    // Auto-run once on load for convenience
    runDemo();
  </script>
</body>
</html>