<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Selection Sort</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #60a5fa;
      --bar: #69b3a2;
      --scan: #03a9f4;
      --current: #ff9800;
      --min: #e91e63;
      --sorted: #22c55e;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 24px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(180deg, #0b1220, #0f172a);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .app {
      width: min(1000px, 96vw);
      background: linear-gradient(180deg, #0f172a, #0b1220);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.04);
    }
    header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }
    h1 {
      font-size: 22px;
      margin: 0;
      letter-spacing: .2px;
    }
    .desc {
      font-size: 14px;
      color: var(--muted);
      margin: 0 0 16px 0;
      line-height: 1.5;
    }
    .controls {
      display: grid;
      grid-template-columns: 1fr auto auto auto;
      gap: 10px;
      align-items: center;
      margin-bottom: 14px;
    }
    .inputWrap {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    label {
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(17,24,39,0.7);
      color: var(--text);
      outline: none;
    }
    input[type="range"] {
      width: 160px;
      accent-color: var(--accent);
    }
    .btn {
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(17,24,39,0.7);
      color: var(--text);
      cursor: pointer;
      transition: transform .05s ease, background .2s ease;
      user-select: none;
    }
    .btn:hover { background: rgba(30,41,59,0.75); }
    .btn:active { transform: translateY(1px); }
    .btn[disabled] {
      opacity: .6;
      cursor: not-allowed;
      transform: none;
    }
    .viz {
      background: radial-gradient(1200px 300px at 50% 0%, rgba(96,165,250,0.08), transparent 60%),
                  linear-gradient(180deg, rgba(255,255,255,0.02), transparent 20%),
                  rgba(15,23,42,0.7);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 12px;
      padding: 10px;
      height: 320px;
      display: flex;
      align-items: flex-end;
      justify-content: stretch;
      overflow: hidden;
    }
    .bars {
      display: flex;
      align-items: flex-end;
      gap: 6px;
      width: 100%;
      height: 100%;
      padding: 8px 6px;
    }
    .bar {
      flex: 1 1 0;
      min-width: 14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.02)) , var(--bar);
      border: 1px solid rgba(255,255,255,0.08);
      border-bottom: none;
      border-radius: 8px 8px 0 0;
      position: relative;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      transition: height .25s ease, background .15s ease, transform .1s ease, box-shadow .2s ease;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    }
    .bar.current  { background: linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.04)), var(--current); }
    .bar.scanning { background: linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.04)), var(--scan); }
    .bar.min      { background: linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.04)), var(--min); }
    .bar.sorted   { background: linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.04)), var(--sorted); }
    .bar span {
      font-size: 12px;
      color: #ffffff;
      padding: 4px 6px 6px;
      text-shadow: 0 1px 1px rgba(0,0,0,0.4);
      pointer-events: none;
      opacity: .9;
    }
    .status {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 13px;
      color: var(--muted);
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(17,24,39,0.55);
      padding: 8px 10px;
      border-radius: 10px;
    }
    .legend {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .key {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
    }
    .dot {
      width: 12px;
      height: 12px;
      border-radius: 3px;
      border: 1px solid rgba(255,255,255,0.18);
    }
    .dot.current { background: var(--current); }
    .dot.min { background: var(--min); }
    .dot.scanning { background: var(--scan); }
    .dot.sorted { background: var(--sorted); }
    .footer-note {
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted);
    }
    @media (max-width: 720px) {
      .controls {
        grid-template-columns: 1fr 1fr 1fr;
      }
      .inputWrap {
        grid-column: 1 / -1;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Selection Sort</h1>
      <div class="pill" id="status">Ready</div>
    </header>

    <p class="desc">
      Selection sort repeatedly selects the smallest remaining element and swaps it into its correct position.
      It runs in O(nÂ²) time and sorts in-place.
    </p>

    <div class="controls">
      <div class="inputWrap">
        <label for="arrayInput">Array</label>
        <input id="arrayInput" type="text" placeholder="e.g., 64, 25, 12, 22, 11" />
      </div>
      <button class="btn" id="randomBtn" title="Generate a random array">Randomize</button>
      <button class="btn" id="renderBtn" title="Render the array from input">Visualize</button>
      <div class="inputWrap" style="justify-content:flex-end;">
        <label for="speed">Speed</label>
        <input id="speed" type="range" min="40" max="800" step="10" value="260" />
      </div>
    </div>

    <div class="viz">
      <div class="bars" id="bars"></div>
    </div>

    <div class="status">
      <div class="legend">
        <span class="key"><span class="dot current"></span> Current Index</span>
        <span class="key"><span class="dot min"></span> Minimum Found</span>
        <span class="key"><span class="dot scanning"></span> Scanning</span>
        <span class="key"><span class="dot sorted"></span> Sorted</span>
      </div>
      <div>
        <button class="btn" id="sortBtn">Sort</button>
      </div>
    </div>

    <div class="footer-note">
      Tip: Enter comma-separated numbers above or click Randomize.
    </div>
  </div>

  <script>
    const barsEl = document.getElementById('bars');
    const inputEl = document.getElementById('arrayInput');
    const randomBtn = document.getElementById('randomBtn');
    const renderBtn = document.getElementById('renderBtn');
    const sortBtn = document.getElementById('sortBtn');
    const speedEl = document.getElementById('speed');
    const statusEl = document.getElementById('status');

    let arr = [];
    let sorting = false;

    function setStatus(text) {
      statusEl.textContent = text;
    }

    function getDelay() {
      // Lower slider = faster feel; we can map directly for simplicity
      return Number(speedEl.value);
    }

    function parseInput(value) {
      const parts = value.split(',').map(s => s.trim()).filter(s => s.length > 0);
      if (parts.length === 0) return [];
      const nums = parts.map(n => Number(n));
      if (nums.some(n => Number.isNaN(n) || !Number.isFinite(n))) {
        throw new Error('Please enter valid numbers separated by commas.');
      }
      return nums;
    }

    function randomArray(len = 12, min = 5, max = 99) {
      const a = Array.from({ length: len }, () => Math.floor(Math.random() * (max - min + 1)) + min);
      return a;
    }

    function normalizeHeights(values) {
      const min = Math.min(...values);
      const max = Math.max(...values);
      const range = max - min || 1;
      // Return heights between 40 and 280 px
      return values.map(v => 40 + ((v - min) / range) * 240);
    }

    function render(highlight = {}, sortedSet = new Set()) {
      barsEl.innerHTML = '';
      if (arr.length === 0) return;

      const heights = normalizeHeights(arr);
      arr.forEach((val, idx) => {
        const bar = document.createElement('div');
        bar.className = 'bar';
        bar.style.height = `${heights[idx]}px`;

        if (idx === highlight.i) bar.classList.add('current');
        if (idx === highlight.j) bar.classList.add('scanning');
        if (idx === highlight.min) bar.classList.add('min');
        if (sortedSet.has(idx)) bar.classList.add('sorted');

        const label = document.createElement('span');
        label.textContent = String(val);
        bar.appendChild(label);
        barsEl.appendChild(bar);
      });
    }

    function setControls(disabled) {
      [randomBtn, renderBtn, sortBtn, inputEl, speedEl].forEach(ctrl => {
        ctrl.disabled = !!disabled;
      });
      // Allow speed change while sorting for convenience
      speedEl.disabled = false;
    }

    function sleep(ms) {
      return new Promise(res => setTimeout(res, ms));
    }

    async function selectionSort() {
      if (sorting || arr.length === 0) return;
      sorting = true;
      setControls(true);
      setStatus('Sorting...');

      const n = arr.length;
      const sortedSet = new Set();

      for (let i = 0; i < n; i++) {
        let minIdx = i;
        render({ i, min: minIdx, j: undefined }, sortedSet);
        await sleep(getDelay());

        for (let j = i + 1; j < n; j++) {
          render({ i, min: minIdx, j }, sortedSet);
          await sleep(getDelay());

          if (arr[j] < arr[minIdx]) {
            minIdx = j;
            render({ i, min: minIdx, j }, sortedSet);
            await sleep(getDelay());
          }
        }

        if (minIdx !== i) {
          [arr[i], arr[minIdx]] = [arr[minIdx], arr[i]];
          render({ i, min: minIdx }, sortedSet);
          await sleep(getDelay());
        }
        sortedSet.add(i);
        render({ }, sortedSet);
        await sleep(getDelay() * 0.6);
      }

      setStatus('Done! Array is sorted.');
      sorting = false;
      setControls(false);
    }

    function visualizeFromInput() {
      try {
        const nums = parseInput(inputEl.value);
        arr = nums.slice(0, 60); // clamp to avoid too many bars
        setStatus(arr.length ? 'Array loaded.' : 'Enter numbers to visualize.');
        render();
      } catch (e) {
        alert(e.message);
      }
    }

    function init() {
      arr = [64, 25, 12, 22, 11];
      inputEl.value = arr.join(', ');
      render();

      randomBtn.addEventListener('click', () => {
        if (sorting) return;
        const len = Math.floor(Math.random() * 8) + 8; // 8..15
        arr = randomArray(len, 5, 99);
        inputEl.value = arr.join(', ');
        setStatus('Random array generated.');
        render();
      });

      renderBtn.addEventListener('click', () => {
        if (sorting) return;
        visualizeFromInput();
      });

      sortBtn.addEventListener('click', () => {
        selectionSort();
      });

      inputEl.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !sorting) visualizeFromInput();
      });
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>