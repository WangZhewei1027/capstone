<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fibonacci Sequence</title>
  <meta name="description" content="A simple page that explains the Fibonacci sequence and lets you generate its terms." />
  <style>
    :root { color-scheme: light dark; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.6;
      margin: 0;
      padding: 0 1rem 3rem;
      background: Canvas;
      color: CanvasText;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    h1 { font-size: 1.8rem; margin-top: 1.2rem; }
    h2 { font-size: 1.2rem; margin-top: 2rem; }
    .card {
      border: 1px solid rgba(127,127,127,.3);
      border-radius: 10px;
      padding: 1rem;
      background: rgba(127,127,127,.05);
    }
    label { display: inline-block; margin: 0.5rem 0 0.2rem; }
    input[type="number"] {
      width: 8rem;
      padding: 0.4rem 0.5rem;
      border: 1px solid rgba(127,127,127,.4);
      border-radius: 6px;
      background: transparent;
      color: inherit;
    }
    input[type="checkbox"] { transform: translateY(1px); }
    button {
      padding: 0.5rem 0.8rem;
      border: 1px solid rgba(127,127,127,.4);
      border-radius: 8px;
      background: ButtonFace;
      color: ButtonText;
      cursor: pointer;
    }
    button:hover { filter: brightness(0.98); }
    .row { display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; }
    .muted { color: GrayText; font-size: 0.9rem; }
    pre, code {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95rem;
    }
    .output {
      border: 1px dashed rgba(127,127,127,.4);
      border-radius: 8px;
      padding: 0.75rem;
      background: rgba(127,127,127,.06);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Fibonacci Sequence</h1>
    <p>
      The Fibonacci sequence is a series of numbers where each term is the sum of the two preceding ones.
      Using the common convention F(0) = 0 and F(1) = 1, we define:
    </p>
    <div class="card">
      <code>F(0) = 0, F(1) = 1, and for n ≥ 2: F(n) = F(n−1) + F(n−2)</code>
    </div>
    <p class="muted">
      Some sources start with 1, 1 instead (i.e., F(1) = 1, F(2) = 1). You can choose either below.
    </p>

    <h2>First 15 terms (starting with 0, 1)</h2>
    <div class="output">
      <pre id="static-seq">0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377</pre>
    </div>

    <h2>Generate your own sequence</h2>
    <div class="card">
      <div class="row">
        <div>
          <label for="count">Number of terms (1–200)</label><br />
          <input id="count" type="number" min="1" max="200" value="10" />
        </div>
        <div style="margin-top: 1.6rem;">
          <label>
            <input id="start11" type="checkbox" />
            Start with 1, 1 instead of 0, 1
          </label>
        </div>
        <div style="margin-top: 1.6rem;">
          <button id="btn-generate" type="button">Generate</button>
        </div>
      </div>
      <div style="margin-top: 0.8rem;">
        <div class="output"><pre id="gen-output">Click Generate to list the terms here.</pre></div>
      </div>
    </div>

    <h2>Compute a specific term F(n)</h2>
    <div class="card">
      <div class="row">
        <div>
          <label for="nth">n (0–5000)</label><br />
          <input id="nth" type="number" min="0" max="5000" value="20" />
        </div>
        <div style="margin-top: 1.6rem;">
          <button id="btn-nth" type="button">Compute F(n)</button>
        </div>
      </div>
      <div style="margin-top: 0.8rem;">
        <div class="output">
          <pre id="nth-output">F(20) = 6765</pre>
        </div>
        <p class="muted">Values are computed exactly using big integers.</p>
      </div>
    </div>
  </div>

  <script>
    // Generate first n terms as BigInt, with choice of starting pair.
    function fibSequence(n, startWith11) {
      const arr = [];
      let a = startWith11 ? 1n : 0n;
      let b = 1n;
      for (let i = 0; i < n; i++) {
        arr.push(a);
        const next = a + b;
        a = b;
        b = next;
      }
      return arr;
    }

    // Compute F(n) (0-indexed, with F(0)=0, F(1)=1) using iterative method in O(n).
    function fibNthBigInt(n) {
      let a = 0n, b = 1n; // a=F(i), b=F(i+1)
      for (let i = 0; i < n; i++) {
        const next = a + b;
        a = b;
        b = next;
      }
      return a;
    }

    function showError(el, message) {
      el.textContent = message;
    }

    function formatListBigInt(arr) {
      // Join as comma-separated string without locale-specific separators.
      return arr.map(x => x.toString()).join(", ");
    }

    document.getElementById("btn-generate").addEventListener("click", () => {
      const out = document.getElementById("gen-output");
      const countEl = document.getElementById("count");
      const start11 = document.getElementById("start11").checked;
      const n = Number(countEl.value);

      if (!Number.isInteger(n) || n < 1 || n > 200) {
        showError(out, "Please enter a whole number between 1 and 200.");
        return;
      }

      const seq = fibSequence(n, start11);
      out.textContent = formatListBigInt(seq);
    });

    document.getElementById("btn-nth").addEventListener("click", () => {
      const out = document.getElementById("nth-output");
      const nthEl = document.getElementById("nth");
      const n = Number(nthEl.value);

      if (!Number.isInteger(n) || n < 0 || n > 5000) {
        showError(out, "Please enter an integer n between 0 and 5000.");
        return;
      }

      const value = fibNthBigInt(n);
      out.textContent = `F(${n}) = ${value.toString()}`;
    });

    // Initialize default computed nth value.
    (function init() {
      const n = Number(document.getElementById("nth").value);
      document.getElementById("nth-output").textContent = `F(${n}) = ${fibNthBigInt(n).toString()}`;
    })();
  </script>
</body>
</html>