<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort Visualizer</title>
    <style>
        body {
            background-color: #f7f7f7;
            font-family: Arial, sans-serif;
            padding: 24px;
        }
        header {
            text-align: center;
            margin-bottom: 24px;
        }
        .input-container {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
        }
        input[type="text"] {
            width: 300px;
            padding: 10px;
            margin-right: 16px;
        }
        button {
            padding: 10px 20px;
            cursor: pointer;
        }
        #visualization {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 300px;
            border: 1px solid #ccc;
        }
        .bar {
            width: 30px;
            margin-right: 8px;
            background-color: blue;
            transition: height 0.4s, background-color 0.2s;
        }
    </style>
</head>
<body>
    <header>
        <h1>Bubble Sort Visualizer</h1>
    </header>
    <div class="input-container">
        <input type="text" id="numbers" placeholder="Enter numbers separated by commas">
        <button id="sortButton">Sort</button>
    </div>
    <div id="visualization"></div>

    <script>
        document.getElementById("sortButton").addEventListener("click", function() {
            const input = document.getElementById("numbers").value;
            const array = input.split(',').map(Number);
            visualizeSort(array);
        });

        function visualizeSort(array) {
            const visualization = document.getElementById("visualization");
            visualization.innerHTML = ''; // Clear previous bars

            // Create the bars for the visualization
            array.forEach(num => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${num * 5}px`; // Scale height
                visualization.appendChild(bar);
            });

            bubbleSort(array, visualization);
        }

        async function bubbleSort(array, visualization) {
            const bars = document.querySelectorAll('.bar');
            let n = array.length;
            for (let i = 0; i < n - 1; i++) {
                for (let j = 0; j < n - i - 1; j++) {
                    bars[j].style.backgroundColor = 'green'; // Highlight current comparison
                    bars[j + 1].style.backgroundColor = 'green'; // Highlight next comparison
                    await new Promise(resolve => setTimeout(resolve, 500)); // Pause for animation
                    
                    if (array[j] > array[j + 1]) {
                        // Swap elements in the array
                        [array[j], array[j + 1]] = [array[j + 1], array[j]];
                        // Swap bar heights visually
                        bars[j].style.height = `${array[j] * 5}px`;
                        bars[j + 1].style.height = `${array[j + 1] * 5}px`;
                    }
                    bars[j].style.backgroundColor = 'blue'; // Reset color
                    bars[j + 1].style.backgroundColor = 'blue'; // Reset color
                }
            }
            // Mark the sorted array
            bars.forEach(bar => bar.style.backgroundColor = 'green');
        }
    </script>


  <script id="fsm" type="application/json">
    {
  "topic": "Interactive Application",
  "description": "Finite State Machine for the Bubble Sort Visualizer application.",
  "states": [
    {
      "name": "idle",
      "onEnter": "clearVisualization",
      "onExit": "none",
      "on": {
        "SORT_BUTTON_CLICKED": "visualizing"
      }
    },
    {
      "name": "visualizing",
      "onEnter": "initializeBars",
      "onExit": "none",
      "on": {
        "SORT_COMPLETED": "done"
      }
    },
    {
      "name": "comparing",
      "onEnter": "highlightBars",
      "onExit": "resetBarColors",
      "on": {
        "SWAP_OCCURRED": "swapping",
        "NEXT_COMPARISON": "comparing"
      }
    },
    {
      "name": "swapping",
      "onEnter": "performSwap",
      "onExit": "none",
      "on": {
        "SWAP_COMPLETED": "comparing"
      }
    },
    {
      "name": "done",
      "onEnter": "markSorted",
      "onExit": "none",
      "on": {
        "RESET": "idle"
      }
    }
  ],
  "events": [
    "SORT_BUTTON_CLICKED",
    "SORT_COMPLETED",
    "SWAP_OCCURRED",
    "SWAP_COMPLETED",
    "NEXT_COMPARISON",
    "RESET"
  ],
  "notes": "The FSM captures the states of the sorting process, including idle state before sorting, visualizing state during sorting, comparing and swapping states, and the final done state after sorting is complete."
}
  </script>
</body>
</html>