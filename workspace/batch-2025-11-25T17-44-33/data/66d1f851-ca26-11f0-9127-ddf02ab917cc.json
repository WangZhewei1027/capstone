{
  "id": "66d1f851-ca26-11f0-9127-ddf02ab917cc",
  "timestamp": "2025-11-25T17:45:08.503Z",
  "model": "gpt-4o-mini",
  "status": "success",
  "question": "K-Nearest Neighbors (KNN)",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>K-Nearest Neighbors (KNN) Demo</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            margin: 20px;\n        }\n        #canvas {\n            border: 1px solid #ccc;\n        }\n    </style>\n</head>\n<body>\n    <h1>K-Nearest Neighbors (KNN) Demo</h1>\n    <p>Click on the canvas to add points. The KNN algorithm will classify the new point based on the closest labeled points.</p>\n    <canvas id=\"canvas\" width=\"500\" height=\"500\"></canvas>\n    <button id=\"predict-btn\">Predict Class</button>\n    <pre id=\"result\"></pre>\n\n    <script>\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n        const points = [];\n        let newPoint = null;\n\n        const colors = {\n            A: 'red',\n            B: 'blue'\n        };\n\n        // Function to draw existing points and the new point\n        function draw() {\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            points.forEach(({ x, y, label }) => {\n                ctx.fillStyle = colors[label];\n                ctx.beginPath();\n                ctx.arc(x, y, 5, 0, 2 * Math.PI);\n                ctx.fill();\n            });\n            if (newPoint) {\n                ctx.fillStyle = 'green';\n                ctx.beginPath();\n                ctx.arc(newPoint.x, newPoint.y, 5, 0, 2 * Math.PI);\n                ctx.fill();\n            }\n        }\n\n        // Function to calculate Euclidean distance\n        function euclideanDistance(point1, point2) {\n            return Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2));\n        }\n\n        // Function to execute KNN and classify the new point\n        function knn(k) {\n            if (points.length === 0 || !newPoint) return null;\n\n            // Calculate distances from the new point to all existing points\n            const distances = points.map(point => ({\n                label: point.label,\n                distance: euclideanDistance(point, newPoint)\n            }));\n\n            // Sort by distance and select the k nearest neighbors\n            distances.sort((a, b) => a.distance - b.distance);\n            const nearestNeighbors = distances.slice(0, k);\n\n            // Count the occurrences of each class\n            const classCount = {};\n            nearestNeighbors.forEach(neighbor => {\n                classCount[neighbor.label] = (classCount[neighbor.label] || 0) + 1;\n            });\n\n            // Determine the class with the highest count\n            const predictedClass = Object.keys(classCount).reduce((a, b) => classCount[a] > classCount[b] ? a : b);\n\n            return predictedClass;\n        }\n\n        // Event Listener for canvas click\n        canvas.addEventListener('click', (event) => {\n            const rect = canvas.getBoundingClientRect();\n            const x = event.clientX - rect.left;\n            const y = event.clientY - rect.top;\n\n            // Randomly assign a label A or B for simplicity\n            const label = Math.random() > 0.5 ? 'A' : 'B';\n            points.push({ x, y, label });\n            newPoint = null; // clear new point\n            draw();\n        });\n\n        // Predict class on button click\n        document.getElementById('predict-btn').addEventListener('click', () => {\n            if (!newPoint) {\n                const bounds = canvas.getBoundingClientRect();\n                newPoint = {\n                    x: Math.random() * canvas.width,\n                    y: Math.random() * canvas.height\n                };\n                draw();\n            }\n\n            const predictedClass = knn(3); // You can adjust K here\n            document.getElementById('result').textContent = `Predicted Class: ${predictedClass}`;\n        });\n\n        draw(); // Initial draw\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "K-Nearest Neighbors (KNN)"
    }
  ],
  "topic": "K-Nearest Neighbors (KNN)",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}