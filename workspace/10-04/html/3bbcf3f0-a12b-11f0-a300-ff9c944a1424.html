<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>冒泡排序演示</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 20px;
      }
      #array {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
      }
      .bar {
        width: 30px;
        margin: 0 5px;
        background-color: teal;
        display: inline-block;
      }
    </style>
  </head>
  <body>
    <h1>冒泡排序演示</h1>
    <div id="array"></div>
    <button id="sortButton">开始排序</button>

    <script>
      const array = [5, 3, 8, 4, 2];
      const arrayContainer = document.getElementById('array');
      const sortButton = document.getElementById('sortButton');

      function createBars(arr) {
          arrayContainer.innerHTML = '';
          arr.forEach(num => {
              const bar = document.createElement('div');
              bar.className = 'bar';
              bar.style.height = `${num * 20}px`;
              arrayContainer.appendChild(bar);
          });
      }

      function bubbleSort(arr) {
          const len = arr.length;
          let swapped;
          do {
              swapped = false;
              for (let i = 0; i < len - 1; i++) {
                  if (arr[i] > arr[i + 1]) {
                      // Swap the elements
                      [arr[i], arr[i + 1]] = [arr[i + 1], arr[i]];
                      swapped = true;
                      createBars(arr); // Update the visualization
                      await sleep(500); // Wait for a moment to visualize the swap
                  }
              }
          } while (swapped);
          return arr;
      }

      function sleep(ms) {
          return new Promise(resolve => setTimeout(resolve, ms));
      }

      sortButton.addEventListener('click', async () => {
          await bubbleSort(array.slice()); // Sort a copy of the array
      });

      createBars(array);
    </script>
  </body>
</html>
