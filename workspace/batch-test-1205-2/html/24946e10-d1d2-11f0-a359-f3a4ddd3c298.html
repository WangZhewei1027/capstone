<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radix Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #arrayContainer {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        .bar {
            width: 30px;
            margin: 0 5px;
            background-color: teal;
            display: inline-block;
        }
    </style>
</head>
<body>

<h1>Radix Sort Visualization</h1>
<button onclick="startRadixSort()">Start Radix Sort</button>
<div id="arrayContainer"></div>

<script>
    // Generate random array
    let array = Array.from({length: 10}, () => Math.floor(Math.random() * 100));
    renderArray();

    function renderArray() {
        const container = document.getElementById('arrayContainer');
        container.innerHTML = '';
        array.forEach(num => {
            const bar = document.createElement('div');
            bar.className = 'bar';
            bar.style.height = `${num * 3}px`;
            bar.innerText = num;
            container.appendChild(bar);
        });
    }

    function getDigit(num, place) {
        return Math.floor(Math.abs(num) / Math.pow(10, place)) % 10;
    }

    function digitCount(num) {
        return num.toString().length;
    }

    function mostDigits(arr) {
        let maxDigits = 0;
        for (let num of arr) {
            maxDigits = Math.max(maxDigits, digitCount(num));
        }
        return maxDigits;
    }

    async function startRadixSort() {
        let maxDigitCount = mostDigits(array);

        for (let k = 0; k < maxDigitCount; k++) {
            await sortByDigit(k);
            renderArray();
        }
    }

    async function sortByDigit(k) {
        const buckets = Array.from({length: 10}, () => []);
        
        // Distribute array elements into buckets
        for (let num of array) {
            const digit = getDigit(num, k);
            buckets[digit].push(num);
        }

        // Reconstruct the array: empty the original array and fill it with bucketed elements
        array = [].concat(...buckets);

        // Simulate delay for visualization purposes
        await new Promise(resolve => setTimeout(resolve, 1000));
    }
</script>

</body>
</html>