<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Regression Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>

<h1>Linear Regression Demonstration</h1>
<canvas id="canvas" width="600" height="400"></canvas>

<h2>Input Data Points</h2>
<label for="x">X Values (comma-separated):</label>
<input type="text" id="x" placeholder="e.g., 1,2,3,4,5">
<br>
<label for="y">Y Values (comma-separated):</label>
<input type="text" id="y" placeholder="e.g., 2,3,5,7,11">
<br>
<button id="plotBtn">Plot Linear Regression</button>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    function plotPoints(xValues, yValues) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // draw axes
        ctx.beginPath();
        ctx.moveTo(50, 350); // x-axis
        ctx.lineTo(550, 350);
        ctx.moveTo(50, 350); // y-axis
        ctx.lineTo(50, 50);
        ctx.stroke();

        // plot points
        ctx.fillStyle = 'blue';
        for (let i = 0; i < xValues.length; i++) {
            const x = 50 + (xValues[i] * 100);
            const y = 350 - (yValues[i] * 25);
            ctx.beginPath();
            ctx.arc(x, y, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
    }

    function linearRegression(x, y) {
        const n = x.length;
        const xSum = x.reduce((acc, val) => acc + val, 0);
        const ySum = y.reduce((acc, val) => acc + val, 0);
        const xySum = x.reduce((acc, val, idx) => acc + val * y[idx], 0);
        const xxSum = x.reduce((acc, val) => acc + val * val, 0);

        const slope = (n * xySum - xSum * ySum) / (n * xxSum - xSum * xSum);
        const intercept = (ySum - slope * xSum) / n;

        return { slope, intercept };
    }

    function drawLine(slope, intercept) {
        const startX = 0;
        const startY = slope * startX + intercept;
        const endX = 5; 
        const endY = slope * endX + intercept;

        ctx.strokeStyle = 'red';
        ctx.beginPath();
        ctx.moveTo(50 + (startX * 100), 350 - (startY * 25));
        ctx.lineTo(50 + (endX * 100), 350 - (endY * 25));
        ctx.stroke();
    }

    document.getElementById('plotBtn').addEventListener('click', () => {
        const xInput = document.getElementById('x').value.split(',').map(Number);
        const yInput = document.getElementById('y').value.split(',').map(Number);

        if (xInput.length !== yInput.length) {
            alert('X and Y values must have the same number of elements.');
            return;
        }

        plotPoints(xInput, yInput);
        const { slope, intercept } = linearRegression(xInput, yInput);
        drawLine(slope, intercept);
    });
</script>

</body>
</html>