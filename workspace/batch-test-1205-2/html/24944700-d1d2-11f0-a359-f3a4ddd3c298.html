<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        #arrayContainer {
            display: flex;
            align-items: flex-end;
            margin: 20px 0;
        }
        .bar {
            width: 30px;
            background-color: #4CAF50;
            margin: 0 2px;
            transition: height 0.5s;
        }
        #controls {
            margin: 20px 0;
        }
    </style>
</head>
<body>

    <h1>Quick Sort Visualization</h1>
    <div id="arrayContainer"></div>
    <div id="controls">
        <button onclick="startQuickSort()">Sort Array</button>
    </div>
    <script>
        const arrayContainer = document.getElementById('arrayContainer');
        let arr = [50, 20, 15, 40, 10, 30, 70, 60, 90, 80];

        function createBars(arr) {
            arrayContainer.innerHTML = '';
            arr.forEach(value => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = value * 3 + 'px'; // Scale for better visibility
                arrayContainer.appendChild(bar);
            });
        }

        function quickSort(arr, left = 0, right = arr.length - 1) {
            const len = arr.length;
            let pivot, partitionIndex;
            if (left < right) {
                pivot = right;
                partitionIndex = partition(arr, pivot, left, right);
                
                // Visualize the partition step
                createBars(arr);
                
                // Recursively sort left and right
                quickSort(arr, left, partitionIndex - 1);
                quickSort(arr, partitionIndex + 1, right);
            }
            return arr;
        }

        function partition(arr, pivot, left, right) {
            let partitionIndex = left;
            for (let i = left; i < right; i++) {
                if (arr[i] < arr[pivot]) {
                    swap(arr, i, partitionIndex);
                    partitionIndex++;
                }
            }
            swap(arr, partitionIndex, pivot);
            return partitionIndex;
        }

        function swap(arr, index1, index2) {
            [arr[index1], arr[index2]] = [arr[index2], arr[index1]];
        }

        function startQuickSort() {
            arr = [50, 20, 15, 40, 10, 30, 70, 60, 90, 80]; // Reset the array
            createBars(arr); // Create initial bars
            quickSort(arr); // Start sorting
        }

        // Initial call to set up the bars
        createBars(arr);
    </script>
</body>
</html>