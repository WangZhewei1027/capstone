[
  {
    "id": "a8c18a40-c496-11f0-8a49-892c1a40e92f",
    "timestamp": "2025-11-18T15:57:22.525Z",
    "model": "gpt-5-mini",
    "status": "success",
    "question": "bubble sort",
    "answer": {
      "role": "assistant",
      "content": "<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<title>Bubble Sort Visualization</title>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#06b6d4;\n    --muted:#98a2b3;\n    --good:#16a34a;\n    --bad:#ef4444;\n    --surface:#0b1220;\n    --bar:#60a5fa;\n  }\n  html,body{\n    height:100%;\n    margin:0;\n    font-family:system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;\n    background:linear-gradient(180deg,var(--bg),#061022 60%);\n    color:#e6eef6;\n    -webkit-font-smoothing:antialiased;\n    -moz-osx-font-smoothing:grayscale;\n  }\n  .container{\n    max-width:1100px;\n    margin:24px auto;\n    padding:20px;\n    border-radius:12px;\n  }\n  header{\n    display:flex;\n    align-items:center;\n    gap:16px;\n    margin-bottom:12px;\n  }\n  h1{\n    font-size:20px;\n    margin:0;\n  }\n  .controls{\n    display:flex;\n    flex-wrap:wrap;\n    gap:12px;\n    margin-bottom:16px;\n    align-items:center;\n  }\n  .panel{\n    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n    padding:12px;\n    border-radius:10px;\n    box-shadow:0 6px 18px rgba(2,6,23,0.6);\n  }\n  .buttons{ display:flex; gap:8px; flex-wrap:wrap; align-items:center;}\n  button{\n    background:transparent;\n    color:var(--accent);\n    border:1px solid rgba(6,182,212,0.12);\n    padding:8px 12px;\n    border-radius:8px;\n    cursor:pointer;\n    font-weight:600;\n  }\n  button:disabled { opacity:0.4; cursor:not-allowed; }\n  .btn-primary{ background:linear-gradient(90deg,var(--accent),#7ee7f7); color:#012022; border:none; }\n  .btn-danger{ background:var(--bad); border:none; color:white; }\n  .controls-row{ display:flex; gap:8px; align-items:center; }\n  label{ font-size:13px; color:var(--muted); }\n  input[type=range]{ width:140px;}\n  .status{\n    display:flex;\n    gap:14px;\n    align-items:center;\n    margin-left:auto;\n    font-size:13px;\n    color:var(--muted);\n  }\n  .viz{\n    margin-top:18px;\n    display:flex;\n    gap:12px;\n    align-items:end;\n    justify-content:center;\n    padding:18px;\n    height:360px;\n    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.06));\n    border-radius:12px;\n  }\n  .bar{\n    background:var(--bar);\n    width:100%;\n    border-radius:6px 6px 3px 3px;\n    display:inline-block;\n    transition:height 200ms ease, background-color 120ms ease, transform 200ms ease;\n    box-shadow:0 4px 10px rgba(12,22,38,0.45) inset;\n    position:relative;\n  }\n  .bar-label{\n    position:absolute;\n    left:50%;\n    transform:translateX(-50%);\n    bottom:6px;\n    font-size:11px;\n    color:rgba(0,0,0,0.85);\n    font-weight:700;\n    text-shadow:0 1px 0 rgba(255,255,255,0.3);\n    pointer-events:none;\n  }\n  .bar.compare{ background: #f59e0b; } /* amber */\n  .bar.swap{ background: #ef4444; transform:translateY(-6px); }\n  .bar.sorted{ background:var(--good); }\n  .info{\n    margin-top:12px;\n    display:flex;\n    gap:18px;\n    flex-wrap:wrap;\n    align-items:center;\n  }\n  .pseudocode{\n    margin-top:12px;\n    background:rgba(255,255,255,0.02);\n    padding:12px;\n    border-radius:10px;\n    font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", monospace;\n    font-size:13px;\n    color:var(--muted);\n    line-height:1.6;\n    white-space:pre;\n    max-width:100%;\n  }\n  .line{ padding:2px 6px; border-radius:6px; display:block; }\n  .line.active{ background:rgba(6,182,212,0.12); color:var(--accent); }\n  .summary{ font-size:13px; color:var(--muted); }\n  footer{ margin-top:18px; color:var(--muted); font-size:12px; }\n  @media (max-width:720px){\n    .viz{ height:260px; }\n    input[type=range]{ width:110px; }\n  }\n</style>\n</head>\n<body>\n<div class=\"container\">\n  <header>\n    <h1>Bubble Sort — Interactive Visualization</h1>\n    <div style=\"margin-left:12px;color:var(--muted);font-size:13px\">Compare & swap adjacent items until sorted</div>\n  </header>\n\n  <div class=\"controls panel\">\n    <div class=\"buttons\">\n      <button id=\"startBtn\" class=\"btn-primary\">Start / Resume</button>\n      <button id=\"pauseBtn\">Pause</button>\n      <button id=\"stepBtn\">Step</button>\n      <button id=\"shuffleBtn\">Shuffle</button>\n      <button id=\"resetBtn\">Reset</button>\n    </div>\n\n    <div style=\"display:flex; gap:12px; margin-top:10px; align-items:center;\">\n      <div class=\"controls-row\">\n        <label for=\"size\">Size</label>\n        <input id=\"size\" type=\"range\" min=\"5\" max=\"80\" value=\"24\">\n        <span id=\"sizeVal\" style=\"width:36px;text-align:center;color:var(--muted)\">24</span>\n      </div>\n\n      <div class=\"controls-row\">\n        <label for=\"speed\">Speed</label>\n        <input id=\"speed\" type=\"range\" min=\"1\" max=\"100\" value=\"30\">\n        <span id=\"speedVal\" style=\"width:48px;text-align:center;color:var(--muted)\">30</span>\n      </div>\n\n      <div class=\"controls-row\">\n        <label for=\"order\">Order</label>\n        <select id=\"order\">\n          <option value=\"ascending\">Ascending</option>\n          <option value=\"descending\">Descending</option>\n        </select>\n      </div>\n\n      <div class=\"status\">\n        <div>Comparisons: <strong id=\"compCount\">0</strong></div>\n        <div>Swaps: <strong id=\"swapCount\">0</strong></div>\n        <div>Pass: <strong id=\"passCount\">0</strong></div>\n      </div>\n    </div>\n  </div>\n\n  <div id=\"viz\" class=\"viz panel\" aria-live=\"polite\" aria-atomic=\"true\"></div>\n\n  <div class=\"info\">\n    <div class=\"pseudocode panel\" id=\"pcode\" style=\"max-width:480px;\">\n      <div class=\"line\" data-line=\"1\">for i from 0 to n-2</div>\n      <div class=\"line\" data-line=\"2\">  for j from 0 to n-2-i</div>\n      <div class=\"line\" data-line=\"3\">    if A[j] > A[j+1]</div>\n      <div class=\"line\" data-line=\"4\">      swap A[j] and A[j+1]</div>\n      <div class=\"line\" data-line=\"5\">  end for</div>\n      <div class=\"line\" data-line=\"6\">end for</div>\n    </div>\n\n    <div style=\"flex:1; min-width:240px;\">\n      <div class=\"panel\" style=\"padding:14px;\">\n        <div class=\"summary\"><strong>Complexity</strong></div>\n        <div style=\"margin-top:8px;color:var(--muted)\">\n          Worst / Average: O(n²) — Best: O(n) if optimized with early exit.<br/>\n          Stable: Yes. In-place: Yes.\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <footer>\n    Controls: Start/Resume runs continuously. Pause stops. Step advances one algorithmic action (compare or swap). Shuffle resets the array. Adjust size and speed anytime.\n  </footer>\n</div>\n\n<script>\n(function(){\n  // DOM elements\n  const viz = document.getElementById('viz');\n  const startBtn = document.getElementById('startBtn');\n  const pauseBtn = document.getElementById('pauseBtn');\n  const stepBtn = document.getElementById('stepBtn');\n  const shuffleBtn = document.getElementById('shuffleBtn');\n  const resetBtn = document.getElementById('resetBtn');\n  const sizeInput = document.getElementById('size');\n  const sizeVal = document.getElementById('sizeVal');\n  const speedInput = document.getElementById('speed');\n  const speedVal = document.getElementById('speedVal');\n  const compCountEl = document.getElementById('compCount');\n  const swapCountEl = document.getElementById('swapCount');\n  const passCountEl = document.getElementById('passCount');\n  const pcode = document.getElementById('pcode');\n  const orderSelect = document.getElementById('order');\n\n  // State\n  let array = [];\n  let bars = [];\n  let generator = null;\n  let isRunning = false;\n  let isPaused = true;\n  let speed = Number(speedInput.value); // 1..100\n  let delayMs = computeDelay(speed);\n  let comparisons = 0;\n  let swaps = 0;\n  let passNum = 0;\n  let ascending = true;\n  let stepMode = false;\n\n  // Initialize\n  sizeVal.textContent = sizeInput.value;\n  speedVal.textContent = speedInput.value;\n  initArray(Number(sizeInput.value));\n  render();\n\n  // Event listeners\n  sizeInput.addEventListener('input', (e)=>{\n    sizeVal.textContent = e.target.value;\n  });\n  sizeInput.addEventListener('change', (e)=>{\n    initArray(Number(e.target.value));\n    resetStats();\n    render();\n    stopAlgorithm();\n  });\n\n  speedInput.addEventListener('input', (e)=>{\n    speed = Number(e.target.value);\n    speedVal.textContent = speed;\n    delayMs = computeDelay(speed);\n    updateBarTransitionDuration();\n  });\n\n  orderSelect.addEventListener('change', (e)=>{\n    ascending = e.target.value === 'ascending';\n    stopAlgorithm();\n  });\n\n  shuffleBtn.addEventListener('click', ()=>{\n    initArray(array.length);\n    resetStats();\n    render();\n    stopAlgorithm();\n  });\n\n  resetBtn.addEventListener('click', ()=>{\n    initArray(array.length, true); // ascending reset values\n    resetStats();\n    render();\n    stopAlgorithm();\n  });\n\n  startBtn.addEventListener('click', async ()=>{\n    if (!generator || finished) {\n      generator = bubbleSortGenerator(array, ascending);\n      finished = false;\n    }\n    isPaused = false;\n    isRunning = true;\n    stepMode = false;\n    runGenerator();\n  });\n\n  pauseBtn.addEventListener('click', ()=>{\n    isPaused = true;\n    isRunning = false;\n  });\n\n  stepBtn.addEventListener('click', async ()=>{\n    if (!generator || finished) {\n      generator = bubbleSortGenerator(array, ascending);\n      finished = false;\n    }\n    isPaused = true;\n    isRunning = false;\n    stepMode = true;\n    await runOneStep();\n  });\n\n  // Helpers\n  function computeDelay(sp){\n    // map 1..100 to 1000ms..10ms inversely\n    const max = 1000;\n    const min = 10;\n    const t = (100 - sp) / 99; // 0..1\n    return Math.round(min + t * (max - min));\n  }\n\n  function updateBarTransitionDuration(){\n    // set CSS transition duration based on speed\n    const ms = Math.max(30, Math.min(600, delayMs/1.8));\n    bars.forEach(b => {\n      if (b) b.style.transition = `height ${ms}ms ease, background-color 120ms ease, transform ${ms}ms ease`;\n    });\n  }\n\n  function initArray(n, sorted=false){\n    array = [];\n    for (let i=0;i<n;i++){\n      array.push(Math.floor(Math.random()*100)+1);\n    }\n    if (sorted) array.sort((a,b)=>a-b);\n    bars = [];\n    viz.innerHTML = '';\n    // Build bar elements\n    for (let i=0;i<array.length;i++){\n      const barWrap = document.createElement('div');\n      barWrap.className = 'bar';\n      barWrap.style.width = `${100/array.length - 0.4}%`;\n      barWrap.style.height = heightForValue(array[i]) + '%';\n      const label = document.createElement('div');\n      label.className = 'bar-label';\n      label.textContent = array[i];\n      barWrap.appendChild(label);\n      viz.appendChild(barWrap);\n      bars.push(barWrap);\n    }\n    updateBarTransitionDuration();\n  }\n\n  function heightForValue(v){\n    // produce percentage height (20..100)\n    return 12 + (v / 100) * 86;\n  }\n\n  function render(){\n    for (let i=0;i<array.length;i++){\n      const b = bars[i];\n      if (!b) continue;\n      b.style.height = heightForValue(array[i]) + '%';\n      b.querySelector('.bar-label').textContent = array[i];\n      b.className = 'bar';\n    }\n    compCountEl.textContent = comparisons;\n    swapCountEl.textContent = swaps;\n    passCountEl.textContent = passNum;\n  }\n\n  function resetStats(){\n    comparisons = 0;\n    swaps = 0;\n    passNum = 0;\n    compCountEl.textContent = 0;\n    swapCountEl.textContent = 0;\n    passCountEl.textContent = 0;\n    clearPcodeHighlight();\n  }\n\n  let finished = false;\n\n  function stopAlgorithm(){\n    isRunning = false;\n    isPaused = true;\n    generator = null;\n    finished = false;\n  }\n\n  // Pseudocode highlight helpers\n  function clearPcodeHighlight(){\n    const lines = pcode.querySelectorAll('.line');\n    lines.forEach(l=>l.classList.remove('active'));\n  }\n  function highlight(lineNum){\n    clearPcodeHighlight();\n    const el = pcode.querySelector(`.line[data-line=\"${lineNum}\"]`);\n    if (el) el.classList.add('active');\n  }\n\n  // Generator for bubble sort. Yields action objects describing algorithm steps.\n  function* bubbleSortGenerator(arr, ascending=true){\n    const n = arr.length;\n    for (let i=0;i<n-1;i++){\n      // start of pass\n      yield {type:'passStart', i};\n      for (let j=0;j<n-1-i;j++){\n        // compare j and j+1\n        yield {type:'compare', indices:[j,j+1], i, j};\n        const shouldSwap = ascending ? (arr[j] > arr[j+1]) : (arr[j] < arr[j+1]);\n        if (shouldSwap){\n          // do swap\n          const tmp = arr[j];\n          arr[j] = arr[j+1];\n          arr[j+1] = tmp;\n          yield {type:'swap', indices:[j,j+1], array:arr.slice(), i, j};\n        }\n        yield {type:'afterCompare', indices:[j,j+1], i, j};\n      }\n      yield {type:'passEnd', i};\n    }\n    yield {type:'done'};\n  }\n\n  // Runner: process generator yields. We support pause/resume and step.\n  async function runGenerator(){\n    if (!generator) generator = bubbleSortGenerator(array, ascending);\n    while (true){\n      if (isPaused) {\n        // wait until resumed or step pressed\n        await waitForResumeOrStep();\n      }\n      const res = generator.next();\n      if (res.done) {\n        finished = true;\n        markAllSorted();\n        isRunning = false;\n        isPaused = true;\n        break;\n      }\n      await handleAction(res.value);\n      if (stepMode) {\n        // after a single action in step mode, pause\n        isPaused = true;\n        stepMode = false;\n        break;\n      }\n      if (!isRunning && !isPaused) {\n        // safeguard; should not happen\n        isPaused = true;\n        break;\n      }\n    }\n  }\n\n  // Wait until user resumes or presses step: returns a promise resolved when resume or step triggers\n  function waitForResumeOrStep(){\n    return new Promise(resolve=>{\n      const check = () => {\n        if (!isPaused || stepMode) {\n          resolve();\n        } else {\n          requestAnimationFrame(check);\n        }\n      };\n      check();\n    });\n  }\n\n  // Run exactly one generator action (one yield)\n  async function runOneStep(){\n    if (!generator) generator = bubbleSortGenerator(array, ascending);\n    const res = generator.next();\n    if (res.done) {\n      finished = true;\n      markAllSorted();\n      isRunning = false;\n      isPaused = true;\n      return;\n    }\n    await handleAction(res.value);\n    // done one action\n  }\n\n  // Handle a single action object from generator\n  async function handleAction(action){\n    switch(action.type){\n      case 'passStart':\n        passNum = action.i + 1;\n        passCountEl.textContent = passNum;\n        highlight(1);\n        break;\n      case 'compare':\n        comparisons++;\n        compCountEl.textContent = comparisons;\n        highlight(2);\n        markCompare(action.indices);\n        await waitDelay();\n        highlight(3);\n        break;\n      case 'swap':\n        swaps++;\n        swapCountEl.textContent = swaps;\n        highlight(4);\n        await animateSwap(action.indices, action.array);\n        break;\n      case 'afterCompare':\n        unmarkPair(action.indices);\n        highlight(2);\n        break;\n      case 'passEnd':\n        // mark the last sorted element for this pass\n        const idx = array.length - 1 - action.i;\n        if (bars[idx]) bars[idx].classList.add('sorted');\n        highlight(5);\n        break;\n      case 'done':\n        finished = true;\n        highlight(6);\n        markAllSorted();\n        break;\n    }\n    render();\n  }\n\n  // Visual helpers\n  function markCompare([a,b]){\n    unmarkAll();\n    if (bars[a]) bars[a].classList.add('compare');\n    if (bars[b]) bars[b].classList.add('compare');\n  }\n\n  function unmarkPair([a,b]){\n    if (bars[a]) bars[a].classList.remove('compare', 'swap');\n    if (bars[b]) bars[b].classList.remove('compare', 'swap');\n  }\n\n  function unmarkAll(){\n    bars.forEach(b => b.classList.remove('compare','swap'));\n  }\n\n  function markAllSorted(){\n    bars.forEach(b => {\n      b.classList.remove('compare','swap');\n      b.classList.add('sorted');\n    });\n  }\n\n  async function animateSwap([i,j], newArray){\n    // Visual swap: we will update heights and show swap class\n    if (bars[i]) bars[i].classList.add('swap');\n    if (bars[j]) bars[j].classList.add('swap');\n    // Update array values and bar heights to reflect new array\n    // We assume generator already updated the array (we passed newArray)\n    array = newArray.slice();\n    // animate by changing heights; transition handles smoothness\n    for (let k=0;k<array.length;k++){\n      if (bars[k]) {\n        bars[k].style.height = heightForValue(array[k]) + '%';\n        bars[k].querySelector('.bar-label').textContent = array[k];\n      }\n    }\n    // wait for animation\n    await wait(delayMs);\n    if (bars[i]) bars[i].classList.remove('swap','compare');\n    if (bars[j]) bars[j].classList.remove('swap','compare');\n  }\n\n  function wait(ms){\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  function waitDelay(){\n    // short pause for compare visualization\n    return wait(Math.max(40, Math.min(600, delayMs/3)));\n  }\n\n  // small utility\n  function finishedFlag(){ return finished; }\n\n  // Small paranoia: if user changes size rapidly, ensure bars array exists\n  window.addEventListener('resize', ()=> {\n    bars.forEach(b => b.style.width = `${100/array.length - 0.4}%`);\n  });\n\n  // Initialize transitions based on speed\n  updateBarTransitionDuration();\n\n  // Expose nothing global\n})();\n</script>\n</body>\n</html>"
    },
    "messages": [
      {
        "role": "system",
        "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
      },
      {
        "role": "user",
        "content": "bubble sort"
      }
    ],
    "topic": null,
    "hasFSM": true,
    "hasTest": true,
    "evaluation": {
      "score": null,
      "notes": ""
    }
  }
]