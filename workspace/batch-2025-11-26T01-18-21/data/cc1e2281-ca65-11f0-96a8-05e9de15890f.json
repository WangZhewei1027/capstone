{
  "id": "cc1e2281-ca65-11f0-96a8-05e9de15890f",
  "timestamp": "2025-11-26T01:21:37.615Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Binary Search",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\"/>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n<title>Binary Search - Interactive Demo</title>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#22c1c3;\n    --muted:#94a3b8;\n    --good:#16a34a;\n    --bad:#ef4444;\n    --card:#0b1320;\n    --glass: rgba(255,255,255,0.03);\n  }\n  body{\n    margin:0;\n    font-family: Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n    background: linear-gradient(180deg,#071029 0%, #081226 65%, #02080e 100%);\n    color:#e6eef8;\n    padding:18px;\n    -webkit-font-smoothing:antialiased;\n    -moz-osx-font-smoothing:grayscale;\n  }\n  .wrap{\n    max-width:1100px;\n    margin:0 auto;\n    display:grid;\n    grid-template-columns: 420px 1fr;\n    gap:18px;\n  }\n  header{\n    grid-column: 1/-1;\n    display:flex;\n    align-items:center;\n    gap:12px;\n    margin-bottom:6px;\n  }\n  h1{font-size:18px;margin:0}\n  p.desc{margin:0;color:var(--muted);font-size:13px}\n  .panel{\n    background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);\n    border:1px solid rgba(255,255,255,0.04);\n    padding:12px;\n    border-radius:10px;\n    box-shadow: 0 6px 18px rgba(2,6,23,0.6);\n  }\n  .controls{\n    display:flex;\n    flex-direction:column;\n    gap:10px;\n  }\n  label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}\n  input[type=\"text\"], input[type=\"number\"], textarea, select{\n    width:100%;\n    padding:8px 10px;\n    border-radius:8px;\n    background:var(--glass);\n    color:inherit;\n    border:1px solid rgba(255,255,255,0.03);\n    outline:none;\n    font-size:13px;\n  }\n  textarea{min-height:70px;resize:vertical}\n  .row{display:flex;gap:8px}\n  .row > *{flex:1}\n  button{\n    background:linear-gradient(90deg,var(--accent),#6ee7b7);\n    border:none;\n    color:#001218;\n    padding:8px 10px;\n    border-radius:8px;\n    cursor:pointer;\n    font-weight:600;\n    box-shadow: 0 6px 16px rgba(14,165,233,0.08);\n  }\n  button.ghost{\n    background:transparent;\n    border:1px solid rgba(255,255,255,0.04);\n    color:var(--muted);\n    font-weight:600;\n  }\n  .small{font-size:13px;padding:6px 8px;border-radius:8px}\n  .controls-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}\n  .vis{\n    min-height:420px;\n    display:flex;\n    flex-direction:column;\n    gap:12px;\n  }\n  .arrayVis{\n    background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);\n    border:1px solid rgba(255,255,255,0.03);\n    border-radius:10px;\n    padding:14px;\n    display:flex;\n    flex-direction:column;\n    gap:10px;\n  }\n  .arrayRow{\n    display:flex;\n    gap:8px;\n    align-items:end;\n    justify-content:center;\n    flex-wrap:wrap;\n    padding:6px;\n  }\n  .cell{\n    min-width:44px;\n    height:52px;\n    background:rgba(255,255,255,0.03);\n    border-radius:8px;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    position:relative;\n    border:1px solid rgba(255,255,255,0.02);\n    font-weight:700;\n    color:#e6f6ff;\n  }\n  .cell .idx{position:absolute;bottom:-18px;font-size:12px;color:var(--muted)}\n  .cell.low{box-shadow:0 4px 14px rgba(34,193,195,0.08);border-color:#0ea5a4}\n  .cell.high{box-shadow:0 4px 14px rgba(93,77,198,0.08);border-color:#6d28d9}\n  .cell.mid{box-shadow:0 6px 20px rgba(99,102,241,0.12);border-color:#6366f1}\n  .cell.found{background:linear-gradient(90deg,#16a34a,#34d399);color:#001218;border-color:rgba(0,0,0,0.15);box-shadow:0 8px 28px rgba(16,185,129,0.12)}\n  .legend{display:flex;gap:8px;flex-wrap:wrap}\n  .legend span{font-size:12px;color:var(--muted)}\n  .legend .tag{display:inline-flex;gap:6px;align-items:center;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.02);font-weight:600}\n  .tag .dot{width:12px;height:12px;border-radius:3px}\n  .dot.low{background:#0ea5a4}\n  .dot.high{background:#6d28d9}\n  .dot.mid{background:#6366f1}\n  .dot.found{background:#16a34a}\n  .controlsPlayback{display:flex;gap:8px;align-items:center}\n  .bigbtn{padding:10px 14px;font-size:15px}\n  .statusbar{display:flex;gap:12px;align-items:center;flex-wrap:wrap}\n  .badge{background:rgba(255,255,255,0.02);padding:8px 10px;border-radius:8px;font-size:13px;color:var(--muted);border:1px solid rgba(255,255,255,0.02)}\n  .code{\n    background:#061224;\n    border-radius:10px;\n    padding:12px;\n    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", monospace;\n    font-size:13px;\n    color:#cfeffd;\n    border:1px solid rgba(255,255,255,0.03);\n  }\n  .code pre{margin:0;white-space:pre-wrap}\n  .line{display:block;padding:4px 6px;border-radius:6px}\n  .line.active{background:linear-gradient(90deg, rgba(99,102,241,0.12), rgba(34,193,195,0.06));border-left:3px solid rgba(99,102,241,0.6);color:#eaf9ff}\n  .info{\n    font-size:13px;color:var(--muted);\n  }\n  .footer{grid-column:1/-1;text-align:center;margin-top:6px;color:var(--muted);font-size:13px}\n  @media (max-width:980px){\n    .wrap{grid-template-columns:1fr; padding-bottom:40px}\n  }\n</style>\n</head>\n<body>\n<div class=\"wrap\">\n  <header>\n    <div>\n      <h1>Binary Search — Interactive Demo</h1>\n      <p class=\"desc\">Visualize how binary search narrows the search range on a sorted array. Step through, autoplay, and compare iterative & recursive variants.</p>\n    </div>\n  </header>\n\n  <section class=\"panel\" aria-labelledby=\"controls\">\n    <div class=\"controls\">\n      <label for=\"arrayInput\">Array (numbers, comma separated)</label>\n      <textarea id=\"arrayInput\" placeholder=\"e.g. 1,3,4,8,12,15,20\">2,5,7,9,13,18,21,34,55</textarea>\n\n      <div class=\"row\">\n        <div>\n          <label for=\"sortChk\"><input id=\"sortChk\" type=\"checkbox\" checked> Keep array sorted (auto-sort)</label>\n        </div>\n        <div>\n          <label for=\"sizeInput\">Generate size</label>\n          <input id=\"sizeInput\" type=\"number\" min=\"2\" value=\"9\">\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <button id=\"generateBtn\" class=\"small\">Generate random sorted array</button>\n        <button id=\"applyBtn\" class=\"small ghost\">Apply / Start</button>\n      </div>\n\n      <label for=\"targetInput\">Target value</label>\n      <div class=\"row\">\n        <input id=\"targetInput\" type=\"text\" placeholder=\"Number to search for\" />\n        <button id=\"randomTargetBtn\" class=\"small ghost\">Pick random</button>\n      </div>\n\n      <div class=\"controls-grid\">\n        <div>\n          <label>Algorithm variant</label>\n          <select id=\"variantSelect\">\n            <option value=\"iterative\">Iterative</option>\n            <option value=\"recursive\">Recursive (simulated)</option>\n          </select>\n        </div>\n        <div>\n          <label>Animation speed (ms)</label>\n          <input id=\"speedRange\" type=\"range\" min=\"80\" max=\"1500\" value=\"600\">\n        </div>\n      </div>\n\n      <div class=\"row\" style=\"align-items:center\">\n        <div class=\"controlsPlayback\">\n          <button id=\"playBtn\" class=\"bigbtn\">Play ▶️</button>\n          <button id=\"prevBtn\" class=\"ghost small\">◀ Prev</button>\n          <button id=\"nextBtn\" class=\"ghost small\">Next ▶</button>\n          <button id=\"resetBtn\" class=\"ghost small\">Reset</button>\n        </div>\n        <div style=\"text-align:right\">\n          <div class=\"statusbar\" style=\"justify-content:flex-end\">\n            <div class=\"badge\">Step: <span id=\"stepIdx\">0</span>/<span id=\"stepTotal\">0</span></div>\n            <div class=\"badge\">Comparisons: <span id=\"compCount\">0</span></div>\n          </div>\n        </div>\n      </div>\n\n      <div style=\"display:flex;gap:8px;flex-wrap:wrap;align-items:center\">\n        <div class=\"legend\">\n          <span class=\"tag\"><span class=\"dot low\"></span> low</span>\n          <span class=\"tag\"><span class=\"dot mid\"></span> mid</span>\n          <span class=\"tag\"><span class=\"dot high\"></span> high</span>\n          <span class=\"tag\"><span class=\"dot found\"></span> found</span>\n        </div>\n      </div>\n    </div>\n  </section>\n\n  <section class=\"panel vis\" aria-live=\"polite\">\n    <div class=\"arrayVis panel\">\n      <div style=\"display:flex;justify-content:space-between;align-items:center\">\n        <div>\n          <strong id=\"message\">Ready</strong>\n          <div class=\"info\" id=\"submessage\">Array must be sorted for correct result. You can auto-sort.</div>\n        </div>\n        <div style=\"text-align:right\">\n          <div class=\"badge\">n = <span id=\"nVal\">0</span></div>\n          <div class=\"badge\">Target = <span id=\"targetVal\">—</span></div>\n        </div>\n      </div>\n\n      <div class=\"arrayRow\" id=\"arrayRow\" aria-hidden=\"false\">\n        <!-- cells injected here -->\n      </div>\n      <div style=\"display:flex;justify-content:space-between;align-items:center\">\n        <div style=\"display:flex;gap:8px;align-items:center\">\n          <div class=\"badge\">low = <span id=\"lowVal\">—</span></div>\n          <div class=\"badge\">mid = <span id=\"midVal\">—</span></div>\n          <div class=\"badge\">high = <span id=\"highVal\">—</span></div>\n        </div>\n        <div style=\"text-align:right\">\n          <div class=\"badge\" id=\"resultBadge\">Status: <span id=\"statusTxt\">idle</span></div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"code\" style=\"display:flex;gap:10px\">\n      <div style=\"flex:1\">\n        <div style=\"font-weight:700;margin-bottom:6px\">Pseudocode (iterative)</div>\n        <pre id=\"codeIter\">\n<span class=\"line\" data-line=\"1\">1  low ← 0</span>\n<span class=\"line\" data-line=\"2\">2  high ← n - 1</span>\n<span class=\"line\" data-line=\"3\">3  while low ≤ high do</span>\n<span class=\"line\" data-line=\"4\">4      mid ← floor((low + high) / 2)</span>\n<span class=\"line\" data-line=\"5\">5      if A[mid] = target then</span>\n<span class=\"line\" data-line=\"6\">6          return mid</span>\n<span class=\"line\" data-line=\"7\">7      else if A[mid] < target then</span>\n<span class=\"line\" data-line=\"8\">8          low ← mid + 1</span>\n<span class=\"line\" data-line=\"9\">9      else</span>\n<span class=\"line\" data-line=\"10\">10         high ← mid - 1</span>\n<span class=\"line\" data-line=\"11\">11 return -1</span>\n        </pre>\n      </div>\n      <div style=\"flex:1\">\n        <div style=\"font-weight:700;margin-bottom:6px\">Pseudocode (recursive)</div>\n        <pre id=\"codeRec\">\n<span class=\"line\" data-line=\"1\">1  function binarySearch(A, target, low, high)</span>\n<span class=\"line\" data-line=\"2\">2      if low > high then</span>\n<span class=\"line\" data-line=\"3\">3          return -1</span>\n<span class=\"line\" data-line=\"4\">4      mid ← floor((low + high) / 2)</span>\n<span class=\"line\" data-line=\"5\">5      if A[mid] = target then</span>\n<span class=\"line\" data-line=\"6\">6          return mid</span>\n<span class=\"line\" data-line=\"7\">7      else if A[mid] < target then</span>\n<span class=\"line\" data-line=\"8\">8          return binarySearch(A, target, mid + 1, high)</span>\n<span class=\"line\" data-line=\"9\">9      else</span>\n<span class=\"line\" data-line=\"10\">10         return binarySearch(A, target, low, mid - 1)</span>\n        </pre>\n      </div>\n    </div>\n\n    <div style=\"display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:12px\">\n      <div class=\"panel\" style=\"flex:1;padding:10px\">\n        <div style=\"font-weight:700\">Complexity</div>\n        <div class=\"info\" style=\"margin-top:6px\">Time: O(log n) — each step halves the search range. Space: O(1) iterative / O(log n) recursive (call stack).</div>\n      </div>\n\n      <div class=\"panel\" style=\"min-width:260px;padding:10px\">\n        <div style=\"font-weight:700\">Algorithm trace</div>\n        <div class=\"info\" style=\"margin-top:6px\">\n          Use Play to autoplay steps. \"Comparisons\" counts how many times A[mid] was compared to target.\n        </div>\n      </div>\n    </div>\n\n  </section>\n\n  <div class=\"footer\">\n    Tip: Binary search only works on sorted arrays. If unsure, enable \"Keep array sorted\".\n  </div>\n</div>\n\n<script>\n(function(){\n  // Utility\n  function qs(id){return document.getElementById(id)}\n  function clamp(v,min,max){return Math.max(min,Math.min(max,v))}\n  function parseArrayText(s){\n    if(!s) return [];\n    return s.split(',')\n      .map(t => t.trim())\n      .filter(t => t !== '')\n      .map(t => {\n        const n = Number(t);\n        return isNaN(n) ? null : n;\n      })\n      .filter(x => x !== null);\n  }\n\n  // State\n  let arr = [];\n  let target = null;\n  let states = []; // recorded states to step through\n  let step = 0;\n  let playing = false;\n  let timer = null;\n\n  // DOM\n  const arrayInput = qs('arrayInput');\n  const applyBtn = qs('applyBtn');\n  const generateBtn = qs('generateBtn');\n  const sizeInput = qs('sizeInput');\n  const sortChk = qs('sortChk');\n  const targetInput = qs('targetInput');\n  const randomTargetBtn = qs('randomTargetBtn');\n  const variantSelect = qs('variantSelect');\n  const speedRange = qs('speedRange');\n  const playBtn = qs('playBtn');\n  const nextBtn = qs('nextBtn');\n  const prevBtn = qs('prevBtn');\n  const resetBtn = qs('resetBtn');\n  const arrayRow = qs('arrayRow');\n  const stepIdx = qs('stepIdx');\n  const stepTotal = qs('stepTotal');\n  const compCount = qs('compCount');\n  const nVal = qs('nVal');\n  const targetVal = qs('targetVal');\n  const lowVal = qs('lowVal');\n  const midVal = qs('midVal');\n  const highVal = qs('highVal');\n  const statusTxt = qs('statusTxt');\n  const message = qs('message');\n  const submessage = qs('submessage');\n  const codeIter = qs('codeIter');\n  const codeRec = qs('codeRec');\n  const resultBadge = qs('resultBadge');\n\n  // Initialize UI\n  function renderArrayCells(){\n    arrayRow.innerHTML = '';\n    for(let i=0;i<arr.length;i++){\n      const val = arr[i];\n      const cell = document.createElement('div');\n      cell.className = 'cell';\n      cell.dataset.index = i;\n      cell.innerHTML = '<span>'+val+'</span><div class=\"idx\">'+i+'</div>';\n      arrayRow.appendChild(cell);\n    }\n  }\n\n  function highlightPseudocode(lineNumber, variant){\n    // Clear previous\n    const codeBlock = variant === 'iterative' ? codeIter : codeRec;\n    const otherBlock = variant === 'iterative' ? codeRec : codeIter;\n    otherBlock.querySelectorAll('.line').forEach(l=>l.classList.remove('active'));\n    codeBlock.querySelectorAll('.line').forEach(l=>{\n      const ln = Number(l.dataset.line);\n      if(ln === lineNumber) l.classList.add('active'); else l.classList.remove('active');\n    });\n  }\n\n  // State record structure:\n  // { low, high, mid, action, compCount, line } action: 'enter','mid','found','left','right','done'\n  function computeIterativeStates(a, t){\n    const s = [];\n    let low = 0;\n    let high = a.length - 1;\n    let comps = 0;\n    // initial\n    s.push({low,high,mid:null,action:'init',compCount:comps,line:1});\n    while(low <= high){\n      // mid calc\n      const mid = Math.floor((low + high)/2);\n      s.push({low,high,mid,action:'mid',compCount:comps,line:4});\n      comps++;\n      if(a[mid] === t){\n        s.push({low,high,mid,action:'found',compCount:comps,line:5});\n        return {states:s, compCount:comps, result:mid};\n      } else if (a[mid] < t){\n        s.push({low,high,mid,action:'left-to-right',compCount:comps,line:7}); // a[mid] < target => move low\n        low = mid + 1;\n        s.push({low,high,mid:Math.floor((low+high)/2),action:'updated',compCount:comps,line:8});\n      } else {\n        s.push({low,high,mid,action:'right-to-left',compCount:comps,line:9});\n        high = mid - 1;\n        s.push({low,high,mid: high>=low?Math.floor((low+high)/2):null,action:'updated',compCount:comps,line:10});\n      }\n    }\n    s.push({low,high,mid:null,action:'notfound',compCount:comps,line:11});\n    return {states:s, compCount:comps, result:-1};\n  }\n\n  function computeRecursiveStates(a, t){\n    const s = [];\n    let comps = 0;\n    function rec(low, high){\n      s.push({low,high,mid:null,action:'enter-call',compCount:comps,line:1});\n      if(low > high){\n        s.push({low,high,mid:null,action:'no-range',compCount:comps,line:2});\n        return -1;\n      }\n      const mid = Math.floor((low+high)/2);\n      s.push({low,high,mid,action:'mid',compCount:comps,line:4});\n      comps++;\n      if(a[mid] === t){\n        s.push({low,high,mid,action:'found',compCount:comps,line:5});\n        return mid;\n      } else if (a[mid] < t){\n        s.push({low,high,mid,action:'go-right',compCount:comps,line:7});\n        const res = rec(mid+1, high);\n        s.push({low,high,mid,action:'returned-from-right',compCount:comps,line:8});\n        return res;\n      } else {\n        s.push({low,high,mid,action:'go-left',compCount:comps,line:9});\n        const res = rec(low, mid-1);\n        s.push({low,high,mid,action:'returned-from-left',compCount:comps,line:10});\n        return res;\n      }\n    }\n    const result = rec(0, a.length-1);\n    s.push({low:0,high:a.length-1,mid:null,action:'done',compCount:comps,line:3});\n    return {states:s, compCount:comps, result};\n  }\n\n  function applySettings(){\n    // parse array\n    let inputArr = parseArrayText(arrayInput.value);\n    if(inputArr.length === 0){\n      message.textContent = 'Array empty';\n      submessage.textContent = 'Please provide numbers separated by commas or generate an array.';\n      arr = [];\n      renderArrayCells();\n      updateMeta();\n      return;\n    }\n    if(sortChk.checked){\n      inputArr = inputArr.slice().sort((a,b)=>a-b);\n    }\n    arr = inputArr;\n    renderArrayCells();\n    // parse target\n    const tVal = targetInput.value.trim();\n    if(tVal === ''){\n      target = null;\n      targetVal.textContent = '—';\n    } else {\n      const nt = Number(tVal);\n      target = isNaN(nt) ? null : nt;\n      targetVal.textContent = target === null ? 'invalid' : target;\n    }\n    // compute states\n    if(target === null){\n      message.textContent = 'Target not set';\n      submessage.textContent = 'Enter a numeric target value to start the demonstration.';\n      statusTxt.textContent = 'idle';\n      updateMeta();\n      return;\n    }\n    buildStatesAndReset();\n  }\n\n  function buildStatesAndReset(){\n    const variant = variantSelect.value;\n    if(arr.length === 0){\n      message.textContent = 'No array';\n      statusTxt.textContent = 'idle';\n      return;\n    }\n    message.textContent = 'Computing steps...';\n    if(variant === 'iterative'){\n      const res = computeIterativeStates(arr, target);\n      states = res.states;\n    } else {\n      const res = computeRecursiveStates(arr, target);\n      states = res.states;\n    }\n    step = 0;\n    playing = false;\n    clearInterval(timer);\n    playBtn.textContent = 'Play ▶️';\n    updateUI();\n    message.textContent = 'Ready — step through';\n    statusTxt.textContent = 'ready';\n  }\n\n  function updateMeta(){\n    nVal.textContent = arr.length;\n    stepIdx.textContent = Math.max(0,step);\n    stepTotal.textContent = states.length;\n    compCount.textContent = states.length>0 ? states[Math.max(0,Math.min(step,states.length-1))].compCount : 0;\n  }\n\n  function clearHighlights(){\n    arrayRow.querySelectorAll('.cell').forEach(c=>{\n      c.classList.remove('low','mid','high','found');\n      c.style.transform = '';\n    });\n  }\n\n  function updateUI(){\n    // reflect step state\n    updateMeta();\n    clearHighlights();\n    // default values\n    lowVal.textContent = '—';\n    midVal.textContent = '—';\n    highVal.textContent = '—';\n    resultBadge.style.background = '';\n    resultBadge.style.borderColor = '';\n    if(states.length === 0){\n      statusTxt.textContent = 'idle';\n      stepTotal.textContent = 0;\n      return;\n    }\n    // clamp step index\n    step = clamp(step, 0, states.length-1);\n    const st = states[step];\n    // highlight pseudocode\n    const variant = variantSelect.value;\n    highlightPseudocode(st.line || 0, variant);\n\n    // display low/mid/high\n    if(typeof st.low === 'number') lowVal.textContent = st.low; else lowVal.textContent = '—';\n    if(typeof st.mid === 'number') midVal.textContent = st.mid; else midVal.textContent = '—';\n    if(typeof st.high === 'number') highVal.textContent = st.high; else highVal.textContent = '—';\n    stepIdx.textContent = step+1;\n    stepTotal.textContent = states.length;\n    compCount.textContent = st.compCount;\n\n    // label cells\n    arrayRow.querySelectorAll('.cell').forEach(c=>{\n      const idx = Number(c.dataset.index);\n      if(st.action === 'found' && typeof st.mid === 'number' && idx === st.mid){\n        c.classList.add('found');\n      } else {\n        c.classList.remove('found');\n      }\n      // low/high/mid labels (mid has higher priority visually)\n      c.classList.remove('low','high','mid');\n      if(typeof st.mid === 'number' && idx === st.mid) c.classList.add('mid');\n      else {\n        if(typeof st.low === 'number' && idx === st.low) c.classList.add('low');\n        if(typeof st.high === 'number' && idx === st.high) c.classList.add('high');\n      }\n    });\n\n    // update message / status depending on action\n    switch(st.action){\n      case 'init':\n        statusTxt.textContent = 'initialized';\n        message.textContent = 'low and high set';\n        break;\n      case 'mid':\n        statusTxt.textContent = 'comparing';\n        message.textContent = 'Compute mid and compare A[mid] to target';\n        break;\n      case 'found':\n        statusTxt.textContent = 'found';\n        message.textContent = 'Target found!';\n        resultBadge.style.background = 'linear-gradient(90deg,#16a34a,#34d399)';\n        break;\n      case 'left-to-right':\n      case 'go-right':\n        statusTxt.textContent = 'move right';\n        message.textContent = 'A[mid] < target → move low to mid + 1';\n        break;\n      case 'right-to-left':\n      case 'go-left':\n        statusTxt.textContent = 'move left';\n        message.textContent = 'A[mid] > target → move high to mid - 1';\n        break;\n      case 'updated':\n      case 'returned-from-right':\n      case 'returned-from-left':\n        statusTxt.textContent = 'updated';\n        message.textContent = 'Range updated';\n        break;\n      case 'notfound':\n      case 'no-range':\n      case 'done':\n        statusTxt.textContent = 'not found';\n        message.textContent = 'Target does not exist in the array';\n        resultBadge.style.background = 'linear-gradient(90deg,#ef4444,#fb7185)';\n        break;\n      default:\n        statusTxt.textContent = st.action;\n        message.textContent = '';\n    }\n  }\n\n  // Playback controls\n  function startPlaying(){\n    if(states.length === 0) return;\n    playing = true;\n    playBtn.textContent = 'Pause ⏸';\n    const ms = Number(speedRange.value) || 600;\n    clearInterval(timer);\n    timer = setInterval(()=>{\n      if(step >= states.length - 1){\n        stopPlaying();\n        return;\n      }\n      step++;\n      updateUI();\n    }, ms);\n  }\n  function stopPlaying(){\n    playing = false;\n    playBtn.textContent = 'Play ▶️';\n    clearInterval(timer);\n  }\n\n  // Button handlers\n  applyBtn.addEventListener('click', applySettings);\n  arrayInput.addEventListener('keydown', function(e){ if(e.key === 'Enter' && (e.metaKey || e.ctrlKey)) applySettings(); });\n  generateBtn.addEventListener('click', function(){\n    const size = clamp(Number(sizeInput.value) || 9, 2, 200);\n    // generate random sorted array with random gaps\n    const base = Math.floor(Math.random()*5)+1;\n    let val = Math.floor(Math.random()*5);\n    const out = [];\n    for(let i=0;i<size;i++){\n      val += Math.floor(Math.random()*6) + 1 + Math.floor(Math.random()*base);\n      out.push(val);\n    }\n    arrayInput.value = out.join(', ');\n    if(sortChk.checked){\n      // already sorted\n    }\n    applySettings();\n  });\n\n  randomTargetBtn.addEventListener('click', function(){\n    // choose a value from array (chance to pick non-existing)\n    if(arr.length === 0){\n      // pick random small int\n      const r = Math.floor(Math.random()*40);\n      targetInput.value = r;\n      target = r;\n      targetVal.textContent = r;\n      return;\n    }\n    // either pick existing or random near range\n    if(Math.random() < 0.7){\n      const idx = Math.floor(Math.random()*arr.length);\n      targetInput.value = arr[idx];\n    } else {\n      const min = arr[0];\n      const max = arr[arr.length-1];\n      const r = Math.floor(min + Math.random()*(max-min+10)) + (Math.random()<0.5?0:5);\n      targetInput.value = r;\n    }\n    applySettings();\n  });\n\n  playBtn.addEventListener('click', function(){\n    if(playing) stopPlaying();\n    else startPlaying();\n  });\n\n  nextBtn.addEventListener('click', function(){\n    stopPlaying();\n    if(states.length === 0) return;\n    if(step < states.length - 1) step++;\n    updateUI();\n  });\n  prevBtn.addEventListener('click', function(){\n    stopPlaying();\n    if(states.length === 0) return;\n    if(step > 0) step--;\n    updateUI();\n  });\n  resetBtn.addEventListener('click', function(){\n    stopPlaying();\n    step = 0;\n    updateUI();\n  });\n\n  // Update speed dynamically\n  speedRange.addEventListener('input', function(){\n    if(playing){\n      startPlaying(); // restart with new ms\n    }\n  });\n\n  variantSelect.addEventListener('change', function(){\n    // When variant toggled, rebuild states\n    if(target !== null && arr.length>0){\n      buildStatesAndReset();\n    }\n  });\n\n  // initial render\n  applySettings();\n\n  // keyboard shortcuts\n  document.addEventListener('keydown', function(e){\n    if(e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.isContentEditable) return;\n    if(e.key === ' ') { e.preventDefault(); if(playing) stopPlaying(); else startPlaying(); }\n    if(e.key === 'ArrowRight') { e.preventDefault(); nextBtn.click(); }\n    if(e.key === 'ArrowLeft') { e.preventDefault(); prevBtn.click(); }\n    if(e.key.toLowerCase() === 'r') { e.preventDefault(); resetBtn.click(); }\n  });\n\n  // Initial also render pseudocode highlights off\n  highlightPseudocode(0, variantSelect.value);\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Binary Search"
    }
  ],
  "topic": "Binary Search",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}