{
  "id": "cc1dd462-ca65-11f0-96a8-05e9de15890f",
  "timestamp": "2025-11-26T01:21:17.675Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Quick Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Quick Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#60a5fa;\n      --muted:#94a3b8;\n      --good:#38bdf8;\n      --danger:#fb7185;\n      --pivot:#7c3aed;\n      --cmp:#fbbf24;\n      --bar-bg:#263244;\n      --sorted:#10b981;\n      --text:#e6eef8;\n    }\n    *{box-sizing:border-box;font-family:Inter, ui-sans-serif,system-ui,Segoe UI,Roboto,\"Helvetica Neue\",Arial;}\n    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071129 80%);color:var(--text);-webkit-font-smoothing:antialiased;}\n    .wrap{max-width:1100px;margin:20px auto;padding:18px;border-radius:10px;background:linear-gradient(180deg,var(--panel),#071125);box-shadow:0 6px 30px rgba(2,6,23,0.6);}\n    h1{margin:0 0 8px;font-size:20px;color:var(--accent);}\n    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:12px;}\n    .control{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;display:flex;gap:8px;align-items:center;}\n    label{font-size:13px;color:var(--muted);min-width:82px;}\n    input[type=range]{width:180px;}\n    select,input[type=number]{padding:6px 8px;border-radius:6px;background:#071426;border:1px solid rgba(255,255,255,0.03);color:var(--text);}\n    button{background:var(--accent);border:none;padding:8px 10px;border-radius:8px;color:#04263b;font-weight:600;cursor:pointer;}\n    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);}\n    .btn-red{background:var(--danger);color:#24070a;}\n    .btn-small{padding:6px 8px;font-size:13px;}\n    .layout{display:flex;gap:14px;}\n    .left{flex:1;min-width:320px;}\n    .right{width:360px;min-width:260px;}\n    .visualizer{height:360px;background:linear-gradient(180deg,#071426,#02101b);border-radius:8px;padding:10px;display:flex;align-items:end;gap:6px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);}\n    .bar{flex:1 1 auto;display:flex;align-items:end;justify-content:center;border-radius:6px 6px 3px 3px;background:var(--bar-bg);position:relative;transition:height 150ms linear,background 120ms;}\n    .bar-value{position:absolute;top:6px;font-size:11px;color:var(--muted);display:none;}\n    .bar.show-value .bar-value{display:block;}\n    .stats{display:flex;gap:12px;align-items:center;margin-top:10px;}\n    .stat{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;min-width:110px;text-align:center;}\n    .small{font-size:12px;color:var(--muted);}\n    .big{font-size:18px;font-weight:700;color:var(--text);}\n    .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}\n    .legend .key{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:8px;}\n    .swatches{width:14px;height:14px;border-radius:3px;}\n    /* colors */\n    .bar.pivot{background:linear-gradient(180deg,var(--pivot),#5b21b6);}\n    .bar.compare{background:linear-gradient(180deg,var(--cmp),#f59e0b);}\n    .bar.swap{background:linear-gradient(180deg,var(--danger),#ef4444);}\n    .bar.sorted{background:linear-gradient(180deg,var(--sorted),#059669);}\n    .bar.active-range{box-shadow:0 0 0 3px rgba(96,165,250,0.06) inset;}\n    .panel{background:linear-gradient(180deg,#021428,#01121a);padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);}\n    pre{background:transparent;color:var(--muted);font-size:13px;overflow:auto;margin:0;padding:8px;border-radius:6px;border:1px dashed rgba(255,255,255,0.02);}\n    .stack-list{display:flex;flex-direction:column;gap:6px;margin-top:8px;}\n    .stack-item{background:rgba(255,255,255,0.02);padding:6px;border-radius:6px;color:var(--muted);font-size:13px;}\n    footer{margin-top:12px;color:var(--muted);font-size:12px;}\n    @media (max-width:900px){\n      .layout{flex-direction:column;}\n      .right{width:auto;}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"wrap\" role=\"main\">\n    <h1>Quick Sort Visualizer</h1>\n    <div class=\"controls\">\n      <div class=\"control\">\n        <label for=\"size\">Array size</label>\n        <input id=\"size\" type=\"range\" min=\"6\" max=\"80\" value=\"30\">\n        <span id=\"sizeVal\" style=\"min-width:30px;color:var(--muted);font-size:13px;\">30</span>\n      </div>\n\n      <div class=\"control\">\n        <label for=\"pivot\">Pivot</label>\n        <select id=\"pivot\">\n          <option value=\"last\">Last element</option>\n          <option value=\"first\">First element</option>\n          <option value=\"middle\">Middle element</option>\n          <option value=\"random\">Random</option>\n          <option value=\"median3\" selected>Median-of-three</option>\n        </select>\n      </div>\n\n      <div class=\"control\">\n        <label for=\"speed\">Speed</label>\n        <input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"200\">\n        <span id=\"speedVal\" style=\"min-width:40px;color:var(--muted);font-size:13px;\">200 ms</span>\n      </div>\n\n      <div class=\"control\">\n        <button id=\"generate\" class=\"btn-small ghost\">Generate</button>\n        <button id=\"shuffle\" class=\"btn-small ghost\">Shuffle</button>\n      </div>\n\n      <div style=\"margin-left:auto;display:flex;gap:8px;\">\n        <button id=\"start\" class=\"btn-small\">Start</button>\n        <button id=\"pause\" class=\"btn-small ghost\">Pause</button>\n        <button id=\"step\" class=\"btn-small ghost\">Step</button>\n        <button id=\"reset\" class=\"btn-small btn-red btn-small\">Reset</button>\n      </div>\n    </div>\n\n    <div class=\"layout\">\n      <div class=\"left\">\n        <div id=\"visual\" class=\"visualizer panel\" aria-live=\"polite\"></div>\n        <div class=\"stats\">\n          <div class=\"stat\"><div class=\"small\">Comparisons</div><div id=\"cmpCount\" class=\"big\">0</div></div>\n          <div class=\"stat\"><div class=\"small\">Swaps</div><div id=\"swapCount\" class=\"big\">0</div></div>\n          <div class=\"stat\"><div class=\"small\">Steps</div><div id=\"stepCount\" class=\"big\">0</div></div>\n        </div>\n\n        <div class=\"legend\">\n          <div class=\"key\"><div class=\"swatches\" style=\"background:var(--pivot)\"></div><div class=\"small\">Pivot</div></div>\n          <div class=\"key\"><div class=\"swatches\" style=\"background:var(--cmp)\"></div><div class=\"small\">Comparing</div></div>\n          <div class=\"key\"><div class=\"swatches\" style=\"background:var(--danger)\"></div><div class=\"small\">Swapping</div></div>\n          <div class=\"key\"><div class=\"swatches\" style=\"background:var(--sorted)\"></div><div class=\"small\">Placed/Sorted</div></div>\n        </div>\n      </div>\n\n      <div class=\"right\">\n        <div class=\"panel\">\n          <div style=\"display:flex;justify-content:space-between;align-items:center;\">\n            <div style=\"font-weight:700\">Algorithm (Lomuto partition)</div>\n            <div style=\"font-size:12px;color:var(--muted)\">Pivot: <span id=\"pivotName\">median-of-three</span></div>\n          </div>\n\n          <pre id=\"pseudocode\">\nfunction quickSort(arr):\n  stack.push((0, n-1))\n  while stack not empty:\n    (low, high) = stack.pop()\n    if low < high:\n      p = partition(arr, low, high)\n      push (low, p-1), (p+1, high)\n\nfunction partition(arr, low, high):\n  choose pivot index\n  swap pivot with arr[high]\n  i = low\n  for j from low to high-1:\n    if arr[j] < pivotVal:\n      swap arr[i] and arr[j]\n      i++\n  swap arr[i] and arr[high]\n  return i\n          </pre>\n\n          <div style=\"margin-top:12px;\">\n            <div style=\"font-weight:700;margin-bottom:6px\">Recursion stack (ranges)</div>\n            <div class=\"stack-list\" id=\"stackList\"></div>\n          </div>\n        </div>\n\n        <div style=\"height:12px\"></div>\n\n        <div class=\"panel\">\n          <div style=\"font-weight:700;margin-bottom:6px\">Controls & Info</div>\n          <div style=\"display:flex;gap:8px;align-items:center;\">\n            <input id=\"showValues\" type=\"checkbox\"><label for=\"showValues\" style=\"margin:0;font-size:13px;color:var(--muted);\">Show values on bars</label>\n          </div>\n          <div style=\"height:8px\"></div>\n          <div style=\"font-size:13px;color:var(--muted)\">You can pick pivot selection strategy and step through the sorting process. Click \"Start\" to animate or \"Step\" to move one operation at a time.</div>\n        </div>\n\n      </div>\n    </div>\n\n    <footer>Quick Sort visualization â€” Lomuto partition; pivot strategies: first, last, middle, random, median-of-three.</footer>\n  </div>\n\n  <script>\n    // Quick Sort Visualizer - single file\n    (function(){\n      // DOM\n      const visual = document.getElementById('visual');\n      const sizeRange = document.getElementById('size');\n      const sizeVal = document.getElementById('sizeVal');\n      const generateBtn = document.getElementById('generate');\n      const shuffleBtn = document.getElementById('shuffle');\n      const startBtn = document.getElementById('start');\n      const pauseBtn = document.getElementById('pause');\n      const stepBtn = document.getElementById('step');\n      const resetBtn = document.getElementById('reset');\n      const pivotSelect = document.getElementById('pivot');\n      const pivotName = document.getElementById('pivotName');\n      const speedRange = document.getElementById('speed');\n      const speedVal = document.getElementById('speedVal');\n      const cmpCountEl = document.getElementById('cmpCount');\n      const swapCountEl = document.getElementById('swapCount');\n      const stepCountEl = document.getElementById('stepCount');\n      const stackList = document.getElementById('stackList');\n      const pseudocode = document.getElementById('pseudocode');\n      const showValues = document.getElementById('showValues');\n\n      let array = [];\n      let bars = [];\n      let maxVal = 100;\n      let running = false;\n      let paused = false;\n      let generator = null;\n      let timer = null;\n      let delay = Number(speedRange.value);\n      let cmpCount = 0, swapCount = 0, stepCount = 0;\n      let activeIndices = {}; // classes map\n      let sortedIndices = new Set();\n      let stackRanges = [];\n\n      // UI init\n      sizeVal.textContent = sizeRange.value;\n      speedVal.textContent = delay + ' ms';\n      pivotName.textContent = pivotSelect.options[pivotSelect.selectedIndex].text;\n\n      function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }\n\n      function generateArray(n){\n        array = [];\n        maxVal = Math.max(20, n * 3);\n        for(let i=0;i<n;i++){\n          array.push(randInt(5, maxVal));\n        }\n        cmpCount = swapCount = stepCount = 0;\n        sortedIndices.clear();\n        activeIndices = {};\n        updateStats();\n        renderArray();\n      }\n\n      function shuffleArray(){\n        for(let i=array.length-1;i>0;i--){\n          const j = randInt(0,i);\n          [array[i], array[j]] = [array[j], array[i]];\n        }\n        cmpCount = swapCount = stepCount = 0;\n        sortedIndices.clear();\n        activeIndices = {};\n        updateStats();\n        renderArray();\n      }\n\n      function renderArray(){\n        visual.innerHTML = '';\n        bars = [];\n        const n = array.length;\n        const max = Math.max(...array);\n        for(let i=0;i<n;i++){\n          const val = array[i];\n          const bar = document.createElement('div');\n          bar.className = 'bar' + (showValues.checked ? ' show-value' : '');\n          bar.style.height = (val / max * 100) + '%';\n          bar.dataset.index = i;\n          const label = document.createElement('div');\n          label.className = 'bar-value';\n          label.textContent = val;\n          bar.appendChild(label);\n          visual.appendChild(bar);\n          bars.push(bar);\n        }\n        updateBarStyles();\n      }\n\n      function updateBarStyles(highlightOps){\n        // highlightOps optionally contains info: {pivotIndex, compare:[i,j], swap:[i,j], activeRange:[low,high], markPlaced: index}\n        // Reset classes\n        bars.forEach(b => b.className = 'bar' + (showValues.checked ? ' show-value' : ''));\n        if(highlightOps){\n          if(highlightOps.activeRange){\n            const [low,high] = highlightOps.activeRange;\n            for(let i=low;i<=high;i++){\n              if(bars[i]) bars[i].classList.add('active-range');\n            }\n          }\n          if(typeof highlightOps.pivotIndex === 'number' && bars[highlightOps.pivotIndex]) bars[highlightOps.pivotIndex].classList.add('pivot');\n          if(Array.isArray(highlightOps.compare)){\n            highlightOps.compare.forEach(i => { if(bars[i]) bars[i].classList.add('compare'); });\n          }\n          if(Array.isArray(highlightOps.swap)){\n            highlightOps.swap.forEach(i => { if(bars[i]) bars[i].classList.add('swap'); });\n          }\n          if(Number.isInteger(highlightOps.markPlaced) && bars[highlightOps.markPlaced]) bars[highlightOps.markPlaced].classList.add('sorted');\n        }\n        // permanently mark sortedIndices\n        sortedIndices.forEach(i => {\n          if(bars[i]) bars[i].classList.add('sorted');\n        });\n      }\n\n      function updateStats(){\n        cmpCountEl.textContent = cmpCount;\n        swapCountEl.textContent = swapCount;\n        stepCountEl.textContent = stepCount;\n        // stack list\n        stackList.innerHTML = '';\n        stackRanges.slice().reverse().forEach(r => { // display top-first\n          const it = document.createElement('div');\n          it.className = 'stack-item';\n          it.textContent = '['+r[0]+', '+r[1]+']';\n          stackList.appendChild(it);\n        });\n      }\n\n      // Pivot selection strategies\n      function choosePivotIndex(arr, low, high, strategy){\n        if(strategy === 'first') return low;\n        if(strategy === 'last') return high;\n        if(strategy === 'middle') return Math.floor((low+high)/2);\n        if(strategy === 'random') return randInt(low, high);\n        if(strategy === 'median3'){\n          const mid = Math.floor((low+high)/2);\n          const a = {v:arr[low], i:low};\n          const b = {v:arr[mid], i:mid};\n          const c = {v:arr[high], i:high};\n          const trio = [a,b,c].sort((x,y)=>x.v-y.v);\n          return trio[1].i;\n        }\n        return high;\n      }\n\n      // Partition (Lomuto) as a generator yields ops\n      function* partitionGen(arr, low, high, pivotStrategy){\n        // choose pivot index\n        const pIndex = choosePivotIndex(arr, low, high, pivotStrategy);\n        yield {type:'pivot', pivotIndex:pIndex, activeRange:[low,high]};\n        // swap pivot to end (high)\n        if(pIndex !== high){\n          [arr[pIndex], arr[high]] = [arr[high], arr[pIndex]];\n          yield {type:'swap', swap:[pIndex, high], activeRange:[low,high]};\n        }\n        const pivotVal = arr[high];\n        let i = low;\n        for(let j=low;j<high;j++){\n          yield {type:'compare', compare:[j, high], activeRange:[low,high], pivotIndex:high};\n          if(arr[j] < pivotVal){\n            if(i !== j){\n              [arr[i], arr[j]] = [arr[j], arr[i]];\n              yield {type:'swap', swap:[i,j], activeRange:[low,high], pivotIndex:high};\n            }\n            i++;\n          }\n        }\n        // place pivot to its final position\n        if(i !== high){\n          [arr[i], arr[high]] = [arr[high], arr[i]];\n          yield {type:'swap', swap:[i,high], activeRange:[low,high], markPlaced:i};\n        } else {\n          // pivot already in place\n          yield {type:'mark', markPlaced:i, activeRange:[low,high]};\n        }\n        return i;\n      }\n\n      // QuickSort iterative using explicit stack, yields each operation from partitionGen\n      function* quickSortGen(arr, pivotStrategy){\n        const n = arr.length;\n        const stack = [];\n        stack.push([0, n-1]);\n        // yield stack updates\n        while(stack.length){\n          stackRanges = stack.slice();\n          const range = stack.pop();\n          const low = range[0], high = range[1];\n          if(low < high){\n            // yield that we're processing this range\n            yield {type:'stack', stack:stackRanges, activeRange:[low,high]};\n            // partition\n            const partGen = partitionGen(arr, low, high, pivotStrategy);\n            let maybe;\n            while(!(maybe = partGen.next()).done){\n              yield maybe.value;\n            }\n            const p = maybe.value; // returned pivot final index\n            // mark pivot placed\n            yield {type:'placed', index:p, activeRange:[low,high]};\n            // push subranges\n            // push larger first so smaller gets processed sooner (optional for stack depth)\n            const left = [low, p-1];\n            const right = [p+1, high];\n            // push right, then left\n            if(right[0] < right[1] || right[0] === right[1]) stack.push(right);\n            if(left[0] < left[1] || left[0] === left[1]) stack.push(left);\n            // update stack view\n            stackRanges = stack.slice();\n            yield {type:'stack', stack:stackRanges};\n          } else {\n            // single element or invalid: mark as placed if within bounds\n            if(low === high){\n              yield {type:'placed', index:low, activeRange:[low,high]};\n            }\n            stackRanges = stack.slice();\n            yield {type:'stack', stack:stackRanges};\n          }\n        }\n        // finished\n        yield {type:'done'};\n      }\n\n      // Step runner\n      function applyOp(op){\n        stepCount++;\n        stepCountEl.textContent = stepCount;\n        if(op.type === 'pivot'){\n          updateBarStyles({pivotIndex:op.pivotIndex, activeRange:op.activeRange});\n        } else if(op.type === 'compare'){\n          cmpCount++;\n          cmpCountEl.textContent = cmpCount;\n          updateBarStyles({compare:op.compare, pivotIndex:op.pivotIndex, activeRange:op.activeRange});\n        } else if(op.type === 'swap'){\n          swapCount++;\n          swapCountEl.textContent = swapCount;\n          // reflect array is already mutated by generator\n          renderHeights();\n          updateBarStyles({swap:op.swap, activeRange:op.activeRange, markPlaced:op.markPlaced});\n        } else if(op.type === 'mark'){\n          if(typeof op.markPlaced === 'number') sortedIndices.add(op.markPlaced);\n          updateBarStyles({markPlaced:op.markPlaced, activeRange:op.activeRange});\n        } else if(op.type === 'placed'){\n          if(typeof op.index === 'number') sortedIndices.add(op.index);\n          updateBarStyles({markPlaced:op.index, activeRange:op.activeRange});\n        } else if(op.type === 'stack'){\n          stackRanges = op.stack.slice();\n          updateStats();\n          updateBarStyles({activeRange:op.activeRange});\n        } else if(op.type === 'done'){\n          running = false;\n          paused = false;\n          // mark all sorted\n          for(let i=0;i<array.length;i++) sortedIndices.add(i);\n          updateBarStyles();\n          updateStats();\n          stopTimer();\n        }\n        updateStats();\n      }\n\n      function renderHeights(){\n        const max = Math.max(...array, 1);\n        for(let i=0;i<bars.length;i++){\n          const h = (array[i] / max * 100) + '%';\n          bars[i].style.height = h;\n          const lbl = bars[i].querySelector('.bar-value');\n          if(lbl) lbl.textContent = array[i];\n        }\n      }\n\n      // Timer control for auto-run\n      function stopTimer(){\n        if(timer) { clearTimeout(timer); timer = null; }\n      }\n\n      function runGenerator(auto=true){\n        if(!generator) return;\n        if(!auto){\n          // step mode: run single next\n          const res = generator.next();\n          if(res.done) { applyOp({type:'done'}); return; }\n          applyOp(res.value);\n          return;\n        }\n        function stepLoop(){\n          if(!generator) return;\n          const res = generator.next();\n          if(res.done){\n            applyOp({type:'done'});\n            return;\n          }\n          applyOp(res.value);\n          if(!running || paused) return;\n          timer = setTimeout(stepLoop, delay);\n        }\n        stepLoop();\n      }\n\n      // Button handlers\n      sizeRange.addEventListener('input',()=>{\n        sizeVal.textContent = sizeRange.value;\n      });\n\n      speedRange.addEventListener('input',()=>{\n        delay = Number(speedRange.value);\n        speedVal.textContent = delay + ' ms';\n      });\n\n      pivotSelect.addEventListener('change',()=>{\n        pivotName.textContent = pivotSelect.options[pivotSelect.selectedIndex].text;\n      });\n\n      generateBtn.addEventListener('click',()=>{\n        stop();\n        generateArray(Number(sizeRange.value));\n      });\n\n      shuffleBtn.addEventListener('click',()=>{\n        stop();\n        shuffleArray();\n      });\n\n      startBtn.addEventListener('click',()=>{\n        if(running && paused){\n          paused = false;\n          runGenerator(true);\n          return;\n        }\n        if(running) return;\n        // initialize and start\n        running = true;\n        paused = false;\n        cmpCount = swapCount = stepCount = 0;\n        cmpCountEl.textContent = cmpCount;\n        swapCountEl.textContent = swapCount;\n        stepCountEl.textContent = stepCount;\n        sortedIndices.clear();\n        activeIndices = {};\n        // create copy for generator to mutate\n        // We'll use the array in place so it's visible\n        generator = quickSortGen(array, pivotSelect.value);\n        runGenerator(true);\n      });\n\n      pauseBtn.addEventListener('click',()=>{\n        if(!running) return;\n        paused = !paused;\n        if(!paused){\n          runGenerator(true);\n        } else {\n          stopTimer();\n        }\n      });\n\n      stepBtn.addEventListener('click',()=>{\n        if(!running){\n          // start generator but paused, so we can step\n          running = true;\n          paused = true;\n          sortedIndices.clear();\n          generator = quickSortGen(array, pivotSelect.value);\n        }\n        // ensure not running auto\n        paused = true;\n        stopTimer();\n        runGenerator(false); // single step\n      });\n\n      resetBtn.addEventListener('click',()=>{\n        stop();\n        generateArray(Number(sizeRange.value));\n      });\n\n      document.getElementById('showValues').addEventListener('change',(e)=>{\n        bars.forEach(b => {\n          if(e.target.checked) b.classList.add('show-value'); else b.classList.remove('show-value');\n        });\n      });\n\n      function stop(){\n        running = false;\n        paused = false;\n        generator = null;\n        stopTimer();\n        cmpCount = swapCount = stepCount = 0;\n        cmpCountEl.textContent = cmpCount;\n        swapCountEl.textContent = swapCount;\n        stepCountEl.textContent = stepCount;\n        sortedIndices.clear();\n        activeIndices = {};\n        stackRanges = [];\n        updateStats();\n      }\n\n      // initialize\n      generateArray(Number(sizeRange.value));\n\n      // Keyboard shortcuts\n      window.addEventListener('keydown',(e)=>{\n        if(e.key === ' ') { e.preventDefault(); if(running) pauseBtn.click(); else startBtn.click(); }\n        if(e.key === 'ArrowRight') stepBtn.click();\n        if(e.key === 'r' || e.key === 'R') resetBtn.click();\n      });\n\n      // initial render\n      renderArray();\n      updateStats();\n\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Quick Sort"
    }
  ],
  "topic": "Quick Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}