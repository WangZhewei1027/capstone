{
  "id": "cc1dd460-ca65-11f0-96a8-05e9de15890f",
  "timestamp": "2025-11-26T01:20:52.641Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Insertion Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\"/>\n<title>Insertion Sort Visualizer</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#38bdf8;\n    --muted:#94a3b8;\n    --bar:#60a5fa;\n    --key:#f97316;\n    --compare:#ef4444;\n    --shift:#a78bfa;\n    --sorted:#10b981;\n    --text:#e6eef8;\n  }\n  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#061126);font-family:Inter,Segoe UI,system-ui,Arial;color:var(--text)}\n  .app{max-width:1100px;margin:18px auto;padding:20px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}\n  h1{margin:0 0 10px;font-size:20px}\n  .controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-bottom:12px}\n  .controls > *{background:var(--panel);padding:10px;border-radius:8px;box-shadow:inset 0 -2px 0 rgba(255,255,255,0.02)}\n  label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}\n  input[type=range]{width:180px}\n  .btn{background:linear-gradient(180deg,#0b2236,#04202a);color:var(--text);padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}\n  .btn:active{transform:translateY(1px)}\n  .btn:disabled{opacity:0.5;cursor:not-allowed}\n  .stats{display:flex;gap:12px;align-items:center;margin-left:auto;font-size:13px;color:var(--muted)}\n  .visual{position:relative;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);height:340px;border-radius:8px;padding:14px;display:flex;align-items:flex-end;overflow:hidden}\n  .bars{display:flex;align-items:flex-end;gap:4px;height:100%;width:100%}\n  .bar{background:var(--bar);flex:1 1 auto;border-radius:4px;transition:height 200ms ease, background-color 160ms ease;display:flex;align-items:flex-end;justify-content:center;color:#021025;font-weight:700;font-size:11px}\n  .bar.small{font-size:10px}\n  .bar .label{transform:translateY(6px);color:rgba(0,0,0,0.5)}\n  .bar.key{background:linear-gradient(180deg,var(--key),#ffb07a)}\n  .bar.compare{background:linear-gradient(180deg,var(--compare),#ff988a)}\n  .bar.shift{background:linear-gradient(180deg,var(--shift),#cdb7ff)}\n  .bar.sorted{background:linear-gradient(180deg,var(--sorted),#78f3bf)}\n  .footer{display:flex;gap:20px;margin-top:12px;align-items:flex-start;flex-wrap:wrap}\n  .pseudo{background:#051226;border-radius:8px;padding:12px;color:var(--muted);font-family:monospace;font-size:13px;min-width:260px}\n  .pseudo .line{padding:4px 6px;border-radius:4px}\n  .pseudo .line.active{background:rgba(56,189,248,0.12);color:var(--accent)}\n  .explain{flex:1;min-width:300px;color:var(--muted);font-size:14px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);padding:12px;border-radius:8px}\n  .top-row{display:flex;gap:12px;align-items:center}\n  .small-note{font-size:12px;color:var(--muted)}\n  .control-block{min-width:160px}\n  .flexcol{display:flex;flex-direction:column}\n</style>\n</head>\n<body>\n<div class=\"app\" role=\"main\" aria-label=\"Insertion Sort Visualizer\">\n  <div class=\"top-row\">\n    <div>\n      <h1>Insertion Sort Visualizer</h1>\n      <div class=\"small-note\">See how insertion sort builds a sorted section by removing one element (the key) and inserting it into the correct place.</div>\n    </div>\n    <div class=\"stats\" style=\"margin-left:auto\">\n      <div>Comparisons: <span id=\"compCount\">0</span></div>\n      <div>Moves: <span id=\"moveCount\">0</span></div>\n    </div>\n  </div>\n\n  <div class=\"controls\" aria-hidden=\"false\">\n    <div class=\"control-block\">\n      <label for=\"size\">Array size: <span id=\"sizeVal\">30</span></label>\n      <input id=\"size\" type=\"range\" min=\"5\" max=\"80\" value=\"30\">\n    </div>\n\n    <div class=\"control-block\">\n      <label for=\"speed\">Speed (ms delay): <span id=\"speedVal\">200</span></label>\n      <input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" step=\"10\" value=\"200\">\n    </div>\n\n    <div style=\"display:flex;gap:8px;align-items:center\">\n      <button id=\"randomize\" class=\"btn\">Randomize</button>\n      <button id=\"start\" class=\"btn\">Start</button>\n      <button id=\"pause\" class=\"btn\" disabled>Pause</button>\n      <button id=\"step\" class=\"btn\">Step</button>\n      <button id=\"reset\" class=\"btn\">Reset</button>\n    </div>\n\n    <div class=\"small-note\" style=\"margin-left:auto;min-width:180px;text-align:right\">\n      Colors: <span style=\"color:var(--sorted)\">■</span> sorted <span style=\"margin-left:8px;color:var(--key)\">■</span> key <span style=\"margin-left:8px;color:var(--compare)\">■</span> comparing <span style=\"margin-left:8px;color:var(--shift)\">■</span> shifting\n    </div>\n  </div>\n\n  <div class=\"visual\" aria-hidden=\"false\">\n    <div class=\"bars\" id=\"bars\" role=\"img\" aria-label=\"Array bars\"></div>\n  </div>\n\n  <div class=\"footer\">\n    <div class=\"pseudo\" aria-hidden=\"false\">\n      <div style=\"font-weight:600;color:var(--text);margin-bottom:8px\">Pseudocode</div>\n      <div id=\"p1\" class=\"line\">1. for i = 1 to n - 1</div>\n      <div id=\"p2\" class=\"line\">2. &nbsp;&nbsp;&nbsp; key = A[i]</div>\n      <div id=\"p3\" class=\"line\">3. &nbsp;&nbsp;&nbsp; j = i - 1</div>\n      <div id=\"p4\" class=\"line\">4. &nbsp;&nbsp;&nbsp; while j >= 0 and A[j] &gt; key</div>\n      <div id=\"p5\" class=\"line\">5. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A[j+1] = A[j]  (shift)</div>\n      <div id=\"p6\" class=\"line\">6. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; j = j - 1</div>\n      <div id=\"p7\" class=\"line\">7. &nbsp;&nbsp;&nbsp; A[j+1] = key  (insert)</div>\n    </div>\n\n    <div class=\"explain\" aria-hidden=\"false\">\n      <div style=\"font-weight:600;color:var(--text);margin-bottom:6px\">How it works</div>\n      Insertion sort iterates the array, treating the left part as sorted. For each element (the key), it compares the key to elements in the sorted part and shifts larger elements one position to the right until the correct spot for the key is found; then it inserts the key. It is stable and efficient for small or mostly-sorted arrays.\n      <ul style=\"margin-top:8px;color:var(--muted);font-size:13px\">\n        <li>Time: O(n^2) worst / average, O(n) best (already sorted)</li>\n        <li>Space: O(1) auxiliary</li>\n        <li>Good for small inputs or incremental insertions</li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n<script>\n/* Insertion Sort Visualizer\n   Single-file demo with controls:\n   - Randomize / Start / Pause / Step / Reset\n   - Array size and speed sliders\n   - Pseudocode highlighting and counters\n*/\n\nconst barsContainer = document.getElementById('bars');\nconst sizeInput = document.getElementById('size');\nconst speedInput = document.getElementById('speed');\nconst sizeVal = document.getElementById('sizeVal');\nconst speedVal = document.getElementById('speedVal');\nconst randomizeBtn = document.getElementById('randomize');\nconst startBtn = document.getElementById('start');\nconst pauseBtn = document.getElementById('pause');\nconst stepBtn = document.getElementById('step');\nconst resetBtn = document.getElementById('reset');\nconst compCountEl = document.getElementById('compCount');\nconst moveCountEl = document.getElementById('moveCount');\n\nlet arr = [];\nlet bars = [];\nlet generator = null;\nlet running = false;\nlet paused = false;\nlet done = false;\nlet comparisons = 0;\nlet moves = 0;\n\nsizeVal.textContent = sizeInput.value;\nspeedVal.textContent = speedInput.value;\n\nsizeInput.addEventListener('input', ()=> {\n  sizeVal.textContent = sizeInput.value;\n  buildArray(parseInt(sizeInput.value));\n});\nspeedInput.addEventListener('input', ()=> {\n  speedVal.textContent = speedInput.value;\n});\n\nrandomizeBtn.addEventListener('click', ()=> {\n  stop();\n  buildArray(parseInt(sizeInput.value), true);\n});\n\nstartBtn.addEventListener('click', ()=> {\n  if(done) { buildArray(parseInt(sizeInput.value), true); }\n  if(!generator) generator = insertionSort(arr);\n  if(!running) {\n    running = true;\n    paused = false;\n    toggleButtons();\n    run();\n  }\n});\n\npauseBtn.addEventListener('click', ()=> {\n  paused = true;\n  running = false;\n  toggleButtons();\n});\n\nstepBtn.addEventListener('click', ()=> {\n  if(!generator) generator = insertionSort(arr);\n  if(!running) {\n    step();\n  }\n});\n\nresetBtn.addEventListener('click', ()=> {\n  stop(true);\n  buildArray(parseInt(sizeInput.value), true);\n});\n\nfunction toggleButtons(){\n  startBtn.disabled = running;\n  pauseBtn.disabled = !running;\n  stepBtn.disabled = running;\n  randomizeBtn.disabled = running;\n  resetBtn.disabled = running;\n}\n\nfunction stop(resetDone=false){\n  running = false;\n  paused = false;\n  toggleButtons();\n  if(resetDone){\n    generator = null;\n    done = false;\n    comparisons = 0;\n    moves = 0;\n    updateCounters();\n    clearHighlights();\n  }\n}\n\nfunction updateCounters(){\n  compCountEl.textContent = comparisons;\n  moveCountEl.textContent = moves;\n}\n\n// Create new array and render bars\nfunction buildArray(n=30, randomize=true){\n  arr = [];\n  for(let i=0;i<n;i++){\n    arr.push( Math.floor(Math.random() * 90) + 10 ); // values between 10 and 99\n  }\n  comparisons = 0;\n  moves = 0;\n  updateCounters();\n  generator = null;\n  done = false;\n  render();\n}\n\nfunction render(){\n  barsContainer.innerHTML = '';\n  bars = [];\n  const n = arr.length;\n  for(let i=0;i<n;i++){\n    const b = document.createElement('div');\n    b.className = 'bar';\n    b.style.height = percentHeight(arr[i]) ;\n    b.dataset.index = i;\n    const lbl = document.createElement('div');\n    lbl.className = 'label';\n    lbl.textContent = arr[i];\n    b.appendChild(lbl);\n    barsContainer.appendChild(b);\n    bars.push(b);\n  }\n  clearHighlights();\n}\n\n// convert value to CSS height\nfunction percentHeight(v){\n  // v roughly 10..99 => map to 6%..92%\n  const minH = 6;\n  const maxH = 92;\n  const height = minH + ((v-10)/90) * (maxH-minH);\n  return height + '%';\n}\n\nfunction clearHighlights(){\n  document.querySelectorAll('.bar').forEach(b=>{\n    b.classList.remove('key','compare','shift','sorted');\n  });\n  ['p1','p2','p3','p4','p5','p6','p7'].forEach(id=>{\n    document.getElementById(id).classList.remove('active');\n  });\n}\n\n// Sleep utility\nfunction sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }\n\n// Generator that yields actions for each meaningful step\nfunction* insertionSort(A){\n  const n = A.length;\n  // mark first element as sorted visually\n  yield {type:'markSorted', index:0};\n  for(let i=1;i<n;i++){\n    // start of loop: i\n    yield {type:'start_i', i};\n    let key = A[i];\n    // highlight key\n    yield {type:'key', i, key};\n    let j = i - 1;\n    yield {type:'set_j', j};\n    // while j >= 0:\n    while(true){\n      if(j >= 0){\n        // compare A[j] and key\n        yield {type:'compare', j, i};\n        if(A[j] > key){\n          // shift: A[j+1] = A[j]\n          A[j+1] = A[j];\n          yield {type:'shift', from:j, to:j+1, val:A[j]}; // moved value\n          j = j - 1;\n          yield {type:'dec_j', j};\n          continue;\n        } else {\n          break;\n        }\n      } else {\n        break;\n      }\n    }\n    // insert key at j+1\n    A[j+1] = key;\n    yield {type:'insert', index:j+1, key};\n    // mark element i as sorted (the sorted region is 0..i)\n    yield {type:'markSorted', index:i};\n  }\n  yield {type:'done'};\n}\n\n// Map pseudocode highlighting\nfunction highlightPseudo(lineId){\n  ['p1','p2','p3','p4','p5','p6','p7'].forEach(id=>{\n    document.getElementById(id).classList.toggle('active', id===lineId);\n  });\n}\n\n// Apply a single action to DOM and state\nfunction applyAction(action){\n  switch(action.type){\n    case 'start_i':\n      clearHighlights();\n      highlightPseudo('p1');\n      break;\n    case 'key':\n      clearHighlights();\n      highlightPseudo('p2');\n      // mark the selected i as key color\n      bars.forEach(b=>b.classList.remove('key'));\n      if(bars[action.i]) bars[action.i].classList.add('key');\n      break;\n    case 'set_j':\n      highlightPseudo('p3');\n      break;\n    case 'compare':\n      comparisons++;\n      updateCounters();\n      highlightPseudo('p4');\n      // color compared bar and key bar\n      bars.forEach(b=>b.classList.remove('compare'));\n      if(bars[action.j]) bars[action.j].classList.add('compare');\n      // key bar: find first bar with class key (there should be)\n      break;\n    case 'shift':\n      // shift value from 'from' to 'to' (we already mutated arr in generator)\n      moves++;\n      updateCounters();\n      highlightPseudo('p5');\n      // update DOM height for index to reflect shifted value\n      if(bars[action.to]){\n        bars[action.to].style.height = percentHeight(action.val);\n        bars[action.to].querySelector('.label').textContent = action.val;\n        bars[action.to].classList.add('shift');\n      }\n      // remove key highlight from original index if it was overwritten (visual)\n      bars.forEach(b=>b.classList.remove('key'));\n      break;\n    case 'dec_j':\n      highlightPseudo('p6');\n      break;\n    case 'insert':\n      moves++;\n      updateCounters();\n      highlightPseudo('p7');\n      if(bars[action.index]){\n        bars[action.index].style.height = percentHeight(action.key);\n        bars[action.index].querySelector('.label').textContent = action.key;\n        // visually mark inserted briefly\n        bars[action.index].classList.add('key');\n      }\n      // remove any compare/shift classes\n      bars.forEach(b=>{ b.classList.remove('compare','shift'); });\n      break;\n    case 'markSorted':\n      // mark everything up to index as sorted\n      for(let k=0;k<=action.index;k++){\n        if(bars[k]) {\n          bars[k].classList.remove('key','compare','shift');\n          bars[k].classList.add('sorted');\n        }\n      }\n      // ensure pseudocode not stuck\n      break;\n    case 'done':\n      // finalize\n      bars.forEach(b=>{ b.classList.remove('key','compare','shift'); b.classList.add('sorted'); });\n      clearHighlights();\n      done = true;\n      running = false;\n      toggleButtons();\n      break;\n  }\n}\n\n// Run loop that consumes the generator automatically\nasync function run(){\n  toggleButtons();\n  const delay = ()=>Math.max(10, parseInt(speedInput.value));\n  if(!generator) generator = insertionSort(arr);\n  while(running){\n    const res = generator.next();\n    if(res.done) { applyAction({type:'done'}); done=true; running=false; toggleButtons(); break; }\n    applyAction(res.value);\n    // wait but allow pausing\n    let waited = 0;\n    const d = delay();\n    while(waited < d){\n      if(!running){ // paused by UI\n        return;\n      }\n      await sleep(20);\n      waited += 20;\n    }\n  }\n}\n\n// Step one action\nfunction step(){\n  if(!generator) generator = insertionSort(arr);\n  const res = generator.next();\n  if(res.done) { applyAction({type:'done'}); done=true; running=false; toggleButtons(); return; }\n  applyAction(res.value);\n}\n\n// Initialize on load\nbuildArray(parseInt(sizeInput.value), true);\ntoggleButtons();\n\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Insertion Sort"
    }
  ],
  "topic": "Insertion Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}