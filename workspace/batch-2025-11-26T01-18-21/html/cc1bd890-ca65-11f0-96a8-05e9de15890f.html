<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Array Explorer — Interactive Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root {
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #6ee7b7;
      --muted: #94a3b8;
      --glass: rgba(255,255,255,0.04);
    }
    html,body { height:100%; margin:0; font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: linear-gradient(180deg,#071021 0%, #07162a 100%); color:#e6eef6;}
    .wrap { max-width:1100px; margin:28px auto; padding:24px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow: 0 6px 30px rgba(2,6,23,0.6); }
    header { display:flex; gap:16px; align-items:center; }
    h1 { margin:0; font-size:20px; color:var(--accent); }
    p.lead { margin:6px 0 18px 0; color:var(--muted); font-size:13px; }
    .grid { display:grid; grid-template-columns: 360px 1fr; gap:18px; }
    .panel { background:var(--card); padding:14px; border-radius:10px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); }
    .array-box { padding:12px; border-radius:8px; background:var(--glass); min-height:56px; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
    .item { background:#071a2a; padding:8px 12px; border-radius:8px; color:#9fe7c8; font-weight:600; box-shadow: 0 2px 8px rgba(0,0,0,0.4); }
    .index { font-size:11px; color:var(--muted); margin-left:6px; }
    .controls { display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
    button, .small-btn { background:#072135; color:var(--accent); border:1px solid rgba(255,255,255,0.03); padding:8px 10px; border-radius:8px; cursor:pointer; }
    button:hover, .small-btn:hover { filter:brightness(1.08); }
    .small-btn { font-size:13px; padding:6px 8px; }
    .group-title { color:var(--muted); font-size:13px; margin-bottom:8px; }
    .log { background:#061423; padding:12px; border-radius:8px; min-height:160px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace; font-size:13px; color:#cfeee1; overflow:auto; white-space:pre-wrap; }
    .row { display:flex; gap:8px; align-items:center; margin-bottom:10px; }
    input[type="text"], textarea, select { background:#041827; border:1px solid rgba(255,255,255,0.03); color:#dff3ea; padding:8px; border-radius:8px; outline:none; }
    label { font-size:13px; color:var(--muted); margin-right:6px; }
    footer { margin-top:14px; color:var(--muted); font-size:12px; }
    .example { background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:10px; border-radius:8px; }
    details { margin-top:8px; }
    summary { cursor:pointer; color:var(--muted); font-size:13px; }
    .tag { display:inline-block; padding:4px 8px; border-radius:999px; background:#062233; color:#7fe4c2; font-weight:600; font-size:12px; }
    .muted { color:var(--muted); font-size:13px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Array Explorer</h1>
        <p class="lead">Interactive playground showing common Array operations in JavaScript. Click buttons to run examples and watch the array change.</p>
      </div>
      <div style="margin-left:auto;text-align:right">
        <div class="tag">JS • Arrays</div>
      </div>
    </header>

    <div class="grid" style="margin-top:16px;">
      <div>
        <div class="panel">
          <div class="group-title">Current array</div>
          <div id="arrayBox" class="array-box" aria-live="polite"></div>

          <div class="row" style="margin-top:12px;">
            <label for="newValue">Value:</label>
            <input id="newValue" type="text" placeholder='e.g. "apple" or 42' style="flex:1">
            <button id="pushBtn" class="small-btn">Push</button>
            <button id="unshiftBtn" class="small-btn">Unshift</button>
          </div>

          <div class="controls" style="margin-top:8px;">
            <button id="popBtn">pop()</button>
            <button id="shiftBtn">shift()</button>
            <button id="spliceBtn">splice()</button>
            <button id="clearBtn">Clear</button>
            <button id="resetBtn">Reset</button>
          </div>

          <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0">

          <div class="group-title">Access / Search</div>
          <div class="controls">
            <button id="accessIndexBtn" class="small-btn">Access by index</button>
            <button id="indexOfBtn" class="small-btn">indexOf()</button>
            <button id="includesBtn" class="small-btn">includes()</button>
            <button id="findBtn" class="small-btn">find()</button>
          </div>

          <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0">

          <div class="group-title">Transform / Iterate</div>
          <div class="controls">
            <button id="mapBtn" class="small-btn">map()</button>
            <button id="filterBtn" class="small-btn">filter()</button>
            <button id="reduceBtn" class="small-btn">reduce()</button>
            <button id="forEachBtn" class="small-btn">forEach()</button>
            <button id="sortBtn" class="small-btn">sort()</button>
            <button id="reverseBtn" class="small-btn">reverse()</button>
          </div>

          <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0">

          <div class="group-title">Extras</div>
          <div class="controls">
            <button id="concatBtn" class="small-btn">concat()</button>
            <button id="sliceBtn" class="small-btn">slice()</button>
            <button id="flatBtn" class="small-btn">flat()</button>
            <button id="typedBtn" class="small-btn">TypedArray</button>
          </div>

          <details style="margin-top:12px;">
            <summary>Quick notes</summary>
            <div style="margin-top:8px;" class="muted">
              - Arrays can hold any values (numbers, strings, objects, other arrays).<br>
              - Most mutating methods (push, pop, splice, sort, reverse) change the original array.<br>
              - Non-mutating methods (map, filter, slice, concat) return a new array.<br>
              - Use Array.isArray(value) to test for arrays.
            </div>
          </details>
        </div>
      </div>

      <div>
        <div class="panel">
          <div class="group-title">Log / Output</div>
          <div id="log" class="log"></div>

          <div style="margin-top:12px;">
            <div class="group-title">Run a short custom expression on the array</div>
            <div class="row">
              <input id="expr" type="text" placeholder='Example: arr.map(x => x*2).filter(x=>x>10)' style="flex:1">
              <button id="runExpr" class="small-btn">Run</button>
            </div>
            <div class="muted" style="margin-top:8px">When you run an expression it will have a variable named <code>arr</code> that references the current array. Non-mutating returns will be printed; mutating code will change the array.</div>
          </div>

          <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0">

          <div class="example">
            <div class="group-title">Examples shown in logs</div>
            <div style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; font-size:13px; color:#cfeee1;">
⟨push⟩ adds to the end. ⟨unshift⟩ adds to front. ⟨splice(1,2,"x")⟩ removes 2 items at index 1 then inserts "x".<br>
map: arr.map(x => x*2) — returns a new array. filter: arr.filter(x => condition).
            </div>
          </div>

          <footer>
            Tip: open your browser devtools console to experiment with the global variable "arr" (the demo keeps it in sync).
          </footer>
        </div>
      </div>
    </div>
  </div>

<script>
/*
  Array Explorer
  Single-file interactive demo for common JS Array operations.
*/

(function() {
  // Initial array
  const initial = [3, 7, 2, 9, 7];
  // The array used by the demo; also expose globally for console experimentation
  window.arr = initial.slice();

  // Elements
  const arrayBox = document.getElementById('arrayBox');
  const logEl = document.getElementById('log');
  const newValueInput = document.getElementById('newValue');
  const exprInput = document.getElementById('expr');

  // Helper: render the current array visually
  function renderArray() {
    arrayBox.innerHTML = '';
    window.arr.forEach((v, i) => {
      const item = document.createElement('div');
      item.className = 'item';
      item.title = JSON.stringify(v);
      // show pretty value
      item.textContent = formatValue(v);
      const idx = document.createElement('span');
      idx.className = 'index';
      idx.textContent = '[' + i + ']';
      item.appendChild(idx);
      arrayBox.appendChild(item);
    });
    if (window.arr.length === 0) {
      const muted = document.createElement('div');
      muted.className = 'muted';
      muted.textContent = '(empty array)';
      arrayBox.appendChild(muted);
    }
  }

  function formatValue(v) {
    if (Array.isArray(v)) return '[' + v.map(formatValue).join(', ') + ']';
    if (v === null) return 'null';
    if (v === undefined) return 'undefined';
    if (typeof v === 'string') return '"' + v + '"';
    if (typeof v === 'object') return '{...}';
    return String(v);
  }

  // Logging helper
  function log(...args) {
    const time = new Date().toLocaleTimeString();
    const lines = args.map(a => {
      try {
        if (typeof a === 'string') return a;
        return JSON.stringify(a, replacer, 2);
      } catch (e) {
        return String(a);
      }
    }).join(' ');
    logEl.textContent = `[${time}] ${lines}\n` + logEl.textContent;
  }

  // JSON replacer to avoid cycles and show functions
  function replacer(key, value) {
    if (typeof value === 'function') return `[Function: ${value.name || 'anonymous'}]`;
    if (Array.isArray(value)) return value;
    return value;
  }

  // Utilities for user input conversion: interpret "42" => number, "true" => boolean, "null" => null, quoted strings => string
  function parseInputValue(raw) {
    if (raw === undefined || raw === '') return undefined;
    const t = raw.trim();
    // try JSON parse for numbers, booleans, null, arrays, objects, strings (with quotes)
    try {
      // if looks like an unquoted string, treat as string by default unless it's a valid JSON literal
      if (/^[-]?\d+(\.\d+)?$/.test(t) || /^(true|false|null)$/.test(t) || /^[\[\{].*[\]\}]$/.test(t) || (/^".*"$/.test(t) || /^'.*'$/.test(t))) {
        return JSON.parse(t);
      }
    } catch(e) {
      // fall through
    }
    // fallback: return raw string
    return raw;
  }

  // Buttons
  document.getElementById('pushBtn').addEventListener('click', ()=> {
    const val = parseInputValue(newValueInput.value);
    log('push(', val, ')');
    window.arr.push(val);
    renderArray();
    newValueInput.value = '';
  });

  document.getElementById('unshiftBtn').addEventListener('click', ()=> {
    const val = parseInputValue(newValueInput.value);
    log('unshift(', val, ')');
    window.arr.unshift(val);
    renderArray();
    newValueInput.value = '';
  });

  document.getElementById('popBtn').addEventListener('click', ()=> {
    const v = window.arr.pop();
    log('pop() ->', v);
    renderArray();
  });

  document.getElementById('shiftBtn').addEventListener('click', ()=> {
    const v = window.arr.shift();
    log('shift() ->', v);
    renderArray();
  });

  document.getElementById('spliceBtn').addEventListener('click', ()=> {
    const at = prompt('Start index (number):', '1');
    if (at === null) return;
    const count = prompt('Delete count (number):', '1');
    if (count === null) return;
    const val = prompt('Optional new element to insert (leave empty for none):', '');
    const args = [Number(at), Number(count)];
    if (val !== null && val !== '') args.push(parseInputValue(val));
    const removed = window.arr.splice(...args);
    log('splice(' + args.join(', ') + ') removed ->', removed, 'now ->', window.arr);
    renderArray();
  });

  document.getElementById('clearBtn').addEventListener('click', ()=> {
    log('Clearing array (arr.length = 0)');
    window.arr.length = 0;
    renderArray();
  });

  document.getElementById('resetBtn').addEventListener('click', ()=> {
    window.arr = initial.slice();
    // also put arr in global again
    window.arr = window.arr;
    log('Reset to initial array ->', window.arr);
    renderArray();
  });

  document.getElementById('accessIndexBtn').addEventListener('click', ()=> {
    const idx = prompt('Index to access:', '2');
    if (idx === null) return;
    const i = Number(idx);
    const v = window.arr[i];
    log('arr[' + i + '] ->', v);
  });

  document.getElementById('indexOfBtn').addEventListener('click', ()=> {
    const val = prompt('Value to find indexOf (use JSON literal if needed):', '7');
    if (val === null) return;
    const parsed = parseInputValue(val);
    const idx = window.arr.indexOf(parsed);
    log('indexOf(', parsed, ') ->', idx);
  });

  document.getElementById('includesBtn').addEventListener('click', ()=> {
    const val = prompt('Value to includes (use JSON literal if needed):', '7');
    if (val === null) return;
    const parsed = parseInputValue(val);
    const inc = window.arr.includes(parsed);
    log('includes(', parsed, ') ->', inc);
  });

  document.getElementById('findBtn').addEventListener('click', ()=> {
    const expr = prompt('Enter predicate using "x" for element (e.g. x => x>5):', 'x => x > 5');
    if (expr === null) return;
    try {
      const fn = eval('(' + expr + ')');
      const found = window.arr.find(fn);
      log('find(', expr, ') ->', found);
    } catch (e) { log('Error evaluating predicate:', String(e)); }
  });

  document.getElementById('mapBtn').addEventListener('click', ()=> {
    // example: double numbers, leave others unchanged
    const mapped = window.arr.map(x => (typeof x === 'number' ? x * 2 : x));
    log('map: doubled numbers ->', mapped);
    // map is non-mutating; offer to replace
    if (confirm('Replace current array with mapped result?')) {
      window.arr = mapped;
      log('Replaced current array.');
    }
    renderArray();
  });

  document.getElementById('filterBtn').addEventListener('click', ()=> {
    const expr = prompt('Enter predicate using "x" (e.g. x => x % 2 === 1):', 'x => typeof x === "number" && x % 2 === 1');
    if (expr === null) return;
    try {
      const fn = eval('(' + expr + ')');
      const filtered = window.arr.filter(fn);
      log('filter(', expr, ') ->', filtered);
      if (confirm('Replace current array with filtered result?')) {
        window.arr = filtered;
        log('Replaced current array.');
      }
      renderArray();
    } catch (e) { log('Error evaluating predicate:', String(e)); }
  });

  document.getElementById('reduceBtn').addEventListener('click', ()=> {
    try {
      const expr = prompt('Enter reducer using (acc, x) (e.g. (acc, x) => acc + x):', '(acc, x) => acc + x');
      if (expr === null) return;
      const initRaw = prompt('Initial value (JSON), leave empty for 0:', '0');
      const initVal = initRaw === null || initRaw === '' ? undefined : parseInputValue(initRaw);
      const fn = eval('(' + expr + ')');
      const result = initVal === undefined ? window.arr.reduce(fn) : window.arr.reduce(fn, initVal);
      log('reduce ->', result);
    } catch (e) { log('Error:', String(e)); }
  });

  document.getElementById('forEachBtn').addEventListener('click', ()=> {
    log('forEach output:');
    window.arr.forEach((x,i) => log('  ['+i+']', x));
  });

  document.getElementById('sortBtn').addEventListener('click', ()=> {
    // default sort coerces to strings: let's offer numeric sort
    if (confirm('Sort numerically if possible? (Cancel for default lexicographic)')) {
      window.arr.sort((a,b) => {
        if (typeof a === 'number' && typeof b === 'number') return a - b;
        return String(a).localeCompare(String(b));
      });
    } else {
      window.arr.sort();
    }
    log('arr sorted ->', window.arr);
    renderArray();
  });

  document.getElementById('reverseBtn').addEventListener('click', ()=> {
    window.arr.reverse();
    log('arr reversed ->', window.arr);
    renderArray();
  });

  document.getElementById('concatBtn').addEventListener('click', ()=> {
    const raw = prompt('Array or value to concat (JSON literal recommended):', '[100,200]');
    if (raw === null) return;
    const parsed = parseInputValue(raw);
    const result = window.arr.concat(parsed);
    log('concat(', parsed, ') ->', result);
    if (confirm('Replace current array with concat result?')) {
      window.arr = result;
      log('Replaced current array.');
      renderArray();
    }
  });

  document.getElementById('sliceBtn').addEventListener('click', ()=> {
    const a = prompt('slice start (number or empty):','0');
    if (a === null) return;
    const b = prompt('slice end (number or empty):','2');
    if (b === null) return;
    const start = a === '' ? undefined : Number(a);
    const end = b === '' ? undefined : Number(b);
    const result = window.arr.slice(start, end);
    log('slice(', start, ',', end, ') ->', result);
  });

  document.getElementById('flatBtn').addEventListener('click', ()=> {
    const depthRaw = prompt('Depth (number) default 1:', '1');
    if (depthRaw === null) return;
    const d = Number(depthRaw);
    const result = window.arr.flat(d);
    log('flat(' + d + ') ->', result);
    if (confirm('Replace current array with flat result?')) {
      window.arr = result;
      log('Replaced current array.');
      renderArray();
    }
  });

  document.getElementById('typedBtn').addEventListener('click', ()=> {
    // show creating a typed array from numbers
    const nums = window.arr.filter(x => typeof x === 'number').map(Number);
    if (nums.length === 0) {
      log('No numeric elements to create TypedArray.');
      return;
    }
    const ta = new Int16Array(nums);
    log('Created Int16Array from numeric elements ->', Array.from(ta));
  });

  document.getElementById('runExpr').addEventListener('click', ()=> {
    const code = exprInput.value.trim();
    if (!code) { log('No expression entered.'); return; }
    try {
      // Provide arr in scope, evaluate expression.
      // Using Function to create a new function with arr in scope:
      const fn = new Function('arr', 'return (' + code + ');');
      const res = fn(window.arr);
      log('Expression result ->', res);
      // If result is an array and user confirms, replace arr
      if (Array.isArray(res) && confirm('Expression returned an array. Replace current array?')) {
        window.arr = res;
        log('Replaced current array with expression result.');
        renderArray();
      }
    } catch (e) {
      log('Error evaluating expression:', String(e));
    }
  });

  // Initialize
  renderArray();
  log('Initialized with', window.arr);

  // Expose some helpers for advanced exploration from browser console
  window.arrDebug = {
    info: () => { console.log('arr (current)', window.arr); },
    isArray: x => Array.isArray(x)
  };

  // Keyboard shortcut: Ctrl+L clears log
  window.addEventListener('keydown', (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'l') {
      e.preventDefault();
      logEl.textContent = '';
      log('Log cleared (Ctrl+L)');
    }
  });

})();
</script>
</body>
</html>