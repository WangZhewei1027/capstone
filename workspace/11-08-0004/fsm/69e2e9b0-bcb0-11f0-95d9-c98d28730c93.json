{
  "topic": "Hash Map Explorer â€” Separate Chaining",
  "description": "Models the interactive states of the hash map explorer UI: inserting, looking up, and deleting keys with animated visual steps, configuration changes, and UI enable/disable during animations.",
  "states": [
    {
      "name": "idle",
      "onEnter": "focusInput",
      "onExit": "",
      "on": {
        "INSERT_CLICK": "inserting",
        "KEY_ENTER": "inserting",
        "LOOKUP_CLICK": "lookup_traversing",
        "DELETE_CLICK": "delete_traversing",
        "RANDOM_CLICK": "idle",
        "CLEAR_CLICK": "idle",
        "SIZE_CHANGE": "idle",
        "HASH_CHANGE": "idle",
        "SPEED_CHANGE": "idle"
      }
    },
    {
      "name": "inserting",
      "onEnter": "disableUI; computeHash; log('Compute hash for key')",
      "onExit": "enableUI",
      "on": {
        "DUPLICATE_DETECTED": "idle",
        "HASH_COMPUTED": "animating_to_bucket"
      }
    },
    {
      "name": "animating_to_bucket",
      "onEnter": "animateChipToBucket(key, idx)",
      "onExit": "",
      "on": {
        "ANIMATE_TO_BUCKET_DONE": "inserting_highlight",
        "ANIMATE_TO_BUCKET_FAILED": "idle"
      }
    },
    {
      "name": "inserting_highlight",
      "onEnter": "appendNodeToData(idx); renderBuckets; highlightNodeInBucket(id, 'found') ; log('Inserted')",
      "onExit": "",
      "on": {
        "HIGHLIGHT_DONE": "idle"
      }
    },
    {
      "name": "lookup_traversing",
      "onEnter": "disableUI; computeHash; log('Lookup: compute hash and traverse')",
      "onExit": "enableUI",
      "on": {
        "BUCKET_EMPTY": "idle",
        "TRAVERSAL_START": "lookup_highlight_step"
      }
    },
    {
      "name": "lookup_highlight_step",
      "onEnter": "highlightElement(nodeEl) // simulate compare; log step",
      "onExit": "",
      "on": {
        "NODE_MATCH": "idle",
        "NODE_NO_MATCH_MORE": "lookup_highlight_step",
        "NODE_NO_MATCH_END": "idle"
      }
    },
    {
      "name": "delete_traversing",
      "onEnter": "disableUI; computeHash; log('Delete: compute hash and traverse')",
      "onExit": "enableUI",
      "on": {
        "BUCKET_EMPTY": "idle",
        "TRAVERSAL_START": "delete_highlight_step"
      }
    },
    {
      "name": "delete_highlight_step",
      "onEnter": "highlightElement(nodeEl) // simulate compare; log step",
      "onExit": "",
      "on": {
        "NODE_MATCH": "deleting_remove_anim",
        "NODE_NO_MATCH_MORE": "delete_highlight_step",
        "NODE_NO_MATCH_END": "idle"
      }
    },
    {
      "name": "deleting_remove_anim",
      "onEnter": "animateRemoveNode(nodeEl); log('Removing node animation')",
      "onExit": "",
      "on": {
        "REMOVE_DONE": "idle"
      }
    },
    {
      "name": "flashing_bucket",
      "onEnter": "flashBucket(idx); log('Flash bucket for not found/empty')",
      "onExit": "",
      "on": {
        "FLASH_DONE": "idle"
      }
    }
  ],
  "events": [
    "INSERT_CLICK",
    "LOOKUP_CLICK",
    "DELETE_CLICK",
    "RANDOM_CLICK",
    "CLEAR_CLICK",
    "SIZE_CHANGE",
    "HASH_CHANGE",
    "SPEED_CHANGE",
    "KEY_ENTER",
    "HASH_COMPUTED",
    "DUPLICATE_DETECTED",
    "ANIMATE_TO_BUCKET_DONE",
    "ANIMATE_TO_BUCKET_FAILED",
    "HIGHLIGHT_DONE",
    "TRAVERSAL_START",
    "NODE_MATCH",
    "NODE_NO_MATCH_MORE",
    "NODE_NO_MATCH_END",
    "REMOVE_DONE",
    "BUCKET_EMPTY",
    "FLASH_DONE"
  ],
  "notes": "High-level FSM models user actions (Insert/Lookup/Delete), asynchronous animation phases (chip travel, node highlight, removal), and UI enable/disable behavior. Implementation details: each operation disables major controls on enter (disableUI) and re-enables on exit (enableUI). Insert flow: compute hash -> check duplicate -> animate chip -> append data -> highlight new node -> done. Lookup/Delete flows: compute hash -> if empty flash bucket -> otherwise sequentially highlight each node (NODE_MATCH or NODE_NO_MATCH_*). Delete additionally animates removal and removes data on REMOVE_DONE. Configuration events (SIZE_CHANGE, HASH_CHANGE, SPEED_CHANGE) are handled in idle and cause immediate reinitialize or parameter change without entering busy states. Many transitions are triggered by internal async completions (ANIMATE_TO_BUCKET_DONE, HIGHLIGHT_DONE, REMOVE_DONE, etc.)."
}