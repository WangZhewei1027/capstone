{
  "topic": "Interactive Hash Table (Separate Chaining) UI",
  "description": "Models the user-driven interaction flow for inserting, searching, deleting, and managing a visual hash table with animated token movement, chain traversal comparisons, and optional explanation toggles.",
  "states": [
    {
      "name": "initializing",
      "onEnter": "initTable",
      "onExit": "updateMetrics",
      "on": {
        "INIT_COMPLETE": "idle"
      }
    },
    {
      "name": "idle",
      "onEnter": "setReadyUI",
      "onExit": "clearTransientHighlights",
      "on": {
        "INSERT_CLICK": "hashing_for_insert",
        "SEARCH_CLICK": "hashing_for_search",
        "DELETE_CLICK": "hashing_for_delete",
        "CLEAR_CLICK": "initializing",
        "TABLE_SIZE_CHANGE": "initializing",
        "VISUAL_SPEED_CHANGE": "idle",
        "EXPLAIN_TOGGLE": "idle",
        "KEY_ENTER": "hashing_for_insert"
      }
    },
    {
      "name": "hashing_for_insert",
      "onEnter": "computeHashAndShowSteps (insert) // computeHash(), showHashSteps(), set opDetail='Computing hash...'",
      "onExit": "",
      "on": {
        "HASH_COMPUTED": "animating_insert",
        "INVALID_INPUT": "validation_error"
      }
    },
    {
      "name": "animating_insert",
      "onEnter": "animateTokenToBucket // animateTokenToBucket(key,index) (returns promise)",
      "onExit": "",
      "on": {
        "TOKEN_ANIM_DONE": "inserting",
        "ANIMATION_CANCEL": "idle"
      }
    },
    {
      "name": "inserting",
      "onEnter": "appendNodeToChainAndAppear // push into data table, create node DOM, animate appearance, updateMetrics, set opDetail/liveRegion",
      "onExit": "",
      "on": {
        "INSERTION_COMPLETE": "idle"
      }
    },
    {
      "name": "hashing_for_search",
      "onEnter": "computeHashAndShowSteps (search) // computeHash(), showHashSteps(), set opDetail='Computing hash...'",
      "onExit": "",
      "on": {
        "HASH_COMPUTED": "searching",
        "INVALID_INPUT": "validation_error"
      }
    },
    {
      "name": "searching",
      "onEnter": "highlightBucketAndTraverseComparisons // highlight bucket visual, sequentially highlight nodes, increment comparisons",
      "onExit": "clearNodeHighlights",
      "on": {
        "COMPARE_FOUND": "idle",
        "COMPARE_NOT_FOUND": "idle",
        "ANIMATION_CANCEL": "idle"
      }
    },
    {
      "name": "hashing_for_delete",
      "onEnter": "computeHashAndShowSteps (delete) // computeHash(), showHashSteps(), set opDetail='Computing hash...'",
      "onExit": "",
      "on": {
        "HASH_COMPUTED": "deleting",
        "INVALID_INPUT": "validation_error"
      }
    },
    {
      "name": "deleting",
      "onEnter": "highlightTraverseAndRemoveIfFound // sequentially compare, if found add 'removing' class, remove DOM node, remove from data, decrement totalItems, updateMetrics",
      "onExit": "clearNodeHighlights",
      "on": {
        "DELETE_REMOVED": "idle",
        "DELETE_NOT_FOUND": "idle",
        "ANIMATION_CANCEL": "idle"
      }
    },
    {
      "name": "validation_error",
      "onEnter": "notifyMissingKey // set opDetail to 'Please enter a key ...' and do not proceed",
      "onExit": "",
      "on": {
        "ACK": "idle"
      }
    }
  ],
  "events": [
    "INSERT_CLICK",
    "SEARCH_CLICK",
    "DELETE_CLICK",
    "CLEAR_CLICK",
    "TABLE_SIZE_CHANGE",
    "VISUAL_SPEED_CHANGE",
    "EXPLAIN_TOGGLE",
    "KEY_ENTER",
    "HASH_COMPUTED",
    "TOKEN_ANIM_DONE",
    "INSERTION_COMPLETE",
    "COMPARE_FOUND",
    "COMPARE_NOT_FOUND",
    "DELETE_REMOVED",
    "DELETE_NOT_FOUND",
    "INIT_COMPLETE",
    "INVALID_INPUT",
    "ACK",
    "ANIMATION_CANCEL"
  ],
  "notes": "State names map to visible interactive modes in the UI. onEnter actions are mapped to concrete functions or logical groups used in the code: initTable, computeHash + showHashSteps, animateTokenToBucket, appendNodeToChainAndAppear, highlightBucketAndTraverseComparisons, highlightTraverseAndRemoveIfFound, updateMetrics, notifyMissingKey, etc. The code performs synchronous hash computation then immediately proceeds to the next state; those synchronous steps are modeled as HASH_COMPUTED transitions. Animation completions are modeled as TOKEN_ANIM_DONE, INSERTION_COMPLETE and implicit DELETE_REMOVED events (promises/timeout resolution). EXPLAIN_TOGGLE is handled in the real app as a UI toggle (show/hide explainBox) and is modeled as a self-transition on idle (no state change required). VISUAL_SPEED_CHANGE does not change state but affects timings (speedFactor). The validation_error state represents immediate rejection of empty key input and returns to idle on ACK (or implicitly). Many transitions are immediate in the code; the FSM models internal completion events (e.g., HASH_COMPUTED, TOKEN_ANIM_DONE) to represent those asynchronous steps and animations. Parallel UI flags (like explain visible) are represented as events rather than separate orthogonal substates in this single-state FSM."
}