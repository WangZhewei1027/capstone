{
  "topic": "Linear Search Interactive",
  "description": "Models the interactive states of a linear-search visualization web app: building/shuffling the array, editing cells, stepping comparisons, running auto-play, and completion (found / not found).",
  "states": [
    {
      "name": "idle",
      "onEnter": "setExplanation/renderArray/updateBadges/stopAuto",
      "onExit": null,
      "on": {
        "STEP": "comparing",
        "PLAY": "running",
        "PLAY_TOGGLE": "running",
        "START_AUTO": "running",
        "FILL_RANDOM": "idle",
        "SHUFFLE": "idle",
        "RESET_FULL": "idle",
        "RESET_SOFT": "idle",
        "TARGET_INPUT": "idle",
        "SIZE_CHANGE": "idle",
        "SPEED_CHANGE": "idle",
        "EDIT": "editing",
        "KEY_STEP": "comparing",
        "KEY_PLAY": "running"
      }
    },
    {
      "name": "running",
      "onEnter": "startAuto (setInterval / set aria-pressed true)",
      "onExit": "stopAuto (clearInterval / set aria-pressed false)",
      "on": {
        "INTERVAL_TICK": "comparing",
        "STEP": "comparing",
        "PLAY": "idle",
        "PLAY_TOGGLE": "idle",
        "STOP_AUTO": "idle",
        "SPEED_CHANGE": "running",
        "RESET_FULL": "idle",
        "RESET_SOFT": "idle",
        "EDIT": "editing",
        "KEY_STEP": "comparing",
        "KEY_PLAY": "idle"
      }
    },
    {
      "name": "comparing",
      "onEnter": "step (increment currentIndex, increment comparisons, updateBadges, updateCells, moveMagnifierTo, compare values)",
      "onExit": null,
      "on": {
        "COMPARE_MATCH": "found",
        "COMPARE_NO_MATCH_NOT_END": "idle",
        "COMPARE_NO_MATCH_NOT_END_RUNNING": "running",
        "COMPARE_NO_MATCH_END": "not_found",
        "STOP_AUTO": "idle",
        "RESET_FULL": "idle",
        "EDIT": "editing"
      }
    },
    {
      "name": "found",
      "onEnter": "markMatch/setResult('found')/stopAuto (set finished currentIndex -2)/updateBadges/setExplanation",
      "onExit": null,
      "on": {
        "RESET_FULL": "idle",
        "RESET_SOFT": "idle",
        "FILL_RANDOM": "idle",
        "SHUFFLE": "idle",
        "EDIT": "editing",
        "TARGET_INPUT": "found"
      }
    },
    {
      "name": "not_found",
      "onEnter": "setResult('not-found')/stopAuto (set finished currentIndex -2)/updateBadges/setExplanation",
      "onExit": null,
      "on": {
        "RESET_FULL": "idle",
        "RESET_SOFT": "idle",
        "FILL_RANDOM": "idle",
        "SHUFFLE": "idle",
        "EDIT": "editing"
      }
    },
    {
      "name": "editing",
      "onEnter": "editCell (prompt user, update arr)/renderArray/setExplanation",
      "onExit": "renderArray/updateBadges",
      "on": {
        "EDIT_DONE": "idle",
        "RESET_FULL": "idle",
        "RESET_SOFT": "idle"
      }
    }
  ],
  "events": [
    "INIT",
    "SIZE_CHANGE",
    "FILL_RANDOM",
    "SHUFFLE",
    "RESET_FULL",
    "RESET_SOFT",
    "TARGET_INPUT",
    "STEP",
    "INTERVAL_TICK",
    "PLAY",
    "PLAY_TOGGLE",
    "START_AUTO",
    "STOP_AUTO",
    "EDIT",
    "EDIT_DONE",
    "SPEED_CHANGE",
    "WINDOW_RESIZE",
    "KEY_STEP",
    "KEY_PLAY",
    "COMPARE_MATCH",
    "COMPARE_NO_MATCH_NOT_END",
    "COMPARE_NO_MATCH_NOT_END_RUNNING",
    "COMPARE_NO_MATCH_END"
  ],
  "notes": "Conditional transitions: STEP in idle will only progress to 'comparing' if a target is present (otherwise idle and a warning explanation is shown). The comparing state's onEnter executes the step() logic which immediately determines the outcome and routes to either 'found' (COMPARE_MATCH), 'not_found' (COMPARE_NO_MATCH_END) or back to 'idle' / 'running' (COMPARE_NO_MATCH_NOT_END or COMPARE_NO_MATCH_NOT_END_RUNNING) depending on whether auto-run (running) is active and whether the end of the array was reached. 'running' maps to periodic INTERVAL_TICK events that trigger comparing. 'editing' is synchronous (prompt) then returns to idle. UI side-effects invoked by states reference implementation functions: init, startAuto, stopAuto, step, renderArray, updateBadges, setExplanation, moveMagnifierTo, markVisited, markMatch, setResult, updateCells. Window resize triggers position refresh (moveMagnifierTo) but does not change logical state. The 'found' and 'not_found' states represent the finished state (currentIndex set to -2) and disable further automatic stepping until reset."
}