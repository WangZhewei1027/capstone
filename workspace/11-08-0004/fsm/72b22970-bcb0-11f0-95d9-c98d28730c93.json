{
  "topic": "Interactive Application",
  "description": "Finite State Machine modeling the interactive singly linked list visualization: node CRUD, drag-reorder, traversal (play/step/pause), and visual animations/feedback.",
  "states": [
    {
      "name": "idle_empty",
      "onEnter": "render / updateStatus / hidePointer",
      "on": {
        "ADD_HEAD_CLICK": "inserting_head",
        "ADD_TAIL_CLICK": "inserting_tail",
        "INSERT_AFTER_CLICK": "idle_empty",
        "DELETE_CLICK": "idle_empty",
        "CLEAR_CLICK": "confirming_clear",
        "PLAY_CLICK": "idle_empty",
        "STEP_CLICK": "idle_empty",
        "SPEED_CHANGE": "idle_empty",
        "DRAG_START": "dragging"
      }
    },
    {
      "name": "idle_populated",
      "onEnter": "render / updateStatus",
      "on": {
        "ADD_HEAD_CLICK": "inserting_head",
        "ADD_TAIL_CLICK": "inserting_tail",
        "INSERT_AFTER_CLICK": "inserting_after",
        "DELETE_CLICK": "deleting",
        "CLEAR_CLICK": "confirming_clear",
        "PLAY_CLICK": "traversing",
        "PAUSE_CLICK": "idle_populated",
        "STEP_CLICK": "idle_populated",
        "SPEED_CHANGE": "idle_populated",
        "DRAG_START": "dragging",
        "NODE_KEY_ENTER": "idle_populated",
        "DRAG_DROP": "idle_populated"
      }
    },
    {
      "name": "traversing",
      "onEnter": "startTraversal",
      "onExit": "stopTraversal",
      "on": {
        "PAUSE_CLICK": "idle_populated",
        "STEP_CLICK": "idle_populated",
        "SPEED_CHANGE": "traversing",
        "TRAVERSAL_COMPLETE": "idle_populated",
        "DRAG_START": "dragging",
        "DRAG_DROP": "idle_populated",
        "NODE_KEY_ENTER": "idle_populated"
      }
    },
    {
      "name": "dragging",
      "onEnter": "setDragIndex",
      "onExit": "clearDragIndex",
      "on": {
        "DRAG_DROP": "idle_populated",
        "DRAG_END": "idle_populated",
        "DRAG_CANCEL": "idle_populated",
        "PAUSE_CLICK": "dragging",
        "SPEED_CHANGE": "dragging"
      }
    },
    {
      "name": "inserting_head",
      "onEnter": "addNodeAtHead / render / markInserted",
      "on": {
        "DONE": "idle_populated"
      }
    },
    {
      "name": "inserting_tail",
      "onEnter": "addNodeAtTail / render / markInserted",
      "on": {
        "DONE": "idle_populated"
      }
    },
    {
      "name": "inserting_after",
      "onEnter": "insertAfter (index param) / render / markInserted",
      "on": {
        "DONE": "idle_populated",
        "INVALID_INDEX": "idle_populated"
      }
    },
    {
      "name": "deleting",
      "onEnter": "deleteAt (index param) / playDeleteAnimation",
      "onExit": "render",
      "on": {
        "DELETE_COMPLETE": "idle_populated",
        "DELETE_COMPLETE_EMPTY": "idle_empty",
        "INVALID_INDEX": "idle_populated"
      }
    },
    {
      "name": "confirming_clear",
      "onEnter": "promptConfirmClear",
      "on": {
        "CLEAR_CONFIRM": "cleared",
        "CLEAR_CANCEL": "idle_populated",
        "CLEAR_CANCEL_EMPTY": "idle_empty"
      }
    },
    {
      "name": "cleared",
      "onEnter": "clearAll / render",
      "on": {
        "DONE": "idle_empty"
      }
    }
  ],
  "events": [
    "ADD_HEAD_CLICK",
    "ADD_TAIL_CLICK",
    "INSERT_AFTER_CLICK",
    "DELETE_CLICK",
    "CLEAR_CLICK",
    "PLAY_CLICK",
    "PAUSE_CLICK",
    "STEP_CLICK",
    "SPEED_CHANGE",
    "DRAG_START",
    "DRAG_DROP",
    "DRAG_END",
    "DRAG_CANCEL",
    "NODE_KEY_ENTER",
    "TRAVERSAL_COMPLETE",
    "DELETE_COMPLETE",
    "DELETE_COMPLETE_EMPTY",
    "CLEAR_CONFIRM",
    "CLEAR_CANCEL",
    "CLEAR_CANCEL_EMPTY",
    "DONE",
    "INVALID_INDEX"
  ],
  "notes": "State machine abstracts synchronous DOM actions and asynchronous animations/timers used in the implementation. Concrete actions mapped to onEnter/onExit correspond to functions in the code: render, updateStatus, addNodeAtHead, addNodeAtTail, insertAfter, deleteAt, clearAll, startTraversal, stopTraversal, stepTraversal, markInserted, playDeleteAnimation, setDragIndex, clearDragIndex, promptConfirmClear, highlightNode, movePointerToNode. Transitions related to insertion/deletion that have visual animations are modeled as transient states (inserting_*, deleting) that perform animation/timers and then emit completion events (DONE / DELETE_COMPLETE / DELETE_COMPLETE_EMPTY). The real implementation uses setTimeout and synchronous confirm(); those are represented here as the originating state's onEnter actions leading to the appropriate completion event. Traversal speed changes restart the traversal timer in the real code; here that behavior is represented by the SPEED_CHANGE event while in traversing. The empty vs populated distinction is modeled explicitly (idle_empty vs idle_populated). Dragging is modeled as a transient interaction state; in the real app drag may overlap with traversal, but this FSM treats dragging as a distinct state that returns to idle_populated (drop stops traversal in code)."
}