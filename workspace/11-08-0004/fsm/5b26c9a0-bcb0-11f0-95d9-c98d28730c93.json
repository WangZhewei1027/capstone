{
  "topic": "Interactive Application",
  "description": "Finite State Machine for the Hash Table â€” Separate Chaining interactive demo. Models user interactions (insert/search/delete/clear/resize/speed), animations (token movement, bucket/node highlighting, removal), data updates, and preloading of demo data.",
  "states": [
    {
      "name": "preloading",
      "onEnter": "preloadDemoKeys (async: push demo keys into state.table and renderChain for each)",
      "onExit": "announceDemoComplete",
      "on": {
        "PRELOAD_DONE": "idle"
      }
    },
    {
      "name": "idle",
      "onEnter": "announceReady (set status text); ensure buttons enabled; focusInput",
      "onExit": "clearTransientHighlights",
      "on": {
        "CLICK_INSERT": "inserting",
        "ENTER_KEY": "inserting",
        "CLICK_SEARCH": "searching",
        "CLICK_DELETE": "deleting",
        "CLICK_CLEAR": "clearing",
        "SIZE_INPUT": "idle",
        "SIZE_CHANGE": "resizing",
        "SPEED_CHANGE": "idle",
        "INVALID_INPUT": "idle",
        "PRELOAD_STARTED": "preloading"
      }
    },
    {
      "name": "inserting",
      "onEnter": "validateInputAndComputeHash; if invalid -> emit INVALID_INPUT; else disableInsertBtn; announce hash and insertion; animateInsertVisual(text, targetBucketIdx, callback emits INSERT_DONE)",
      "onExit": "enableInsertBtn; renderChain(targetBucketIdx) (already done by animation callback); focusInput",
      "on": {
        "INSERT_DONE": "idle",
        "INVALID_INPUT": "idle",
        "ANIMATION_FAILED": "idle"
      }
    },
    {
      "name": "searching",
      "onEnter": "validateInputAndComputeHash; if invalid -> emit INVALID_INPUT; else disableSearchBtn; announce hash and start visualizeSearch(key) (async). visualizeSearch will emit SEARCH_RESULT_FOUND or SEARCH_RESULT_NOT_FOUND when done",
      "onExit": "enableSearchBtn; clearNodeHighlights; focusInput",
      "on": {
        "SEARCH_RESULT_FOUND": "idle",
        "SEARCH_RESULT_NOT_FOUND": "idle",
        "INVALID_INPUT": "idle"
      }
    },
    {
      "name": "deleting",
      "onEnter": "validateInputAndComputeHash; if invalid -> emit INVALID_INPUT; else disableDeleteBtn; announce and start visualizeSearch(key) (async). If visualizeSearch returns found -> animate removal (removing class), wait, remove from state.table, renderChain, announce; then emit DELETE_REMOVED. If not found emit DELETE_NOT_FOUND.",
      "onExit": "enableDeleteBtn; clearTransientHighlights; focusInput",
      "on": {
        "DELETE_REMOVED": "idle",
        "DELETE_NOT_FOUND": "idle",
        "INVALID_INPUT": "idle"
      }
    },
    {
      "name": "clearing",
      "onEnter": "initTable(state.size) (clear table and render buckets); announce 'Table cleared.'",
      "onExit": "focusInput",
      "on": {
        "CLEAR_DONE": "idle",
        "CLEAR_IMMEDIATE": "idle"
      }
    },
    {
      "name": "resizing",
      "onEnter": "on sizeRange change: parse new size -> initTable(newSize) (rebuild/clear table); update sizeVal; announce table created with new size",
      "onExit": "focusInput",
      "on": {
        "RESIZE_DONE": "idle"
      }
    }
  ],
  "events": [
    "PRELOAD_STARTED",
    "PRELOAD_DONE",
    "CLICK_INSERT",
    "ENTER_KEY",
    "CLICK_SEARCH",
    "CLICK_DELETE",
    "CLICK_CLEAR",
    "SIZE_INPUT",
    "SIZE_CHANGE",
    "SPEED_CHANGE",
    "INVALID_INPUT",
    "INSERT_DONE",
    "ANIMATION_FAILED",
    "SEARCH_RESULT_FOUND",
    "SEARCH_RESULT_NOT_FOUND",
    "DELETE_REMOVED",
    "DELETE_NOT_FOUND",
    "CLEAR_DONE",
    "CLEAR_IMMEDIATE",
    "RESIZE_DONE"
  ],
  "notes": "This FSM is a high-level model of the application's interactive behaviors. Many visual and timing details are implemented as asynchronous actions invoked from onEnter handlers (e.g., animateInsertVisual, visualizeSearch). The code disables relevant buttons during async operations (inserting/searching/deleting) and re-enables them on exit. visualizeSearch internally performs bucket highlighting, per-node searching (searching class), marking found (found class) or notfound (notfound class) and returns a result that drives SEARCH_RESULT_* events. animateInsertVisual produces an animation and appends the node to the target chain before emitting INSERT_DONE. Clearing and resizing rebuild the table synchronously in the original code; they are represented here as transient states that immediately return to idle (CLEAR_IMMEDIATE/RESIZE_DONE). SPEED_CHANGE updates animation durations but doesn't change main interaction state. Events like INVALID_INPUT represent attempts with empty input and result in remaining in idle while announcing an error."
}