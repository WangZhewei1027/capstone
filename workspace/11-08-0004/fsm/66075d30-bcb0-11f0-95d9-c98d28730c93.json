{
  "topic": "Two Pointers Interactive Module",
  "description": "Models the interactive states and transitions of a two-pointers visualization: editing/generating input, stepping/comparing pairs, running animations (run/auto), pointer movement, and completion (found / not found).",
  "states": [
    {
      "name": "idle",
      "onEnter": "RESET_STATE (resetState) + UPDATE_POINTERS (updatePointers)",
      "on": {
        "CLICK_STEP": "comparing",
        "KEY_STEP": "comparing",
        "CLICK_RUN": "run",
        "KEY_RUN": "run",
        "CLICK_AUTO": "autoplay",
        "KEY_AUTO": "autoplay",
        "CLICK_GENERATE": "generating",
        "CLICK_SHUFFLE": "shuffling",
        "ARRAY_CHANGE_INVALID": "invalid_input",
        "ARRAY_CHANGE_VALID": "idle",
        "TARGET_CHANGE": "idle",
        "CLICK_RESET": "idle",
        "WINDOW_RESIZE": "idle"
      }
    },
    {
      "name": "comparing",
      "onEnter": "STEP_ACTION (step) -> performs: increment stepCount, compute sum, UPDATE_POINTERS, SHOW_LOG",
      "onExit": "UPDATE_POINTERS",
      "on": {
        "STEP_FOUND": "found",
        "STEP_MOVED": "idle",
        "STEP_POINTERS_CROSSED": "not_found",
        "STEP_INVALID_ARRAY": "invalid_input"
      }
    },
    {
      "name": "run",
      "onEnter": "START_RUN_LOOP (runAnimated) -> sets running=true, schedules TIMER_TICK",
      "onExit": "STOP_RUN_LOOP (clear autoplayTimer, set running=false)",
      "on": {
        "TIMER_TICK": "run",
        "STEP_FOUND": "found",
        "STEP_POINTERS_CROSSED": "not_found",
        "CLICK_RESET": "idle",
        "CLICK_AUTO": "autoplay",
        "KEY_AUTO": "autoplay",
        "CLICK_STEP": "run",
        "KEY_STEP": "run",
        "KEY_RUN": "run"
      }
    },
    {
      "name": "autoplay",
      "onEnter": "START_AUTOPLAY (toggleAuto -> start loop) + UPDATE_UI_AUTO_ON (update autoBtn text)",
      "onExit": "STOP_AUTOPLAY (clear autoplayTimer) + UPDATE_UI_AUTO_OFF (update autoBtn text)",
      "on": {
        "AUTOPLAY_TICK": "autoplay",
        "STEP_FOUND": "found",
        "STEP_POINTERS_CROSSED": "not_found",
        "CLICK_AUTO": "idle",
        "KEY_AUTO": "idle",
        "CLICK_RESET": "idle",
        "CLICK_RUN": "run",
        "KEY_RUN": "run",
        "CLICK_STEP": "autoplay"
      }
    },
    {
      "name": "generating",
      "onEnter": "GENERATE_RANDOM_ARRAY (generateRandomArray) + RENDER_ARRAY (renderArray) + RESET_STATE + SHOW_LOG('Generated random...')",
      "on": {
        "DONE": "idle"
      }
    },
    {
      "name": "shuffling",
      "onEnter": "SHUFFLE_SORT_ARRAY (shuffleAndSort) + RENDER_ARRAY + RESET_STATE + SHOW_LOG('Shuffled and sorted...')",
      "on": {
        "DONE": "idle"
      }
    },
    {
      "name": "invalid_input",
      "onEnter": "PARSE_ARRAY (parseArrayInput) -> if invalid SHOW_LOG('Invalid numbers...')",
      "on": {
        "ARRAY_CHANGE_VALID": "idle",
        "CLICK_GENERATE": "generating",
        "CLICK_RESET": "idle"
      }
    },
    {
      "name": "found",
      "onEnter": "SET_FOUND (found={left,right}) + HIGHLIGHT_FOUND (accent boxes) + SHOW_LOG('FOUND') + UPDATE_POINTERS",
      "on": {
        "CLICK_STEP": "found",
        "KEY_STEP": "found",
        "CLICK_RUN": "found",
        "KEY_RUN": "found",
        "CLICK_AUTO": "found",
        "CLICK_RESET": "idle"
      }
    },
    {
      "name": "not_found",
      "onEnter": "SET_NOT_FOUND (found=false) + SHOW_LOG('Pointers crossed. No pair found...') + UPDATE_POINTERS",
      "on": {
        "CLICK_STEP": "not_found",
        "CLICK_RUN": "not_found",
        "CLICK_AUTO": "not_found",
        "CLICK_RESET": "idle"
      }
    }
  ],
  "events": [
    "CLICK_STEP",
    "KEY_STEP",
    "CLICK_RUN",
    "KEY_RUN",
    "CLICK_AUTO",
    "KEY_AUTO",
    "CLICK_GENERATE",
    "CLICK_SHUFFLE",
    "ARRAY_CHANGE",
    "ARRAY_CHANGE_VALID",
    "ARRAY_CHANGE_INVALID",
    "TARGET_CHANGE",
    "SPEED_CHANGE",
    "CLICK_RESET",
    "WINDOW_RESIZE",
    "TIMER_TICK",
    "AUTOPLAY_TICK",
    "STEP_FOUND",
    "STEP_MOVED",
    "STEP_POINTERS_CROSSED",
    "STEP_INVALID_ARRAY",
    "DONE"
  ],
  "notes": "Mapping of FSM actions to code: RESET_STATE -> resetState(), RENDER_ARRAY -> renderArray(), UPDATE_POINTERS -> updatePointers(), STEP_ACTION -> step(), START_RUN_LOOP/STOP_RUN_LOOP -> runAnimated() and clearing autoplayTimer, START_AUTOPLAY/STOP_AUTOPLAY -> toggleAuto() and timer control, GENERATE_RANDOM_ARRAY -> generateRandomArray(), SHUFFLE_SORT_ARRAY -> shuffleAndSort(), PARSE_ARRAY -> parseArrayInput(), HIGHLIGHT_FOUND -> inline styling that accents boxes. Timers (autoplayTimer) drive TIMER_TICK/AUTOPLAY_TICK events; transitions from comparing are guarded by runtime conditions (sum === target → STEP_FOUND; left >= right after move → STEP_POINTERS_CROSSED; otherwise STEP_MOVED). UI events (keyboard and button clicks) map to CLICK_/KEY_ events. Some events are internal (STEP_*, TIMER_TICK) and represent outcomes of function logic rather than direct user input."
}