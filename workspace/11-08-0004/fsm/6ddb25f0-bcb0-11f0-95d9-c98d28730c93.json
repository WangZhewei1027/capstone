{
  "topic": "Binary Search Tree â€” Interactive Explorer",
  "description": "Models the interactive states of a BST visualization UI: insertion, search (comparison path), deletion, traversal animations, and UI commands (reset/clear/sample/clear-highlights). Captures animation-driven busy states and transitions initiated by button clicks, key presses, node clicks, and SVG background clicks.",
  "states": [
    {
      "name": "idle",
      "onEnter": "updateStatus",
      "on": {
        "INSERT_REQUEST": "inserting",
        "INSERT_RANDOM_REQUEST": "inserting",
        "SEARCH_REQUEST": "searching",
        "DELETE_REQUEST": "deleting",
        "TRAVERSE_REQUEST": "traversing",
        "RESET_REQUEST": "idle",
        "CLEAR_REQUEST": "idle",
        "SAMPLE_LOAD_REQUEST": "idle",
        "CLEAR_HIGHLIGHTS": "idle",
        "SVG_BG_CLICK": "idle",
        "KEY_R_PRESSED": "inserting",
        "KEY_C_PRESSED": "idle"
      }
    },
    {
      "name": "inserting",
      "onEnter": "animateInsert (performs path comparisons, calls tree.insert, drawTree, flashStatus)",
      "onExit": "updateStatus",
      "on": {
        "INSERT_SUCCESS": "idle",
        "INSERT_DUPLICATE": "idle",
        "ANIMATION_INTERRUPT": "idle"
      }
    },
    {
      "name": "searching",
      "onEnter": "animateSearch (calls tree.findPath, animatePath, flashStatus)",
      "onExit": "clearHighlights",
      "on": {
        "SEARCH_FOUND": "idle",
        "SEARCH_NOT_FOUND": "idle",
        "ANIMATION_INTERRUPT": "idle"
      }
    },
    {
      "name": "deleting",
      "onEnter": "animateDelete (mark removing class, sleep, tree.delete, drawTree, flashStatus)",
      "onExit": "updateStatus",
      "on": {
        "DELETE_SUCCESS": "idle",
        "DELETE_NOT_FOUND": "idle",
        "ANIMATION_INTERRUPT": "idle"
      }
    },
    {
      "name": "traversing",
      "onEnter": "animateTraversal (compute order, animate visiting nodes, flashStatus with results)",
      "onExit": "clearHighlights",
      "on": {
        "TRAVERSE_COMPLETE": "idle",
        "ANIMATION_INTERRUPT": "idle"
      }
    }
  ],
  "events": [
    "INSERT_REQUEST",
    "INSERT_RANDOM_REQUEST",
    "INSERT_SUCCESS",
    "INSERT_DUPLICATE",
    "SEARCH_REQUEST",
    "SEARCH_FOUND",
    "SEARCH_NOT_FOUND",
    "DELETE_REQUEST",
    "DELETE_SUCCESS",
    "DELETE_NOT_FOUND",
    "TRAVERSE_REQUEST",
    "TRAVERSE_COMPLETE",
    "RESET_REQUEST",
    "CLEAR_REQUEST",
    "SAMPLE_LOAD_REQUEST",
    "CLEAR_HIGHLIGHTS",
    "SVG_BG_CLICK",
    "KEY_R_PRESSED",
    "KEY_C_PRESSED",
    "ANIMATION_INTERRUPT",
    "ANIMATION_DONE"
  ],
  "notes": "State machine models intended serialized behavior: user-initiated commands (insert/search/delete/traverse) each enter a dedicated animating state that runs an async animation function (animateInsert, animateSearch, animateDelete, animateTraversal). Each animation sets visual classes (active, found, removing) and calls drawTree / flashStatus and then returns to idle. UI actions that immediately mutate the tree without multi-step animation (reset, clear, load sample) are treated as instant transitions back to idle while performing drawTree and flashStatus. clearHighlights (via button, svg background click, or 'c' key) clears node/edge highlight classes and stays in idle. The real implementation does not strictly block concurrent events, but this FSM assumes operations are serialized: events received during animating states are modeled as ANIMATION_INTERRUPT or ignored; implementations should queue or ignore input while animating to avoid overlapping animations. onEnter actions reference concrete functions in the source code (animateInsert, animateSearch, animateDelete, animateTraversal, drawTree, clearHighlights, flashStatus, updateStatus)."
}