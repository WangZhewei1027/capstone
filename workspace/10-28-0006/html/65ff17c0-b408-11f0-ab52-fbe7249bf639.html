<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Sets: Union, Intersection, Difference</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f4f4f4;
        }
        .container {
            display: flex;
            justify-content: space-around;
            padding: 24px;
            width: 100%;
            max-width: 900px;
        }
        .set {
            padding: 16px;
            border: 2px dashed #007BFF;
            border-radius: 8px;
            background-color: #fff;
            min-width: 180px;
            text-align: center;
        }
        .result {
            margin: 0 32px;
            padding: 16px;
            border: 2px solid #6c757d;
            background-color: #e9ecef;
            text-align: center;
            min-width: 200px;
        }
        .buttons {
            margin: 16px;
        }
        button {
            margin: 16px 8px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }
        button:hover {
            background-color: #007BFF;
            color: white;
        }
        .draggable {
            display: inline-block;
            padding: 8px;
            margin: 4px;
            cursor: grab;
            background-color: #fff;
            border: 1px solid #007BFF;
            border-radius: 4px;
        }
    </style>
</head>
<body>

<h1>Understanding Sets</h1>
<p>Drag the elements to set A or set B, and then calculate the operations!</p>

<div class="container">
    <div class="set" id="setA">
        <h3>Set A</h3>
        <div id="a1" class="draggable" draggable="true">1</div>
        <div id="a2" class="draggable" draggable="true">2</div>
        <div id="a3" class="draggable" draggable="true">3</div>
        <div id="a4" class="draggable" draggable="true">4</div>
    </div>

    <div class="result" id="resultArea">
        <h3>Result</h3>
        <div id="result"></div>
    </div>

    <div class="set" id="setB">
        <h3>Set B</h3>
        <div id="b1" class="draggable" draggable="true">3</div>
        <div id="b2" class="draggable" draggable="true">4</div>
        <div id="b3" class="draggable" draggable="true">5</div>
        <div id="b4" class="draggable" draggable="true">6</div>
    </div>
</div>

<div class="buttons">
    <button onclick="performOperation('union')">Union</button>
    <button onclick="performOperation('intersection')">Intersection</button>
    <button onclick="performOperation('difference')">Difference</button>
    <button onclick="reset()">Reset</button>
</div>

<script>
    let setA = new Set();
    let setB = new Set();

    document.querySelectorAll('.draggable').forEach(item => {
        item.addEventListener('dragstart', dragStart);
        item.addEventListener('dragend', dragEnd);
    });

    const dragStart = (e) => {
        e.dataTransfer.setData('text/plain', e.target.id);
        setTimeout(() => {
            e.target.style.display = 'none';
        }, 0);
    };

    const dragEnd = (e) => {
        e.target.style.display = 'block';
    };

    const setTarget = (event) => {
        if (event.target.id === 'setA' || event.target.id === 'setB') {
            const id = event.dataTransfer.getData('text/plain');
            const draggedElement = document.getElementById(id);
            event.target.appendChild(draggedElement);
            event.preventDefault();

            if (event.target.id === 'setA') {
                setA.add(parseInt(draggedElement.innerText));
            } else if (event.target.id === 'setB') {
                setB.add(parseInt(draggedElement.innerText));
            }
        }
    };

    const reset = () => {
        setA.clear();
        setB.clear();
        document.getElementById('result').innerHTML = '';
        document.querySelectorAll('.set').forEach(set => set.innerHTML = set.dataset.initial);
    };

    const performOperation = (operation) => {
        const union = new Set([...setA, ...setB]);
        const intersection = new Set([...setA].filter(x => setB.has(x)));
        const difference = new Set([...setA].filter(x => !setB.has(x)));

        let result = [];
        if (operation === 'union') {
            result = Array.from(union);
        } else if (operation === 'intersection') {
            result = Array.from(intersection);
        } else if (operation === 'difference') {
            result = Array.from(difference);
        }

        displayResult(result);
    };

    const displayResult = (result) => {
        const resultArea = document.getElementById('result');
        resultArea.innerHTML = result.length ? result.join(', ') : 'No elements';
        resultArea.classList.add('animation');
        setTimeout(() => {
            resultArea.classList.remove('animation');
        }, 1000);
    };

    document.getElementById('setA').addEventListener('dragover', (event) => event.preventDefault());
    document.getElementById('setA').addEventListener('drop', setTarget);
    document.getElementById('setB').addEventListener('dragover', (event) => event.preventDefault());
    document.getElementById('setB').addEventListener('drop', setTarget);

    reset(); // Initialize sets on load
</script>

</body>
</html>