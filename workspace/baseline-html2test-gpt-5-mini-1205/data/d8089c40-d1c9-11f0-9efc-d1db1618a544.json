{
  "id": "d8089c40-d1c9-11f0-9efc-d1db1618a544",
  "timestamp": "2025-12-05T11:04:59.142Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Array",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Array Playground — Interactive JavaScript Array Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    body { font-family: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial; margin: 18px; color:#111 }\n    h1 { margin: 0 0 8px 0; font-size: 20px; }\n    .row { display:flex; gap:12px; align-items:center; margin:10px 0; flex-wrap:wrap; }\n    .col { display:flex; flex-direction:column; gap:8px; }\n    input[type=\"text\"], textarea, select { font-family: inherit; font-size: 13px; padding:6px 8px; border:1px solid #ccc; border-radius:6px; }\n    button { background:#0366d6; color:white; border:0; padding:7px 10px; border-radius:6px; cursor:pointer; }\n    button.secondary { background:#6c757d; }\n    button.small { padding:6px 8px; font-size:13px; }\n    pre { background:#f6f8fa; padding:10px; border-radius:6px; overflow:auto; max-height:220px; }\n    .panel { border:1px solid #e1e4e8; padding:12px; border-radius:8px; background:white; }\n    label { font-size:12px; color:#333; }\n    table { border-collapse:collapse; margin-top:8px; width:100%; }\n    td, th { border:1px solid #eee; padding:6px 8px; font-family: monospace; font-size:13px; }\n    .controls { display:flex; gap:8px; flex-wrap:wrap; }\n    .mutate { background:#0b6623; }\n    .result { background:#333; }\n    .explain { color:#333; font-size:13px; }\n    .small-note { font-size:12px; color:#555; }\n    .flex-between { display:flex; justify-content:space-between; align-items:center; gap:12px; }\n    .foot { font-size:12px; color:#444; margin-top:12px; }\n  </style>\n</head>\n<body>\n  <h1>Array Playground — Interactive JavaScript Array Demo</h1>\n  <div class=\"panel\">\n    <div class=\"flex-between\">\n      <div>\n        <label>Create array (enter JSON or comma-separated values):</label><br>\n        <input id=\"arrayInput\" type=\"text\" style=\"width:420px\" placeholder='e.g. [1,2,3]  or  a,b,3,true,{\"x\":1}'>\n        <button id=\"createBtn\" class=\"small\">Create</button>\n        <button id=\"samplesBtn\" class=\"small secondary\">Load Samples</button>\n      </div>\n      <div>\n        <label>Samples:</label><br>\n        <select id=\"sampleSelect\">\n          <option value=\"numbers\">Numbers [1,2,3,4]</option>\n          <option value=\"strings\">Strings [\"a\",\"b\",\"c\"]</option>\n          <option value=\"mixed\">Mixed [1,\"two\",true,null]</option>\n          <option value=\"nested\">Nested [[1,2],[3,4]]</option>\n          <option value=\"objects\">Objects [{id:1},{id:2}]</option>\n        </select>\n        <button id=\"loadSample\" class=\"small\">Load</button>\n      </div>\n    </div>\n\n    <div style=\"margin-top:10px;\" class=\"row\">\n      <div style=\"flex:1\" class=\"panel\">\n        <strong>Current array</strong>\n        <div id=\"arrayView\" style=\"margin-top:8px;\"></div>\n        <div style=\"margin-top:8px;\">\n          <button id=\"copyBtn\" class=\"small\">Copy JSON</button>\n          <button id=\"cloneBtn\" class=\"small secondary\">Clone (shallow)</button>\n          <button id=\"clearBtn\" class=\"small secondary\">Clear</button>\n        </div>\n      </div>\n\n      <div style=\"width:480px\" class=\"panel\">\n        <strong>Quick operations</strong>\n        <div class=\"row\" style=\"margin-top:8px;\">\n          <input id=\"valueInput\" type=\"text\" placeholder='value e.g. 42 or \"x\" or {\"a\":1}' style=\"width:220px;\">\n          <button id=\"pushBtn\" class=\"small mutate\">push()</button>\n          <button id=\"popBtn\" class=\"small mutate\">pop()</button>\n          <button id=\"shiftBtn\" class=\"small mutate\">shift()</button>\n          <button id=\"unshiftBtn\" class=\"small mutate\">unshift()</button>\n        </div>\n\n        <div style=\"margin-top:8px;\">\n          <label>splice(start, deleteCount, ...items)</label>\n          <div class=\"row\">\n            <input id=\"spliceStart\" type=\"text\" placeholder=\"start\" style=\"width:60px;\">\n            <input id=\"spliceDel\" type=\"text\" placeholder=\"deleteCount\" style=\"width:60px;\">\n            <input id=\"spliceItems\" type=\"text\" placeholder='items e.g. 7,8 or [\"x\"]' style=\"width:180px;\">\n            <button id=\"spliceBtn\" class=\"small mutate\">splice()</button>\n          </div>\n        </div>\n\n        <div style=\"margin-top:8px;\">\n          <label>slice(start, end)</label>\n          <div class=\"row\">\n            <input id=\"sliceStart\" type=\"text\" placeholder=\"start\" style=\"width:80px;\">\n            <input id=\"sliceEnd\" type=\"text\" placeholder=\"end\" style=\"width:80px;\">\n            <button id=\"sliceBtn\" class=\"small result\">slice()</button>\n            <button id=\"applySlice\" class=\"small mutate\">apply result</button>\n          </div>\n        </div>\n\n        <div style=\"margin-top:8px;\">\n          <label>map / filter / reduce examples</label>\n          <div class=\"row\">\n            <button id=\"mapDouble\" class=\"small\">map(x =&gt; x*2)</button>\n            <button id=\"filterEven\" class=\"small\">filter(x =&gt; x % 2 === 0)</button>\n            <button id=\"reduceSum\" class=\"small\">reduce((a,b)=>a+b,0)</button>\n            <button id=\"applyResult\" class=\"small mutate\">apply last result</button>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div style=\"margin-top:12px;\" class=\"row\">\n      <div style=\"flex:1\" class=\"panel\">\n        <strong>Array inspector</strong>\n        <div id=\"itemsTable\"></div>\n      </div>\n\n      <div style=\"width:520px\" class=\"panel\">\n        <strong>Results & code</strong>\n        <div id=\"resultArea\" style=\"margin-top:8px;\"><em class=\"small-note\">No operation yet.</em></div>\n        <pre id=\"codeArea\"></pre>\n      </div>\n    </div>\n\n    <div style=\"margin-top:12px;\" class=\"panel\">\n      <strong>Custom JS (sandboxed-ish)</strong>\n      <div class=\"small-note\">You can access the current array via variable arr. Return a value to show it. If you want to replace the current array with the returned value check \"Apply result\". Example: return arr.map(x =&gt; x*2)</div>\n      <textarea id=\"customCode\" rows=\"5\" style=\"width:100%;\"></textarea>\n      <div style=\"margin-top:8px;\" class=\"row\">\n        <button id=\"runCustom\" class=\"small\">Run</button>\n        <label><input type=\"checkbox\" id=\"applyCustom\"> Apply result</label>\n        <button id=\"resetSnap\" class=\"small secondary\">Revert to last saved</button>\n      </div>\n      <div id=\"customResult\" style=\"margin-top:8px;\"></div>\n    </div>\n\n    <div class=\"foot\">\n      Quick references: push/pop/shift/unshift mutate the array. slice/map/filter/reduce return new values. Arrays are objects — assignment copies a reference; use spread [...] or Array.from to clone.\n    </div>\n  </div>\n\n  <script>\n    // Utility helpers\n    function tryParse(value) {\n      // Try JSON parse, fallback to comma-separated tokens parsing\n      if (value === undefined || value === null) return undefined;\n      value = value.trim();\n      if (value === '') return undefined;\n      // If it looks like an array or object -> JSON\n      if (/^[\\[{]/.test(value) || (/^\".*\"$/.test(value) || /^'.*'$/.test(value))) {\n        try { return JSON.parse(value); } catch(e) { /* fallthrough */ }\n      }\n      // single token: try JSON.parse (to get true,false,null,number)\n      try {\n        return JSON.parse(value);\n      } catch(e) {\n        // Try CSV split for multiple values\n        const parts = value.split(',').map(s => s.trim()).filter(s => s !== '');\n        if (parts.length === 1) {\n          // Could be a plain word string -> return as string (without quotes)\n          return parts[0];\n        }\n        return parts.map(p => {\n          try { return JSON.parse(p); } catch(e) { return p; }\n        });\n      }\n    }\n\n    function toDisplay(v) {\n      try { return JSON.stringify(v, null, 2); } catch(e) { return String(v); }\n    }\n\n    // State\n    let arr = [];\n    let lastResult = undefined;\n    let snapshot = null;\n\n    // Elements\n    const arrayInput = document.getElementById('arrayInput');\n    const createBtn = document.getElementById('createBtn');\n    const arrayView = document.getElementById('arrayView');\n    const itemsTable = document.getElementById('itemsTable');\n    const resultArea = document.getElementById('resultArea');\n    const codeArea = document.getElementById('codeArea');\n    const copyBtn = document.getElementById('copyBtn');\n    const cloneBtn = document.getElementById('cloneBtn');\n    const clearBtn = document.getElementById('clearBtn');\n    const samplesBtn = document.getElementById('samplesBtn');\n    const sampleSelect = document.getElementById('sampleSelect');\n    const loadSample = document.getElementById('loadSample');\n\n    const valueInput = document.getElementById('valueInput');\n    const pushBtn = document.getElementById('pushBtn');\n    const popBtn = document.getElementById('popBtn');\n    const shiftBtn = document.getElementById('shiftBtn');\n    const unshiftBtn = document.getElementById('unshiftBtn');\n\n    const spliceStart = document.getElementById('spliceStart');\n    const spliceDel = document.getElementById('spliceDel');\n    const spliceItems = document.getElementById('spliceItems');\n    const spliceBtn = document.getElementById('spliceBtn');\n\n    const sliceStart = document.getElementById('sliceStart');\n    const sliceEnd = document.getElementById('sliceEnd');\n    const sliceBtn = document.getElementById('sliceBtn');\n    const applySlice = document.getElementById('applySlice');\n\n    const mapDouble = document.getElementById('mapDouble');\n    const filterEven = document.getElementById('filterEven');\n    const reduceSum = document.getElementById('reduceSum');\n    const applyResult = document.getElementById('applyResult');\n\n    const customCode = document.getElementById('customCode');\n    const runCustom = document.getElementById('runCustom');\n    const applyCustom = document.getElementById('applyCustom');\n    const customResult = document.getElementById('customResult');\n    const resetSnap = document.getElementById('resetSnap');\n\n    // Render functions\n    function renderArray() {\n      arrayView.innerHTML = '<pre style=\"margin:0; white-space:pre-wrap\">' + toDisplay(arr) + '</pre>';\n      renderItems();\n    }\n\n    function renderItems() {\n      if (!Array.isArray(arr)) {\n        itemsTable.innerHTML = '<div class=\"small-note\">Current value is not an Array.</div>';\n        return;\n      }\n      let html = '<table><thead><tr><th>index</th><th>value</th><th>type</th></tr></thead><tbody>';\n      arr.forEach((v, i) => {\n        let t = Array.isArray(v) ? 'array' : (v === null ? 'null' : typeof v);\n        html += '<tr><td>' + i + '</td><td><pre style=\"margin:0\">' + safeString(v) + '</pre></td><td>' + t + '</td></tr>';\n      });\n      html += '</tbody></table>';\n      itemsTable.innerHTML = html;\n    }\n\n    function safeString(v) {\n      try { return JSON.stringify(v); } catch(e) { return String(v); }\n    }\n\n    function setResult(res, code) {\n      lastResult = res;\n      resultArea.innerHTML = '<strong>Result</strong><div style=\"margin-top:8px\"><pre style=\"margin:0\">' + toDisplay(res) + '</pre></div>';\n      codeArea.innerText = code || '';\n    }\n\n    function setCodeOnly(code) {\n      codeArea.innerText = code || '';\n    }\n\n    // Handlers\n    createBtn.addEventListener('click', () => {\n      const v = tryParse(arrayInput.value);\n      if (Array.isArray(v)) {\n        arr = v;\n      } else if (v === undefined) {\n        alert('Enter an array or comma-separated values. Example: 1,2,3 or [\"a\", \"b\"]');\n        return;\n      } else {\n        // If user typed single token, wrap as array\n        arr = Array.isArray(v) ? v : [v];\n      }\n      snapshot = JSON.parse(JSON.stringify(arr));\n      renderArray();\n      setResult('Array created', 'Created from input');\n    });\n\n    samplesBtn.addEventListener('click', () => {\n      alert('Select a sample from the dropdown and click Load.');\n    });\n\n    loadSample.addEventListener('click', () => {\n      const sel = sampleSelect.value;\n      if (sel === 'numbers') arr = [1,2,3,4];\n      else if (sel === 'strings') arr = ['a','b','c'];\n      else if (sel === 'mixed') arr = [1,'two', true, null];\n      else if (sel === 'nested') arr = [[1,2],[3,4]];\n      else if (sel === 'objects') arr = [{id:1},{id:2}];\n      snapshot = JSON.parse(JSON.stringify(arr));\n      renderArray();\n      setResult('Sample loaded', 'Loaded sample: ' + sel);\n    });\n\n    copyBtn.addEventListener('click', () => {\n      const txt = toDisplay(arr);\n      navigator.clipboard?.writeText(txt).then(() => {\n        setResult('Copied to clipboard', 'JSON copied');\n      }, ()=> {\n        alert('Copy failed');\n      });\n    });\n\n    cloneBtn.addEventListener('click', () => {\n      // Shallow clone\n      const cloned = arr.slice();\n      setResult(cloned, 'const cloned = arr.slice(); // shallow copy');\n    });\n\n    clearBtn.addEventListener('click', () => {\n      if (!confirm('Clear the array? This will set it to []')) return;\n      arr = [];\n      renderArray();\n      setResult('Cleared', 'arr = []');\n    });\n\n    // Quick ops\n    pushBtn.addEventListener('click', () => {\n      const v = tryParse(valueInput.value);\n      if (v === undefined && valueInput.value.trim() === '') {\n        alert('Enter a value to push.');\n        return;\n      }\n      arr.push(v);\n      renderArray();\n      setResult(arr.length, 'arr.push(' + JSON.stringify(v) + '); // new length');\n    });\n\n    popBtn.addEventListener('click', () => {\n      const r = arr.pop();\n      renderArray();\n      setResult(r, 'const popped = arr.pop();');\n    });\n\n    shiftBtn.addEventListener('click', () => {\n      const r = arr.shift();\n      renderArray();\n      setResult(r, 'const shifted = arr.shift();');\n    });\n\n    unshiftBtn.addEventListener('click', () => {\n      const v = tryParse(valueInput.value);\n      if (v === undefined && valueInput.value.trim() === '') {\n        alert('Enter a value to unshift.');\n        return;\n      }\n      arr.unshift(v);\n      renderArray();\n      setResult(arr.length, 'arr.unshift(' + JSON.stringify(v) + '); // new length');\n    });\n\n    spliceBtn.addEventListener('click', () => {\n      const s = spliceStart.value.trim() === '' ? 0 : Number(spliceStart.value);\n      const d = spliceDel.value.trim() === '' ? 0 : Number(spliceDel.value);\n      const items = tryParse(spliceItems.value);\n      const itemsList = Array.isArray(items) ? items : (items === undefined ? [] : [items]);\n      const removed = arr.splice(s, d, ...itemsList);\n      renderArray();\n      setResult({removed, arr}, 'arr.splice(' + s + ', ' + d + ', ' + JSON.stringify(itemsList) + ');');\n    });\n\n    sliceBtn.addEventListener('click', () => {\n      const s = sliceStart.value.trim() === '' ? undefined : Number(sliceStart.value);\n      const e = sliceEnd.value.trim() === '' ? undefined : Number(sliceEnd.value);\n      const res = arr.slice(s, e);\n      setResult(res, 'const res = arr.slice(' + (s===undefined? '' : s) + (e===undefined? '' : ', ' + e) + ');');\n    });\n\n    applySlice.addEventListener('click', () => {\n      if (lastResult === undefined) return alert('No last result to apply.');\n      if (!Array.isArray(lastResult)) return alert('Last result is not an array.');\n      arr = lastResult;\n      renderArray();\n      setResult(arr, 'Applied last result to arr');\n    });\n\n    // map/filter/reduce\n    mapDouble.addEventListener('click', () => {\n      try {\n        const res = arr.map(x => {\n          if (typeof x === 'number') return x*2;\n          return x;\n        });\n        setResult(res, 'const res = arr.map(x => typeof x === \"number\" ? x*2 : x);');\n      } catch (e) {\n        setResult('Error: ' + e.message);\n      }\n    });\n\n    filterEven.addEventListener('click', () => {\n      try {\n        const res = arr.filter(x => typeof x === 'number' && x % 2 === 0);\n        setResult(res, 'const res = arr.filter(x => typeof x === \"number\" && x % 2 === 0);');\n      } catch (e) {\n        setResult('Error: ' + e.message);\n      }\n    });\n\n    reduceSum.addEventListener('click', () => {\n      try {\n        const res = arr.reduce((a,b) => (typeof a === 'number' ? a : 0) + (typeof b === 'number' ? b : 0), 0);\n        setResult(res, 'const res = arr.reduce((a,b)=>a+b,0);');\n      } catch (e) {\n        setResult('Error: ' + e.message);\n      }\n    });\n\n    applyResult.addEventListener('click', () => {\n      if (lastResult === undefined) return alert('No last result.');\n      arr = lastResult;\n      renderArray();\n      setResult(arr, 'Applied last result to arr');\n    });\n\n    // Custom JS runner\n    runCustom.addEventListener('click', () => {\n      const code = customCode.value || 'return arr;';\n      snapshot = JSON.parse(JSON.stringify(arr)); // save snapshot for revert\n      try {\n        // Create a function with arr in scope. This is the simplest local sandbox.\n        // Note: This is not secure for untrusted code. It's for demo purposes.\n        const fn = new Function('arr', '\"use strict\";\\n' + code);\n        const res = fn(arr);\n        customResult.innerHTML = '<pre style=\"margin:0\">' + toDisplay(res) + '</pre>';\n        setCodeOnly('// Custom code executed\\n' + code);\n        lastResult = res;\n        if (applyCustom.checked) {\n          if (Array.isArray(res)) {\n            arr = res;\n            renderArray();\n          } else {\n            if (confirm('Result is not an array. Replace arr anyway?')) {\n              arr = res;\n              renderArray();\n            }\n          }\n        }\n      } catch (e) {\n        customResult.innerHTML = '<div style=\"color:crimson\">Error: ' + (e && e.message) + '</div>';\n      }\n    });\n\n    resetSnap.addEventListener('click', () => {\n      if (snapshot !== null) {\n        arr = JSON.parse(JSON.stringify(snapshot));\n        renderArray();\n        setResult('Reverted', 'Reverted to saved snapshot');\n      } else {\n        alert('No snapshot saved yet. Create or run something to save.');\n      }\n    });\n\n    // small helpers\n    function ensureArrayCheck() {\n      if (!Array.isArray(arr)) {\n        alert('Current value is not an Array.');\n        return false;\n      }\n      return true;\n    }\n\n    // initialize\n    arr = [1,2,3];\n    snapshot = JSON.parse(JSON.stringify(arr));\n    renderArray();\n    setResult('Initial sample [1,2,3]', '// demo start');\n\n    // Extra: keyboard shortcuts for convenience\n    document.addEventListener('keydown', (e) => {\n      if (e.ctrlKey && e.key === 'Enter') {\n        runCustom.click();\n      }\n    });\n\n    // Informational examples in code area\n    codeArea.innerText = [\n      '// Examples you can try in the Custom JS box:',\n      '// return arr.map(x => x * 2);',\n      '// return arr.filter(x => typeof x === \"number\");',\n      '// return arr.reduce((a,b)=>a+b, 0);',\n      '// arr.push(9); return arr; // mutates the array',\n    ].join('\\n');\n\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Array"
    }
  ],
  "topic": "Array",
  "hasFSM": false,
  "hasTest": true
}