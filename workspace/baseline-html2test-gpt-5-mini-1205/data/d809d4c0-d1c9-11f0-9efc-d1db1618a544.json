{
  "id": "d809d4c0-d1c9-11f0-9efc-d1db1618a544",
  "timestamp": "2025-12-05T11:05:16.540Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Set",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>JavaScript Set — Interactive Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    body { font-family: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial; margin: 20px; color:#111; }\n    h1 { margin: 0 0 8px 0; font-size: 20px; }\n    p.lead { margin: 0 0 18px 0; color: #444; }\n    .container { display: grid; grid-template-columns: 360px 1fr; gap:16px; align-items:start; }\n    .card { background:#f9f9fb; border:1px solid #e3e6ea; padding:12px; border-radius:8px; box-shadow: 0 1px 0 rgba(0,0,0,0.02);}\n    label { display:block; margin:8px 0 4px; font-size:13px; color:#333;}\n    input[type=\"text\"], select, textarea { width:100%; padding:8px; border-radius:6px; border:1px solid #d8dbe0; box-sizing:border-box; }\n    button { padding:8px 10px; border-radius:6px; border:1px solid #cbd2da; background: white; cursor:pointer; margin-right:6px; }\n    button.primary { background: linear-gradient(#2774ff,#0b5ed7); color: white; border:0; }\n    .controls { margin-top:10px; }\n    .log { white-space:pre-wrap; font-family: SFMono-Regular, Menlo, Monaco, \"Courier New\", monospace; font-size:13px; background: #fff; border:1px solid #e6e9ef; padding:10px; border-radius:6px; max-height:420px; overflow:auto; }\n    .row { display:flex; gap:8px; align-items:center; }\n    .small { font-size:12px; color:#555; }\n    .badge { background:#eef6ff; color:#0b5ed7; padding:2px 6px; border-radius:999px; font-size:12px; margin-left:6px;}\n    .examples button { margin-bottom:6px; display:block; text-align:left; width:100%; }\n    .muted { color:#666; font-size:13px;}\n    .result-list { margin:8px 0 0 0; padding:8px; border-radius:6px; background:#fff; border:1px dashed #e0e6ef; font-family: monospace; white-space:pre; max-height:180px; overflow:auto;}\n  </style>\n</head>\n<body>\n  <h1>JavaScript Set — Interactive Demo</h1>\n  <p class=\"lead\">Explore ES6 Set basics, uniqueness rules, iteration, conversions, and common set operations (union / intersection / difference). Add values, run examples, and inspect results live.</p>\n\n  <div class=\"container\">\n    <div class=\"card\">\n      <h2 style=\"margin:0 0 8px 0; font-size:16px;\">Set controls</h2>\n\n      <label>Value to add\n        <input id=\"valueInput\" type=\"text\" placeholder='Type: \"hello\", 42, {\"a\":1}, [1,2] — for objects/arrays use valid JSON'/>\n      </label>\n\n      <label>Interpret as\n        <select id=\"typeSelect\">\n          <option value=\"string\">String (default)</option>\n          <option value=\"number\">Number</option>\n          <option value=\"json\">Parse JSON (object/array/number/string)</option>\n        </select>\n      </label>\n\n      <div class=\"controls\">\n        <button id=\"addBtn\" class=\"primary\">Add to Set</button>\n        <button id=\"hasBtn\">Has?</button>\n        <button id=\"deleteBtn\">Delete</button>\n        <button id=\"clearBtn\">Clear Set</button>\n      </div>\n\n      <label style=\"margin-top:12px;\">Live Set state <span class=\"small muted\">(size shown)</span></label>\n      <div id=\"setInfo\" class=\"result-list\">Empty set</div>\n\n      <label style=\"margin-top:10px;\">Actions</label>\n      <div class=\"controls\">\n        <button id=\"iterateBtn\">Show iteration (for..of & forEach)</button>\n        <button id=\"toArrayBtn\">Convert to Array (dedupe example)</button>\n        <button id=\"dedupeBtn\">Dedupe CSV input</button>\n      </div>\n\n      <label style=\"margin-top:12px;\">Dedupe input (comma separated)</label>\n      <input id=\"csvInput\" type=\"text\" placeholder=\"apple, banana, apple, orange\"/>\n\n      <div style=\"margin-top:12px;\">\n        <label class=\"small\">Quick demos</label>\n        <div class=\"examples\">\n          <button id=\"demoUnion\">Union of two sets</button>\n          <button id=\"demoIntersection\">Intersection of two sets</button>\n          <button id=\"demoDifference\">Difference (A \\\\ B)</button>\n          <button id=\"demoObjects\">Objects in Set (by reference)</button>\n          <button id=\"demoWeakSet\">WeakSet note & simple demo</button>\n          <button id=\"demoFromArray\">Create Set from Array (dedupe values)</button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <h2 style=\"margin:0 0 8px 0; font-size:16px;\">Console & explanations</h2>\n      <div id=\"log\" class=\"log\"></div>\n\n      <h3 style=\"margin-top:12px; font-size:15px;\">Short reference</h3>\n      <ul class=\"muted\" style=\"padding-left:18px;\">\n        <li>new Set(iterable) — create a set. Set.prototype.add(value), .has(value), .delete(value), .clear().</li>\n        <li>Sets store unique values using SameValueZero (like ===, but +0 and -0 treated equal and NaN equals NaN).</li>\n        <li>Objects are unique by reference (two identical-looking objects are different).</li>\n        <li>Convert: Array.from(mySet) or [...mySet]. To make union/intersection/diff use Set + spread/filter.</li>\n      </ul>\n    </div>\n  </div>\n\n  <script>\n    // Simple helper to pretty-print JS values\n    function pretty(v) {\n      try {\n        return JSON.stringify(v, replacer, 2);\n      } catch (e) {\n        return String(v);\n      }\n      function replacer(k, val) {\n        if (typeof val === 'function') return '<Function>';\n        return val;\n      }\n    }\n\n    // App state: a single Set we operate on\n    const mySet = new Set();\n\n    // Elements\n    const valueInput = document.getElementById('valueInput');\n    const typeSelect = document.getElementById('typeSelect');\n    const addBtn = document.getElementById('addBtn');\n    const hasBtn = document.getElementById('hasBtn');\n    const deleteBtn = document.getElementById('deleteBtn');\n    const clearBtn = document.getElementById('clearBtn');\n    const setInfo = document.getElementById('setInfo');\n    const logEl = document.getElementById('log');\n    const iterateBtn = document.getElementById('iterateBtn');\n    const toArrayBtn = document.getElementById('toArrayBtn');\n    const dedupeBtn = document.getElementById('dedupeBtn');\n    const csvInput = document.getElementById('csvInput');\n\n    // Demo buttons\n    const demoUnion = document.getElementById('demoUnion');\n    const demoIntersection = document.getElementById('demoIntersection');\n    const demoDifference = document.getElementById('demoDifference');\n    const demoObjects = document.getElementById('demoObjects');\n    const demoWeakSet = document.getElementById('demoWeakSet');\n    const demoFromArray = document.getElementById('demoFromArray');\n\n    // Utility: parse input according to selected type\n    function parseInput(text, type) {\n      if (type === 'string') return text;\n      if (type === 'number') {\n        const n = Number(text);\n        if (Number.isNaN(n)) throw new Error('Not a valid number');\n        return n;\n      }\n      if (type === 'json') {\n        try {\n          return JSON.parse(text);\n        } catch (e) {\n          throw new Error('Invalid JSON');\n        }\n      }\n      return text;\n    }\n\n    function log(msg) {\n      const time = new Date().toLocaleTimeString();\n      logEl.textContent = `[${time}] ${msg}\\n\\n` + logEl.textContent;\n    }\n\n    function updateSetInfo() {\n      if (mySet.size === 0) {\n        setInfo.textContent = 'Empty set';\n        return;\n      }\n      // display elements in insertion order\n      const items = [];\n      for (const v of mySet) {\n        items.push(pretty(v));\n      }\n      setInfo.textContent = `size = ${mySet.size}\\n\\n` + items.map((it, i) => `${i+1}. ${it}`).join('\\n\\n');\n    }\n\n    addBtn.addEventListener('click', () => {\n      const txt = valueInput.value.trim();\n      const type = typeSelect.value;\n      try {\n        const val = parseInput(txt, type);\n        mySet.add(val);\n        log(`Added value to Set: ${pretty(val)} (type: ${typeof val})`);\n        updateSetInfo();\n      } catch (e) {\n        log('Error: ' + e.message);\n        alert('Error: ' + e.message);\n      }\n    });\n\n    hasBtn.addEventListener('click', () => {\n      const txt = valueInput.value.trim();\n      const type = typeSelect.value;\n      try {\n        const val = parseInput(txt, type);\n        const exists = mySet.has(val);\n        log(`Has? ${pretty(val)} => ${exists}`);\n      } catch (e) {\n        log('Error: ' + e.message);\n        alert('Error: ' + e.message);\n      }\n    });\n\n    deleteBtn.addEventListener('click', () => {\n      const txt = valueInput.value.trim();\n      const type = typeSelect.value;\n      try {\n        const val = parseInput(txt, type);\n        const removed = mySet.delete(val);\n        log(`Delete ${pretty(val)} => ${removed}`);\n        updateSetInfo();\n      } catch (e) {\n        log('Error: ' + e.message);\n        alert('Error: ' + e.message);\n      }\n    });\n\n    clearBtn.addEventListener('click', () => {\n      mySet.clear();\n      log('Cleared Set');\n      updateSetInfo();\n    });\n\n    iterateBtn.addEventListener('click', () => {\n      if (mySet.size === 0) {\n        log('Set is empty — nothing to iterate.');\n        return;\n      }\n      // for..of\n      let s = 'Iterating with for..of:\\n';\n      for (const v of mySet) {\n        s += ' - ' + pretty(v) + '\\n';\n      }\n      s += '\\nIterating with forEach (same order):\\n';\n      mySet.forEach((value, value2, setRef) => {\n        s += ' - ' + pretty(value) + '\\n';\n      });\n      log(s);\n    });\n\n    toArrayBtn.addEventListener('click', () => {\n      const arr = Array.from(mySet);\n      log('Converted Set to Array: ' + pretty(arr));\n    });\n\n    dedupeBtn.addEventListener('click', () => {\n      const csv = csvInput.value;\n      if (!csv) { alert('Enter comma-separated values to dedupe'); return; }\n      const parts = csv.split(',').map(s => s.trim()).filter(Boolean);\n      const deduped = [...new Set(parts)];\n      log(`Input: ${pretty(parts)}\\nDedupe result: ${pretty(deduped)}`);\n    });\n\n    // Demo helpers for operations\n    function union(a, b) {\n      return new Set([...a, ...b]);\n    }\n    function intersection(a, b) {\n      return new Set([...a].filter(x => b.has(x)));\n    }\n    function difference(a, b) {\n      return new Set([...a].filter(x => !b.has(x)));\n    }\n\n    demoUnion.addEventListener('click', () => {\n      const A = new Set([1,2,3,'a']);\n      const B = new Set([3,4,'a','b']);\n      const U = union(A,B);\n      log(`Union demo:\\nA = ${pretty([...A])}\\nB = ${pretty([...B])}\\nA ∪ B = ${pretty([...U])}`);\n    });\n\n    demoIntersection.addEventListener('click', () => {\n      const A = new Set(['apple','orange','banana']);\n      const B = new Set(['banana','kiwi','apple']);\n      const I = intersection(A,B);\n      log(`Intersection demo:\\nA = ${pretty([...A])}\\nB = ${pretty([...B])}\\nA ∩ B = ${pretty([...I])}`);\n    });\n\n    demoDifference.addEventListener('click', () => {\n      const A = new Set([1,2,3,4]);\n      const B = new Set([3,4,5]);\n      const D = difference(A,B);\n      log(`Difference demo (A \\\\ B):\\nA = ${pretty([...A])}\\nB = ${pretty([...B])}\\nA \\\\ B = ${pretty([...D])}`);\n    });\n\n    demoFromArray.addEventListener('click', () => {\n      const arr = ['red','blue','red','green','blue'];\n      const s = new Set(arr);\n      log(`From Array demo:\\nArray: ${pretty(arr)}\\nnew Set(array) => ${pretty([...s])}`);\n    });\n\n    demoObjects.addEventListener('click', () => {\n      // Show that objects are unique by reference\n      const obj1 = {x:1};\n      const obj2 = {x:1}; // same shape, different reference\n      const s = new Set();\n      s.add(obj1);\n      s.add(obj2);\n      s.add(obj1); // adding same reference twice doesn't change set\n      log(`Objects in Set (by reference):\\nobj1 = ${pretty(obj1)}\\nobj2 = ${pretty(obj2)}\\nAdded obj1, obj2, obj1 again.\\nSet contents (size=${s.size}): ${pretty([...s])}\\nNote: obj1 and obj2 are distinct because they are different objects (different references).`);\n    });\n\n    demoWeakSet.addEventListener('click', () => {\n      // WeakSet accepts only objects and holds weak references; can't inspect size or iterate.\n      const ws = new WeakSet();\n      const a = {name:'a'};\n      ws.add(a);\n      log('WeakSet demo: You added an object reference to a WeakSet. WeakSets only accept objects and are not iterable (no size property). The object may be garbage-collected if there are no other strong references.');\n      // We show that primitives cannot be added:\n      try {\n        ws.add(1);\n      } catch (e) {\n        log('WeakSet cannot hold primitives (attempt to add 1 throws): ' + e.message);\n      }\n    });\n\n    // Initialize log\n    log('Welcome! Use the controls on the left to experiment with Set.');\n\n    // Initial update\n    updateSetInfo();\n\n    // Extra: show SameValueZero behavior (NaN === NaN scenario)\n    (function showNaNBehavior() {\n      const s = new Set();\n      s.add(NaN);\n      s.add(NaN);\n      // Size is 1 because NaN is treated equal to NaN in sets\n      log('Note on NaN: new Set().add(NaN).add(NaN) => size = ' + s.size + ' (NaN === NaN for Set uniqueness using SameValueZero).');\n    })();\n\n    // Make ENTER key add\n    valueInput.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter') {\n        addBtn.click();\n        e.preventDefault();\n      }\n    });\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Set"
    }
  ],
  "topic": "Set",
  "hasFSM": false,
  "hasTest": true
}