{
  "id": "d809fbd0-d1c9-11f0-9efc-d1db1618a544",
  "timestamp": "2025-12-05T11:04:28.686Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Binary Tree",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Binary Tree Visualizer (BST)</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#4f46e5;\n      --muted:#94a3b8;\n      --node:#e6eef8;\n      --node-fill:#0b2140;\n      --good:#16a34a;\n      --bad:#ef4444;\n      --highlight:#f59e0b;\n    }\n    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,\"Helvetica Neue\",Arial;}\n    body{background:linear-gradient(180deg,#071025 0%, #0b1220 100%); color:var(--node); display:flex; flex-direction:column; align-items:center;}\n    .container{width:100%; max-width:1100px; padding:18px; box-sizing:border-box;}\n    header{display:flex; align-items:center; gap:16px; margin-bottom:12px;}\n    h1{font-size:20px; margin:0; color:var(--node);}\n    .controls{display:flex; gap:8px; flex-wrap:wrap; align-items:center;}\n    .panel{background:linear-gradient(180deg,#071426 0%, #081426 100%); padding:12px; border-radius:10px; box-shadow: 0 6px 18px rgba(2,6,23,0.6); color:var(--node); display:flex; gap:12px; align-items:center;}\n    input[type=\"number\"], input[type=\"text\"]{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--node); padding:8px 10px; border-radius:8px; width:100px;}\n    button{background:linear-gradient(180deg,var(--accent),#3b82f6); border:none; color:white; padding:8px 12px; border-radius:8px; cursor:pointer;}\n    button.secondary{background:transparent; border:1px solid rgba(255,255,255,0.06);}\n    button.warn{background:linear-gradient(180deg,#ef4444,#c026d3);}\n    .small{padding:6px 10px; font-size:13px;}\n    .svg-wrap{background:linear-gradient(180deg,#071426AA,#081426AA); border-radius:12px; padding:12px; margin-top:12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); }\n    #canvas{width:100%; height:520px; background:transparent;}\n    .info{margin-top:10px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;}\n    .stat{background:rgba(255,255,255,0.02); padding:8px 10px; border-radius:10px; color:var(--muted); font-size:13px;}\n    .legend{display:flex; gap:8px; align-items:center;}\n    .swatch{width:12px;height:12px;border-radius:3px; display:inline-block;}\n    .note{font-size:13px; color:var(--muted); max-width:720px; line-height:1.4; margin-top:8px;}\n    .node-label{font-weight:600; font-size:12px; fill:var(--node);}\n    .btn-row{display:flex; gap:6px; flex-wrap:wrap;}\n    footer{margin-top:18px; color:var(--muted); font-size:13px;}\n    @media (max-width:720px){ header{flex-direction:column; align-items:flex-start} .panel{flex-wrap:wrap}}\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <header>\n      <div>\n        <h1>Binary Tree Visualizer (Binary Search Tree)</h1>\n        <div class=\"note\">This demo builds a Binary Search Tree (BST). Insert unique numbers to create the tree. Use the controls to insert, delete, search, generate random trees, and play step-by-step traversals (inorder, preorder, postorder, level-order). Click nodes to inspect.</div>\n      </div>\n      <div style=\"margin-left:auto\"></div>\n    </header>\n\n    <div class=\"panel controls\" style=\"justify-content:space-between;\">\n      <div style=\"display:flex; gap:8px; align-items:center; flex-wrap:wrap;\">\n        <input id=\"valueInput\" type=\"number\" placeholder=\"Value\" />\n        <button id=\"insertBtn\">Insert</button>\n        <button class=\"secondary\" id=\"deleteBtn\">Delete</button>\n        <button class=\"secondary\" id=\"searchBtn\">Search</button>\n        <button id=\"clearBtn\" class=\"small\">Clear</button>\n        <button id=\"randomBtn\" class=\"small\">Random Tree</button>\n      </div>\n\n      <div style=\"display:flex; gap:10px; align-items:center; flex-wrap:wrap;\">\n        <div class=\"btn-row\">\n          <button id=\"inorderBtn\" class=\"small\">Inorder</button>\n          <button id=\"preorderBtn\" class=\"small\">Preorder</button>\n          <button id=\"postorderBtn\" class=\"small\">Postorder</button>\n          <button id=\"levelBtn\" class=\"small\">Level-order</button>\n        </div>\n        <div style=\"display:flex; gap:8px; align-items:center;\">\n          <button id=\"playBtn\" class=\"small\">Play</button>\n          <button id=\"stepBtn\" class=\"small secondary\">Step</button>\n          <label style=\"font-size:13px;color:var(--muted);\">Speed</label>\n          <input id=\"speed\" type=\"range\" min=\"100\" max=\"1200\" value=\"450\" />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"svg-wrap\">\n      <svg id=\"canvas\" viewBox=\"0 0 1200 520\" preserveAspectRatio=\"xMidYMid meet\">\n        <!-- Edges and nodes are drawn here -->\n      </svg>\n    </div>\n\n    <div class=\"info\">\n      <div class=\"stat\">Nodes: <span id=\"nodeCount\">0</span></div>\n      <div class=\"stat\">Height: <span id=\"height\">0</span></div>\n      <div class=\"stat\">Root: <span id=\"rootVal\">—</span></div>\n      <div class=\"stat\">Status: <span id=\"status\" style=\"color:var(--muted)\">Idle</span></div>\n      <div style=\"margin-left:auto\" class=\"legend\">\n        <div class=\"swatch\" style=\"background:var(--node-fill); border:1px solid rgba(255,255,255,0.06)\"></div><div style=\"color:var(--muted); font-size:13px\">Node</div>\n        <div class=\"swatch\" style=\"background:var(--highlight)\"></div><div style=\"color:var(--muted); font-size:13px\">Visited / Highlight</div>\n        <div class=\"swatch\" style=\"background:var(--good)\"></div><div style=\"color:var(--muted); font-size:13px\">Found</div>\n        <div class=\"swatch\" style=\"background:var(--bad)\"></div><div style=\"color:var(--muted); font-size:13px\">Deleted</div>\n      </div>\n    </div>\n\n    <footer>\n      Tip: Try inserting ascending numbers to see an unbalanced tree, or insert random numbers to get a more balanced tree. Delete nodes with two children to observe successor replacement.\n    </footer>\n  </div>\n\n  <script>\n  // Simple BST with visualization in SVG. Single-file demo.\n\n  // Utilities\n  const $ = (id) => document.getElementById(id);\n  const svg = $('canvas');\n  const WIDTH = 1200, HEIGHT = 520;\n  svg.setAttribute('viewBox', `0 0 ${WIDTH} ${HEIGHT}`);\n\n  // Tree Node class\n  let uniqueId = 1;\n  class Node {\n    constructor(val){\n      this.val = val;\n      this.left = null;\n      this.right = null;\n      this.id = uniqueId++;\n      // layout\n      this.x = 0; this.y = 0;\n    }\n  }\n\n  // BST root\n  let root = null;\n\n  // Visualization / state\n  let nodesFlat = []; // flat list for easy access\n  let animTimer = null;\n  let currentSequence = [];\n  let playIndex = 0;\n  let isPlaying = false;\n  const state = {\n    highlight: null\n  };\n\n  // DOM elements\n  const nodeCountEl = $('nodeCount');\n  const heightEl = $('height');\n  const rootValEl = $('rootVal');\n  const statusEl = $('status');\n  const speedEl = $('speed');\n\n  function updateStats(){\n    nodeCountEl.textContent = countNodes(root);\n    heightEl.textContent = getHeight(root);\n    rootValEl.textContent = root ? root.val : '—';\n  }\n\n  // BST operations\n  function insertValue(val){\n    if (root === null) { root = new Node(val); return root; }\n    let cur = root;\n    while(true){\n      if (val === cur.val) return null; // duplicates not allowed\n      if (val < cur.val){\n        if (!cur.left){ cur.left = new Node(val); return cur.left; }\n        cur = cur.left;\n      } else {\n        if (!cur.right){ cur.right = new Node(val); return cur.right; }\n        cur = cur.right;\n      }\n    }\n  }\n\n  function searchValue(val){\n    let cur = root;\n    const path = [];\n    while(cur){\n      path.push(cur);\n      if (val === cur.val) return {found:cur, path};\n      cur = val < cur.val ? cur.left : cur.right;\n    }\n    return {found:null, path};\n  }\n\n  function deleteValue(val){\n    let deleted = {node:null};\n    root = deleteRec(root, val, deleted);\n    return deleted.node;\n  }\n\n  function deleteRec(node, val, deleted){\n    if (!node) return null;\n    if (val < node.val) node.left = deleteRec(node.left, val, deleted);\n    else if (val > node.val) node.right = deleteRec(node.right, val, deleted);\n    else {\n      // found\n      deleted.node = node;\n      if (!node.left && !node.right) return null;\n      if (!node.left) return node.right;\n      if (!node.right) return node.left;\n      // two children: replace with inorder successor (min in right subtree)\n      const succ = minNode(node.right);\n      node.val = succ.val;\n      // remove successor node from right subtree\n      node.right = deleteRec(node.right, succ.val, deleted);\n    }\n    return node;\n  }\n\n  function minNode(node){ while(node.left) node = node.left; return node; }\n\n  // Traversals\n  function inorder(n, arr){ if(!n) return; inorder(n.left,arr); arr.push(n); inorder(n.right,arr); }\n  function preorder(n, arr){ if(!n) return; arr.push(n); preorder(n.left,arr); preorder(n.right,arr); }\n  function postorder(n, arr){ if(!n) return; postorder(n.left,arr); postorder(n.right,arr); arr.push(n); }\n  function levelOrder(n,arr){ if(!n) return; const q=[n]; while(q.length){ const t=q.shift(); arr.push(t); if(t.left) q.push(t.left); if(t.right) q.push(t.right); } }\n\n  // Utility traversals\n  function countNodes(n){ if(!n) return 0; return 1 + countNodes(n.left) + countNodes(n.right); }\n  function getHeight(n){ if(!n) return 0; return 1 + Math.max(getHeight(n.left), getHeight(n.right)); }\n\n  // Layout: assign x via inorder index, y by depth. We'll compute inorder positions\n  function computeLayout(){\n    nodesFlat = [];\n    let index = 0;\n    function dfs(n, depth){\n      if(!n) return;\n      dfs(n.left, depth + 1);\n      // horizontal spacing\n      const margin = 60;\n      const span = WIDTH - 2*margin;\n      const totalLeaves = Math.max(1, countNodes(root));\n      // Use inorder index to place evenly\n      n.x = margin + (index / Math.max(1, totalLeaves-1 || 1)) * span;\n      n.y = 60 + depth * 85;\n      index++;\n      nodesFlat.push(n);\n      dfs(n.right, depth + 1);\n    }\n    index = 0;\n    if (root) dfs(root, 0);\n    // If only one node, center it\n    if (nodesFlat.length === 1){ nodesFlat[0].x = WIDTH/2; nodesFlat[0].y = 80; }\n  }\n\n  // Rendering\n  function render(){\n    computeLayout();\n    svg.innerHTML = ''; // clear\n    // draw edges first\n    if (root) drawEdgesSVG(root);\n    // draw nodes\n    if (nodesFlat.length) {\n      for (const n of nodesFlat){\n        drawNodeSVG(n);\n      }\n    }\n    attachNodeClickHandlers();\n    updateStats();\n  }\n\n  function drawEdgesSVG(node){\n    if (!node) return;\n    if (node.left){\n      drawLine(node.x, node.y, node.left.x, node.left.y);\n      drawEdgesSVG(node.left);\n    }\n    if (node.right){\n      drawLine(node.x, node.y, node.right.x, node.right.y);\n      drawEdgesSVG(node.right);\n    }\n  }\n\n  function drawLine(x1,y1,x2,y2){\n    const line = document.createElementNS('http://www.w3.org/2000/svg','line');\n    line.setAttribute('x1', x1);\n    line.setAttribute('y1', y1 + 18); // start under node circle\n    line.setAttribute('x2', x2);\n    line.setAttribute('y2', y2 - 18); // end above node circle\n    line.setAttribute('stroke', 'rgba(255,255,255,0.08)');\n    line.setAttribute('stroke-width', 2);\n    svg.appendChild(line);\n  }\n\n  function drawNodeSVG(n){\n    const g = document.createElementNS('http://www.w3.org/2000/svg','g');\n    g.setAttribute('data-id', n.id);\n    g.setAttribute('transform', `translate(${n.x},${n.y})`);\n    // circle\n    const circle = document.createElementNS('http://www.w3.org/2000/svg','circle');\n    circle.setAttribute('r', 20);\n    circle.setAttribute('cx', 0);\n    circle.setAttribute('cy', 0);\n    circle.setAttribute('fill', 'var(--node-fill)');\n    circle.setAttribute('stroke', 'rgba(255,255,255,0.06)');\n    circle.setAttribute('stroke-width', 2);\n    circle.classList.add('node-circle');\n    // label\n    const text = document.createElementNS('http://www.w3.org/2000/svg','text');\n    text.setAttribute('x', 0);\n    text.setAttribute('y', 6);\n    text.setAttribute('text-anchor','middle');\n    text.setAttribute('class','node-label');\n    text.textContent = String(n.val);\n    // add tooltip (title)\n    const title = document.createElementNS('http://www.w3.org/2000/svg','title');\n    title.textContent = 'Click to inspect: ' + n.val;\n    g.appendChild(circle);\n    g.appendChild(text);\n    g.appendChild(title);\n    svg.appendChild(g);\n  }\n\n  function attachNodeClickHandlers(){\n    const groups = svg.querySelectorAll('g[data-id]');\n    groups.forEach(g=>{\n      g.style.cursor = 'pointer';\n      g.onclick = (ev)=>{\n        const id = +g.getAttribute('data-id');\n        const node = nodesFlat.find(n=>n.id===id);\n        if(!node) return;\n        flashNode(node, 'inspect');\n        showNodeInfo(node);\n        ev.stopPropagation();\n      };\n    });\n    // clicking background clears inspection\n    svg.onclick = (ev)=>{ clearStatus(); };\n  }\n\n  function showNodeInfo(node){\n    statusEl.textContent = `Node ${node.val} (id ${node.id}) — left: ${node.left?node.left.val:'—'}, right: ${node.right?node.right.val:'—'}`;\n  }\n\n  function clearStatus(){\n    statusEl.textContent = 'Idle';\n  }\n\n  // Animations & highlights\n  function highlightNode(node, color){\n    const g = svg.querySelector(`g[data-id=\"${node.id}\"]`);\n    if(!g) return;\n    const circle = g.querySelector('circle');\n    circle.setAttribute('fill', color);\n  }\n\n  function resetNodeColor(node){\n    const g = svg.querySelector(`g[data-id=\"${node.id}\"]`);\n    if(!g) return;\n    const circle = g.querySelector('circle');\n    circle.setAttribute('fill', 'var(--node-fill)');\n  }\n\n  function flashNode(node, type){\n    // short highlight animation for click or found\n    const color = type === 'found' ? 'var(--good)' : type === 'delete' ? 'var(--bad)' : 'var(--highlight)';\n    highlightNode(node, color);\n    setTimeout(()=>{ resetNodeColor(node); }, 700);\n  }\n\n  function playSequence(sequence, onDone){\n    stopPlayback();\n    currentSequence = sequence.slice();\n    playIndex = 0;\n    isPlaying = true;\n    $('playBtn').textContent = 'Stop';\n    statusEl.textContent = 'Playing traversal...';\n    const step = ()=>{\n      if (!isPlaying) return;\n      if (playIndex >= currentSequence.length){\n        stopPlayback();\n        if (onDone) onDone();\n        return;\n      }\n      const n = currentSequence[playIndex];\n      highlightOne(n);\n      playIndex++;\n      animTimer = setTimeout(step, +speedEl.value);\n    };\n    step();\n  }\n\n  function stopPlayback(){\n    isPlaying = false;\n    if (animTimer) clearTimeout(animTimer);\n    animTimer = null;\n    $('playBtn').textContent = 'Play';\n    statusEl.textContent = 'Idle';\n    // reset colors\n    nodesFlat.forEach(n=>resetNodeColor(n));\n  }\n\n  function highlightOne(node){\n    // brief highlight and keep it highlighted (to show sequence) then dim slightly\n    const g = svg.querySelector(`g[data-id=\"${node.id}\"]`);\n    if(!g) return;\n    const circle = g.querySelector('circle');\n    circle.setAttribute('fill', 'var(--highlight)');\n    // fade to muted highlight\n    setTimeout(()=>{ circle.setAttribute('fill', 'rgba(245,158,11,0.36)'); }, Math.max(200, +speedEl.value - 200));\n  }\n\n  // Buttons & interactions\n  $('insertBtn').onclick = ()=>{\n    const val = Number($('valueInput').value);\n    if (!Number.isFinite(val)) { alert('Enter a number to insert.'); return; }\n    const res = insertValue(val);\n    if (!res) { alert('Value already exists in tree (duplicates not allowed).'); return;}\n    render();\n    flashNode(res, 'insert');\n    clearInput();\n  };\n\n  $('deleteBtn').onclick = ()=>{\n    const val = Number($('valueInput').value);\n    if (!Number.isFinite(val)) { alert('Enter a number to delete.'); return; }\n    const found = searchValue(val);\n    if (!found.found){ alert('Value not found.'); return; }\n    const del = deleteValue(val);\n    render();\n    if (del) flashNode(del, 'delete');\n    clearInput();\n  };\n\n  $('searchBtn').onclick = ()=>{\n    const val = Number($('valueInput').value);\n    if (!Number.isFinite(val)) { alert('Enter a number to search.'); return; }\n    const res = searchValue(val);\n    // render path highlighting\n    render();\n    // highlight path stepwise\n    let i=0;\n    function step(){\n      if (i>0){ resetNodeColor(res.path[i-1]); }\n      if (i >= res.path.length){ \n        if (res.found){ flashNode(res.found, 'found'); statusEl.textContent = `Found ${val}.`; }\n        else statusEl.textContent = `Not found: ${val}.`;\n        return;\n      }\n      highlightNode(res.path[i], 'rgba(59,130,246,0.9)'); // blue path\n      i++;\n      setTimeout(step, 300);\n    }\n    step();\n    clearInput();\n  };\n\n  $('clearBtn').onclick = ()=>{\n    root = null;\n    nodesFlat = [];\n    render();\n    clearStatus();\n  };\n\n  $('randomBtn').onclick = ()=>{\n    const n = Math.max(1, Math.min(30, Math.round(prompt('How many nodes? (1-30)', '9') || 9)));\n    // generate unique random values\n    const vals = new Set();\n    while(vals.size < n){\n      vals.add(Math.floor(Math.random()*100));\n    }\n    root = null;\n    for (const v of vals) insertValue(v);\n    render();\n    statusEl.textContent = `Random tree with ${n} nodes created.`;\n  };\n\n  $('inorderBtn').onclick = ()=>{ runTraversal('inorder'); };\n  $('preorderBtn').onclick = ()=>{ runTraversal('preorder'); };\n  $('postorderBtn').onclick = ()=>{ runTraversal('postorder'); };\n  $('levelBtn').onclick = ()=>{ runTraversal('level'); };\n\n  function runTraversal(kind){\n    if (!root) { alert('Tree is empty'); return; }\n    stopPlayback();\n    const arr = [];\n    if (kind === 'inorder') inorder(root, arr);\n    else if (kind === 'preorder') preorder(root, arr);\n    else if (kind === 'postorder') postorder(root, arr);\n    else if (kind === 'level') levelOrder(root, arr);\n    currentSequence = arr;\n    playIndex = 0;\n    // show list in status\n    statusEl.textContent = `${kind} → ${arr.map(n=>n.val).join(', ')}`;\n    // highlight first item briefly\n    nodesFlat.forEach(n=>resetNodeColor(n));\n    if (arr.length) highlightNode(arr[0], 'var(--highlight)');\n  }\n\n  $('playBtn').onclick = ()=>{\n    if (isPlaying){ stopPlayback(); return; }\n    if (!currentSequence.length){ alert('Start a traversal (Inorder/Preorder/Postorder/Level-order) first to play it.'); return; }\n    playSequence(currentSequence, ()=>{ statusEl.textContent = 'Traversal complete.'; });\n  };\n\n  $('stepBtn').onclick = ()=>{\n    if (!currentSequence.length){ alert('Start a traversal first.'); return; }\n    if (playIndex >= currentSequence.length) { playIndex = 0; nodesFlat.forEach(n=>resetNodeColor(n)); }\n    const n = currentSequence[playIndex++];\n    highlightOne(n);\n    statusEl.textContent = `Step: ${n.val} (${playIndex}/${currentSequence.length})`;\n    if (playIndex >= currentSequence.length) statusEl.textContent = 'Traversal finished.';\n  };\n\n  function clearInput(){ $('valueInput').value = ''; }\n\n  // Click on empty SVG clears selection\n  svg.onclick = (ev)=>{ /* handled above */ };\n\n  // Initialize sample tree\n  function initSample(){\n    root = null;\n    [50, 30, 70, 20, 40, 60, 80].forEach(v=>insertValue(v));\n    render();\n    statusEl.textContent = 'Sample tree loaded.';\n  }\n\n  // start\n  initSample();\n\n  // expose functions for debug\n  window._bst = { root, insertValue, deleteValue, searchValue, render };\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Binary Tree"
    }
  ],
  "topic": "Binary Tree",
  "hasFSM": false,
  "hasTest": true
}