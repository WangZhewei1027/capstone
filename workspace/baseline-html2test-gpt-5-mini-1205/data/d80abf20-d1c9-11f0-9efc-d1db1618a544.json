{
  "id": "d80abf20-d1c9-11f0-9efc-d1db1618a544",
  "timestamp": "2025-12-05T11:04:47.258Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Selection Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<title>Selection Sort Visualizer</title>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --muted:#94a3b8;\n    --accent:#3b82f6;\n    --good:#10b981;\n    --bad:#ef4444;\n    --card:#0b1220;\n  }\n  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,system-ui,Arial,sans-serif;background:linear-gradient(180deg,#071021 0%, #07142a 100%);color:#e6eef8}\n  .app{max-width:1100px;margin:22px auto;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.7);}\n  header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px}\n  h1{font-size:20px;margin:0}\n  .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}\n  .controls > *{background:var(--panel);border:1px solid rgba(255,255,255,0.03);padding:8px;border-radius:8px;color:var(--muted);font-size:13px}\n  .btn{cursor:pointer;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:9px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);color:#e6eef8}\n  .btn:active{transform:translateY(1px)}\n  .btn.primary{background:linear-gradient(90deg,var(--accent),#2563eb);box-shadow:0 6px 20px rgba(59,130,246,0.15)}\n  .btn.warn{background:linear-gradient(90deg,var(--bad),#dc2626)}\n  .toolbar{display:flex;gap:10px;align-items:center}\n  .slider{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:8px;background:#0b1220}\n  input[type=range]{accent-color:var(--accent)}\n  .main{display:flex;gap:20px}\n  .visual{flex:2;padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:10px;min-height:260px;display:flex;flex-direction:column;align-items:stretch}\n  .bars{flex:1;display:flex;align-items:flex-end;gap:6px;padding:8px 6px 10px;min-height:180px}\n  .bar{flex:1 1 0;height:60px;background:#0b1220;border-radius:6px;display:flex;align-items:flex-end;justify-content:center;color:#e6eef8;font-weight:600;transition:height 300ms cubic-bezier(.22,.9,.22,1), transform 180ms}\n  .bar .value{transform:translateY(-6px);font-size:12px;color:#e6eef8}\n  .bar.default{background:linear-gradient(180deg,#0b1220,#071022)}\n  .bar.i{background:linear-gradient(180deg,#60a5fa,#3b82f6);box-shadow:0 8px 20px rgba(59,130,246,0.15)}\n  .bar.j{background:linear-gradient(180deg,#fb923c,#f97316);box-shadow:0 8px 20px rgba(249,115,22,0.12)}\n  .bar.min{background:linear-gradient(180deg,#34d399,#10b981);box-shadow:0 8px 20px rgba(16,185,129,0.12)}\n  .bar.swap{background:linear-gradient(180deg,#fb7185,#ef4444);box-shadow:0 8px 20px rgba(239,68,68,0.12);transform:translateY(-6px)}\n  .info{display:flex;gap:12px;align-items:center;margin-top:10px}\n  .badge{background:#071426;padding:8px 10px;border-radius:8px;font-size:13px;color:var(--muted)}\n  .panel{flex:1;padding:14px;background:#071226;border-radius:10px;min-height:260px;color:var(--muted);font-size:14px}\n  .panel h3{margin:0 0 10px 0;color:#e6eef8;font-size:15px}\n  pre{margin:0;background:transparent;padding:8px;border-radius:6px;color:var(--muted);font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,monospace;font-size:13px}\n  .code-line{padding:4px;border-radius:6px}\n  .code-line.active{background:linear-gradient(90deg, rgba(96,165,250,0.07), transparent);color:#e6eef8}\n  .small{font-size:12px;color:var(--muted)}\n  footer{margin-top:12px;color:#8ea0bd;font-size:13px}\n  @media (max-width:900px){.main{flex-direction:column}.visual,.panel{min-height:220px}}\n</style>\n</head>\n<body>\n<div class=\"app\" role=\"main\" aria-label=\"Selection Sort Visualizer\">\n  <header>\n    <div>\n      <h1>Selection Sort â€” Visualizer</h1>\n      <div class=\"small\">See how selection sort finds the minimum and swaps it into place.</div>\n    </div>\n    <div class=\"controls\">\n      <div class=\"toolbar\">\n        <button id=\"btnNew\" class=\"btn primary\" title=\"Generate new random array\">New Array</button>\n        <button id=\"btnShuffle\" class=\"btn\" title=\"Shuffle current array\">Shuffle</button>\n        <button id=\"btnPlay\" class=\"btn\" title=\"Play\">Play</button>\n        <button id=\"btnPause\" class=\"btn\" title=\"Pause\" disabled>Pause</button>\n        <button id=\"btnStep\" class=\"btn\" title=\"Step\">Step</button>\n        <button id=\"btnReset\" class=\"btn\" title=\"Reset\">Reset</button>\n      </div>\n      <div class=\"slider\">\n        <label class=\"small\">Size</label>\n        <input id=\"size\" type=\"range\" min=\"5\" max=\"60\" value=\"18\">\n        <span id=\"sizeVal\" class=\"small\">18</span>\n      </div>\n      <div class=\"slider\">\n        <label class=\"small\">Speed</label>\n        <input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" value=\"220\">\n        <span id=\"speedVal\" class=\"small\">220ms</span>\n      </div>\n    </div>\n  </header>\n\n  <div class=\"main\">\n    <div class=\"visual\" aria-live=\"polite\">\n      <div class=\"bars\" id=\"bars\" role=\"img\" aria-label=\"Array bars\"></div>\n      <div class=\"info\">\n        <div class=\"badge\">Comparisons: <strong id=\"cmp\">0</strong></div>\n        <div class=\"badge\">Swaps: <strong id=\"swp\">0</strong></div>\n        <div class=\"badge\">i: <strong id=\"iidx\">-</strong></div>\n        <div class=\"badge\">min: <strong id=\"minidx\">-</strong></div>\n        <div class=\"badge\">j: <strong id=\"jidx\">-</strong></div>\n      </div>\n    </div>\n\n    <div class=\"panel\" aria-label=\"Pseudocode and status\">\n      <h3>Pseudocode (Selection Sort)</h3>\n      <pre id=\"pseudocode\">\n<div id=\"code0\" class=\"code-line\">for i from 0 to n-2:</div>\n<div id=\"code1\" class=\"code-line\">  min = i</div>\n<div id=\"code2\" class=\"code-line\">  for j from i+1 to n-1:</div>\n<div id=\"code3\" class=\"code-line\">    if array[j] < array[min]:</div>\n<div id=\"code4\" class=\"code-line\">      min = j</div>\n<div id=\"code5\" class=\"code-line\">  if min != i:</div>\n<div id=\"code6\" class=\"code-line\">    swap array[i] and array[min]</div>\n      </pre>\n\n      <h3 style=\"margin-top:12px\">Explanation</h3>\n      <div class=\"small\">Selection sort repeatedly selects the smallest remaining element and swaps it into its correct position. It's easy to understand but not optimal for large arrays (O(n^2) time).</div>\n    </div>\n  </div>\n\n  <footer>\n    Controls: Play/Pause to run automatically. Step to perform a single comparison/action. You can change array size or speed anytime; generating a new array resets counters.\n  </footer>\n</div>\n\n<script>\n(function(){\n  // DOM\n  const barsEl = document.getElementById('bars');\n  const btnNew = document.getElementById('btnNew');\n  const btnShuffle = document.getElementById('btnShuffle');\n  const btnPlay = document.getElementById('btnPlay');\n  const btnPause = document.getElementById('btnPause');\n  const btnStep = document.getElementById('btnStep');\n  const btnReset = document.getElementById('btnReset');\n  const sizeInput = document.getElementById('size');\n  const sizeVal = document.getElementById('sizeVal');\n  const speedInput = document.getElementById('speed');\n  const speedVal = document.getElementById('speedVal');\n  const cmpEl = document.getElementById('cmp');\n  const swpEl = document.getElementById('swp');\n  const iidxEl = document.getElementById('iidx');\n  const minidxEl = document.getElementById('minidx');\n  const jidxEl = document.getElementById('jidx');\n  const codeLines = Array.from({length:7}).map((_,i)=>document.getElementById('code'+i));\n\n  // State\n  let arr = [];\n  let bars = [];\n  let comparisons = 0, swaps = 0;\n  let running = false;\n  let waitingResolvers = [];\n  let stepRequested = false;\n  let speed = parseInt(speedInput.value,10);\n  let allowControls = true;\n  let snapshotArr = null;\n\n  function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}\n  function generateArray(n){\n    const a = [];\n    for(let i=0;i<n;i++) a.push(randInt(5,100));\n    return a;\n  }\n\n  function renderArray(a){\n    barsEl.innerHTML = '';\n    bars = [];\n    const max = Math.max(...a,100);\n    a.forEach((v, idx)=>{\n      const bar = document.createElement('div');\n      bar.className = 'bar default';\n      bar.style.height = (v/max*100) + '%';\n      bar.setAttribute('data-index', idx);\n      bar.setAttribute('data-value', v);\n      const lbl = document.createElement('div');\n      lbl.className = 'value';\n      lbl.textContent = v;\n      bar.appendChild(lbl);\n      barsEl.appendChild(bar);\n      bars.push(bar);\n    });\n  }\n\n  function updateBadges(i,min,j){\n    cmpEl.textContent = comparisons;\n    swpEl.textContent = swaps;\n    iidxEl.textContent = (i==null?'-':i);\n    minidxEl.textContent = (min==null?'-':min);\n    jidxEl.textContent = (j==null?'-':j);\n  }\n\n  function clearHighlights(){\n    bars.forEach(b=>{\n      b.className = 'bar default';\n    });\n    codeLines.forEach(l=>l.classList.remove('active'));\n  }\n\n  function highlight(indices){\n    // indices: {i, j, min, swap}\n    bars.forEach((b,idx)=>{\n      b.className = 'bar default';\n      if(indices){\n        if(indices.swap && (idx===indices.swap[0] || idx===indices.swap[1])){\n          b.classList.add('swap');\n        } else if(indices.i!=null && idx===indices.i){\n          b.classList.add('i');\n        } else if(indices.j!=null && idx===indices.j){\n          b.classList.add('j');\n        } else if(indices.min!=null && idx===indices.min){\n          b.classList.add('min');\n        }\n      }\n    });\n  }\n\n  function updatePseudocode(line){\n    codeLines.forEach((l,idx)=>l.classList.toggle('active', idx===line));\n  }\n\n  // Control mechanism: wait for play or step or timeout\n  function waitForControl(){\n    return new Promise(resolve=>{\n      if(running){\n        setTimeout(resolve, speed);\n      } else if(stepRequested){\n        stepRequested = false;\n        resolve();\n      } else {\n        waitingResolvers.push(resolve);\n      }\n    });\n  }\n\n  function resumeAll(){\n    // Called when switching to running: resolve all waiting so algorithm continues.\n    while(waitingResolvers.length) {\n      const r = waitingResolvers.shift();\n      r();\n    }\n  }\n\n  function cancelWaiting(){\n    // Resolve any pending to avoid deadlocks (used on reset/new array)\n    while(waitingResolvers.length) {\n      const r = waitingResolvers.shift();\n      r();\n    }\n    stepRequested = false;\n  }\n\n  // Selection sort with visualization and control points\n  async function selectionSortVisual(a){\n    comparisons = 0; swaps = 0;\n    updateBadges(null,null,null);\n    snapshotArr = a.slice(); // for reset\n    const n = a.length;\n    for(let i=0;i<n-1;i++){\n      updatePseudocode(0);\n      let min = i;\n      updatePseudocode(1);\n      updateBadges(i,min,null);\n      highlight({i,min});\n      await waitForControl();\n\n      for(let j=i+1;j<n;j++){\n        updatePseudocode(2);\n        updateBadges(i,min,j);\n        highlight({i,j,min});\n        // comparison\n        updatePseudocode(3);\n        comparisons++;\n        updateBadges(i,min,j);\n        await waitForControl();\n\n        if(a[j] < a[min]){\n          min = j;\n          updatePseudocode(4);\n          updateBadges(i,min,j);\n          highlight({i,j,min});\n          await waitForControl();\n        }\n      }\n\n      updatePseudocode(5);\n      await waitForControl();\n\n      if(min !== i){\n        updatePseudocode(6);\n        // visually swap: mark swap and animate\n        updateBadges(i,min,null);\n        highlight({swap:[i,min]});\n        await waitForControl();\n        // perform swap in array and DOM\n        swaps++;\n        // swap values\n        const tmp = a[i]; a[i]=a[min]; a[min]=tmp;\n        // swap bars heights and data-values with smooth transition\n        const bi = bars[i], bm = bars[min];\n        // swap heights and labels\n        const hi = bi.style.height, hm = bm.style.height;\n        bi.style.height = hm; bm.style.height = hi;\n        const vi = bi.querySelector('.value').textContent;\n        const vm = bm.querySelector('.value').textContent;\n        bi.querySelector('.value').textContent = vm;\n        bm.querySelector('.value').textContent = vi;\n        // also update data-value attrs\n        bi.setAttribute('data-value', a[i]);\n        bm.setAttribute('data-value', a[min]);\n        updateBadges(i,min,null);\n        await waitForControl();\n      }\n\n      // finalize position i\n      clearHighlights();\n      updateBadges(i,null,null);\n      await waitForControl();\n    }\n    // done\n    clearHighlights();\n    updateBadges('-', '-', '-');\n    updatePseudocode(-1);\n  }\n\n  // Controls wiring\n  function setPlay(on){\n    running = !!on;\n    btnPlay.disabled = running;\n    btnPause.disabled = !running;\n    if(running) resumeAll();\n  }\n\n  btnPlay.addEventListener('click', ()=>{\n    setPlay(true);\n  });\n  btnPause.addEventListener('click', ()=>{\n    setPlay(false);\n  });\n  btnStep.addEventListener('click', ()=>{\n    // If algorithm running paused and there is a waiting resolver, resolve one.\n    if(waitingResolvers.length>0){\n      const r = waitingResolvers.shift();\n      r();\n    } else {\n      stepRequested = true;\n    }\n    setPlay(false);\n  });\n\n  btnNew.addEventListener('click', ()=>{\n    cancelWaiting();\n    setPlay(false);\n    initArray(+sizeInput.value);\n    resetCounts();\n  });\n\n  btnShuffle.addEventListener('click', ()=>{\n    cancelWaiting();\n    setPlay(false);\n    shuffleArray();\n    resetCounts();\n  });\n\n  btnReset.addEventListener('click', ()=>{\n    cancelWaiting();\n    setPlay(false);\n    resetToSnapshot();\n  });\n\n  sizeInput.addEventListener('input', (e)=>{\n    sizeVal.textContent = e.target.value;\n  });\n  sizeInput.addEventListener('change', (e)=>{\n    cancelWaiting();\n    setPlay(false);\n    initArray(+e.target.value);\n    resetCounts();\n  });\n\n  speedInput.addEventListener('input', (e)=>{\n    speed = parseInt(e.target.value,10);\n    speedVal.textContent = speed + 'ms';\n  });\n\n  function resetCounts(){\n    comparisons = 0; swaps = 0;\n    cmpEl.textContent = 0; swpEl.textContent = 0;\n    iidxEl.textContent = '-'; jidxEl.textContent = '-'; minidxEl.textContent='-';\n  }\n\n  function initArray(n){\n    arr = generateArray(n);\n    renderArray(arr);\n    clearHighlights();\n    resetCounts();\n    snapshotArr = arr.slice();\n    // start algorithm in background\n    startSort();\n  }\n\n  function shuffleArray(){\n    // Fisher-Yates\n    for(let i=arr.length-1;i>0;i--){\n      const j = Math.floor(Math.random()*(i+1));\n      [arr[i],arr[j]] = [arr[j],arr[i]];\n    }\n    renderArray(arr);\n    snapshotArr = arr.slice();\n  }\n\n  function resetToSnapshot(){\n    if(!snapshotArr) return;\n    arr = snapshotArr.slice();\n    renderArray(arr);\n    resetCounts();\n  }\n\n  // Start the sort algorithm in background, but ensure only one instance\n  let sortTask = null;\n  function startSort(){\n    if(sortTask) return;\n    sortTask = (async ()=>{\n      try{\n        await selectionSortVisual(arr);\n      }catch(e){\n        // ignore\n      } finally {\n        sortTask = null;\n        setPlay(false);\n      }\n    })();\n  }\n\n  // Initialize\n  function init(){\n    sizeVal.textContent = sizeInput.value;\n    speedVal.textContent = speedInput.value + 'ms';\n    speed = parseInt(speedInput.value,10);\n    initArray(+sizeInput.value);\n\n    // Start paused by default\n    setPlay(false);\n\n    // when page visible, ensure resumeAll if running\n    document.addEventListener('visibilitychange', ()=>{\n      if(!document.hidden && running) resumeAll();\n    });\n\n    // Auto start in paused state so users can step\n    setTimeout(()=>{ /* nothing */ }, 0);\n  }\n\n  init();\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Selection Sort"
    }
  ],
  "topic": "Selection Sort",
  "hasFSM": false,
  "hasTest": true
}