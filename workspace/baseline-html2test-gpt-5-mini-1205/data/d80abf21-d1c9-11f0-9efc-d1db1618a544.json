{
  "id": "d80abf21-d1c9-11f0-9efc-d1db1618a544",
  "timestamp": "2025-12-05T11:04:45.315Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Insertion Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <title>Insertion Sort Visualizer</title>\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#60a5fa;\n      --muted:#94a3b8;\n      --good:#34d399;\n      --bad:#fb7185;\n      --glass: rgba(255,255,255,0.03);\n      --font-sans: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n    }\n    *{box-sizing:border-box}\n    html,body{height:100%}\n    body{\n      margin:0;\n      font-family:var(--font-sans);\n      background:linear-gradient(180deg,#041028 0%, #07102a 60%);\n      color:#e6eef8;\n      -webkit-font-smoothing:antialiased;\n      -moz-osx-font-smoothing:grayscale;\n    }\n    .app{\n      max-width:1100px;\n      margin:24px auto;\n      padding:20px;\n      border-radius:12px;\n      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));\n      box-shadow: 0 6px 24px rgba(2,6,23,0.6);\n    }\n    header{\n      display:flex;\n      align-items:center;\n      justify-content:space-between;\n      gap:12px;\n      margin-bottom:12px;\n    }\n    header h1{\n      margin:0;\n      font-size:20px;\n      letter-spacing:0.2px;\n    }\n    .controls{\n      display:flex;\n      gap:8px;\n      align-items:center;\n      flex-wrap:wrap;\n    }\n    .panel{\n      background:var(--panel);\n      padding:12px;\n      border-radius:10px;\n      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);\n    }\n    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}\n    input[type=\"text\"], select{\n      background:var(--glass);\n      border:1px solid rgba(255,255,255,0.03);\n      color:inherit;\n      padding:8px 10px;\n      border-radius:8px;\n      min-width:220px;\n    }\n    button{\n      background:linear-gradient(180deg,var(--accent),#3b82f6);\n      border:0;\n      color:white;\n      padding:8px 12px;\n      border-radius:8px;\n      cursor:pointer;\n      font-weight:600;\n      box-shadow: 0 6px 14px rgba(59,130,246,0.18);\n    }\n    button.secondary{\n      background:transparent;\n      border:1px solid rgba(255,255,255,0.06);\n      color:var(--muted);\n      box-shadow:none;\n      font-weight:600;\n      padding:8px 10px;\n    }\n    .row{display:flex;gap:12px;align-items:center}\n    .viz{\n      display:flex;\n      gap:12px;\n      margin-top:14px;\n      align-items:flex-end;\n      height:320px;\n      padding:18px;\n      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));\n      border-radius:12px;\n      overflow:hidden;\n    }\n    .bar{\n      flex:1;\n      margin:0 4px;\n      display:flex;\n      align-items:flex-end;\n      justify-content:center;\n      transition: all 250ms ease;\n      position:relative;\n      border-radius:6px 6px 4px 4px;\n      min-width:14px;\n    }\n    .bar .val{\n      font-size:12px;\n      padding:4px 6px;\n      color:rgba(0,0,0,0.7);\n      background:white;\n      border-radius:6px;\n      transform:translateY(6px);\n      position:relative;\n      font-weight:700;\n    }\n    .status-default{ background: linear-gradient(180deg,#1f2937,#111827); opacity:0.9; }\n    .status-sorted{ background: linear-gradient(180deg,var(--good),#10b981); }\n    .status-key{ background: linear-gradient(180deg,#facc15,#eab308); transform:translateY(-6px); box-shadow:0 8px 20px rgba(234,179,8,0.12); }\n    .status-compare{ background: linear-gradient(180deg,#fb7185,#ef4444); box-shadow:0 8px 24px rgba(239,68,68,0.12); }\n    .status-shift{ background: linear-gradient(180deg,#60a5fa,#3b82f6); box-shadow:0 8px 24px rgba(59,130,246,0.12); }\n    .controls-bottom{\n      display:flex;\n      gap:12px;\n      align-items:center;\n      margin-top:12px;\n      justify-content:space-between;\n      flex-wrap:wrap;\n    }\n    .play-controls{display:flex;gap:8px;align-items:center}\n    .small{font-size:13px;color:var(--muted)}\n    input[type=\"range\"]{width:160px}\n    .sidebar{\n      margin-top:14px;\n      display:grid;\n      grid-template-columns:1fr 320px;\n      gap:12px;\n    }\n    .info{\n      padding:12px;\n      border-radius:10px;\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));\n    }\n    pre{background:transparent;margin:0;padding:8px;border-radius:8px;overflow:auto}\n    .pseudocode{\n      font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", \"Helvetica Neue\", monospace;\n      font-size:13px;\n      line-height:1.5;\n      color:#cbd5e1;\n    }\n    .pseudocode .line{padding:4px 8px;border-radius:6px;margin-bottom:4px}\n    .pc-active{ background:rgba(96,165,250,0.12); border-left:4px solid var(--accent); color:#e6f0ff;}\n    .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}\n    .legend .item{display:flex;gap:6px;align-items:center;font-size:13px;color:var(--muted)}\n    .swatch{width:14px;height:14px;border-radius:4px}\n    footer{margin-top:18px;color:var(--muted);font-size:13px}\n    @media(max-width:880px){\n      .sidebar{grid-template-columns:1fr}\n      .viz{height:260px}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\" role=\"application\" aria-label=\"Insertion Sort Visualizer\">\n    <header>\n      <h1>Insertion Sort — Visual Demonstration</h1>\n      <div class=\"controls\">\n        <div class=\"panel\" style=\"display:flex;gap:8px;align-items:center\">\n          <div style=\"min-width:220px\">\n            <label for=\"arrayInput\">Array (comma-separated)</label>\n            <input id=\"arrayInput\" type=\"text\" value=\"8,5,2,9,5,6,3,7\" aria-label=\"Array values\"/>\n          </div>\n          <div style=\"min-width:120px\">\n            <label for=\"order\">Order</label>\n            <select id=\"order\" aria-label=\"Sort order\">\n              <option value=\"asc\">Ascending</option>\n              <option value=\"desc\">Descending</option>\n            </select>\n          </div>\n          <div style=\"display:flex;flex-direction:column;gap:6px\">\n            <label style=\"visibility:hidden\">Actions</label>\n            <div style=\"display:flex;gap:6px\">\n              <button id=\"btnLoad\">Load</button>\n              <button id=\"btnRandom\" class=\"secondary\">Random</button>\n              <button id=\"btnReset\" class=\"secondary\">Reset</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </header>\n\n    <section class=\"panel\" aria-hidden=\"false\" style=\"padding:14px\">\n      <div class=\"viz\" id=\"viz\" role=\"graphics-document\" aria-label=\"Array visualization\">\n        <!-- Bars injected here -->\n      </div>\n\n      <div class=\"controls-bottom\">\n        <div class=\"play-controls\">\n          <button id=\"btnPrev\" class=\"secondary\">⟨ Prev</button>\n          <button id=\"btnPlay\">Play</button>\n          <button id=\"btnNext\" class=\"secondary\">Next ⟩</button>\n          <div style=\"display:flex;flex-direction:column;margin-left:12px\">\n            <label class=\"small\">Speed</label>\n            <input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" step=\"10\" value=\"500\" />\n          </div>\n          <div style=\"margin-left:12px\" class=\"small\">\n            Step: <span id=\"stepCounter\">0</span>/<span id=\"stepTotal\">0</span>\n          </div>\n        </div>\n\n        <div style=\"display:flex;gap:8px;align-items:center;flex-wrap:wrap\">\n          <div style=\"display:flex;flex-direction:column\">\n            <label class=\"small\">Auto-play</label>\n            <select id=\"autoMode\" aria-label=\"Auto play mode\">\n              <option value=\"pause\">Pause at each important step</option>\n              <option value=\"continuous\">Continuous</option>\n            </select>\n          </div>\n          <div style=\"display:flex;flex-direction:column\">\n            <label class=\"small\">Highlight</label>\n            <select id=\"highlightMode\" aria-label=\"Highlight mode\">\n              <option value=\"compact\">Compact (key, compare, shift)</option>\n              <option value=\"verbose\">Verbose (show more intermediate states)</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div style=\"margin-top:12px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px\">\n        <div class=\"legend\">\n          <div class=\"item\"><span class=\"swatch status-key\"></span> Key</div>\n          <div class=\"item\"><span class=\"swatch status-compare\"></span> Comparing</div>\n          <div class=\"item\"><span class=\"swatch status-shift\"></span> Shifting</div>\n          <div class=\"item\"><span class=\"swatch status-sorted\"></span> Sorted prefix</div>\n        </div>\n        <div class=\"small\">Tip: Use \"Play\" to animate. Modify the array and click Load.</div>\n      </div>\n    </section>\n\n    <div class=\"sidebar\">\n      <div class=\"info panel\" aria-live=\"polite\">\n        <h3 style=\"margin-top:0;margin-bottom:8px\">What is Insertion Sort?</h3>\n        <p style=\"margin:0 0 8px;color:var(--muted)\">\n          Insertion Sort builds the final sorted array one item at a time. It takes each element (the key),\n          compares it with elements in the sorted portion (to its left), shifts larger elements rightward,\n          and inserts the key into the correct position.\n        </p>\n\n        <div style=\"display:flex;gap:12px;flex-wrap:wrap;margin-bottom:8px\">\n          <div style=\"min-width:140px\">\n            <label class=\"small\">Time Complexity</label>\n            <div style=\"font-weight:700\">Best: O(n) — already sorted</div>\n            <div style=\"font-weight:700\">Average / Worst: O(n²)</div>\n          </div>\n          <div style=\"min-width:140px\">\n            <label class=\"small\">Space Complexity</label>\n            <div style=\"font-weight:700\">O(1) — in-place</div>\n          </div>\n        </div>\n\n        <h4 style=\"margin-bottom:6px\">Pseudocode</h4>\n        <div class=\"pseudocode\" id=\"pseudocode\">\n          <div class=\"line\" data-line=\"1\">1. for i = 1 to A.length - 1</div>\n          <div class=\"line\" data-line=\"2\">2.   key = A[i]</div>\n          <div class=\"line\" data-line=\"3\">3.   j = i - 1</div>\n          <div class=\"line\" data-line=\"4\">4.   while j >= 0 and A[j] > key</div>\n          <div class=\"line\" data-line=\"5\">5.     A[j + 1] = A[j]</div>\n          <div class=\"line\" data-line=\"6\">6.     j = j - 1</div>\n          <div class=\"line\" data-line=\"7\">7.   A[j + 1] = key</div>\n        </div>\n      </div>\n\n      <div class=\"panel info\">\n        <h4 style=\"margin:0 0 8px\">Current Step</h4>\n        <div id=\"stepInfo\" style=\"color:var(--muted);line-height:1.5\">No steps generated yet. Load an array to begin.</div>\n        <hr style=\"opacity:0.06;margin:12px 0\">\n        <h4 style=\"margin:0 0 8px\">Array Snapshot</h4>\n        <pre id=\"arraySnapshot\" style=\"color:#dbeafe\">[]</pre>\n      </div>\n    </div>\n\n    <footer style=\"text-align:center\">\n      Built to demonstrate insertion sort. Try different arrays, sizes and ordering.\n    </footer>\n  </div>\n\n  <script>\n    // Insertion Sort Visualizer\n    (function(){\n      // DOM refs\n      const viz = document.getElementById('viz');\n      const arrayInput = document.getElementById('arrayInput');\n      const btnLoad = document.getElementById('btnLoad');\n      const btnRandom = document.getElementById('btnRandom');\n      const btnReset = document.getElementById('btnReset');\n      const orderSel = document.getElementById('order');\n      const btnPlay = document.getElementById('btnPlay');\n      const btnNext = document.getElementById('btnNext');\n      const btnPrev = document.getElementById('btnPrev');\n      const speed = document.getElementById('speed');\n      const stepCounter = document.getElementById('stepCounter');\n      const stepTotal = document.getElementById('stepTotal');\n      const stepInfo = document.getElementById('stepInfo');\n      const arraySnapshot = document.getElementById('arraySnapshot');\n      const pseudocode = document.getElementById('pseudocode');\n      const autoMode = document.getElementById('autoMode');\n      const highlightMode = document.getElementById('highlightMode');\n\n      // State\n      let baseArray = [];\n      let steps = []; // each step: {arr:[], statuses:[], pcLine:int, desc:string}\n      let current = 0;\n      let timer = null;\n      let playing = false;\n\n      // Helpers\n      function parseArrayInput(text){\n        // Accept numbers (ints/floats) separated by commas or spaces\n        const parts = text.split(/[\\s,]+/).filter(Boolean);\n        const nums = parts.map(p => {\n          const n = Number(p);\n          return isNaN(n) ? 0 : n;\n        });\n        return nums;\n      }\n\n      function setArrayInputFromArray(a){\n        arrayInput.value = a.join(', ');\n      }\n\n      function randomArray(n=10, min=1, max=100){\n        const arr=[];\n        for(let i=0;i<n;i++){\n          arr.push(Math.floor(Math.random()*(max-min+1))+min);\n        }\n        return arr;\n      }\n\n      function cloneState(arr, statuses, pcLine, desc){\n        return {\n          arr: arr.slice(),\n          statuses: statuses.slice(),\n          pcLine: pcLine || null,\n          desc: desc || ''\n        };\n      }\n\n      function clearTimer(){\n        if(timer){ clearInterval(timer); timer = null; }\n        playing = false;\n        btnPlay.textContent = 'Play';\n      }\n\n      function updateStepUI(){\n        stepCounter.textContent = Math.max(0, Math.min(steps.length>0?current:0, steps.length));\n        stepTotal.textContent = steps.length>0?steps.length-1:0;\n        if(steps.length>0){\n          const s = steps[current];\n          renderArray(s.arr, s.statuses);\n          highlightPseudocode(s.pcLine);\n          stepInfo.textContent = s.desc || '';\n          arraySnapshot.textContent = JSON.stringify(s.arr);\n        } else {\n          viz.innerHTML = '';\n          highlightPseudocode(null);\n          stepInfo.textContent = 'No steps generated yet. Load an array to begin.';\n          arraySnapshot.textContent = '[]';\n        }\n      }\n\n      function renderArray(arr, statuses=[]){\n        viz.innerHTML = '';\n        if(!arr || arr.length===0) return;\n        const max = Math.max(...arr.map(v => Math.abs(v))) || 1;\n        const n = arr.length;\n        const barWidth = Math.max(8, Math.floor((viz.clientWidth - (n-1)*8) / n));\n        for(let i=0;i<arr.length;i++){\n          const val = arr[i];\n          const h = Math.max(6, Math.round((Math.abs(val)/max) * 260));\n          const div = document.createElement('div');\n          div.className = 'bar status-default';\n          const status = statuses[i] || 'default';\n          if(status==='key') div.className = 'bar status-key';\n          else if(status==='compare') div.className = 'bar status-compare';\n          else if(status==='shift') div.className = 'bar status-shift';\n          else if(status==='sorted') div.className = 'bar status-sorted';\n          div.style.height = (h+18)+'px';\n          div.style.minWidth = barWidth + 'px';\n          div.style.maxWidth = barWidth + 'px';\n          const span = document.createElement('div');\n          span.className = 'val';\n          span.textContent = String(val);\n          div.appendChild(span);\n          viz.appendChild(div);\n        }\n      }\n\n      function highlightPseudocode(line){\n        const lines = pseudocode.querySelectorAll('.line');\n        lines.forEach(l => {\n          const num = Number(l.getAttribute('data-line'));\n          if(line && num===line) l.classList.add('pc-active');\n          else l.classList.remove('pc-active');\n        });\n      }\n\n      // Generate steps for insertion sort\n      function generateSteps(arr, ascending=true, mode='compact'){\n        steps = [];\n        const n = arr.length;\n        const A = arr.slice();\n        // initial state: mark first element as sorted\n        let statuses = Array(n).fill('default');\n        if(n>0) statuses[0]='sorted';\n        steps.push(cloneState(A,statuses,1,'Start: first element considered sorted'));\n\n        const cmp = (a,b) => ascending ? (a > b) : (a < b);\n\n        for(let i=1;i<n;i++){\n          let key = A[i];\n          let j = i-1;\n\n          // select key\n          statuses = Array(n).fill('default');\n          for(let k=0;k<i;k++) statuses[k] = 'sorted';\n          statuses[i] = 'key';\n          steps.push(cloneState(A,statuses,2,`Select key A[${i}] = ${key}`));\n\n          statuses[i]='key'; for(let k=0;k<i;k++) statuses[k]='sorted';\n          steps.push(cloneState(A,statuses,3,`Set j = ${j}`));\n\n          // while loop\n          while(j>=0 && cmp(A[j], key)){\n            // compare A[j] with key\n            statuses = Array(n).fill('default');\n            for(let k=0;k<i;k++) statuses[k] = 'sorted';\n            statuses[j] = 'compare';\n            statuses[i] = 'key';\n            steps.push(cloneState(A,statuses,4,`Compare A[${j}] = ${A[j]} with key = ${key} → needs shift`));\n\n            // shift A[j] to A[j+1]\n            A[j+1] = A[j];\n            statuses = Array(n).fill('default');\n            for(let k=0;k<i;k++) statuses[k] = 'sorted';\n            statuses[j+1] = 'shift';\n            statuses[i] = 'key';\n            steps.push(cloneState(A,statuses,5,`Shift A[${j}] to position ${j+1}`));\n\n            j = j - 1;\n            // after decrement j\n            statuses = Array(n).fill('default');\n            for(let k=0;k<i;k++) statuses[k] = 'sorted';\n            if(j>=0) statuses[j] = 'compare';\n            statuses[i] = 'key';\n            steps.push(cloneState(A,statuses,6,`Decrement j to ${j}`));\n          }\n\n          // insert key\n          A[j+1] = key;\n          statuses = Array(n).fill('default');\n          for(let k=0;k<=i;k++) statuses[k] = 'sorted';\n          steps.push(cloneState(A,statuses,7,`Insert key = ${key} at position ${j+1}`));\n\n          // compact mode: optionally remove some verbose intermediate states\n          if(mode==='compact'){\n            // Keep the selection, one compare that leads to shift, and insertion & sorted state.\n            // We'll post-process to remove some repeated patterns for cleanliness.\n            // (But simplest approach: keep as-is; it's okay.)\n          }\n        }\n\n        // final state: all sorted\n        const finalStatuses = Array(n).fill('sorted');\n        steps.push(cloneState(A, finalStatuses, null, 'Array fully sorted'));\n        // ensure indices are within bounds\n        if(steps.length===0){\n          steps.push(cloneState(A,[],null,'No steps'));\n        }\n        current = 0;\n        return steps;\n      }\n\n      // Controls\n      btnLoad.addEventListener('click', ()=>{\n        const parsed = parseArrayInput(arrayInput.value.trim());\n        baseArray = parsed.slice();\n        setArrayInputFromArray(baseArray);\n        steps = generateSteps(baseArray, orderSel.value==='asc', highlightMode.value);\n        stepTotal.textContent = steps.length-1;\n        current = 0;\n        updateStepUI();\n        clearTimer();\n      });\n\n      btnRandom.addEventListener('click', ()=>{\n        const n = Math.max(3, Math.min(30, Math.floor(Math.random()*12)+5));\n        const arr = randomArray(n, 1, 99);\n        baseArray = arr;\n        setArrayInputFromArray(arr);\n        steps = generateSteps(baseArray, orderSel.value==='asc', highlightMode.value);\n        current=0;\n        updateStepUI();\n        clearTimer();\n      });\n\n      btnReset.addEventListener('click', ()=>{\n        if(!baseArray || baseArray.length===0) return;\n        steps = generateSteps(baseArray, orderSel.value==='asc', highlightMode.value);\n        current = 0;\n        updateStepUI();\n        clearTimer();\n      });\n\n      btnNext.addEventListener('click', ()=>{\n        if(steps.length===0) return;\n        if(current < steps.length-1){\n          current++;\n          updateStepUI();\n        } else {\n          clearTimer();\n        }\n      });\n\n      btnPrev.addEventListener('click', ()=>{\n        if(steps.length===0) return;\n        if(current > 0){\n          current--;\n          updateStepUI();\n        }\n      });\n\n      btnPlay.addEventListener('click', ()=>{\n        if(playing){\n          clearTimer();\n        } else {\n          if(steps.length===0) return;\n          playing = true;\n          btnPlay.textContent = 'Pause';\n          const delay = Number(speed.value) || 500;\n          const mode = autoMode.value;\n          // If continuous, play through, otherwise pause at each \"pcLine\" change for inspection\n          timer = setInterval(()=>{\n            if(current < steps.length-1){\n              current++;\n              updateStepUI();\n              if(mode==='pause'){\n                // pause at important lines: when pcLine is 4 (compare) or 5 (shift) or 7 (insert) or null final\n                const pc = steps[current].pcLine;\n                if(pc && (pc===4 || pc===5 || pc===7 || pc===2)){\n                  clearTimer();\n                }\n              }\n            } else {\n              clearTimer();\n            }\n          }, delay);\n        }\n      });\n\n      speed.addEventListener('input', ()=>{\n        if(playing){\n          clearTimer();\n          btnPlay.textContent = 'Play';\n          playing = false;\n        }\n      });\n\n      // keyboard shortcuts\n      document.addEventListener('keydown', (e)=>{\n        if(e.key === ' '){\n          e.preventDefault();\n          btnPlay.click();\n        } else if(e.key === 'ArrowRight'){\n          btnNext.click();\n        } else if(e.key === 'ArrowLeft'){\n          btnPrev.click();\n        }\n      });\n\n      orderSel.addEventListener('change', ()=>{\n        // regenerate with new order\n        if(!baseArray || baseArray.length===0) return;\n        steps = generateSteps(baseArray, orderSel.value==='asc', highlightMode.value);\n        current=0;\n        updateStepUI();\n        clearTimer();\n      });\n\n      highlightMode.addEventListener('change', ()=>{\n        if(!baseArray || baseArray.length===0) return;\n        steps = generateSteps(baseArray, orderSel.value==='asc', highlightMode.value);\n        current=0;\n        updateStepUI();\n        clearTimer();\n      });\n\n      // initialize with default array\n      (function init(){\n        baseArray = parseArrayInput(arrayInput.value);\n        steps = generateSteps(baseArray, orderSel.value==='asc', highlightMode.value);\n        current = 0;\n        updateStepUI();\n      })();\n\n      // Make viz responsive: rerender on resize\n      window.addEventListener('resize', ()=> updateStepUI());\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Insertion Sort"
    }
  ],
  "topic": "Insertion Sort",
  "hasFSM": false,
  "hasTest": true
}