{
  "id": "d80a9811-d1c9-11f0-9efc-d1db1618a544",
  "timestamp": "2025-12-05T11:05:25.941Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Bubble Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#3b82f6;\n      --muted:#94a3b8;\n      --good:#10b981;\n      --bad:#ef4444;\n      --cmp:#f59e0b;\n      --bar-bg:#111827;\n      --glass: rgba(255,255,255,0.03);\n      font-family: Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n      color-scheme: dark;\n    }\n    html,body{\n      height:100%;\n      margin:0;\n      background:linear-gradient(180deg,#071025 0%, #081228 60%);\n      color: #e6eef6;\n      -webkit-font-smoothing:antialiased;\n      -moz-osx-font-smoothing:grayscale;\n    }\n    .app {\n      max-width:1100px;\n      margin:24px auto;\n      padding:18px;\n      border-radius:12px;\n      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      box-shadow: 0 8px 30px rgba(2,6,23,0.6);\n    }\n    header{\n      display:flex;\n      align-items:center;\n      justify-content:space-between;\n      gap:12px;\n      margin-bottom:12px;\n    }\n    h1{\n      font-size:18px;\n      margin:0;\n      color:#eaf2ff;\n    }\n    .controls{\n      display:flex;\n      gap:10px;\n      align-items:center;\n      flex-wrap:wrap;\n    }\n    .control {\n      background:var(--glass);\n      border:1px solid rgba(255,255,255,0.03);\n      padding:8px;\n      border-radius:8px;\n      display:flex;\n      gap:8px;\n      align-items:center;\n    }\n    label{ font-size:12px; color:var(--muted); }\n    input[type=\"range\"]{ width:140px; }\n    button{\n      background:linear-gradient(180deg,var(--accent),#1e6fe5);\n      border:none;\n      padding:8px 12px;\n      border-radius:8px;\n      color:white;\n      cursor:pointer;\n      font-weight:600;\n      box-shadow: 0 4px 12px rgba(59,130,246,0.18);\n    }\n    button.ghost{\n      background:transparent;\n      border:1px solid rgba(255,255,255,0.06);\n      color:var(--muted);\n      box-shadow:none;\n    }\n    .main{\n      display:flex;\n      gap:16px;\n      align-items:flex-start;\n    }\n    .viz{\n      flex:1 1 680px;\n      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));\n      border-radius:10px;\n      padding:12px;\n      border:1px solid rgba(255,255,255,0.03);\n      min-height:320px;\n    }\n    .bars{\n      display:flex;\n      align-items:flex-end;\n      gap:4px;\n      height:360px;\n      padding:8px;\n      box-sizing:border-box;\n    }\n    .bar{\n      background:var(--bar-bg);\n      flex:1 1 auto;\n      border-radius:6px 6px 3px 3px;\n      display:flex;\n      align-items:flex-end;\n      justify-content:center;\n      color:rgba(255,255,255,0.85);\n      font-size:11px;\n      box-shadow: inset 0 -2px 8px rgba(0,0,0,0.4);\n      transition: background-color 160ms, transform 120ms;\n      position:relative;\n      min-width:6px;\n    }\n    .bar .val{\n      padding:4px;\n      transform: translateY(-6px);\n      opacity:0.9;\n    }\n    .bar.default{ background:linear-gradient(180deg,#1f2937,#111827); }\n    .bar.compare{ background:linear-gradient(180deg,#fbbf24,#f59e0b); transform:scaleY(1.02); }\n    .bar.swap{ background:linear-gradient(180deg,#fb7185,#ef4444); transform:scaleY(1.06); }\n    .bar.sorted{ background:linear-gradient(180deg,#34d399,#10b981); }\n    .info{\n      width:320px;\n      min-width:260px;\n      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));\n      padding:12px;\n      border-radius:10px;\n      border:1px solid rgba(255,255,255,0.03);\n    }\n    .stat{\n      display:flex;\n      justify-content:space-between;\n      align-items:center;\n      gap:8px;\n      padding:8px 6px;\n      margin-bottom:8px;\n      border-radius:8px;\n      background:rgba(255,255,255,0.02);\n      font-size:14px;\n    }\n    .pseudocode{\n      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", \"Courier New\", monospace;\n      background:rgba(255,255,255,0.02);\n      padding:8px;\n      border-radius:8px;\n      font-size:13px;\n      color:var(--muted);\n      line-height:1.5;\n    }\n    .line{\n      padding:2px 6px;\n      border-radius:4px;\n    }\n    .line.active{\n      background:rgba(59,130,246,0.12);\n      color:#cfe8ff;\n    }\n    small{ color:var(--muted); }\n    footer{ margin-top:12px; font-size:13px; color:var(--muted); }\n    .row{ display:flex; gap:8px; align-items:center; }\n    .toggle{\n      display:flex;\n      gap:6px;\n      align-items:center;\n      background:transparent;\n      border:1px solid rgba(255,255,255,0.04);\n      padding:6px 8px;\n      border-radius:8px;\n    }\n    .legend{ display:flex; gap:6px; margin-top:8px; flex-wrap:wrap; }\n    .legend .key{ display:flex; gap:6px; align-items:center; padding:6px; background:rgba(255,255,255,0.02); border-radius:8px; font-size:13px; }\n    .dot{ width:12px; height:12px; border-radius:3px; }\n    @media (max-width:900px){\n      .main{ flex-direction:column; }\n      .viz{ order:1 }\n      .info{ order:2; width:100% }\n      .bars{ height:300px }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\" role=\"application\" aria-label=\"Bubble Sort Visualizer\">\n    <header>\n      <div>\n        <h1>Bubble Sort Visualizer</h1>\n        <small>Step through or autoplay bubble sort. Watch comparisons and swaps.</small>\n      </div>\n      <div class=\"controls\" aria-hidden=\"false\">\n        <div class=\"control\">\n          <label for=\"size\">Size</label>\n          <input id=\"size\" type=\"range\" min=\"6\" max=\"80\" value=\"24\" />\n        </div>\n        <div class=\"control\">\n          <label for=\"speed\">Speed</label>\n          <input id=\"speed\" type=\"range\" min=\"20\" max=\"1200\" value=\"180\" />\n        </div>\n        <div class=\"control toggle\" title=\"Sort direction\">\n          <label for=\"dir\">Order</label>\n          <select id=\"dir\" style=\"background:transparent;border:none;color:inherit;\">\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n        </div>\n        <div class=\"control\">\n          <button id=\"shuffle\">Shuffle</button>\n        </div>\n        <div class=\"control\">\n          <button id=\"start\">Start</button>\n          <button id=\"step\" class=\"ghost\">Step</button>\n          <button id=\"pause\" class=\"ghost\" disabled>Pause</button>\n          <button id=\"reset\" class=\"ghost\">Reset</button>\n        </div>\n      </div>\n    </header>\n\n    <div class=\"main\">\n      <section class=\"viz\" aria-live=\"polite\">\n        <div class=\"bars\" id=\"bars\" aria-hidden=\"false\"></div>\n      </section>\n\n      <aside class=\"info\">\n        <div class=\"stat\"><div>Comparisons</div><div id=\"compCount\">0</div></div>\n        <div class=\"stat\"><div>Swaps</div><div id=\"swapCount\">0</div></div>\n        <div class=\"stat\"><div>Current pass</div><div id=\"pass\">0</div></div>\n        <div class=\"stat\"><div>Array size</div><div id=\"sizeLabel\">24</div></div>\n\n        <div style=\"margin-top:8px;\" class=\"legend\">\n          <div class=\"key\"><div class=\"dot\" style=\"background:linear-gradient(180deg,#1f2937,#111827)\"></div> Unvisited</div>\n          <div class=\"key\"><div class=\"dot\" style=\"background:linear-gradient(180deg,#fbbf24,#f59e0b)\"></div> Comparing</div>\n          <div class=\"key\"><div class=\"dot\" style=\"background:linear-gradient(180deg,#fb7185,#ef4444)\"></div> Swapping</div>\n          <div class=\"key\"><div class=\"dot\" style=\"background:linear-gradient(180deg,#34d399,#10b981)\"></div> Sorted</div>\n        </div>\n\n        <h3 style=\"margin-top:12px;margin-bottom:6px;\">Pseudocode</h3>\n        <div class=\"pseudocode\" id=\"pseudocode\" aria-hidden=\"false\">\n          <div class=\"line\" data-line=\"1\">for i from 0 to n-1</div>\n          <div class=\"line\" data-line=\"2\" style=\"padding-left:8px\">for j from 0 to n-i-2</div>\n          <div class=\"line\" data-line=\"3\" style=\"padding-left:16px\">if A[j] &gt; A[j+1]</div>\n          <div class=\"line\" data-line=\"4\" style=\"padding-left:24px\">swap A[j], A[j+1]</div>\n          <div class=\"line\" data-line=\"5\" style=\"padding-left:8px\">end for</div>\n          <div class=\"line\" data-line=\"6\">end for</div>\n        </div>\n\n        <footer>\n          Tip: Use Step to move one comparison at a time. Start to autoplay. Shuffle to randomize.\n        </footer>\n      </aside>\n    </div>\n  </div>\n\n  <script>\n    // Bubble Sort Visualizer\n    (function(){\n      // DOM\n      const barsEl = document.getElementById('bars');\n      const sizeRange = document.getElementById('size');\n      const speedRange = document.getElementById('speed');\n      const dirSelect = document.getElementById('dir');\n      const shuffleBtn = document.getElementById('shuffle');\n      const startBtn = document.getElementById('start');\n      const pauseBtn = document.getElementById('pause');\n      const stepBtn = document.getElementById('step');\n      const resetBtn = document.getElementById('reset');\n      const compCountEl = document.getElementById('compCount');\n      const swapCountEl = document.getElementById('swapCount');\n      const passEl = document.getElementById('pass');\n      const sizeLabel = document.getElementById('sizeLabel');\n      const pseudo = document.getElementById('pseudocode');\n\n      // State\n      let arr = [];\n      let bars = [];\n      let n = parseInt(sizeRange.value,10);\n      let speed = parseInt(speedRange.value,10);\n      let direction = dirSelect.value; // 'asc' or 'desc'\n      let cmpCount = 0, swapCount = 0;\n      let generator = null;\n      let running = false;\n      let timer = null;\n      let lastUnsorted = null;\n      let pass = 0;\n\n      // Utils\n      function randArray(size){\n        const a = [];\n        for(let i=0;i<size;i++){\n          a.push(10 + Math.floor(Math.random()*490));\n        }\n        return a;\n      }\n\n      function renderArray(){\n        barsEl.innerHTML = '';\n        bars = [];\n        const max = Math.max(...arr);\n        arr.forEach((v, idx)=>{\n          const bar = document.createElement('div');\n          bar.className = 'bar default';\n          bar.style.height = (v / max * 100) + '%';\n          bar.dataset.index = idx;\n          const val = document.createElement('div');\n          val.className = 'val';\n          val.textContent = Math.round(v);\n          bar.appendChild(val);\n          barsEl.appendChild(bar);\n          bars.push(bar);\n        });\n        updateStats();\n      }\n\n      function updateStats(){\n        compCountEl.textContent = cmpCount;\n        swapCountEl.textContent = swapCount;\n        passEl.textContent = pass;\n        sizeLabel.textContent = n;\n      }\n\n      function highlightPseudocode(line){\n        pseudo.querySelectorAll('.line').forEach(el=>{\n          el.classList.toggle('active', el.dataset.line === String(line));\n        });\n      }\n\n      // Bubble sort generator - yields steps to animate\n      function* bubbleGenerator(array, dir){\n        const n = array.length;\n        let swapped;\n        for(let i=0;i<n-1;i++){\n          swapped = false;\n          // pass i\n          yield {type:'pass', i};\n          for(let j=0;j<n-i-1;j++){\n            // compare j and j+1\n            yield {type:'compare', j, j1:j+1};\n            const a = array[j], b = array[j+1];\n            const shouldSwap = dir === 'asc' ? a > b : a < b;\n            if(shouldSwap){\n              // swap\n              yield {type:'swap', j, j1:j+1};\n              // perform swap in generator's array representation so comparisons reflect it\n              const tmp = array[j];\n              array[j] = array[j+1];\n              array[j+1] = tmp;\n              swapped = true;\n            }\n          }\n          // after each pass, element at n-i-1 is in place\n          yield {type:'sortedIndex', idx: n-i-1};\n          if(!swapped){\n            // already sorted\n            break;\n          }\n        }\n        // mark all sorted (for completeness)\n        yield {type:'done'};\n      }\n\n      // Animation helpers\n      function markAllDefault(){\n        bars.forEach(b => {\n          b.className = 'bar default';\n        });\n      }\n\n      function markCompare(j, j1){\n        markAllDefault();\n        if(bars[j]) bars[j].className = 'bar compare';\n        if(bars[j1]) bars[j1].className = 'bar compare';\n      }\n\n      function markSwap(j, j1){\n        markAllDefault();\n        if(bars[j]) bars[j].className = 'bar swap';\n        if(bars[j1]) bars[j1].className = 'bar swap';\n        // animate heights swapping visually\n        const h1 = bars[j].style.height;\n        const h2 = bars[j1].style.height;\n        const v1 = bars[j].querySelector('.val').textContent;\n        const v2 = bars[j1].querySelector('.val').textContent;\n        bars[j].style.height = h2;\n        bars[j1].style.height = h1;\n        bars[j].querySelector('.val').textContent = v2;\n        bars[j1].querySelector('.val').textContent = v1;\n        // also swap nodes in the bars array to keep indexes meaningful\n        const tmp = bars[j];\n        bars[j] = bars[j1];\n        bars[j1] = tmp;\n      }\n\n      function markSorted(idx){\n        if(bars[idx]) bars[idx].className = 'bar sorted';\n      }\n\n      function setControlsEnabled(enabled){\n        sizeRange.disabled = !enabled;\n        dirSelect.disabled = !enabled;\n        shuffleBtn.disabled = !enabled;\n      }\n\n      // Step execution: consume one yield from generator and animate\n      async function stepOnce(){\n        if(!generator) return;\n        const res = generator.next();\n        if(res.done) {\n          // finish\n          running = false;\n          clearInterval(timer);\n          timer = null;\n          pauseBtn.disabled = true;\n          startBtn.textContent = 'Start';\n          setControlsEnabled(true);\n          highlightPseudocode(null);\n          markAllDefault();\n          // mark all sorted just in case\n          bars.forEach(b => b.classList.add('sorted'));\n          return;\n        }\n        const op = res.value;\n        switch(op.type){\n          case 'pass':\n            pass = op.i + 1;\n            highlightPseudocode(1);\n            updateStats();\n            break;\n          case 'compare':\n            cmpCount++;\n            highlightPseudocode(3);\n            pass = pass; updateStats();\n            markCompare(op.j, op.j1);\n            break;\n          case 'swap':\n            swapCount++;\n            highlightPseudocode(4);\n            markSwap(op.j, op.j1);\n            updateStats();\n            break;\n          case 'sortedIndex':\n            highlightPseudocode(null);\n            markSorted(op.idx);\n            break;\n          case 'done':\n            highlightPseudocode(null);\n            break;\n        }\n      }\n\n      // Run loop for autoplay\n      function startAuto(){\n        if(running) return;\n        running = true;\n        setControlsEnabled(false);\n        startBtn.textContent = 'Running';\n        pauseBtn.disabled = false;\n        stepBtn.disabled = true;\n        sizeRange.disabled = true;\n        // use setInterval based on speed: smaller speed range value => faster (we invert)\n        const interval = Math.max(10, speed);\n        timer = setInterval(()=>{\n          // If generator completes, clear interval inside stepOnce\n          stepOnce();\n        }, interval);\n      }\n\n      function pauseAuto(){\n        running = false;\n        clearInterval(timer);\n        timer = null;\n        pauseBtn.disabled = true;\n        startBtn.textContent = 'Start';\n        stepBtn.disabled = false;\n        setControlsEnabled(true);\n      }\n\n      // Setup / event wiring\n      function resetState(newN){\n        n = newN ?? n;\n        arr = randArray(n);\n        cmpCount = 0; swapCount = 0; pass = 0;\n        generator = null;\n        running = false;\n        clearInterval(timer);\n        timer = null;\n        highlightPseudocode(null);\n        sizeRange.value = n;\n        sizeLabel.textContent = n;\n        renderArray();\n        pauseBtn.disabled = true;\n        startBtn.textContent = 'Start';\n        stepBtn.disabled = false;\n        setControlsEnabled(true);\n      }\n\n      // initialize\n      resetState(n);\n\n      // Event listeners\n      sizeRange.addEventListener('input', (e)=>{\n        const val = parseInt(e.target.value,10);\n        sizeLabel.textContent = val;\n      });\n      sizeRange.addEventListener('change', (e)=>{\n        const val = parseInt(e.target.value,10);\n        resetState(val);\n      });\n      speedRange.addEventListener('input', (e)=>{\n        speed = parseInt(e.target.value,10);\n      });\n      dirSelect.addEventListener('change', (e)=>{\n        direction = e.target.value;\n      });\n      shuffleBtn.addEventListener('click', ()=>{\n        resetState(n);\n      });\n\n      startBtn.addEventListener('click', ()=>{\n        if(running) return;\n        // If generator not created yet, create fresh using a copy of arr so internal swaps are tracked\n        if(!generator){\n          // copy the numeric values shown currently (bars heights represent arr)\n          // ensure arr matches bars values (in case user reloaded)\n          arr = bars.map(b => Number(b.querySelector('.val').textContent));\n          generator = bubbleGenerator(arr.slice(), direction);\n          cmpCount = 0; swapCount = 0; pass = 0;\n          updateStats();\n        }\n        startAuto();\n      });\n\n      pauseBtn.addEventListener('click', ()=>{\n        pauseAuto();\n      });\n\n      stepBtn.addEventListener('click', async ()=>{\n        // create generator if missing\n        if(!generator){\n          arr = bars.map(b => Number(b.querySelector('.val').textContent));\n          generator = bubbleGenerator(arr.slice(), direction);\n          cmpCount = 0; swapCount = 0; pass = 0;\n        }\n        // ensure not auto-running\n        if(running){\n          pauseAuto();\n        }\n        await stepOnce();\n      });\n\n      resetBtn.addEventListener('click', ()=>{\n        // stop and reset to new random array of same size\n        resetState(n);\n      });\n\n      // keyboard shortcuts\n      window.addEventListener('keydown', (e)=>{\n        if(e.key === ' '){\n          e.preventDefault();\n          if(running) pauseAuto();\n          else startBtn.click();\n        } else if(e.key === 'ArrowRight'){\n          e.preventDefault();\n          stepBtn.click();\n        } else if(e.key === 'r' || e.key === 'R'){\n          resetBtn.click();\n        } else if(e.key === 's' || e.key === 'S'){\n          shuffleBtn.click();\n        }\n      });\n\n      // Accessibility: announce actions\n      const liveRegion = barsEl;\n      function announce(msg){\n        // simple: update aria-live text by setting title attribute temporarily\n        liveRegion.setAttribute('aria-label', msg);\n      }\n\n      // Update interval speed if changed during running\n      setInterval(()=>{\n        if(running && timer!=null){\n          // restart interval with new speed\n          clearInterval(timer);\n          timer = setInterval(()=>stepOnce(), Math.max(10, speed));\n        }\n      }, 300);\n\n      // Initialize pseudocode highlight to none\n      highlightPseudocode(null);\n\n      // Expose nothing globally\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": false,
  "hasTest": true
}