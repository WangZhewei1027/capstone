<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sliding Window</title>
    <style>
        #sliding-window {
            position: relative;
            width: 400px;
            height: 200px;
            border: 1px solid black;
        }
        #sliding-window div {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #f0f0f0;
            border: 1px solid black;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #sliding-window div:nth-child(1) {
            top: 0;
            left: 0;
        }
        #sliding-window div:nth-child(2) {
            bottom: 0;
            left: 0;
        }
        #sliding-window div:nth-child(3) {
            top: 0;
            right: 0;
        }
    </style>
</head>
<body>
    <div id="sliding-window"></div>
    <script>
        let windowSize = 200;
        let items = Array.from({length: windowSize}, (_, i) => i);
        let currentItem = 0;
        let lastItem = 0;
        let windowStart = 0;
        let windowEnd = 0;

        const updateWindow = () => {
            if (currentItem < items.length) {
                windowStart = Math.max(windowStart, lastItem + 1);
                windowEnd = Math.min(windowEnd, currentItem + 1);
                lastItem = currentItem;
                currentItem++;
            } else {
                windowEnd = Math.min(windowEnd, items.length - 1);
            }
        };

        const updateItem = (index) => {
            if (index < windowSize) {
                lastItem = index;
                updateWindow();
            }
        };

        const updateSlidingWindow = (index) => {
            updateItem(index);
            updateWindow();
        };

        const handleWindowStart = () => {
            updateSlidingWindow(0);
        };

        const handleWindowEnd = () => {
            updateSlidingWindow(items.length - 1);
        };

        const handleItemChange = (index) => {
            updateSlidingWindow(index);
        };

        const handleWindowResize = () => {
            updateSlidingWindow(items.length - 1);
        };

        const handleWindowScroll = () => {
            updateSlidingWindow(items.length - 1);
        };

        document.getElementById('sliding-window').addEventListener('scroll', handleWindowScroll);
        document.getElementById('sliding-window').addEventListener('resize', handleWindowResize);
        document.getElementById('sliding-window').addEventListener('mousemove', handleWindowResize);

        handleWindowStart();

        document.getElementById('sliding-window').addEventListener('click', (e) => {
            if (e.target === document.getElementById('sliding-window')) {
                handleItemChange(e.target.dataset.index);
            }
        });
    </script>
</body>
</html>