<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Visualization</title>
    <style>
        #graphContainer {
            width: 80%;
            height: 600px;
            border: 1px solid #ccc;
            position: relative;
        }

        .node {
            width: 30px;
            height: 30px;
            background-color: lightblue;
            border-radius: 15px;
            position: absolute;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .edge {
            position: absolute;
            width: 2px;
            background-color: black;
            transform-origin: top left;
        }
    </style>
</head>

<body>
    <h1>Graph Visualization (Directed/Undirected)</h1>
    <div id="graphContainer"></div>
    <button onclick="addNode()">Add Node</button>
    <button onclick="toggleEdgeType()">Toggle Edge Type</button>
    <button onclick="generateGraph()">Generate Graph</button>

    <script>
        let nodes = [];
        let edges = [];
        let isDirected = true;
        const graphContainer = document.getElementById('graphContainer');

        function addNode() {
            const nodeIndex = nodes.length;
            const node = {
                id: nodeIndex,
                x: Math.random() * (graphContainer.clientWidth - 30),
                y: Math.random() * (graphContainer.clientHeight - 30)
            };
            nodes.push(node);
            drawNode(node);
        }

        function drawNode(node) {
            const nodeElement = document.createElement('div');
            nodeElement.className = 'node';
            nodeElement.style.left = node.x + 'px';
            nodeElement.style.top = node.y + 'px';
            nodeElement.innerText = node.id;
            graphContainer.appendChild(nodeElement);
        }

        function toggleEdgeType() {
            isDirected = !isDirected;
            alert(`Edge type is now: ${isDirected ? 'Directed' : 'Undirected'}`);
        }

        function generateGraph() {
            graphContainer.innerHTML = '';
            nodes = [];
            edges = [];
            for (let i = 0; i < 5; i++) {
                addNode();
            }
            drawEdges();
        }

        function drawEdges() {
            for (let i = 0; i < nodes.length - 1; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    drawEdge(nodes[i], nodes[j]);
                }
            }
        }

        function drawEdge(nodeA, nodeB) {
            const x1 = nodeA.x + 15;
            const y1 = nodeA.y + 15;
            const x2 = nodeB.x + 15;
            const y2 = nodeB.y + 15;

            const edgeElement = document.createElement('div');
            edgeElement.className = 'edge';
            const deltaX = x2 - x1;
            const deltaY = y2 - y1;
            const length = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            edgeElement.style.width = length + 'px';
            edgeElement.style.transform = `rotate(${Math.atan2(deltaY, deltaX) * (180 / Math.PI)}deg)`;
            edgeElement.style.left = x1 + 'px';
            edgeElement.style.top = y1 + 'px';

            if (isDirected) {
                edgeElement.style.borderRight = '10px solid transparent';
                edgeElement.style.borderLeft = 'none';
                edgeElement.style.borderBottom = 'none';
                edgeElement.style.borderTop = 'none';
                edgeElement.style.borderColor = `black transparent transparent transparent`;
            }

            graphContainer.appendChild(edgeElement);
        }
    </script>
</body>

</html>