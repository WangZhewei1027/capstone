<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Means Clustering Demo</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        canvas {
            border: 1px solid black;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>K-Means Clustering Demo</h1>
    <canvas id="canvas" width="500" height="500"></canvas>
    <button id="startButton">Start K-Means Clustering</button>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const points = [];
        const clusters = [];
        const numClusters = 3;
        const maxIterations = 10;

        // Generate random points
        function generateRandomPoints(numPoints) {
            for (let i = 0; i < numPoints; i++) {
                points.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    cluster: null
                });
            }
        }

        // Draw points and centroids on the canvas
        function draw(points, centroids) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            points.forEach(point => {
                ctx.fillStyle = point.cluster ? point.cluster.color : 'black';
                ctx.beginPath();
                ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                ctx.fill();
            });
            centroids.forEach(centroid => {
                ctx.fillStyle = centroid.color;
                ctx.beginPath();
                ctx.arc(centroid.x, centroid.y, 10, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        // Initialize clusters
        function initializeClusters() {
            for (let i = 0; i < numClusters; i++) {
                const centroid = {
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`
                };
                clusters.push(centroid);
            }
        }

        // Assign points to the nearest centroid
        function assignPointsToClusters() {
            points.forEach(point => {
                let closestCentroid = null;
                let minDist = Infinity;
                
                clusters.forEach((centroid, index) => {
                    const dist = Math.sqrt(Math.pow(point.x - centroid.x, 2) + Math.pow(point.y - centroid.y, 2));
                    if (dist < minDist) {
                        minDist = dist;
                        closestCentroid = index;
                    }
                });
                
                point.cluster = clusters[closestCentroid];
                point.cluster.index = closestCentroid;
            });
        }

        // Update centroid positions
        function updateCentroids() {
            clusters.forEach((centroid, index) => {
                const assignedPoints = points.filter(point => point.cluster.index === index);
                if (assignedPoints.length > 0) {
                    centroid.x = assignedPoints.reduce((sum, p) => sum + p.x, 0) / assignedPoints.length;
                    centroid.y = assignedPoints.reduce((sum, p) => sum + p.y, 0) / assignedPoints.length;
                }
            });
        }

        // K-Means clustering algorithm
        function kMeansClustering() {
            for (let i = 0; i < maxIterations; i++) {
                assignPointsToClusters();
                updateCentroids();
                draw(points, clusters);
            }
        }

        document.getElementById('startButton').addEventListener('click', () => {
            points.length = 0;
            clusters.length = 0;
            generateRandomPoints(100);
            initializeClusters();
            draw(points, clusters);
            kMeansClustering();
        });

        // Initial setup
        generateRandomPoints(100);
    </script>
</body>
</html>