{
  "id": "2d585471-d1d8-11f0-bbda-359f3f96b638",
  "timestamp": "2025-12-05T12:46:17.741Z",
  "model": "gpt-4o-mini",
  "status": "success",
  "question": "K-Nearest Neighbors (KNN)",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>K-Nearest Neighbors (KNN) Demo</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 20px;\n        }\n        canvas {\n            border: 1px solid black;\n        }\n    </style>\n</head>\n<body>\n    <h1>K-Nearest Neighbors (KNN) Demo</h1>\n    <p>Click anywhere in the canvas to add a point. The color will indicate the predicted class.</p>\n    <p>Current K value: <span id=\"kValue\">3</span></p>\n    <input type=\"number\" id=\"kInput\" min=\"1\" value=\"3\" />\n    <button id=\"setK\">Set K</button>\n    <canvas id=\"canvas\" width=\"600\" height=\"400\"></canvas>\n    \n    <script>\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n        const points = [];\n        let k = 3; // default K value\n        const colors = ['red', 'blue']; // two classes\n\n        // Draw existing points on the canvas\n        function drawPoints() {\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            points.forEach(point => {\n                ctx.fillStyle = point.color;\n                ctx.beginPath();\n                ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n                ctx.fill();\n            });\n        }\n\n        // Function to classify a new point using KNN\n        function classifyPoint(newPoint) {\n            // Calculate distance from the new point to all existing points\n            const distances = points.map(point => ({\n                point,\n                distance: Math.sqrt(Math.pow(point.x - newPoint.x, 2) + Math.pow(point.y - newPoint.y, 2))\n            })).sort((a, b) => a.distance - b.distance);\n\n            // Select K nearest neighbors\n            const neighbors = distances.slice(0, k);\n            const votes = {};\n\n            // Count votes\n            neighbors.forEach(neighbor => {\n                const cls = neighbor.point.class;\n                if (votes[cls]) {\n                    votes[cls]++;\n                } else {\n                    votes[cls] = 1;\n                }\n            });\n\n            // Determine the class of the new point based on majority voting\n            let predictedClass = null;\n            let maxVotes = 0;\n            for (const cls in votes) {\n                if (votes[cls] > maxVotes) {\n                    maxVotes = votes[cls];\n                    predictedClass = cls;\n                }\n            }\n\n            return predictedClass;\n        }\n\n        // Add a new point to the canvas and classify it\n        canvas.addEventListener('click', (event) => {\n            const rect = canvas.getBoundingClientRect();\n            const x = event.clientX - rect.left;\n            const y = event.clientY - rect.top;\n            \n            // Create a new point with random class (0 or 1)\n            const classIndex = Math.floor(Math.random() * 2);\n            const color = colors[classIndex];\n            const newPoint = { x, y, color, class: classIndex };\n\n            // Classify the newly created point\n            const predictedClass = classifyPoint(newPoint);\n            newPoint.color = colors[predictedClass]; // Set color based on predicted class\n\n            points.push(newPoint);\n            drawPoints();\n        });\n\n        // Set K value from input\n        document.getElementById('setK').onclick = () => {\n            k = parseInt(document.getElementById('kInput').value);\n            document.getElementById('kValue').innerText = k;\n        };\n\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "K-Nearest Neighbors (KNN)"
    }
  ],
  "topic": "K-Nearest Neighbors (KNN)",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}