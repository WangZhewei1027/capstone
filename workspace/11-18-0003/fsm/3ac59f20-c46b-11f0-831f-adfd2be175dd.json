{
  "topic": "Interactive Heap Explorer (Min / Max)",
  "description": "Finite state machine modeling user interactions, animations, and data processing for an interactive heap visualization (min/max). Captures play/pause/step, building, inserting/removing, comparing/swapping animations, loading input, and completion/error handling.",
  "states": [
    {
      "name": "idle",
      "onEnter": "renderIdle",
      "onExit": "noop",
      "on": {
        "PLAY": "playing",
        "STEP": "stepping",
        "BUILD_HEAP": "building",
        "INSERT": "inserting",
        "REMOVE": "removing",
        "RESET": "idle",
        "RANDOMIZE": "idle",
        "TOGGLE_MODE": "idle",
        "LOAD_ARRAY": "loading",
        "CHANGE_SPEED": "idle"
      }
    },
    {
      "name": "playing",
      "onEnter": "startAutoPlay",
      "onExit": "stopAutoPlay",
      "on": {
        "PAUSE": "paused",
        "STEP": "stepping",
        "STOP": "idle",
        "ANIMATION_TICK": "comparing",
        "COMPLETE": "done",
        "CHANGE_SPEED": "playing",
        "TOGGLE_MODE": "playing",
        "RESET": "idle"
      }
    },
    {
      "name": "paused",
      "onEnter": "pauseAnimations",
      "onExit": "resumeAnimations",
      "on": {
        "PLAY": "playing",
        "STEP": "stepping",
        "RESET": "idle",
        "BUILD_HEAP": "building",
        "TOGGLE_MODE": "paused",
        "CHANGE_SPEED": "paused"
      }
    },
    {
      "name": "stepping",
      "onEnter": "performStep",
      "onExit": "clearHighlights",
      "on": {
        "STEP_COMPLETE": "paused",
        "ERROR": "error",
        "ANIMATION_END": "paused",
        "TOGGLE_MODE": "stepping"
      }
    },
    {
      "name": "building",
      "onEnter": "buildHeap",
      "onExit": "clearBuildAnimations",
      "on": {
        "BUILD_COMPLETE": "idle",
        "ANIMATION_END": "idle",
        "CANCEL": "idle",
        "ERROR": "error"
      }
    },
    {
      "name": "loading",
      "onEnter": "parseInput",
      "onExit": "noop",
      "on": {
        "LOAD_COMPLETE": "idle",
        "LOAD_ERROR": "error",
        "CANCEL": "idle"
      }
    },
    {
      "name": "inserting",
      "onEnter": "insertValue",
      "onExit": "clearHighlights",
      "on": {
        "INSERT_COMPLETE": "idle",
        "ANIMATION_END": "idle",
        "ERROR": "error",
        "CANCEL": "idle"
      }
    },
    {
      "name": "removing",
      "onEnter": "removeRoot",
      "onExit": "clearHighlights",
      "on": {
        "REMOVE_COMPLETE": "idle",
        "ANIMATION_END": "idle",
        "ERROR": "error",
        "CANCEL": "idle"
      }
    },
    {
      "name": "comparing",
      "onEnter": "highlightCompare",
      "onExit": "clearHighlights",
      "on": {
        "COMPARE_DONE": "idle",
        "SWAP_TRIGGER": "swapping",
        "ERROR": "error",
        "ANIMATION_END": "idle"
      }
    },
    {
      "name": "swapping",
      "onEnter": "animateSwap",
      "onExit": "applySwap",
      "on": {
        "SWAP_DONE": "comparing",
        "STEP_COMPLETE": "paused",
        "ANIMATION_END": "idle",
        "ERROR": "error"
      }
    },
    {
      "name": "done",
      "onEnter": "renderDone",
      "onExit": "noop",
      "on": {
        "RESET": "idle",
        "REPLAY": "playing",
        "TOGGLE_MODE": "done",
        "RANDOMIZE": "idle"
      }
    },
    {
      "name": "error",
      "onEnter": "showError",
      "onExit": "dismissError",
      "on": {
        "RESET": "idle",
        "CANCEL": "idle",
        "RETRY": "loading"
      }
    }
  ],
  "events": [
    "PLAY",
    "PAUSE",
    "STOP",
    "STEP",
    "STEP_COMPLETE",
    "BUILD_HEAP",
    "BUILD_COMPLETE",
    "INSERT",
    "INSERT_COMPLETE",
    "REMOVE",
    "REMOVE_COMPLETE",
    "RANDOMIZE",
    "RESET",
    "TOGGLE_MODE",
    "LOAD_ARRAY",
    "LOAD_COMPLETE",
    "LOAD_ERROR",
    "CHANGE_SPEED",
    "ANIMATION_TICK",
    "ANIMATION_END",
    "COMPARE_DONE",
    "SWAP_TRIGGER",
    "SWAP_DONE",
    "COMPLETE",
    "ERROR",
    "CANCEL",
    "REPLAY",
    "RETRY"
  ],
  "notes": "This FSM models UI-driven transitions and animation phases used by a heap visualizer. onEnter/onExit actions are abstract names for rendering, animation control, and data operations. Some transitions (for example after a step) may conditionally route to playing vs paused depending on an autoplay flag; here STEP_COMPLETE routes to paused by default. Events like CHANGE_SPEED, TOGGLE_MODE, and RANDOMIZE are treated as UI events that may not change the primary visualization state but will trigger the corresponding onEnter/onExit actions."
}