{
  "topic": "Interactive Binary Search Tree Explorer",
  "description": "Models the user interactions, animation flow, and operation lifecycle (insert, search, delete, step, play/pause, reset) in the Binary Search Tree visualization app.",
  "states": [
    {
      "name": "idle",
      "onEnter": "renderTree",
      "onExit": "clearHighlights",
      "on": {
        "CLICK_INSERT": "editing",
        "CLICK_DELETE": "editing",
        "CLICK_SEARCH": "editing",
        "INPUT_CHANGE": "editing",
        "NODE_CLICK": "nodeSelected",
        "CLICK_PLAY": "animating",
        "CLICK_RESET": "resetting"
      }
    },
    {
      "name": "editing",
      "onEnter": "focusInput",
      "onExit": "blurInput",
      "on": {
        "INPUT_CHANGE": "editing",
        "SUBMIT_INSERT": "animating",
        "SUBMIT_DELETE": "animating",
        "SUBMIT_SEARCH": "animating",
        "CANCEL": "idle",
        "CLICK_RESET": "resetting"
      }
    },
    {
      "name": "animating",
      "onEnter": "startAnimation",
      "onExit": "stopAnimation",
      "on": {
        "ANIMATION_STEP": "comparing",
        "CLICK_STEP": "comparing",
        "ANIMATION_END": "done",
        "CLICK_PAUSE": "paused",
        "ERROR": "error",
        "CLICK_RESET": "resetting",
        "NODE_CLICK": "nodeSelected"
      }
    },
    {
      "name": "comparing",
      "onEnter": "highlightNode",
      "onExit": "unhighlightNode",
      "on": {
        "COMPARE_NEXT": "animating",
        "FOUND": "highlighting",
        "NOT_FOUND": "animating",
        "CLICK_PAUSE": "paused",
        "ANIMATION_END": "done",
        "ERROR": "error"
      }
    },
    {
      "name": "highlighting",
      "onEnter": "animateHighlight",
      "onExit": "logFound",
      "on": {
        "CLICK_STEP": "animating",
        "ANIMATION_END": "done",
        "CLICK_PAUSE": "paused",
        "CLICK_RESET": "resetting",
        "ERROR": "error"
      }
    },
    {
      "name": "paused",
      "onEnter": "pauseAnimation",
      "onExit": "resumeAnimation",
      "on": {
        "CLICK_PLAY": "animating",
        "CLICK_STEP": "comparing",
        "CLICK_RESET": "resetting",
        "CANCEL": "idle",
        "ERROR": "error",
        "NODE_CLICK": "nodeSelected"
      }
    },
    {
      "name": "done",
      "onEnter": "showCompletion",
      "onExit": "noop",
      "on": {
        "CLICK_RESET": "resetting",
        "CLICK_PLAY": "animating",
        "CLICK_INSERT": "editing",
        "CLICK_SEARCH": "editing",
        "NODE_CLICK": "nodeSelected"
      }
    },
    {
      "name": "nodeSelected",
      "onEnter": "selectNode",
      "onExit": "deselectNode",
      "on": {
        "CLICK_DELETE": "animating",
        "CLICK_INSERT": "editing",
        "NODE_DRAG_START": "animating",
        "NODE_DRAG_END": "idle",
        "CANCEL": "idle",
        "CLICK_RESET": "resetting"
      }
    },
    {
      "name": "resetting",
      "onEnter": "resetTree",
      "onExit": "renderTree",
      "on": {
        "RESET_COMPLETE": "idle",
        "CLICK_PLAY": "animating",
        "ERROR": "error"
      }
    },
    {
      "name": "error",
      "onEnter": "showError",
      "onExit": "clearError",
      "on": {
        "CLICK_RESET": "resetting",
        "CANCEL": "idle",
        "CLICK_PLAY": "animating"
      }
    }
  ],
  "events": [
    "CLICK_INSERT",
    "CLICK_DELETE",
    "CLICK_SEARCH",
    "INPUT_CHANGE",
    "SUBMIT_INSERT",
    "SUBMIT_DELETE",
    "SUBMIT_SEARCH",
    "CLICK_PLAY",
    "CLICK_PAUSE",
    "CLICK_STEP",
    "CLICK_RESET",
    "NODE_CLICK",
    "NODE_DRAG_START",
    "NODE_DRAG_END",
    "ANIMATION_STEP",
    "ANIMATION_END",
    "COMPARE_NEXT",
    "FOUND",
    "NOT_FOUND",
    "RESET_COMPLETE",
    "ERROR",
    "CANCEL"
  ],
  "notes": "This FSM is a conservative, implementation-oriented model derived from the UI structure and typical BST visualizer behaviors. States are coarse-grained (animating vs comparing vs highlighting) to reflect animation lifecycle (start, step/compare, highlight found, pause, finish). onEnter/onExit actions list typical side-effects (rendering, logging, highlighting, starting/stopping animations). Specific operation routing (insert/search/delete) is handled by the 'animating' flow and corresponding events (COMPARE_NEXT, FOUND, NOT_FOUND). UI controls (buttons, inputs, pseudocode stepping) map to events like CLICK_PLAY, CLICK_STEP, SUBMIT_* and influence transitions accordingly."
}