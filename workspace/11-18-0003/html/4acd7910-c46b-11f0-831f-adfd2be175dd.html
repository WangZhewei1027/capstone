<!DOCTYPE html>
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Interactive Binary Search Tree Explorer</title>
<style>
  :root{
    --bg:#0f1724;
    --panel:#0b1220;
    --accent:#38bdf8;
    --muted:#94a3b8;
    --card:#0b1220;
    --good:#10b981;
    --danger:#ef4444;
    --glass: rgba(255,255,255,0.03);
    --transition: 300ms cubic-bezier(.2,.9,.2,1);
  }
  html,body{
    height:100%;
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#071021 0%, #07121a 35%, #041627 100%);
    color: #e6eef6;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  .container{
    display:grid;
    grid-template-columns: 1fr 420px;
    gap:18px;
    padding:18px;
    height:100vh;
    box-sizing:border-box;
  }

  header{
    grid-column: 1/3;
    display:flex;
    align-items:center;
    gap:14px;
    padding:12px 18px;
    border-radius:10px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    box-shadow: 0 1px 0 rgba(255,255,255,0.02) inset;
    margin-bottom:4px;
  }
  header h1{
    margin:0;
    font-size:18px;
    letter-spacing:0.2px;
  }
  header p{ margin:0; color:var(--muted); font-size:12px; }

  /* Main left visualization */
  .main {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    padding:12px;
    height: calc(100vh - 120px);
    display:flex;
    flex-direction:column;
    gap:12px;
    box-shadow: 0 6px 30px rgba(2,6,23,0.6);
  }

  .toolbar{
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:wrap;
  }
  .toolbar input[type="number"], .toolbar input[type="text"]{
    background:var(--glass);
    border:1px solid rgba(255,255,255,0.03);
    color:var(--muted);
    padding:8px 10px;
    border-radius:8px;
    width:110px;
    outline:none;
  }
  .btn{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04);
    color:var(--accent);
    padding:8px 12px;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    transition:all var(--transition);
    display:inline-flex;
    align-items:center;
    gap:8px;
    font-size:13px;
  }
  .btn:hover{ transform:translateY(-2px); }
  .btn.secondary{ color:var(--muted); border-color: transparent; }
  .btn.ghost{ background:transparent; color:var(--muted); }

  .visual{
    flex:1;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));
    border-radius:10px;
    padding:10px;
    overflow:auto;
    position:relative;
  }

  /* SVG tree area */
  #svgRoot{
    width:100%;
    height:100%;
    touch-action:none;
  }

  /* Right side panels */
  .side{
    display:flex;
    flex-direction:column;
    gap:12px;
    height: calc(100vh - 120px);
  }
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    padding:12px;
    box-shadow: 0 6px 30px rgba(2,6,23,0.6);
    overflow:auto;
  }
  .card h3{
    margin:0 0 8px 0;
    font-size:14px;
  }
  .controls-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

  .small{
    font-size:12px;
    color:var(--muted);
  }
  .pseudocode{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));
    padding:10px;
    border-radius:8px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    font-size:12px;
    color:#cfefff;
    line-height:1.5;
    max-height:260px;
    overflow:auto;
  }
  .pseudocode .line{ padding:6px 8px; border-radius:6px; display:block; }
  .pseudocode .current{ background: rgba(56,189,248,0.08); color:var(--accent); box-shadow: inset 0 0 0 1px rgba(56,189,248,0.06); }

  .log{
    background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);
    padding:8px;
    border-radius:8px;
    font-size:13px;
    color:var(--muted);
    max-height:220px;
    overflow:auto;
  }

  .stats{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top:8px;
  }
  .stat{
    background:rgba(255,255,255,0.02);
    padding:8px 10px;
    border-radius:8px;
    font-size:13px;
    color:var(--muted);
  }

  /* Node and link styles for SVG - use variables via style attribute below */
  .node circle{
    fill: rgba(2,6,23,0.9);
    stroke: rgba(255,255,255,0.06);
    stroke-width:2;
    r:22;
    transition: transform var(--transition), fill var(--transition), stroke var(--transition);
  }
  .node text{
    fill:var(--accent);
    font-weight:700;
    font-size:12px;
    pointer-events:none;
  }
  .link{
    stroke: rgba(255,255,255,0.06);
    stroke-width:3;
    transition: stroke var(--transition), opacity var(--transition);
  }

  .highlight{
    stroke: rgba(56,189,248,0.9) !important;
    stroke-width:4 !important;
    filter: drop-shadow(0 6px 14px rgba(56,189,248,0.06));
  }
  .flash{
    animation: flash 700ms ease