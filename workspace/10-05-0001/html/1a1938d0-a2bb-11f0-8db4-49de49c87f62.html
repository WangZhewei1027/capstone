<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>化学教学：H2O 转化为 H2（概念与模拟）</title>
<style>
  :root {
    --bg:#0f172a;
    --panel:#111827;
    --text:#e5e7eb;
    --accent:#60a5fa;
    --ok:#34d399;
    --warn:#f59e0b;
    --danger:#ef4444;
    --muted:#9ca3af;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji";
    background:linear-gradient(160deg,#0f172a,#0b1020);
    color:var(--text);
  }
  header{
    padding:28px 20px 8px;
    text-align:center;
  }
  header h1{
    margin:0 0 8px;
    font-size:28px;
    letter-spacing:0.5px;
  }
  header p{
    margin:0 auto;
    max-width:900px;
    color:var(--muted);
    line-height:1.6;
  }
  .container{
    max-width:1100px;
    margin:16px auto 40px;
    padding:0 16px;
  }
  .grid{
    display:grid;
    grid-template-columns:1fr;
    gap:16px;
  }
  @media(min-width:980px){
    .grid{grid-template-columns:1.1fr 1fr}
  }
  .card{
    background:linear-gradient(180deg,#0f192b,#0c1323);
    border:1px solid #1f2937;
    border-radius:14px;
    box-shadow:0 12px 24px rgba(0,0,0,0.35);
    overflow:hidden;
  }
  .card header{
    padding:14px 16px;
    text-align:left;
    background:rgba(17,24,39,0.6);
    border-bottom:1px solid #1f2937;
  }
  .card header h2{
    margin:0;
    font-size:18px;
  }
  .section{
    padding:16px;
  }
  .row{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
    margin:8px 0;
  }
  label{
    font-size:14px;
    color:#cbd5e1;
  }
  input[type=number],select,input[type=range]{
    appearance:none;
    background:#0b1220;
    border:1px solid #1f2937;
    color:var(--text);
    border-radius:10px;
    padding:8px 10px;
    outline:none;
  }
  input[type=number]{width:90px}
  select{min-width:180px}
  input[type=range]{
    width:260px;
    height:34px;
    padding:0;
  }
  .small{
    font-size:12px;
    color:var(--muted);
  }
  .button{
    background:linear-gradient(180deg,#2563eb,#1d4ed8);
    border:1px solid #1e40af;
    color:white;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
  }
  .button.secondary{
    background:#0b1220;
    border-color:#1f2937;
    color:#cbd5e1;
  }
  .button.danger{
    background:linear-gradient(180deg,#ef4444,#dc2626);
    border-color:#b91c1c;
  }
  .pill{
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    background:#0b1220;
    border:1px solid #1f2937;
    color:#cbd5e1;
    font-size:12px;
    margin-left:8px;
  }
  .equation{
    font-family:"SF Mono","Cascadia Code",Consolas,Monaco,monospace;
    background:#0b1220;
    border:1px solid #1f2937;
    border-radius:10px;
    padding:10px;
    overflow:auto;
  }
  .ok{color:var(--ok)}
  .warn{color:var(--warn)}
  .danger{color:var(--danger)}
  .status{
    margin-top:6px;
    padding:8px 10px;
    border-radius:10px;
    background:rgba(17,24,39,0.5);
    border:1px solid #1f2937;
  }
  .sim{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
    height:280px;
    margin-top:10px;
  }
  .electrode{
    position:relative;
    border:1px dashed #334155;
    border-radius:16px;
    background:linear-gradient(180deg,#07101e,#091426);
    overflow:hidden;
  }
  .electrode .title{
    position:absolute;
    top:8px; left:10px;
    font-size:13px;
    color:#93c5fd;
    background:#0b1220;
    border:1px solid #1f2937;
    padding:4px 8px;
    border-radius:999px;
  }
  .electrode .label{
    position:absolute;
    bottom:8px; right:10px;
    font-size:12px;
    color:#cbd5e1;
    opacity:0.8;
  }
  .bubble{
    position:absolute;
    bottom:-16px;
    width:10px; height:10px;
    border-radius:50%;
    opacity:0.85;
    transform:translateX(0) translateY(0);
    will-change:transform,opacity;
  }
  .bubble.h2{
    background:radial-gradient(circle at 30% 30%,#93c5fd,#1e3a8a);
    border:1px solid #3b82f6;
    box-shadow:0 0 8px rgba(59,130,246,0.6);
  }
  .bubble.o2{
    background:radial-gradient(circle at 30% 30%,#fda4af,#7f1d1d);
    border:1px solid #ef4444;
    box-shadow:0 0 8px rgba(239,68,68,0.6);
  }
  .metrics{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px;
    margin-top:10px;
  }
  .metric{
    background:#0b1220;
    border:1px solid #1f2937;
    border-radius:12px;
    padding:10px;
    text-align:center;
  }
  .metric .name{
    font-size:12px;
    color:#94a3b8;
  }
  .metric .val{
    font-size:18px;
    margin-top:4px;
  }
  .legend{
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:wrap;
    margin-top:6px;
  }
  .legend .key{
    display:flex; align-items:center; gap:6px;
    font-size:12px; color:#cbd5e1;
    padding:6px 8px;
    border-radius:999px;
    background:#0b1220; border:1px solid #1f2937;
  }
  .dot{
    width:12px; height:12px; border-radius:50%;
  }
  .dot.h2{background:radial-gradient(#93c5fd,#1e3a8a); border:1px solid #3b82f6}
  .dot.o2{background:radial-gradient(#fda4af,#7f1d1d); border:1px solid #ef4444}
  .footnote{
    font-size:12px;
    color:#94a3b8;
    margin-top:8px;
  }
  .notice{
    margin-top:10px;
    padding:10px;
    border-radius:12px;
    background:rgba(253,230,138,0.08);
    border:1px solid rgba(245,158,11,0.4);
    color:#fbbf24;
  }
  .safe{
    margin:16px 0 0;
    padding:12px;
    border-radius:12px;
    background:rgba(34,197,94,0.08);
    border:1px solid rgba(34,197,94,0.4);
    color:#86efac;
  }
  .calc{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
  }
  @media(max-width:720px){
    .calc{grid-template-columns:1fr}
    .sim{grid-template-columns:1fr; height:380px}
  }
</style>
</head>
<body>
<header>
  <h1>H2O 转化为 H2 的化学教学（概念与模拟）</h1>
  <p>本页面用互动方式讲解水分解为氢气（H2）与氧气（O2）的基本化学原理。重点是化学守恒、半反应、热力学电位与催化影响。内容仅用于课堂概念演示，不包含任何实际操作步骤或设备指导。</p>
</header>

<div class="container">
  <div class="grid">

    <!-- 左侧：反应与原理 -->
    <div class="card">
      <header><h2>总体反应与配平</h2></header>
      <div class="section">
        <div class="equation" id="overallEq">待配平： a H₂O → b H₂ + c O₂</div>
        <div class="row">
          <label>系数 a (H₂O)</label><input type="number" id="coefA" value="2" min="1" step="1">
          <label>系数 b (H₂)</label><input type="number" id="coefB" value="2" min="1" step="1">
          <label>系数 c (O₂)</label><input type="number" id="coefC" value="1" min="1" step="1">
          <button class="button" id="checkBtn">检验配平</button>
          <button class="button secondary" id="autoBtn">自动平衡</button>
        </div>
        <div class="status" id="balanceStatus">提示：守恒检查将比较左右两侧的 H 与 O 原子数。</div>
        <div class="footnote">质量守恒：反应前后元素原子总数不变。正确配平为 2 H₂O → 2 H₂ + O₂（H 原子 4→4，O 原子 2→2）。</div>
      </div>

      <header><h2>半反应与介质（酸/碱）</h2></header>
      <div class="section">
        <div class="row">
          <label>电解介质</label>
          <select id="envSelect">
            <option value="neutral">中性/纯水（示意）</option>
            <option value="acidic">酸性（示意）</option>
            <option value="alkaline">碱性（示意）</option>
          </select>
          <span class="pill">理论平衡电位约 1.23 V（25°C）</span>
        </div>
        <div class="equation" id="halfReactions"></div>
        <div class="footnote">说明：水电解由两个电极上的半反应构成。阴极发生氢析出（HER），阳极发生氧析出（OER）。不同介质下半反应的写法不同，但总体守恒相同。</div>
      </div>

      <header><h2>能量与电位（概念）</h2></header>
      <div class="section">
        <ul class="small">
          <li>热力学最低电压 ~ 1.23 V（标准状态）。实际需要更高电压来克服“过电位”（动力学阻力）与电解质/电极的电阻。</li>
          <li>催化剂可降低过电位，使同样电压下反应更容易进行。</li>
          <li>总体反应（按每 2 H₂O）：2 H₂O(l) → 2 H₂(g) + O₂(g)；电子转移总数 n = 4（对应 4 e⁻）。</li>
        </ul>
        <div class="safe">安全提示：氢气高度易燃，氧气助燃。本页仅为概念教学的可视化，不提供任何实验或家庭操作指导，请勿尝试实际制备。</div>
      </div>
    </div>

    <!-- 右侧：电解模拟与计算 -->
    <div class="card">
      <header><h2>电解模拟（概念动画）</h2></header>
      <div class="section">
        <div class="row">
          <label>施加电压</label>
          <input type="range" id="voltage" min="0" max="3" step="0.01" value="1.2">
          <span class="pill">V = <span id="vVal">1.20</span> V</span>
        </div>
        <div class="row">
          <label>催化/电极组合</label>
          <select id="catSelect">
            <option value="common">普通金属电极（示意）</option>
            <option value="nife">镍/铁（碱性更优，示意）</option>
            <option value="pti">铂/IrO₂（高性能，示意）</option>
            <option value="ideal">理论理想催化剂（仅理论）</option>
          </select>
        </div>
        <div class="status">
          门槛电压（热力学 + 过电位）≈ <span id="threshold">-</span> V；
          当前反应速率（相对）≈ <span id="rate">0.00</span>
        </div>
        <div class="legend">
          <div class="key"><span class="dot h2"></span> 阴极：H₂ 气泡（氢气）</div>
          <div class="key"><span class="dot o2"></span> 阳极：O₂ 氣泡（氧气）</div>
          <div class="key small">气泡数量按 2:1 比例（H₂:O₂）示意</div>
        </div>
        <div class="sim">
          <div class="electrode" id="cathode">
            <div class="title">阴极（还原）：HER</div>
            <div class="label">H₂ 气泡示意</div>
          </div>
          <div class="electrode" id="anode">
            <div class="title">阳极（氧化）：OER</div>
            <div class="label">O₂ 氣泡示意</div>
          </div>
        </div>
        <div class="metrics">
          <div class="metric">
            <div class="name">H₂ 计数（相对）</div>
            <div class="val" id="h2Count">0</div>
          </div>
          <div class="metric">
            <div class="name">O₂ 计数（相对）</div>
            <div class="val" id="o2Count">0</div>
          </div>
          <div class="metric">
            <div class="name">比例 H₂ : O₂</div>
            <div class="val" id="ratio">—</div>
          </div>
        </div>
        <div class="row" style="margin-top:10px">
          <button class="button" id="startBtn">开始</button>
          <button class="button secondary" id="pauseBtn">暂停</button>
          <button class="button danger" id="resetBtn">重置</button>
        </div>
        <div class="notice">此动画仅为概念演示：当施加电压超过门槛时，气泡生成速率增加。并不代表真实装置或数量，请勿据此进行任何实际尝试。</div>
      </div>

      <header><h2>法拉第定律（概念计算）</h2></header>
      <div class="section">
        <div class="calc">
          <div>
            <label>通过电荷 Q（库仑，示意）</label>
            <input type="range" id="chargeRange" min="0" max="200000" step="1000" value="50000">
            <div class="pill">Q = <span id="qVal">50000</span> C</div>
            <div class="small" style="margin-top:4px">法拉第常数 F ≈ 96485 C/mol</div>
          </div>
          <div>
            <div class="equation" id="faradayOut">
              n(H₂) = Q / (2F) = 0 mol<br>
              n(O₂) = Q / (4F) = 0 mol
            </div>
            <div class="footnote">
              说明：每生成 1 mol H₂ 需要 2 mol 电子（2F 库仑）；每生成 1 mol O₂ 需要 4 mol 电子（4F 库仑）。此为理想计算，忽略损耗与副反应。
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
(function(){
  // UI elements
  const coefA = document.getElementById('coefA');
  const coefB = document.getElementById('coefB');
  const coefC = document.getElementById('coefC');
  const overallEq = document.getElementById('overallEq');
  const balanceStatus = document.getElementById('balanceStatus');
  const checkBtn = document.getElementById('checkBtn');
  const autoBtn = document.getElementById('autoBtn');

  const envSelect = document.getElementById('envSelect');
  const halfReactions = document.getElementById('halfReactions');

  const voltageInput = document.getElementById('voltage');
  const vVal = document.getElementById('vVal');
  const catSelect = document.getElementById('catSelect');
  const thresholdSpan = document.getElementById('threshold');
  const rateSpan = document.getElementById('rate');

  const cathode = document.getElementById('cathode');
  const anode = document.getElementById('anode');
  const h2CountEl = document.getElementById('h2Count');
  const o2CountEl = document.getElementById('o2Count');
  const ratioEl = document.getElementById('ratio');

  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const resetBtn = document.getElementById('resetBtn');

  const chargeRange = document.getElementById('chargeRange');
  const qVal = document.getElementById('qVal');
  const faradayOut = document.getElementById('faradayOut');

  // Constants and state
  const F = 96485;           // Faraday constant C/mol
  const E_thermo = 1.23;     // Theoretical minimum voltage in V
  const catalysts = {
    common: { her: 0.60, oer: 0.80 },
    nife:   { her: 0.30, oer: 0.30 },
    pti:    { her: 0.10, oer: 0.20 },
    ideal:  { her: 0.00, oer: 0.00 }
  };
  let simRunning = false;
  let simTimer = null;
  let h2Count = 0;
  let o2Count = 0;
  let h2Acc = 0;
  let o2Acc = 0;

  // Helpers
  function updateOverallEq(){
    const a = Number(coefA.value||0);
    const b = Number(coefB.value||0);
    const c = Number(coefC.value||0);
    overallEq.textContent = `a H₂O → b H₂ + c O₂    当前： ${a} H₂O → ${b} H₂ + ${c} O₂`;
  }

  function checkBalance(){
    const a = Number(coefA.value||0);
    const b = Number(coefB.value||0);
    const c = Number(coefC.value||0);
    const leftH = 2*a, leftO = a;
    const rightH = 2*b, rightO = 2*c;
    const ok = (leftH === rightH) && (leftO === rightO);
    if(ok){
      balanceStatus.innerHTML = `<span class="ok">配平正确！</span> H 原子：${leftH} = ${rightH}，O 原子：${leftO} = ${rightO}`;
    }else{
      balanceStatus.innerHTML = `<span class="warn">未配平。</span> 左侧 H=${leftH}, O=${leftO}；右侧 H=${rightH}, O=${rightO}`;
    }
  }

  function autoBalance(){
    coefA.value = 2; coefB.value = 2; coefC.value = 1;
    updateOverallEq();
    checkBalance();
  }

  function updateHalfReactions(){
    const env = envSelect.value;
    let cath = '', an = '';
    if(env === 'acidic'){
      cath = '阴极（还原，HER，酸性）： 2 H⁺ + 2 e⁻ → H₂';
      an   = '阳极（氧化，OER，酸性）： 2 H₂O → O₂ + 4 H⁺ + 4 e⁻';
    }else if(env === 'alkaline'){
      cath = '阴极（还原，HER，碱性）： 2 H₂O + 2 e⁻ → H₂ + 2 OH⁻';
      an   = '阳极（氧化，OER，碱性）： 4 OH⁻ → O₂ + 2 H₂O + 4 e⁻';
    }else{
      cath = '阴极（还原，HER，中性示意）： 2 H₂O + 2 e⁻ → H₂ + 2 OH⁻';
      an   = '阳极（氧化，OER，中性示意）： 2 H₂O → O₂ + 4 H⁺ + 4 e⁻（净效应与酸/碱一致）';
    }
    halfReactions.innerHTML = `${cath}<br>${an}`;
    computeThresholdAndRate(); // recalc with environment (conceptual, threshold stays same thermodynamically)
  }

  function computeThresholdAndRate(){
    const cat = catalysts[catSelect.value] || catalysts.common;
    const applied = Number(voltageInput.value);
    const threshold = +(E_thermo + cat.her + cat.oer).toFixed(2);
    const over = applied - threshold;
    const rate = over > 0 ? over * 8 : 0; // relative bubble rate per second
    thresholdSpan.textContent = threshold.toFixed(2);
    rateSpan.textContent = rate.toFixed(2);
    vVal.textContent = applied.toFixed(2);
    return { threshold, rate };
  }

  function spawnBubble(container, type){
    const b = document.createElement('div');
    b.className = `bubble ${type}`;
    // random x position
    const W = container.clientWidth;
    const H = container.clientHeight;
    const x = Math.random()*(W-20)+6;
    const size = type === 'o2' ? (12 + Math.random()*10) : (8 + Math.random()*8);
    b.style.left = `${x}px`;
    b.style.width = `${size}px`;
    b.style.height = `${size}px`;
    container.appendChild(b);
    const duration = 2200 + Math.random()*1600;
    const drift = (Math.random()-0.5)*20;
    const start = performance.now();
    function step(t){
      const elap = t - start;
      const y = H + 16 - (elap/duration)*(H+36);
      const dx = (elap/duration)*drift;
      const op = 1 - (elap/duration);
      b.style.transform = `translate(${dx}px, ${y}px)`;
      b.style.opacity = op.toFixed(2);
      if(elap < duration){
        requestAnimationFrame(step);
      }else{
        b.remove();
      }
    }
    requestAnimationFrame(step);
  }

  function updateCountsDisplay(){
    h2CountEl.textContent = Math.floor(h2Count);
    o2CountEl.textContent = Math.floor(o2Count);
    const r = (o2Count > 0) ? (h2Count/o2Count) : 0;
    ratioEl.textContent = (o2Count>0) ? `${r.toFixed(2)} : 1` : '—';
  }

  function startSim(){
    if(simRunning) return;
    simRunning = true;
    let last = performance.now();
    simTimer = requestAnimationFrame(function tick(now){
      if(!simRunning){ return; }
      const dt = Math.min((now - last)/1000, 0.1); // seconds
      last = now;
      const { rate } = computeThresholdAndRate();
      // expected bubbles per second for H2 and O2 with 2:1 ratio
      const h2Rate = rate * 2/3 * 2; // emphasize H2
      const o2Rate = rate * 1/3;
      h2Acc += h2Rate * dt;
      o2Acc += o2Rate * dt;
      // spawn integer bubbles from accumulator
      while(h2Acc >= 1){
        spawnBubble(cathode,'h2');
        h2Acc -= 1;
        h2Count += 1;
      }
      while(o2Acc >= 1){
        spawnBubble(anode,'o2');
        o2Acc -= 1;
        o2Count += 1;
      }
      updateCountsDisplay();
      simTimer = requestAnimationFrame(tick);
    });
  }

  function pauseSim(){
    simRunning = false;
  }

  function resetSim(){
    pauseSim();
    h2Count = 0; o2Count = 0; h2Acc = 0; o2Acc = 0;
    updateCountsDisplay();
    // clear bubbles
    Array.from(cathode.querySelectorAll('.bubble')).forEach(n=>n.remove());
    Array.from(anode.querySelectorAll('.bubble')).forEach(n=>n.remove());
  }

  function updateFaraday(){
    const Q = Number(chargeRange.value||0);
    qVal.textContent = Q.toFixed(0);
    const nH2 = Q/(2*F);
    const nO2 = Q/(4*F);
    faradayOut.innerHTML = `n(H₂) = Q / (2F) = ${(nH2).toFixed(4)} mol<br>`+
                           `n(O₂) = Q / (4F) = ${(nO2).toFixed(4)} mol`;
  }

  // Event wiring
  [coefA,coefB,coefC].forEach(i=>{
    i.addEventListener('input', ()=>{
      updateOverallEq();
      checkBalance();
    });
  });
  checkBtn.addEventListener('click', checkBalance);
  autoBtn.addEventListener('click', autoBalance);

  envSelect.addEventListener('change', updateHalfReactions);
  voltageInput.addEventListener('input', computeThresholdAndRate);
  catSelect.addEventListener('change', computeThresholdAndRate);

  startBtn.addEventListener('click', startSim);
  pauseBtn.addEventListener('click', pauseSim);
  resetBtn.addEventListener('click', resetSim);

  chargeRange.addEventListener('input', updateFaraday);

  // Init
  updateOverallEq();
  checkBalance();
  updateHalfReactions();
  computeThresholdAndRate();
  updateCountsDisplay();
  updateFaraday();
})();
</script>
</body>
</html>