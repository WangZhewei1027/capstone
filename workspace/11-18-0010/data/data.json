[
  {
    "id": "79712130-c48f-11f0-9437-93a652649070",
    "timestamp": "2025-11-18T15:05:09.589Z",
    "model": "gpt-5-mini",
    "status": "success",
    "question": "bubble sort",
    "answer": {
      "role": "assistant",
      "content": "<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<title>Bubble Sort Visualizer</title>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#4ec5a6;\n    --muted:#9aa6b2;\n    --danger:#ff6b6b;\n    --good:#7ce39a;\n    --bar:#6b9bd6;\n    --bar-compare:#f6c85f;\n    --bar-swap:#ff8f66;\n    --bar-sorted:#7ce39a;\n    font-family: Inter, Roboto, system-ui, -apple-system, \"Segoe UI\", \"Helvetica\", \"Arial\", sans-serif;\n  }\n  html,body{\n    height:100%;\n    margin:0;\n    background:linear-gradient(180deg, #081022 0%, #07111b 60%);\n    color:#e6eef6;\n  }\n  .app{\n    max-width:1000px;\n    margin:28px auto;\n    padding:18px;\n  }\n  header{\n    display:flex;\n    gap:12px;\n    align-items:center;\n    margin-bottom:12px;\n  }\n  h1{\n    font-size:20px;\n    margin:0;\n    color:var(--accent);\n  }\n  p.lead{\n    margin:0;\n    color:var(--muted);\n    font-size:13px;\n  }\n  .controls{\n    display:flex;\n    gap:12px;\n    align-items:center;\n    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n    padding:12px;\n    border-radius:8px;\n    border:1px solid rgba(255,255,255,0.03);\n  }\n  .col{\n    display:flex;\n    flex-direction:column;\n    gap:8px;\n  }\n  label{\n    font-size:12px;\n    color:var(--muted);\n  }\n  .row{\n    display:flex;\n    gap:8px;\n    align-items:center;\n  }\n  input[type=range]{ width:160px; }\n  input[type=number]{ width:64px; padding:6px; border-radius:6px; border:1px solid rgba(255,255,255,0.05); background:transparent; color:inherit; }\n  button{\n    background:linear-gradient(180deg,var(--panel), #051223);\n    color:var(--accent);\n    border:1px solid rgba(255,255,255,0.03);\n    padding:8px 12px;\n    border-radius:8px;\n    cursor:pointer;\n    font-weight:600;\n  }\n  button.secondary{\n    background:transparent;\n    color:var(--muted);\n    border:1px dashed rgba(255,255,255,0.03);\n  }\n  button:disabled{ opacity:0.5; cursor:not-allowed; }\n  .visual{\n    margin-top:14px;\n    display:flex;\n    gap:12px;\n    align-items:flex-end;\n    height:360px;\n    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));\n    border-radius:8px;\n    padding:16px;\n    border:1px solid rgba(255,255,255,0.02);\n    overflow:hidden;\n  }\n  .bar{\n    flex:1 1 auto;\n    margin:0 2px;\n    background:var(--bar);\n    border-radius:6px 6px 2px 2px;\n    display:flex;\n    align-items:flex-end;\n    justify-content:center;\n    color:rgba(255,255,255,0.85);\n    font-size:11px;\n    box-shadow:0 2px 6px rgba(2,6,23,0.6) inset;\n    transition: background 140ms linear, transform 120ms ease;\n    position:relative;\n  }\n  .bar .val{\n    transform:translateY(-6px);\n    padding:4px 6px;\n    background:rgba(0,0,0,0.15);\n    border-radius:6px;\n    font-size:11px;\n    display:inline-block;\n  }\n  .bar.compare{ background:var(--bar-compare); color:#072027; }\n  .bar.swap{ background:var(--bar-swap); color:#200e03; transform:scale(1.02); }\n  .bar.sorted{ background:var(--bar-sorted); color:#042b12; }\n  .status{\n    margin-top:12px;\n    display:flex;\n    gap:12px;\n    align-items:center;\n    font-size:13px;\n    color:var(--muted);\n  }\n  .badge{\n    background:rgba(255,255,255,0.02);\n    border-radius:6px;\n    padding:6px 8px;\n    border:1px solid rgba(255,255,255,0.015);\n  }\n  .pseudocode{\n    margin-top:12px;\n    padding:12px;\n    background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.006));\n    border-radius:8px;\n    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", monospace;\n    font-size:13px;\n    color:var(--muted);\n    border:1px solid rgba(255,255,255,0.02);\n  }\n  .pseudocode .line{\n    padding:4px 6px;\n    border-radius:4px;\n  }\n  .pseudocode .current{\n    background:linear-gradient(90deg, rgba(78,197,166,0.08), rgba(110,170,200,0.03));\n    color:var(--accent);\n    font-weight:700;\n    box-shadow:0 2px 10px rgba(78,197,166,0.04) inset;\n  }\n  footer{\n    margin-top:18px;\n    color:var(--muted);\n    font-size:13px;\n  }\n  @media (max-width:880px){\n    .visual{ height:260px; }\n    .controls{flex-wrap:wrap;}\n    header{flex-direction:column; align-items:flex-start; gap:6px;}\n  }\n</style>\n</head>\n<body>\n<div class=\"app\" role=\"application\" aria-label=\"Bubble sort visualizer\">\n  <header>\n    <div>\n      <h1>Bubble Sort Visualizer</h1>\n      <p class=\"lead\">See how bubble sort compares and swaps values step-by-step. Try different speeds, sizes and the optimized version.</p>\n    </div>\n  </header>\n\n  <div class=\"controls\" id=\"controls\">\n    <div class=\"col\">\n      <label for=\"size\">Array size</label>\n      <div class=\"row\">\n        <input id=\"size\" type=\"range\" min=\"5\" max=\"80\" value=\"30\" />\n        <input id=\"sizeNum\" type=\"number\" min=\"5\" max=\"80\" value=\"30\" />\n      </div>\n    </div>\n\n    <div class=\"col\">\n      <label for=\"speed\">Speed (ms per step)</label>\n      <div class=\"row\">\n        <input id=\"speed\" type=\"range\" min=\"5\" max=\"800\" value=\"100\" />\n        <input id=\"speedNum\" type=\"number\" min=\"5\" max=\"800\" value=\"100\" />\n      </div>\n    </div>\n\n    <div style=\"display:flex;gap:8px;align-items:center;\">\n      <label style=\"font-size:12px;color:var(--muted);margin-right:6px;\">\n        <input id=\"ascending\" type=\"checkbox\" checked /> Ascending\n      </label>\n      <label style=\"font-size:12px;color:var(--muted);margin-right:6px;\">\n        <input id=\"optimized\" type=\"checkbox\" checked /> Optimized (early exit)\n      </label>\n    </div>\n\n    <div style=\"margin-left:auto;display:flex;gap:8px;align-items:center;\">\n      <button id=\"randomize\">Randomize</button>\n      <button id=\"start\">Start</button>\n      <button id=\"step\" class=\"secondary\">Step</button>\n      <button id=\"pause\" class=\"secondary\" disabled>Pause</button>\n      <button id=\"reset\" class=\"secondary\">Reset</button>\n    </div>\n  </div>\n\n  <div class=\"visual\" id=\"visual\" aria-live=\"polite\" aria-label=\"Array visualization\"></div>\n\n  <div class=\"status\" aria-hidden=\"false\">\n    <div class=\"badge\">Comparisons: <strong id=\"comp\">0</strong></div>\n    <div class=\"badge\">Swaps: <strong id=\"swp\">0</strong></div>\n    <div class=\"badge\">Pass: <strong id=\"pass\">0</strong></div>\n    <div class=\"badge\">Current indices: <strong id=\"idx\">-</strong></div>\n    <div class=\"badge\">State: <strong id=\"state\">idle</strong></div>\n  </div>\n\n  <div class=\"pseudocode\" aria-hidden=\"true\">\n    <div class=\"line\" id=\"line1\">for i from 0 to n-1</div>\n    <div class=\"line\" id=\"line2\" style=\"margin-left:12px\">for j from 0 to n-i-2</div>\n    <div class=\"line\" id=\"line3\" style=\"margin-left:24px\">if A[j] > A[j+1]</div>\n    <div class=\"line\" id=\"line4\" style=\"margin-left:36px\">swap A[j] and A[j+1]</div>\n    <div class=\"line\" id=\"line5\" style=\"margin-left:24px\">end if</div>\n    <div class=\"line\" id=\"line6\" style=\"margin-left:12px\">end for</div>\n    <div class=\"line\" id=\"line7\">end for</div>\n    <div class=\"line\" id=\"opt\" style=\"margin-top:6px; font-size:12px; color:var(--muted)\">\n      Optimized version: track if any swap occurred in a pass; if none, array is already sorted.\n    </div>\n  </div>\n\n  <footer>\n    Tip: Press \"Step\" to advance one comparison or swap, \"Start\" to animate continuously, \"Pause\" to stop. Try the optimized toggle to see early exit behavior.\n  </footer>\n</div>\n\n<script>\n(function(){\n  // DOM references\n  const visual = document.getElementById('visual');\n  const sizeRange = document.getElementById('size');\n  const sizeNum = document.getElementById('sizeNum');\n  const speedRange = document.getElementById('speed');\n  const speedNum = document.getElementById('speedNum');\n  const randomizeBtn = document.getElementById('randomize');\n  const startBtn = document.getElementById('start');\n  const pauseBtn = document.getElementById('pause');\n  const stepBtn = document.getElementById('step');\n  const resetBtn = document.getElementById('reset');\n  const ascendingChk = document.getElementById('ascending');\n  const optimizedChk = document.getElementById('optimized');\n\n  const compEl = document.getElementById('comp');\n  const swpEl = document.getElementById('swp');\n  const passEl = document.getElementById('pass');\n  const idxEl = document.getElementById('idx');\n  const stateEl = document.getElementById('state');\n\n  const codeLines = {\n    1: document.getElementById('line1'),\n    2: document.getElementById('line2'),\n    3: document.getElementById('line3'),\n    4: document.getElementById('line4'),\n    5: document.getElementById('line5'),\n    6: document.getElementById('line6'),\n    7: document.getElementById('line7'),\n  };\n\n  // State\n  let array = [];\n  let bars = [];\n  let generator = null;\n  let running = false;\n  let stepping = false;\n  let comparisons = 0;\n  let swaps = 0;\n  let passCount = 0;\n  let currentDelay = Number(speedRange.value);\n  let lastAction = null;\n\n  // Sync range and number inputs\n  sizeRange.addEventListener('input', () => {\n    sizeNum.value = sizeRange.value;\n  });\n  sizeNum.addEventListener('change', () => {\n    let v = Number(sizeNum.value) || 10;\n    v = Math.max(5, Math.min(80, v));\n    sizeNum.value = v;\n    sizeRange.value = v;\n  });\n\n  speedRange.addEventListener('input', () => {\n    speedNum.value = speedRange.value;\n    currentDelay = Number(speedRange.value);\n  });\n  speedNum.addEventListener('change', () => {\n    let v = Number(speedNum.value) || 100;\n    v = Math.max(5, Math.min(800, v));\n    speedNum.value = v;\n    speedRange.value = v;\n    currentDelay = v;\n  });\n\n  // Utilities\n  function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }\n\n  function createArray(n){\n    const arr = [];\n    for(let i=0;i<n;i++){\n      arr.push(randInt(5, 400));\n    }\n    return arr;\n  }\n\n  function renderArray(){\n    visual.innerHTML = '';\n    bars = [];\n    const n = array.length;\n    for(let i=0;i<n;i++){\n      const b = document.createElement('div');\n      b.className = 'bar';\n      b.style.height = (array[i] / 420 * 100) + '%';\n      b.style.flexBasis = `${100 / n}%`;\n      const val = document.createElement('div');\n      val.className = 'val';\n      val.textContent = array[i];\n      b.appendChild(val);\n      visual.appendChild(b);\n      bars.push(b);\n    }\n  }\n\n  function highlight(indices = [], cls = 'compare'){\n    // reset non-sorted bars from previous highlights except sorted ones\n    bars.forEach(b => {\n      if(!b.classList.contains('sorted')){\n        b.classList.remove('compare','swap');\n      }\n    });\n    indices.forEach(i => {\n      if(bars[i]){\n        bars[i].classList.add(cls);\n      }\n    });\n  }\n\n  function markSorted(upto){\n    // when a pass completes, elements after n-becomes sorted; fullscreen mark\n    for(let i=upto;i<bars.length;i++){\n      bars[i].classList.add('sorted');\n      bars[i].classList.remove('compare','swap');\n    }\n  }\n\n  function swapVisual(i,j){\n    // swap heights and texts\n    const tmpH = bars[i].style.height;\n    const tmpT = bars[i].textContent;\n    bars[i].style.height = bars[j].style.height;\n    bars[i].textContent = bars[j].textContent;\n    // ensure value inside .val is updated\n    const vi = bars[i].querySelector('.val');\n    const vj = bars[j].querySelector('.val');\n    if(vi && vj){\n      const t = vi.textContent;\n      vi.textContent = vj.textContent;\n      vj.textContent = t;\n    }\n  }\n\n  function resetStats(){\n    comparisons = 0;\n    swaps = 0;\n    passCount = 0;\n    compEl.textContent = comparisons;\n    swpEl.textContent = swaps;\n    passEl.textContent = passCount;\n    idxEl.textContent = '-';\n    stateEl.textContent = 'idle';\n    clearCodeHighlight();\n  }\n\n  function clearCodeHighlight(){\n    for(let k in codeLines){\n      codeLines[k].classList.remove('current');\n    }\n  }\n\n  // Pseudocode highlight convenience\n  function setCodeLine(n){\n    clearCodeHighlight();\n    if(codeLines[n]) codeLines[n].classList.add('current');\n  }\n\n  // Generator that yields actions describing the bubble sort steps\n  function* bubbleSortGenerator(arr, ascending=true, optimized=true){\n    const n = arr.length;\n    for(let i=0;i<n;i++){\n      let swappedThisPass = false;\n      setCodeLine(1);\n      // inner loop from 0 to n-i-2 inclusive\n      for(let j=0;j<n-i-1;j++){\n        setCodeLine(2);\n        // compare A[j] and A[j+1]\n        setCodeLine(3);\n        yield {type:'compare', i:j, j:j+1};\n        if(ascending ? (arr[j] > arr[j+1]) : (arr[j] < arr[j+1])){\n          // swap\n          setCodeLine(4);\n          yield {type:'swap', i:j, j:j+1};\n          const tmp = arr[j];\n          arr[j] = arr[j+1];\n          arr[j+1] = tmp;\n          swappedThisPass = true;\n        } else {\n          // no swap, just continue\n          yield {type:'no-swap', i:j, j:j+1};\n        }\n      }\n      passCount++;\n      yield {type:'passEnd', pass:passCount, sortedStart: n - i - 1};\n      if(optimized && !swappedThisPass){\n        // early exit\n        yield {type:'done', early:true};\n        return;\n      }\n    }\n    yield {type:'done', early:false};\n  }\n\n  // Runner to consume generator with play/pause controls\n  let consumePromise = null;\n  async function consumeGenerator(gen){\n    running = true;\n    updateControls();\n    stateEl.textContent = 'running';\n    try{\n      while(true){\n        if(!running){\n          // paused\n          stateEl.textContent = 'paused';\n          return;\n        }\n        const {value, done} = gen.next();\n        if(done) break;\n        await handleAction(value);\n        // wait using currentDelay unless stepping single-step\n        if(stepping){\n          // After one action, pause\n          stepping = false;\n          running = false;\n          updateControls();\n          stateEl.textContent = 'paused';\n          return;\n        } else {\n          await sleep(currentDelay);\n        }\n      }\n    } catch(e){\n      console.error(e);\n    } finally {\n      // when finished, mark remaining as sorted\n      markSorted(0);\n      clearCodeHighlight();\n      stateEl.textContent = 'finished';\n      running = false;\n      updateControls();\n    }\n  }\n\n  async function handleAction(action){\n    if(!action) return;\n    switch(action.type){\n      case 'compare':\n        comparisons++;\n        compEl.textContent = comparisons;\n        idxEl.textContent = `${action.i}, ${action.j}`;\n        // highlight comparing bars\n        highlight([action.i, action.j], 'compare');\n        setCodeLine(3);\n        break;\n      case 'no-swap':\n        // small visual to show compare without swap\n        idxEl.textContent = `${action.i}, ${action.j}`;\n        highlight([action.i, action.j], 'compare');\n        break;\n      case 'swap':\n        swaps++;\n        swpEl.textContent = swaps;\n        idxEl.textContent = `${action.i}, ${action.j}`;\n        // show swap\n        highlight([action.i, action.j], 'swap');\n        // swap values in visual\n        swapVisual(action.i, action.j);\n        break;\n      case 'passEnd':\n        passEl.textContent = action.pass;\n        idxEl.textContent = '-';\n        // elements from sortedStart to end are sorted\n        markSorted(action.sortedStart);\n        setCodeLine(6);\n        break;\n      case 'done':\n        if(action.early){\n          // show note possibly\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  // helpers\n  function sleep(ms){\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  function updateControls(){\n    // disable/enable controls depending on running\n    sizeRange.disabled = running;\n    sizeNum.disabled = running;\n    randomizeBtn.disabled = running;\n    ascendingChk.disabled = running;\n    optimizedChk.disabled = running;\n    stepBtn.disabled = running && !stepping; // step allowed if not running (except stepping case)\n    startBtn.disabled = running;\n    pauseBtn.disabled = !running;\n    resetBtn.disabled = running;\n  }\n\n  // Button handlers\n  randomizeBtn.addEventListener('click', () => {\n    const n = Number(sizeRange.value);\n    array = createArray(n);\n    renderArray();\n    resetStats();\n  });\n\n  startBtn.addEventListener('click', () => {\n    if(running) return;\n    // if generator not initialized or finished, (re)create it from current array snapshot\n    if(!generator){\n      // copy array\n      const arrCopy = array.slice();\n      generator = bubbleSortGenerator(arrCopy, ascendingChk.checked, optimizedChk.checked);\n    }\n    running = true;\n    stepping = false;\n    updateControls();\n    consumeGenerator(generator);\n  });\n\n  pauseBtn.addEventListener('click', () => {\n    running = false;\n    updateControls();\n  });\n\n  stepBtn.addEventListener('click', () => {\n    if(running) return;\n    // if generator not initialized, create a new one with copy of current state\n    if(!generator){\n      const arrCopy = array.slice();\n      generator = bubbleSortGenerator(arrCopy, ascendingChk.checked, optimizedChk.checked);\n    }\n    stepping = true;\n    running = true;\n    updateControls();\n    // consume just one action\n    consumeGenerator(generator);\n  });\n\n  resetBtn.addEventListener('click', () => {\n    // reset to fresh random array and clear generator & stats\n    const n = Number(sizeRange.value);\n    array = createArray(n);\n    renderArray();\n    generator = null;\n    running = false;\n    stepping = false;\n    markSorted(bars.length); // none sorted\n    resetStats();\n    updateControls();\n  });\n\n  // Initialize\n  (function init(){\n    const n = Number(sizeRange.value);\n    array = createArray(n);\n    renderArray();\n    resetStats();\n    updateControls();\n    sizeNum.value = sizeRange.value;\n    speedNum.value = speedRange.value;\n    // connect size number input to re-generate quickly when changed\n    sizeNum.addEventListener('input', () => {\n      sizeRange.value = sizeNum.value;\n    });\n    sizeNum.addEventListener('change', () => {\n      const v = Number(sizeNum.value);\n      sizeRange.value = v;\n      // regenerate\n      array = createArray(v);\n      renderArray();\n      generator = null;\n      resetStats();\n      updateControls();\n    });\n    // speed changes update delay variable\n    speedRange.addEventListener('input', () => {\n      currentDelay = Number(speedRange.value);\n    });\n    // update speedNum changes\n    speedNum.addEventListener('change', () => {\n      currentDelay = Number(speedNum.value);\n    });\n\n    // Allow clicking a bar to highlight and optionally change value (for experimentation)\n    visual.addEventListener('click', (e) => {\n      const bar = e.target.closest('.bar');\n      if(!bar) return;\n      // find index\n      const idx = Array.prototype.indexOf.call(visual.children, bar);\n      alert('Bar index ' + idx + ' value ' + array[idx] + '\\nYou can randomize/reset to change.');\n    });\n\n    // small convenience: pressing Space toggles start/pause\n    window.addEventListener('keydown', (e) => {\n      if(e.code === 'Space'){\n        e.preventDefault();\n        if(running){\n          pauseBtn.click();\n        } else {\n          startBtn.click();\n        }\n      }\n    });\n\n  })();\n\n  // Keep generator null when array changed or options toggled\n  ascendingChk.addEventListener('change', () => { generator = null; resetStats(); });\n  optimizedChk.addEventListener('change', () => { generator = null; resetStats(); });\n\n})();\n</script>\n</body>\n</html>"
    },
    "messages": [
      {
        "role": "system",
        "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
      },
      {
        "role": "user",
        "content": "bubble sort"
      }
    ],
    "topic": null,
    "hasFSM": false,
    "hasTest": false,
    "evaluation": {
      "score": null,
      "notes": ""
    }
  }
]