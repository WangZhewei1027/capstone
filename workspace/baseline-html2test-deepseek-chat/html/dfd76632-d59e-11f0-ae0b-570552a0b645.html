<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selection Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .array-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 5px;
        }
        .array-element {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        .current-min {
            background-color: #FF9800 !important;
        }
        .comparing {
            background-color: #2196F3 !important;
        }
        .sorted {
            background-color: #9C27B0 !important;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            margin: 0 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .explanation {
            background-color: #e8f5e8;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            line-height: 1.6;
        }
        .code-container {
            background-color: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            margin: 20px 0;
        }
        .step-info {
            text-align: center;
            font-weight: bold;
            margin: 10px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Selection Sort Algorithm</h1>
        
        <div class="explanation">
            <h3>How Selection Sort Works:</h3>
            <p>Selection Sort repeatedly finds the minimum element from the unsorted portion and places it at the beginning. The algorithm maintains two subarrays: sorted and unsorted.</p>
            <ol>
                <li>Find the minimum element in the unsorted array</li>
                <li>Swap it with the first element of the unsorted portion</li>
                <li>Move the boundary between sorted and unsorted one element to the right</li>
                <li>Repeat until the entire array is sorted</li>
            </ol>
            <p><strong>Time Complexity:</strong> O(nÂ²) in all cases</p>
            <p><strong>Space Complexity:</strong> O(1)</p>
        </div>

        <div class="controls">
            <button id="generateBtn">Generate New Array</button>
            <button id="sortBtn">Start Sorting</button>
            <button id="stepBtn">Next Step</button>
            <button id="resetBtn">Reset</button>
        </div>

        <div class="step-info" id="stepInfo">Click "Start Sorting" to begin</div>
        
        <div class="array-container" id="arrayContainer"></div>

        <div class="code-container">
function selectionSort(arr) {
    for (let i = 0; i < arr.length - 1; i++) {
        let minIndex = i;
        for (let j = i + 1; j < arr.length; j++) {
            if (arr[j] < arr[minIndex]) {
                minIndex = j;
            }
        }
        [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];
    }
    return arr;
}
        </div>
    </div>

    <script>
        let array = [];
        let currentStep = 0;
        let isSorting = false;
        let currentI = 0;
        let currentJ = 0;
        let currentMinIndex = 0;
        let steps = [];

        const arrayContainer = document.getElementById('arrayContainer');
        const generateBtn = document.getElementById('generateBtn');
        const sortBtn = document.getElementById('sortBtn');
        const stepBtn = document.getElementById('stepBtn');
        const resetBtn = document.getElementById('resetBtn');
        const stepInfo = document.getElementById('stepInfo');

        function generateRandomArray() {
            array = [];
            for (let i = 0; i < 8; i++) {
                array.push(Math.floor(Math.random() * 100) + 1);
            }
            renderArray();
            resetSorting();
        }

        function renderArray() {
            arrayContainer.innerHTML = '';
            array.forEach((value, index) => {
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = value;
                element.id = `element-${index}`;
                arrayContainer.appendChild(element);
            });
            updateElementClasses();
        }

        function updateElementClasses() {
            // Reset all classes first
            document.querySelectorAll('.array-element').forEach(el => {
                el.classList.remove('current-min', 'comparing', 'sorted');
            });

            if (steps.length > 0 && currentStep < steps.length) {
                const step = steps[currentStep];
                
                // Mark sorted elements
                for (let i = 0; i < step.i; i++) {
                    const element = document.getElementById(`element-${i}`);
                    if (element) element.classList.add('sorted');
                }

                // Mark current minimum
                const minElement = document.getElementById(`element-${step.minIndex}`);
                if (minElement) minElement.classList.add('current-min');

                // Mark elements being compared
                if (step.j !== undefined) {
                    const compareElement = document.getElementById(`element-${step.j}`);
                    if (compareElement) compareElement.classList.add('comparing');
                }

                // If we just swapped, highlight the swapped elements
                if (step.action === 'swap') {
                    const swap1 = document.getElementById(`element-${step.i}`);
                    const swap2 = document.getElementById(`element-${step.minIndex}`);
                    if (swap1) swap1.classList.add('comparing');
                    if (swap2) swap2.classList.add('comparing');
                }
            }
        }

        function generateSteps() {
            steps = [];
            const arr = [...array];
            let stepCounter = 0;

            for (let i = 0; i < arr.length - 1; i++) {
                let minIndex = i;
                
                steps.push({
                    step: stepCounter++,
                    i: i,
                    minIndex: minIndex,
                    j: i + 1,
                    action: 'start-pass',
                    array: [...arr]
                });

                for (let j = i + 1; j < arr.length; j++) {
                    steps.push({
                        step: stepCounter++,
                        i: i,
                        minIndex: minIndex,
                        j: j,
                        action: 'compare',
                        array: [...arr]
                    });

                    if (arr[j] < arr[minIndex]) {
                        minIndex = j;
                        steps.push({
                            step: stepCounter++,
                            i: i,
                            minIndex: minIndex,
                            j: j,
                            action: 'new-min',
                            array: [...arr]
                        });
                    }
                }

                if (minIndex !== i) {
                    [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];
                    steps.push({
                        step: stepCounter++,
                        i: i,
                        minIndex: minIndex,
                        action: 'swap',
                        array: [...arr]
                    });
                }
            }

            steps.push({
                step: stepCounter,
                i: arr.length,
                action: 'complete',
                array: [...arr]
            });
        }

        function nextStep() {
            if (currentStep < steps.length) {
                const step = steps[currentStep];
                array = [...step.array];
                renderArray();
                
                let infoText = '';
                switch (step.action) {
                    case 'start-pass':
                        infoText = `Starting pass ${step.i + 1}: Looking for minimum in unsorted portion`;
                        break;
                    case 'compare':
                        infoText = `Comparing ${array[step.j]} with current minimum ${array[step.minIndex]}`;
                        break;
                    case 'new-min':
                        infoText = `New minimum found: ${array[step.minIndex]} at position ${step.minIndex + 1}`;
                        break;
                    case 'swap':
                        infoText = `Swapping ${array[step.i]} with ${array[step.minIndex]}`;
                        break;
                    case 'complete':
                        infoText = 'Sorting complete! The array is now fully sorted.';
                        sortBtn.disabled = false;
                        stepBtn.disabled = true;
                        isSorting = false;
                        break;
                }
                stepInfo.textContent = `Step ${currentStep + 1}/${steps.length}: ${infoText}`;
                currentStep++;
            }
        }

        function startSorting() {
            if (!isSorting) {
                generateSteps();
                isSorting = true;
                currentStep = 0;
                sortBtn.disabled = true;
                stepBtn.disabled = false;
                nextStep();
            }
        }

        function resetSorting() {
            currentStep = 0;
            isSorting = false;
            steps = [];
            sortBtn.disabled = false;
            stepBtn.disabled = false;
            stepInfo.textContent = 'Click "Start Sorting" to begin';
            renderArray();
        }

        // Event listeners
        generateBtn.addEventListener('click', generateRandomArray);
        sortBtn.addEventListener('click', startSorting);
        stepBtn.addEventListener('click', nextStep);
        resetBtn.addEventListener('click', resetSorting);

        // Initialize
        generateRandomArray();
    </script>
</body>
</html>