<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linked List Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        input, button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background: #007bff;
            color: white;
            cursor: pointer;
            border: none;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        .visualization {
            min-height: 400px;
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
            overflow-x: auto;
        }
        .node {
            display: inline-flex;
            align-items: center;
            margin: 0 20px;
            position: relative;
        }
        .data {
            padding: 15px 20px;
            border: 2px solid #007bff;
            border-radius: 8px;
            background: #e7f3ff;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }
        .pointer {
            width: 40px;
            height: 2px;
            background: #333;
            margin: 0 10px;
            position: relative;
        }
        .pointer::after {
            content: 'â–¶';
            position: absolute;
            right: -10px;
            top: -8px;
            color: #333;
            font-size: 12px;
        }
        .null-pointer {
            width: 40px;
            text-align: center;
            color: #666;
            font-style: italic;
        }
        .head-label {
            position: absolute;
            top: -25px;
            left: 0;
            font-size: 12px;
            color: #666;
        }
        .current-node {
            background: #ffeb3b !important;
            border-color: #ffc107 !important;
        }
        .info-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .operations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        .operation-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Linked List Visualization</h1>
        
        <div class="info-panel">
            <p>A linked list is a linear data structure where each element is a separate object. Each element (node) contains:</p>
            <ul>
                <li><strong>Data</strong> - the value stored in the node</li>
                <li><strong>Next</strong> - a reference (pointer) to the next node in the sequence</li>
            </ul>
        </div>

        <div class="controls">
            <input type="number" id="valueInput" placeholder="Enter value" min="0">
            <button onclick="addToHead()">Add to Head</button>
            <button onclick="addToTail()">Add to Tail</button>
            <button onclick="removeFromHead()">Remove from Head</button>
            <button onclick="removeFromTail()">Remove from Tail</button>
            <button onclick="findNode()">Find Value</button>
            <button onclick="clearList()">Clear List</button>
        </div>

        <div class="operations">
            <div class="operation-group">
                <h3>Traversal</h3>
                <button onclick="startTraversal()">Start Traversal</button>
                <button onclick="nextNode()" id="nextBtn" disabled>Next Node</button>
                <button onclick="resetTraversal()">Reset</button>
            </div>
            <div class="operation-group">
                <h3>Insert at Position</h3>
                <input type="number" id="positionInput" placeholder="Position" min="0">
                <button onclick="insertAtPosition()">Insert</button>
            </div>
            <div class="operation-group">
                <h3>Delete by Value</h3>
                <input type="number" id="deleteValueInput" placeholder="Value to delete">
                <button onclick="deleteByValue()">Delete</button>
            </div>
        </div>

        <div class="visualization" id="listVisualization">
            <!-- Linked list will be rendered here -->
        </div>

        <div id="statusMessage" style="margin-top: 20px; font-weight: bold;"></div>
    </div>

    <script>
        class Node {
            constructor(data) {
                this.data = data;
                this.next = null;
            }
        }

        class LinkedList {
            constructor() {
                this.head = null;
                this.size = 0;
                this.currentTraversal = null;
            }

            addToHead(data) {
                const newNode = new Node(data);
                newNode.next = this.head;
                this.head = newNode;
                this.size++;
                return true;
            }

            addToTail(data) {
                const newNode = new Node(data);
                if (!this.head) {
                    this.head = newNode;
                } else {
                    let current = this.head;
                    while (current.next) {
                        current = current.next;
                    }
                    current.next = newNode;
                }
                this.size++;
                return true;
            }

            removeFromHead() {
                if (!this.head) return false;
                this.head = this.head.next;
                this.size--;
                return true;
            }

            removeFromTail() {
                if (!this.head) return false;
                if (!this.head.next) {
                    this.head = null;
                } else {
                    let current = this.head;
                    while (current.next.next) {
                        current = current.next;
                    }
                    current.next = null;
                }
                this.size--;
                return true;
            }

            find(data) {
                let current = this.head;
                let position = 0;
                while (current) {
                    if (current.data === data) {
                        return position;
                    }
                    current = current.next;
                    position++;
                }
                return -1;
            }

            insertAtPosition(data, position) {
                if (position < 0 || position > this.size) return false;
                
                if (position === 0) {
                    return this.addToHead(data);
                }

                const newNode = new Node(data);
                let current = this.head;
                for (let i = 0; i < position - 1; i++) {
                    current = current.next;
                }
                newNode.next = current.next;
                current.next = newNode;
                this.size++;
                return true;
            }

            deleteByValue(data) {
                if (!this.head) return false;
                
                if (this.head.data === data) {
                    this.head = this.head.next;
                    this.size--;
                    return true;
                }

                let current = this.head;
                while (current.next) {
                    if (current.next.data === data) {
                        current.next = current.next.next;
                        this.size--;
                        return true;
                    }
                    current = current.next;
                }
                return false;
            }

            startTraversal() {
                this.currentTraversal = this.head;
                return this.currentTraversal;
            }

            getNextNode() {
                if (!this.currentTraversal) return null;
                const current = this.currentTraversal;
                this.currentTraversal = this.currentTraversal.next;
                return current;
            }

            resetTraversal() {
                this.currentTraversal = null;
            }
        }

        const linkedList = new LinkedList();
        let traversalActive = false;

        function renderList() {
            const container = document.getElementById('listVisualization');
            container.innerHTML = '';
            
            if (!linkedList.head) {
                container.innerHTML = '<p style="text-align: center; color: #666;">The list is empty</p>';
                return;
            }

            let current = linkedList.head;
            let position = 0;
            const visualization = document.createElement('div');
            visualization.style.display = 'flex';
            visualization.style.alignItems = 'center';
            visualization.style.justifyContent = 'center';
            visualization.style.flexWrap = 'wrap';
            visualization.style.minHeight = '200px';

            // Add head label
            const headLabel = document.createElement('div');
            headLabel.className = 'head-label';
            headLabel.textContent = 'HEAD';
            visualization.appendChild(headLabel);

            while (current) {
                const nodeElement = document.createElement('div');
                nodeElement.className = 'node';
                
                const dataElement = document.createElement('div');
                dataElement.className = 'data';
                dataElement.textContent = current.data;
                dataElement.id = `node-${position}`;
                
                if (traversalActive && current === linkedList.currentTraversal) {
                    dataElement.classList.add('current-node');
                }
                
                nodeElement.appendChild(dataElement);
                
                if (current.next) {
                    const pointer = document.createElement('div');
                    pointer.className = 'pointer';
                    nodeElement.appendChild(pointer);
                } else {
                    const nullPointer = document.createElement('div');
                    nullPointer.className = 'null-pointer';
                    nullPointer.textContent = 'NULL';
                    nodeElement.appendChild(nullPointer);
                }
                
                visualization.appendChild(nodeElement);
                current = current.next;
                position++;
            }

            container.appendChild(visualization);
        }

        function showMessage(message, isError = false) {
            const messageDiv = document.getElementById('statusMessage');
            messageDiv.textContent = message;
            messageDiv.style.color = isError ? '#dc3545' : '#28a745';
        }

        function addToHead() {
            const value = parseInt(document.getElementById('valueInput').value);
            if (isNaN(value)) {
                showMessage('Please enter a valid number', true);
                return;
            }
            
            if (linkedList.addToHead(value)) {
                showMessage(`Added ${value} to the head of the list`);
                renderList();
            }
            document.getElementById('valueInput').value = '';
        }

        function addToTail() {
            const value = parseInt(document.getElementById('valueInput').value);
            if (isNaN(value)) {
                showMessage('Please enter a valid number', true);
                return;
            }
            
            if (linkedList.addToTail(value)) {
                showMessage(`Added ${value} to the tail of the list`);
                renderList();
            }
            document.getElementById('valueInput').value = '';
        }

        function removeFromHead() {
            if (linkedList.removeFromHead()) {
                showMessage('Removed node from the head');
                renderList();
            } else {
                showMessage('List is already empty', true);
            }
        }

        function removeFromTail() {
            if (linkedList.removeFromTail()) {
                showMessage('Removed node from the tail');
                renderList();
            } else {
                showMessage('List is already empty', true);
            }
        }

        function findNode() {
            const value = parseInt(document.getElementById('valueInput').value);
            if (isNaN(value)) {
                showMessage('Please enter a valid number', true);
                return;
            }
            
            const position = linkedList.find(value);
            if (position !== -1) {
                showMessage(`Value ${value} found at position ${position}`);
            } else {
                showMessage(`Value ${value} not found in the list`, true);
            }
            document.getElementById('valueInput').value = '';
        }

        function clearList() {
            linkedList.head = null;
            linkedList.size = 0;
            linkedList.resetTraversal();
            traversalActive = false;
            document.getElementById('nextBtn').disabled = true;
            showMessage('List cleared');
            renderList();
        }

        function startTraversal() {
            if (!linkedList.head) {
                showMessage('List is empty', true);
                return;
            }
            
            linkedList.startTraversal();
            traversalActive = true;
            document.getElementById('nextBtn').disabled = false;
            showMessage('Traversal started. Click "Next Node" to traverse.');
            renderList();
        }

        function nextNode() {
            if (!traversalActive) {
                showMessage('Start traversal first', true);
                return;
            }
            
            const currentNode = linkedList.getNextNode();
            if (currentNode) {
                showMessage(`Current node value: ${currentNode.data}`);
                renderList();
            } else {
                showMessage('Reached the end of the list');
                traversalActive = false;
                document.getElementById('nextBtn').disabled = true;
            }
        }

        function resetTraversal() {
            linkedList.resetTraversal();
            traversalActive = false;
            document.getElementById('nextBtn').disabled = true;
            showMessage('Traversal reset');
            renderList();
        }

        function insertAtPosition() {
            const value = parseInt(document.getElementById('valueInput').value);
            const position = parseInt(document.getElementById('positionInput').value);
            
            if (isNaN(value) || isNaN(position)) {
                showMessage('Please enter valid values for both value and position', true);
                return;
            }
            
            if (linkedList.insertAtPosition(value, position)) {
                showMessage(`Inserted ${value} at position ${position}`);
                renderList();
            } else {
                showMessage('Invalid position', true);
            }
            
            document.getElementById('valueInput').value = '';
            document.getElementById('positionInput').value = '';
        }

        function deleteByValue() {
            const value = parseInt(document.getElementById('deleteValueInput').value);
            if (isNaN(value)) {
                showMessage('Please enter a valid number', true);
                return;
            }
            
            if (linkedList.deleteByValue(value)) {
                showMessage(`Deleted node with value ${value}`);
                renderList();
            } else {
                showMessage(`Value ${value} not found in the list`, true);
            }
            document.getElementById('deleteValueInput').value = '';
        }

        // Initialize with some sample data
        function initializeSampleData() {
            linkedList.addToTail(10);
            linkedList.addToTail(20);
            linkedList.addToTail(30);
            linkedList.addToHead(5);
            renderList();
            showMessage('Sample linked list created. Try adding, removing, or traversing nodes!');
        }

        // Initialize on page load
        window.onload = initializeSampleData;
    </script>
</body>
</html>