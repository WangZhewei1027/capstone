<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Search Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .controls {
            margin: 20px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        input, button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            border: none;
        }
        button:hover {
            background-color: #45a049;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .array-display {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 20px 0;
            justify-content: center;
        }
        .array-element {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e0e0e0;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .current {
            background-color: #4CAF50;
            color: white;
            transform: scale(1.1);
        }
        .checked {
            background-color: #2196F3;
            color: white;
        }
        .found {
            background-color: #FF9800;
            color: white;
            transform: scale(1.2);
        }
        .log {
            margin-top: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
        }
        .step-info {
            margin: 10px 0;
            padding: 10px;
            background-color: #e8f5e8;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Binary Search Visualization</h1>
        
        <div class="controls">
            <label for="searchValue">Search for:</label>
            <input type="number" id="searchValue" min="1" max="100" value="42">
            <button id="generateArray">Generate New Array</button>
            <button id="startSearch">Start Search</button>
            <button id="nextStep" disabled>Next Step</button>
            <button id="reset">Reset</button>
        </div>
        
        <div class="step-info" id="stepInfo">
            <p>Binary Search Algorithm: Divide and conquer approach to find an element in a sorted array.</p>
            <p>Time Complexity: O(log n)</p>
        </div>
        
        <div class="array-display" id="arrayDisplay"></div>
        
        <div class="log" id="log"></div>
    </div>

    <script>
        // Global variables
        let array = [];
        let searchValue = 42;
        let left = 0;
        let right = 0;
        let mid = 0;
        let steps = 0;
        let isSearching = false;
        let isFound = false;

        // DOM elements
        const arrayDisplay = document.getElementById('arrayDisplay');
        const log = document.getElementById('log');
        const stepInfo = document.getElementById('stepInfo');
        const searchValueInput = document.getElementById('searchValue');
        const generateArrayBtn = document.getElementById('generateArray');
        const startSearchBtn = document.getElementById('startSearch');
        const nextStepBtn = document.getElementById('nextStep');
        const resetBtn = document.getElementById('reset');

        // Initialize
        function init() {
            generateArray();
            updateDisplay();
            addEventListeners();
        }

        // Generate a sorted array of random numbers
        function generateArray() {
            array = [];
            const size = 15; // Fixed size for better visualization
            const maxValue = 100;
            
            for (let i = 0; i < size; i++) {
                array.push(Math.floor(Math.random() * maxValue) + 1);
            }
            
            // Sort the array (required for binary search)
            array.sort((a, b) => a - b);
            
            // Reset search state
            resetSearch();
        }

        // Reset search state
        function resetSearch() {
            left = 0;
            right = array.length - 1;
            mid = Math.floor((left + right) / 2);
            steps = 0;
            isSearching = false;
            isFound = false;
            nextStepBtn.disabled = true;
            log.innerHTML = '';
            updateStepInfo('Ready to search. Click "Start Search" to begin.');
        }

        // Update the array display
        function updateDisplay() {
            arrayDisplay.innerHTML = '';
            
            array.forEach((value, index) => {
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = value;
                element.id = `element-${index}`;
                
                // Highlight elements based on current search state
                if (isSearching) {
                    if (index === mid) {
                        element.classList.add('current');
                    } else if (index < left || index > right) {
                        element.style.opacity = '0.5';
                    } else if (index === left || index === right) {
                        element.classList.add('checked');
                    }
                    
                    if (isFound && index === mid) {
                        element.classList.add('found');
                    }
                }
                
                arrayDisplay.appendChild(element);
            });
        }

        // Update step information
        function updateStepInfo(message) {
            stepInfo.innerHTML = `<p><strong>Step ${steps}:</strong> ${message}</p>`;
        }

        // Add event listeners
        function addEventListeners() {
            generateArrayBtn.addEventListener('click', () => {
                generateArray();
                updateDisplay();
            });
            
            startSearchBtn.addEventListener('click', () => {
                searchValue = parseInt(searchValueInput.value);
                if (isNaN(searchValue)) {
                    alert('Please enter a valid number to search for');
                    return;
                }
                
                isSearching = true;
                nextStepBtn.disabled = false;
                startSearchBtn.disabled = true;
                performNextStep();
            });
            
            nextStepBtn.addEventListener('click', performNextStep);
            
            resetBtn.addEventListener('click', () => {
                resetSearch();
                updateDisplay();
                startSearchBtn.disabled = false;
            });
        }

        // Perform one step of the binary search
        function performNextStep() {
            if (!isSearching || isFound) return;
            
            steps++;
            mid = Math.floor((left + right) / 2);
            const currentValue = array[mid];
            
            let logMessage = `Step ${steps}: Checking index ${mid} (value = ${currentValue})`;
            let stepMessage = '';
            
            if (currentValue === searchValue) {
                // Element found
                logMessage += ` - Found the target value ${searchValue}!`;
                stepMessage = `Found ${searchValue} at index ${mid}`;
                isFound = true;
                nextStepBtn.disabled = true;
            } else if (currentValue < searchValue) {
                // Search in the right half
                logMessage += ` - ${currentValue} < ${searchValue}, searching right half`;
                stepMessage = `${currentValue} is less than ${searchValue}, moving to right half`;
                left = mid + 1;
            } else {
                // Search in the left half
                logMessage += ` - ${currentValue} > ${searchValue}, searching left half`;
                stepMessage = `${currentValue} is greater than ${searchValue}, moving to left half`;
                right = mid - 1;
            }
            
            // Add to log
            const logEntry = document.createElement('div');
            logEntry.textContent = logMessage;
            log.appendChild(logEntry);
            log.scrollTop = log.scrollHeight;
            
            updateStepInfo(stepMessage);
            updateDisplay();
            
            // Check if search is complete (element not found)
            if (left > right && !isFound) {
                logMessage = `Step ${steps}: Value ${searchValue} not found in the array`;
                const notFoundEntry = document.createElement('div');
                notFoundEntry.textContent = logMessage;
                notFoundEntry.style.color = 'red';
                log.appendChild(notFoundEntry);
                
                stepMessage = `Search complete: ${searchValue} not found`;
                updateStepInfo(stepMessage);
                
                isSearching = false;
                nextStepBtn.disabled = true;
            }
        }

        // Initialize the application
        init();
    </script>
</body>
</html>