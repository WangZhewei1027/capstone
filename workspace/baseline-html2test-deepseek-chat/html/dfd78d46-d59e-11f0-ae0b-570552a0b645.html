<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divide and Conquer Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .algorithm-steps {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .step {
            margin: 10px 0;
            padding: 10px;
            border-left: 3px solid #3498db;
        }
        
        .visualization {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
        }
        
        .array-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .array-element {
            width: 50px;
            height: 50px;
            background-color: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 5px;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .divided {
            background-color: #e74c3c;
        }
        
        .conquered {
            background-color: #27ae60;
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .explanation {
            margin-top: 30px;
            line-height: 1.6;
        }
        
        .phase-info {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            font-size: 18px;
            min-height: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Divide and Conquer Algorithm Visualization</h1>
        
        <div class="algorithm-steps">
            <h3>Divide and Conquer Steps:</h3>
            <div class="step"><strong>1. Divide:</strong> Break the problem into smaller subproblems</div>
            <div class="step"><strong>2. Conquer:</strong> Solve the subproblems recursively</div>
            <div class="step"><strong>3. Combine:</strong> Combine the solutions to solve the original problem</div>
        </div>
        
        <div class="visualization">
            <div class="phase-info" id="phaseInfo">Click "Generate Array" to start</div>
            
            <div class="array-container" id="arrayContainer">
                <!-- Array elements will be generated here -->
            </div>
            
            <div class="controls">
                <button onclick="generateArray()">Generate Array</button>
                <button onclick="startDivide()" id="divideBtn" disabled>Start Divide</button>
                <button onclick="startConquer()" id="conquerBtn" disabled>Start Conquer</button>
                <button onclick="reset()">Reset</button>
            </div>
        </div>
        
        <div class="explanation">
            <h3>How Divide and Conquer Works:</h3>
            <p>The Divide and Conquer algorithm follows three main steps:</p>
            <ul>
                <li><strong>Divide:</strong> The problem is broken down into smaller, more manageable subproblems</li>
                <li><strong>Conquer:</strong> Each subproblem is solved independently (often recursively)</li>
                <li><strong>Combine:</strong> The solutions to the subproblems are combined to form the solution to the original problem</li>
            </ul>
            <p>This approach is used in many famous algorithms including Merge Sort, Quick Sort, Binary Search, and many problems that can be broken down into similar subproblems.</p>
        </div>
    </div>

    <script>
        let originalArray = [];
        let currentStep = 0;
        const steps = [];
        
        function generateArray() {
            originalArray = [];
            const arrayContainer = document.getElementById('arrayContainer');
            arrayContainer.innerHTML = '';
            
            // Generate random array of 8 numbers
            for (let i = 0; i < 8; i++) {
                const value = Math.floor(Math.random() * 100) + 1;
                originalArray.push(value);
                
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = value;
                element.id = `elem-${i}`;
                arrayContainer.appendChild(element);
            }
            
            document.getElementById('divideBtn').disabled = false;
            document.getElementById('conquerBtn').disabled = true;
            document.getElementById('phaseInfo').textContent = 'Array generated. Click "Start Divide" to begin.';
            
            // Generate divide and conquer steps
            generateSteps(originalArray);
        }
        
        function generateSteps(arr, depth = 0, path = '') {
            if (arr.length <= 1) {
                steps.push({
                    type: 'base',
                    array: [...arr],
                    depth: depth,
                    path: path
                });
                return arr;
            }
            
            const mid = Math.floor(arr.length / 2);
            const left = arr.slice(0, mid);
            const right = arr.slice(mid);
            
            steps.push({
                type: 'divide',
                array: [...arr],
                left: [...left],
                right: [...right],
                depth: depth,
                path: path
            });
            
            generateSteps(left, depth + 1, path + 'L');
            generateSteps(right, depth + 1, path + 'R');
            
            const merged = [...left, ...right].sort((a, b) => a - b);
            steps.push({
                type: 'conquer',
                array: merged,
                depth: depth,
                path: path
            });
        }
        
        function startDivide() {
            document.getElementById('divideBtn').disabled = true;
            document.getElementById('phaseInfo').textContent = 'Dividing the problem into smaller subproblems...';
            
            currentStep = 0;
            animateDivide();
        }
        
        function animateDivide() {
            if (currentStep >= steps.length) {
                document.getElementById('conquerBtn').disabled = false;
                document.getElementById('phaseInfo').textContent = 'Division complete. Click "Start Conquer" to combine solutions.';
                return;
            }
            
            const step = steps[currentStep];
            
            if (step.type === 'divide') {
                highlightDivision(step);
            }
            
            currentStep++;
            
            if (currentStep < steps.length && steps[currentStep].type === 'divide') {
                setTimeout(animateDivide, 1000);
            } else {
                setTimeout(() => {
                    document.getElementById('phaseInfo').textContent = 'Division complete. Ready to conquer.';
                    document.getElementById('conquerBtn').disabled = false;
                }, 1000);
            }
        }
        
        function highlightDivision(step) {
            const arrayContainer = document.getElementById('arrayContainer');
            arrayContainer.innerHTML = '';
            
            // Create visual representation of division
            const leftDiv = document.createElement('div');
            leftDiv.style.display = 'flex';
            leftDiv.style.flexDirection = 'column';
            leftDiv.style.alignItems = 'center';
            leftDiv.style.margin = '10px';
            
            const rightDiv = document.createElement('div');
            rightDiv.style.display = 'flex';
            rightDiv.style.flexDirection = 'column';
            rightDiv.style.alignItems = 'center';
            rightDiv.style.margin = '10px';
            
            const leftLabel = document.createElement('div');
            leftLabel.textContent = 'Left Subproblem';
            leftLabel.style.marginBottom = '10px';
            leftLabel.style.fontWeight = 'bold';
            leftDiv.appendChild(leftLabel);
            
            const rightLabel = document.createElement('div');
            rightLabel.textContent = 'Right Subproblem';
            rightLabel.style.marginBottom = '10px';
            rightLabel.style.fontWeight = 'bold';
            rightDiv.appendChild(rightLabel);
            
            // Add elements to left and right divisions
            step.left.forEach((value, index) => {
                const elem = document.createElement('div');
                elem.className = 'array-element divided';
                elem.textContent = value;
                leftDiv.appendChild(elem);
            });
            
            step.right.forEach((value, index) => {
                const elem = document.createElement('div');
                elem.className = 'array-element divided';
                elem.textContent = value;
                rightDiv.appendChild(elem);
            });
            
            // Create a container for both halves
            const halvesContainer = document.createElement('div');
            halvesContainer.style.display = 'flex';
            halvesContainer.style.justifyContent = 'center';
            halvesContainer.appendChild(leftDiv);
            halvesContainer.appendChild(rightDiv);
            
            arrayContainer.appendChild(halvesContainer);
            
            document.getElementById('phaseInfo').textContent = 
                `Dividing array of ${step.array.length} elements into subproblems of ${step.left.length} and ${step.right.length} elements`;
        }
        
        function startConquer() {
            document.getElementById('conquerBtn').disabled = true;
            document.getElementById('phaseInfo').textContent = 'Combining solutions from subproblems...';
            
            animateConquer();
        }
        
        function animateConquer() {
            // Find the next conquer step
            let conquerStep = null;
            for (let i = currentStep; i < steps.length; i++) {
                if (steps[i].type === 'conquer') {
                    conquerStep = steps[i];
                    currentStep = i + 1;
                    break;
                }
            }
            
            if (!conquerStep) {
                document.getElementById('phaseInfo').textContent = 'Problem solved! All subproblems combined.';
                showFinalResult();
                return;
            }
            
            highlightConquer(conquerStep);
            
            setTimeout(animateConquer, 1500);
        }
        
        function highlightConquer(step) {
            const arrayContainer = document.getElementById('arrayContainer');
            arrayContainer.innerHTML = '';
            
            const resultDiv = document.createElement('div');
            resultDiv.style.display = 'flex';
            resultDiv.style.flexDirection = 'column';
            resultDiv.style.alignItems = 'center';
            
            const label = document.createElement('div');
            label.textContent = 'Combined Solution';
            label.style.marginBottom = '10px';
            label.style.fontWeight = 'bold';
            resultDiv.appendChild(label);
            
            // Show the combined (sorted) array
            step.array.forEach((value, index) => {
                const elem = document.createElement('div');
                elem.className = 'array-element conquered';
                elem.textContent = value;
                resultDiv.appendChild(elem);
            });
            
            arrayContainer.appendChild(resultDiv);
            
            document.getElementById('phaseInfo').textContent = 
                `Combining solutions: ${step.array.length} elements sorted`;
        }
        
        function showFinalResult() {
            const sortedArray = [...originalArray].sort((a, b) => a - b);
            const arrayContainer = document.getElementById('arrayContainer');
            arrayContainer.innerHTML = '';
            
            const finalDiv = document.createElement('div');
            finalDiv.style.display = 'flex';
            finalDiv.style.flexDirection = 'column';
            finalDiv.style.alignItems = 'center';
            
            const label = document.createElement('div');
            label.textContent = 'Final Sorted Array';
            label.style.marginBottom = '10px';
            label.style.fontWeight = 'bold';
            label.style.fontSize = '20px';
            label.style.color = '#27ae60';
            finalDiv.appendChild(label);
            
            sortedArray.forEach((value, index) => {
                const elem = document.createElement('div');
                elem.className = 'array-element conquered';
                elem.textContent = value;
                elem.style.transform = 'scale(1.2)';
                elem.style.transition = 'transform 0.5s ease';
                finalDiv.appendChild(elem);
            });
            
            arrayContainer.appendChild(finalDiv);
        }
        
        function reset() {
            originalArray = [];
            currentStep = 0;
            steps.length = 0;
            
            const arrayContainer = document.getElementById('arrayContainer');
            arrayContainer.innerHTML = '';
            
            document.getElementById('divideBtn').disabled = true;
            document.getElementById('conquerBtn').disabled = true;
            document.getElementById('phaseInfo').textContent = 'Click "Generate Array" to start';
        }
        
        // Initialize
        window.onload = function() {
            generateArray();
        };
    </script>
</body>
</html>