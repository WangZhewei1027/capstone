<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursion Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .demo-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            background-color: #f9f9f9;
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
            white-space: pre-wrap;
        }
        input {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Recursion Demonstration</h1>
        
        <!-- Factorial Demo -->
        <div class="demo-section">
            <h2>1. Factorial Calculator</h2>
            <p>Enter a number to calculate its factorial:</p>
            <input type="number" id="factorialInput" min="0" max="100" value="5">
            <button onclick="calculateFactorial()">Calculate Factorial</button>
            <div class="result" id="factorialResult">Result will appear here</div>
        </div>

        <!-- Fibonacci Demo -->
        <div class="demo-section">
            <h2>2. Fibonacci Sequence</h2>
            <p>Enter the number of Fibonacci numbers to generate:</p>
            <input type="number" id="fibonacciInput" min="0" max="40" value="10">
            <button onclick="generateFibonacci()">Generate Fibonacci</button>
            <div class="result" id="fibonacciResult">Result will appear here</div>
        </div>

        <!-- Directory Tree Demo -->
        <div class="demo-section">
            <h2>3. Recursive Directory Structure</h2>
            <p>Simulated file system traversal:</p>
            <button onclick="displayDirectoryTree()">Show Directory Structure</button>
            <div class="result" id="directoryResult">Result will appear here</div>
        </div>

        <!-- Visual Recursion Demo -->
        <div class="demo-section">
            <h2>4. Visual Recursion - Nested Squares</h2>
            <p>Click to create recursive nested squares:</p>
            <button onclick="createVisualRecursion()">Create Nested Squares</button>
            <div id="visualContainer"></div>
        </div>
    </div>

    <script>
        // 1. Factorial Function (Classic Recursion Example)
        function factorial(n) {
            // Base case
            if (n === 0 || n === 1) {
                console.log(`factorial(${n}) = 1 (base case)`);
                return 1;
            }
            // Recursive case
            console.log(`Calculating factorial(${n}) = ${n} * factorial(${n-1})`);
            const result = n * factorial(n - 1);
            console.log(`factorial(${n}) = ${result}`);
            return result;
        }

        function calculateFactorial() {
            const input = parseInt(document.getElementById('factorialInput').value);
            const resultDiv = document.getElementById('factorialResult');
            
            if (input < 0 || input > 100) {
                resultDiv.textContent = 'Please enter a number between 0 and 100';
                return;
            }

            console.log(`=== Calculating factorial of ${input} ===`);
            const startTime = performance.now();
            const result = factorial(input);
            const endTime = performance.now();
            
            resultDiv.textContent = `${input}! = ${result}\nCalculation time: ${(endTime - startTime).toFixed(2)}ms`;
        }

        // 2. Fibonacci Sequence
        function fibonacci(n, sequence = [0, 1], depth = 0) {
            // Base case - sequence complete
            if (n <= 2) {
                console.log(`${'  '.repeat(depth)}fibonacci(${n}) - base case reached`);
                return sequence.slice(0, n);
            }
            
            // Recursive case
            console.log(`${'  '.repeat(depth)}fibonacci(${n}) - calculating next number`);
            const nextNumber = sequence[sequence.length - 1] + sequence[sequence.length - 2];
            sequence.push(nextNumber);
            
            return fibonacci(n - 1, sequence, depth + 1);
        }

        function generateFibonacci() {
            const input = parseInt(document.getElementById('fibonacciInput').value);
            const resultDiv = document.getElementById('fibonacciResult');
            
            if (input < 0 || input > 40) {
                resultDiv.textContent = 'Please enter a number between 0 and 40';
                return;
            }

            console.log(`=== Generating ${input} Fibonacci numbers ===`);
            const startTime = performance.now();
            const sequence = input === 0 ? [] : fibonacci(input);
            const endTime = performance.now();
            
            resultDiv.textContent = `Fibonacci sequence (${input} numbers): ${sequence.join(', ')}\nCalculation time: ${(endTime - startTime).toFixed(2)}ms`;
        }

        // 3. Recursive Directory Structure
        function createDirectoryStructure() {
            return {
                name: 'Root',
                type: 'directory',
                children: [
                    {
                        name: 'Documents',
                        type: 'directory',
                        children: [
                            { name: 'resume.pdf', type: 'file' },
                            { name: 'project.docx', type: 'file' },
                            {
                                name: 'Photos',
                                type: 'directory',
                                children: [
                                    { name: 'vacation.jpg', type: 'file' },
                                    { name: 'portrait.png', type: 'file' }
                                ]
                            }
                        ]
                    },
                    {
                        name: 'Code',
                        type: 'directory',
                        children: [
                            { name: 'script.js', type: 'file' },
                            {
                                name: 'src',
                                type: 'directory',
                                children: [
                                    { name: 'main.js', type: 'file' },
                                    { name: 'utils.js', type: 'file' }
                                ]
                            }
                        ]
                    },
                    { name: 'readme.txt', type: 'file' }
                ]
            };
        }

        function traverseDirectory(node, depth = 0, output = []) {
            const indent = '  '.repeat(depth);
            const icon = node.type === 'directory' ? 'ðŸ“' : 'ðŸ“„';
            output.push(`${indent}${icon} ${node.name}`);
            
            if (node.children) {
                node.children.forEach(child => {
                    traverseDirectory(child, depth + 1, output);
                });
            }
            
            return output;
        }

        function displayDirectoryTree() {
            const resultDiv = document.getElementById('directoryResult');
            const fileSystem = createDirectoryStructure();
            const tree = traverseDirectory(fileSystem);
            
            resultDiv.textContent = 'Directory Structure:\n' + tree.join('\n');
        }

        // 4. Visual Recursion - Nested Squares
        function drawNestedSquare(context, x, y, size, depth, maxDepth) {
            if (depth > maxDepth || size < 5) {
                return; // Base case
            }
            
            // Draw current square
            const hue = (depth * 30) % 360;
            context.strokeStyle = `hsl(${hue}, 70%, 50%)`;
            context.lineWidth = 2;
            context.strokeRect(x, y, size, size);
            
            // Recursive call for smaller inner square
            const newSize = size * 0.7;
            const offset = (size - newSize) / 2;
            
            drawNestedSquare(context, x + offset, y + offset, newSize, depth + 1, maxDepth);
        }

        function createVisualRecursion() {
            const container = document.getElementById('visualContainer');
            container.innerHTML = '<canvas id="recursionCanvas" width="400" height="400"></canvas>';
            
            const canvas = document.getElementById('recursionCanvas');
            const context = canvas.getContext('2d');
            
            // Clear canvas
            context.clearRect(0, 0, canvas.width, canvas.height);
            
            // Start recursive drawing
            const startSize = 300;
            const startX = (canvas.width - startSize) / 2;
            const startY = (canvas.height - startSize) / 2;
            
            drawNestedSquare(context, startX, startY, startSize, 0, 8);
        }

        // Initialize with some examples
        window.onload = function() {
            calculateFactorial();
            generateFibonacci();
            displayDirectoryTree();
        };
    </script>
</body>
</html>