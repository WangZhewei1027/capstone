<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radix Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .array-display {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
            min-height: 60px;
        }
        .digit-container {
            margin: 10px 0;
            padding: 10px;
            background-color: #e9e9e9;
            border-radius: 5px;
        }
        .buckets {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        .bucket {
            flex: 1;
            min-width: 100px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .bucket-title {
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
        }
        .step-info {
            margin: 10px 0;
            padding: 10px;
            background-color: #e3f2fd;
            border-radius: 5px;
            font-weight: bold;
        }
        .number {
            display: inline-block;
            margin: 5px;
            padding: 8px 12px;
            background-color: #2196F3;
            color: white;
            border-radius: 4px;
            transition: all 0.3s;
        }
        .number.highlight {
            background-color: #FF9800;
            transform: scale(1.1);
        }
        .comparison {
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Radix Sort Visualization</h1>
        
        <div class="controls">
            <input type="text" id="arrayInput" placeholder="Enter numbers (comma-separated)" value="170, 45, 75, 90, 2, 802, 24, 66">
            <button onclick="generateRandomArray()">Random Array</button>
            <button onclick="startSorting()">Start Radix Sort</button>
            <button onclick="nextStep()" id="nextStepBtn" disabled>Next Step</button>
            <button onclick="reset()">Reset</button>
        </div>

        <div class="array-display" id="currentArray">
            <!-- Current array will be displayed here -->
        </div>

        <div id="stepInfo" class="step-info">
            <!-- Step information will be displayed here -->
        </div>

        <div id="bucketsContainer">
            <!-- Buckets will be displayed here -->
        </div>

        <div class="comparison">
            <h3>How Radix Sort Works</h3>
            <p>Radix Sort is a non-comparative sorting algorithm that sorts numbers by processing individual digits.</p>
            <p><strong>Steps:</strong></p>
            <ol>
                <li>Find the maximum number to know the number of digits</li>
                <li>Do following for each digit (starting from least significant digit):
                    <ul>
                        <li>Sort numbers based on current digit using counting sort (or bucket sort)</li>
                        <li>Move to next more significant digit</li>
                    </ul>
                </li>
            </ol>
            <p><strong>Time Complexity:</strong> O(d*(n+b)) where d is number of digits, n is number of elements, and b is base (10 for decimal)</p>
            <p><strong>Space Complexity:</strong> O(n+b)</p>
        </div>
    </div>

    <script>
        let originalArray = [];
        let currentArray = [];
        let step = 0;
        let digitPosition = 0;
        let maxDigits = 0;
        let isSorting = false;

        // Initialize the visualization
        function initialize() {
            const input = document.getElementById('arrayInput').value;
            originalArray = input.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));
            
            if (originalArray.length === 0) {
                alert('Please enter valid numbers');
                return;
            }
            
            currentArray = [...originalArray];
            step = 0;
            digitPosition = 0;
            maxDigits = Math.max(...originalArray).toString().length;
            isSorting = false;
            
            document.getElementById('nextStepBtn').disabled = false;
            updateDisplay();
        }

        // Generate a random array
        function generateRandomArray() {
            const size = 8;
            const max = 1000;
            const randomArray = [];
            
            for (let i = 0; i < size; i++) {
                randomArray.push(Math.floor(Math.random() * max));
            }
            
            document.getElementById('arrayInput').value = randomArray.join(', ');
            initialize();
        }

        // Start the sorting process
        function startSorting() {
            initialize();
            isSorting = true;
            nextStep();
        }

        // Move to the next step of the algorithm
        function nextStep() {
            if (!isSorting) return;
            
            step++;
            updateStepInfo();
            
            if (digitPosition >= maxDigits) {
                document.getElementById('stepInfo').innerHTML = 
                    `<strong>Sorting Complete!</strong> The array is now sorted.`;
                document.getElementById('nextStepBtn').disabled = true;
                isSorting = false;
                return;
            }
            
            // Perform radix sort for the current digit position
            performRadixSortStep();
            updateDisplay();
        }

        // Update the step information display
        function updateStepInfo() {
            const stepInfo = document.getElementById('stepInfo');
            
            if (step === 1) {
                stepInfo.innerHTML = `<strong>Step ${step}:</strong> Initial array`;
            } else if (step % 2 === 0) {
                // Even steps: distributing numbers into buckets
                const digitIndex = Math.floor((step - 1) / 2);
                stepInfo.innerHTML = `<strong>Step ${step}:</strong> Distributing numbers into buckets based on ${digitIndex === 0 ? '1st' : digitIndex === 1 ? '2nd' : digitIndex === 2 ? '3rd' : (digitIndex + 1) + 'th'} digit from right`;
            } else {
                // Odd steps: collecting numbers from buckets
                const digitIndex = Math.floor((step - 1) / 2);
                stepInfo.innerHTML = `<strong>Step ${step}:</strong> Collecting numbers from buckets (sorted by ${digitIndex === 0 ? '1st' : digitIndex === 1 ? '2nd' : digitIndex === 2 ? '3rd' : (digitIndex + 1) + 'th'} digit)`;
            }
        }

        // Perform one step of radix sort
        function performRadixSortStep() {
            if (step % 2 === 0) {
                // Distribution step (even steps)
                distributeToBuckets();
            } else {
                // Collection step (odd steps)
                collectFromBuckets();
                digitPosition++;
            }
        }

        // Distribute numbers into buckets based on current digit
        function distributeToBuckets() {
            const buckets = Array(10).fill().map(() => []);
            
            for (let num of currentArray) {
                const digit = getDigit(num, digitPosition);
                buckets[digit].push(num);
            }
            
            // Store buckets for display
            window.currentBuckets = buckets;
        }

        // Collect numbers from buckets in order
        function collectFromBuckets() {
            const buckets = window.currentBuckets || Array(10).fill().map(() => []);
            currentArray = [];
            
            for (let i = 0; i < 10; i++) {
                currentArray.push(...buckets[i]);
            }
        }

        // Get the digit at the specified position (0 = ones, 1 = tens, etc.)
        function getDigit(num, position) {
            return Math.floor(Math.abs(num) / Math.pow(10, position)) % 10;
        }

        // Update the visual display
        function updateDisplay() {
            const arrayDisplay = document.getElementById('currentArray');
            const bucketsContainer = document.getElementById('bucketsContainer');
            
            // Display current array
            arrayDisplay.innerHTML = '<strong>Current Array:</strong> ' + 
                currentArray.map(num => `<span class="number">${num}</span>`).join('');
            
            // Display buckets if we're in a distribution step
            if (step % 2 === 0 && step > 1) {
                bucketsContainer.innerHTML = '<h3>Buckets:</h3><div class="buckets">';
                
                const buckets = window.currentBuckets || Array(10).fill().map(() => []);
                
                for (let i = 0; i < 10; i++) {
                    bucketsContainer.innerHTML += `
                        <div class="bucket">
                            <div class="bucket-title">Digit ${i}</div>
                            ${buckets[i].map(num => `<div class="number">${num}</div>`).join('')}
                        </div>
                    `;
                }
                
                bucketsContainer.innerHTML += '</div>';
            } else {
                bucketsContainer.innerHTML = '';
            }
            
            // Highlight numbers being processed
            if (step > 1) {
                const numbers = arrayDisplay.querySelectorAll('.number');
                numbers.forEach((numElem, index) => {
                    if (index < currentArray.length) {
                        // Add highlighting effect
                        setTimeout(() => {
                            numElem.classList.add('highlight');
                            setTimeout(() => {
                                numElem.classList.remove('highlight');
                            }, 500);
                        }, index * 100);
                    }
                });
            }
        }

        // Reset the visualization
        function reset() {
            initialize();
            document.getElementById('stepInfo').innerHTML = '';
            document.getElementById('bucketsContainer').innerHTML = '';
            document.getElementById('nextStepBtn').disabled = false;
        }

        // Initialize when page loads
        window.onload = initialize;
    </script>
</body>
</html>