<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Array in Genetic Algorithms</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .explanation {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .simulation {
            flex: 2;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 10px;
        }
        
        p {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        button:hover {
            background: #357ae8;
            transform: translateY(-2px);
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .individual {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .gene {
            width: 30px;
            height: 30px;
            margin: 0 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .gene-0 {
            background: #ff6b6b;
        }
        
        .gene-1 {
            background: #4ecdc4;
        }
        
        .generation {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 120px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4ecdc4;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Arrays in Genetic Algorithms</h1>
            <p class="subtitle">Visualizing how arrays represent chromosomes in evolutionary computation</p>
        </header>
        
        <div class="content">
            <div class="explanation">
                <h2>Understanding Arrays in Genetic Algorithms</h2>
                <p>In genetic algorithms (GAs), arrays play a fundamental role as they represent chromosomes - the encoded solutions to optimization problems.</p>
                <p>Each element in the array is a <strong>gene</strong>, which can be a binary value (0 or 1), a real number, or a symbol depending on the problem encoding.</p>
                <p>Key operations in genetic algorithms that use arrays:</p>
                <ul>
                    <li><strong>Initialization:</strong> Creating random arrays as the initial population</li>
                    <li><strong>Selection:</strong> Choosing arrays based on fitness for reproduction</li>
                    <li><strong>Crossover:</strong> Combining parts of two parent arrays to create offspring</li>
                    <li><strong>Mutation:</strong> Randomly altering some elements in the arrays</li>
                </ul>
                <p>Genetic algorithms mimic natural selection to evolve better solutions over generations. The array-based representation allows for efficient manipulation and evaluation of potential solutions.</p>
            </div>
            
            <div class="simulation">
                <h2>Genetic Algorithm Simulation</h2>
                <p>This simulation demonstrates a simple genetic algorithm trying to evolve an array of all 1s. Each array represents an individual's chromosome.</p>
                
                <div class="controls">
                    <button id="startBtn">Start Evolution</button>
                    <button id="pauseBtn" disabled>Pause</button>
                    <button id="resetBtn">Reset</button>
                    <button id="stepBtn">Next Generation</button>
                </div>
                
                <div id="populationContainer">
                    <!-- Population will be generated here by JavaScript -->
                </div>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-label">Generation</div>
                        <div id="generationCount" class="stat-value">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Best Fitness</div>
                        <div id="bestFitness" class="stat-value">0%</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Average Fitness</div>
                        <div id="avgFitness" class="stat-value">0%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>This visualization demonstrates how arrays are fundamental to genetic algorithms, serving as chromosome representations that evolve toward optimal solutions.</p>
        </footer>
    </div>

    <script>
        // Genetic Algorithm parameters
        const POPULATION_SIZE = 6;
        const CHROMOSOME_LENGTH = 10;
        const MUTATION_RATE = 0.1;
        const TARGET_ARRAY = Array(CHROMOSOME_LENGTH).fill(1); // Target: all 1s
        
        // GA state
        let population = [];
        let generation = 0;
        let isRunning = false;
        let animationId = null;
        
        // DOM elements
        const populationContainer = document.getElementById('populationContainer');
        const generationCount = document.getElementById('generationCount');
        const bestFitness = document.getElementById('bestFitness');
        const avgFitness = document.getElementById('avgFitness');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const stepBtn = document.getElementById('stepBtn');
        
        // Initialize a random individual
        function createIndividual() {
            return Array(CHROMOSOME_LENGTH).fill().map(() => Math.round(Math.random()));
        }
        
        // Calculate fitness (percentage of genes matching target)
        function calculateFitness(individual) {
            let matches = 0;
            for (let i = 0; i < CHROMOSOME_LENGTH; i++) {
                if (individual[i] === TARGET_ARRAY[i]) {
                    matches++;
                }
            }
            return (matches / CHROMOSOME_LENGTH) * 100;
        }
        
        // Selection using tournament selection
        function selectParent() {
            // Randomly select two individuals and return the fitter one
            const index1 = Math.floor(Math.random() * POPULATION_SIZE);
            const index2 = Math.floor(Math.random() * POPULATION_SIZE);
            
            return calculateFitness(population[index1]) > calculateFitness(population[index2]) 
                ? population[index1] 
                : population[index2];
        }
        
        // Crossover (single point)
        function crossover(parent1, parent2) {
            const crossoverPoint = Math.floor(Math.random() * CHROMOSOME_LENGTH);
            const child = [];
            
            for (let i = 0; i < CHROMOSOME_LENGTH; i++) {
                child.push(i < crossoverPoint ? parent1[i] : parent2[i]);
            }
            
            return child;
        }
        
        // Mutation
        function mutate(individual) {
            return individual.map(gene => {
                if (Math.random() < MUTATION_RATE) {
                    return gene === 0 ? 1 : 0; // Flip the bit
                }
                return gene;
            });
        }
        
        // Create a new generation
        function createNewGeneration() {
            const newPopulation = [];
            
            // Elitism: keep the best individual
            let bestIndividual = population[0];
            let bestFitnessValue = calculateFitness(population[0]);
            
            for (let i = 1; i < POPULATION_SIZE; i++) {
                const fitness = calculateFitness(population[i]);
                if (fitness > bestFitnessValue) {
                    bestIndividual = population[i];
                    bestFitnessValue = fitness;
                }
            }
            
            newPopulation.push([...bestIndividual]); // Keep the best
            
            // Create the rest of the population through selection, crossover, and mutation
            while (newPopulation.length < POPULATION_SIZE) {
                const parent1 = selectParent();
                const parent2 = selectParent();
                let child = crossover(parent1, parent2);
                child = mutate(child);
                newPopulation.push(child);
            }
            
            return newPopulation;
        }
        
        // Update the visualization
        function updateVisualization() {
            populationContainer.innerHTML = '';
            
            // Calculate statistics
            let totalFitness = 0;
            let currentBestFitness = 0;
            
            population.forEach((individual, index) => {
                const fitness = calculateFitness(individual);
                totalFitness += fitness;
                
                if (fitness > currentBestFitness) {
                    currentBestFitness = fitness;
                }
                
                const individualDiv = document.createElement('div');
                individualDiv.className = 'individual';
                
                const fitnessDiv = document.createElement('div');
                fitnessDiv.textContent = `Fitness: ${fitness.toFixed(1)}%`;
                fitnessDiv.style.marginRight = '10px';
                fitnessDiv.style.minWidth = '80px';
                individualDiv.appendChild(fitnessDiv);
                
                individual.forEach(gene => {
                    const geneDiv = document.createElement('div');
                    geneDiv.className = `gene gene-${gene}`;
                    geneDiv.textContent = gene;
                    individualDiv.appendChild(geneDiv);
                });
                
                populationContainer.appendChild(individualDiv);
            });
            
            // Update statistics
            generationCount.textContent = generation;
            bestFitness.textContent = `${currentBestFitness.toFixed(1)}%`;
            avgFitness.textContent = `${(totalFitness / POPULATION_SIZE).toFixed(1)}%`;
        }
        
        // Run one generation
        function runGeneration() {
            population = createNewGeneration();
            generation++;
            updateVisualization();
            
            // Check if we've reached the target
            const bestIndividualFitness = calculateFitness(population[0]);
            if (bestIndividualFitness === 100) {
                stopEvolution();
                alert(`Target reached in ${generation} generations!`);
            }
        }
        
        // Main evolution loop
        function evolutionLoop() {
            if (isRunning) {
                runGeneration();
                animationId = setTimeout(evolutionLoop, 1000);
            }
        }
        
        // Start evolution
        function startEvolution() {
            if (!isRunning) {
                isRunning = true;
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                stepBtn.disabled = true;
                animationId = setTimeout(evolutionLoop, 1000);
            }
        }
        
        // Pause evolution
        function pauseEvolution() {
            isRunning = false;
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            stepBtn.disabled = false;
            if (animationId) {
                clearTimeout(animationId);
                animationId = null;
            }
        }
        
        // Stop evolution
        function stopEvolution() {
            isRunning = false;
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            stepBtn.disabled = false;
            if (animationId) {
                clearTimeout(animationId);
                animationId = null;
            }
        }
        
        // Reset the simulation
        function resetSimulation() {
            stopEvolution();
            generation = 0;
            population = Array(POPULATION_SIZE).fill().map(createIndividual);
            updateVisualization();
        }
        
        // Step through one generation
        function stepGeneration() {
            if (!isRunning) {
                runGeneration();
            }
        }
        
        // Initialize the simulation
        function init() {
            // Create initial population
            population = Array(POPULATION_SIZE).fill().map(createIndividual);
            updateVisualization();
            
            // Add event listeners
            startBtn.addEventListener('click', startEvolution);
            pauseBtn.addEventListener('click', pauseEvolution);
            resetBtn.addEventListener('click', resetSimulation);
            stepBtn.addEventListener('click', stepGeneration);
        }
        
        // Start when the page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>