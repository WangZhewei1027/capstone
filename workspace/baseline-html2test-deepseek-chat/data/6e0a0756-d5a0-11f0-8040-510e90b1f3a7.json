{
  "id": "6e0a0756-d5a0-11f0-8040-510e90b1f3a7",
  "timestamp": "2025-12-10T08:20:01.550Z",
  "type": "html-to-test",
  "htmlModel": "deepseek-chat",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "K-Nearest Neighbors (KNN)",
  "answer": {
    "role": "assistant",
    "content": "# K-Nearest Neighbors (KNN) Interactive Demonstration\n\nI'll create an interactive visualization that demonstrates how K-Nearest Neighbors classification works, allowing users to place points and see how the algorithm classifies them.\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>K-Nearest Neighbors (KNN) Demo</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        }\n        \n        body {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            min-height: 100vh;\n            padding: 20px;\n            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n        }\n        \n        .container {\n            max-width: 1200px;\n            width: 100%;\n        }\n        \n        header {\n            text-align: center;\n            margin-bottom: 30px;\n            background: white;\n            padding: 20px;\n            border-radius: 10px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        }\n        \n        h1 {\n            color: #2c3e50;\n            margin-bottom: 10px;\n            font-size: 2.5rem;\n        }\n        \n        .subtitle {\n            color: #7f8c8d;\n            font-size: 1.2rem;\n            max-width: 800px;\n            margin: 0 auto;\n            line-height: 1.6;\n        }\n        \n        .content {\n            display: grid;\n            grid-template-columns: 3fr 1fr;\n            gap: 20px;\n        }\n        \n        .visualization-container {\n            background: white;\n            border-radius: 10px;\n            padding: 20px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n            position: relative;\n        }\n        \n        .controls {\n            background: white;\n            border-radius: 10px;\n            padding: 20px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n        \n        .control-group {\n            display: flex;\n            flex-direction: column;\n            gap: 10px;\n        }\n        \n        h2 {\n            color: #2c3e50;\n            margin-bottom: 10px;\n            font-size: 1.5rem;\n        }\n        \n        label {\n            font-weight: 600;\n            color: #34495e;\n        }\n        \n        input {\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 5px;\n            font-size: 1rem;\n        }\n        \n        button {\n            padding: 12px;\n            border: none;\n            border-radius: 5px;\n            background: #3498db;\n            color: white;\n            font-weight: 600;\n            cursor: pointer;\n            transition: background 0.3s;\n            font-size: 1rem;\n        }\n        \n        button:hover {\n            background: #2980b9;\n        }\n        \n        #canvas {\n            width: 100%;\n            height: 500px;\n            border: 1px solid #ddd;\n            border-radius: 5px;\n            cursor: crosshair;\n            background: #f8f9fa;\n        }\n        \n        .legend {\n            display: flex;\n            gap: 15px;\n            margin-top: 10px;\n            flex-wrap: wrap;\n        }\n        \n        .legend-item {\n            display: flex;\n            align-items: center;\n            gap: 5px;\n        }\n        \n        .legend-color {\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n        }\n        \n        .explanation {\n            margin-top: 30px;\n            background: white;\n            border-radius: 10px;\n            padding: 25px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        }\n        \n        h3 {\n            color: #2c3e50;\n            margin-bottom: 15px;\n            font-size: 1.8rem;\n        }\n        \n        p {\n            line-height: 1.6;\n            margin-bottom: 15px;\n            color: #34495e;\n        }\n        \n        .steps {\n            display: flex;\n            justify-content: space-between;\n            margin-top: 20px;\n            flex-wrap: wrap;\n            gap: 15px;\n        }\n        \n        .step {\n            flex: 1;\n            min-width: 250px;\n            padding: 20px;\n            background: #f8f9fa;\n            border-radius: 8px;\n            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\n        }\n        \n        .step-number {\n            display: inline-block;\n            width: 30px;\n            height: 30px;\n            background: #3498db;\n            color: white;\n            border-radius: 50%;\n            text-align: center;\n            line-height: 30px;\n            margin-right: 10px;\n            font-weight: bold;\n        }\n        \n        .info-box {\n            background: #e8f4fc;\n            padding: 15px;\n            border-radius: 8px;\n            margin-top: 15px;\n            border-left: 4px solid #3498db;\n        }\n        \n        .tooltip {\n            position: absolute;\n            background: rgba(0, 0, 0, 0.75);\n            color: white;\n            padding: 8px 12px;\n            border-radius: 4px;\n            pointer-events: none;\n            font-size: 14px;\n            display: none;\n            z-index: 10;\n        }\n        \n        @media (max-width: 900px) {\n            .content {\n                grid-template-columns: 1fr;\n            }\n            \n            .steps {\n                flex-direction: column;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <header>\n            <h1>K-Nearest Neighbors (KNN) Algorithm</h1>\n            <p class=\"subtitle\">An interactive demonstration of how the K-Nearest Neighbors classification algorithm works. Place points on the canvas and see how KNN classifies new points based on their neighbors.</p>\n        </header>\n        \n        <div class=\"content\">\n            <div class=\"visualization-container\">\n                <canvas id=\"canvas\"></canvas>\n                <div class=\"legend\">\n                    <div class=\"legend-item\">\n                        <div class=\"legend-color\" style=\"background-color: #e74c3c;\"></div>\n                        <span>Class A (Red)</span>\n                    </div>\n                    <div class=\"legend-item\">\n                        <div class=\"legend-color\" style=\"background-color: #2ecc71;\"></div>\n                        <span>Class B (Green)</span>\n                    </div>\n                    <div class=\"legend-item\">\n                        <div class=\"legend-color\" style=\"background-color: #3498db;\"></div>\n                        <span>New Point (Blue)</span>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"controls\">\n                <div class=\"control-group\">\n                    <h2>Controls</h2>\n                    <label for=\"k-value\">K Value:</label>\n                    <input type=\"number\" id=\"k-value\" min=\"1\" max=\"20\" value=\"5\">\n                    \n                    <label>Mode:</label>\n                    <div>\n                        <input type=\"radio\" id=\"mode-a\" name=\"mode\" value=\"A\" checked>\n                        <label for=\"mode-a\">Class A (Red)</label>\n                    </div>\n                    <div>\n                        <input type=\"radio\" id=\"mode-b\" name=\"mode\" value=\"B\">\n                        <label for=\"mode-b\">Class B (Green)</label>\n                    </div>\n                    <div>\n                        <input type=\"radio\" id=\"mode-classify\" name=\"mode\" value=\"classify\">\n                        <label for=\"mode-classify\">Classify Point</label>\n                    </div>\n                </div>\n                \n                <div class=\"control-group\">\n                    <button id=\"reset-btn\">Reset Canvas</button>\n                    <button id=\"generate-random\">Generate Random Points</button>\n                </div>\n                \n                <div class=\"control-group\">\n                    <h2>How KNN Works</h2>\n                    <p>1. Select a value for K (number of neighbors)</p>\n                    <p>2. Calculate distance to all training points</p>\n                    <p>3. Identify the K nearest neighbors</p>\n                    <p>4. Classify based on majority vote of neighbors</p>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"explanation\">\n            <h3>Understanding K-Nearest Neighbors</h3>\n            <p>The K-Nearest Neighbors (KNN) algorithm is a simple, supervised machine learning algorithm that can be used for both classification and regression. It's based on the principle that similar things exist in close proximity.</p>\n            \n            <div class=\"info-box\">\n                <p><strong>Key Idea:</strong> The class of a new data point is determined by the classes of its K nearest neighbors in the feature space.</p>\n            </div>\n            \n            <div class=\"steps\">\n                <div class=\"step\">\n                    <h3><span class=\"step-number\">1</span>Choose K</h3>\n                    <p>Select the number of neighbors (K) to consider. A small K value makes the algorithm sensitive to noise, while a large K value makes it more stable but possibly less accurate.</p>\n                </div>\n                \n                <div class=\"step\">\n                    <h3><span class=\"step-number\">2</span>Calculate Distance</h3>\n                    <p>Compute the distance between the new point and all existing points. Typically, Euclidean distance is used, but other distance metrics can be applied.</p>\n                </div>\n                \n                <div class=\"step\">\n                    <h3><span class=\"step-number\">3</span>Find Neighbors</h3>\n                    <p>Identify the K points with the smallest distances to the new point. These are the \"nearest neighbors.\"</p>\n                </div>\n                \n                <div class=\"step\">\n                    <h3><span class=\"step-number\">4</span>Majority Vote</h3>\n                    <p>For classification, assign the class that appears most frequently among the K neighbors. For regression, take the average of the neighbors' values.</p>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"tooltip\" id=\"tooltip\"></div>\n\n    <script>\n        // Canvas setup\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n        const tooltip = document.getElementById('tooltip');\n        \n        // Set canvas dimensions\n        function resizeCanvas() {\n            canvas.width = canvas.offsetWidth;\n            canvas.height = canvas.offsetHeight;\n            redraw();\n        }\n        \n        window.addEventListener('resize', resizeCanvas);\n        resizeCanvas();\n        \n        // Data storage\n        let points = {\n            A: [], // Class A points (red)\n            B: []  // Class B points (green)\n        };\n        \n        let newPoint = null; // Point to classify (blue)\n        let nearestNeighbors = []; // Store nearest neighbors for visualization\n        \n        // Colors\n        const colors = {\n            A: '#e74c3c', // Red\n            B: '#2ecc71', // Green\n            newPoint: '#3498db', // Blue\n            neighborLine: '#f39c12' // Orange\n        };\n        \n        // Configuration\n        let currentMode = 'A'; // Default mode: placing Class A points\n        let kValue = 5; // Default K value\n        \n        // Initialize controls\n        document.getElementById('k-value').value = kValue;\n        \n        // Event listeners for mode selection\n        document.querySelectorAll('input[name=\"mode\"]').forEach(radio => {\n            radio.addEventListener('change', (e) => {\n                currentMode = e.target.value;\n                redraw();\n            });\n        });\n        \n        // K value change\n        document.getElementById('k-value').addEventListener('input', (e) => {\n            kValue = parseInt(e.target.value) || 1;\n            if (newPoint) classifyPoint(newPoint.x, newPoint.y);\n            redraw();\n        });\n        \n        // Reset button\n        document.getElementById('reset-btn').addEventListener('click', () => {\n            points.A = [];\n            points.B = [];\n            newPoint = null;\n            nearestNeighbors = [];\n            redraw();\n        });\n        \n        // Generate random points\n        document.getElementById('generate-random').addEventListener('click', () => {\n            // Clear existing points\n            points.A = [];\n            points.B = [];\n            newPoint = null;\n            nearestNeighbors = [];\n            \n            // Generate random points for both classes\n            for (let i = 0; i < 15; i++) {\n                points.A.push({\n                    x: Math.random() * (canvas.width - 40) + 20,\n                    y: Math.random() * (canvas.height - 40) + 20\n                });\n                \n                points.B.push({\n                    x: Math.random() * (canvas.width - 40) + 20,\n                    y: Math.random() * (canvas.height - 40) + 20\n                });\n            }\n            \n            redraw();\n        });\n        \n        // Canvas click handler\n        canvas.addEventListener('click', (e) => {\n            const rect = canvas.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            \n            if (currentMode === 'classify') {\n                // Classify point\n                newPoint = { x, y };\n                classifyPoint(x, y);\n            } else {\n                // Add training point\n                const point = { x, y };\n                \n                if (currentMode === 'A') {\n                    points.A.push(point);\n                } else if (currentMode === 'B') {\n                    points.B.push(point);\n                }\n            }\n            \n            redraw();\n        });\n        \n        // Mouse move for tooltip\n        canvas.addEventListener('mousemove', (e) => {\n            const rect = canvas.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            \n            // Check if mouse is over a point\n            let overPoint = false;\n            \n            // Check class A points\n            points.A.forEach(point => {\n                const dist = Math.sqrt((point.x - x) ** 2 + (point.y - y) ** 2);\n                if (dist < 10) {\n                    tooltip.innerHTML = `Class A<br>X: ${Math.round(point.x)}<br>Y: ${Math.round(point.y)}`;\n                    tooltip.style.display = 'block';\n                    tooltip.style.left = `${e.clientX + 10}px`;\n                    tooltip.style.top = `${e.clientY + 10}px`;\n                    overPoint = true;\n                }\n            });\n            \n            // Check class B points\n            points.B.forEach(point => {\n                const dist = Math.sqrt((point.x - x) ** 2 + (point.y - y) ** 2);\n                if (dist < 10) {\n                    tooltip.innerHTML = `Class B<br>X: ${Math.round(point.x)}<br>Y: ${Math.round(point.y)}`;\n                    tooltip.style.display = 'block';\n                    tooltip.style.left = `${e.clientX + 10}px`;\n                    tooltip.style.top = `${e.clientY + 10}px`;\n                    overPoint = true;\n                }\n            });\n            \n            // Check new point\n            if (newPoint) {\n                const dist = Math.sqrt((newPoint.x - x) ** 2 + (newPoint.y - y) ** 2);\n                if (dist < 10) {\n                    tooltip.innerHTML = `New Point<br>X: ${Math.round(newPoint.x)}<br>Y: ${Math.round(newPoint.y)}<br>Classified as: ${newPoint.class || 'Not classified'}`;\n                    tooltip.style.display = 'block';\n                    tooltip.style.left = `${e.clientX + 10}px`;\n                    tooltip.style.top = `${e.clientY + 10}px`;\n                    overPoint = true;\n                }\n            }\n            \n            if (!overPoint) {\n                tooltip.style.display = 'none';\n            }\n        });\n        \n        // Classify a point using KNN\n        function classifyPoint(x, y) {\n            // Combine all points\n            const allPoints = [\n                ...points.A.map(p => ({ ...p, class: 'A' })),\n                ...points.B.map(p => ({ ...p, class: 'B' }))\n            ];\n            \n            if (allPoints.length === 0) {\n                newPoint.class = 'No training data';\n                nearestNeighbors = [];\n                return;\n            }\n            \n            if (kValue > allPoints.length) {\n                kValue = allPoints.length;\n                document.getElementById('k-value').value = kValue;\n            }\n            \n            // Calculate distances to all points\n            const distances = allPoints.map(point => {\n                const distance = Math.sqrt((point.x - x) ** 2 + (point.y - y) ** 2);\n                return { ...point, distance };\n            });\n            \n            // Sort by distance\n            distances.sort((a, b) => a.distance - b.distance);\n            \n            // Get K nearest neighbors\n            nearestNeighbors = distances.slice(0, kValue);\n            \n            // Count votes for each class\n            const votes = { A: 0, B: 0 };\n            nearestNeighbors.forEach(neighbor => {\n                votes[neighbor.class]++;\n            });\n            \n            // Determine the class with majority vote\n            if (votes.A > votes.B) {\n                newPoint.class = 'A';\n            } else if (votes.B > votes.A) {\n                newPoint.class = 'B';\n            } else {\n                // In case of a tie, choose the class of the closest neighbor\n                newPoint.class = nearestNeighbors[0].class;\n            }\n        }\n        \n        // Draw everything on the canvas\n        function redraw() {\n            // Clear canvas\n            ctx.clearRect"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "K-Nearest Neighbors (KNN)"
    }
  ],
  "topic": "K-Nearest Neighbors (KNN)",
  "hasFSM": false,
  "hasTest": true
}