{
  "id": "6e0a0755-d5a0-11f0-8040-510e90b1f3a7",
  "timestamp": "2025-12-10T08:18:56.638Z",
  "type": "html-to-test",
  "htmlModel": "deepseek-chat",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Linear Regression",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Linear Regression Visualization</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 1000px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .container {\n            background-color: white;\n            padding: 20px;\n            border-radius: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        h1 {\n            color: #333;\n            text-align: center;\n        }\n        .controls {\n            margin: 20px 0;\n            display: flex;\n            flex-wrap: wrap;\n            gap: 10px;\n            align-items: center;\n        }\n        button {\n            padding: 8px 16px;\n            background-color: #4CAF50;\n            color: white;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n        }\n        button:hover {\n            background-color: #45a049;\n        }\n        input {\n            padding: 8px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n        }\n        .chart-container {\n            position: relative;\n            height: 400px;\n            margin: 20px 0;\n        }\n        .stats {\n            background-color: #f9f9f9;\n            padding: 15px;\n            border-radius: 5px;\n            margin: 10px 0;\n        }\n        .equation {\n            font-family: monospace;\n            font-size: 1.2em;\n            margin: 10px 0;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Linear Regression Demonstration</h1>\n        \n        <div class=\"controls\">\n            <button onclick=\"generateRandomData()\">Generate Random Data</button>\n            <button onclick=\"addCustomPoint()\">Add Custom Point</button>\n            <button onclick=\"clearAllPoints()\">Clear All Points</button>\n            <div>\n                <label>X: <input type=\"number\" id=\"xInput\" value=\"5\" step=\"0.1\"></label>\n                <label>Y: <input type=\"number\" id=\"yInput\" value=\"5\" step=\"0.1\"></label>\n            </div>\n        </div>\n\n        <div class=\"chart-container\">\n            <canvas id=\"regressionChart\"></canvas>\n        </div>\n\n        <div class=\"stats\">\n            <h3>Regression Statistics</h3>\n            <div class=\"equation\" id=\"equation\">y = mx + b</div>\n            <div id=\"statsDetails\">Add points to see statistics</div>\n        </div>\n\n        <div>\n            <h3>How Linear Regression Works</h3>\n            <p>Linear regression finds the best-fit line through a set of data points by minimizing the sum of squared errors between the actual y-values and the predicted y-values.</p>\n            <p><strong>Formula:</strong> y = mx + b, where:</p>\n            <ul>\n                <li>m = slope = Σ((x - x̄)(y - ȳ)) / Σ((x - x̄)²)</li>\n                <li>b = y-intercept = ȳ - m*x̄</li>\n                <li>R² = coefficient of determination (how well the line fits the data)</li>\n            </ul>\n        </div>\n    </div>\n\n    <script>\n        let dataPoints = [];\n        let regressionLine = null;\n        let chart = null;\n\n        // Initialize chart\n        function initializeChart() {\n            const ctx = document.getElementById('regressionChart').getContext('2d');\n            \n            chart = new Chart(ctx, {\n                type: 'scatter',\n                data: {\n                    datasets: [\n                        {\n                            label: 'Data Points',\n                            data: dataPoints,\n                            backgroundColor: 'rgba(54, 162, 235, 0.8)',\n                            pointRadius: 6,\n                            pointHoverRadius: 8\n                        }\n                    ]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        x: {\n                            type: 'linear',\n                            position: 'bottom',\n                            title: {\n                                display: true,\n                                text: 'X Values'\n                            }\n                        },\n                        y: {\n                            title: {\n                                display: true,\n                                text: 'Y Values'\n                            }\n                        }\n                    },\n                    plugins: {\n                        tooltip: {\n                            callbacks: {\n                                label: function(context) {\n                                    return `(${context.parsed.x}, ${context.parsed.y})`;\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n\n        // Calculate linear regression\n        function calculateRegression() {\n            if (dataPoints.length < 2) {\n                updateStats('Need at least 2 points for regression');\n                return null;\n            }\n\n            const n = dataPoints.length;\n            let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;\n\n            dataPoints.forEach(point => {\n                sumX += point.x;\n                sumY += point.y;\n                sumXY += point.x * point.y;\n                sumX2 += point.x * point.x;\n            });\n\n            const meanX = sumX / n;\n            const meanY = sumY / n;\n\n            // Calculate slope (m) and intercept (b)\n            const m = (sumXY - n * meanX * meanY) / (sumX2 - n * meanX * meanX);\n            const b = meanY - m * meanX;\n\n            // Calculate R-squared\n            let ssTotal = 0, ssResidual = 0;\n            dataPoints.forEach(point => {\n                const yPred = m * point.x + b;\n                ssTotal += Math.pow(point.y - meanY, 2);\n                ssResidual += Math.pow(point.y - yPred, 2);\n            });\n            const rSquared = 1 - (ssResidual / ssTotal);\n\n            return { m, b, rSquared, meanX, meanY };\n        }\n\n        // Update regression line on chart\n        function updateRegressionLine() {\n            const regression = calculateRegression();\n            \n            if (!regression) {\n                if (regressionLine) {\n                    chart.data.datasets = chart.data.datasets.filter(ds => ds !== regressionLine);\n                    regressionLine = null;\n                    chart.update();\n                }\n                return;\n            }\n\n            // Remove existing regression line\n            if (regressionLine) {\n                chart.data.datasets = chart.data.datasets.filter(ds => ds !== regressionLine);\n            }\n\n            // Create new regression line\n            const minX = Math.min(...dataPoints.map(p => p.x));\n            const maxX = Math.max(...dataPoints.map(p => p.x));\n            \n            regressionLine = {\n                label: 'Regression Line',\n                data: [\n                    { x: minX, y: regression.m * minX + regression.b },\n                    { x: maxX, y: regression.m * maxX + regression.b }\n                ],\n                type: 'line',\n                borderColor: 'rgba(255, 99, 132, 1)',\n                borderWidth: 2,\n                pointRadius: 0,\n                fill: false,\n                showLine: true\n            };\n\n            chart.data.datasets.push(regressionLine);\n            chart.update();\n\n            // Update statistics display\n            updateStats(regression);\n        }\n\n        // Update statistics display\n        function updateStats(regression) {\n            const equationElement = document.getElementById('equation');\n            const statsElement = document.getElementById('statsDetails');\n\n            if (typeof regression === 'string') {\n                equationElement.textContent = regression;\n                statsElement.textContent = '';\n                return;\n            }\n\n            equationElement.textContent = `y = ${regression.m.toFixed(3)}x + ${regression.b.toFixed(3)}`;\n            \n            statsElement.innerHTML = `\n                <p><strong>Slope (m):</strong> ${regression.m.toFixed(4)}</p>\n                <p><strong>Y-Intercept (b):</strong> ${regression.b.toFixed(4)}</p>\n                <p><strong>R² (Goodness of Fit):</strong> ${regression.rSquared.toFixed(4)}</p>\n                <p><strong>Mean X:</strong> ${regression.meanX.toFixed(2)}</p>\n                <p><strong>Mean Y:</strong> ${regression.meanY.toFixed(2)}</p>\n                <p><strong>Number of Points:</strong> ${dataPoints.length}</p>\n            `;\n        }\n\n        // Add a data point\n        function addDataPoint(x, y) {\n            dataPoints.push({ x, y });\n            chart.data.datasets[0].data = dataPoints;\n            chart.update();\n            updateRegressionLine();\n        }\n\n        // Generate random data points\n        function generateRandomData() {\n            dataPoints = [];\n            for (let i = 0; i < 20; i++) {\n                const x = Math.random() * 10;\n                const y = 2 * x + 3 + (Math.random() - 0.5) * 4; // y = 2x + 3 + noise\n                dataPoints.push({ x: Number(x.toFixed(2)), y: Number(y.toFixed(2)) });\n            }\n            chart.data.datasets[0].data = dataPoints;\n            chart.update();\n            updateRegressionLine();\n        }\n\n        // Add custom point from input\n        function addCustomPoint() {\n            const x = parseFloat(document.getElementById('xInput').value);\n            const y = parseFloat(document.getElementById('yInput').value);\n            \n            if (!isNaN(x) && !isNaN(y)) {\n                addDataPoint(x, y);\n            }\n        }\n\n        // Clear all points\n        function clearAllPoints() {\n            dataPoints = [];\n            chart.data.datasets[0].data = dataPoints;\n            chart.update();\n            updateRegressionLine();\n        }\n\n        // Initialize on page load\n        window.onload = function() {\n            initializeChart();\n            // Add some initial points\n            addDataPoint(1, 2);\n            addDataPoint(2, 4);\n            addDataPoint(3, 6);\n            addDataPoint(4, 8);\n        };\n\n        // Allow adding points by clicking on the chart\n        document.getElementById('regressionChart').onclick = function(evt) {\n            if (chart) {\n                const points = chart.getElementsAtEventForMode(evt, 'nearest', { intersect: true }, true);\n                if (points.length === 0) {\n                    const canvas = evt.target;\n                    const rect = canvas.getBoundingClientRect();\n                    const x = evt.clientX - rect.left;\n                    const y = evt.clientY - rect.top;\n                    \n                    const xScale = chart.scales.x;\n                    const yScale = chart.scales.y;\n                    \n                    const xValue = xScale.getValueForPixel(x);\n                    const yValue = yScale.getValueForPixel(y);\n                    \n                    addDataPoint(Number(xValue.toFixed(2)), Number(yValue.toFixed(2)));\n                }\n            }\n        };\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Linear Regression"
    }
  ],
  "topic": "Linear Regression",
  "hasFSM": false,
  "hasTest": true
}