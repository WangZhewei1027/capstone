{
  "id": "6e09e034-d5a0-11f0-8040-510e90b1f3a7",
  "timestamp": "2025-12-10T08:19:37.872Z",
  "type": "html-to-test",
  "htmlModel": "deepseek-chat",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Bubble Sort Visualization</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n            color: #333;\n        }\n        h1 {\n            color: #2c3e50;\n            text-align: center;\n            margin-bottom: 10px;\n        }\n        .description {\n            text-align: center;\n            margin-bottom: 30px;\n            color: #7f8c8d;\n        }\n        .controls {\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: center;\n            gap: 10px;\n            margin-bottom: 20px;\n        }\n        button {\n            background-color: #3498db;\n            color: white;\n            border: none;\n            padding: 10px 15px;\n            border-radius: 4px;\n            cursor: pointer;\n            transition: background-color 0.3s;\n        }\n        button:hover {\n            background-color: #2980b9;\n        }\n        button:disabled {\n            background-color: #bdc3c7;\n            cursor: not-allowed;\n        }\n        .array-input {\n            width: 250px;\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n        }\n        .visualization {\n            margin-top: 40px;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n        }\n        .array-bar {\n            width: 30px;\n            margin: 0 5px;\n            display: flex;\n            align-items: flex-end;\n            justify-content: center;\n            background-color: #3498db;\n            color: white;\n            font-weight: bold;\n            transition: all 0.3s ease;\n        }\n        .bars-container {\n            display: flex;\n            align-items: flex-end;\n            margin-bottom: 20px;\n            height: 200px;\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            background-color: white;\n            width: 100%;\n            overflow-x: auto;\n        }\n        .comparison {\n            height: 30px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin-top: 20px;\n            padding: 5px 15px;\n            border-radius: 4px;\n            background-color: #f8f9fa;\n            font-style: italic;\n        }\n        .active-bar {\n            background-color: #e74c3c !important;\n        }\n        .compared-bar {\n            background-color: #f39c12 !important;\n        }\n        .sorted-bar {\n            background-color: #2ecc71 !important;\n        }\n        .steps {\n            margin-top: 20px;\n            text-align: center;\n        }\n        .legend {\n            display: flex;\n            justify-content: center;\n            gap: 20px;\n            margin: 15px 0;\n            flex-wrap: wrap;\n        }\n        .legend-item {\n            display: flex;\n            align-items: center;\n            gap: 5px;\n        }\n        .legend-color {\n            width: 20px;\n            height: 20px;\n            border-radius: 3px;\n        }\n        .speed-control {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            margin-bottom: 15px;\n        }\n        .speed-slider {\n            width: 150px;\n        }\n    </style>\n</head>\n<body>\n    <h1>Bubble Sort Visualization</h1>\n    <p class=\"description\">Bubble Sort is a simple sorting algorithm that repeatedly steps through the list, \n    compares adjacent elements and swaps them if they are in the wrong order.</p>\n    \n    <div class=\"controls\">\n        <input type=\"text\" id=\"arrayInput\" class=\"array-input\" placeholder=\"Enter numbers separated by commas (e.g., 5,3,8,4,2)\">\n        <button id=\"resetBtn\">Reset Array</button>\n        <button id=\"randomBtn\">Generate Random Array</button>\n        <button id=\"sortBtn\">Start Bubble Sort</button>\n        <button id=\"pauseBtn\" disabled>Pause</button>\n        <button id=\"stepBtn\" disabled>Next Step</button>\n    </div>\n\n    <div class=\"speed-control\">\n        <span>Animation Speed:</span>\n        <input type=\"range\" id=\"speedSlider\" class=\"speed-slider\" min=\"1\" max=\"10\" value=\"5\">\n        <span id=\"speedValue\">Medium</span>\n    </div>\n\n    <div class=\"legend\">\n        <div class=\"legend-item\">\n            <div class=\"legend-color\" style=\"background-color: #3498db;\"></div>\n            <span>Normal Element</span>\n        </div>\n        <div class=\"legend-item\">\n            <div class=\"legend-color\" style=\"background-color: #e74c3c;\"></div>\n            <span>Currently Comparing</span>\n        </div>\n        <div class=\"legend-item\">\n            <div class=\"legend-color\" style=\"background-color: #f39c12;\"></div>\n            <span>Compared Element</span>\n        </div>\n        <div class=\"legend-item\">\n            <div class=\"legend-color\" style=\"background-color: #2ecc71;\"></div>\n            <span>Sorted Element</span>\n        </div>\n    </div>\n\n    <div class=\"visualization\">\n        <div id=\"barsContainer\" class=\"bars-container\"></div>\n        <div id=\"comparisonText\" class=\"comparison\"></div>\n        <div id=\"stepsText\" class=\"steps\">Steps: 0 | Comparisons: 0 | Swaps: 0</div>\n    </div>\n\n    <script>\n        // Global variables for the algorithm\n        let array = [];\n        let isSorting = false;\n        let isPaused = false;\n        let currentStep = 0;\n        let steps = 0;\n        let comparisons = 0;\n        let swaps = 0;\n        let animationSpeed = 500; // ms\n        \n        // DOM elements\n        const arrayInput = document.getElementById('arrayInput');\n        const resetBtn = document.getElementById('resetBtn');\n        const randomBtn = document.getElementById('randomBtn');\n        const sortBtn = document.getElementById('sortBtn');\n        const pauseBtn = document.getElementById('pauseBtn');\n        const stepBtn = document.getElementById('stepBtn');\n        const barsContainer = document.getElementById('barsContainer');\n        const comparisonText = document.getElementById('comparisonText');\n        const stepsText = document.getElementById('stepsText');\n        const speedSlider = document.getElementById('speedSlider');\n        const speedValue = document.getElementById('speedValue');\n        \n        // Initialize with a default array\n        window.onload = function() {\n            array = [5, 3, 8, 4, 2];\n            arrayInput.value = array.join(', ');\n            renderBars();\n        };\n        \n        // Event listeners\n        resetBtn.addEventListener('click', function() {\n            if (isSorting) return;\n            const inputArray = arrayInput.value.split(',').map(item => parseInt(item.trim())).filter(item => !isNaN(item));\n            if (inputArray.length > 0) {\n                array = inputArray;\n                renderBars();\n                resetStats();\n            } else {\n                alert('Please enter valid numbers separated by commas.');\n            }\n        });\n        \n        randomBtn.addEventListener('click', function() {\n            if (isSorting) return;\n            array = generateRandomArray(8, 1, 20);\n            arrayInput.value = array.join(', ');\n            renderBars();\n            resetStats();\n        });\n        \n        sortBtn.addEventListener('click', function() {\n            if (isSorting) return;\n            isSorting = true;\n            sortBtn.disabled = true;\n            pauseBtn.disabled = false;\n            stepBtn.disabled = true;\n            bubbleSort();\n        });\n        \n        pauseBtn.addEventListener('click', function() {\n            if (!isSorting) return;\n            isPaused = !isPaused;\n            pauseBtn.textContent = isPaused ? 'Resume' : 'Pause';\n            stepBtn.disabled = !isPaused;\n        });\n        \n        stepBtn.addEventListener('click', function() {\n            if (!isPaused) return;\n            executeSortStep();\n        });\n        \n        speedSlider.addEventListener('input', function() {\n            const speed = parseInt(this.value);\n            animationSpeed = 1000 - (speed * 90); // Convert to ms (100ms to 1000ms)\n            \n            // Update speed label\n            if (speed <= 3) speedValue.textContent = 'Slow';\n            else if (speed <= 7) speedValue.textContent = 'Medium';\n            else speedValue.textContent = 'Fast';\n        });\n        \n        // Bubble Sort algorithm with visualization\n        async function bubbleSort() {\n            const n = array.length;\n            let swapped;\n            \n            for (let i = 0; i < n - 1; i++) {\n                swapped = false;\n                \n                for (let j = 0; j < n - i - 1; j++) {\n                    // Update stats\n                    comparisons++;\n                    steps++;\n                    updateStats();\n                    \n                    // Highlight compared elements\n                    highlightBars(j, j + 1);\n                    comparisonText.textContent = `Comparing ${array[j]} and ${array[j+1]}`;\n                    \n                    // Wait for next step or continue\n                    if (isPaused) {\n                        await waitForStep();\n                    }\n                    \n                    // Compare adjacent elements\n                    if (array[j] > array[j + 1]) {\n                        // Swap elements\n                        [array[j], array[j + 1]] = [array[j + 1], array[j]];\n                        swapped = true;\n                        swaps++;\n                        \n                        // Update visualization\n                        renderBars();\n                        highlightBars(j, j + 1);\n                        comparisonText.textContent = `Swapping ${array[j+1]} and ${array[j]}`;\n                        \n                        if (isPaused) {\n                            await waitForStep();\n                        } else {\n                            await sleep(animationSpeed);\n                        }\n                    }\n                    \n                    // Mark sorted elements\n                    markSorted(n - i - 1);\n                }\n                \n                // If no swapping occurred, array is sorted\n                if (!swapped) break;\n            }\n            \n            // Mark all elements as sorted\n            markAllSorted();\n            comparisonText.textContent = 'Array is sorted!';\n            \n            // Reset controls\n            isSorting = false;\n            sortBtn.disabled = false;\n            pauseBtn.disabled = true;\n            stepBtn.disabled = true;\n            pauseBtn.textContent = 'Pause';\n        }\n        \n        // Helper functions\n        function generateRandomArray(size, min, max) {\n            return Array.from({ length: size }, () => Math.floor(Math.random() * (max - min + 1)) + min);\n        }\n        \n        function renderBars() {\n            barsContainer.innerHTML = '';\n            const maxValue = Math.max(...array);\n            \n            array.forEach((value, index) => {\n                const bar = document.createElement('div');\n                bar.className = 'array-bar';\n                bar.style.height = `${(value / maxValue) * 180}px`;\n                bar.textContent = value;\n                bar.id = `bar-${index}`;\n                barsContainer.appendChild(bar);\n            });\n        }\n        \n        function highlightBars(idx1, idx2) {\n            // Reset all bars to normal state\n            document.querySelectorAll('.array-bar').forEach(bar => {\n                bar.classList.remove('active-bar', 'compared-bar');\n            });\n            \n            // Highlight the bars being compared\n            document.getElementById(`bar-${idx1}`).classList.add('active-bar');\n            document.getElementById(`bar-${idx2}`).classList.add('compared-bar');\n        }\n        \n        function markSorted(index) {\n            document.getElementById(`bar-${index}`).classList.add('sorted-bar');\n        }\n        \n        function markAllSorted() {\n            document.querySelectorAll('.array-bar').forEach(bar => {\n                bar.classList.remove('active-bar', 'compared-bar');\n                bar.classList.add('sorted-bar');\n            });\n        }\n        \n        function updateStats() {\n            stepsText.textContent = `Steps: ${steps} | Comparisons: ${comparisons} | Swaps: ${swaps}`;\n        }\n        \n        function resetStats() {\n            steps = 0;\n            comparisons = 0;\n            swaps = 0;\n            updateStats();\n            comparisonText.textContent = '';\n            document.querySelectorAll('.array-bar').forEach(bar => {\n                bar.classList.remove('active-bar', 'compared-bar', 'sorted-bar');\n            });\n        }\n        \n        function sleep(ms) {\n            return new Promise(resolve => setTimeout(resolve, ms));\n        }\n        \n        function waitForStep() {\n            return new Promise(resolve => {\n                const checkStep = setInterval(() => {\n                    if (!isPaused) {\n                        clearInterval(checkStep);\n                        resolve();\n                    }\n                }, 100);\n                \n                stepBtn.onclick = function() {\n                    clearInterval(checkStep);\n                    resolve();\n                };\n            });\n        }\n        \n        // Execute a single sorting step (for step-by-step mode)\n        let sortState = { i: 0, j: 0 };\n        \n        function executeSortStep() {\n            const n = array.length;\n            let { i, j } = sortState;\n            \n            comparisons++;\n            steps++;\n            updateStats();\n            \n            highlightBars(j, j + 1);\n            comparisonText.textContent = `Comparing ${array[j]} and ${array[j+1]}`;\n            \n            if (array[j] > array[j + 1]) {\n                [array[j], array[j + 1]] = [array[j + 1], array[j]];\n                swaps++;\n                renderBars();\n                highlightBars(j, j + 1);\n                comparisonText.textContent = `Swapping ${array[j+1]} and ${array[j]}`;\n            }\n            \n            j++;\n            \n            if (j >= n - i - 1) {\n                markSorted(n - i - 1);\n                i++;\n                j = 0;\n                \n                if (i >= n - 1) {\n                    markAllSorted();\n                    comparisonText.textContent = 'Array is sorted!';\n                    isSorting = false;\n                    isPaused = false;\n                    sortBtn.disabled = false;\n                    pauseBtn.disabled = true;\n                    stepBtn.disabled = true;\n                    pauseBtn.textContent = 'Pause';\n                    sortState = { i: 0, j: 0 };\n                    return;\n                }\n            }\n            \n            sortState = { i, j };\n        }\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": false,
  "hasTest": true
}