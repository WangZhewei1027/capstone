{
  "id": "6e09b923-d5a0-11f0-8040-510e90b1f3a7",
  "timestamp": "2025-12-10T08:18:15.276Z",
  "type": "html-to-test",
  "htmlModel": "deepseek-chat",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Weighted Graph",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Weighted Graph Visualization</title>\n    <script src=\"https://d3js.org/d3.v7.min.js\"></script>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 20px;\n        }\n        .controls {\n            margin-bottom: 20px;\n        }\n        input, button {\n            margin: 5px;\n            padding: 5px;\n        }\n        svg {\n            border: 1px solid #ccc;\n        }\n        .node {\n            fill: lightblue;\n            stroke: #000;\n            stroke-width: 2px;\n            cursor: move;\n        }\n        .link {\n            stroke: #000;\n            stroke-width: 2px;\n        }\n        .weight {\n            font-size: 12px;\n            fill: red;\n        }\n    </style>\n</head>\n<body>\n    <h1>Weighted Graph Visualization</h1>\n    <div class=\"controls\">\n        <input type=\"text\" id=\"node1\" placeholder=\"Node 1\">\n        <input type=\"text\" id=\"node2\" placeholder=\"Node 2\">\n        <input type=\"number\" id=\"weight\" placeholder=\"Weight\" value=\"1\">\n        <button onclick=\"addEdge()\">Add Edge</button>\n        <button onclick=\"addNode()\">Add Node</button>\n        <button onclick=\"clearGraph()\">Clear Graph</button>\n    </div>\n    <svg id=\"graph\" width=\"800\" height=\"600\"></svg>\n\n    <script>\n        let graph = new Map(); // Adjacency list: node -> {neighbor: weight}\n        let nodes = new Set(); // All nodes\n        let links = []; // All edges: {source, target, weight}\n\n        const svg = d3.select(\"#graph\");\n        let simulation;\n\n        function initializeSimulation() {\n            simulation = d3.forceSimulation(Array.from(nodes).map(d => ({id: d})))\n                .force(\"link\", d3.forceLink(links).id(d => d.id).distance(100))\n                .force(\"charge\", d3.forceManyBody().strength(-300))\n                .force(\"center\", d3.forceCenter(400, 300));\n\n            // Draw edges\n            const link = svg.selectAll(\".link\")\n                .data(links)\n                .join(\"line\")\n                .attr(\"class\", \"link\");\n\n            // Draw edge weights\n            const weight = svg.selectAll(\".weight\")\n                .data(links)\n                .join(\"text\")\n                .attr(\"class\", \"weight\")\n                .text(d => d.weight);\n\n            // Draw nodes\n            const node = svg.selectAll(\".node\")\n                .data(Array.from(nodes).map(d => ({id: d})))\n                .join(\"circle\")\n                .attr(\"class\", \"node\")\n                .attr(\"r\", 10)\n                .call(d3.drag()\n                    .on(\"start\", dragstarted)\n                    .on(\"drag\", dragged)\n                    .on(\"end\", dragended));\n\n            // Node labels\n            const label = svg.selectAll(\".label\")\n                .data(Array.from(nodes).map(d => ({id: d})))\n                .join(\"text\")\n                .attr(\"class\", \"label\")\n                .text(d => d.id)\n                .attr(\"dx\", 12)\n                .attr(\"dy\", 3);\n\n            simulation.on(\"tick\", () => {\n                link\n                    .attr(\"x1\", d => d.source.x)\n                    .attr(\"y1\", d => d.source.y)\n                    .attr(\"x2\", d => d.target.x)\n                    .attr(\"y2\", d => d.target.y);\n                node\n                    .attr(\"cx\", d => d.x)\n                    .attr(\"cy\", d => d.y);\n                label\n                    .attr(\"x\", d => d.x)\n                    .attr(\"y\", d => d.y);\n                weight\n                    .attr(\"x\", d => (d.source.x + d.target.x) / 2)\n                    .attr(\"y\", d => (d.source.y + d.target.y) / 2);\n            });\n        }\n\n        function dragstarted(event, d) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            d.fx = d.x;\n            d.fy = d.y;\n        }\n\n        function dragged(event, d) {\n            d.fx = event.x;\n            d.fy = event.y;\n        }\n\n        function dragended(event, d) {\n            if (!event.active) simulation.alphaTarget(0);\n            d.fx = null;\n            d.fy = null;\n        }\n\n        function addNode() {\n            const node1 = document.getElementById(\"node1\").value;\n            if (node1 && !nodes.has(node1)) {\n                nodes.add(node1);\n                graph.set(node1, new Map());\n                initializeSimulation();\n            }\n        }\n\n        function addEdge() {\n            const node1 = document.getElementById(\"node1\").value;\n            const node2 = document.getElementById(\"node2\").value;\n            const weight = parseInt(document.getElementById(\"weight\").value);\n\n            if (node1 && node2 && weight && node1 !== node2) {\n                // Add nodes if they don't exist\n                if (!nodes.has(node1)) {\n                    nodes.add(node1);\n                    graph.set(node1, new Map());\n                }\n                if (!nodes.has(node2)) {\n                    nodes.add(node2);\n                    graph.set(node2, new Map());\n                }\n\n                // Add edge (undirected)\n                graph.get(node1).set(node2, weight);\n                graph.get(node2).set(node1, weight);\n\n                // Update links array if not already present\n                if (!links.some(l => \n                    (l.source.id === node1 && l.target.id === node2) || \n                    (l.source.id === node2 && l.target.id === node1)\n                )) {\n                    links.push({source: node1, target: node2, weight});\n                }\n\n                initializeSimulation();\n            }\n        }\n\n        function clearGraph() {\n            graph.clear();\n            nodes.clear();\n            links = [];\n            svg.selectAll(\"*\").remove();\n        }\n\n        // Initialize with an example graph\n        nodes.add(\"A\");\n        nodes.add(\"B\");\n        nodes.add(\"C\");\n        graph.set(\"A\", new Map([[\"B\", 4], [\"C\", 2]]));\n        graph.set(\"B\", new Map([[\"A\", 4], [\"C\", 5]]));\n        graph.set(\"C\", new Map([[\"A\", 2], [\"B\", 5]]));\n        links.push({source: \"A\", target: \"B\", weight: 4});\n        links.push({source: \"A\", target: \"C\", weight: 2});\n        links.push({source: \"B\", target: \"C\", weight: 5});\n        initializeSimulation();\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Weighted Graph"
    }
  ],
  "topic": "Weighted Graph",
  "hasFSM": false,
  "hasTest": true
}