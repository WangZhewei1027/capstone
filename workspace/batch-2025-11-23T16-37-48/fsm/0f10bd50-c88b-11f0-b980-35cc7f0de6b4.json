{
  "topic": "Queue",
  "description": "Finite state machine for the interactive queue visualization (enqueue, dequeue, clear, and message handling). Models button-driven interactions, input validation, animations and empty/non-empty queue conditions.",
  "states": [
    {
      "name": "idle_empty",
      "onEnter": "renderQueue",
      "onExit": "noop",
      "on": {
        "ENQUEUE_CLICKED": "enqueue_animating",
        "ENQUEUE_INPUT_ENTERED": "enqueue_animating",
        "ENQUEUE_INVALID_INPUT": "error_display",
        "DEQUEUE_CLICKED": "error_display",
        "CLEAR_CLICKED": "idle_empty"
      }
    },
    {
      "name": "idle_nonempty",
      "onEnter": "renderQueue",
      "onExit": "noop",
      "on": {
        "ENQUEUE_CLICKED": "enqueue_animating",
        "ENQUEUE_INPUT_ENTERED": "enqueue_animating",
        "ENQUEUE_INVALID_INPUT": "error_display",
        "DEQUEUE_CLICKED": "dequeue_animating",
        "CLEAR_CLICKED": "idle_empty"
      }
    },
    {
      "name": "enqueue_animating",
      "onEnter": "startEnqueueAnimation",
      "onExit": "completeEnqueue",
      "on": {
        "ENQUEUE_ANIMATION_END": "idle_nonempty",
        "ENQUEUE_ANIMATION_TIMEOUT_END": "idle_nonempty",
        "ENQUEUE_INVALID_INPUT": "error_display"
      }
    },
    {
      "name": "dequeue_animating",
      "onEnter": "startDequeueAnimation",
      "onExit": "completeDequeue",
      "on": {
        "DEQUEUE_ANIMATION_END_NON_EMPTY": "idle_nonempty",
        "DEQUEUE_ANIMATION_END_EMPTY": "idle_empty",
        "DEQUEUE_ANIMATION_END": "idle_nonempty"
      }
    },
    {
      "name": "error_display",
      "onEnter": "showErrorMessage",
      "onExit": "clearMessage",
      "on": {
        "ENQUEUE_CLICKED": "enqueue_animating",
        "ENQUEUE_INPUT_ENTERED": "enqueue_animating",
        "DEQUEUE_CLICKED": "error_display",
        "CLEAR_CLICKED": "idle_empty"
      }
    }
  ],
  "events": [
    "ENQUEUE_CLICKED",
    "ENQUEUE_INPUT_ENTERED",
    "ENQUEUE_INVALID_INPUT",
    "ENQUEUE_ANIMATION_END",
    "ENQUEUE_ANIMATION_TIMEOUT_END",
    "DEQUEUE_CLICKED",
    "DEQUEUE_ANIMATION_END",
    "DEQUEUE_ANIMATION_END_NON_EMPTY",
    "DEQUEUE_ANIMATION_END_EMPTY",
    "CLEAR_CLICKED",
    "MESSAGE_TIMEOUT_EXPIRED",
    "ERROR_SHOWN"
  ],
  "triggers": {
    "ENQUEUE_CLICKED": "#enqueue-btn",
    "ENQUEUE_INPUT_ENTERED": "#enqueue-input",
    "ENQUEUE_INVALID_INPUT": "#enqueue-input, #enqueue-btn",
    "ENQUEUE_ANIMATION_END": ".enqueue-animation",
    "ENQUEUE_ANIMATION_TIMEOUT_END": "body .node",
    "DEQUEUE_CLICKED": "#dequeue-btn",
    "DEQUEUE_ANIMATION_END": ".dequeue-animation, body .node",
    "DEQUEUE_ANIMATION_END_NON_EMPTY": ".dequeue-animation, #queue-container .node",
    "DEQUEUE_ANIMATION_END_EMPTY": ".dequeue-animation, #queue-container .node",
    "CLEAR_CLICKED": "#clear-btn",
    "MESSAGE_TIMEOUT_EXPIRED": "#message",
    "ERROR_SHOWN": "#message"
  },
  "notes": "Triggers map UI actions and animation end sources to FSM events. Selectors extracted from HTML/CSS: #enqueue-btn, #dequeue-btn, #clear-btn, #enqueue-input, #queue-container, .node, .node.head, .node.tail, .enqueue-animation, .dequeue-animation, #message. enqueue_animating and dequeue_animating represent in-progress animation actions; idle_empty vs idle_nonempty represent empty vs non-empty queue visual states. Error display is used when input is invalid or dequeue attempted on empty queue."
}