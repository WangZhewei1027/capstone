{
  "id": "4b5ada20-c88b-11f0-b980-35cc7f0de6b4",
  "timestamp": "2025-11-23T16:44:48.720Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "创建一个Deque算法的交互式可视化演示，包含动画效果和用户控制按钮",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>双端队列（Deque）交互式可视化演示</title>\n<style>\n  body {\n    font-family: \"Segoe UI\", Tahoma, Geneva, Verdana, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n    user-select: none;\n  }\n  h1 {\n    text-align: center;\n    color: #333;\n  }\n  #container {\n    max-width: 900px;\n    margin: 20px auto;\n    background: white;\n    border-radius: 8px;\n    padding: 20px;\n    box-shadow: 0 6px 16px rgb(0 0 0 / 0.15);\n  }\n  #deque {\n    margin: 30px auto;\n    width: 100%;\n    height: 80px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n    position: relative;\n  }\n  .node {\n    min-width: 60px;\n    height: 60px;\n    background: #4caf50;\n    border-radius: 8px;\n    color: white;\n    font-weight: 700;\n    font-size: 1.4rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    user-select: none;\n    position: relative;\n    box-shadow: 0 3px 8px rgb(76 175 80 / 0.5);\n    cursor: default;\n  }\n  .node.inserting {\n    background: #2196f3;\n    box-shadow: 0 4px 10px #2196f3cc;\n  }\n  .node.removing {\n    background: #f44336;\n    box-shadow: 0 4px 10px #f44336cc;\n  }\n  .marker {\n    position: absolute;\n    top: -25px;\n    font-size: 0.9rem;\n    font-weight: 600;\n    color: #555;\n  }\n  .marker.front {\n    left: 0;\n  }\n  .marker.rear {\n    right: 0;\n  }\n  #controls {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    gap: 15px;\n    margin-top: 10px;\n  }\n  #controls > * {\n    font-size: 1rem;\n  }\n  button {\n    background: #2196f3;\n    border: none;\n    color: white;\n    border-radius: 5px;\n    padding: 10px 16px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n    user-select: none;\n  }\n  button:disabled {\n    background: #90caf9;\n    cursor: not-allowed;\n  }\n  button:hover:not(:disabled) {\n    background: #1976d2;\n  }\n  input[type=\"text\"] {\n    width: 100px;\n    border-radius: 5px;\n    border: 2px solid #2196f3;\n    padding: 8px 10px;\n    font-size: 1rem;\n    text-align: center;\n  }\n  #message {\n    margin-top: 15px;\n    font-weight: 600;\n    color: #f44336;\n    min-height: 26px;\n    text-align: center;\n    user-select: none;\n  }\n  /* Animation classes */\n  @keyframes slideInLeft {\n    0% {\n      opacity: 0;\n      transform: translateX(-100%) scale(0.5);\n    }\n    100% {\n      opacity: 1;\n      transform: translateX(0) scale(1);\n    }\n  }\n  @keyframes slideInRight {\n    0% {\n      opacity: 0;\n      transform: translateX(100%) scale(0.5);\n    }\n    100% {\n      opacity: 1;\n      transform: translateX(0) scale(1);\n    }\n  }\n  @keyframes fadeOut {\n    0% {\n      opacity: 1;\n      transform: scale(1);\n    }\n    100% {\n      opacity: 0;\n      transform: scale(0.5);\n    }\n  }\n  .slide-in-front {\n    animation: slideInLeft 400ms ease forwards;\n  }\n  .slide-in-rear {\n    animation: slideInRight 400ms ease forwards;\n  }\n  .fade-out {\n    animation: fadeOut 400ms ease forwards;\n  }\n  /* Responsive */\n  @media (max-width: 600px) {\n    .node {\n      min-width: 45px;\n      height: 45px;\n      font-size: 1.1rem;\n    }\n    #controls {\n      gap: 10px;\n    }\n    input[type=\"text\"] {\n      width: 80px;\n      font-size: 0.9rem;\n    }\n  }\n</style>\n</head>\n<body>\n  <h1>双端队列（Deque）交互式可视化演示</h1>\n  <div id=\"container\" aria-live=\"polite\" aria-atomic=\"true\" aria-label=\"双端队列交互演示\">\n    <div id=\"deque\" aria-describedby=\"message\" role=\"list\" tabindex=\"0\" aria-label=\"Deque内容展示\"></div>\n    <div id=\"controls\">\n      <input type=\"text\" id=\"inputValue\" placeholder=\"输入元素\" aria-label=\"输入要插入的元素\" />\n      <button id=\"pushFrontBtn\" aria-label=\"从前端添加元素\">从前端添加</button>\n      <button id=\"pushBackBtn\" aria-label=\"从后端添加元素\">从后端添加</button>\n      <button id=\"popFrontBtn\" aria-label=\"从前端移除元素\">从前端移除</button>\n      <button id=\"popBackBtn\" aria-label=\"从后端移除元素\">从后端移除</button>\n      <button id=\"clearBtn\" aria-label=\"清空双端队列\">清空队列</button>\n    </div>\n    <div id=\"message\" role=\"alert\" aria-live=\"assertive\"></div>\n  </div>\n<script>\n(() => {\n  // Deque data structure and UI elements\n  const deque = [];\n  const maxSize = 20; // limit deque size for visualization clarity\n\n  const dequeContainer = document.getElementById(\"deque\");\n  const inputValue = document.getElementById(\"inputValue\");\n\n  const pushFrontBtn = document.getElementById(\"pushFrontBtn\");\n  const pushBackBtn = document.getElementById(\"pushBackBtn\");\n  const popFrontBtn = document.getElementById(\"popFrontBtn\");\n  const popBackBtn = document.getElementById(\"popBackBtn\");\n  const clearBtn = document.getElementById(\"clearBtn\");\n\n  const messageEl = document.getElementById(\"message\");\n\n  let animating = false;\n\n  function setMessage(msg, isError = false) {\n    messageEl.textContent = msg;\n    if (isError) {\n      messageEl.style.color = \"#f44336\";\n    } else {\n      messageEl.style.color = \"#2e7d32\";\n    }\n  }\n\n  function clearMessage() {\n    messageEl.textContent = \"\";\n  }\n\n  function createNodeElement(value) {\n    const node = document.createElement(\"div\");\n    node.classList.add(\"node\");\n    node.textContent = value;\n    node.setAttribute(\"role\", \"listitem\");\n    return node;\n  }\n\n  // Markers for Front and Rear\n  function appendMarkers() {\n    // remove old markers first\n    const oldFront = dequeContainer.querySelector(\".marker.front\");\n    const oldRear = dequeContainer.querySelector(\".marker.rear\");\n    if (oldFront) oldFront.remove();\n    if (oldRear) oldRear.remove();\n\n    if (deque.length === 0) return;\n\n    // Find front and rear nodes - front: first child, rear: last child\n    const nodes = dequeContainer.children;\n    if (nodes.length === 0) return;\n\n    const frontMarker = document.createElement(\"div\");\n    frontMarker.textContent = \"Front\";\n    frontMarker.classList.add(\"marker\", \"front\");\n    frontMarker.style.left = nodes[0].offsetLeft + \"px\";\n    dequeContainer.appendChild(frontMarker);\n\n    const rearMarker = document.createElement(\"div\");\n    rearMarker.textContent = \"Rear\";\n    rearMarker.classList.add(\"marker\", \"rear\");\n    rearMarker.style.left = nodes[nodes.length - 1].offsetLeft + \"px\";\n    dequeContainer.appendChild(rearMarker);\n  }\n\n  // Update marker positions on window resize or layout change\n  function updateMarkersPosition() {\n    const frontMarker = dequeContainer.querySelector(\".marker.front\");\n    const rearMarker = dequeContainer.querySelector(\".marker.rear\");\n    const nodes = dequeContainer.children;\n    if (deque.length === 0 || nodes.length === 0) {\n      if (frontMarker) frontMarker.style.display = \"none\";\n      if (rearMarker) rearMarker.style.display = \"none\";\n      return;\n    }\n    if (frontMarker) {\n      frontMarker.style.display = \"block\";\n      frontMarker.style.left = nodes[0].offsetLeft + \"px\";\n    }\n    if (rearMarker) {\n      rearMarker.style.display = \"block\";\n      rearMarker.style.left = nodes[nodes.length - 1].offsetLeft + \"px\";\n    }\n  }\n\n  window.addEventListener(\"resize\", updateMarkersPosition);\n\n  // Core functions to update UI with animations:\n\n  // Animate inserting at front\n  function animatePushFront(value) {\n    return new Promise((resolve) => {\n      if (dequeContainer.children.length === 0) {\n        // no elements, just add node\n        const node = createNodeElement(value);\n        node.classList.add(\"node\", \"inserting\", \"slide-in-front\");\n        dequeContainer.appendChild(node);\n        node.addEventListener(\"animationend\", () => {\n          node.classList.remove(\"inserting\", \"slide-in-front\");\n          resolve(node);\n          updateMarkersPosition();\n        }, { once: true });\n      } else {\n        // insert element at the start visually\n        const node = createNodeElement(value);\n        node.classList.add(\"node\", \"inserting\", \"slide-in-front\");\n        dequeContainer.insertBefore(node, dequeContainer.firstChild);\n        node.addEventListener(\"animationend\", () => {\n          node.classList.remove(\"inserting\", \"slide-in-front\");\n          resolve(node);\n          updateMarkersPosition();\n        }, { once: true });\n      }\n      updateMarkersPosition();\n    });\n  }\n\n  // Animate inserting at rear\n  function animatePushBack(value) {\n    return new Promise((resolve) => {\n      const node = createNodeElement(value);\n      node.classList.add(\"node\", \"inserting\", \"slide-in-rear\");\n      dequeContainer.appendChild(node);\n      node.addEventListener(\"animationend\", () => {\n        node.classList.remove(\"inserting\", \"slide-in-rear\");\n        resolve(node);\n        updateMarkersPosition();\n      }, { once: true });\n      updateMarkersPosition();\n    });\n  }\n\n  // Animate removing from front\n  function animatePopFront() {\n    return new Promise((resolve, reject) => {\n      const node = dequeContainer.firstElementChild;\n      if (!node) {\n        reject(\"队列为空，无法从前端移除元素！\");\n        return;\n      }\n      node.classList.add(\"removing\", \"fade-out\");\n      node.addEventListener(\"animationend\", () => {\n        dequeContainer.removeChild(node);\n        resolve(node.textContent);\n        updateMarkersPosition();\n      }, { once: true });\n    });\n  }\n\n  // Animate removing from rear\n  function animatePopBack() {\n    return new Promise((resolve, reject) => {\n      const node = dequeContainer.lastElementChild;\n      if (!node) {\n        reject(\"队列为空，无法从后端移除元素！\");\n        return;\n      }\n      node.classList.add(\"removing\", \"fade-out\");\n      node.addEventListener(\"animationend\", () => {\n        dequeContainer.removeChild(node);\n        resolve(node.textContent);\n        updateMarkersPosition();\n      }, { once: true });\n    });\n  }\n\n  // Clear the deque UI with fade out effect\n  function animateClear() {\n    return new Promise(async (resolve) => {\n      if (dequeContainer.children.length === 0) {\n        resolve();\n        return;\n      }\n      const nodes = Array.from(dequeContainer.children);\n      let finishedCount = 0;\n      nodes.forEach((node) => {\n        node.classList.add(\"removing\", \"fade-out\");\n        node.addEventListener(\"animationend\", () => {\n          finishedCount++;\n          if (finishedCount === nodes.length) {\n            dequeContainer.innerHTML = \"\";\n            resolve();\n            updateMarkersPosition();\n          }\n        }, { once: true });\n      });\n    });\n  }\n\n  // Action handlers\n\n  async function handlePushFront() {\n    if (animating) return;\n    clearMessage();\n    const val = inputValue.value.trim();\n    if (val === \"\") {\n      setMessage(\"请输入一个非空元素！\", true);\n      return;\n    }\n    if (deque.length >= maxSize) {\n      setMessage(\"队列已达到最大容量！\", true);\n      return;\n    }\n    animating = true;\n    try {\n      await animatePushFront(val);\n      deque.unshift(val);\n      setMessage(`成功从前端添加元素 \"${val}\"`, false);\n      inputValue.value = \"\";\n    } catch (e) {\n      setMessage(e.toString(), true);\n    } finally {\n      animating = false;\n      updateButtonsState();\n    }\n  }\n\n  async function handlePushBack() {\n    if (animating) return;\n    clearMessage();\n    const val = inputValue.value.trim();\n    if (val === \"\") {\n      setMessage(\"请输入一个非空元素！\", true);\n      return;\n    }\n    if (deque.length >= maxSize) {\n      setMessage(\"队列已达到最大容量！\", true);\n      return;\n    }\n    animating = true;\n    try {\n      await animatePushBack(val);\n      deque.push(val);\n      setMessage(`成功从后端添加元素 \"${val}\"`, false);\n      inputValue.value = \"\";\n    } catch (e) {\n      setMessage(e.toString(), true);\n    } finally {\n      animating = false;\n      updateButtonsState();\n    }\n  }\n\n  async function handlePopFront() {\n    if (animating) return;\n    clearMessage();\n    if (deque.length === 0) {\n      setMessage(\"队列为空，无法从前端移除元素！\", true);\n      return;\n    }\n    animating = true;\n    try {\n      const removedValue = await animatePopFront();\n      deque.shift();\n      setMessage(`成功从前端移除元素 \"${removedValue}\"`, false);\n    } catch (e) {\n      setMessage(e.toString(), true);\n    } finally {\n      animating = false;\n      updateButtonsState();\n    }\n  }\n\n  async function handlePopBack() {\n    if (animating) return;\n    clearMessage();\n    if (deque.length === 0) {\n      setMessage(\"队列为空，无法从后端移除元素！\", true);\n      return;\n    }\n    animating = true;\n    try {\n      const removedValue = await animatePopBack();\n      deque.pop();\n      setMessage(`成功从后端移除元素 \"${removedValue}\"`, false);\n    } catch (e) {\n      setMessage(e.toString(), true);\n    } finally {\n      animating = false;\n      updateButtonsState();\n    }\n  }\n\n  async function handleClear() {\n    if (animating) return;\n    if (deque.length === 0) {\n      clearMessage();\n      setMessage(\"队列已为空，无需清空\", false);\n      return;\n    }\n    animating = true;\n    clearMessage();\n    try {\n      await animateClear();\n      deque.length = 0;\n      setMessage(\"队列已清空\", false);\n    } catch (e) {\n      setMessage(e.toString(), true);\n    } finally {\n      animating = false;\n      updateButtonsState();\n    }\n  }\n\n  // Enable/Disable buttons according to state\n  function updateButtonsState() {\n    const disableInput = animating;\n    inputValue.disabled = disableInput;\n\n    pushFrontBtn.disabled = disableInput;\n    pushBackBtn.disabled = disableInput || deque.length >= maxSize;\n    popFrontBtn.disabled = disableInput || deque.length === 0;\n    popBackBtn.disabled = disableInput || deque.length === 0;\n    clearBtn.disabled = disableInput || deque.length === 0;\n  }\n\n  // Accessibility: allow Enter to add from input with default to rear\n  inputValue.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Enter\") {\n      if (!animating) {\n        event.preventDefault();\n        handlePushBack();\n      }\n    }\n  });\n\n  // Button event listeners\n  pushFrontBtn.addEventListener(\"click\", handlePushFront);\n  pushBackBtn.addEventListener(\"click\", handlePushBack);\n  popFrontBtn.addEventListener(\"click\", handlePopFront);\n  popBackBtn.addEventListener(\"click\", handlePopBack);\n  clearBtn.addEventListener(\"click\", handleClear);\n\n  // Initial setup\n  updateButtonsState();\n  setMessage(\"请输入元素，点击按钮操作双端队列。最大容量20。\");\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "创建一个Deque算法的交互式可视化演示，包含动画效果和用户控制按钮"
    }
  ],
  "topic": "Deque",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}