[
  {
    "id": "fbe68950-c49b-11f0-b6f9-27a19fd19131",
    "timestamp": "2025-11-18T16:34:37.139Z",
    "model": "gpt-5-mini",
    "status": "success",
    "question": "bubble sort",
    "answer": {
      "role": "assistant",
      "content": "<!doctype html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Bubble Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#2dd4bf;\n      --muted:#94a3b8;\n      --bar:#60a5fa;\n      --bar-compare:#fbbf24;\n      --bar-swap:#fb7185;\n      --bar-sorted:#34d399;\n    }\n    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;}\n    body{margin:0;background:linear-gradient(180deg,#021124 0%, #071022 60%);color:#e6eef6;min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:24px;}\n    .container{max-width:1100px;width:100%;}\n    header{display:flex;align-items:center;gap:16px;margin-bottom:18px;}\n    h1{margin:0;font-size:20px;}\n    .panel{background:linear-gradient(180deg,var(--panel),#071229);border-radius:12px;padding:14px;color:var(--muted);box-shadow:0 6px 30px rgba(2,6,23,0.6);}\n    .top{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between;}\n    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}\n    label{font-size:13px;color:var(--muted);}\n    input[type=range]{accent-color:var(--accent);}\n    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e6eef6;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:600;}\n    .btn.primary{background:linear-gradient(90deg,var(--accent),#60a5fa);color:#001219;border:none;}\n    .btn:active{transform:translateY(1px);}\n    .controls .group{display:flex;gap:8px;align-items:center;}\n    .display{display:flex;gap:12px;align-items:center;}\n    .stats{display:flex;gap:12px;align-items:center;color:var(--muted);font-size:13px;}\n    .visual{margin-top:14px;padding:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:10px;min-height:300px;}\n    .bars{display:flex;align-items:flex-end;height:260px;gap:4px;padding:8px;border-radius:6px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);overflow:hidden;}\n    .bar{flex:1 1 auto;background:var(--bar);height:40px;border-radius:4px;display:flex;align-items:end;justify-content:center;color:rgba(255,255,255,0.9);font-size:11px;transition:height 200ms ease, background-color 120ms;box-shadow:0 6px 20px rgba(2,6,23,0.45) inset;}\n    .bar.small{font-size:9px;padding-bottom:4px;}\n    .bar .val{padding-bottom:4px;}\n    .help{margin-top:12px;color:var(--muted);font-size:13px;line-height:1.5;}\n    .footer{margin-top:10px;color:var(--muted);font-size:12px;display:flex;justify-content:space-between;gap:12px;}\n    .input-text{background:transparent;border:1px dashed rgba(255,255,255,0.04);padding:6px 8px;border-radius:6px;color:#e6eef6;min-width:220px;}\n    .small{font-size:12px;color:var(--muted);}\n    @media (max-width:720px){\n      .bars{height:200px;}\n      .container{padding:6px;}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <header>\n      <div>\n        <h1>Bubble Sort Visualizer</h1>\n        <div class=\"small\">Interactive demonstration: watch comparisons and swaps as bubble sort sorts the array.</div>\n      </div>\n    </header>\n\n    <div class=\"panel\">\n      <div class=\"top\">\n        <div class=\"controls\">\n          <div class=\"group\">\n            <label for=\"size\">Size</label>\n            <input id=\"size\" type=\"range\" min=\"5\" max=\"80\" value=\"30\">\n          </div>\n\n          <div class=\"group\">\n            <label for=\"speed\">Speed</label>\n            <input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"200\">\n          </div>\n\n          <div class=\"group\">\n            <label for=\"optimized\"><input id=\"optimized\" type=\"checkbox\"> Optimized</label>\n          </div>\n\n          <div class=\"group\">\n            <button id=\"shuffle\" class=\"btn\">Shuffle</button>\n            <button id=\"start\" class=\"btn primary\">Start</button>\n            <button id=\"step\" class=\"btn\">Step</button>\n            <button id=\"pause\" class=\"btn\">Pause</button>\n            <button id=\"reset\" class=\"btn\">Reset</button>\n          </div>\n        </div>\n\n        <div class=\"display\">\n          <div class=\"stats\">\n            <div>Comparisons: <span id=\"comp\">0</span></div>\n            <div>Swaps: <span id=\"swaps\">0</span></div>\n            <div>Pass: <span id=\"pass\">0</span></div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"visual\">\n        <div style=\"display:flex;gap:10px;align-items:center;margin-bottom:10px;\">\n          <input id=\"custom\" class=\"input-text\" placeholder=\"Enter numbers comma-separated (e.g. 5,3,8,1)\" />\n          <button id=\"apply\" class=\"btn\">Apply</button>\n          <div style=\"flex:1\"></div>\n          <div class=\"small\">Legend:\n            <span style=\"display:inline-block;width:12px;height:12px;background:var(--bar);margin-left:8px;border-radius:2px;vertical-align:middle;\"></span> normal\n            <span style=\"display:inline-block;width:12px;height:12px;background:var(--bar-compare);margin-left:8px;border-radius:2px;vertical-align:middle;\"></span> comparing\n            <span style=\"display:inline-block;width:12px;height:12px;background:var(--bar-swap);margin-left:8px;border-radius:2px;vertical-align:middle;\"></span> swapping\n            <span style=\"display:inline-block;width:12px;height:12px;background:var(--bar-sorted);margin-left:8px;border-radius:2px;vertical-align:middle;\"></span> sorted\n          </div>\n        </div>\n\n        <div id=\"bars\" class=\"bars\" aria-hidden=\"false\"></div>\n\n        <div class=\"help\">\n          Bubble sort repeatedly steps through the list, compares adjacent items and swaps them if they are in the wrong order. This visualization allows step-by-step execution and automatic play. Toggle \"Optimized\" to stop early when the array becomes sorted.\n        </div>\n      </div>\n\n      <div class=\"footer\">\n        <div>Current indices: i = <span id=\"idx-i\">-</span>, j = <span id=\"idx-j\">-</span></div>\n        <div id=\"status\">Status: idle</div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    // Bubble Sort Visualizer\n    (function(){\n      const barsEl = document.getElementById('bars');\n      const sizeInput = document.getElementById('size');\n      const speedInput = document.getElementById('speed');\n      const optimizedChk = document.getElementById('optimized');\n      const shuffleBtn = document.getElementById('shuffle');\n      const startBtn = document.getElementById('start');\n      const stepBtn = document.getElementById('step');\n      const pauseBtn = document.getElementById('pause');\n      const resetBtn = document.getElementById('reset');\n      const applyBtn = document.getElementById('apply');\n      const customInput = document.getElementById('custom');\n\n      const compEl = document.getElementById('comp');\n      const swapsEl = document.getElementById('swaps');\n      const passEl = document.getElementById('pass');\n      const idxI = document.getElementById('idx-i');\n      const idxJ = document.getElementById('idx-j');\n      const statusEl = document.getElementById('status');\n\n      let arr = [];\n      let bars = [];\n      let sorter = null;\n      let running = false;\n      let autoInterval = null;\n      let comparisons = 0;\n      let swaps = 0;\n      let passes = 0;\n\n      function randArray(n){\n        const a = [];\n        for(let i=0;i<n;i++){\n          // generate values 5..100\n          a.push(Math.floor(Math.random()*96)+5);\n        }\n        return a;\n      }\n\n      function buildBars(values){\n        barsEl.innerHTML = '';\n        bars = [];\n        const max = Math.max(...values);\n        values.forEach((v, idx) => {\n          const bar = document.createElement('div');\n          bar.className = 'bar';\n          if (values.length > 50) bar.classList.add('small');\n          bar.style.height = (v / max * 100) + '%';\n          bar.dataset.value = v;\n          bar.dataset.index = idx;\n          const span = document.createElement('div');\n          span.className = 'val';\n          span.textContent = v;\n          bar.appendChild(span);\n          barsEl.appendChild(bar);\n          bars.push(bar);\n        });\n      }\n\n      function resetStats(){\n        comparisons = 0; swaps = 0; passes = 0;\n        compEl.textContent = comparisons;\n        swapsEl.textContent = swaps;\n        passEl.textContent = passes;\n        idxI.textContent = '-';\n        idxJ.textContent = '-';\n      }\n\n      function setStatus(s){\n        statusEl.textContent = 'Status: ' + s;\n      }\n\n      function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }\n\n      // generator that yields actions for bubble sort\n      function* bubbleGenerator(a, optimized){\n        const n = a.length;\n        let arr = a.slice();\n        let swapped;\n        for(let i = 0; i < n - 1; i++){\n          swapped = false;\n          yield {type:'passStart', pass:i+1, i:i};\n          for(let j = 0; j < n - 1 - i; j++){\n            yield {type:'compare', i:j, j:j+1};\n            if(arr[j] > arr[j+1]){\n              // swap\n              [arr[j], arr[j+1]] = [arr[j+1], arr[j]];\n              yield {type:'swap', i:j, j:j+1, arr: arr.slice()};\n              swapped = true;\n            }\n            yield {type:'afterCompare', i:j, j:j+1};\n          }\n          yield {type:'passEnd', pass:i+1, i:i, swapped:swapped, sortedIndex: n-1 - i};\n          if(optimized && !swapped){\n            break;\n          }\n        }\n        yield {type:'done', arr: arr.slice()};\n      }\n\n      // Update bar heights and labels from array\n      function updateBarsFromArray(values, highlight = {}){\n        const max = Math.max(...values);\n        bars.forEach((bar, idx) => {\n          const v = values[idx];\n          bar.style.height = (v / max * 100) + '%';\n          bar.dataset.value = v;\n          bar.querySelector('.val').textContent = v;\n          bar.style.transition = `height ${Math.max(80, speedInput.value/2)}ms ease, background-color 120ms`;\n          // reset colors\n          bar.style.background = 'var(--bar)';\n          bar.style.opacity = '1';\n        });\n\n        if(highlight.compare){\n          const [i,j] = highlight.compare;\n          if(bars[i]) bars[i].style.background = 'var(--bar-compare)';\n          if(bars[j]) bars[j].style.background = 'var(--bar-compare)';\n        }\n        if(highlight.swap){\n          const [i,j] = highlight.swap;\n          if(bars[i]) bars[i].style.background = 'var(--bar-swap)';\n          if(bars[j]) bars[j].style.background = 'var(--bar-swap)';\n        }\n        if(highlight.sortedIndex !== undefined){\n          for(let k = highlight.sortedIndex; k < bars.length; k++){\n            if(bars[k]) bars[k].style.background = 'var(--bar-sorted)';\n          }\n        }\n      }\n\n      // Controller to step through generator\n      async function stepOnce(){\n        if(!sorter) return;\n        const {value, done} = sorter.next();\n        if(done) {\n          finalize();\n          return;\n        }\n        await handleAction(value);\n      }\n\n      async function handleAction(action){\n        if(!action) return;\n        switch(action.type){\n          case 'passStart':\n            passes = action.pass - 1;\n            passEl.textContent = passes;\n            setStatus('Running: pass ' + action.pass);\n            break;\n          case 'compare':\n            comparisons++;\n            compEl.textContent = comparisons;\n            idxI.textContent = action.i;\n            idxJ.textContent = action.j;\n            updateBarsFromArray(arr, {compare:[action.i, action.j]});\n            break;\n          case 'afterCompare':\n            // short pause for clarity\n            updateBarsFromArray(arr);\n            break;\n          case 'swap':\n            swaps++;\n            swapsEl.textContent = swaps;\n            // update the underlying array immediately for visualization\n            arr = action.arr.slice();\n            updateBarsFromArray(arr, {swap:[action.i, action.j]});\n            break;\n          case 'passEnd':\n            passes = action.pass;\n            passEl.textContent = passes;\n            // mark the tail as sorted\n            updateBarsFromArray(arr, {sortedIndex: action.sortedIndex});\n            if(action.swapped === false){\n              setStatus('No swaps in pass, array is sorted (early exit)');\n            } else {\n              setStatus('Completed pass ' + action.pass);\n            }\n            break;\n          case 'done':\n            arr = action.arr.slice();\n            updateBarsFromArray(arr, {sortedIndex:0});\n            finalize();\n            break;\n        }\n      }\n\n      function finalize(){\n        updateBarsFromArray(arr, {sortedIndex:0});\n        setStatus('Completed');\n        idxI.textContent = '-';\n        idxJ.textContent = '-';\n        running = false;\n        sorter = null;\n        if(autoInterval) { clearInterval(autoInterval); autoInterval = null; }\n      }\n\n      function startAuto(){\n        if(running) return;\n        if(!sorter) {\n          sorter = bubbleGenerator(arr, optimizedChk.checked);\n        }\n        running = true;\n        setStatus('Running');\n        const tick = async () => {\n          if(!running) return;\n          const speed = Math.max(10, Number(speedInput.value));\n          const {value, done} = sorter.next();\n          if(done){\n            finalize();\n            return;\n          }\n          await handleAction(value);\n          if(!running) return;\n          // schedule next step according to speed\n          autoInterval = setTimeout(tick, speed);\n        };\n        autoInterval = setTimeout(tick, 0);\n      }\n\n      function pauseAuto(){\n        running = false;\n        if(autoInterval){ clearTimeout(autoInterval); autoInterval = null; }\n        setStatus('Paused');\n      }\n\n      function reset(){\n        pauseAuto();\n        arr = randArray(Number(sizeInput.value));\n        buildBars(arr);\n        resetStats();\n        sorter = null;\n        setStatus('Idle');\n      }\n\n      // Event bindings\n      shuffleBtn.addEventListener('click', () => {\n        reset();\n      });\n\n      startBtn.addEventListener('click', () => {\n        if(!sorter){\n          // initialize generator with a copy of the array\n          sorter = bubbleGenerator(arr.slice(), optimizedChk.checked);\n        }\n        startAuto();\n      });\n\n      pauseBtn.addEventListener('click', () => {\n        pauseAuto();\n      });\n\n      stepBtn.addEventListener('click', async () => {\n        if(!sorter){\n          sorter = bubbleGenerator(arr.slice(), optimizedChk.checked);\n        }\n        pauseAuto();\n        await stepOnce();\n      });\n\n      resetBtn.addEventListener('click', () => {\n        // reset to initial created random array\n        pauseAuto();\n        sorter = null;\n        arr = arr.slice(); // no change, but ensure state\n        updateBarsFromArray(arr);\n        resetStats();\n        setStatus('Reset');\n      });\n\n      applyBtn.addEventListener('click', () => {\n        const txt = customInput.value.trim();\n        if(!txt) return;\n        const parts = txt.split(',').map(s=>s.trim()).filter(s=>s!=='');\n\n        const parsed = parts.map(s=> {\n          const n = Number(s);\n          return Number.isFinite(n) ? n : null;\n        });\n\n        if(parsed.some(v=>v===null)){\n          alert('Invalid numbers in input. Use comma-separated numeric values.');\n          return;\n        }\n        arr = parsed.slice();\n        sizeInput.value = arr.length;\n        buildBars(arr);\n        resetStats();\n        sorter = null;\n        setStatus('Applied custom array');\n      });\n\n      sizeInput.addEventListener('input', () => {\n        const n = Number(sizeInput.value);\n        arr = randArray(n);\n        buildBars(arr);\n        resetStats();\n        sorter = null;\n      });\n\n      // initialize\n      arr = randArray(Number(sizeInput.value));\n      buildBars(arr);\n      resetStats();\n      setStatus('Idle');\n\n      // keyboard shortcuts\n      document.addEventListener('keydown', (e) => {\n        if(e.key === ' ') { // space toggles start/pause\n          e.preventDefault();\n          if(running) pauseAuto(); else startBtn.click();\n        } else if(e.key === 'ArrowRight'){ // step\n          stepBtn.click();\n        } else if(e.key === 'r' || e.key === 'R'){\n          shuffleBtn.click();\n        }\n      });\n\n      // ensure bars resize when window changed for better spacing\n      window.addEventListener('resize', () => {\n        updateBarsFromArray(arr);\n      });\n    })();\n  </script>\n</body>\n</html>"
    },
    "messages": [
      {
        "role": "system",
        "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
      },
      {
        "role": "user",
        "content": "bubble sort"
      }
    ],
    "topic": null,
    "hasFSM": true,
    "hasTest": true,
    "evaluation": {
      "score": null,
      "notes": ""
    }
  }
]