<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort Interactive Exploration</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f4;
            padding: 24px;
        }
        h1 {
            color: #333;
        }
        #visualization {
            width: 100%;
            max-width: 600px;
            height: 200px;
            margin: 16px 0;
            display: flex;
            align-items: flex-end;
            gap: 4px;
        }
        .bar {
            width: 30px;
            background-color: #3498db;
            transition: height 0.3s;
        }
        button {
            padding: 10px 15px;
            font-size: 16px;
            margin-right: 10px;
            cursor: pointer;
            border: none;
            background-color: #2ecc71;
            color: white;
            border-radius: 4px;
            outline: none;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        textarea {
            width: 100%;
            height: 50px;
            margin-top: 10px;
            resize: none;
        }
        .info {
            margin-top: 16px;
            font-size: 14px;
            color: #555;
        }
    </style>
</head>
<body>
    <h1>Bubble Sort Interactive Exploration</h1>
    <div class="info">Learn how the Bubble Sort algorithm works by visualizing the sorting process!</div>
    
    <div id="visualization"></div>
    
    <textarea id="inputArray" placeholder="Enter numbers separated by commas (e.g. 5,3,8,4,2)"></textarea>
    
    <button id="startSort">Start Sorting</button>
    <button id="reset" disabled>Reset</button>

    <script>
        const visualization = document.getElementById('visualization');
        const inputArray = document.getElementById('inputArray');
        const startSort = document.getElementById('startSort');
        const reset = document.getElementById('reset');

        let array = [];

        startSort.addEventListener('click', () => {
            const input = inputArray.value;
            array = input.split(',').map(Number);
            reset.disabled = false;
            bubbleSort(array);
        });

        reset.addEventListener('click', () => {
            visualization.innerHTML = '';
            inputArray.value = '';
            reset.disabled = true;
        });

        function bubbleSort(arr) {
            const len = arr.length;   
            for (let i = 0; i < len - 1; i++) {
                for (let j = 0; j < len - 1 - i; j++) {
                    if (arr[j] > arr[j + 1]) {
                        // Swap elements
                        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
                    }
                    render(arr, j, j + 1);
                }
            }
            setTimeout(() => alert("Sorting Complete!"), 100);
        }

        function render(arr, index1, index2) {
            visualization.innerHTML = '';
            arr.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = value * 20 + 'px';
                bar.style.backgroundColor = (index === index1 || index === index2) ? '#e74c3c' : '#3498db';
                visualization.appendChild(bar);
            });
        }
    </script>


  <script id="fsm" type="application/json">
    {
  "topic": "bubble sort",
  "description": "Finite state machine modeling the interactive states of a bubble sort visualization application.",
  "states": [
    {
      "name": "idle",
      "onEnter": "enableStartButton",
      "onExit": "clearVisualization",
      "on": {
        "START_SORT": "sorting"
      }
    },
    {
      "name": "sorting",
      "onEnter": "initializeSorting",
      "onExit": "disableStartButton",
      "on": {
        "SORT_COMPLETE": "done"
      }
    },
    {
      "name": "done",
      "onEnter": "showCompletionAlert",
      "onExit": "enableResetButton",
      "on": {
        "RESET": "idle"
      }
    }
  ],
  "events": [
    "START_SORT",
    "SORT_COMPLETE",
    "RESET"
  ],
  "notes": "The FSM captures the states of the bubble sort visualization process, including idle, sorting, and completion states."
}
  </script>
</body>
</html>