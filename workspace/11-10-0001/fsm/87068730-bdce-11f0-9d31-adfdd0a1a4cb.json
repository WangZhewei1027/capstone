{
  "topic": "Deque Interactive Module",
  "description": "Models the interactive states and transitions of a double-ended queue playground (push/pop front/back, bounded/unbounded modes, drag-and-drop chip creation, capacity changes, visual animations and feedback).",
  "states": [
    {
      "name": "unbounded",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "CLICK_PUSH_FRONT": "inserting_front_unbounded",
        "CLICK_PUSH_BACK": "inserting_back_unbounded",
        "CLICK_POP_FRONT": "popping_front_unbounded",
        "CLICK_POP_BACK": "popping_back_unbounded",
        "CLICK_PEEK_FRONT": "peeking_front_unbounded",
        "CLICK_PEEK_BACK": "peeking_back_unbounded",
        "CREATE_CHIP_CLICK": "creating_chip_unbounded",
        "DRAG_START": "dragging_unbounded",
        "INPUT_ENTER": "inserting_back_unbounded",
        "CAPACITY_INPUT": "resizing_unbounded",
        "CAPACITY_CHANGE": "resizing_unbounded",
        "CLEAR": "clearing_unbounded",
        "TOGGLE_BOUNDED_ON": "switching_to_bounded"
      }
    },
    {
      "name": "bounded",
      "onEnter": "setBoundedTrue",
      "onExit": "noop",
      "on": {
        "CLICK_PUSH_FRONT": "inserting_front_bounded",
        "CLICK_PUSH_BACK": "inserting_back_bounded",
        "CLICK_POP_FRONT": "popping_front_bounded",
        "CLICK_POP_BACK": "popping_back_bounded",
        "CLICK_PEEK_FRONT": "peeking_front_bounded",
        "CLICK_PEEK_BACK": "peeking_back_bounded",
        "CREATE_CHIP_CLICK": "creating_chip_bounded",
        "DRAG_START": "dragging_bounded",
        "INPUT_ENTER": "inserting_back_bounded",
        "CAPACITY_INPUT": "resizing_bounded",
        "CAPACITY_CHANGE": "resizing_bounded",
        "CLEAR": "clearing_bounded",
        "TOGGLE_BOUNDED_OFF": "switching_to_unbounded"
      }
    },
    {
      "name": "inserting_front_unbounded",
      "onEnter": "pushFrontUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded"
      }
    },
    {
      "name": "inserting_back_unbounded",
      "onEnter": "pushBackUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded"
      }
    },
    {
      "name": "popping_front_unbounded",
      "onEnter": "popFrontUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded",
        "OP_EMPTY": "error_empty_unbounded"
      }
    },
    {
      "name": "popping_back_unbounded",
      "onEnter": "popBackUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded",
        "OP_EMPTY": "error_empty_unbounded"
      }
    },
    {
      "name": "peeking_front_unbounded",
      "onEnter": "peekFrontUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded",
        "OP_EMPTY": "error_empty_unbounded"
      }
    },
    {
      "name": "peeking_back_unbounded",
      "onEnter": "peekBackUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded",
        "OP_EMPTY": "error_empty_unbounded"
      }
    },
    {
      "name": "inserting_front_bounded",
      "onEnter": "pushFrontBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_ERROR": "error_full_bounded"
      }
    },
    {
      "name": "inserting_back_bounded",
      "onEnter": "pushBackBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_ERROR": "error_full_bounded"
      }
    },
    {
      "name": "popping_front_bounded",
      "onEnter": "popFrontBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_EMPTY": "error_empty_bounded"
      }
    },
    {
      "name": "popping_back_bounded",
      "onEnter": "popBackBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_EMPTY": "error_empty_bounded"
      }
    },
    {
      "name": "peeking_front_bounded",
      "onEnter": "peekFrontBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_EMPTY": "error_empty_bounded"
      }
    },
    {
      "name": "peeking_back_bounded",
      "onEnter": "peekBackBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_EMPTY": "error_empty_bounded"
      }
    },
    {
      "name": "creating_chip_unbounded",
      "onEnter": "createChipFromInput",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded"
      }
    },
    {
      "name": "creating_chip_bounded",
      "onEnter": "createChipFromInput",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded"
      }
    },
    {
      "name": "dragging_unbounded",
      "onEnter": "startDrag",
      "onExit": "endDragCleanup",
      "on": {
        "DROP_ON_SLOT_LEFT": "inserting_front_unbounded",
        "DROP_ON_SLOT_RIGHT": "inserting_back_unbounded",
        "DROP_ON_SLOT_NEAR": "inserting_back_unbounded",
        "DRAG_CANCEL": "unbounded"
      }
    },
    {
      "name": "dragging_bounded",
      "onEnter": "startDrag",
      "onExit": "endDragCleanup",
      "on": {
        "DROP_ON_SLOT_LEFT": "inserting_front_bounded",
        "DROP_ON_SLOT_RIGHT": "inserting_back_bounded",
        "DROP_ON_SLOT_NEAR": "inserting_back_bounded",
        "DRAG_CANCEL": "bounded"
      }
    },
    {
      "name": "clearing_unbounded",
      "onEnter": "clearDeque",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded"
      }
    },
    {
      "name": "clearing_bounded",
      "onEnter": "clearDeque",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded"
      }
    },
    {
      "name": "resizing_unbounded",
      "onEnter": "applyCapacityChangeUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded"
      }
    },
    {
      "name": "resizing_bounded",
      "onEnter": "applyCapacityChangeBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_TRIMMED": "bounded"
      }
    },
    {
      "name": "switching_to_bounded",
      "onEnter": "convertUnboundedToBounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "bounded",
        "OP_TRIMMED": "bounded"
      }
    },
    {
      "name": "switching_to_unbounded",
      "onEnter": "convertBoundedToUnbounded",
      "onExit": "noop",
      "on": {
        "OP_COMPLETE": "unbounded"
      }
    },
    {
      "name": "error_full_bounded",
      "onEnter": "showFullFeedback",
      "onExit": "noop",
      "on": {
        "ERROR_TIMEOUT": "bounded",
        "CLICK_CLEAR": "clearing_bounded"
      }
    },
    {
      "name": "error_empty_unbounded",
      "onEnter": "showEmptyFeedback",
      "onExit": "noop",
      "on": {
        "ERROR_TIMEOUT": "unbounded"
      }
    },
    {
      "name": "error_empty_bounded",
      "onEnter": "showEmptyFeedback",
      "onExit": "noop",
      "on": {
        "ERROR_TIMEOUT": "bounded"
      }
    }
  ],
  "events": [
    "CLICK_PUSH_FRONT",
    "CLICK_PUSH_BACK",
    "CLICK_POP_FRONT",
    "CLICK_POP_BACK",
    "CLICK_PEEK_FRONT",
    "CLICK_PEEK_BACK",
    "CREATE_CHIP_CLICK",
    "DRAG_START",
    "DROP_ON_SLOT_LEFT",
    "DROP_ON_SLOT_RIGHT",
    "DROP_ON_SLOT_NEAR",
    "DRAG_CANCEL",
    "CHIP_CLICK_PUSHBACK",
    "CHIP_REMOVE",
    "INPUT_ENTER",
    "CAPACITY_INPUT",
    "CAPACITY_CHANGE",
    "CLEAR",
    "TOGGLE_BOUNDED_ON",
    "TOGGLE_BOUNDED_OFF",
    "OP_COMPLETE",
    "OP_ERROR",
    "OP_EMPTY",
    "OP_TRIMMED",
    "ERROR_TIMEOUT"
  ],
  "notes": "This FSM models two modes (bounded vs unbounded) and duplicates action states per mode to reflect differing operations (ring buffer checks, trimming on capacity change). onEnter actions correspond to the functions in the implementation (e.g., pushFrontUnbounded, pushFrontBounded, popFrontBounded, createChipFromInput, convertUnboundedToBounded, applyCapacityChangeBounded). Error states represent visual/feedback responses (full/empty). Transitions use OP_* events to represent synchronous operation results (success, empty, full/ error, trimmed). Drag-and-drop is represented by dragging_* states and DROP_* events. Clearing and resizing are modeled as operations with completion events."
}