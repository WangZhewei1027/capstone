{
  "topic": "Binary Tree Interactive Module",
  "description": "Models the interactive states and transitions for a browser-based binary tree builder and traversal visualizer (create, select, edit, add/delete nodes, traversals with animations).",
  "states": [
    {
      "name": "empty",
      "onEnter": "render",
      "onExit": "noop",
      "on": {
        "CREATE_ROOT": "idle_selected",
        "RANDOMIZE": "idle_selected",
        "CLICK_CANVAS_BG": "empty",
        "START_PREORDER": "empty",
        "START_INORDER": "empty",
        "START_POSTORDER": "empty",
        "START_LEVELORDER": "empty",
        "RESET": "empty"
      }
    },
    {
      "name": "idle_no_selection",
      "onEnter": "render",
      "onExit": "noop",
      "on": {
        "SELECT_NODE": "idle_selected",
        "CREATE_ROOT": "idle_selected",
        "RANDOMIZE": "idle_selected",
        "RESET": "confirming_reset",
        "START_PREORDER": "animating_traversal",
        "START_INORDER": "animating_traversal",
        "START_POSTORDER": "animating_traversal",
        "START_LEVELORDER": "animating_traversal",
        "INPUT_ENTER_ADD": "idle_no_selection",
        "CLICK_CANVAS_BG": "idle_no_selection"
      }
    },
    {
      "name": "idle_selected",
      "onEnter": "setSelected",
      "onExit": "noop",
      "on": {
        "DESELECT_NODE": "idle_no_selection",
        "CLICK_CANVAS_BG": "idle_no_selection",
        "CLICK_CREATE_ROOT": "idle_selected",
        "CLICK_RANDOM": "idle_selected",
        "DELETE_SUBTREE": "confirming_delete",
        "CONFIRM_DELETE": "idle_no_selection",
        "CANCEL_DELETE": "idle_selected",
        "EDIT_NODE": "prompt_edit_node",
        "DOUBLE_CLICK_NODE": "prompt_edit_node",
        "INSERT_CHILD": "idle_selected",
        "PROMPT_ADD_CHILD": "prompt_add_child",
        "START_PREORDER": "animating_traversal",
        "START_INORDER": "animating_traversal",
        "START_POSTORDER": "animating_traversal",
        "START_LEVELORDER": "animating_traversal",
        "RESET": "confirming_reset",
        "NAV_LEFT": "idle_selected",
        "NAV_RIGHT": "idle_selected",
        "NAV_UP": "idle_selected",
        "KEY_DELETE": "confirming_delete",
        "INPUT_ENTER_ADD": "idle_selected"
      }
    },
    {
      "name": "prompt_add_child",
      "onEnter": "showAddChildPrompt",
      "onExit": "hideAddChildPrompt",
      "on": {
        "PROMPT_SUBMIT": "idle_selected",
        "PROMPT_CANCEL": "idle_selected",
        "INSERT_CHILD": "idle_selected",
        "CANCEL_PROMPT": "idle_selected"
      }
    },
    {
      "name": "prompt_edit_node",
      "onEnter": "showEditPrompt",
      "onExit": "hideEditPrompt",
      "on": {
        "EDIT_SUBMIT": "idle_selected",
        "EDIT_CANCEL": "idle_selected",
        "CANCEL_PROMPT": "idle_selected"
      }
    },
    {
      "name": "confirming_delete",
      "onEnter": "showConfirmDelete",
      "onExit": "hideConfirmDelete",
      "on": {
        "CONFIRM_DELETE": "idle_no_selection",
        "CANCEL_DELETE": "idle_selected"
      }
    },
    {
      "name": "confirming_reset",
      "onEnter": "showConfirmReset",
      "onExit": "hideConfirmReset",
      "on": {
        "CONFIRM_RESET": "empty",
        "CANCEL_RESET": "idle_no_selection"
      }
    },
    {
      "name": "animating_traversal",
      "onEnter": "startAnimation",
      "onExit": "stopAnimation",
      "on": {
        "ANIMATION_STEP": "animating_traversal",
        "ANIMATION_END_WITH_SELECTION": "idle_selected",
        "ANIMATION_END_NO_SELECTION": "idle_no_selection",
        "STOP_ANIMATION": "idle_no_selection",
        "CLICK_CREATE_ROOT": "idle_selected",
        "CLICK_RANDOM": "idle_selected",
        "RESET": "confirming_reset",
        "DELETE_SUBTREE": "confirming_delete",
        "SELECT_NODE": "idle_selected",
        "DESELECT_NODE": "idle_no_selection"
      }
    }
  ],
  "events": [
    "CREATE_ROOT",
    "CLICK_CREATE_ROOT",
    "RANDOMIZE",
    "CLICK_RANDOM",
    "RESET",
    "CONFIRM_RESET",
    "CANCEL_RESET",
    "SELECT_NODE",
    "DESELECT_NODE",
    "CLICK_CANVAS_BG",
    "CLICK_NODE",
    "DOUBLE_CLICK_NODE",
    "EDIT_NODE",
    "EDIT_SUBMIT",
    "EDIT_CANCEL",
    "PROMPT_ADD_CHILD",
    "PROMPT_SUBMIT",
    "PROMPT_CANCEL",
    "INSERT_CHILD",
    "INPUT_ENTER_ADD",
    "DELETE_SUBTREE",
    "CONFIRM_DELETE",
    "CANCEL_DELETE",
    "START_PREORDER",
    "START_INORDER",
    "START_POSTORDER",
    "START_LEVELORDER",
    "ANIMATION_STEP",
    "ANIMATION_END_WITH_SELECTION",
    "ANIMATION_END_NO_SELECTION",
    "STOP_ANIMATION",
    "KEY_DELETE",
    "NAV_LEFT",
    "NAV_RIGHT",
    "NAV_UP",
    "RENDER"
  ],
  "notes": "Prompts and confirms use synchronous browser prompt()/confirm() dialogs. Selection is stored externally (setSelected) and preserved across traversals. Traversal animation uses an interval to step through nodes, applying 'pulse' to nodes and 'highlight' to edges; starting a traversal clears any existing animation. 'Create Root' and 'Random' replace root; 'Reset' clears the tree. UI actions trigger render() to update SVG; modal/dialog states are modeled as explicit prompt/confirm states."
}