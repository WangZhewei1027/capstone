{
  "topic": "Interactive Application",
  "description": "Finite state machine modelling the interactive Binary Search Tree insert & search visualization (user interactions, animations, traversal highlighting, random inserts, and clearing).",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "CLICK_INSERT": "inserting",
        "INPUT_ENTER": "inserting",
        "CLICK_SEARCH": "searching",
        "CLICK_RANDOM": "random_inserting",
        "CLICK_CLEAR": "clearing"
      }
    },
    {
      "name": "inserting",
      "onEnter": "disableControls_and_startInsert",
      "onExit": "noop",
      "on": {
        "VALIDATION_FAIL": "idle",
        "INSERT_MODEL_DUPLICATE": "animating_traversal",
        "INSERT_MODEL_OK": "animating_traversal"
      }
    },
    {
      "name": "searching",
      "onEnter": "disableControls_and_startSearch",
      "onExit": "noop",
      "on": {
        "VALIDATION_FAIL": "idle",
        "EMPTY_TREE": "idle",
        "SEARCH_TRAVERSAL_STARTED": "animating_traversal"
      }
    },
    {
      "name": "animating_traversal",
      "onEnter": "startTraversalAnimation",
      "onExit": "clearTraversalClasses",
      "on": {
        "TRAVERSAL_COMPLETE_INSERT_PLACE": "placing_node",
        "TRAVERSAL_COMPLETE_INSERT_DUPLICATE": "showing_result",
        "TRAVERSAL_COMPLETE_SEARCH_FOUND": "showing_result",
        "TRAVERSAL_COMPLETE_SEARCH_NOTFOUND": "showing_result"
      }
    },
    {
      "name": "placing_node",
      "onEnter": "animatePlacement_and_syncDOM",
      "onExit": "noop",
      "on": {
        "ANIMATION_END": "showing_result"
      }
    },
    {
      "name": "showing_result",
      "onEnter": "logResult_and_enableControls",
      "onExit": "noop",
      "on": {
        "COMPLETE": "idle"
      }
    },
    {
      "name": "random_inserting",
      "onEnter": "disableControls_and_startRandomSequence",
      "onExit": "enableControls",
      "on": {
        "RANDOM_INSERT_STEP": "inserting",
        "RANDOM_INSERT_COMPLETE": "idle"
      }
    },
    {
      "name": "clearing",
      "onEnter": "clearAll_and_log",
      "onExit": "noop",
      "on": {
        "CLEARED": "idle"
      }
    }
  ],
  "events": [
    "CLICK_INSERT",
    "INPUT_ENTER",
    "CLICK_SEARCH",
    "CLICK_RANDOM",
    "CLICK_CLEAR",
    "VALIDATION_FAIL",
    "INSERT_MODEL_OK",
    "INSERT_MODEL_DUPLICATE",
    "SEARCH_TRAVERSAL_STARTED",
    "EMPTY_TREE",
    "TRAVERSAL_COMPLETE_INSERT_PLACE",
    "TRAVERSAL_COMPLETE_INSERT_DUPLICATE",
    "TRAVERSAL_COMPLETE_SEARCH_FOUND",
    "TRAVERSAL_COMPLETE_SEARCH_NOTFOUND",
    "ANIMATION_END",
    "COMPLETE",
    "RANDOM_INSERT_STEP",
    "RANDOM_INSERT_COMPLETE",
    "CLEARED"
  ],
  "notes": "Controls are disabled at the start of insert/search/random operations and re-enabled when animations complete. Traversal animation uses CSS classes (visiting, found, notfound). insertValueModel performs model changes and returns duplicate or success; syncDOM/layoutTree update the SVG DOM and animate node placement. Clear is immediate. Events such as INSERT_MODEL_OK / DUPLICATE and traversal completion are emitted by the internal procedures and drive transitions between traversal, placement and result states."
}