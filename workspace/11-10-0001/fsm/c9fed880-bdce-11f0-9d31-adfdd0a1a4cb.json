{
  "topic": "Union-Find Interactive Module",
  "description": "Models the interactive states and transitions of a Union-Find visualizer (node selection, dragging, union/find animations, toggles, rebuild/reset and UI feedback).",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "NODE_CLICK": "oneSelected",
        "NODE_DOWN": "dragging",
        "UNION_CLICK": "idle",
        "FIND_CLICK": "idle",
        "RANDOM_CLICK": "animating",
        "RESET_CLICK": "building",
        "REBUILD_CLICK": "building",
        "TOGGLE_RANK": "idle",
        "TOGGLE_PC": "idle",
        "CANVAS_CLICK_CLEAR": "idle",
        "ANIMATION_START": "animating"
      }
    },
    {
      "name": "oneSelected",
      "onEnter": "selectNode",
      "onExit": "refreshSelectionUI",
      "on": {
        "NODE_CLICK": "twoSelected",
        "NODE_CLICK_SAME": "idle",
        "NODE_DOWN": "dragging",
        "UNION_CLICK": "oneSelected",
        "FIND_CLICK": "animating",
        "RANDOM_CLICK": "animating",
        "RESET_CLICK": "building",
        "REBUILD_CLICK": "building",
        "TOGGLE_RANK": "oneSelected",
        "TOGGLE_PC": "oneSelected",
        "CANVAS_CLICK_CLEAR": "idle",
        "ANIMATION_START": "animating"
      }
    },
    {
      "name": "twoSelected",
      "onEnter": "selectSecondNode",
      "onExit": "clearSelectionIfNeeded",
      "on": {
        "NODE_CLICK": "twoSelected",
        "NODE_CLICK_DESELECT": "oneSelected",
        "NODE_DOWN": "dragging",
        "UNION_CLICK": "animating",
        "FIND_CLICK": "animating",
        "RANDOM_CLICK": "animating",
        "RESET_CLICK": "building",
        "REBUILD_CLICK": "building",
        "TOGGLE_RANK": "twoSelected",
        "TOGGLE_PC": "twoSelected",
        "CANVAS_CLICK_CLEAR": "idle",
        "ANIMATION_START": "animating"
      }
    },
    {
      "name": "dragging",
      "onEnter": "startDrag",
      "onExit": "stopDrag",
      "on": {
        "NODE_MOVE": "dragging",
        "NODE_UP": "idle",
        "RESET_CLICK": "building",
        "REBUILD_CLICK": "building",
        "ANIMATION_START": "animating",
        "CANVAS_CLICK_CLEAR": "idle",
        "NODE_CLICK": "dragging"
      }
    },
    {
      "name": "animating",
      "onEnter": "enqueueAndRunAnimation",
      "onExit": "updateArraysAndEdges",
      "on": {
        "ANIMATION_END": "idle",
        "NODE_CLICK": "animating",
        "NODE_DOWN": "dragging",
        "UNION_CLICK": "animating",
        "FIND_CLICK": "animating",
        "RANDOM_CLICK": "animating",
        "RESET_CLICK": "building",
        "REBUILD_CLICK": "building",
        "TOGGLE_RANK": "animating",
        "TOGGLE_PC": "animating",
        "CANVAS_CLICK_CLEAR": "animating"
      }
    },
    {
      "name": "building",
      "onEnter": "build",
      "onExit": "noop",
      "on": {
        "BUILD_COMPLETE": "idle",
        "ANIMATION_START": "animating"
      }
    }
  ],
  "events": [
    "NODE_CLICK",
    "NODE_CLICK_SAME",
    "NODE_CLICK_DESELECT",
    "NODE_DOWN",
    "NODE_MOVE",
    "NODE_UP",
    "UNION_CLICK",
    "FIND_CLICK",
    "RANDOM_CLICK",
    "RESET_CLICK",
    "REBUILD_CLICK",
    "TOGGLE_RANK",
    "TOGGLE_PC",
    "CANVAS_CLICK_CLEAR",
    "ANIMATION_START",
    "ANIMATION_END",
    "BUILD_COMPLETE"
  ],
  "notes": "Selection is toggled by node clicks and limited to two selections for union. Dragging updates node positions and edge geometry. Animations (find traversal, path compression, union reparenting, random unions) are sequenced using an animation queue (animQueue). UI toggles change behavior (union-by-rank, path compression). Rebuild/reset triggers a full build that reinitializes parent/rank and visuals. Alerts (invalid union/find) are shown when user actions are not possible; these are modeled as events that keep the FSM in the current state while invoking a showAlert action."
}