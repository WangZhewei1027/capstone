{
  "topic": "Interactive Priority Queue Explorer",
  "description": "Models the interactive states and transitions of a visual binary-heap priority-queue web application (enqueue, dequeue, peek, change priority, remove, animations, selection, mode change).",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "ENQUEUE": "busy",
        "DEQUEUE": "busy",
        "PEEK": "busy",
        "CLEAR": "busy",
        "CHANGE_MODE": "busy",
        "ADD_RANDOM": "busy",
        "CHANGE_PRIORITY": "busy",
        "REMOVE_NODE": "busy",
        "SELECT_NODE": "node_selected",
        "DESELECT_NODE": "idle",
        "TOGGLE_ANIMATE": "idle",
        "SPEED_CHANGE": "idle",
        "KEY_ENQUEUE": "busy",
        "KEY_DEQUEUE": "busy",
        "ANIMATION_START": "animating",
        "ANIMATION_END": "idle",
        "RESIZE": "idle",
        "INIT_DONE": "idle",
        "OP_COMPLETE": "idle"
      }
    },
    {
      "name": "busy",
      "onEnter": "startOperation",
      "onExit": "endOperation",
      "on": {
        "ANIMATION_START": "animating",
        "ANIMATION_END": "busy",
        "OP_COMPLETE": "idle",
        "SELECT_NODE": "node_selected",
        "DESELECT_NODE": "idle",
        "ENQUEUE": "busy",
        "DEQUEUE": "busy",
        "PEEK": "busy",
        "CLEAR": "busy",
        "CHANGE_MODE": "busy",
        "ADD_RANDOM": "busy",
        "CHANGE_PRIORITY": "busy",
        "REMOVE_NODE": "busy",
        "TOGGLE_ANIMATE": "busy",
        "SPEED_CHANGE": "busy",
        "KEY_ENQUEUE": "busy",
        "KEY_DEQUEUE": "busy",
        "RESIZE": "busy",
        "INIT_DONE": "busy"
      }
    },
    {
      "name": "animating",
      "onEnter": "setAnimatingTrue",
      "onExit": "setAnimatingFalse",
      "on": {
        "ANIMATION_END": "busy",
        "OP_COMPLETE": "idle",
        "ENQUEUE": "animating",
        "DEQUEUE": "animating",
        "PEEK": "animating",
        "CLEAR": "animating",
        "CHANGE_MODE": "animating",
        "ADD_RANDOM": "animating",
        "CHANGE_PRIORITY": "animating",
        "REMOVE_NODE": "animating",
        "SELECT_NODE": "animating",
        "DESELECT_NODE": "animating",
        "TOGGLE_ANIMATE": "animating",
        "SPEED_CHANGE": "animating",
        "KEY_ENQUEUE": "animating",
        "KEY_DEQUEUE": "animating",
        "RESIZE": "animating",
        "INIT_DONE": "animating"
      }
    },
    {
      "name": "node_selected",
      "onEnter": "highlightNode",
      "onExit": "clearHighlight",
      "on": {
        "CHANGE_PRIORITY": "busy",
        "REMOVE_NODE": "busy",
        "DESELECT_NODE": "idle",
        "ENQUEUE": "busy",
        "DEQUEUE": "busy",
        "PEEK": "busy",
        "CLEAR": "busy",
        "CHANGE_MODE": "busy",
        "ADD_RANDOM": "busy",
        "SELECT_NODE": "node_selected",
        "TOGGLE_ANIMATE": "node_selected",
        "SPEED_CHANGE": "node_selected",
        "ANIMATION_START": "animating",
        "ANIMATION_END": "node_selected",
        "KEY_ENQUEUE": "busy",
        "KEY_DEQUEUE": "busy",
        "RESIZE": "node_selected",
        "INIT_DONE": "node_selected",
        "OP_COMPLETE": "idle"
      }
    }
  ],
  "events": [
    "ENQUEUE",
    "DEQUEUE",
    "PEEK",
    "CLEAR",
    "CHANGE_MODE",
    "ADD_RANDOM",
    "CHANGE_PRIORITY",
    "REMOVE_NODE",
    "SELECT_NODE",
    "DESELECT_NODE",
    "TOGGLE_ANIMATE",
    "SPEED_CHANGE",
    "KEY_ENQUEUE",
    "KEY_DEQUEUE",
    "ANIMATION_START",
    "ANIMATION_END",
    "OP_COMPLETE",
    "RESIZE",
    "INIT_DONE"
  ],
  "notes": "Selection (node_selected) is conceptually orthogonal to busy/animating but represented as explicit states here. The app sets an 'animating' flag during renderSwap; while animating most user actions are ignored in the implementation (modeled as self-transitions to 'animating'). 'busy' models any asynchronous heap operation (enqueue, dequeue, change priority, remove, random adds, mode change, peek/flash) and transitions to 'animating' when swap animations occur. onEnter/onExit action names are descriptive hooks representing UI updates (startOperation/endOperation, setAnimatingTrue/setAnimatingFalse, highlightNode/clearHighlight)."
}