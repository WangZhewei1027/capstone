<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Priority Queue Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    max-width: 600px;
  }
  h1 {
    text-align: center;
  }
  .pq-container {
    margin-top: 20px;
  }
  label {
    display: inline-block;
    margin-top: 0.5rem;
  }
  input[type="text"],
  input[type="number"] {
    padding: 0.3rem;
    margin-left: 0.4rem;
    width: 180px;
  }
  button {
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    font-size: 1rem;
  }
  .output {
    margin-top: 2rem;
    border: 1px solid #ddd;
    padding: 1rem;
    background: #f9f9f9;
    min-height: 100px;
    white-space: pre-wrap;
    font-family: monospace;
  }
</style>
</head>
<body>
<h1>Priority Queue Demo</h1>
<p>This demo shows a simple Priority Queue implementation in JavaScript with visualization.</p>

<div class="pq-container">
  <label>
    Element Value:
    <input type="text" id="elementInput" placeholder="e.g. Task A" />
  </label>
  <br />
  <label>
    Priority (lower number = higher priority):
    <input type="number" id="priorityInput" placeholder="e.g. 5" />
  </label>
  <br />
  <button id="enqueueBtn">Enqueue</button>
  <button id="dequeueBtn">Dequeue</button>
  <button id="peekBtn">Peek</button>
  <button id="clearBtn">Clear Queue</button>

  <div class="output" id="output">
    Priority Queue is empty.
  </div>
</div>

<script>
  // Priority Queue Class
  class PriorityQueue {
    constructor() {
      this.queue = [];
    }

    // Enqueue an element with priority
    // Lower priority number means higher priority
    enqueue(element, priority) {
      const queueElement = { element, priority };
      let added = false;

      // insert element in sorted position based on priority
      for (let i = 0; i < this.queue.length; i++) {
        if (priority < this.queue[i].priority) {
          this.queue.splice(i, 0, queueElement);
          added = true;
          break;
        }
      }
      if (!added) {
        this.queue.push(queueElement);
      }
    }

    // Remove and return the highest priority element
    dequeue() {
      return this.queue.shift();
    }

    // Return the highest priority element without removing
    peek() {
      return this.queue.length > 0 ? this.queue[0] : undefined;
    }

    // Check if empty
    isEmpty() {
      return this.queue.length === 0;
    }

    // Clear the queue
    clear() {
      this.queue = [];
    }

    // Get all elements for display
    toArray() {
      return this.queue.slice();
    }
  }

  // UI interaction code
  const pq = new PriorityQueue();

  const elementInput = document.getElementById("elementInput");
  const priorityInput = document.getElementById("priorityInput");
  const enqueueBtn = document.getElementById("enqueueBtn");
  const dequeueBtn = document.getElementById("dequeueBtn");
  const peekBtn = document.getElementById("peekBtn");
  const clearBtn = document.getElementById("clearBtn");
  const output = document.getElementById("output");

  function updateDisplay() {
    if (pq.isEmpty()) {
      output.textContent = "Priority Queue is empty.";
      return;
    }
    const arr = pq.toArray();
    let displayText = "Elements in Priority Queue (from highest to lowest priority):\n";
    displayText += arr
      .map((item, i) => `${i + 1}. [Priority: ${item.priority}] ${item.element}`)
      .join("\n");
    output.textContent = displayText;
  }

  enqueueBtn.addEventListener("click", () => {
    const element = elementInput.value.trim();
    const priorityStr = priorityInput.value.trim();
    const priority = Number(priorityStr);

    if (element === "") {
      alert("Please enter an element value.");
      return;
    }
    if (priorityStr === "" || isNaN(priority)) {
      alert("Please enter a valid number for priority.");
      return;
    }

    pq.enqueue(element, priority);
    updateDisplay();
    elementInput.value = "";
    priorityInput.value = "";
    elementInput.focus();
  });

  dequeueBtn.addEventListener("click", () => {
    if (pq.isEmpty()) {
      alert("Queue is empty, cannot dequeue.");
      return;
    }
    const removed = pq.dequeue();
    alert(`Dequeued element: "${removed.element}" with priority ${removed.priority}`);
    updateDisplay();
  });

  peekBtn.addEventListener("click", () => {
    if (pq.isEmpty()) {
      alert("Queue is empty.");
      return;
    }
    const front = pq.peek();
    alert(`Next element to dequeue: "${front.element}" with priority ${front.priority}`);
  });

  clearBtn.addEventListener("click", () => {
    if (confirm("Are you sure you want to clear the queue?")) {
      pq.clear();
      updateDisplay();
    }
  });

  updateDisplay();
</script>
</body>
</html>