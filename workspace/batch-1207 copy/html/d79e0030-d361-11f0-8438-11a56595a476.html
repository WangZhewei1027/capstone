<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Two Pointers Technique Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 800px;
    margin: 40px auto;
    padding: 1rem;
    background: #f9f9f9;
    color: #222;
  }
  h1 {
    text-align: center;
  }
  .input-area, .results {
    margin-top: 20px;
  }
  label {
    display: block;
    margin-top: 12px;
    font-weight: bold;
  }
  input[type="text"], input[type="number"] {
    width: 100%;
    padding: 8px;
    margin-top: 6px;
    font-size: 1rem;
    box-sizing: border-box;
  }
  button {
    margin-top: 18px;
    padding: 10px 16px;
    font-size: 1rem;
    cursor: pointer;
    border: none;
    background-color: #007bff;
    color: white;
    border-radius: 4px;
  }
  button:hover {
    background-color: #0056b3;
  }
  .array-display {
    font-family: monospace;
    background: #fff;
    padding: 12px;
    border-radius: 4px;
    margin-top: 6px;
    overflow-x: auto;
  }
  .pointers-visual {
    font-family: monospace;
    margin-top: 10px;
    white-space: pre;
    background: #e3f2fd;
    padding: 10px;
    border-radius: 4px;
  }
  .explanation {
    margin-top: 30px;
    padding: 18px;
    background: #fff8e1;
    border-left: 5px solid #ffb300;
    line-height: 1.5;
  }
</style>
</head>
<body>
<h1>Two Pointers Technique Demo</h1>

<div class="input-area">
  <label for="arrayInput">Enter a sorted array of integers (comma separated):</label>
  <input id="arrayInput" type="text" value="1,2,3,4,5,6,7,8,9,10" />
  
  <label for="targetInput">Enter target sum:</label>
  <input id="targetInput" type="number" value="15" />
  
  <button id="runBtn">Find Pair with Two Pointers</button>
</div>

<div class="results" aria-live="polite" aria-atomic="true">
  <h2>Results:</h2>
  <div id="resultText"></div>
  <pre class="pointers-visual" id="visualOutput" aria-label="Two pointers visualization"></pre>
</div>

<div class="explanation">
  <h3>What is the Two Pointers Technique?</h3>
  <p>
    The <strong>Two Pointers</strong> technique uses two indices which move through the data structure
    (commonly arrays or linked lists) from different directions to find a solution efficiently.
  </p>
  <p>
    In this demo, we search for two numbers in a <em>sorted</em> array whose sum equals the target. We initiate
    one pointer at the start (left) and another at the end (right) of the array. We then:
  </p>
  <ul>
    <li>Check the sum of values at the pointers.</li>
    <li>If sum equals the target, we've found our pair.</li>
    <li>If sum is less than the target, move the left pointer right (increase sum).</li>
    <li>If sum is greater than the target, move the right pointer left (decrease sum).</li>
    <li>Repeat until pointers meet or find a pair.</li>
  </ul>
  <p>
    This approach is more efficient than brute force O(nÂ²), as it runs in O(n).
  </p>
</div>

<script>
  const arrayInput = document.getElementById('arrayInput');
  const targetInput = document.getElementById('targetInput');
  const runBtn = document.getElementById('runBtn');
  const resultText = document.getElementById('resultText');
  const visualOutput = document.getElementById('visualOutput');

  // Function to parse input string into sorted integer array and validate
  function parseArray(inputStr) {
    const parts = inputStr.split(',').map(s => s.trim());
    const nums = [];
    for (let p of parts) {
      if (p === '') continue;
      const n = Number(p);
      if (Number.isNaN(n) || !Number.isInteger(n)) {
        throw new Error(`"${p}" is not a valid integer.`);
      }
      nums.push(n);
    }
    // Must be sorted for this technique to work:
    for(let i=1; i<nums.length; i++) {
      if(nums[i] < nums[i-1]) {
        throw new Error('Array must be sorted in non-decreasing order.');
      }
    }
    return nums;
  }

  // Function to display array with pointers:
  // We'll represent array indices as spaced numbers;
  // Then show two pointers in the line below.
  function visualizePointers(arr, left, right) {
    const spacing = 4; // spaces between numbers
    // Format numbers right-aligned in 3 spaces, e.g. "  1"
    const arrStrings = arr.map(n => n.toString().padStart(3, ' '));
    
    // Construct line 1 - array values
    const line1 = arrStrings.join(' '.repeat(spacing));
    
    // Construct line 2 - pointers
    // Calculate the position of left and right markers aligned beneath numbers
    // Each number + spacing: 3 + spacing chars wide except last
    // So position of number i starts at: i * (3 + spacing)
    // We'll put 'L' and 'R' at the center of the number box
    const totalWidth = line1.length;
    let line2 = Array(totalWidth).fill(' ');

    function putCharAt(pos, char) {
      if (pos >= 0 && pos < totalWidth) {
        line2[pos] = char;
      }
    }
    // position of number i start index = i*(3+spacing)
    // center pos for number i = start + 1 (3 chars long, center at middle)
    const centerPos = i => i*(3 + spacing) + 1;
    
    if (left === right) {
      putCharAt(centerPos(left), 'X'); // single pointer at that pos
    } else {
      putCharAt(centerPos(left), 'L');
      putCharAt(centerPos(right), 'R');
    }

    return line1 + '\n' + line2.join('');
  }

  // Main Two Pointers logic, returns [i,j] index pair or null
  function twoPointers(arr, target, callback) {
    let left = 0;
    let right = arr.length - 1;
    while (left < right) {
      const sum = arr[left] + arr[right];
      callback(left, right, sum);
      if (sum === target) {
        return [left, right];
      } else if (sum < target) {
        left++;
      } else {
        right--;
      }
    }
    return null;
  }

  runBtn.addEventListener('click', () => {
    resultText.textContent = '';
    visualOutput.textContent = '';
    let arr, target;
    try {
      arr = parseArray(arrayInput.value);
    } catch (err) {
      resultText.textContent = 'Error parsing array: ' + err.message;
      return;
    }
    target = Number(targetInput.value);
    if (Number.isNaN(target)) {
      resultText.textContent = 'Invalid target value.';
      return;
    }
    if (arr.length < 2) {
      resultText.textContent = 'Array must have at least two elements.';
      return;
    }

    // Visual step-by-step:
    let steps = [];
    twoPointers(arr, target, (l, r, s) => {
      steps.push({left: l, right: r, sum: s});
    });

    // Animate steps with delay:
    let idx = 0;
    function showStep() {
      if (idx >= steps.length) {
        // Show final result
        const pair = steps.length ? (arr[steps[steps.length-1].left] + arr[steps[steps.length-1].right] === target 
                  ? [steps[steps.length-1].left, steps[steps.length-1].right] : null) : null;
        if (pair) {
          resultText.textContent = `Pair found: arr[${pair[0]}] = ${arr[pair[0]]}, arr[${pair[1]}] = ${arr[pair[1]]}, sum = ${target}`;
          visualOutput.textContent = visualizePointers(arr, pair[0], pair[1]);
        } else {
          resultText.textContent = `No pair found that sums to ${target}.`;
          visualOutput.textContent = '';
        }
        return;
      }
      const {left, right, sum} = steps[idx];
      visualOutput.textContent = visualizePointers(arr, left, right) + '\n\n' + 
        `arr[left] + arr[right] = ${arr[left]} + ${arr[right]} = ${sum}`;
      idx++;
      setTimeout(showStep, 1500);
    }

    showStep();
  });
</script>

</body>
</html>