<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Min and Max Heap Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2em;
    max-width: 800px;
  }
  h1 {
    text-align: center;
  }
  section {
    margin-bottom: 2em;
    border: 1px solid #ccc;
    padding: 1em;
    border-radius: 6px;
    background: #fafafa;
  }
  input[type="number"] {
    width: 90px;
    padding: 0.3em;
    margin-right: 0.5em;
  }
  button {
    padding: 0.4em 1em;
    margin-right: 0.5em;
    cursor: pointer;
  }
  .heap-array {
    font-family: monospace;
    background: #eee;
    padding: 0.5em;
    border-radius: 4px;
    white-space: pre-wrap;
    margin-top: 0.5em;
    min-height: 1.4em;
  }
  .desc {
    font-size: 0.9em;
    color: #555;
    margin-top: 0.3em;
  }
</style>
</head>
<body>
<h1>Heap (Min & Max) Demonstration</h1>

<section id="minHeapSection">
  <h2>Min Heap</h2>
  <div>
    <input id="minHeapInput" type="number" placeholder="Enter value" />
    <button onclick="minHeapInsert()">Insert</button>
    <button onclick="minHeapExtract()">Extract Min</button>
    <button onclick="minHeapClear()">Clear</button>
  </div>
  <div class="desc">The heap array stores elements as a binary heap: parent ≤ children.</div>
  <div><strong>Heap Array:</strong></div>
  <div id="minHeapArray" class="heap-array"></div>
  <div id="minHeapExtracted" class="desc"></div>
</section>

<section id="maxHeapSection">
  <h2>Max Heap</h2>
  <div>
    <input id="maxHeapInput" type="number" placeholder="Enter value" />
    <button onclick="maxHeapInsert()">Insert</button>
    <button onclick="maxHeapExtract()">Extract Max</button>
    <button onclick="maxHeapClear()">Clear</button>
  </div>
  <div class="desc">The heap array stores elements as a binary heap: parent ≥ children.</div>
  <div><strong>Heap Array:</strong></div>
  <div id="maxHeapArray" class="heap-array"></div>
  <div id="maxHeapExtracted" class="desc"></div>
</section>

<script>
  // Min Heap implementation
  class MinHeap {
    constructor() {
      this.heap = [];
    }

    getParentIndex(i) {
      return Math.floor((i - 1) / 2);
    }
    getLeftChildIndex(i) {
      return 2 * i + 1;
    }
    getRightChildIndex(i) {
      return 2 * i + 2;
    }

    swap(i1, i2) {
      [this.heap[i1], this.heap[i2]] = [this.heap[i2], this.heap[i1]];
    }

    insert(value) {
      this.heap.push(value);
      this.heapifyUp();
    }

    heapifyUp() {
      let index = this.heap.length - 1;
      while (
        index > 0 &&
        this.heap[this.getParentIndex(index)] > this.heap[index]
      ) {
        this.swap(index, this.getParentIndex(index));
        index = this.getParentIndex(index);
      }
    }

    extractMin() {
      if (this.heap.length === 0) return null;
      if (this.heap.length === 1) return this.heap.pop();

      const min = this.heap[0];
      this.heap[0] = this.heap.pop();
      this.heapifyDown();
      return min;
    }

    heapifyDown() {
      let index = 0;
      const length = this.heap.length;

      while (true) {
        let left = this.getLeftChildIndex(index);
        let right = this.getRightChildIndex(index);
        let smallest = index;

        if (left < length && this.heap[left] < this.heap[smallest]) {
          smallest = left;
        }
        if (right < length && this.heap[right] < this.heap[smallest]) {
          smallest = right;
        }
        if (smallest !== index) {
          this.swap(smallest, index);
          index = smallest;
        } else {
          break;
        }
      }
    }

    clear() {
      this.heap = [];
    }

    getHeap() {
      return this.heap.slice();
    }
  }

  // Max Heap implementation
  class MaxHeap {
    constructor() {
      this.heap = [];
    }

    getParentIndex(i) {
      return Math.floor((i - 1) / 2);
    }
    getLeftChildIndex(i) {
      return 2 * i + 1;
    }
    getRightChildIndex(i) {
      return 2 * i + 2;
    }

    swap(i1, i2) {
      [this.heap[i1], this.heap[i2]] = [this.heap[i2], this.heap[i1]];
    }

    insert(value) {
      this.heap.push(value);
      this.heapifyUp();
    }

    heapifyUp() {
      let index = this.heap.length - 1;
      while (
        index > 0 &&
        this.heap[this.getParentIndex(index)] < this.heap[index]
      ) {
        this.swap(index, this.getParentIndex(index));
        index = this.getParentIndex(index);
      }
    }

    extractMax() {
      if (this.heap.length === 0) return null;
      if (this.heap.length === 1) return this.heap.pop();

      const max = this.heap[0];
      this.heap[0] = this.heap.pop();
      this.heapifyDown();
      return max;
    }

    heapifyDown() {
      let index = 0;
      const length = this.heap.length;

      while (true) {
        let left = this.getLeftChildIndex(index);
        let right = this.getRightChildIndex(index);
        let largest = index;

        if (left < length && this.heap[left] > this.heap[largest]) {
          largest = left;
        }
        if (right < length && this.heap[right] > this.heap[largest]) {
          largest = right;
        }
        if (largest !== index) {
          this.swap(largest, index);
          index = largest;
        } else {
          break;
        }
      }
    }

    clear() {
      this.heap = [];
    }

    getHeap() {
      return this.heap.slice();
    }
  }

  // Instances
  const minHeap = new MinHeap();
  const maxHeap = new MaxHeap();

  // DOM elements
  const minHeapInput = document.getElementById("minHeapInput");
  const minHeapArray = document.getElementById("minHeapArray");
  const minHeapExtracted = document.getElementById("minHeapExtracted");

  const maxHeapInput = document.getElementById("maxHeapInput");
  const maxHeapArray = document.getElementById("maxHeapArray");
  const maxHeapExtracted = document.getElementById("maxHeapExtracted");

  // Update displays
  function updateMinHeapDisplay() {
    minHeapArray.textContent = JSON.stringify(minHeap.getHeap(), null, 2);
  }

  function updateMaxHeapDisplay() {
    maxHeapArray.textContent = JSON.stringify(maxHeap.getHeap(), null, 2);
  }

  // Min Heap Controls
  function minHeapInsert() {
    const val = Number(minHeapInput.value);
    if (isNaN(val)) {
      alert("Please enter a valid number.");
      return;
    }
    minHeap.insert(val);
    minHeapInput.value = "";
    minHeapExtracted.textContent = "";
    updateMinHeapDisplay();
  }

  function minHeapExtract() {
    const min = minHeap.extractMin();
    if (min === null) {
      minHeapExtracted.textContent = "Heap is empty.";
    } else {
      minHeapExtracted.textContent = "Extracted Min: " + min;
    }
    updateMinHeapDisplay();
  }

  function minHeapClear() {
    minHeap.clear();
    minHeapExtracted.textContent = "";
    updateMinHeapDisplay();
  }

  // Max Heap Controls
  function maxHeapInsert() {
    const val = Number(maxHeapInput.value);
    if (isNaN(val)) {
      alert("Please enter a valid number.");
      return;
    }
    maxHeap.insert(val);
    maxHeapInput.value = "";
    maxHeapExtracted.textContent = "";
    updateMaxHeapDisplay();
  }

  function maxHeapExtract() {
    const max = maxHeap.extractMax();
    if (max === null) {
      maxHeapExtracted.textContent = "Heap is empty.";
    } else {
      maxHeapExtracted.textContent = "Extracted Max: " + max;
    }
    updateMaxHeapDisplay();
  }

  function maxHeapClear() {
    maxHeap.clear();
    maxHeapExtracted.textContent = "";
    updateMaxHeapDisplay();
  }

  // Initialize display
  updateMinHeapDisplay();
  updateMaxHeapDisplay();
</script>
</body>
</html>