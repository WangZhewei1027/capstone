<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JavaScript Array Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 40px;
    max-width: 700px;
  }
  input, button {
    font-size: 1rem;
    padding: 0.5em;
    margin-right: 0.5em;
  }
  #arrayDisplay {
    margin-top: 1em;
    padding: 1em;
    background: #f8f8f8;
    border: 1px solid #ddd;
    white-space: pre-wrap;
  }
  .section {
    margin-bottom: 2em;
  }
</style>
</head>
<body>
  <h1>JavaScript Array Demonstration</h1>
  <p>An array is an ordered list of values. This demo shows common array operations.</p>

  <div class="section">
    <h2>Current Array:</h2>
    <div id="arrayDisplay">[]</div>
  </div>

  <div class="section">
    <h2>Operations:</h2>

    <div>
      <input type="text" id="elementInput" placeholder="Enter value (string or number)" />
      <button id="addEndBtn">Add to End (push)</button>
      <button id="addStartBtn">Add to Start (unshift)</button>
      <button id="removeEndBtn">Remove Last (pop)</button>
      <button id="removeStartBtn">Remove First (shift)</button>
    </div>

    <div style="margin-top:1em;">
      <input type="number" id="spliceIndex" placeholder="Index" style="width:80px" />
      <input type="number" id="spliceDeleteCount" placeholder="Delete Count" style="width:100px" />
      <input type="text" id="spliceInsertValue" placeholder="Insert value (opt)" />
      <button id="spliceBtn">Splice</button>
    </div>

    <div style="margin-top:1em;">
      <button id="reverseBtn">Reverse Array</button>
      <button id="sortBtn">Sort Array</button>
      <button id="clearBtn" style="background:#f44336; color:white;">Clear Array</button>
    </div>

    <div style="margin-top:1em;">
      <button id="mapBtn">Map: add " (mapped)" to strings, +1 to numbers</button>
      <button id="filterBtn">Filter: Keep only numbers</button>
      <button id="reduceBtn">Reduce: Sum of numbers</button>
    </div>
  </div>

  <script>
    (() => {
      let arr = [];

      const arrayDisplay = document.getElementById("arrayDisplay");
      const elementInput = document.getElementById("elementInput");
      const addEndBtn = document.getElementById("addEndBtn");
      const addStartBtn = document.getElementById("addStartBtn");
      const removeEndBtn = document.getElementById("removeEndBtn");
      const removeStartBtn = document.getElementById("removeStartBtn");
      const spliceIndex = document.getElementById("spliceIndex");
      const spliceDeleteCount = document.getElementById("spliceDeleteCount");
      const spliceInsertValue = document.getElementById("spliceInsertValue");
      const spliceBtn = document.getElementById("spliceBtn");
      const reverseBtn = document.getElementById("reverseBtn");
      const sortBtn = document.getElementById("sortBtn");
      const clearBtn = document.getElementById("clearBtn");
      const mapBtn = document.getElementById("mapBtn");
      const filterBtn = document.getElementById("filterBtn");
      const reduceBtn = document.getElementById("reduceBtn");

      function updateDisplay(msg = "") {
        arrayDisplay.textContent = JSON.stringify(arr, null, 2);
        if (msg) {
          arrayDisplay.textContent += "\n\n" + msg;
        }
      }

      // Helper to parse input value into number or string
      function parseValue(val) {
        if(val === "") return null;
        // Try parse as number
        if (!isNaN(val)) {
          return val.includes('.') ? parseFloat(val) : parseInt(val, 10);
        }
        return val;
      }

      addEndBtn.addEventListener("click", () => {
        const val = parseValue(elementInput.value);
        if(val === null) {
          alert("Please enter a valid value.");
          return;
        }
        arr.push(val);
        updateDisplay(`Added to end: ${JSON.stringify(val)}`);
        elementInput.value = "";
      });

      addStartBtn.addEventListener("click", () => {
        const val = parseValue(elementInput.value);
        if(val === null) {
          alert("Please enter a valid value.");
          return;
        }
        arr.unshift(val);
        updateDisplay(`Added to start: ${JSON.stringify(val)}`);
        elementInput.value = "";
      });

      removeEndBtn.addEventListener("click", () => {
        if(arr.length === 0) {
          alert("Array is empty.");
          return;
        }
        const val = arr.pop();
        updateDisplay(`Removed from end (pop): ${JSON.stringify(val)}`);
      });

      removeStartBtn.addEventListener("click", () => {
        if(arr.length === 0) {
          alert("Array is empty.");
          return;
        }
        const val = arr.shift();
        updateDisplay(`Removed from start (shift): ${JSON.stringify(val)}`);
      });

      spliceBtn.addEventListener("click", () => {
        const index = parseInt(spliceIndex.value, 10);
        const deleteCount = parseInt(spliceDeleteCount.value, 10);
        let insertValRaw = spliceInsertValue.value.trim();
        if (isNaN(index) || isNaN(deleteCount) || index < 0 || deleteCount < 0) {
          alert("Please enter valid non-negative numbers for index and delete count.");
          return;
        }
        let insertVal = insertValRaw === "" ? [] : [parseValue(insertValRaw)];
        const removed = arr.splice(index, deleteCount, ...insertVal);
        updateDisplay(`Splice at index ${index}, deleted ${deleteCount} element(s): removed ${JSON.stringify(removed)}; inserted ${JSON.stringify(insertVal)}`);
        spliceIndex.value = "";
        spliceDeleteCount.value = "";
        spliceInsertValue.value = "";
      });

      reverseBtn.addEventListener("click", () => {
        arr.reverse();
        updateDisplay("Array reversed");
      });

      sortBtn.addEventListener("click", () => {
        // Sort converting all to string for consistent order
        arr.sort((a, b) => {
          const aStr = String(a);
          const bStr = String(b);
          if (aStr < bStr) return -1;
          if (aStr > bStr) return 1;
          return 0;
        });
        updateDisplay("Array sorted (string order)");
      });

      clearBtn.addEventListener("click", () => {
        arr = [];
        updateDisplay("Array cleared");
      });

      mapBtn.addEventListener("click", () => {
        arr = arr.map(el => {
          if (typeof el === "number") return el + 1;
          if (typeof el === "string") return el + " (mapped)";
          return el;
        });
        updateDisplay("Array mapped: numbers incremented by 1, strings appended with ' (mapped)'");
      });

      filterBtn.addEventListener("click", () => {
        arr = arr.filter(el => typeof el === "number");
        updateDisplay("Array filtered: only numbers kept");
      });

      reduceBtn.addEventListener("click", () => {
        const sum = arr.reduce((acc, cur) => {
          if (typeof cur === "number") return acc + cur;
          return acc;
        }, 0);
        updateDisplay(`Reduce: Sum of numbers = ${sum}`);
      });

      updateDisplay();
    })();
  </script>
</body>
</html>