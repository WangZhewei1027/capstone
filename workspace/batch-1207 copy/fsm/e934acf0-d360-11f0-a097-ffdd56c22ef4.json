{
  "meta": {
    "concept": "Huffman Coding Visualizer",
    "topic": "Huffman Coding",
    "educational_goal": "Interactively build a Huffman tree, view codes, encode/decode text and step through the algorithm.",
    "expected_interactions": [
      "Build Huffman Tree",
      "Random demo",
      "Clear",
      "Encode",
      "Decode",
      "Next Step",
      "Previous Step",
      "Auto Play"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "status.textContent = 'Cleared. Enter text to build a Huffman tree.'"
      ],
      "confidence": 1
    },
    {
      "id": "S1_TreeBuilt",
      "label": "Tree Built",
      "type": "normal",
      "entry_actions": [
        "renderCodesTable(codes)",
        "drawTree(root)"
      ],
      "exit_actions": [],
      "evidence": [
        "showStatus('Tree built. Hover nodes to highlight symbols. Click nodes to filter codes.')"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Encoding",
      "label": "Encoding",
      "type": "normal",
      "entry_actions": [
        "doEncode()"
      ],
      "exit_actions": [],
      "evidence": [
        "showStatus('Encoded text. You can copy the bitstring or decode it.')"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Decoding",
      "label": "Decoding",
      "type": "normal",
      "entry_actions": [
        "doDecode()"
      ],
      "exit_actions": [],
      "evidence": [
        "showStatus('Decoded bitstring using current Huffman tree.')"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Cleared",
      "label": "Cleared",
      "type": "normal",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "status.textContent = 'Cleared. Enter text to build a Huffman tree.'"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "BuildTree",
      "event_type": "click",
      "description": "Build Huffman Tree from input text",
      "trigger_selectors": [
        "#buildBtn"
      ],
      "evidence": [
        "buildBtn.addEventListener('click', build);"
      ],
      "confidence": 1
    },
    {
      "id": "RandomDemo",
      "event_type": "click",
      "description": "Load random demo text",
      "trigger_selectors": [
        "#randomBtn"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', randomDemo);"
      ],
      "confidence": 1
    },
    {
      "id": "Clear",
      "event_type": "click",
      "description": "Clear all inputs and outputs",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', clearAll);"
      ],
      "confidence": 1
    },
    {
      "id": "Encode",
      "event_type": "click",
      "description": "Encode input text",
      "trigger_selectors": [
        "#encodeBtn"
      ],
      "evidence": [
        "encodeBtn.addEventListener('click', doEncode);"
      ],
      "confidence": 1
    },
    {
      "id": "Decode",
      "event_type": "click",
      "description": "Decode bitstring",
      "trigger_selectors": [
        "#decodeBtn"
      ],
      "evidence": [
        "decodeBtn.addEventListener('click', doDecode);"
      ],
      "confidence": 1
    },
    {
      "id": "NextStep",
      "event_type": "click",
      "description": "Go to the next step in building the tree",
      "trigger_selectors": [
        "#nextStep"
      ],
      "evidence": [
        "nextStep.addEventListener('click', ()=>{ next(); });"
      ],
      "confidence": 1
    },
    {
      "id": "PrevStep",
      "event_type": "click",
      "description": "Go to the previous step in building the tree",
      "trigger_selectors": [
        "#prevStep"
      ],
      "evidence": [
        "prevStep.addEventListener('click', ()=>{ prev(); });"
      ],
      "confidence": 1
    },
    {
      "id": "AutoPlay",
      "event_type": "click",
      "description": "Toggle autoplay for steps",
      "trigger_selectors": [
        "#autoPlay"
      ],
      "evidence": [
        "autoPlayBtn.addEventListener('click', toggleAutoplay);"
      ],
      "confidence": 1
    },
    {
      "id": "KeyboardShortcuts",
      "event_type": "keydown",
      "description": "Keyboard shortcuts for navigation",
      "trigger_selectors": [
        "document"
      ],
      "evidence": [
        "document.addEventListener('keydown', (e)=>{ if(e.key === 'ArrowRight') next(); if(e.key === 'ArrowLeft') prev(); if(e.key === ' ') { e.preventDefault(); toggleAutoplay(); } });"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_TreeBuilt",
      "event": "BuildTree",
      "actions": [
        "build()"
      ],
      "expected_observables": [
        "renderCodesTable(codes)",
        "drawTree(root)"
      ],
      "evidence": [
        "build()"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_Cleared",
      "event": "Clear",
      "actions": [
        "clearAll()"
      ],
      "expected_observables": [
        "status.textContent = 'Cleared. Enter text to build a Huffman tree.'"
      ],
      "evidence": [
        "clearAll()"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_TreeBuilt",
      "event": "RandomDemo",
      "actions": [
        "randomDemo()"
      ],
      "expected_observables": [
        "renderCodesTable(codes)",
        "drawTree(root)"
      ],
      "evidence": [
        "randomDemo()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S2_Encoding",
      "event": "Encode",
      "actions": [
        "doEncode()"
      ],
      "expected_observables": [
        "showStatus('Encoded text. You can copy the bitstring or decode it.')"
      ],
      "evidence": [
        "doEncode()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S3_Decoding",
      "event": "Decode",
      "actions": [
        "doDecode()"
      ],
      "expected_observables": [
        "showStatus('Decoded bitstring using current Huffman tree.')"
      ],
      "evidence": [
        "doDecode()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S1_TreeBuilt",
      "event": "NextStep",
      "actions": [
        "next()"
      ],
      "expected_observables": [
        "updateStepIndicator()",
        "renderPQSteps(steps, stepIndex)"
      ],
      "evidence": [
        "next()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S1_TreeBuilt",
      "event": "PrevStep",
      "actions": [
        "prev()"
      ],
      "expected_observables": [
        "updateStepIndicator()",
        "renderPQSteps(steps, stepIndex)"
      ],
      "evidence": [
        "prev()"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Cleared",
      "to": "S0_Idle",
      "event": "BuildTree",
      "actions": [
        "build()"
      ],
      "expected_observables": [
        "renderCodesTable(codes)",
        "drawTree(root)"
      ],
      "evidence": [
        "build()"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#buildBtn",
      "text": "Build Huffman Tree",
      "attributes": {},
      "evidence": [
        "<button id=\"buildBtn\">Build Huffman Tree</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randomBtn",
      "text": "Random demo",
      "attributes": {},
      "evidence": [
        "<button class=\"secondary small\" id=\"randomBtn\">Random demo</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {},
      "evidence": [
        "<button class=\"secondary small\" id=\"clearBtn\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#encodeBtn",
      "text": "Encode",
      "attributes": {},
      "evidence": [
        "<button id=\"encodeBtn\" class=\"small\">Encode</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#decodeBtn",
      "text": "Decode",
      "attributes": {},
      "evidence": [
        "<button id=\"decodeBtn\" class=\"small secondary\">Decode</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#prevStep",
      "text": "◀ Prev",
      "attributes": {},
      "evidence": [
        "<button id=\"prevStep\" class=\"secondary small\">◀ Prev</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#nextStep",
      "text": "Next ▶",
      "attributes": {},
      "evidence": [
        "<button id=\"nextStep\" class=\"secondary small\">Next ▶</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#autoPlay",
      "text": "▶ Play",
      "attributes": {},
      "evidence": [
        "<button id=\"autoPlay\" class=\"small secondary\">▶ Play</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#inputText",
      "text": "this is an example for huffman encoding",
      "attributes": {
        "placeholder": "Type or paste some text..."
      },
      "evidence": [
        "<textarea id=\"inputText\" placeholder=\"Type or paste some text...\">this is an example for huffman encoding</textarea>"
      ]
    },
    {
      "type": "input",
      "selector": "#bitsInput",
      "text": "",
      "attributes": {
        "type": "text",
        "placeholder": "Bits for decoding (optional)"
      },
      "evidence": [
        "<input id=\"bitsInput\" type=\"text\" placeholder=\"Bits for decoding (optional)\" style=\"flex:1;\" />"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-04T00:00:00Z",
    "detected_components_count": 9,
    "detected_components": [
      {
        "type": "button",
        "selector": "#buildBtn"
      },
      {
        "type": "button",
        "selector": "#randomBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#encodeBtn"
      },
      {
        "type": "button",
        "selector": "#decodeBtn"
      },
      {
        "type": "button",
        "selector": "#prevStep"
      },
      {
        "type": "button",
        "selector": "#nextStep"
      },
      {
        "type": "button",
        "selector": "#autoPlay"
      },
      {
        "type": "input",
        "selector": "#inputText"
      },
      {
        "type": "input",
        "selector": "#bitsInput"
      }
    ],
    "detected_event_handlers_count": 8,
    "detected_event_handlers": [
      "buildBtn.addEventListener('click', build);",
      "randomBtn.addEventListener('click', randomDemo);",
      "clearBtn.addEventListener('click', clearAll);",
      "encodeBtn.addEventListener('click', doEncode);",
      "decodeBtn.addEventListener('click', doDecode);",
      "nextStep.addEventListener('click', ()=>{ next(); });",
      "prevStep.addEventListener('click', ()=>{ prev(); });",
      "autoPlayBtn.addEventListener('click', toggleAutoplay);"
    ],
    "extracted_states_count": 5,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}