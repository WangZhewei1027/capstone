{
  "meta": {
    "concept": "K-Means Clustering â€” Interactive Demo",
    "topic": "K-Means Clustering",
    "educational_goal": "To demonstrate the K-Means clustering algorithm interactively.",
    "expected_interactions": [
      "Initialize centroids",
      "Step through iterations",
      "Run the algorithm",
      "Stop the algorithm",
      "Randomize data",
      "Clear points",
      "Reset all"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "<canvas id=\"plot\" width=\"900\" height=\"600\" title=\"Click to add points when Add Points mode is on\"></canvas>"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Initialized",
      "label": "Initialized",
      "type": "default",
      "entry_actions": [
        "initializeCentroids()"
      ],
      "exit_actions": [],
      "evidence": [
        "initBtn.addEventListener('click', () => { initializeCentroids(); draw(); });"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Running",
      "label": "Running",
      "type": "default",
      "entry_actions": [
        "runUntilConverged()"
      ],
      "exit_actions": [],
      "evidence": [
        "runBtn.addEventListener('click', () => { if (intervalId) return; intervalId = setInterval(stepAndDraw, animationDelay); runBtn.disabled = true; stopBtn.disabled = false; });"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Stopped",
      "label": "Stopped",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "stopBtn.addEventListener('click', () => { if (intervalId) { clearInterval(intervalId); intervalId = null; } runBtn.disabled = false; stopBtn.disabled = true; });"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Stepped",
      "label": "Stepped",
      "type": "default",
      "entry_actions": [
        "stepAndDraw()"
      ],
      "exit_actions": [],
      "evidence": [
        "stepBtn.addEventListener('click', () => { stepAndDraw(); });"
      ],
      "confidence": 1
    },
    {
      "id": "S5_DataRandomized",
      "label": "Data Randomized",
      "type": "default",
      "entry_actions": [
        "generateData(Number(nPointsInput.value));"
      ],
      "exit_actions": [],
      "evidence": [
        "randomBtn.addEventListener('click', () => { generateData(Number(nPointsInput.value)); centroids = []; iteration = 0; updateStats(); });"
      ],
      "confidence": 1
    },
    {
      "id": "S6_PointsCleared",
      "label": "Points Cleared",
      "type": "default",
      "entry_actions": [
        "points = []; centroids = []; iteration = 0; updateStats(); draw();"
      ],
      "exit_actions": [],
      "evidence": [
        "clearBtn.addEventListener('click', () => { points = []; centroids = []; iteration = 0; updateStats(); draw(); });"
      ],
      "confidence": 1
    },
    {
      "id": "S7_Reset",
      "label": "Reset",
      "type": "default",
      "entry_actions": [
        "resetAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "resetBtn.addEventListener('click', () => { nPointsInput.value = 150; kInput.value = 4; speedInput.value = 250; initSelect.value = 'kmeans++'; nPointsVal.textContent = nPointsInput.value; kVal.textContent = kInput.value; speedVal.textContent = speedInput.value; generateData(Number(nPointsInput.value)); centroids = []; iteration = 0; updateStats(); draw(); });"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "InitClick",
      "event_type": "click",
      "description": "Initialize centroids",
      "trigger_selectors": [
        "#initBtn"
      ],
      "evidence": [
        "initBtn.addEventListener('click', () => { initializeCentroids(); draw(); });"
      ],
      "confidence": 1
    },
    {
      "id": "StepClick",
      "event_type": "click",
      "description": "Step through the algorithm",
      "trigger_selectors": [
        "#stepBtn"
      ],
      "evidence": [
        "stepBtn.addEventListener('click', () => { stepAndDraw(); });"
      ],
      "confidence": 1
    },
    {
      "id": "RunClick",
      "event_type": "click",
      "description": "Run the algorithm continuously",
      "trigger_selectors": [
        "#runBtn"
      ],
      "evidence": [
        "runBtn.addEventListener('click', () => { if (intervalId) return; intervalId = setInterval(stepAndDraw, animationDelay); runBtn.disabled = true; stopBtn.disabled = false; });"
      ],
      "confidence": 1
    },
    {
      "id": "StopClick",
      "event_type": "click",
      "description": "Stop the running algorithm",
      "trigger_selectors": [
        "#stopBtn"
      ],
      "evidence": [
        "stopBtn.addEventListener('click', () => { if (intervalId) { clearInterval(intervalId); intervalId = null; } runBtn.disabled = false; stopBtn.disabled = true; });"
      ],
      "confidence": 1
    },
    {
      "id": "RandomizeClick",
      "event_type": "click",
      "description": "Randomize data points",
      "trigger_selectors": [
        "#randomBtn"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', () => { generateData(Number(nPointsInput.value)); centroids = []; iteration = 0; updateStats(); });"
      ],
      "confidence": 1
    },
    {
      "id": "ClearClick",
      "event_type": "click",
      "description": "Clear all points",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => { points = []; centroids = []; iteration = 0; updateStats(); draw(); });"
      ],
      "confidence": 1
    },
    {
      "id": "ResetClick",
      "event_type": "click",
      "description": "Reset all settings to default",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', () => { nPointsInput.value = 150; kInput.value = 4; speedInput.value = 250; initSelect.value = 'kmeans++'; nPointsVal.textContent = nPointsInput.value; kVal.textContent = kInput.value; speedVal.textContent = speedInput.value; generateData(Number(nPointsInput.value)); centroids = []; iteration = 0; updateStats(); draw(); });"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Initialized",
      "event": "InitClick",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "initBtn.addEventListener('click', () => { initializeCentroids(); draw(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Initialized",
      "to": "S4_Stepped",
      "event": "StepClick",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "stepBtn.addEventListener('click', () => { stepAndDraw(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Stepped",
      "to": "S2_Running",
      "event": "RunClick",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "runBtn.addEventListener('click', () => { if (intervalId) return; intervalId = setInterval(stepAndDraw, animationDelay); runBtn.disabled = true; stopBtn.disabled = false; });"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Running",
      "to": "S3_Stopped",
      "event": "StopClick",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "stopBtn.addEventListener('click', () => { if (intervalId) { clearInterval(intervalId); intervalId = null; } runBtn.disabled = false; stopBtn.disabled = true; });"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S5_DataRandomized",
      "event": "RandomizeClick",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "randomBtn.addEventListener('click', () => { generateData(Number(nPointsInput.value)); centroids = []; iteration = 0; updateStats(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S6_PointsCleared",
      "event": "ClearClick",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "clearBtn.addEventListener('click', () => { points = []; centroids = []; iteration = 0; updateStats(); draw(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S7_Reset",
      "event": "ResetClick",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "resetBtn.addEventListener('click', () => { nPointsInput.value = 150; kInput.value = 4; speedInput.value = 250; initSelect.value = 'kmeans++'; nPointsVal.textContent = nPointsInput.value; kVal.textContent = kInput.value; speedVal.textContent = speedInput.value; generateData(Number(nPointsInput.value)); centroids = []; iteration = 0; updateStats(); draw(); });"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#initBtn",
      "text": "Initialize",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"initBtn\" class=\"secondary\">Initialize</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBtn",
      "text": "Step",
      "attributes": {},
      "evidence": [
        "<button id=\"stepBtn\">Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runBtn",
      "text": "Run",
      "attributes": {},
      "evidence": [
        "<button id=\"runBtn\">Run</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stopBtn",
      "text": "Stop",
      "attributes": {
        "class": "secondary",
        "disabled": "true"
      },
      "evidence": [
        "<button id=\"stopBtn\" class=\"secondary\" disabled>Stop</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randomBtn",
      "text": "Randomize Data",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"randomBtn\" class=\"secondary\">Randomize Data</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear Points",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"secondary\">Clear Points</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset All",
      "attributes": {
        "class": "warn"
      },
      "evidence": [
        "<button id=\"resetBtn\" class=\"warn\">Reset All</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#nPoints",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "10",
        "max": "1000",
        "value": "150"
      },
      "evidence": [
        "<input id=\"nPoints\" type=\"range\" min=\"10\" max=\"1000\" value=\"150\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#k",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "1",
        "max": "12",
        "value": "4"
      },
      "evidence": [
        "<input id=\"k\" type=\"range\" min=\"1\" max=\"12\" value=\"4\" />"
      ]
    },
    {
      "type": "select",
      "selector": "#init",
      "text": "",
      "attributes": {},
      "evidence": [
        "<select id=\"init\" style=\"flex:1;margin-left:8px;\"><option value=\"random\">Random</option><option value=\"kmeans++\" selected>K-Means++</option></select>"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "50",
        "max": "1200",
        "value": "250"
      },
      "evidence": [
        "<input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" value=\"250\" />"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-03T12:00:00Z",
    "detected_components_count": 10,
    "detected_components": [
      {
        "type": "button",
        "selector": "#initBtn",
        "text": "Initialize",
        "attributes": {
          "class": "secondary"
        }
      },
      {
        "type": "button",
        "selector": "#stepBtn",
        "text": "Step",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#runBtn",
        "text": "Run",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#stopBtn",
        "text": "Stop",
        "attributes": {
          "class": "secondary",
          "disabled": "true"
        }
      },
      {
        "type": "button",
        "selector": "#randomBtn",
        "text": "Randomize Data",
        "attributes": {
          "class": "secondary"
        }
      },
      {
        "type": "button",
        "selector": "#clearBtn",
        "text": "Clear Points",
        "attributes": {
          "class": "secondary"
        }
      },
      {
        "type": "button",
        "selector": "#resetBtn",
        "text": "Reset All",
        "attributes": {
          "class": "warn"
        }
      },
      {
        "type": "input",
        "selector": "#nPoints",
        "text": "",
        "attributes": {
          "type": "range",
          "min": "10",
          "max": "1000",
          "value": "150"
        }
      },
      {
        "type": "input",
        "selector": "#k",
        "text": "",
        "attributes": {
          "type": "range",
          "min": "1",
          "max": "12",
          "value": "4"
        }
      },
      {
        "type": "select",
        "selector": "#init",
        "text": "",
        "attributes": {}
      },
      {
        "type": "input",
        "selector": "#speed",
        "text": "",
        "attributes": {
          "type": "range",
          "min": "50",
          "max": "1200",
          "value": "250"
        }
      }
    ],
    "detected_event_handlers_count": 7,
    "detected_event_handlers": [
      "nPointsInput.addEventListener('input', () => { nPointsVal.textContent = nPointsInput.value; });",
      "kInput.addEventListener('input', () => { kVal.textContent = kInput.value; });",
      "speedInput.addEventListener('input', () => { speedVal.textContent = speedInput.value; animationDelay = Number(speedInput.value); if (intervalId) { clearInterval(intervalId); intervalId = setInterval(stepAndDraw, animationDelay); } });",
      "initBtn.addEventListener('click', () => { initializeCentroids(); draw(); });",
      "stepBtn.addEventListener('click', () => { stepAndDraw(); });",
      "runBtn.addEventListener('click', () => { if (intervalId) return; intervalId = setInterval(stepAndDraw, animationDelay); runBtn.disabled = true; stopBtn.disabled = false; });",
      "stopBtn.addEventListener('click', () => { if (intervalId) { clearInterval(intervalId); intervalId = null; } runBtn.disabled = false; stopBtn.disabled = true; });"
    ],
    "extracted_states_count": 8,
    "extracted_transitions_count": 7,
    "extraction_confidence": 1,
    "notes": []
  }
}