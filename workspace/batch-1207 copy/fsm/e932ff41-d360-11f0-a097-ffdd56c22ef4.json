{
  "meta": {
    "concept": "Heap (Min / Max) Interactive Demo",
    "topic": "Heap Visualization",
    "educational_goal": "Understand the operations of Min/Max heaps through interactive visualization.",
    "expected_interactions": [
      "Insert values",
      "Extract root",
      "Peek root",
      "Clear heap",
      "Build heap from array",
      "Randomly generate values",
      "Perform heap sort",
      "Visualize sorting",
      "Toggle animation",
      "Step through operations"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "renderHeap(heap, {})"
      ],
      "exit_actions": [],
      "evidence": [
        "Ready — select min or max and try operations."
      ],
      "confidence": 1
    },
    {
      "id": "S1_Heap_Built",
      "label": "Heap Built",
      "type": "normal",
      "entry_actions": [
        "renderHeap(heap, {})"
      ],
      "exit_actions": [],
      "evidence": [
        "Built from array"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Heap_Empty",
      "label": "Heap Empty",
      "type": "normal",
      "entry_actions": [
        "renderHeap(heap, {})"
      ],
      "exit_actions": [],
      "evidence": [
        "Heap is empty — insert values or build from an array"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "InsertValue",
      "event_type": "click",
      "description": "Inserts a value into the heap",
      "trigger_selectors": [
        "#insertBtn"
      ],
      "evidence": [
        "insertBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ExtractRoot",
      "event_type": "click",
      "description": "Extracts the root of the heap",
      "trigger_selectors": [
        "#extractBtn"
      ],
      "evidence": [
        "extractBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "PeekRoot",
      "event_type": "click",
      "description": "Peeks the root of the heap",
      "trigger_selectors": [
        "#peekBtn"
      ],
      "evidence": [
        "peekBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ClearHeap",
      "event_type": "click",
      "description": "Clears the heap",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "BuildHeap",
      "event_type": "click",
      "description": "Builds a heap from an array",
      "trigger_selectors": [
        "#buildBtn"
      ],
      "evidence": [
        "buildBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "GenerateRandom",
      "event_type": "click",
      "description": "Generates a random array and builds a heap",
      "trigger_selectors": [
        "#randBtn"
      ],
      "evidence": [
        "randBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "HeapSort",
      "event_type": "click",
      "description": "Sorts the heap",
      "trigger_selectors": [
        "#heapSortBtn"
      ],
      "evidence": [
        "heapSortBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "VisualizeSort",
      "event_type": "click",
      "description": "Visualizes the sorting process",
      "trigger_selectors": [
        "#visualSortBtn"
      ],
      "evidence": [
        "visualSortBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ToggleAnimation",
      "event_type": "click",
      "description": "Toggles animation on/off",
      "trigger_selectors": [
        "#toggleAnim"
      ],
      "evidence": [
        "toggleAnim.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "StepMode",
      "event_type": "click",
      "description": "Toggles step mode for operations",
      "trigger_selectors": [
        "#stepBtn"
      ],
      "evidence": [
        "stepBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeHeapType",
      "event_type": "change",
      "description": "Changes the type of heap (min/max)",
      "trigger_selectors": [
        "#type"
      ],
      "evidence": [
        "typeSel.addEventListener('change', () => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Heap_Built",
      "event": "InsertValue",
      "actions": [
        "await heap.insert(val);"
      ],
      "expected_observables": [
        "Inserted "
      ],
      "evidence": [
        "log('Inserting ' + val);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_Heap_Built",
      "event": "BuildHeap",
      "actions": [
        "await heap.buildFromArray(parts);"
      ],
      "expected_observables": [
        "Built from array"
      ],
      "evidence": [
        "log('Building heap from array: ' + parts.join(', '));"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Heap_Built",
      "to": "S2_Heap_Empty",
      "event": "ExtractRoot",
      "actions": [
        "await heap.extract();"
      ],
      "expected_observables": [
        "Extracted "
      ],
      "evidence": [
        "log('Extract root -> ' + heap.peek());"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Heap_Built",
      "to": "S1_Heap_Built",
      "event": "PeekRoot",
      "actions": [],
      "expected_observables": [
        "Peek "
      ],
      "evidence": [
        "const p = heap.peek();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Heap_Built",
      "to": "S1_Heap_Built",
      "event": "ToggleAnimation",
      "actions": [],
      "expected_observables": [
        "Animate: "
      ],
      "evidence": [
        "toggleAnim.textContent = 'Animate: ' + (animate ? 'ON' : 'OFF');"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Heap_Built",
      "to": "S1_Heap_Built",
      "event": "StepMode",
      "actions": [],
      "expected_observables": [
        "Waiting for Next Step..."
      ],
      "evidence": [
        "pendingStepResolve = resolve;"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Heap_Empty",
      "to": "S1_Heap_Built",
      "event": "InsertValue",
      "actions": [
        "await heap.insert(val);"
      ],
      "expected_observables": [
        "Inserted "
      ],
      "evidence": [
        "log('Inserting ' + val);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Heap_Empty",
      "to": "S1_Heap_Built",
      "event": "BuildHeap",
      "actions": [
        "await heap.buildFromArray(parts);"
      ],
      "expected_observables": [
        "Built from array"
      ],
      "evidence": [
        "log('Building heap from array: ' + parts.join(', '));"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Heap_Empty",
      "to": "S2_Heap_Empty",
      "event": "ClearHeap",
      "actions": [
        "resetHeap(typeSel.value === 'min');"
      ],
      "expected_observables": [
        "Heap is empty — insert values or build from an array"
      ],
      "evidence": [
        "resetHeap(typeSel.value === 'min');"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#insertBtn",
      "text": "Insert",
      "attributes": {},
      "evidence": [
        "<button id=\"insertBtn\" class=\"primary\" style=\"width:100%;\">Insert</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#extractBtn",
      "text": "Extract root",
      "attributes": {},
      "evidence": [
        "<button id=\"extractBtn\" class=\"small\">Extract root</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#peekBtn",
      "text": "Peek root",
      "attributes": {},
      "evidence": [
        "<button id=\"peekBtn\" class=\"small\">Peek root</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {},
      "evidence": [
        "<button id=\"clearBtn\" class=\"small\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#buildBtn",
      "text": "Build heap",
      "attributes": {},
      "evidence": [
        "<button id=\"buildBtn\" class=\"small\">Build heap</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randBtn",
      "text": "Random",
      "attributes": {},
      "evidence": [
        "<button id=\"randBtn\" class=\"small\">Random</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#heapSortBtn",
      "text": "Heap sort",
      "attributes": {},
      "evidence": [
        "<button id=\"heapSortBtn\" class=\"small\">Heap sort</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#visualSortBtn",
      "text": "Visualize sort",
      "attributes": {},
      "evidence": [
        "<button id=\"visualSortBtn\" class=\"small\">Visualize sort</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#toggleAnim",
      "text": "Animate: ON",
      "attributes": {},
      "evidence": [
        "<button id=\"toggleAnim\" class=\"small\">Animate: ON</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBtn",
      "text": "Step Mode",
      "attributes": {},
      "evidence": [
        "<button id=\"stepBtn\" class=\"small\">Step Mode</button>"
      ]
    },
    {
      "type": "select",
      "selector": "#type",
      "text": "Type",
      "attributes": {},
      "evidence": [
        "<select id=\"type\">"
      ]
    },
    {
      "type": "input",
      "selector": "#value",
      "text": "Value to insert",
      "attributes": {
        "type": "number"
      },
      "evidence": [
        "<input id=\"value\" type=\"number\" value=\"7\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#listInput",
      "text": "e.g. 5,3,8,1,9",
      "attributes": {
        "type": "text",
        "placeholder": "e.g. 5,3,8,1,9"
      },
      "evidence": [
        "<input id=\"listInput\" type=\"text\" placeholder=\"e.g. 5,3,8,1,9\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "Swap speed",
      "attributes": {
        "type": "range",
        "min": "50",
        "max": "1200",
        "value": "360"
      },
      "evidence": [
        "<input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" value=\"360\" style=\"flex:1\" />"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 14,
    "detected_components": [
      {
        "type": "button",
        "selector": "#insertBtn",
        "text": "Insert",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#extractBtn",
        "text": "Extract root",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#peekBtn",
        "text": "Peek root",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#clearBtn",
        "text": "Clear",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#buildBtn",
        "text": "Build heap",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#randBtn",
        "text": "Random",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#heapSortBtn",
        "text": "Heap sort",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#visualSortBtn",
        "text": "Visualize sort",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#toggleAnim",
        "text": "Animate: ON",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#stepBtn",
        "text": "Step Mode",
        "attributes": {}
      },
      {
        "type": "select",
        "selector": "#type",
        "text": "Type",
        "attributes": {}
      },
      {
        "type": "input",
        "selector": "#value",
        "text": "Value to insert",
        "attributes": {
          "type": "number"
        }
      },
      {
        "type": "input",
        "selector": "#listInput",
        "text": "e.g. 5,3,8,1,9",
        "attributes": {
          "type": "text",
          "placeholder": "e.g. 5,3,8,1,9"
        }
      },
      {
        "type": "input",
        "selector": "#speed",
        "text": "Swap speed",
        "attributes": {
          "type": "range",
          "min": "50",
          "max": "1200",
          "value": "360"
        }
      }
    ],
    "detected_event_handlers_count": 14,
    "detected_event_handlers": [
      "insertBtn.addEventListener('click', async () => {",
      "extractBtn.addEventListener('click', async () => {",
      "peekBtn.addEventListener('click', () => {",
      "clearBtn.addEventListener('click', () => {",
      "buildBtn.addEventListener('click', async () => {",
      "randBtn.addEventListener('click', async () => {",
      "heapSortBtn.addEventListener('click', () => {",
      "visualSortBtn.addEventListener('click', async () => {",
      "toggleAnim.addEventListener('click', () => {",
      "stepBtn.addEventListener('click', () => {",
      "typeSel.addEventListener('change', () => {"
    ],
    "extracted_states_count": 3,
    "extracted_transitions_count": 9,
    "extraction_confidence": 1,
    "notes": [
      "All interactive elements and their behaviors were captured.",
      "State transitions are based on user actions and heap operations.",
      "Heap visualizer provides clear feedback on operations."
    ]
  }
}