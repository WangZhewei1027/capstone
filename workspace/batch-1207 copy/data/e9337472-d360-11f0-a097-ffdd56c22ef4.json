{
  "id": "e9337472-d360-11f0-a097-ffdd56c22ef4",
  "timestamp": "2025-12-07T11:39:16.998Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Bubble Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#3b82f6;\n      --muted:#94a3b8;\n      --good:#10b981;\n      --warn:#f59e0b;\n      --bad:#ef4444;\n      --glass: rgba(255,255,255,0.03);\n    }\n    html,body { height:100%; margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial; background:linear-gradient(180deg,#071022 0%, #0b1220 60%); color:#e6eef8; }\n    .app { max-width:1100px; margin:18px auto; padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow: 0 6px 30px rgba(2,6,23,0.6); }\n    header { display:flex; gap:16px; align-items:center; margin-bottom:12px; }\n    h1 { font-size:20px; margin:0; letter-spacing:0.2px; }\n    .controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:12px; }\n    .control { background:var(--glass); padding:8px 10px; border-radius:10px; display:flex; gap:8px; align-items:center; }\n    label { font-size:13px; color:var(--muted); display:flex; gap:8px; align-items:center; }\n    input[type=range] { accent-color: var(--accent); }\n    button { background:transparent; border:1px solid rgba(255,255,255,0.06); color:inherit; padding:8px 10px; border-radius:8px; cursor:pointer; }\n    button.primary { background:linear-gradient(90deg,var(--accent),#6ee7b7); color:#032; font-weight:600; border:none; }\n    button:disabled { opacity:0.45; cursor:not-allowed; }\n    .layout { display:grid; grid-template-columns: 1fr 360px; gap:14px; align-items:start; }\n    .visual { background:rgba(255,255,255,0.02); border-radius:10px; padding:14px; min-height:320px; position:relative; overflow:hidden; }\n    .bars { position:relative; height:320px; width:100%; display:block; background:linear-gradient(180deg, transparent, rgba(255,255,255,0.01)); border-radius:8px; }\n    .bar { position:absolute; bottom:8px; background:linear-gradient(180deg, var(--accent), rgba(59,130,246,0.6)); border-radius:6px 6px 4px 4px; transition: left 250ms ease, height 250ms ease, background-color 150ms; display:flex; align-items:flex-end; justify-content:center; color:rgba(255,255,255,0.9); font-size:12px; box-shadow: 0 4px 18px rgba(3,7,18,0.6); }\n    .bar.small { font-size:11px; }\n    .bar .val { padding:6px 4px 4px 4px; background:rgba(0,0,0,0.18); border-radius:4px; transform:translateY(6px); }\n    .bar.compare { background:linear-gradient(180deg,var(--warn), rgba(245,158,11,0.5)); }\n    .bar.swap { background:linear-gradient(180deg,var(--bad), rgba(239,68,68,0.45)); }\n    .bar.sorted { background:linear-gradient(180deg,var(--good), rgba(16,185,129,0.45)); }\n    .sidebar { background:rgba(255,255,255,0.02); border-radius:10px; padding:12px; min-height:320px; display:flex; flex-direction:column; gap:12px; }\n    .stats { display:flex; gap:8px; flex-wrap:wrap; }\n    .stat { background:rgba(255,255,255,0.03); padding:8px 10px; border-radius:8px; min-width:110px; text-align:center; }\n    .stat .num { font-size:18px; font-weight:700; }\n    pre { background:#061025; padding:10px; border-radius:8px; overflow:auto; font-size:13px; color:#9fb4d8; margin:0; line-height:1.5; }\n    .code-line { padding:4px 6px; border-radius:6px; }\n    .code-line.active { background:rgba(99,102,241,0.12); color:#e7f0ff; }\n    .footer { display:flex; justify-content:space-between; gap:12px; align-items:center; margin-top:10px; color:var(--muted); font-size:13px; }\n    .small { font-size:13px; color:var(--muted); }\n    .row { display:flex; gap:8px; align-items:center; }\n    .mode-toggle { display:flex; gap:6px; }\n    .mode-toggle button { padding:6px 8px; font-size:13px; }\n    .label-compact { font-size:13px; color:var(--muted); }\n    @media (max-width:900px){\n      .layout { grid-template-columns: 1fr; }\n      .sidebar { order:2; }\n      .visual { order:1; }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\" role=\"application\" aria-label=\"Bubble Sort Visualizer\">\n    <header>\n      <div>\n        <h1>Bubble Sort Visualizer</h1>\n        <div class=\"small\">Interactive demonstration of the Bubble Sort algorithm (step-by-step & animated)</div>\n      </div>\n    </header>\n\n    <div class=\"controls\">\n      <div class=\"control\">\n        <label><span class=\"label-compact\">Array size</span>\n          <input id=\"sizeRange\" type=\"range\" min=\"5\" max=\"80\" value=\"30\" />\n        </label>\n      </div>\n\n      <div class=\"control\">\n        <label><span class=\"label-compact\">Speed</span>\n          <input id=\"speedRange\" type=\"range\" min=\"10\" max=\"1000\" step=\"10\" value=\"200\" />\n        </label>\n      </div>\n\n      <div class=\"control\">\n        <label><span class=\"label-compact\">Order</span>\n          <select id=\"orderSelect\" style=\"background:transparent; color:inherit; border:none; outline:none;\">\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n        </label>\n      </div>\n\n      <div class=\"control\">\n        <button id=\"randomBtn\">Randomize</button>\n        <button id=\"sortedBtn\">Nearly Sorted</button>\n      </div>\n\n      <div class=\"control\">\n        <button id=\"startBtn\" class=\"primary\">Run</button>\n        <button id=\"stepBtn\">Step</button>\n        <button id=\"pauseBtn\" disabled>Pause</button>\n        <button id=\"resetBtn\">Reset</button>\n      </div>\n    </div>\n\n    <div class=\"layout\">\n      <div class=\"visual\" aria-hidden=\"false\">\n        <div class=\"bars\" id=\"barsContainer\" aria-label=\"Array bars\"></div>\n      </div>\n\n      <aside class=\"sidebar\" aria-label=\"Details and controls\">\n        <div class=\"stats\">\n          <div class=\"stat\">\n            <div class=\"small\">Comparisons</div>\n            <div id=\"compCount\" class=\"num\">0</div>\n          </div>\n          <div class=\"stat\">\n            <div class=\"small\">Swaps</div>\n            <div id=\"swapCount\" class=\"num\">0</div>\n          </div>\n          <div class=\"stat\">\n            <div class=\"small\">Steps</div>\n            <div id=\"stepCount\" class=\"num\">0</div>\n          </div>\n        </div>\n\n        <div>\n          <div class=\"small\" style=\"margin-bottom:6px;\">Pseudocode</div>\n          <pre id=\"codeBlock\" style=\"height:210px;\">\n<div class=\"code-line\" data-line=\"1\">1. for end = n - 1 down to 1:</div>\n<div class=\"code-line\" data-line=\"2\">2. &nbsp;&nbsp; for i = 0 to end - 1:</div>\n<div class=\"code-line\" data-line=\"3\">3. &nbsp;&nbsp;&nbsp;&nbsp; if arr[i] > arr[i+1]:</div>\n<div class=\"code-line\" data-line=\"4\">4. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; swap(arr[i], arr[i+1])</div>\n<div class=\"code-line\" data-line=\"5\">5. &nbsp;&nbsp; mark arr[end] as sorted</div>\n<div class=\"code-line\" data-line=\"6\">6. end</div>\n</pre>\n        </div>\n\n        <div style=\"margin-top:auto;\">\n          <div class=\"small\" style=\"margin-bottom:6px;\">Notes</div>\n          <div class=\"small\" style=\"color:var(--muted)\">Bubble sort repeatedly compares adjacent items and swaps them if they are in the wrong order. This visualization highlights comparisons (orange), swaps (red), and elements that are already sorted (green).</div>\n        </div>\n      </aside>\n    </div>\n\n    <div class=\"footer\">\n      <div class=\"small\">Array elements are visualized as vertical bars (height ∝ value). Use Step to advance one compare/swap; Run to animate continuously.</div>\n      <div class=\"small\">Made with plain JavaScript — educational demo</div>\n    </div>\n  </div>\n\n  <script>\n    // Bubble Sort Visualizer - Single-file implementation\n    (function(){\n      // DOM refs\n      const barsContainer = document.getElementById('barsContainer');\n      const sizeRange = document.getElementById('sizeRange');\n      const speedRange = document.getElementById('speedRange');\n      const orderSelect = document.getElementById('orderSelect');\n      const randomBtn = document.getElementById('randomBtn');\n      const sortedBtn = document.getElementById('sortedBtn');\n      const startBtn = document.getElementById('startBtn');\n      const pauseBtn = document.getElementById('pauseBtn');\n      const stepBtn = document.getElementById('stepBtn');\n      const resetBtn = document.getElementById('resetBtn');\n      const compCountEl = document.getElementById('compCount');\n      const swapCountEl = document.getElementById('swapCount');\n      const stepCountEl = document.getElementById('stepCount');\n      const codeLines = Array.from(document.querySelectorAll('.code-line'));\n\n      let array = [];\n      let elements = []; // objects {value, id}\n      let domMap = new Map(); // id -> element DOM\n      let running = false;\n      let paused = false;\n      let generator = null;\n      let animationPromise = null;\n      let compCount = 0, swapCount = 0, stepCount = 0;\n      let initialElements = null;\n\n      // utility id generator\n      let nextId = 1;\n      function genId(){ return nextId++; }\n\n      // Create initial random array\n      function createRandomArray(n){\n        const arr = [];\n        for(let i=0;i<n;i++){\n          arr.push(Math.floor(Math.random()*100)+1);\n        }\n        return arr;\n      }\n      function createNearlySorted(n){\n        const arr = [];\n        for(let i=0;i<n;i++) arr.push(Math.floor((i+1)/n*100)+1);\n        // perform a few random swaps\n        for(let k=0;k<Math.max(1, Math.floor(n*0.06)); k++){\n          const i = Math.floor(Math.random()*n);\n          const j = Math.floor(Math.random()*n);\n          const tmp = arr[i]; arr[i]=arr[j]; arr[j]=tmp;\n        }\n        return arr;\n      }\n\n      // Build DOM bars for given values\n      function buildBarsFromValues(values){\n        nextId = 1;\n        elements = values.map(v => ({ value: v, id: genId() }));\n        initialElements = elements.map(e => ({...e}));\n        renderBars();\n        resetStats();\n      }\n\n      function resetStats(){\n        compCount = 0;\n        swapCount = 0;\n        stepCount = 0;\n        updateStats();\n      }\n\n      function updateStats(){\n        compCountEl.textContent = compCount;\n        swapCountEl.textContent = swapCount;\n        stepCountEl.textContent = stepCount;\n      }\n\n      function renderBars(){\n        // Clear\n        barsContainer.innerHTML = '';\n        domMap.clear();\n        const n = elements.length;\n        if(n === 0) return;\n        // compute layout\n        const containerWidth = barsContainer.clientWidth || barsContainer.offsetWidth || 800;\n        const gap = Math.max(2, Math.floor(containerWidth / (n*40)));\n        const barWidth = Math.max(6, Math.floor((containerWidth - (n+1)*gap) / n));\n        const maxVal = Math.max(...elements.map(e=>e.value));\n        // create bar DOMs\n        elements.forEach((el, idx) => {\n          const bar = document.createElement('div');\n          bar.className = 'bar';\n          if (elements.length > 40) bar.classList.add('small');\n          bar.style.width = barWidth + 'px';\n          const heightPercent = Math.max(6, Math.round(el.value / maxVal * 100));\n          const maxHeight = barsContainer.clientHeight - 12;\n          bar.style.height = Math.max(16, Math.round(maxHeight * heightPercent / 100)) + 'px';\n          bar.style.left = (gap + idx*(barWidth+gap)) + 'px';\n          bar.setAttribute('data-id', String(el.id));\n          bar.setAttribute('role','img');\n          bar.setAttribute('aria-label', 'Value '+el.value);\n          const valEl = document.createElement('div');\n          valEl.className = 'val';\n          valEl.textContent = el.value;\n          bar.appendChild(valEl);\n          barsContainer.appendChild(bar);\n          domMap.set(el.id, bar);\n        });\n      }\n\n      // helper to set bar state (compare, swap, sorted)\n      function resetBarStyles(){\n        domMap.forEach(bar => {\n          bar.classList.remove('compare','swap','sorted');\n        });\n      }\n      function setCompare(i,j){\n        resetBarStyles();\n        const bi = domMap.get(elements[i].id);\n        const bj = domMap.get(elements[j].id);\n        if(bi) bi.classList.add('compare');\n        if(bj) bj.classList.add('compare');\n      }\n      function setSwap(i,j){\n        resetBarStyles();\n        const bi = domMap.get(elements[i].id);\n        const bj = domMap.get(elements[j].id);\n        if(bi) bi.classList.add('swap');\n        if(bj) bj.classList.add('swap');\n      }\n      function markSorted(index){\n        const b = domMap.get(elements[index].id);\n        if(b){\n          b.classList.remove('compare','swap');\n          b.classList.add('sorted');\n        }\n      }\n\n      // swap DOM elements visually by updating left positions and swapping elements array\n      function animateSwap(i,j, duration){\n        return new Promise(resolve => {\n          const e1 = elements[i], e2 = elements[j];\n          const b1 = domMap.get(e1.id), b2 = domMap.get(e2.id);\n          if(!b1 || !b2){\n            // fallback: swap values & rerender\n            const tmp = elements[i]; elements[i] = elements[j]; elements[j] = tmp;\n            renderBars();\n            setTimeout(resolve, duration);\n            return;\n          }\n          // swap positions in elements array\n          elements[i] = e2; elements[j] = e1;\n          // compute new lefts\n          const left1 = b1.style.left, left2 = b2.style.left;\n          // temporarily disable pointer events for smoother visuals\n          b1.style.transition = `left ${duration}ms ease, height ${Math.max(120,duration)}ms ease`;\n          b2.style.transition = `left ${duration}ms ease, height ${Math.max(120,duration)}ms ease`;\n          // swap DOM left values\n          b1.style.left = left2;\n          b2.style.left = left1;\n          // after animation, update domMap mapping (ids unchanged)\n          setTimeout(()=>{\n            // ensure bars are still mapped correctly (ids remain)\n            resolve();\n          }, duration + 20);\n        });\n      }\n\n      // Pseudocode highlighting\n      function highlightLine(lineNum){\n        codeLines.forEach(cl => {\n          if(Number(cl.getAttribute('data-line')) === lineNum) cl.classList.add('active');\n          else cl.classList.remove('active');\n        });\n      }\n\n      // Bubble sort generator: yields actions one-by-one\n      // Actions: {type:'compare', i, j}, {type:'swap', i, j}, {type:'markSorted', index}, {type:'done'}\n      function* bubbleSortGenerator(values, ascending=true){\n        const n = values.length;\n        // We'll operate on indices and yield control frequently so UI can animate each step.\n        // We'll simulate in terms of indices referencing the current elements array.\n        for(let end = n-1; end >= 1; end--){\n          for(let i=0;i<=end-1;i++){\n            yield { type:'line', line:2 };\n            yield { type:'compare', i:i, j:i+1 };\n            const a = values[i], b = values[i+1];\n            const shouldSwap = ascending ? (a > b) : (a < b);\n            if(shouldSwap){\n              yield { type:'line', line:4 };\n              yield { type:'swap', i:i, j:i+1 };\n              // perform swap in our local array so subsequent decisions reflect the change\n              const tmp = values[i]; values[i] = values[i+1]; values[i+1] = tmp;\n            }\n          }\n          yield { type:'markSorted', index: end };\n        }\n        yield { type:'markSorted', index: 0 };\n        yield { type:'done' };\n      }\n\n      // Controller for stepping through generator actions\n      async function handleAction(action, delay){\n        stepCount++;\n        updateStats();\n        if(action.type === 'line'){\n          highlightLine(action.line);\n          return;\n        }\n        if(action.type === 'compare'){\n          compCount++;\n          updateStats();\n          highlightLine(3);\n          setCompare(action.i, action.j);\n          // small visual delay to observe comparison\n          if(delay>0) await sleep(delay);\n        } else if(action.type === 'swap'){\n          swapCount++;\n          updateStats();\n          setSwap(action.i, action.j);\n          // animate swap visually using animateSwap(duration)\n          await animateSwap(action.i, action.j, Math.max(60, delay));\n          // small pause after swap\n          await sleep(Math.max(20, Math.floor(delay*0.15)));\n        } else if(action.type === 'markSorted'){\n          markSorted(action.index);\n          // tiny delay\n          if(delay>0) await sleep(Math.min(120, delay));\n        } else if(action.type === 'done'){\n          resetBarStyles();\n          highlightLine(6);\n        }\n      }\n\n      function sleep(ms){ return new Promise(res => setTimeout(res, ms)); }\n\n      // Controller: run auto mode\n      async function runAuto(){\n        if(running) return;\n        running = true;\n        paused = false;\n        startBtn.disabled = true;\n        pauseBtn.disabled = false;\n        stepBtn.disabled = true;\n        sizeRange.disabled = true;\n        randomBtn.disabled = true;\n        sortedBtn.disabled = true;\n        orderSelect.disabled = true;\n        resetBtn.disabled = true;\n        // create a working copy of values for generator so it can compute swaps\n        const workingValues = elements.map(e=>e.value);\n        generator = bubbleSortGenerator(workingValues, orderSelect.value === 'asc');\n        let next = generator.next();\n        while(!next.done && running){\n          if(paused){\n            // wait until resumed or stopped\n            await new Promise(resolve => {\n              const check = setInterval(()=>{\n                if(!paused || !running) { clearInterval(check); resolve(); }\n              }, 50);\n            });\n          }\n          if(!running) break;\n          const action = next.value;\n          await handleAction(action, Number(speedRange.value));\n          next = generator.next();\n        }\n        running = false;\n        pauseBtn.disabled = true;\n        startBtn.disabled = false;\n        stepBtn.disabled = false;\n        sizeRange.disabled = false;\n        randomBtn.disabled = false;\n        sortedBtn.disabled = false;\n        orderSelect.disabled = false;\n        resetBtn.disabled = false;\n        if(generator){ // finalize\n          // ensure all marked sorted\n          elements.forEach((_, idx) => markSorted(idx));\n          highlightLine(6);\n        }\n      }\n\n      // Step-single action\n      async function stepOnce(){\n        if(running) return; // avoid stepping while auto-run\n        if(!generator){\n          // create generator from current elements values\n          const workingValues = elements.map(e=>e.value);\n          generator = bubbleSortGenerator(workingValues, orderSelect.value === 'asc');\n        }\n        const next = generator.next();\n        if(next.done) {\n          generator = null;\n          highlightLine(6);\n          elements.forEach((_, idx) => markSorted(idx));\n          return;\n        }\n        await handleAction(next.value, Number(speedRange.value));\n      }\n\n      // Pause/resume auto-run\n      function togglePause(){\n        if(!running) return;\n        paused = !paused;\n        pauseBtn.textContent = paused ? 'Resume' : 'Pause';\n      }\n\n      // Reset to initial unsorted array\n      function resetToInitial(){\n        running = false;\n        paused = false;\n        generator = null;\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        pauseBtn.textContent = 'Pause';\n        stepBtn.disabled = false;\n        sizeRange.disabled = false;\n        randomBtn.disabled = false;\n        sortedBtn.disabled = false;\n        orderSelect.disabled = false;\n        resetBtn.disabled = false;\n        if(initialElements) {\n          elements = initialElements.map(e=>({...e}));\n          renderBars();\n        }\n        resetStats();\n        highlightLine(1);\n      }\n\n      // UI event wiring\n      sizeRange.addEventListener('input', ()=>{\n        const n = Number(sizeRange.value);\n        buildBarsFromValues(createRandomArray(n));\n      });\n      randomBtn.addEventListener('click', ()=>{\n        const n = Number(sizeRange.value);\n        buildBarsFromValues(createRandomArray(n));\n      });\n      sortedBtn.addEventListener('click', ()=>{\n        const n = Number(sizeRange.value);\n        buildBarsFromValues(createNearlySorted(n));\n      });\n      startBtn.addEventListener('click', async ()=>{\n        if(running) return;\n        runAuto();\n      });\n      pauseBtn.addEventListener('click', ()=>{\n        togglePause();\n      });\n      stepBtn.addEventListener('click', async ()=>{\n        await stepOnce();\n      });\n      resetBtn.addEventListener('click', ()=>{\n        resetToInitial();\n      });\n\n      // initialize\n      (function init(){\n        const n = Number(sizeRange.value);\n        buildBarsFromValues(createRandomArray(n));\n        highlightLine(1);\n      })();\n\n      // Resize handler: recompute bar positions and sizes on window resize\n      let resizeTimer = null;\n      window.addEventListener('resize', ()=> {\n        if(resizeTimer) clearTimeout(resizeTimer);\n        resizeTimer = setTimeout(() => {\n          renderBars();\n        }, 120);\n      });\n\n      // Accessibility: keyboard shortcuts\n      window.addEventListener('keydown', (e)=>{\n        if(e.key === ' '){ e.preventDefault(); if(!running) startBtn.click(); else pauseBtn.click(); }\n        if(e.key === 'ArrowRight'){ e.preventDefault(); stepBtn.click(); }\n      });\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}