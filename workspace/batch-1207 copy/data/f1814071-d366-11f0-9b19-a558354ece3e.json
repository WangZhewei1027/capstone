{
  "id": "f1814071-d366-11f0-9b19-a558354ece3e",
  "timestamp": "2025-12-07T12:21:58.012Z",
  "model": "deepseek-chat",
  "status": "success",
  "question": "Heap Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Heap Sort Visualization</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .container {\n            background-color: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        h1 {\n            color: #333;\n            text-align: center;\n        }\n        .input-section {\n            margin-bottom: 20px;\n        }\n        input, button {\n            padding: 8px 12px;\n            margin: 5px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n        }\n        button {\n            background-color: #4CAF50;\n            color: white;\n            cursor: pointer;\n            transition: background-color 0.3s;\n        }\n        button:hover {\n            background-color: #45a049;\n        }\n        button:disabled {\n            background-color: #cccccc;\n            cursor: not-allowed;\n        }\n        .visualization {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            margin: 20px 0;\n        }\n        .array-container {\n            display: flex;\n            justify-content: center;\n            margin: 10px 0;\n        }\n        .array-element {\n            width: 50px;\n            height: 50px;\n            background-color: #e0e0e0;\n            margin: 5px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-weight: bold;\n            border-radius: 4px;\n            transition: all 0.3s;\n        }\n        .heap-container {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            margin: 20px 0;\n        }\n        .heap-level {\n            display: flex;\n            justify-content: center;\n            margin: 10px 0;\n        }\n        .heap-node {\n            width: 40px;\n            height: 40px;\n            background-color: #e0e0e0;\n            margin: 10px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-weight: bold;\n            border-radius: 50%;\n            transition: all 0.3s;\n        }\n        .controls {\n            display: flex;\n            justify-content: center;\n            margin: 20px 0;\n        }\n        .step-info {\n            text-align: center;\n            margin: 10px 0;\n            font-weight: bold;\n            height: 24px;\n        }\n        .active {\n            background-color: #ff9800 !important;\n            color: white;\n        }\n        .swapping {\n            background-color: #f44336 !important;\n            color: white;\n        }\n        .sorted {\n            background-color: #4CAF50 !important;\n            color: white;\n        }\n        .comparison {\n            background-color: #2196F3 !important;\n            color: white;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Heap Sort Visualization</h1>\n        \n        <div class=\"input-section\">\n            <label for=\"arrayInput\">Enter numbers (comma separated):</label>\n            <input type=\"text\" id=\"arrayInput\" value=\"64,34,25,12,22,11,90\">\n            <button id=\"generateRandom\">Generate Random Array</button>\n            <button id=\"startSort\">Start Sorting</button>\n            <button id=\"stepForward\" disabled>Step Forward</button>\n            <button id=\"reset\">Reset</button>\n        </div>\n        \n        <div class=\"step-info\" id=\"stepInfo\">Ready to sort!</div>\n        \n        <div class=\"visualization\">\n            <h3>Array:</h3>\n            <div class=\"array-container\" id=\"arrayContainer\"></div>\n        </div>\n        \n        <div class=\"heap-container\">\n            <h3>Heap Representation:</h3>\n            <div id=\"heapRepresentation\"></div>\n        </div>\n        \n        <div class=\"explanation\">\n            <h3>Heap Sort Algorithm:</h3>\n            <ol>\n                <li><strong>Build a max heap</strong> from the input data</li>\n                <li>The largest item is stored at the root of the heap</li>\n                <li>Replace it with the last item of the heap, then reduce the heap size by 1</li>\n                <li>Heapify the root of the tree</li>\n                <li>Repeat steps 2-4 until the heap size is 1</li>\n            </ol>\n            <p><strong>Time Complexity:</strong> O(n log n) in all cases</p>\n            <p><strong>Space Complexity:</strong> O(1) as it's an in-place sorting algorithm</p>\n        </div>\n    </div>\n\n    <script>\n        // Heap Sort implementation with visualization\n        class HeapSortVisualizer {\n            constructor() {\n                this.array = [];\n                this.steps = [];\n                this.currentStep = 0;\n                this.isSorting = false;\n                \n                this.initializeEventListeners();\n                this.reset();\n            }\n            \n            initializeEventListeners() {\n                document.getElementById('generateRandom').addEventListener('click', () => this.generateRandomArray());\n                document.getElementById('startSort').addEventListener('click', () => this.startSorting());\n                document.getElementById('stepForward').addEventListener('click', () => this.stepForward());\n                document.getElementById('reset').addEventListener('click', () => this.reset());\n            }\n            \n            generateRandomArray() {\n                const size = Math.floor(Math.random() * 10) + 5; // 5 to 14 elements\n                this.array = Array.from({length: size}, () => Math.floor(Math.random() * 100) + 1);\n                this.resetVisualization();\n            }\n            \n            reset() {\n                const input = document.getElementById('arrayInput').value;\n                this.array = input.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));\n                if (this.array.length === 0) {\n                    this.array = [64, 34, 25, 12, 22, 11, 90];\n                }\n                this.resetVisualization();\n            }\n            \n            resetVisualization() {\n                this.steps = [];\n                this.currentStep = 0;\n                this.isSorting = false;\n                document.getElementById('stepForward').disabled = false;\n                document.getElementById('stepInfo').textContent = 'Ready to sort!';\n                this.renderArray();\n                this.renderHeap();\n            }\n            \n            startSorting() {\n                this.resetVisualization();\n                this.isSorting = true;\n                this.heapSort([...this.array]);\n                document.getElementById('stepInfo').textContent = 'Sorting started. Use Step Forward to see each step.';\n            }\n            \n            stepForward() {\n                if (this.currentStep < this.steps.length) {\n                    const step = this.steps[this.currentStep];\n                    this.visualizeStep(step);\n                    this.currentStep++;\n                    \n                    if (this.currentStep === this.steps.length) {\n                        document.getElementById('stepInfo').textContent = 'Sorting completed!';\n                        document.getElementById('stepForward').disabled = true;\n                    }\n                }\n            }\n            \n            heapSort(array) {\n                const n = array.length;\n                this.steps.push({type: 'start', array: [...array], message: 'Starting Heap Sort'});\n                \n                // Build a max heap\n                for (let i = Math.floor(n / 2) - 1; i >= 0; i--) {\n                    this.heapify(array, n, i);\n                }\n                \n                // Extract elements from heap one by one\n                for (let i = n - 1; i > 0; i--) {\n                    // Move current root to end\n                    [array[0], array[i]] = [array[i], array[0]];\n                    this.steps.push({\n                        type: 'swap',\n                        array: [...array],\n                        indices: [0, i],\n                        message: `Swapped root (${array[i]}) with last element (${array[0]})`\n                    });\n                    \n                    // Call heapify on the reduced heap\n                    this.heapify(array, i, 0);\n                }\n                \n                this.steps.push({type: 'end', array: [...array], message: 'Sorting completed!'});\n            }\n            \n            heapify(array, n, i) {\n                let largest = i;\n                const left = 2 * i + 1;\n                const right = 2 * i + 2;\n                \n                this.steps.push({\n                    type: 'compare',\n                    array: [...array],\n                    indices: [i, left, right],\n                    message: `Comparing node ${array[i]} at index ${i} with its children`\n                });\n                \n                // If left child is larger than root\n                if (left < n && array[left] > array[largest]) {\n                    largest = left;\n                }\n                \n                // If right child is larger than largest so far\n                if (right < n && array[right] > array[largest]) {\n                    largest = right;\n                }\n                \n                // If largest is not root\n                if (largest !== i) {\n                    [array[i], array[largest]] = [array[largest], array[i]];\n                    this.steps.push({\n                        type: 'swap',\n                        array: [...array],\n                        indices: [i, largest],\n                        message: `Swapped ${array[largest]} with ${array[i]} to maintain heap property`\n                    });\n                    \n                    // Recursively heapify the affected sub-tree\n                    this.heapify(array, n, largest);\n                }\n            }\n            \n            visualizeStep(step) {\n                document.getElementById('stepInfo').textContent = step.message;\n                this.array = step.array;\n                this.renderArray(step);\n                this.renderHeap(step);\n            }\n            \n            renderArray(step = null) {\n                const container = document.getElementById('arrayContainer');\n                container.innerHTML = '';\n                \n                this.array.forEach((value, index) => {\n                    const element = document.createElement('div');\n                    element.className = 'array-element';\n                    element.textContent = value;\n                    \n                    if (step) {\n                        if (step.type === 'swap' && step.indices.includes(index)) {\n                            element.classList.add('swapping');\n                        } else if (step.type === 'compare' && step.indices.includes(index)) {\n                            element.classList.add('comparison');\n                        }\n                    }\n                    \n                    container.appendChild(element);\n                });\n            }\n            \n            renderHeap(step = null) {\n                const container = document.getElementById('heapRepresentation');\n                container.innerHTML = '';\n                \n                if (this.array.length === 0) return;\n                \n                // Calculate heap levels\n                const levels = [];\n                let level = 0;\n                let nodesInLevel = 0;\n                const maxNodesInLevel = Math.pow(2, level);\n                \n                for (let i = 0; i < this.array.length; i++) {\n                    if (nodesInLevel === 0) {\n                        levels[level] = [];\n                    }\n                    \n                    levels[level].push({value: this.array[i], index: i});\n                    nodesInLevel++;\n                    \n                    if (nodesInLevel === maxNodesInLevel) {\n                        level++;\n                        nodesInLevel = 0;\n                    }\n                }\n                \n                // Render heap levels\n                levels.forEach((levelNodes, levelIndex) => {\n                    const levelDiv = document.createElement('div');\n                    levelDiv.className = 'heap-level';\n                    \n                    levelNodes.forEach(node => {\n                        const nodeDiv = document.createElement('div');\n                        nodeDiv.className = 'heap-node';\n                        nodeDiv.textContent = node.value;\n                        \n                        if (step) {\n                            if (step.type === 'swap' && step.indices.includes(node.index)) {\n                                nodeDiv.classList.add('swapping');\n                            } else if (step.type === 'compare' && step.indices.includes(node.index)) {\n                                nodeDiv.classList.add('comparison');\n                            }\n                        }\n                        \n                        levelDiv.appendChild(nodeDiv);\n                    });\n                    \n                    container.appendChild(levelDiv);\n                });\n            }\n        }\n        \n        // Initialize the visualizer when the page loads\n        document.addEventListener('DOMContentLoaded', () => {\n            new HeapSortVisualizer();\n        });\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Heap Sort"
    }
  ],
  "topic": "Heap Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}