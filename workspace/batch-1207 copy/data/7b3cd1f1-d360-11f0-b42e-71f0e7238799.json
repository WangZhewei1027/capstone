{
  "id": "7b3cd1f1-d360-11f0-b42e-71f0e7238799",
  "timestamp": "2025-12-07T11:34:08.221Z",
  "model": "gpt-4o-mini",
  "status": "success",
  "question": "K-Means Clustering",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>K-Means Clustering Visualization</title>\n    <style>\n        canvas {\n            border: 1px solid black;\n            margin: 20px;\n        }\n    </style>\n</head>\n<body>\n    <h1>K-Means Clustering Demo</h1>\n    <p>Click on the canvas to generate random points and run K-Means clustering.</p>\n    <canvas id=\"canvas\" width=\"800\" height=\"600\"></canvas>\n    <button id=\"kmeansButton\">Run K-Means (K=3)</button>\n    <script>\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n\n        let points = [];\n        const k = 3; // Number of clusters\n\n        canvas.addEventListener('click', (e) => {\n            const rect = canvas.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            points.push({ x, y });\n            drawPoints();\n        });\n\n        function drawPoints() {\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            ctx.fillStyle = 'black';\n            points.forEach(point => {\n                ctx.beginPath();\n                ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);\n                ctx.fill();\n            });\n        }\n\n        function getRandomCentroids() {\n            let centroids = [];\n            for (let i = 0; i < k; i++) {\n                centroids.push({\n                    x: Math.random() * canvas.width,\n                    y: Math.random() * canvas.height\n                });\n            }\n            return centroids;\n        }\n\n        function assignClusters(points, centroids) {\n            points.forEach(point => {\n                let closestIndex = 0;\n                let closestDistance = Infinity;\n                centroids.forEach((centroid, index) => {\n                    const distance = Math.sqrt(Math.pow(point.x - centroid.x, 2) + Math.pow(point.y - centroid.y, 2));\n                    if (distance < closestDistance) {\n                        closestDistance = distance;\n                        closestIndex = index;\n                    }\n                });\n                point.cluster = closestIndex;\n            });\n        }\n\n        function updateCentroids(points) {\n            const newCentroids = Array.from({ length: k }, () => ({ x: 0, y: 0, count: 0 }));\n            points.forEach(point => {\n                newCentroids[point.cluster].x += point.x;\n                newCentroids[point.cluster].y += point.y;\n                newCentroids[point.cluster].count++;\n            });\n            return newCentroids.map(centroid => {\n                if (centroid.count > 0) {\n                    return { x: centroid.x / centroid.count, y: centroid.y / centroid.count };\n                } else {\n                    return { x: Math.random() * canvas.width, y: Math.random() * canvas.height };\n                }\n            });\n        }\n\n        function drawCentroids(centroids) {\n            ctx.fillStyle = 'red';\n            centroids.forEach(centroid => {\n                ctx.beginPath();\n                ctx.arc(centroid.x, centroid.y, 8, 0, 2 * Math.PI);\n                ctx.fill();\n            });\n        }\n\n        function drawClusters(points) {\n            const colors = ['blue', 'green', 'orange'];\n            points.forEach(point => {\n                ctx.fillStyle = colors[point.cluster];\n                ctx.beginPath();\n                ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);\n                ctx.fill();\n            });\n        }\n\n        function kMeans() {\n            if (points.length === 0) return;\n            let centroids = getRandomCentroids();\n\n            for (let i = 0; i < 10; i++) { // Limit iterations to 10\n                assignClusters(points, centroids);\n                centroids = updateCentroids(points);\n            }\n\n            drawClusters(points);\n            drawCentroids(centroids);\n        }\n\n        document.getElementById('kmeansButton').addEventListener('click', () => {\n            kMeans();\n        });\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "K-Means Clustering"
    }
  ],
  "topic": "K-Means Clustering",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}