{
  "id": "d79c7990-d361-11f0-8438-11a56595a476",
  "timestamp": "2025-12-07T11:44:27.246Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Union-Find (Disjoint Set)",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Union-Find (Disjoint Set) Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f7f9fc;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  #controls {\n    margin-bottom: 20px;\n    display: flex; \n    flex-wrap: wrap;\n    gap: 10px;\n    justify-content: center;\n  }\n  label {\n    margin-right: 5px;\n  }\n  button {\n    cursor: pointer;\n    padding: 6px 12px;\n    font-size: 14px;\n  }\n  input[type=number] {\n    width: 50px;\n    padding: 4px;\n  }\n  #setsContainer {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 15px;\n    margin-top: 20px;\n  }\n  .set {\n    border: 2px solid #0077cc;\n    border-radius: 12px;\n    padding: 12px 15px;\n    background: white;\n    min-width: 60px;\n    text-align: center;\n    user-select: none;\n    box-shadow: 0 2px 6px rgba(0,0,0,0.1);\n    position: relative;\n  }\n  .set .representative {\n    font-weight: bold;\n    font-size: 18px;\n    color: #004a99;\n  }\n  .set .elements {\n    margin-top: 8px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px;\n    justify-content: center;\n  }\n  .element {\n    background: #0077cc;\n    color: white;\n    font-weight: bold;\n    border-radius: 50%;\n    width: 28px;\n    height: 28px;\n    line-height: 28px;\n    user-select: none;\n  }\n  #info {\n    margin-top: 20px;\n    max-width: 600px;\n    margin-left: auto;\n    margin-right: auto;\n    background: #e1f0ff;\n    padding: 12px;\n    border-radius: 8px;\n    font-size: 14px;\n    color: #004a99;\n  }\n  #log {\n    max-height: 150px;\n    overflow-y: auto;\n    background: #fff;\n    border: 1px solid #ddd;\n    font-size: 13px;\n    padding: 8px;\n    border-radius: 6px;\n    margin-top: 10px;\n    max-width: 600px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  #log p {\n    margin: 0 0 4px 0;\n  }\n</style>\n</head>\n<body>\n<h1>Union-Find (Disjoint Set) Structure Visualization</h1>\n\n<div id=\"controls\" aria-label=\"Controls for Union-Find operations\">\n  <div>\n    <label for=\"totalElements\">Total Elements:</label>\n    <input type=\"number\" id=\"totalElements\" min=\"1\" max=\"30\" value=\"10\" aria-describedby=\"totalElementsHelp\" />\n    <small id=\"totalElementsHelp\">(1 to 30)</small>\n  </div>\n  <button id=\"initializeBtn\" aria-label=\"Initialize the Union-Find structure\">Initialize</button>\n</div>\n\n<div id=\"unionControls\" style=\"display:none; justify-content:center; gap:10px; flex-wrap: wrap;\" aria-label=\"Union operation controls\">\n  <div>\n    <label for=\"unionA\">Union A:</label>\n    <input type=\"number\" id=\"unionA\" min=\"0\" value=\"0\" />\n  </div>\n  <div>\n    <label for=\"unionB\">Union B:</label>\n    <input type=\"number\" id=\"unionB\" min=\"0\" value=\"1\" />\n  </div>\n  <button id=\"unionBtn\" aria-label=\"Perform union operation\">Union</button>\n</div>\n\n<div id=\"findControls\" style=\"display:none; justify-content:center; gap:10px; flex-wrap: wrap;\" aria-label=\"Find operation controls\">\n  <div>\n    <label for=\"findElem\">Find Element:</label>\n    <input type=\"number\" id=\"findElem\" min=\"0\" value=\"0\" />\n  </div>\n  <button id=\"findBtn\" aria-label=\"Find set representative\">Find</button>\n</div>\n\n<div id=\"setsContainer\" aria-live=\"polite\" aria-atomic=\"true\" aria-label=\"Current sets\"></div>\n\n<div id=\"info\" aria-live=\"polite\" aria-atomic=\"true\">\n  <strong>Information:</strong> Initialize to create disjoint sets. Use Union to connect sets. Use Find to determine a set's representative.\n</div>\n\n<div id=\"log\" aria-live=\"polite\" aria-atomic=\"false\" aria-label=\"Operation log\"></div>\n\n<script>\n  class UnionFind {\n    constructor(n) {\n      this.count = n;\n      this.parent = Array(n);\n      this.size = Array(n);\n      for(let i = 0; i < n; i++) {\n        this.parent[i] = i;\n        this.size[i] = 1;\n      }\n    }\n\n    find(p) {\n      this._validate(p);\n      // path compression\n      let root = p;\n      while(root !== this.parent[root]) {\n        root = this.parent[root];\n      }\n      // compress path\n      while(p !== root) {\n        let next = this.parent[p];\n        this.parent[p] = root;\n        p = next;\n      }\n      return root;\n    }\n\n    union(p, q) {\n      this._validate(p);\n      this._validate(q);\n      let rootP = this.find(p);\n      let rootQ = this.find(q);\n      if(rootP === rootQ) return false;\n\n      // union by size\n      if(this.size[rootP] < this.size[rootQ]) {\n        this.parent[rootP] = rootQ;\n        this.size[rootQ] += this.size[rootP];\n      } else {\n        this.parent[rootQ] = rootP;\n        this.size[rootP] += this.size[rootQ];\n      }\n      this.count--;\n      return true;\n    }\n\n    connected(p, q) {\n      this._validate(p);\n      this._validate(q);\n      return this.find(p) === this.find(q);\n    }\n\n    _validate(p) {\n      if(p < 0 || p >= this.parent.length) {\n        throw new Error(\"Index \" + p + \" is not between 0 and \" + (this.parent.length-1));\n      }\n    }\n\n    getCount() {\n      return this.count;\n    }\n  }\n\n  // DOM elements\n  const totalElementsInput = document.getElementById('totalElements');\n  const initializeBtn = document.getElementById('initializeBtn');\n  const unionControls = document.getElementById('unionControls');\n  const findControls = document.getElementById('findControls');\n  const unionABInput = document.getElementById('unionA');\n  const unionBBInput = document.getElementById('unionB');\n  const unionBtn = document.getElementById('unionBtn');\n  const findElemInput = document.getElementById('findElem');\n  const findBtn = document.getElementById('findBtn');\n  const setsContainer = document.getElementById('setsContainer');\n  const infoBox = document.getElementById('info');\n  const logBox = document.getElementById('log');\n\n  let uf = null;\n\n  function log(msg) {\n    const p = document.createElement('p');\n    p.textContent = msg;\n    logBox.appendChild(p);\n    logBox.scrollTop = logBox.scrollHeight;\n  }\n\n  function clearLog() {\n    logBox.innerHTML = '';\n  }\n\n  function renderSets() {\n    setsContainer.innerHTML = '';\n\n    if(!uf) return;\n\n    // Create a map from root -> array of elements\n    const groups = new Map();\n    for(let i = 0; i < uf.parent.length; i++) {\n      const root = uf.find(i);\n      if(!groups.has(root)) {\n        groups.set(root, []);\n      }\n      groups.get(root).push(i);\n    }\n\n    // Sort keys for consistent order\n    const sortedRoots = Array.from(groups.keys()).sort((a,b) => a - b);\n\n    for(const root of sortedRoots) {\n      const setDiv = document.createElement('div');\n      setDiv.className = 'set';\n      setDiv.setAttribute('tabindex', '0'); // make it focusable for accessibility\n      setDiv.setAttribute('aria-label', `Set with representative ${root} containing elements: ${groups.get(root).join(', ')}`);\n\n      const repr = document.createElement('div');\n      repr.className = 'representative';\n      repr.textContent = `Rep: ${root}`;\n      setDiv.appendChild(repr);\n\n      const elemsDiv = document.createElement('div');\n      elemsDiv.className = 'elements';\n      for(const e of groups.get(root)) {\n        const elemSpan = document.createElement('span');\n        elemSpan.className = 'element';\n        elemSpan.textContent = e;\n        elemsDiv.appendChild(elemSpan);\n      }\n      setDiv.appendChild(elemsDiv);\n      setsContainer.appendChild(setDiv);\n    }\n    infoBox.textContent = `Total elements: ${uf.parent.length}, Number of sets: ${uf.getCount()}.`;\n  }\n\n  function validateElementInput(value, max) {\n    const n = Number(value);\n    if (isNaN(n) || !Number.isInteger(n)) return false;\n    if (n < 0 || n >= max) return false;\n    return true;\n  }\n\n  initializeBtn.addEventListener('click', () => {\n    const total = Number(totalElementsInput.value);\n    if(isNaN(total) || total < 1 || total > 30) {\n      alert('Please enter a number between 1 and 30 for total elements.');\n      return;\n    }\n    uf = new UnionFind(total);\n    infoBox.textContent = `Initialized ${total} disjoint sets. Each element is its own set.`;\n    clearLog();\n    log(`Initialized Union-Find structure with ${total} elements.`);\n    renderSets();\n    unionControls.style.display = 'flex';\n    findControls.style.display = 'flex';\n\n    unionABInput.max = total - 1;\n    unionBBInput.max = total - 1;\n    findElemInput.max = total - 1;\n\n    unionABInput.value = 0;\n    unionBBInput.value = total > 1 ? 1 : 0;\n    findElemInput.value = 0;\n  });\n\n  unionBtn.addEventListener('click', () => {\n    if(!uf) {\n      alert('Please initialize the structure first.');\n      return;\n    }\n    const a = Number(unionABInput.value);\n    const b = Number(unionBBInput.value);\n    if(!validateElementInput(a, uf.parent.length) || !validateElementInput(b, uf.parent.length)) {\n      alert(`Please enter valid element indices between 0 and ${uf.parent.length - 1}.`);\n      return;\n    }\n    if(a === b) {\n      alert('Cannot union the same element with itself.');\n      return;\n    }\n    \n    const connectedBefore = uf.connected(a,b);\n    const unionResult = uf.union(a,b);\n    if(unionResult) {\n      log(`Union(${a}, ${b}): merged sets.`);\n      infoBox.textContent = `Union performed: elements ${a} and ${b} are now connected. Total sets: ${uf.getCount()}.`;\n    } else {\n      log(`Union(${a}, ${b}): elements already connected.`);\n      infoBox.textContent = `Elements ${a} and ${b} are already in the same set. Total sets: ${uf.getCount()}.`;\n    }\n    renderSets();\n  });\n\n  findBtn.addEventListener('click', () => {\n    if(!uf) {\n      alert('Please initialize the structure first.');\n      return;\n    }\n    const x = Number(findElemInput.value);\n    if(!validateElementInput(x, uf.parent.length)) {\n      alert(`Please enter valid element index between 0 and ${uf.parent.length - 1}.`);\n      return;\n    }\n    const rep = uf.find(x);\n    log(`Find(${x}) -> Representative: ${rep}`);\n    infoBox.textContent = `Element ${x} belongs to the set with representative ${rep}.`;\n    renderSets();\n  });\n\n  // Initialize on load for convenience\n  initializeBtn.click();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Union-Find (Disjoint Set)"
    }
  ],
  "topic": "Union-Find (Disjoint Set)",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}