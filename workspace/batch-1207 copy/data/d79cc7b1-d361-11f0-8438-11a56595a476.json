{
  "id": "d79cc7b1-d361-11f0-8438-11a56595a476",
  "timestamp": "2025-12-07T11:44:01.446Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Quick Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title>Quick Sort Visualization</title>\n  <style>\n    body {\n      font-family: Arial, sans-serif;\n      margin: 2rem;\n      background: #f0f0f0;\n      color: #333;\n    }\n    h1 {\n      text-align: center;\n      margin-bottom: 1rem;\n    }\n    #inputSection {\n      text-align: center;\n      margin-bottom: 1rem;\n    }\n    #arrayInput {\n      width: 300px;\n      padding: 0.5rem;\n      font-size: 1rem;\n    }\n    #sortButton {\n      padding: 0.6rem 1.2rem;\n      font-size: 1rem;\n      margin-left: 0.5rem;\n      cursor: pointer;\n    }\n    #output {\n      max-width: 600px;\n      margin: 1rem auto;\n      background: white;\n      padding: 1rem;\n      box-shadow: 0 0 8px rgba(0,0,0,0.1);\n      border-radius: 5px;\n      font-family: monospace;\n      white-space: pre-wrap;\n    }\n    #bars {\n      display: flex;\n      justify-content: center;\n      align-items: flex-end;\n      height: 160px;\n      margin: 2rem auto;\n      max-width: 600px;\n    }\n    .bar {\n      margin: 0 2px;\n      background-color: steelblue;\n      width: 20px;\n      transition: background-color 0.3s ease, height 0.3s ease;\n      border-radius: 3px 3px 0 0;\n    }\n    .pivot {\n      background-color: #e63946 !important;\n    }\n    .comparing {\n      background-color: #f1c40f !important;\n    }\n    .swapped {\n      background-color: #2ecc71 !important;\n    }\n  </style>\n</head>\n<body>\n  <h1>Quick Sort Demonstration</h1>\n  <div id=\"inputSection\">\n    <input\n      type=\"text\"\n      id=\"arrayInput\"\n      placeholder=\"Enter numbers separated by commas\"\n      value=\"8,3,7,6,2,5,4,1\"\n    />\n    <button id=\"sortButton\">Sort</button>\n  </div>\n  <div id=\"bars\"></div>\n  <div id=\"output\"></div>\n\n  <script>\n    const arrayInput = document.getElementById(\"arrayInput\");\n    const sortButton = document.getElementById(\"sortButton\");\n    const barsContainer = document.getElementById(\"bars\");\n    const output = document.getElementById(\"output\");\n\n    // Delay helper\n    function delay(ms) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    // Render bars for the array\n    function renderBars(arr, highlight = {}) {\n      barsContainer.innerHTML = \"\";\n      const maxVal = Math.max(...arr);\n      arr.forEach((val, idx) => {\n        const bar = document.createElement(\"div\");\n        bar.classList.add(\"bar\");\n        bar.style.height = ((val / maxVal) * 100 + 20) + \"px\"; // min height 20px\n        if (highlight.pivot === idx) bar.classList.add(\"pivot\");\n        if (highlight.comparing && highlight.comparing.includes(idx))\n          bar.classList.add(\"comparing\");\n        if (highlight.swapped && highlight.swapped.includes(idx))\n          bar.classList.add(\"swapped\");\n        bar.title = val;\n        barsContainer.appendChild(bar);\n      });\n    }\n\n    // Quick sort with visualization and explanation text\n    async function quickSortVisual(arr, low, high) {\n      if (low < high) {\n        output.textContent += `Calling partition(arr, ${low}, ${high})\\n`;\n        // Partition and get pivot index\n        const pi = await partition(arr, low, high);\n        output.textContent += `Pivot is now at index ${pi} with value ${arr[pi]}\\n\\n`;\n        await quickSortVisual(arr, low, pi - 1);\n        await quickSortVisual(arr, pi + 1, high);\n      } else if (low === high) {\n        output.textContent += `Single element at index ${low} (${arr[low]}) - already sorted\\n\\n`;\n      }\n    }\n\n    async function partition(arr, low, high) {\n      let pivot = arr[high];\n      let i = low - 1;\n      output.textContent += `Pivot selected: arr[${high}] = ${pivot}\\n`;\n      renderBars(arr, { pivot: high });\n      await delay(1000);\n\n      for (let j = low; j < high; j++) {\n        output.textContent += `Compare arr[${j}] = ${arr[j]} with pivot ${pivot}\\n`;\n        renderBars(arr, { pivot: high, comparing: [j] });\n        await delay(700);\n\n        if (arr[j] < pivot) {\n          i++;\n          [arr[i], arr[j]] = [arr[j], arr[i]];\n          output.textContent += `Swap arr[${i}] and arr[${j}] -> [${arr.join(\", \")}]\\n`;\n          renderBars(arr, { pivot: high, swapped: [i, j] });\n          await delay(700);\n        }\n      }\n      // Place pivot in correct position\n      [arr[i + 1], arr[high]] = [arr[high], arr[i + 1]];\n      output.textContent += `Move pivot to correct position by swapping arr[${i + 1}] and arr[${high}] -> [${arr.join(\", \")}]\\n`;\n      renderBars(arr, { swapped: [i + 1, high] });\n      await delay(1000);\n      return i + 1;\n    }\n\n    sortButton.addEventListener(\"click\", async () => {\n      output.textContent = \"\";\n      let raw = arrayInput.value.trim();\n      if (!raw) {\n        alert(\"Please enter some numbers separated by commas.\");\n        return;\n      }\n      let arr = raw.split(\",\").map(x => Number(x.trim()));\n      if (arr.some(isNaN)) {\n        alert(\"Please enter valid numbers only.\");\n        return;\n      }\n      renderBars(arr);\n      output.textContent += `Starting array: [${arr.join(\", \")}]\\n\\n`;\n      sortButton.disabled = true;\n      arrayInput.disabled = true;\n      await quickSortVisual(arr, 0, arr.length - 1);\n      output.textContent += `Sorted array: [${arr.join(\", \")}]\\n\\n`;\n      renderBars(arr);\n      sortButton.disabled = false;\n      arrayInput.disabled = false;\n    });\n\n    // Initial render\n    (() => {\n      let arr = arrayInput.value.trim().split(\",\").map(x => Number(x.trim()));\n      renderBars(arr);\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Quick Sort"
    }
  ],
  "topic": "Quick Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}