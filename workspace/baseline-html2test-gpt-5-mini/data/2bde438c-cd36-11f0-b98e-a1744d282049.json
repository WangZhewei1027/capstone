{
  "id": "2bde438c-cd36-11f0-b98e-a1744d282049",
  "timestamp": "2025-11-29T15:17:02.722Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Binary Search",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<title>Binary Search Visualizer</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<style>\n  body { font-family: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial; margin: 18px; color: #111; background: #f7f8fb; }\n  h1 { margin: 0 0 8px 0; font-size: 20px; }\n  .controls, .visual, .info { background: white; border-radius: 8px; padding: 12px; box-shadow: 0 1px 3px rgba(16,24,40,0.06); margin-bottom: 12px; }\n  .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }\n  label { font-size: 13px; color: #333; }\n  input[type=\"text\"], input[type=\"number\"] { padding:6px 8px; border-radius:6px; border:1px solid #ddd; min-width: 160px; }\n  button { padding:8px 10px; border-radius:6px; border:1px solid #d0d7de; background:white; cursor:pointer; }\n  button.primary { background:#0b5fff; color:white; border-color:#0b5fff; }\n  button:disabled { opacity:0.5; cursor:not-allowed; }\n  .array { display:flex; gap:6px; margin-top:12px; flex-wrap:wrap; }\n  .cell { width:48px; height:48px; border-radius:6px; background:#f3f4f6; display:flex; flex-direction:column; align-items:center; justify-content:center; font-weight:600; color:#111; position:relative; border:2px solid transparent; transition: transform 140ms ease, background 140ms ease, border-color 140ms ease; }\n  .cell.index { font-weight:400; font-size:11px; color:#666; position:absolute; left:6px; top:4px; }\n  .cell.low { border-color:#16a34a; box-shadow: 0 6px 18px rgba(22,163,74,0.08); transform: translateY(-6px); }\n  .cell.high { border-color:#ef4444; box-shadow: 0 6px 18px rgba(239,68,68,0.08); transform: translateY(-6px); }\n  .cell.mid { border-color:#f59e0b; box-shadow: 0 6px 18px rgba(245,158,11,0.08); transform: translateY(-6px); }\n  .cell.compare { background:#fff7ed; }\n  .cell.found { background:#ecfdf5; border-color:#10b981; transform: translateY(-6px); }\n  .legend { display:flex; gap:8px; margin-top:8px; font-size:13px; color:#444; }\n  .legend span { display:flex; gap:6px; align-items:center; }\n  .box { width:12px; height:12px; border-radius:3px; display:inline-block; }\n  .lowbox { background:#16a34a; } .highbox { background:#ef4444; } .midbox { background:#f59e0b; } .foundbox{ background:#10b981; }\n  .log { max-height:180px; overflow:auto; background:#0f172a0d; padding:8px; border-radius:6px; margin-top:12px; font-family: monospace; font-size:13px; }\n  .code { background:#0b1220; color:#e6eef8; padding:8px; border-radius:6px; font-family: monospace; font-size:13px; white-space:pre; line-height:1.5; }\n  .code .line { display:block; padding:2px 6px; border-radius:4px; }\n  .code .hl { background: rgba(255,255,255,0.06); }\n  .stack { margin-top:8px; display:flex; gap:8px; align-items:flex-end; flex-wrap:wrap; }\n  .frame { border-radius:6px; padding:6px 8px; background:#eef2ff; color:#0f172a; min-width:80px; text-align:center; font-size:13px; }\n  .small { font-size:12px; color:#4b5563; }\n  .footer { font-size:13px; color:#444; display:flex; gap:8px; align-items:center; margin-top:8px; }\n  input[type=range] { -webkit-appearance: none; height:6px; background:#e6e9ef; border-radius:6px; }\n  input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width:14px; height:14px; background:#0b5fff; border-radius:50%; box-shadow:0 1px 3px rgba(11,95,255,0.3); }\n  .status { padding:8px 10px; border-radius:8px; background:#fff; border:1px solid #e6eef5; }\n</style>\n</head>\n<body>\n  <h1>Binary Search Visualizer</h1>\n\n  <div class=\"controls\">\n    <div class=\"row\">\n      <label>Array (comma separated numbers):</label>\n      <input id=\"arrayInput\" type=\"text\" value=\"1,3,5,7,9,11,13\" />\n      <label><input id=\"autoSort\" type=\"checkbox\" checked /> Auto-sort & unique</label>\n      <button id=\"genRandom\">Random (7)</button>\n    </div>\n    <div class=\"row\" style=\"margin-top:8px;\">\n      <label>Target value:</label>\n      <input id=\"targetInput\" type=\"number\" value=\"7\" />\n      <label style=\"margin-left:8px;\">Mode:</label>\n      <select id=\"modeSelect\">\n        <option value=\"iterative\">Iterative</option>\n        <option value=\"recursive\">Recursive (simulate stack)</option>\n      </select>\n      <button id=\"resetBtn\">Reset</button>\n      <button id=\"stepBtn\" class=\"primary\">Step</button>\n      <button id=\"runBtn\">Run</button>\n      <label style=\"margin-left:8px;\">Speed:</label>\n      <input id=\"speed\" type=\"range\" min=\"200\" max=\"2000\" step=\"100\" value=\"800\" title=\"ms per step\" />\n      <span id=\"speedVal\" class=\"small\">800ms</span>\n    </div>\n    <div class=\"footer\">\n      <div class=\"small\">Tip: Binary search requires a sorted array. If \"Auto-sort & unique\" is checked, input will be sorted & deduped automatically.</div>\n    </div>\n  </div>\n\n  <div class=\"visual\">\n    <div class=\"row\">\n      <div style=\"flex:1;\">\n        <div class=\"array\" id=\"arrayArea\"></div>\n        <div class=\"legend\">\n          <span><span class=\"box lowbox\"></span> low</span>\n          <span><span class=\"box highbox\"></span> high</span>\n          <span><span class=\"box midbox\"></span> mid (checking)</span>\n          <span><span class=\"box foundbox\"></span> found</span>\n        </div>\n      </div>\n      <div style=\"width:360px;\">\n        <div style=\"display:flex; gap:8px;\">\n          <div style=\"flex:1;\">\n            <div class=\"small\">Algorithm (Iterative)</div>\n            <div id=\"iterCode\" class=\"code\" style=\"margin-top:6px;\">\n              <span class=\"line\" data-line=\"1\">1  low = 0</span>\n              <span class=\"line\" data-line=\"2\">2  high = n - 1</span>\n              <span class=\"line\" data-line=\"3\">3  while low <= high:</span>\n              <span class=\"line\" data-line=\"4\">4      mid = (low + high) // 2</span>\n              <span class=\"line\" data-line=\"5\">5      if arr[mid] == target: return mid</span>\n              <span class=\"line\" data-line=\"6\">6      elif arr[mid] &lt; target: low = mid + 1</span>\n              <span class=\"line\" data-line=\"7\">7      else: high = mid - 1</span>\n              <span class=\"line\" data-line=\"8\">8  return -1</span>\n            </div>\n          </div>\n        </div>\n\n        <div style=\"margin-top:10px;\">\n          <div class=\"small\">Algorithm (Recursive)</div>\n          <div id=\"recCode\" class=\"code\" style=\"margin-top:6px;\">\n            <span class=\"line\" data-line=\"1\">1  function binarySearch(arr, low, high, target):</span>\n            <span class=\"line\" data-line=\"2\">2      if low &gt; high: return -1</span>\n            <span class=\"line\" data-line=\"3\">3      mid = (low + high) // 2</span>\n            <span class=\"line\" data-line=\"4\">4      if arr[mid] == target: return mid</span>\n            <span class=\"line\" data-line=\"5\">5      elif arr[mid] &lt; target:</span>\n            <span class=\"line\" data-line=\"6\">6          return binarySearch(arr, mid+1, high, target)</span>\n            <span class=\"line\" data-line=\"7\">7      else:</span>\n            <span class=\"line\" data-line=\"8\">8          return binarySearch(arr, low, mid-1, target)</span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row\" style=\"margin-top:12px;\">\n      <div style=\"flex:1\">\n        <div class=\"small\">Execution Log</div>\n        <div id=\"log\" class=\"log\"></div>\n      </div>\n      <div style=\"width:320px;\">\n        <div class=\"small\">Call Stack (recursive mode)</div>\n        <div id=\"stackArea\" class=\"stack\"></div>\n        <div id=\"status\" class=\"status\" style=\"margin-top:8px;\">Ready</div>\n      </div>\n    </div>\n  </div>\n\n<script>\n(function(){\n  // DOM elements\n  const arrayInput = document.getElementById('arrayInput');\n  const autoSort = document.getElementById('autoSort');\n  const genRandom = document.getElementById('genRandom');\n  const targetInput = document.getElementById('targetInput');\n  const modeSelect = document.getElementById('modeSelect');\n  const resetBtn = document.getElementById('resetBtn');\n  const stepBtn = document.getElementById('stepBtn');\n  const runBtn = document.getElementById('runBtn');\n  const arrayArea = document.getElementById('arrayArea');\n  const logEl = document.getElementById('log');\n  const iterCode = document.getElementById('iterCode');\n  const recCode = document.getElementById('recCode');\n  const stackArea = document.getElementById('stackArea');\n  const statusEl = document.getElementById('status');\n  const speedRange = document.getElementById('speed');\n  const speedVal = document.getElementById('speedVal');\n\n  let arr = [];\n  let target = null;\n  let state = null;\n  let intervalId = null;\n  let speed = parseInt(speedRange.value);\n\n  // CSS helpers\n  function clearCodeHighlights() {\n    iterCode.querySelectorAll('.line').forEach(l => l.classList.remove('hl'));\n    recCode.querySelectorAll('.line').forEach(l => l.classList.remove('hl'));\n  }\n\n  function hlIter(line) {\n    clearCodeHighlights();\n    const el = iterCode.querySelector('.line[data-line=\"'+line+'\"]');\n    if(el) el.classList.add('hl');\n  }\n  function hlRec(line) {\n    clearCodeHighlights();\n    const el = recCode.querySelector('.line[data-line=\"'+line+'\"]');\n    if(el) el.classList.add('hl');\n  }\n\n  // Parse input array\n  function parseArrayInput() {\n    let text = arrayInput.value.trim();\n    if(!text) { arr = []; return; }\n    let parts = text.split(',').map(s => s.trim()).filter(s=>s.length);\n    let nums = parts.map(s => {\n      let v = Number(s);\n      return isNaN(v) ? null : v;\n    }).filter(v => v !== null);\n    if(nums.length === 0) { arr = []; return; }\n    if(autoSort.checked) {\n      nums = Array.from(new Set(nums)).sort((a,b)=>a-b);\n    }\n    arr = nums;\n  }\n\n  function renderArray(highlights = {}) {\n    // highlights: {low: i, high: j, mid: k, compare: k, found: index}\n    arrayArea.innerHTML = '';\n    for(let i=0;i<arr.length;i++){\n      const cell = document.createElement('div');\n      cell.className = 'cell';\n      if(i===highlights.low) cell.classList.add('low');\n      if(i===highlights.high) cell.classList.add('high');\n      if(i===highlights.mid) cell.classList.add('mid');\n      if(i===highlights.compare) cell.classList.add('compare');\n      if(i===highlights.found) cell.classList.add('found');\n      const idx = document.createElement('div');\n      idx.className='index';\n      idx.textContent = i;\n      cell.appendChild(idx);\n      const val = document.createElement('div');\n      val.textContent = arr[i];\n      cell.appendChild(val);\n      arrayArea.appendChild(cell);\n    }\n  }\n\n  function log(...msgs) {\n    const line = document.createElement('div');\n    line.textContent = msgs.join(' ');\n    logEl.appendChild(line);\n    logEl.scrollTop = logEl.scrollHeight;\n  }\n\n  // State management for iterative\n  function initIterative() {\n    state = {\n      mode: 'iterative',\n      low: 0,\n      high: arr.length - 1,\n      mid: null,\n      done: false,\n      steps:0,\n      foundIndex: null\n    };\n    clearOutputs();\n    renderArray();\n    hlIter(1);\n    log(\"Iterative: initialized. low=0, high=\" + state.high);\n    statusEl.textContent = 'Ready (iterative)';\n    stackArea.innerHTML = '';\n  }\n\n  // State management for recursive (simulate stack)\n  function initRecursive() {\n    state = {\n      mode: 'recursive',\n      stack: [],\n      done: false,\n      steps: 0,\n      foundIndex: null\n    };\n    // push initial call\n    state.stack.push({low:0, high: arr.length - 1, state: 'enter', mid: null});\n    clearOutputs();\n    renderArray();\n    updateStackUI();\n    hlRec(1);\n    log(\"Recursive: push initial call: low=0, high=\" + (arr.length-1));\n    statusEl.textContent = 'Ready (recursive)';\n  }\n\n  function clearOutputs(){\n    logEl.innerHTML = '';\n    clearCodeHighlights();\n  }\n\n  // Step functions\n  function stepIterative() {\n    if(!state || state.mode !== 'iterative') return;\n    if(state.done) { log(\"Already finished.\"); return; }\n    // if start of algorithm highlight initialization lines\n    if(state.steps === 0) {\n      hlIter(2);\n      renderArray({low: state.low, high: state.high});\n      state.steps++;\n      return;\n    }\n\n    if(state.low > state.high) {\n      state.done = true;\n      state.foundIndex = -1;\n      renderArray();\n      hlIter(8);\n      log(\"Range empty: low (\"+state.low+\") > high (\"+state.high+\"). Not found.\");\n      statusEl.textContent = 'Not found';\n      return;\n    }\n\n    // compute mid\n    state.mid = Math.floor((state.low + state.high)/2);\n    hlIter(4);\n    renderArray({low:state.low, high:state.high, mid:state.mid, compare: state.mid});\n    log(\"Check mid=\"+state.mid+\" value=\"+arr[state.mid]);\n\n    // comparison step (one iteration)\n    setTimeout(()=> {\n      if(arr[state.mid] === target) {\n        state.done = true;\n        state.foundIndex = state.mid;\n        renderArray({found: state.mid});\n        hlIter(5);\n        log(\"Found target at index\", state.mid);\n        statusEl.textContent = 'Found at index ' + state.mid;\n      } else if(arr[state.mid] < target) {\n        hlIter(6);\n        log(\"arr[mid] < target -> move low to\", state.mid+1);\n        state.low = state.mid + 1;\n        renderArray({low:state.low, high:state.high});\n      } else {\n        hlIter(7);\n        log(\"arr[mid] > target -> move high to\", state.mid-1);\n        state.high = state.mid - 1;\n        renderArray({low:state.low, high:state.high});\n      }\n      state.steps++;\n      // if after update low>high and not done then next step will detect\n    }, 60);\n  }\n\n  function stepRecursive() {\n    if(!state || state.mode !== 'recursive') return;\n    if(state.done) { log(\"Already finished.\"); return; }\n    if(state.stack.length === 0) {\n      state.done = true;\n      if(state.foundIndex == null) {\n        state.foundIndex = -1;\n        log(\"Stack empty. Not found.\");\n        statusEl.textContent = 'Not found';\n      }\n      return;\n    }\n\n    const frame = state.stack[state.stack.length -1]; // peek\n    updateStackUI();\n    // If invalid range, pop and simulate return -1\n    if(frame.low > frame.high) {\n      hlRec(2);\n      log(\"Call: low=\"+frame.low+\", high=\"+frame.high+\" -> low>high, return -1\");\n      state.stack.pop();\n      updateStackUI();\n      state.steps++;\n      return;\n    }\n\n    if(frame.state === 'enter') {\n      // check low>high done above, now compute mid\n      frame.mid = Math.floor((frame.low + frame.high)/2);\n      frame.state = 'compare';\n      hlRec(3);\n      renderArray({low: frame.low, high: frame.high, mid: frame.mid, compare: frame.mid});\n      log(\"Call: low=\"+frame.low+\", high=\"+frame.high+\". mid=\"+frame.mid+\" (value=\"+arr[frame.mid]+\")\");\n      state.steps++;\n      return;\n    }\n\n    if(frame.state === 'compare') {\n      const mid = frame.mid;\n      hlRec(4);\n      if(arr[mid] === target) {\n        state.done = true;\n        state.foundIndex = mid;\n        renderArray({found: mid});\n        log(\"arr[mid] == target -> found at index \"+mid);\n        statusEl.textContent = 'Found at index ' + mid;\n        // clear the stack to indicate completion\n        state.stack = [];\n        updateStackUI();\n        state.steps++;\n        return;\n      } else if(arr[mid] < target) {\n        hlRec(5);\n        log(\"arr[mid] < target -> recurse right: low=\"+(mid+1)+\", high=\"+frame.high);\n        // push new frame for right half\n        state.stack.push({low: mid+1, high: frame.high, state: 'enter', mid: null});\n        updateStackUI();\n        state.steps++;\n        return;\n      } else {\n        hlRec(7);\n        log(\"arr[mid] > target -> recurse left: low=\"+frame.low+\", high=\"+(mid-1));\n        state.stack.push({low: frame.low, high: mid-1, state: 'enter', mid: null});\n        updateStackUI();\n        state.steps++;\n        return;\n      }\n    }\n  }\n\n  // Update recursive stack UI\n  function updateStackUI() {\n    stackArea.innerHTML = '';\n    state && state.stack && state.stack.forEach((f, idx) => {\n      const el = document.createElement('div');\n      el.className = 'frame';\n      el.innerHTML = \"<div>low=\"+f.low+\"</div><div>high=\"+f.high+\"</div>\" + (f.mid!==null?(\"<div class='small'>mid=\"+f.mid+\"</div>\"):\"\");\n      stackArea.appendChild(el);\n    });\n  }\n\n  // Run (auto) control\n  function runAuto() {\n    if(intervalId) {\n      clearInterval(intervalId);\n      intervalId = null;\n      runBtn.textContent = 'Run';\n      stepBtn.disabled = false;\n      resetBtn.disabled = false;\n      arrayInput.disabled = false;\n      targetInput.disabled = false;\n      modeSelect.disabled = false;\n      genRandom.disabled = false;\n      return;\n    }\n    runBtn.textContent = 'Pause';\n    stepBtn.disabled = false;\n    resetBtn.disabled = true;\n    arrayInput.disabled = true;\n    targetInput.disabled = true;\n    modeSelect.disabled = true;\n    genRandom.disabled = true;\n    intervalId = setInterval(() => {\n      if(state.mode === 'iterative') {\n        if(state.done) { runAuto(); return; }\n        stepIterative();\n        if(state.done) { runAuto(); }\n      } else {\n        if(state.done || state.stack.length===0) { runAuto(); return; }\n        stepRecursive();\n        if(state.done || state.stack.length===0) { runAuto(); }\n      }\n    }, speed);\n  }\n\n  // Reset\n  function resetAll() {\n    if(intervalId) { clearInterval(intervalId); intervalId=null; runBtn.textContent='Run'; }\n    parseArrayInput();\n    const t = Number(targetInput.value);\n    target = isNaN(t) ? null : t;\n    clearCodeHighlights();\n    if(modeSelect.value === 'iterative') initIterative();\n    else initRecursive();\n    stepBtn.disabled = false;\n    runBtn.disabled = false;\n    arrayInput.disabled = false;\n    targetInput.disabled = false;\n    genRandom.disabled = false;\n    statusEl.textContent = 'Ready';\n  }\n\n  // Event listeners\n  genRandom.addEventListener('click', ()=>{\n    const n = 7;\n    const values = new Set();\n    while(values.size < n) {\n      const v = Math.floor(Math.random()*41) - 10; // -10..30\n      values.add(v);\n    }\n    const arrVals = Array.from(values).sort((a,b)=>a-b);\n    arrayInput.value = arrVals.join(',');\n    parseArrayInput();\n    resetAll();\n  });\n\n  resetBtn.addEventListener('click', resetAll);\n\n  stepBtn.addEventListener('click', ()=>{\n    parseArrayInput();\n    const t = Number(targetInput.value);\n    target = isNaN(t) ? null : t;\n    if(target === null || arr.length===0) {\n      alert(\"Provide an array and a numeric target.\");\n      return;\n    }\n    if(!state) resetAll();\n    if(state.mode === 'iterative') stepIterative();\n    else stepRecursive();\n  });\n\n  runBtn.addEventListener('click', ()=>{\n    // ensure parsed\n    parseArrayInput();\n    const t = Number(targetInput.value);\n    target = isNaN(t) ? null : t;\n    if(target === null || arr.length===0) {\n      alert(\"Provide an array and a numeric target.\");\n      return;\n    }\n    if(!state) resetAll();\n    runAuto();\n  });\n\n  modeSelect.addEventListener('change', ()=>{\n    parseArrayInput();\n    resetAll();\n  });\n\n  speedRange.addEventListener('input', ()=>{\n    speed = parseInt(speedRange.value);\n    speedVal.textContent = speed + \"ms\";\n    if(intervalId) {\n      clearInterval(intervalId);\n      intervalId = null;\n      runAuto(); // restart with new speed\n    }\n  });\n\n  arrayInput.addEventListener('change', () => {\n    parseArrayInput();\n  });\n\n  // On load\n  parseArrayInput();\n  resetAll();\n\n  // Keyboard: pressing Enter on target runs one step\n  targetInput.addEventListener('keydown', (e)=> {\n    if(e.key === 'Enter') {\n      stepBtn.click();\n    }\n  });\n\n  // Initial render\n  renderArray();\n\n  // Expose some helpful info in log\n  log(\"Welcome! Use Step to go one step at a time or Run to animate.\");\n  log(\"Current array:\", arrayInput.value);\n  log(\"Target:\", targetInput.value);\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Binary Search"
    }
  ],
  "topic": "Binary Search",
  "hasFSM": false,
  "hasTest": true
}