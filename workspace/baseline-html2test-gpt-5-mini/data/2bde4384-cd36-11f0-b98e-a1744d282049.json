{
  "id": "2bde4384-cd36-11f0-b98e-a1744d282049",
  "timestamp": "2025-11-29T15:16:48.654Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Selection Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Selection Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#00aaff;\n      --muted:#94a3b8;\n      --success:#16a34a;\n      --danger:#ef4444;\n      --highlight1:#f97316;\n      --highlight2:#facc15;\n      --swap:#7c3aed;\n      --bar-bg:#1e293b;\n      --text:#e6eef8;\n    }\n    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,\"Helvetica Neue\",Arial;}\n    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071029);color:var(--text)}\n    .app{max-width:1100px;margin:24px auto;padding:20px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6);}\n    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;gap:12px}\n    h1{font-size:20px;margin:0}\n    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center}\n    .control-group{background:var(--panel);padding:10px;border-radius:8px;display:flex;gap:8px;align-items:center}\n    label{font-size:13px;color:var(--muted)}\n    input[type=range]{accent-color:var(--accent)}\n    button{background:linear-gradient(180deg,#0ea5e9,#0284c7);border:none;color:white;padding:8px 12px;border-radius:8px;cursor:pointer}\n    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}\n    button.warn{background:linear-gradient(180deg,#fb923c,#f97316)}\n    button:disabled{opacity:0.45;cursor:not-allowed}\n    .main{display:flex;gap:16px}\n    .visual{flex:1;background:var(--panel);padding:14px;border-radius:10px;min-height:320px;display:flex;flex-direction:column}\n    .bars{flex:1;display:flex;align-items:flex-end;gap:4px;padding:8px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}\n    .bar{flex:1 1 auto;background:var(--bar-bg);border-radius:4px;display:flex;align-items:flex-end;justify-content:center;color:rgba(255,255,255,0.9);font-size:11px;transition:height 200ms ease, background-color 120ms}\n    .bar.small{font-size:10px}\n    .bar .val{padding:4px 2px}\n    .legend{display:flex;gap:8px;align-items:center;padding-top:8px}\n    .legend .item{display:flex;gap:6px;align-items:center;color:var(--muted);font-size:13px}\n    .square{width:14px;height:14px;border-radius:3px}\n    .sidebar{width:360px;min-width:260px;background:var(--panel);padding:14px;border-radius:10px}\n    .stats{display:flex;gap:12px;flex-wrap:wrap}\n    .stat{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:8px;border-radius:8px;min-width:96px;text-align:center}\n    .stat .num{font-weight:600;font-size:18px}\n    pre{background:transparent;color:var(--muted);padding:8px;border-radius:6px;overflow:auto;margin:8px 0;border:1px dashed rgba(255,255,255,0.02)}\n    .pseudocode{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:13px;color:var(--muted);line-height:1.6}\n    .pc-line{padding:6px 8px;border-radius:6px}\n    .pc-line.current{background:linear-gradient(90deg,rgba(255,255,255,0.02),transparent);color:var(--text);box-shadow:inset 0 0 0 1px rgba(255,255,255,0.02)}\n    .footer{display:flex;gap:10px;align-items:center;justify-content:space-between;padding-top:8px}\n    .small{font-size:13px;color:var(--muted)}\n    input[type=text]{padding:6px 8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}\n    .row{display:flex;gap:8px;align-items:center}\n    @media(max-width:900px){.main{flex-direction:column}.sidebar{width:auto}}\n  </style>\n</head>\n<body>\n  <div class=\"app\" role=\"application\" aria-label=\"Selection Sort Visualizer\">\n    <header>\n      <h1>Selection Sort Visualizer</h1>\n      <div class=\"controls\" aria-hidden=\"false\">\n        <div class=\"control-group\">\n          <label for=\"size\">Size</label>\n          <input id=\"size\" type=\"range\" min=\"5\" max=\"80\" value=\"30\" />\n        </div>\n        <div class=\"control-group\">\n          <label for=\"speed\">Speed</label>\n          <input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"150\" />\n        </div>\n        <div class=\"control-group\">\n          <button id=\"randomBtn\">Randomize</button>\n          <button id=\"reverseBtn\" class=\"secondary\">Reverse</button>\n        </div>\n        <div class=\"control-group\">\n          <button id=\"startBtn\">Start</button>\n          <button id=\"pauseBtn\" class=\"secondary\" disabled>Pause</button>\n          <button id=\"stepBtn\" class=\"secondary\">Step</button>\n          <button id=\"resetBtn\" class=\"secondary\">Reset</button>\n        </div>\n      </div>\n    </header>\n\n    <div class=\"main\">\n      <section class=\"visual\" aria-label=\"Visualization\">\n        <div style=\"display:flex;gap:8px;align-items:center;margin-bottom:8px\">\n          <div class=\"row\" style=\"gap:6px\">\n            <label class=\"small\">Input array (comma separated)</label>\n            <input id=\"arrayInput\" type=\"text\" placeholder=\"e.g. 5,3,8,1\" style=\"min-width:220px\" />\n            <button id=\"applyArray\" class=\"secondary\">Apply</button>\n          </div>\n        </div>\n\n        <div id=\"bars\" class=\"bars\" aria-live=\"polite\" aria-atomic=\"true\"></div>\n\n        <div class=\"legend\" style=\"margin-top:10px\">\n          <div class=\"item\"><span class=\"square\" style=\"background:var(--bar-bg)\"></span> Unsorted</div>\n          <div class=\"item\"><span class=\"square\" style=\"background:var(--highlight1)\"></span> Current i</div>\n          <div class=\"item\"><span class=\"square\" style=\"background:var(--highlight2)\"></span> Current j</div>\n          <div class=\"item\"><span class=\"square\" style=\"background:var(--danger)\"></span> Current min</div>\n          <div class=\"item\"><span class=\"square\" style=\"background:var(--swap)\"></span> Swapping</div>\n          <div class=\"item\"><span class=\"square\" style=\"background:var(--success)\"></span> Sorted</div>\n        </div>\n      </section>\n\n      <aside class=\"sidebar\" aria-label=\"Controls and Info\">\n        <div style=\"display:flex;gap:10px;align-items:center;margin-bottom:10px\">\n          <div class=\"stats\" style=\"flex:1\">\n            <div class=\"stat\">\n              <div class=\"small\">Comparisons</div>\n              <div id=\"compCount\" class=\"num\">0</div>\n            </div>\n            <div class=\"stat\">\n              <div class=\"small\">Swaps</div>\n              <div id=\"swapCount\" class=\"num\">0</div>\n            </div>\n            <div class=\"stat\">\n              <div class=\"small\">Time</div>\n              <div id=\"timeCount\" class=\"num\">0.0s</div>\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <div class=\"small\" style=\"margin-bottom:6px\">Pseudocode</div>\n          <div class=\"pseudocode\" id=\"pseudocode\" role=\"list\">\n            <div class=\"pc-line\" data-line=\"0\">for i = 0 to n - 2</div>\n            <div class=\"pc-line\" data-line=\"1\">  min = i</div>\n            <div class=\"pc-line\" data-line=\"2\">  for j = i + 1 to n - 1</div>\n            <div class=\"pc-line\" data-line=\"3\">    if a[j] &lt; a[min] then</div>\n            <div class=\"pc-line\" data-line=\"4\">      min = j</div>\n            <div class=\"pc-line\" data-line=\"5\">  swap a[i], a[min]</div>\n            <div class=\"pc-line\" data-line=\"6\">end for</div>\n          </div>\n        </div>\n\n        <pre style=\"margin-top:12px\">\nSelection sort repeatedly finds the minimum element from the unsorted portion\nand places it at the beginning. It's an in-place, unstable algorithm with\ntime complexity O(n^2), best for small arrays or educational purposes.\n        </pre>\n\n        <div class=\"footer\">\n          <div class=\"small\">Status: <span id=\"status\">Ready</span></div>\n          <div style=\"display:flex;gap:8px\">\n            <button id=\"explainBtn\" class=\"secondary\">Example</button>\n            <a href=\"https://en.wikipedia.org/wiki/Selection_sort\" target=\"_blank\" rel=\"noopener\" class=\"secondary\" style=\"padding:8px;border-radius:8px;text-decoration:none;color:var(--text)\">Learn</a>\n          </div>\n        </div>\n      </aside>\n    </div>\n  </div>\n\n<script>\n(function(){\n  // Elements\n  const barsEl = document.getElementById('bars');\n  const sizeInput = document.getElementById('size');\n  const speedInput = document.getElementById('speed');\n  const randomBtn = document.getElementById('randomBtn');\n  const reverseBtn = document.getElementById('reverseBtn');\n  const startBtn = document.getElementById('startBtn');\n  const pauseBtn = document.getElementById('pauseBtn');\n  const stepBtn = document.getElementById('stepBtn');\n  const resetBtn = document.getElementById('resetBtn');\n  const arrayInput = document.getElementById('arrayInput');\n  const applyArray = document.getElementById('applyArray');\n  const compCountEl = document.getElementById('compCount');\n  const swapCountEl = document.getElementById('swapCount');\n  const timeCountEl = document.getElementById('timeCount');\n  const statusEl = document.getElementById('status');\n  const pseudocodeEl = document.getElementById('pseudocode');\n  const explainBtn = document.getElementById('explainBtn');\n\n  // State\n  let array = [];\n  let bars = [];\n  let size = parseInt(sizeInput.value,10);\n  let speed = parseInt(speedInput.value,10);\n  let running = false;\n  let paused = false;\n  let stepping = false;\n  let shouldStop = false;\n  let comparisons = 0;\n  let swaps = 0;\n  let startTime = null;\n  let timerInterval = null;\n\n  // Visual update helpers\n  function renderBars(){\n    barsEl.innerHTML = '';\n    const max = Math.max(...array, 1);\n    const min = Math.min(...array, 0);\n    const heightRange = barsEl.clientHeight - 20;\n    array.forEach((val, idx) => {\n      const bar = document.createElement('div');\n      bar.className = 'bar';\n      if (size > 50) bar.classList.add('small');\n      bar.style.height = Math.max(6, (Math.abs(val - min) / (max - min || 1)) * heightRange + 8) + 'px';\n      bar.dataset.index = idx;\n      const label = document.createElement('div');\n      label.className = 'val';\n      label.textContent = val;\n      bar.appendChild(label);\n      barsEl.appendChild(bar);\n      bars[idx] = bar;\n    });\n  }\n\n  function setStatus(s){\n    statusEl.textContent = s;\n  }\n\n  function colorRange(i, j, minIndex, swappingIndex=-1, swapMode=false){\n    // Reset\n    bars.forEach(b => b.style.background = 'var(--bar-bg)');\n    if (typeof i === 'number' && bars[i]) bars[i].style.background = 'linear-gradient(180deg,var(--highlight1),#ff8a4b)';\n    if (typeof j === 'number' && bars[j]) bars[j].style.background = 'linear-gradient(180deg,var(--highlight2),#fff176)';\n    if (typeof minIndex === 'number' && bars[minIndex]) bars[minIndex].style.background = 'linear-gradient(180deg,var(--danger),#fb7185)';\n    if (swapMode && typeof swappingIndex === 'number' && bars[swappingIndex]) bars[swappingIndex].style.background = 'linear-gradient(180deg,var(--swap),#a78bfa)';\n  }\n\n  function markSorted(index){\n    if (bars[index]) bars[index].style.background = 'linear-gradient(180deg,var(--success),#34d399)';\n  }\n\n  function highlightPseudocode(line){\n    pseudocodeEl.querySelectorAll('.pc-line').forEach(el => el.classList.remove('current'));\n    const el = pseudocodeEl.querySelector(`.pc-line[data-line=\"${line}\"]`);\n    if (el) el.classList.add('current');\n  }\n\n  function sleep(ms){\n    return new Promise(r => setTimeout(r, ms));\n  }\n\n  // Control: wait according to mode\n  async function waitForNext(){\n    if (shouldStop) throw new Error('stopped');\n    if (stepping){\n      // Wait until stepBtn pressed or start pressed\n      setStatus('Paused (step mode)');\n      paused = true;\n      return new Promise(resolve => {\n        const onStep = () => {\n          document.removeEventListener('run-step', onStep);\n          paused = false;\n          resolve();\n        };\n        document.addEventListener('run-step', onStep);\n      });\n    } else if (paused){\n      // wait until unpaused\n      return new Promise(resolve => {\n        const onResume = () => {\n          document.removeEventListener('run-resume', onResume);\n          resolve();\n        };\n        document.addEventListener('run-resume', onResume);\n      });\n    } else {\n      // running in auto mode: delay by speed\n      await sleep(Math.max(5, speed));\n    }\n  }\n\n  // Algorithm: selection sort with visual steps\n  async function selectionSort(){\n    running = true;\n    paused = false;\n    stepping = false;\n    shouldStop = false;\n    startTime = Date.now();\n    timerInterval = setInterval(updateTime, 100);\n    comparisons = 0;\n    swaps = 0;\n    updateCounters();\n\n    setStatus('Running');\n    const n = array.length;\n    try{\n      for (let i=0;i<n-1;i++){\n        highlightPseudocode(0); // for i\n        colorRange(i, null, null);\n        await waitForNext();\n\n        let min = i;\n        highlightPseudocode(1);\n        colorRange(i, null, min);\n        await waitForNext();\n\n        for (let j=i+1;j<n;j++){\n          highlightPseudocode(2); // for j\n          colorRange(i, j, min);\n          await waitForNext();\n\n          highlightPseudocode(3); // if a[j] < a[min]\n          comparisons++; updateCounters();\n          if (array[j] < array[min]){\n            highlightPseudocode(4);\n            min = j;\n            colorRange(i, j, min);\n            await waitForNext();\n          } else {\n            // small pause to show comparison\n            await waitForNext();\n          }\n        }\n\n        // swap if needed\n        highlightPseudocode(5);\n        if (min !== i){\n          // animate swap\n          colorRange(i, null, min, i, true);\n          await waitForNext();\n          swaps++; updateCounters();\n          await animateSwap(i, min);\n          await waitForNext();\n        }\n        markSorted(i);\n      }\n      // last element is sorted\n      markSorted(n-1);\n      highlightPseudocode(6);\n      setStatus('Finished');\n    } catch (e){\n      // stopped\n      setStatus('Stopped');\n      // nothing\n    } finally {\n      clearInterval(timerInterval);\n      running = false;\n      paused = false;\n      stepping = false;\n      shouldStop = false;\n      startBtn.disabled = false;\n      pauseBtn.disabled = true;\n      stepBtn.disabled = false;\n    }\n  }\n\n  function updateCounters(){\n    compCountEl.textContent = comparisons;\n    swapCountEl.textContent = swaps;\n    updateTime();\n  }\n\n  function updateTime(){\n    if (!startTime) { timeCountEl.textContent = '0.0s'; return; }\n    const s = (Date.now() - startTime) / 1000;\n    timeCountEl.textContent = s.toFixed(1) + 's';\n  }\n\n  // Animate swap visually by swapping heights and labels\n  async function animateSwap(i, j){\n    if (!bars[i] || !bars[j]) {\n      // fallback to simple swap\n      const tmp = array[i]; array[i] = array[j]; array[j] = tmp;\n      renderBars();\n      return;\n    }\n    const bi = bars[i], bj = bars[j];\n    // swap numeric values\n    const tmp = array[i]; array[i] = array[j]; array[j] = tmp;\n\n    // animate by swapping heights and inner text; use CSS transitions\n    // capture heights\n    const hi = bi.style.height, hj = bj.style.height;\n    const ti = bi.innerText, tj = bj.innerText;\n    bi.style.transition = 'height 220ms ease, background-color 120ms';\n    bj.style.transition = 'height 220ms ease, background-color 120ms';\n    bi.style.height = hj;\n    bj.style.height = hi;\n    bi.querySelector('.val').textContent = array[i];\n    bj.querySelector('.val').textContent = array[j];\n    // briefly highlight swap\n    bi.style.background = 'linear-gradient(180deg,var(--swap),#a78bfa)';\n    bj.style.background = 'linear-gradient(180deg,var(--swap),#a78bfa)';\n    await sleep(220);\n    // restore backgrounds to normal or sorted later\n    bi.style.background = 'var(--bar-bg)';\n    bj.style.background = 'var(--bar-bg)';\n    // ensure bars array remains linked\n    await sleep(60);\n    renderBars(); // re-render to reset references\n  }\n\n  // UI handlers\n  function generateRandom(n){\n    const arr = [];\n    for (let i=0;i<n;i++){\n      arr.push(Math.floor(Math.random()*100)+1);\n    }\n    return arr;\n  }\n\n  function setArray(arr){\n    array = arr.slice();\n    size = array.length;\n    sizeInput.value = size;\n    renderBars();\n    comparisons = 0; swaps = 0; updateCounters();\n    startTime = null; timeCountEl.textContent = '0.0s';\n    highlightPseudocode(-1);\n    setStatus('Ready');\n  }\n\n  // Attach events\n  sizeInput.addEventListener('input', () => {\n    const v = parseInt(sizeInput.value,10);\n    size = v;\n    setArray(generateRandom(size));\n  });\n\n  speedInput.addEventListener('input', () => {\n    speed = parseInt(speedInput.value,10);\n  });\n\n  randomBtn.addEventListener('click', () => {\n    setArray(generateRandom(parseInt(sizeInput.value,10)));\n  });\n\n  reverseBtn.addEventListener('click', () => {\n    // descending array\n    const n = parseInt(sizeInput.value,10);\n    const arr = [];\n    for (let i=0;i<n;i++) arr.push(n - i);\n    setArray(arr);\n  });\n\n  applyArray.addEventListener('click', () => {\n    const text = arrayInput.value.trim();\n    if (!text) return;\n    const parts = text.split(',').map(s=>s.trim()).filter(s=>s!=='');\n    const nums = [];\n    for (const p of parts){\n      const n = Number(p);\n      if (!isFinite(n)) {\n        alert('Invalid number: ' + p);\n        return;\n      }\n      nums.push(n);\n    }\n    if (nums.length < 2) {\n      alert('Enter at least two numbers');\n      return;\n    }\n    setArray(nums);\n  });\n\n  startBtn.addEventListener('click', async () => {\n    if (running) return;\n    // start in auto mode\n    startBtn.disabled = true;\n    pauseBtn.disabled = false;\n    stepBtn.disabled = false;\n    stepping = false;\n    paused = false;\n    shouldStop = false;\n    const n = array.length;\n    if (n < 2) {\n      alert('Array too small to sort.');\n      startBtn.disabled = false;\n      return;\n    }\n    selectionSort();\n  });\n\n  pauseBtn.addEventListener('click', () => {\n    if (!running) return;\n    // toggle pause\n    if (!paused && !stepping){\n      paused = true;\n      setStatus('Paused');\n      pauseBtn.textContent = 'Resume';\n      document.dispatchEvent(new Event('run-paused'));\n    } else {\n      paused = false;\n      setStatus('Running');\n      pauseBtn.textContent = 'Pause';\n      document.dispatchEvent(new Event('run-resume'));\n    }\n  });\n\n  stepBtn.addEventListener('click', () => {\n    if (!running){\n      // start in stepping mode\n      startBtn.disabled = true;\n      pauseBtn.disabled = false;\n      stepping = true;\n      paused = false;\n      shouldStop = false;\n      selectionSort();\n      return;\n    }\n    // if running and in stepping or paused: trigger one step\n    document.dispatchEvent(new Event('run-step'));\n  });\n\n  resetBtn.addEventListener('click', () => {\n    // stop the algorithm\n    if (running){\n      shouldStop = true;\n      // unpause to allow algorithm to exit\n      paused = false;\n      stepping = false;\n      document.dispatchEvent(new Event('run-resume'));\n    }\n    startBtn.disabled = false;\n    pauseBtn.disabled = true;\n    pauseBtn.textContent = 'Pause';\n    stepBtn.disabled = false;\n    // reset counters and visuals\n    comparisons = 0; swaps = 0; updateCounters();\n    startTime = null; timeCountEl.textContent = '0.0s';\n    setStatus('Ready');\n    highlightPseudocode(-1);\n    renderBars();\n  });\n\n  explainBtn.addEventListener('click', () => {\n    // example small array\n    const ex = [64,25,12,22,11];\n    arrayInput.value = ex.join(', ');\n    setArray(ex);\n  });\n\n  // initialize\n  setArray(generateRandom(size));\n\n  // Accessibility: keyboard shortcuts\n  document.addEventListener('keydown', (e) => {\n    if (e.key === ' ') {\n      e.preventDefault();\n      if (running){\n        pauseBtn.click();\n      } else {\n        startBtn.click();\n      }\n    } else if (e.key === 'ArrowRight') {\n      stepBtn.click();\n    } else if (e.key === 'r') {\n      randomBtn.click();\n    }\n  });\n\n  // Responsive render on resize\n  window.addEventListener('resize', () => {\n    renderBars();\n  });\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Selection Sort"
    }
  ],
  "topic": "Selection Sort",
  "hasFSM": false,
  "hasTest": true
}