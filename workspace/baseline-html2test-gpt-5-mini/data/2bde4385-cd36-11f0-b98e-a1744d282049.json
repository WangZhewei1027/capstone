{
  "id": "2bde4385-cd36-11f0-b98e-a1744d282049",
  "timestamp": "2025-11-29T15:16:48.507Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Insertion Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title>Insertion Sort Visualizer</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<style>\n  :root{\n    --bg:#0f1724;\n    --card:#0b1220;\n    --accent:#22c1c3;\n    --muted:#9fb0c0;\n    --bar:#60a5fa;\n    --bar-active:#f59e0b;\n    --bar-key:#ef4444;\n    --bar-compare:#a78bfa;\n    --text:#e6f0f4;\n  }\n  *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial}\n  body{margin:0;background:linear-gradient(180deg,#071226 0%,#071427 100%);color:var(--text);min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:18px;}\n  .container{max-width:1100px;width:100%;}\n  header{display:flex;align-items:center;gap:16px;margin-bottom:14px;}\n  h1{font-size:18px;margin:0;color:var(--accent);}\n  p.small{margin:0;color:var(--muted);font-size:13px}\n  .controls{display:grid;grid-template-columns:repeat(6,1fr);gap:10px;margin-bottom:12px}\n  .controls > *{background:var(--card);padding:10px;border-radius:8px}\n  .controls label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}\n  input[type=range]{width:100%}\n  button{background:linear-gradient(180deg,#1b2430,#0e1620);border:1px solid rgba(255,255,255,0.04);color:var(--text);padding:8px 10px;border-radius:6px;cursor:pointer}\n  button:active{transform:translateY(1px)}\n  .bigbtn{padding:10px 14px;font-weight:600}\n  .row{display:flex;gap:12px;align-items:center}\n  .viz{background:linear-gradient(180deg,#071427,#071226);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);display:flex;gap:14px}\n  .canvas{flex:1;min-height:320px;display:flex;align-items:end;padding:6px;gap:6px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:8px}\n  .bar{flex:1 1 auto;display:flex;align-items:end;justify-content:center;border-radius:4px 4px 6px 6px;position:relative;min-width:6px;transition:height 180ms linear, transform 180ms linear}\n  .bar > span{position:absolute;top:-22px;font-size:12px;color:var(--muted)}\n  .bar.small > span{font-size:11px;top:-18px}\n  .panel{width:360px;min-width:260px;max-height:480px;overflow:auto;padding:10px;border-radius:8px;background:linear-gradient(180deg,#061026,#071427);border:1px solid rgba(255,255,255,0.03)}\n  pre{margin:0;background:none;color:var(--muted);font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,monospace;font-size:13px;line-height:1.5}\n  .pseudocode{background:transparent;padding:8px;border-radius:6px}\n  .pseudocode div{padding:6px;border-radius:6px}\n  .line.active{background:linear-gradient(90deg,rgba(34,193,195,0.08),rgba(167,139,250,0.04));color:var(--text);border-left:3px solid var(--accent)}\n  .stats{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}\n  .stat{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:6px;font-size:13px;color:var(--muted)}\n  .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}\n  .legend div{display:flex;gap:6px;align-items:center;font-size:13px;color:var(--muted)}\n  .colorbox{width:14px;height:12px;border-radius:3px}\n  footer{margin-top:12px;color:var(--muted);font-size:13px}\n  .smallmuted{font-size:12px;color:var(--muted)}\n  input[type=number]{width:72px;padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}\n  .controls .wide{grid-column:span 2}\n  @media (max-width:900px){\n    .controls{grid-template-columns:repeat(2,1fr)}\n    .panel{width:100%}\n    .viz{flex-direction:column}\n    .canvas{min-height:240px}\n  }\n</style>\n</head>\n<body>\n<div class=\"container\">\n  <header>\n    <div>\n      <h1>Insertion Sort Visualizer</h1>\n      <p class=\"small\">Step through insertion sort with comparisons and shifts highlighted.</p>\n    </div>\n  </header>\n\n  <div class=\"controls\">\n    <div>\n      <label>Array size: <span id=\"sizeLabel\">20</span></label>\n      <input id=\"size\" type=\"range\" min=\"6\" max=\"80\" value=\"20\">\n    </div>\n\n    <div>\n      <label>Speed (ms per step): <span id=\"speedLabel\">150</span></label>\n      <input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"150\">\n    </div>\n\n    <div>\n      <label>Order</label>\n      <div style=\"display:flex;gap:8px;align-items:center\">\n        <button id=\"ascBtn\" class=\"bigbtn\" style=\"flex:1;background:linear-gradient(90deg,#134e4a,#065f46);\">Ascending</button>\n        <button id=\"descBtn\" class=\"bigbtn\" style=\"flex:1;\">Descending</button>\n      </div>\n    </div>\n\n    <div class=\"wide\">\n      <label>Controls</label>\n      <div style=\"display:flex;gap:8px\">\n        <button id=\"randomize\">Randomize</button>\n        <button id=\"start\" class=\"bigbtn\">Start</button>\n        <button id=\"pause\">Pause</button>\n        <button id=\"step\">Step</button>\n        <button id=\"reset\">Reset</button>\n      </div>\n    </div>\n\n    <div>\n      <label>Range (min - max)</label>\n      <div style=\"display:flex;gap:8px\">\n        <input id=\"minVal\" type=\"number\" value=\"10\" step=\"1\"> \n        <input id=\"maxVal\" type=\"number\" value=\"400\" step=\"1\">\n      </div>\n    </div>\n\n    <div>\n      <label>Shuffle seed</label>\n      <div class=\"row\">\n        <input id=\"seed\" type=\"number\" value=\"\">\n        <button id=\"seedApply\">Apply</button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"viz\">\n    <div class=\"canvas\" id=\"canvas\" aria-hidden=\"false\"></div>\n\n    <aside class=\"panel\">\n      <div style=\"display:flex;justify-content:space-between;align-items:center;margin-bottom:8px\">\n        <div><strong>Algorithm</strong><div class=\"smallmuted\">Insertion Sort</div></div>\n        <div class=\"smallmuted\">Comparisons / Shifts</div>\n      </div>\n      <div class=\"pseudocode\" id=\"pseudocode\">\n        <!-- pseudocode lines appended by script -->\n      </div>\n\n      <div class=\"stats\">\n        <div class=\"stat\">Step: <span id=\"stepCount\">0</span></div>\n        <div class=\"stat\">Comparisons: <span id=\"compCount\">0</span></div>\n        <div class=\"stat\">Shifts: <span id=\"shiftCount\">0</span></div>\n        <div class=\"stat\">i: <span id=\"iIndex\">-</span></div>\n        <div class=\"stat\">j: <span id=\"jIndex\">-</span></div>\n      </div>\n\n      <div class=\"legend\">\n        <div><div class=\"colorbox\" style=\"background:var(--bar)\"></div><div class=\"smallmuted\">Normal</div></div>\n        <div><div class=\"colorbox\" style=\"background:var(--bar-active)\"></div><div class=\"smallmuted\">Currently considered</div></div>\n        <div><div class=\"colorbox\" style=\"background:var(--bar-key)\"></div><div class=\"smallmuted\">Key element</div></div>\n        <div><div class=\"colorbox\" style=\"background:var(--bar-compare)\"></div><div class=\"smallmuted\">Compare</div></div>\n      </div>\n\n      <footer>\n        <div class=\"smallmuted\" style=\"margin-top:12px\">This visualizer animates the classic insertion sort: it builds a sorted prefix by taking the next element (key) and shifting larger elements right to make room.</div>\n      </footer>\n    </aside>\n  </div>\n</div>\n\n<script>\n(() => {\n  // DOM refs\n  const canvas = document.getElementById('canvas');\n  const sizeInput = document.getElementById('size');\n  const speedInput = document.getElementById('speed');\n  const sizeLabel = document.getElementById('sizeLabel');\n  const speedLabel = document.getElementById('speedLabel');\n  const randomizeBtn = document.getElementById('randomize');\n  const startBtn = document.getElementById('start');\n  const pauseBtn = document.getElementById('pause');\n  const stepBtn = document.getElementById('step');\n  const resetBtn = document.getElementById('reset');\n  const minValInput = document.getElementById('minVal');\n  const maxValInput = document.getElementById('maxVal');\n  const seedInput = document.getElementById('seed');\n  const seedApply = document.getElementById('seedApply');\n  const ascBtn = document.getElementById('ascBtn');\n  const descBtn = document.getElementById('descBtn');\n\n  const stepCountEl = document.getElementById('stepCount');\n  const compCountEl = document.getElementById('compCount');\n  const shiftCountEl = document.getElementById('shiftCount');\n  const iIndexEl = document.getElementById('iIndex');\n  const jIndexEl = document.getElementById('jIndex');\n\n  const pseudocodeEl = document.getElementById('pseudocode');\n\n  // state\n  let arr = [];\n  let bars = [];\n  let generator = null;\n  let running = false;\n  let autoTimer = null;\n  let ascending = true;\n  let STEPS = 0;\n  let COMPS = 0;\n  let SHIFTS = 0;\n  let seed = null;\n\n  const defaultSize = parseInt(sizeInput.value,10);\n  const defaultMin = parseInt(minValInput.value,10);\n  const defaultMax = parseInt(maxValInput.value,10);\n\n  // pseudocode lines\n  function renderPseudocode(){\n    pseudocodeEl.innerHTML = '';\n    const lines = [\n      'for i = 1 to n-1',\n      '  key = A[i]',\n      '  j = i - 1',\n      `  while j >= 0 and A[j] ${ascending ? '>' : '<'} key`,\n      '    A[j+1] = A[j]',\n      '    j = j - 1',\n      '  A[j+1] = key'\n    ];\n    lines.forEach((t,idx)=>{\n      const div = document.createElement('div');\n      div.textContent = t;\n      div.dataset.line = idx;\n      pseudocodeEl.appendChild(div);\n    });\n  }\n\n  renderPseudocode();\n\n  // PRNG for deterministic seed\n  function seededRand(s) {\n    let state = s >>> 0;\n    return function() {\n      // xorshift32\n      state ^= state << 13;\n      state ^= state >>> 17;\n      state ^= state << 5;\n      state >>>= 0;\n      return (state) / 4294967295;\n    };\n  }\n\n  function generateArray(n, minV, maxV, useSeed=false) {\n    const out = [];\n    const range = Math.max(1, maxV - minV);\n    let rnd = Math.random;\n    if (useSeed && seed !== null && seed !== '') {\n      rnd = seededRand(Number(seed) || 1);\n    }\n    for (let i=0;i<n;i++){\n      out.push(Math.round(minV + rnd() * range));\n    }\n    return out;\n  }\n\n  function clearCanvas() {\n    canvas.innerHTML = '';\n    bars = [];\n  }\n\n  function drawArray(arrSnapshot, highlight = {}) {\n    // highlight: {keyIndex, compareIndex, iIndex, jIndex}\n    clearCanvas();\n    const n = arrSnapshot.length;\n    const max = Math.max(...arrSnapshot,1);\n    // create bars\n    arrSnapshot.forEach((v, idx) => {\n      const bar = document.createElement('div');\n      bar.className = 'bar';\n      if (n > 40) bar.classList.add('small');\n      const h = Math.round((v / max) * 100);\n      bar.style.height = (10 + h) + '%';\n      bar.style.background = 'linear-gradient(180deg,var(--bar),#2b6cb0)';\n      // value label\n      const span = document.createElement('span');\n      span.textContent = v;\n      bar.appendChild(span);\n      // mark types\n      if (typeof highlight.keyIndex === 'number' && idx === highlight.keyIndex) {\n        bar.style.background = 'linear-gradient(180deg,var(--bar-key),#ef4444)';\n        bar.style.transform = 'translateY(-6px) scale(1.02)';\n      } else if (typeof highlight.compareIndex === 'number' && idx === highlight.compareIndex) {\n        bar.style.background = 'linear-gradient(180deg,var(--bar-compare),#7c3aed)';\n        bar.style.transform = 'translateY(-4px)';\n      } else if (typeof highlight.iIndex === 'number' && idx === highlight.iIndex) {\n        bar.style.background = 'linear-gradient(180deg,var(--bar-active),#f59e0b)';\n        bar.style.transform = 'translateY(-4px)';\n      } else if (typeof highlight.jIndex === 'number' && idx === highlight.jIndex) {\n        bar.style.background = 'linear-gradient(180deg,var(--bar-active),#f59e0b)';\n        bar.style.transform = 'translateY(-4px)';\n      }\n      // add to canvas\n      canvas.appendChild(bar);\n      bars.push(bar);\n    });\n  }\n\n  // generator for insertion sort that yields steps\n  function* insertionSortGen(a, ascending=true) {\n    const n = a.length;\n    for (let i = 1; i < n; i++) {\n      let key = a[i];\n      let j = i - 1;\n      // mark selection\n      yield {type:'select', i, j, key, arr: a.slice()};\n      // while condition check (we'll yield a compare each loop iteration)\n      while (j >= 0) {\n        // compare step\n        const comp = ascending ? (a[j] > key) : (a[j] < key);\n        yield {type:'compare', i, j, key, result: comp, arr: a.slice()};\n        if (comp) {\n          // shift a[j] to a[j+1]\n          a[j+1] = a[j];\n          yield {type:'shift', from: j, to: j+1, arr: a.slice()};\n          j = j - 1;\n        } else {\n          break;\n        }\n      }\n      // place the key\n      a[j+1] = key;\n      yield {type:'place', index: j+1, key, arr: a.slice()};\n    }\n    yield {type:'done', arr: a.slice()};\n  }\n\n  // UI actions\n  function resetCounters(){\n    STEPS = 0; COMPS = 0; SHIFTS = 0;\n    stepCountEl.textContent = STEPS;\n    compCountEl.textContent = COMPS;\n    shiftCountEl.textContent = SHIFTS;\n    iIndexEl.textContent = '-';\n    jIndexEl.textContent = '-';\n  }\n\n  function updatePseudocodeHighlight(lines) {\n    // lines: array of line indices to highlight\n    const nodes = pseudocodeEl.querySelectorAll('div');\n    nodes.forEach(n => {\n      const idx = Number(n.dataset.line);\n      if (lines.includes(idx)) n.classList.add('active'); else n.classList.remove('active');\n    });\n  }\n\n  function applyStep(step) {\n    STEPS++;\n    stepCountEl.textContent = STEPS;\n    if (!step) return;\n\n    // default clear highlights\n    let highlight = {};\n    switch(step.type) {\n      case 'select':\n        iIndexEl.textContent = step.i;\n        jIndexEl.textContent = step.j;\n        updatePseudocodeHighlight([0,1,2]);\n        highlight = {iIndex: step.i, keyIndex: step.i};\n        drawArray(step.arr, highlight);\n        break;\n      case 'compare':\n        COMPS++;\n        compCountEl.textContent = COMPS;\n        iIndexEl.textContent = step.i;\n        jIndexEl.textContent = step.j;\n        updatePseudocodeHighlight([3]);\n        highlight = {jIndex: step.j, keyIndex: step.i};\n        drawArray(step.arr, highlight);\n        break;\n      case 'shift':\n        SHIFTS++;\n        shiftCountEl.textContent = SHIFTS;\n        updatePseudocodeHighlight([4,5]);\n        // show where element was shifted\n        highlight = {compareIndex: step.to, keyIndex: step.to};\n        drawArray(step.arr, highlight);\n        break;\n      case 'place':\n        updatePseudocodeHighlight([6]);\n        iIndexEl.textContent = step.index;\n        jIndexEl.textContent = step.index - 1;\n        highlight = {keyIndex: step.index};\n        drawArray(step.arr, highlight);\n        break;\n      case 'done':\n        updatePseudocodeHighlight([]);\n        drawArray(step.arr, {});\n        running = false;\n        stopAuto();\n        break;\n      default:\n        drawArray(step.arr, {});\n        break;\n    }\n  }\n\n  function stopAuto(){\n    running = false;\n    if (autoTimer) {\n      clearTimeout(autoTimer);\n      autoTimer = null;\n    }\n  }\n\n  function startAuto(){\n    if (!generator) return;\n    running = true;\n    stepLoop();\n  }\n\n  function stepLoop(){\n    if (!running) return;\n    const sp = Number(speedInput.value) || 150;\n    autoTimer = setTimeout(()=>{\n      const res = generator.next();\n      if (!res.done) {\n        applyStep(res.value);\n        stepLoop();\n      } else {\n        applyStep(res.value);\n        running = false;\n      }\n    }, sp);\n  }\n\n  // Controls event handlers\n  sizeInput.addEventListener('input', ()=>{\n    sizeLabel.textContent = sizeInput.value;\n  });\n\n  speedInput.addEventListener('input', ()=>{\n    speedLabel.textContent = speedInput.value;\n  });\n\n  randomizeBtn.addEventListener('click', ()=>{\n    const n = Number(sizeInput.value);\n    const minV = Number(minValInput.value);\n    const maxV = Number(maxValInput.value);\n    arr = generateArray(n, minV, maxV, seed !== '' && seed !== null);\n    resetCounters();\n    generator = null;\n    drawArray(arr, {});\n    renderPseudocode();\n  });\n\n  seedApply.addEventListener('click', ()=>{\n    seed = seedInput.value;\n    // generate with seed\n    randomizeBtn.click();\n  });\n\n  ascBtn.addEventListener('click', ()=>{\n    ascending = true;\n    ascBtn.style.background = 'linear-gradient(90deg,#134e4a,#065f46)';\n    descBtn.style.background = '';\n    renderPseudocode();\n  });\n\n  descBtn.addEventListener('click', ()=>{\n    ascending = false;\n    descBtn.style.background = 'linear-gradient(90deg,#5b21b6,#7c3aed)';\n    ascBtn.style.background = '';\n    renderPseudocode();\n  });\n\n  startBtn.addEventListener('click', ()=>{\n    if (!generator) {\n      // create a fresh generator from a copy of the current array\n      generator = insertionSortGen(arr.slice(), ascending);\n      // ensure counters reflect fresh run\n      resetCounters();\n    }\n    if (!running) startAuto();\n  });\n\n  pauseBtn.addEventListener('click', ()=>{\n    stopAuto();\n  });\n\n  stepBtn.addEventListener('click', ()=>{\n    if (!generator) {\n      generator = insertionSortGen(arr.slice(), ascending);\n      resetCounters();\n    }\n    stopAuto();\n    const res = generator.next();\n    if (!res.done) {\n      applyStep(res.value);\n    } else {\n      applyStep(res.value);\n    }\n  });\n\n  resetBtn.addEventListener('click', ()=>{\n    stopAuto();\n    generator = null;\n    resetCounters();\n    drawArray(arr, {});\n    updatePseudocodeHighlight([]);\n  });\n\n  // initial array\n  function initialize(){\n    arr = generateArray(defaultSize, defaultMin, defaultMax, false);\n    resetCounters();\n    drawArray(arr, {});\n  }\n  initialize();\n\n  // keyboard shortcuts\n  window.addEventListener('keydown', (e)=>{\n    if (e.key === ' ') {\n      e.preventDefault();\n      if (running) pauseBtn.click(); else startBtn.click();\n    } else if (e.key === 'ArrowRight') {\n      stepBtn.click();\n    } else if (e.key === 'r') {\n      randomizeBtn.click();\n    }\n  });\n\n  // responsive redraw on window resize to keep labels visible\n  window.addEventListener('resize', ()=> drawArray(arr, {}));\n\n  // help: initial states for order buttons\n  ascBtn.click();\n\n  // expose nothing\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Insertion Sort"
    }
  ],
  "topic": "Insertion Sort",
  "hasFSM": false,
  "hasTest": true
}