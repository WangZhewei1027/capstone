{
  "id": "be87d8a4-cd35-11f0-9e7b-93b903303299",
  "timestamp": "2025-11-29T15:13:45.571Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Two Pointers",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Two Pointers — Interactive Visualizations</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n  <style>\n    :root{\n      --bg: #0f1724;\n      --card: #0b1220;\n      --muted: #94a3b8;\n      --accent: #06b6d4;\n      --accent-2: #7c3aed;\n      --good: #16a34a;\n      --bad: #ef4444;\n      --glass: rgba(255,255,255,0.03);\n      --panel-padding: 18px;\n      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", \"Helvetica Neue\", monospace;\n    }\n    html,body{\n      height:100%;\n      margin:0;\n      background:linear-gradient(180deg,var(--bg), #071027);\n      font-family: Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n      color:#e6eef8;\n      -webkit-font-smoothing:antialiased;\n      -moz-osx-font-smoothing:grayscale;\n    }\n    .wrap{\n      max-width:1100px;\n      margin:28px auto;\n      padding:20px;\n    }\n    header{\n      display:flex;\n      align-items:center;\n      gap:16px;\n      margin-bottom:18px;\n    }\n    h1{\n      margin:0;\n      font-size:20px;\n      letter-spacing:0.2px;\n    }\n    p.lead{\n      margin:8px 0 0 0;\n      color:var(--muted);\n      font-size:13px;\n    }\n    .grid{\n      display:grid;\n      grid-template-columns: 360px 1fr;\n      gap:18px;\n      align-items:start;\n    }\n    .panel{\n      background:linear-gradient(180deg,var(--card), rgba(9,15,25,0.9));\n      border:1px solid rgba(255,255,255,0.03);\n      padding:var(--panel-padding);\n      border-radius:12px;\n      box-shadow: 0 6px 24px rgba(3,7,18,0.6);\n    }\n    label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px;}\n    .controls > * {margin-bottom:12px;}\n    input[type=\"text\"], input[type=\"number\"], select{\n      width:100%;\n      padding:10px 12px;\n      border-radius:8px;\n      border:1px solid rgba(255,255,255,0.04);\n      background:var(--glass);\n      color:inherit;\n      font-size:14px;\n      outline:none;\n    }\n    .btn{\n      display:inline-flex;\n      align-items:center;\n      gap:8px;\n      padding:10px 12px;\n      border-radius:8px;\n      cursor:pointer;\n      background:linear-gradient(180deg,var(--accent), #0891b2);\n      color:#042027;\n      font-weight:600;\n      border:none;\n      box-shadow: 0 6px 18px rgba(6,182,212,0.12);\n    }\n    .btn.secondary{\n      background:transparent;\n      border:1px solid rgba(255,255,255,0.04);\n      color:var(--muted);\n      font-weight:600;\n      box-shadow:none;\n    }\n    .row{display:flex; gap:8px;}\n    .small{font-size:13px; padding:8px 10px;}\n    .visual{\n      min-height:320px;\n      display:flex;\n      flex-direction:column;\n      gap:12px;\n    }\n    .array-vis{\n      display:flex;\n      align-items:end;\n      gap:8px;\n      height:200px;\n      background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);\n      padding:16px;\n      border-radius:10px;\n      border:1px dashed rgba(255,255,255,0.02);\n      position:relative;\n      overflow:hidden;\n    }\n    .bar{\n      width:34px;\n      background:linear-gradient(180deg,#60a5fa33,#60a5fa22);\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      justify-content:flex-end;\n      border-radius:6px;\n      position:relative;\n      transition: all 200ms ease;\n      box-shadow: 0 6px 14px rgba(2,6,23,0.45) inset;\n      color:#dbeafe;\n      font-weight:700;\n      font-family:var(--mono);\n      user-select:none;\n    }\n    .bar .val{\n      padding:6px 4px;\n      font-size:12px;\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);\n      border-radius:4px;\n      margin-bottom:6px;\n      width:100%;\n      text-align:center;\n    }\n    .bar.index{\n      font-size:11px;\n      color:var(--muted);\n      margin-top:6px;\n      padding-bottom:6px;\n    }\n    .pointer{\n      position:absolute;\n      top:6px;\n      padding:4px 8px;\n      border-radius:6px;\n      font-size:12px;\n      color:#021025;\n      font-weight:700;\n      transform:translateX(-50%);\n      pointer-events:none;\n    }\n    .pointer.left{ background:linear-gradient(180deg, #34d399, #10b981); left:0;}\n    .pointer.right{ background:linear-gradient(180deg, #fb7185, #ef4444); left:100%;}\n    .pointer.center{ background:linear-gradient(180deg, #7c3aed, #6d28d9); left:50%;}\n    .status{\n      font-size:13px;\n      color:var(--muted);\n      display:flex;\n      justify-content:space-between;\n      align-items:center;\n      gap:10px;\n    }\n    .log{\n      margin-top:8px;\n      background:rgba(255,255,255,0.02);\n      border-radius:8px;\n      padding:10px;\n      max-height:160px;\n      overflow:auto;\n      font-family:var(--mono);\n      font-size:13px;\n      color:var(--muted);\n    }\n    .pseudocode{\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);\n      border-radius:8px;\n      padding:10px;\n      font-family:var(--mono);\n      font-size:13px;\n      color:#c4d6ea;\n      margin-top:10px;\n      white-space:pre;\n    }\n    .small-muted{font-size:13px; color:var(--muted);}\n    .footer{\n      margin-top:18px;\n      font-size:13px;\n      color:var(--muted);\n    }\n    .help{\n      margin-top:12px;\n      font-size:13px;\n      color:var(--muted);\n      line-height:1.5;\n    }\n    .found{\n      outline: 3px solid rgba(16,185,129,0.14);\n      box-shadow: 0 8px 30px rgba(16,185,129,0.06) inset;\n    }\n    .muted-pill{\n      padding:6px 8px;\n      border-radius:999px;\n      background:rgba(255,255,255,0.02);\n      color:var(--muted);\n      font-size:12px;\n    }\n    .note{\n      font-size:12px;\n      color:var(--muted);\n      margin-top:8px;\n    }\n\n    /* responsive */\n    @media (max-width:980px){\n      .grid{grid-template-columns: 1fr; }\n      header{flex-direction:column; align-items:flex-start; gap:6px;}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <header>\n      <div>\n        <h1>Two Pointers — Interactive Visualizations</h1>\n        <p class=\"lead\">Explore common two-pointer patterns: pair-sum in a sorted array, in-place remove duplicates, and maximizing water container. Step through the pointer movements to build intuition.</p>\n      </div>\n    </header>\n\n    <div class=\"grid\">\n      <div class=\"panel controls\">\n        <label for=\"problem\">Choose problem</label>\n        <select id=\"problem\">\n          <option value=\"pair\">Pair Sum (sorted array)</option>\n          <option value=\"remove\">Remove Duplicates (in-place)</option>\n          <option value=\"container\">Container With Most Water</option>\n        </select>\n\n        <div id=\"inputs\">\n          <div id=\"arr-input\" style=\"margin-top:10px;\">\n            <label for=\"array\">Array (comma or space separated numbers)</label>\n            <input id=\"array\" type=\"text\" placeholder=\"e.g. 1 2 2 3 4 5\">\n            <div style=\"margin-top:8px; display:flex; gap:8px;\">\n              <button class=\"btn small\" id=\"random\">Random</button>\n              <button class=\"btn secondary small\" id=\"clear-array\">Clear</button>\n            </div>\n          </div>\n\n          <div id=\"target-input\" style=\"margin-top:12px;\">\n            <label for=\"target\">Target (for Pair Sum)</label>\n            <input id=\"target\" type=\"number\" placeholder=\"e.g. 7\">\n            <div class=\"note\">Pair Sum assumes a sorted array. Use the \"Sort\" button or provide a sorted array.</div>\n            <div style=\"margin-top:8px; display:flex; gap:8px;\">\n              <button class=\"btn small\" id=\"sort-array\">Sort</button>\n              <button class=\"btn secondary small\" id=\"shuffle-array\">Shuffle</button>\n            </div>\n          </div>\n        </div>\n\n        <div style=\"margin-top:12px;\">\n          <label>Animation speed</label>\n          <input type=\"range\" id=\"speed\" min=\"50\" max=\"1500\" value=\"450\">\n          <div class=\"small-muted\" style=\"margin-top:6px;\">Step delay: <span id=\"speed-label\">450ms</span></div>\n        </div>\n\n        <div style=\"margin-top:12px;\">\n          <label>Controls</label>\n          <div class=\"row\">\n            <button class=\"btn\" id=\"start\">Start</button>\n            <button class=\"btn secondary\" id=\"pause\">Pause</button>\n            <button class=\"btn secondary\" id=\"step\">Step</button>\n            <button class=\"btn secondary\" id=\"reset\">Reset</button>\n          </div>\n        </div>\n\n        <div style=\"margin-top:12px;\">\n          <label>Quick examples</label>\n          <div class=\"row\">\n            <button class=\"btn small\" id=\"ex1\">Sorted with duplicates</button>\n            <button class=\"btn small\" id=\"ex2\">Heights (container)</button>\n            <button class=\"btn small\" id=\"ex3\">Pair-sum example</button>\n          </div>\n        </div>\n\n        <div class=\"help\">\n          <strong>Two pointers patterns:</strong>\n          <ul style=\"margin-top:8px; padding-left:18px; color:var(--muted);\">\n            <li>Opposite ends: left/right moving toward each other (pair-sum, max area).</li>\n            <li>Fast/slow: one pointer moves faster (find middle or detect cycles).</li>\n            <li>Sliding window: expand/contract window using two indices (subarray sums).</li>\n          </ul>\n        </div>\n\n        <div class=\"footer\">\n          Tip: enter small arrays (6–12 elements) for clearer visuals. Use the Step button to walk the algorithm manually.\n        </div>\n      </div>\n\n      <div class=\"panel visual\">\n        <div class=\"status\">\n          <div>\n            <span class=\"muted-pill\" id=\"problem-title\">Pair Sum (sorted array)</span>\n            <span style=\"margin-left:10px;\" id=\"info-extra\"></span>\n          </div>\n          <div class=\"small-muted\" id=\"complexity\">Time: O(n) • Space: O(1)</div>\n        </div>\n\n        <div id=\"vis-area\" style=\"position:relative;\">\n          <div class=\"array-vis\" id=\"array-vis\">\n            <!-- bars rendered here -->\n          </div>\n          <!-- pointers -->\n        </div>\n\n        <div class=\"log\" id=\"log\">Ready. Configure inputs and press Start.</div>\n\n        <div id=\"pseudocode\" class=\"pseudocode\"></div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    // Two Pointers interactive visualizer\n    (function(){\n      // UI elements\n      const problemEl = document.getElementById('problem');\n      const arrayEl = document.getElementById('array');\n      const targetEl = document.getElementById('target');\n      const startBtn = document.getElementById('start');\n      const pauseBtn = document.getElementById('pause');\n      const stepBtn = document.getElementById('step');\n      const resetBtn = document.getElementById('reset');\n      const randomBtn = document.getElementById('random');\n      const clearBtn = document.getElementById('clear-array');\n      const ex1Btn = document.getElementById('ex1');\n      const ex2Btn = document.getElementById('ex2');\n      const ex3Btn = document.getElementById('ex3');\n      const sortBtn = document.getElementById('sort-array');\n      const shuffleBtn = document.getElementById('shuffle-array');\n      const vis = document.getElementById('array-vis');\n      const logEl = document.getElementById('log');\n      const pcEl = document.getElementById('pseudocode');\n      const speedEl = document.getElementById('speed');\n      const speedLabel = document.getElementById('speed-label');\n      const titleEl = document.getElementById('problem-title');\n      const complexityEl = document.getElementById('complexity');\n      const infoExtra = document.getElementById('info-extra');\n\n      let state = {\n        arr: [],\n        steps: [],\n        stepIndex: 0,\n        playing: false,\n        timer: null,\n        currentProblem: 'pair'\n      };\n\n      const clamp = (v, a, b) => Math.max(a, Math.min(b, v));\n      function log(msg){\n        const p = document.createElement('div');\n        p.textContent = msg;\n        logEl.appendChild(p);\n        logEl.scrollTop = logEl.scrollHeight;\n      }\n\n      function parseArrayInput(text){\n        if(!text) return [];\n        // split by comma or space\n        const toks = text.trim().split(/[\\s,]+/).filter(Boolean);\n        const nums = toks.map(t => {\n          const n = Number(t);\n          return Number.isFinite(n) ? n : NaN;\n        });\n        if(nums.some(Number.isNaN)) return null;\n        return nums;\n      }\n\n      // rendering\n      function renderArray(arr, highlight = {}) {\n        vis.innerHTML = '';\n        if(!arr || arr.length === 0){\n          vis.innerHTML = '<div style=\"color:var(--muted); padding:12px;\">Array is empty — enter numbers and press Start.</div>';\n          return;\n        }\n        const maxVal = Math.max(1, ...arr.map(Math.abs));\n        const scale = (val) => {\n          // map to 20..160 px height\n          const h = Math.max(18, Math.round((Math.abs(val) / maxVal) * 140) + 18);\n          return h;\n        };\n        arr.forEach((v, i) => {\n          const bar = document.createElement('div');\n          bar.className = 'bar';\n          bar.style.height = scale(v) + 'px';\n          bar.style.width = (34) + 'px';\n          bar.dataset.index = i;\n          // color variations\n          bar.style.background = 'linear-gradient(180deg, rgba(99,102,241,0.18), rgba(99,102,241,0.06))';\n          // make found/unique markers\n          if(highlight.found && highlight.found.includes(i)) {\n            bar.classList.add('found');\n            bar.style.background = 'linear-gradient(180deg, rgba(16,185,129,0.18), rgba(16,185,129,0.06))';\n          } else if(highlight.unique && highlight.unique.includes(i)) {\n            bar.style.background = 'linear-gradient(180deg, rgba(99,102,241,0.18), rgba(124,58,237,0.06))';\n          } else if(highlight.left === i) {\n            bar.style.background = 'linear-gradient(180deg, rgba(34,197,94,0.18), rgba(16,185,129,0.06))';\n          } else if(highlight.right === i) {\n            bar.style.background = 'linear-gradient(180deg, rgba(251,113,133,0.18), rgba(239,68,68,0.06))';\n          } else if(highlight.moving === i) {\n            bar.style.background = 'linear-gradient(180deg, rgba(124,58,237,0.18), rgba(99,102,241,0.06))';\n          }\n          const val = document.createElement('div');\n          val.className = 'val';\n          val.textContent = v;\n          const idx = document.createElement('div');\n          idx.className = 'index';\n          idx.textContent = i;\n          bar.appendChild(val);\n          bar.appendChild(idx);\n          vis.appendChild(bar);\n        });\n\n        // pointer markers: create absolute positioned elements above the bars\n        const bars = Array.from(vis.querySelectorAll('.bar'));\n        function placePointer(kind, index, text){\n          if(index == null) return;\n          const bar = bars[index];\n          if(!bar) return;\n          const rect = bar.getBoundingClientRect();\n          const parentRect = vis.getBoundingClientRect();\n          const left = (rect.left - parentRect.left) + rect.width/2;\n          const ptr = document.createElement('div');\n          ptr.className = 'pointer ' + kind;\n          ptr.style.left = left + 'px';\n          ptr.textContent = text||kind;\n          vis.appendChild(ptr);\n        }\n        // highlight left/right pointers if provided\n        if(highlight.left != null) placePointer('left', highlight.left, 'L');\n        if(highlight.right != null) placePointer('right', highlight.right, 'R');\n        if(highlight.center != null) placePointer('center', highlight.center, 'mid');\n      }\n\n      // algorithms: produce an array of steps representing pointer states & messages\n      function generateStepsPairSum(arr, target){\n        const steps = [];\n        const a = arr.slice();\n        let l = 0, r = a.length-1;\n        steps.push({l,r, msg:`start left=${l}, right=${r}`});\n        while(l < r){\n          const s = a[l] + a[r];\n          if(s === target){\n            steps.push({l,r, found:[l,r], msg:`found a[${l}] + a[${r}] = ${a[l]} + ${a[r]} = ${target}`});\n            return steps;\n          } else if(s < target){\n            steps.push({l,r, msg:`sum=${s} < ${target}, move left`});\n            l++;\n            steps.push({l,r, msg:`moved left -> ${l}`});\n          } else {\n            steps.push({l,r, msg:`sum=${s} > ${target}, move right`});\n            r--;\n            steps.push({l,r, msg:`moved right -> ${r}`});\n          }\n        }\n        steps.push({l,r, msg:`no pair found`});\n        return steps;\n      }\n\n      function generateStepsRemoveDuplicates(arr){\n        // \"remove duplicates in sorted array\" — returns steps showing slow/fast pointers and state of array\n        const steps = [];\n        const a = arr.slice();\n        if(a.length === 0){\n          steps.push({i:null, j:null, arr:a.slice(), msg:'empty array'});\n          return steps;\n        }\n        let i = 0;\n        steps.push({i, j:0, arr:a.slice(), msg:`start i=${i}`});\n        for(let j=1;j<a.length;j++){\n          steps.push({i, j, arr:a.slice(), msg:`compare a[${j}]=${a[j]} with a[${i}]=${a[i]}`});\n          if(a[j] !== a[i]){\n            i++;\n            a[i] = a[j];\n            steps.push({i, j, arr:a.slice(), uniqueIndex:i, msg:`unique found, placed at i=${i}`});\n          } else {\n            steps.push({i, j, arr:a.slice(), msg:`duplicate -> skip`});\n          }\n        }\n        steps.push({i, j:null, arr:a.slice(), length:i+1, msg:`done. new length = ${i+1}`});\n        return steps;\n      }\n\n      function generateStepsContainer(arr){\n        const steps = [];\n        const a = arr.slice();\n        let l = 0, r = a.length-1;\n        let best = 0;\n        let bestPair = null;\n        steps.push({l,r,best, msg:`start l=${l}, r=${r}`});\n        while(l < r){\n          const height = Math.min(a[l], a[r]);\n          const width = r-l;\n          const area = height * width;\n          steps.push({l,r,curArea:area, msg:`compute area = min(${a[l]},${a[r]})*${width} = ${area}`});\n          if(area > best){\n            best = area; bestPair = [l,r];\n            steps.push({l,r,best,found:bestPair, msg:`new best=${best} at (${l},${r})`});\n          }\n          // move pointer from smaller height\n          if(a[l] < a[r]){\n            steps.push({l,r, msg:`a[${l}] < a[${r}] -> move left`});\n            l++;\n            steps.push({l,r, msg:`moved left -> ${l}`});\n          } else {\n            steps.push({l,r, msg:`a[${r}] <= a[${l}] -> move right`});\n            r--;\n            steps.push({l,r, msg:`moved right -> ${r}`});\n          }\n        }\n        steps.push({l,r,best, bestPair, msg:`done. max area = ${best} at ${bestPair ? `(${bestPair[0]},${bestPair[1]})` : 'none'}`});\n        return steps;\n      }\n\n      // prepare steps depending on problem\n      function prepare(){\n        const arr = parseArrayInput(arrayEl.value);\n        if(arr === null){\n          alert('Invalid array input — use only numbers separated by spaces or commas.');\n          return false;\n        }\n        if(arr.length === 0){\n          alert('Enter an array of numbers (at least 1).');\n          return false;\n        }\n        state.arr = arr;\n        state.steps = [];\n        state.stepIndex = 0;\n        const prob = problemEl.value;\n        state.currentProblem = prob;\n        if(prob === 'pair'){\n          titleEl.textContent = 'Pair Sum (sorted array)';\n          complexityEl.textContent = 'Time: O(n) • Space: O(1)';\n          const target = Number(targetEl.value);\n          if(!Number.isFinite(target)) {\n            alert('Enter a numeric target for Pair Sum.');\n            return false;\n          }\n          state.target = target;\n          // ideally sorted. If not sorted, we warn but still run on provided array or we can sort if user clicked Sort.\n          const isSorted = state.arr.every((v,i,a) => i===0 || a[i] >= a[i-1]);\n          if(!isSorted){\n            // allow but warn\n            if(!confirm('Array is not sorted. Pair Sum technique assumes a sorted array. Do you want to sort it automatically? (OK = sort, Cancel = continue anyway)')){\n              // continue with as-is\n              log('Warning: running on unsorted array (results may be incorrect).');\n            } else {\n              state.arr.sort((x,y)=>x-y);\n              arrayEl.value = state.arr.join(' ');\n              log('Array auto-sorted for Pair Sum.');\n            }\n          }\n          state.steps = generateStepsPairSum(state.arr, target);\n          pcEl.textContent = `# Pair Sum (Two pointers from ends)\\nleft = 0\\nright = n-1\\nwhile left < right:\\n  s = a[left] + a[right]\\n  if s == target: return (left,right)\\n  if s < target: left++\\n  else: right--\\nreturn not found`;\n        } else if(prob === 'remove'){\n          titleEl.textContent = 'Remove Duplicates (in-place)';\n          complexityEl.textContent = 'Time: O(n) • Space: O(1)';\n          state.steps = generateStepsRemoveDuplicates(state.arr);\n          pcEl.textContent = `# Remove duplicates (sorted array)\\ni = 0\\nfor j in 1..n-1:\\n  if a[j] != a[i]:\\n    i += 1\\n    a[i] = a[j]\\n# new length = i+1`;\n        } else if(prob === 'container'){\n          titleEl.textContent = 'Container With Most Water';\n          complexityEl.textContent = 'Time: O(n) • Space: O(1)';\n          state.steps = generateStepsContainer(state.arr);\n          pcEl.textContent = `# Container With Most Water\\nleft=0; right=n-1; best=0\\nwhile left < right:\\n  area = min(a[left],a[right])*(right-left)\\n  best = max(best, area)\\n  if a[left] < a[right]: left++\\n  else: right--\\nreturn best`;\n        }\n        // initial render\n        renderArray(state.arr);\n        logEl.innerHTML = 'Prepared. Press Start to play steps.';\n        return true;\n      }\n\n      // advance one step\n      function applyStep(step){\n        // render according to current problem\n        const prob = state.currentProblem;\n        if(prob === 'pair'){\n          const highlight = {};\n          if(step.l!=null) highlight.left = step.l;\n          if(step.r!=null) highlight.right = step.r;\n          if(step.found) highlight.found = step.found.slice();\n          renderArray(state.arr, highlight);\n          if(step.msg) log(`${step.msg}`);\n        } else if(prob === 'remove'){\n          // display array as step.arr and mark unique zone (0..i) and pointers\n          const highlight = {};\n          highlight.left = step.i;\n          if(step.j!=null) highlight.right = step.j;\n          // mark unique region\n          if(step.uniqueIndex!=null){\n            const uniq = [];\n            for(let k=0;k<=step.uniqueIndex;k++) uniq.push(k);\n            highlight.unique = uniq;\n          } else if(step.arr && step.length!=null){\n            const uniq = [];\n            for(let k=0;k<step.length;k++) uniq.push(k);\n            highlight.unique = uniq;\n          }\n          renderArray(step.arr, highlight);\n          if(step.msg) log(step.msg);\n        } else if(prob === 'container'){\n          const highlight = {};\n          if(step.l!=null) highlight.left = step.l;\n          if(step.r!=null) highlight.right = step.r;\n          if(step.found) highlight.found = step.found.slice();\n          if(step.curArea!=null) highlight.moving = (step.l+step.r)/2 | 0;\n          renderArray(state.arr, highlight);\n          if(step.msg) log(step.msg + (step.curArea!=null ? ` (area=${step.curArea})` : ''));\n        }\n      }\n\n      // playback\n      function play(){\n        if(state.playing) return;\n        state.playing = true;\n        startTimer();\n      }\n      function pause(){\n        state.playing = false;\n        if(state.timer) { clearTimeout(state.timer); state.timer = null; }\n      }\n      function startTimer(){\n        const delay = Number(speedEl.value);\n        speedLabel.textContent = delay + 'ms';\n        if(state.stepIndex >= state.steps.length){\n          state.playing = false;\n          return;\n        }\n        state.timer = setTimeout(() => {\n          const step = state.steps[state.stepIndex];\n          applyStep(step);\n          state.stepIndex++;\n          if(state.stepIndex < state.steps.length && state.playing){\n            startTimer();\n          } else {\n            state.playing = false;\n            log('Playback finished.');\n          }\n        }, delay);\n      }\n\n      // step forward manually\n      function stepOnce(){\n        if(state.stepIndex >= state.steps.length) {\n          log('No more steps.');\n          return;\n        }\n        const step = state.steps[state.stepIndex];\n        applyStep(step);\n        state.stepIndex++;\n        if(state.stepIndex >= state.steps.length){\n          log('Done.');\n        }\n      }\n\n      // reset\n      function reset(){\n        pause();\n        state.stepIndex = 0;\n        renderArray(state.arr);\n        logEl.innerHTML = 'Reset. Steps cleared. Press Start to run again.';\n      }\n\n      // attach events\n      startBtn.addEventListener('click', ()=> {\n        // if not prepared, prepare\n        if(state.steps.length === 0 || state.arr.length === 0 || state.currentProblem !== problemEl.value){\n          const ok = prepare();\n          if(!ok) return;\n        }\n        // resume from current step index\n        state.playing = true;\n        log('Starting playback...');\n        startTimer();\n      });\n\n      pauseBtn.addEventListener('click', ()=> {\n        pause();\n        log('Paused.');\n      });\n\n      stepBtn.addEventListener('click', ()=>{\n        if(state.steps.length === 0 || state.arr.length === 0 || state.currentProblem !== problemEl.value){\n          const ok = prepare();\n          if(!ok) return;\n        }\n        pause();\n        stepOnce();\n      });\n\n      resetBtn.addEventListener('click', ()=>{\n        const ok = prepare();\n        if(!ok) return;\n        reset();\n      });\n\n      // quick helpers\n      randomBtn.addEventListener('click', ()=>{\n        const prob = problemEl.value;\n        if(prob === 'container'){\n          // random heights 6-10 elements\n          const n = 6 + Math.floor(Math.random()*6);\n          const arr = Array.from({length:n}, ()=>Math.floor(Math.random()*9)+1);\n          arrayEl.value = arr.join(' ');\n        } else if(prob === 'remove'){\n          // generate sorted with duplicates\n          const n = 7 + Math.floor(Math.random()*6);\n          let v = 1;\n          const arr = [];\n          for(let i=0;i<n;i++){\n            if(Math.random() < 0.4) v += Math.floor(Math.random()*2);\n            arr.push(v);\n          }\n          arrayEl.value = arr.join(' ');\n        } else {\n          const n = 6 + Math.floor(Math.random()*6);\n          const arr = Array.from({length:n}, ()=>Math.floor(Math.random()*20)-5);\n          arr.sort((a,b)=>a-b);\n          arrayEl.value = arr.join(' ');\n        }\n        log('Random array created.');\n      });\n\n      clearBtn.addEventListener('click', ()=> {\n        arrayEl.value = '';\n        targetEl.value = '';\n        renderArray([]);\n        log('Cleared array.');\n      });\n\n      ex1Btn.addEventListener('click', ()=>{\n        // sorted with duplicates for remove duplicates\n        arrayEl.value = '1 1 2 2 2 3 4 4 5';\n        problemEl.value = 'remove';\n        problemEl.dispatchEvent(new Event('change'));\n      });\n      ex2Btn.addEventListener('click', ()=>{\n        arrayEl.value = '4 3 2 1 4 3 2';\n        problemEl.value = 'container';\n        problemEl.dispatchEvent(new Event('change'));\n      });\n      ex3Btn.addEventListener('click', ()=>{\n        arrayEl.value = '1 2 3 4 5 6 7 8';\n        targetEl.value = '11';\n        problemEl.value = 'pair';\n        problemEl.dispatchEvent(new Event('change'));\n      });\n\n      sortBtn.addEventListener('click', ()=>{\n        const arr = parseArrayInput(arrayEl.value);\n        if(arr === null){ alert('Invalid array'); return; }\n        arr.sort((a,b)=>a-b);\n        arrayEl.value = arr.join(' ');\n        log('Array sorted.');\n      });\n      shuffleBtn.addEventListener('click', ()=>{\n        const arr = parseArrayInput(arrayEl.value);\n        if(arr === null){ alert('Invalid array'); return; }\n        for(let i=arr.length-1;i>0;i--){\n          const j = Math.floor(Math.random()*(i+1));\n          [arr[i],arr[j]] = [arr[j],arr[i]];\n        }\n        arrayEl.value = arr.join(' ');\n        log('Array shuffled.');\n      });\n\n      problemEl.addEventListener('change', ()=>{\n        const p = problemEl.value;\n        // adjust UI visibility\n        if(p === 'pair'){\n          document.getElementById('target-input').style.display = '';\n          document.getElementById('arr-input').style.display = '';\n          infoExtra.textContent = '';\n        } else if(p === 'remove'){\n          document.getElementById('target-input').style.display = 'none';\n          document.getElementById('arr-input').style.display = '';\n          infoExtra.textContent = 'Requires sorted array';\n        } else if(p === 'container'){\n          document.getElementById('target-input').style.display = 'none';\n          document.getElementById('arr-input').style.display = '';\n          infoExtra.textContent = '';\n        }\n        // reset previous prepared steps\n        state.steps = [];\n        state.arr = [];\n        state.stepIndex = 0;\n        pcEl.textContent = '';\n        renderArray([]);\n        logEl.innerHTML = 'Problem changed. Enter inputs and press Start.';\n      });\n\n      speedEl.addEventListener('input', ()=>{\n        speedLabel.textContent = speedEl.value + 'ms';\n      });\n\n      // initial render\n      renderArray([]);\n      problemEl.dispatchEvent(new Event('change'));\n\n      // helpers: prepare before unload?\n      // nothing else\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Two Pointers"
    }
  ],
  "topic": "Two Pointers",
  "hasFSM": false,
  "hasTest": true
}