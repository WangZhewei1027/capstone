{
  "id": "be87d8a3-cd35-11f0-9e7b-93b903303299",
  "timestamp": "2025-11-29T15:13:53.546Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Sliding Window",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Sliding Window — Interactive Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --card:#0b1220;\n      --accent:#06b6d4;\n      --muted:#94a3b8;\n      --glass: rgba(255,255,255,0.03);\n      --good:#16a34a;\n      --bad:#ef4444;\n      --panel:#071025;\n      --text:#e6eef6;\n    }\n    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;}\n    body{\n      margin:0;\n      background:linear-gradient(180deg,#071028 0%, #0b1220 50%, #061226 100%);\n      color:var(--text);\n      min-height:100vh;\n      padding:18px;\n    }\n    header{display:flex;gap:12px;align-items:center;margin-bottom:12px;}\n    h1{font-size:20px;margin:0}\n    p.lead{margin:0;color:var(--muted);font-size:13px;}\n    .container{display:grid;grid-template-columns: 1fr 420px; gap:18px;align-items:start;}\n    .panel{\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      border:1px solid rgba(255,255,255,0.04);\n      padding:14px;border-radius:10px;box-shadow: 0 6px 18px rgba(2,6,23,0.55);\n    }\n    .controls{display:flex;flex-direction:column;gap:10px;}\n    label{font-size:12px;color:var(--muted);display:flex;justify-content:space-between;align-items:center;gap:10px;}\n    .row{display:flex;gap:8px;align-items:center;}\n    .btn{\n      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));\n      border:1px solid rgba(255,255,255,0.04);\n      color:var(--text);padding:8px 10px;border-radius:8px;cursor:pointer;font-size:13px;\n    }\n    .btn.primary{background:linear-gradient(180deg,var(--accent),#0497a8);color:#042028;border:none;}\n    .btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.04);}\n    input[type=\"range\"]{width:100%;}\n    .visual{\n      height:260px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border-radius:8px;padding:12px;display:flex;flex-direction:column;gap:8px;\n    }\n    .bars{\n      display:flex;gap:8px;align-items:end;height:180px;padding:6px;border-radius:6px;background:var(--panel);\n    }\n    .bar{\n      flex:1 0 28px;background:linear-gradient(180deg,#2a6b78,#07464f);border-radius:6px;display:flex;align-items:flex-end;justify-content:center;color:rgba(255,255,255,0.95);font-size:12px;\n      position:relative;transition:all 300ms ease;\n    }\n    .bar .val{transform:translateY(-6px);}\n    .bar.range{outline:4px solid rgba(6,182,212,0.15);box-shadow: 0 6px 20px rgba(6,182,212,0.06);}\n    .bar.left{outline:4px dashed rgba(99,102,241,0.12);box-shadow: 0 8px 26px rgba(99,102,241,0.03);}\n    .bar.right{outline:4px solid rgba(16,185,129,0.12);box-shadow: 0 8px 26px rgba(16,185,129,0.03);}\n    .bar.current{outline:4px solid rgba(234,88,12,0.14);}\n    .stats{display:flex;gap:8px;flex-wrap:wrap;}\n    .stat{background:var(--glass);padding:8px;border-radius:8px;min-width:120px;font-size:13px;color:var(--muted);}\n    pre{background:#02101a;color:#bfeefc;padding:10px;border-radius:8px;font-size:12px;overflow:auto;}\n    .small{font-size:12px;color:var(--muted);}\n    .footer-info{margin-top:8px;color:var(--muted);font-size:13px;line-height:1.3;}\n    .controls .group{background:transparent;padding:8px;border-radius:8px;display:flex;flex-direction:column;gap:8px;}\n    .flex-between{display:flex;justify-content:space-between;align-items:center;gap:8px;}\n    .code-block{max-height:220px;overflow:auto;}\n    .legend{display:flex;gap:8px;flex-wrap:wrap;font-size:12px;margin-top:6px;}\n    .legend .item{display:flex;gap:6px;align-items:center;padding-right:8px;}\n    .dot{width:14px;height:12px;border-radius:3px;display:inline-block;}\n    .dot.window{background:linear-gradient(180deg,#06b6d4,#0497a8);}\n    .dot.left{background:linear-gradient(180deg,#6366f1,#4f46e5);}\n    .dot.right{background:linear-gradient(180deg,#10b981,#059669);}\n    .dot.curr{background:linear-gradient(180deg,#f97316,#ea580c);}\n    footer{margin-top:12px;color:var(--muted);font-size:13px;}\n    /* responsive */\n    @media (max-width:940px){\n      .container{grid-template-columns:1fr;gap:12px;}\n    }\n  </style>\n</head>\n<body>\n  <header>\n    <div>\n      <h1>Sliding Window — Interactive Demo</h1>\n      <p class=\"lead\">Explore fixed-size and variable-size sliding window techniques with step-by-step animation and explanations.</p>\n    </div>\n  </header>\n\n  <div class=\"container\">\n    <div class=\"panel\">\n      <div class=\"controls\">\n        <div class=\"group\">\n          <div class=\"flex-between\">\n            <strong>Array</strong>\n            <div class=\"small\">Length: <span id=\"lenDisplay\">12</span></div>\n          </div>\n          <div style=\"display:flex;gap:8px;margin-top:6px;\">\n            <button class=\"btn\" id=\"randBtn\">Randomize</button>\n            <button class=\"btn ghost\" id=\"addBtn\">+ Add</button>\n            <button class=\"btn ghost\" id=\"remBtn\">- Remove</button>\n            <button class=\"btn\" id=\"presetBtn\">Preset</button>\n          </div>\n          <div class=\"small\" style=\"margin-top:8px;\">Click a bar to edit value.</div>\n        </div>\n\n        <div class=\"group\">\n          <strong>Fixed-size Sliding Window</strong>\n          <label>Window size k: <span id=\"kDisplay\">3</span></label>\n          <input type=\"range\" id=\"kRange\" min=\"1\" max=\"12\" value=\"3\" />\n          <div style=\"display:flex;gap:8px;\">\n            <button class=\"btn primary\" id=\"playFixed\">Play</button>\n            <button class=\"btn\" id=\"stepFixed\">Step</button>\n            <button class=\"btn\" id=\"resetFixed\">Reset</button>\n            <div style=\"flex:1\"></div>\n            <label class=\"small\">speed\n              <input id=\"speedFixed\" type=\"range\" min=\"100\" max=\"2000\" step=\"50\" value=\"700\" />\n            </label>\n          </div>\n        </div>\n\n        <div class=\"group\">\n          <strong>Variable-size Sliding Window (min length with sum ≥ target)</strong>\n          <label>Target sum: <span id=\"targetDisplay\">15</span></label>\n          <input type=\"range\" id=\"targetRange\" min=\"1\" max=\"100\" value=\"15\" />\n          <div style=\"display:flex;gap:8px;\">\n            <button class=\"btn primary\" id=\"playVar\">Play</button>\n            <button class=\"btn\" id=\"stepVar\">Step</button>\n            <button class=\"btn\" id=\"resetVar\">Reset</button>\n            <div style=\"flex:1\"></div>\n            <label class=\"small\">speed\n              <input id=\"speedVar\" type=\"range\" min=\"100\" max=\"2000\" step=\"50\" value=\"500\" />\n            </label>\n          </div>\n        </div>\n\n        <div class=\"group\">\n          <div class=\"flex-between\"><strong>Legend</strong></div>\n          <div class=\"legend\">\n            <div class=\"item\"><span class=\"dot window\"></span> Current fixed window</div>\n            <div class=\"item\"><span class=\"dot left\"></span> Variable left pointer</div>\n            <div class=\"item\"><span class=\"dot right\"></span> Variable right pointer</div>\n            <div class=\"item\"><span class=\"dot curr\"></span> Current focus</div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div class=\"panel\">\n      <div class=\"visual\">\n        <div class=\"bars\" id=\"bars\"></div>\n        <div style=\"display:flex;gap:10px;align-items:center;justify-content:space-between;\">\n          <div class=\"stats\" id=\"stats\">\n            <div class=\"stat\">Sum: <strong id=\"sumVal\">—</strong></div>\n            <div class=\"stat\">Average: <strong id=\"avgVal\">—</strong></div>\n            <div class=\"stat\">Max: <strong id=\"maxVal\">—</strong></div>\n            <div class=\"stat\">Min: <strong id=\"minVal\">—</strong></div>\n            <div class=\"stat\">Best (fixed): <strong id=\"bestFixed\">—</strong></div>\n            <div class=\"stat\">Best (variable): <strong id=\"bestVar\">—</strong></div>\n          </div>\n\n          <div style=\"width:220px;\">\n            <div style=\"font-size:13px;color:var(--muted);margin-bottom:6px;\">Current operation</div>\n            <div style=\"background:var(--glass);padding:10px;border-radius:8px;font-size:13px;color:var(--muted);\" id=\"operation\">\n              Idle — no animation running.\n            </div>\n          </div>\n        </div>\n\n        <div class=\"footer-info\">\n          Tip: Use the fixed window to see how sums can be updated in O(1) per shift. Use variable window to find the shortest subarray with sum >= target in O(n).\n        </div>\n      </div>\n\n      <div style=\"margin-top:12px;\">\n        <strong>Algorithm Summaries</strong>\n        <div style=\"display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:8px;\">\n          <div style=\"background:var(--panel);padding:10px;border-radius:8px;\">\n            <div style=\"font-weight:600;margin-bottom:6px;\">Fixed-size window (sum of every k)</div>\n            <div class=\"small\" style=\"margin-bottom:8px;\">\n              Compute sum of first k elements. For each shift, subtract the element that leaves and add the new entering element. O(n).\n            </div>\n            <pre class=\"code-block\">let sum = sum(arr[0..k-1]);\nfor i from 1 to n-k:\n  sum = sum - arr[i-1] + arr[i+k-1]\n  // record/use sum</pre>\n          </div>\n          <div style=\"background:var(--panel);padding:10px;border-radius:8px;\">\n            <div style=\"font-weight:600;margin-bottom:6px;\">Variable-size window (min length ≥ target)</div>\n            <div class=\"small\" style=\"margin-bottom:8px;\">\n              Expand right pointer until sum ≥ target, then shrink left pointer while sum still ≥ target to minimize length. O(n).\n            </div>\n            <pre class=\"code-block\">let left=0, sum=0, minLen=∞;\nfor right from 0 to n-1:\n  sum += arr[right]\n  while sum ≥ target:\n    minLen = min(minLen, right-left+1)\n    sum -= arr[left]\n    left++</pre>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <footer>\n    Built for learning — click, edit, and step through to see how sliding windows work.\n  </footer>\n\n<script>\n(() => {\n  // DATA & UI ELEMENTS\n  const defaultArr = [5,1,3,7,2,8,6,4,9,2,5,3];\n  let arr = defaultArr.slice();\n  const barsEl = document.getElementById('bars');\n  const lenDisplay = document.getElementById('lenDisplay');\n  const kRange = document.getElementById('kRange');\n  const kDisplay = document.getElementById('kDisplay');\n  const targetRange = document.getElementById('targetRange');\n  const targetDisplay = document.getElementById('targetDisplay');\n  const sumVal = document.getElementById('sumVal');\n  const avgVal = document.getElementById('avgVal');\n  const maxVal = document.getElementById('maxVal');\n  const minVal = document.getElementById('minVal');\n  const bestFixed = document.getElementById('bestFixed');\n  const bestVar = document.getElementById('bestVar');\n  const operation = document.getElementById('operation');\n  const randBtn = document.getElementById('randBtn');\n  const addBtn = document.getElementById('addBtn');\n  const remBtn = document.getElementById('remBtn');\n  const presetBtn = document.getElementById('presetBtn');\n\n  // Fixed window controls\n  const playFixed = document.getElementById('playFixed');\n  const stepFixed = document.getElementById('stepFixed');\n  const resetFixed = document.getElementById('resetFixed');\n  const speedFixed = document.getElementById('speedFixed');\n\n  // Variable window controls\n  const playVar = document.getElementById('playVar');\n  const stepVar = document.getElementById('stepVar');\n  const resetVar = document.getElementById('resetVar');\n  const speedVar = document.getElementById('speedVar');\n\n  // State for animations\n  let fixedTimer = null;\n  let varTimer = null;\n\n  // FIXED WINDOW STATE\n  let K = parseInt(kRange.value,10);\n  let fixedPos = 0;\n  let fixedSum = 0;\n  let fixedBest = {sum: -Infinity, pos: 0};\n  let fixedStarted = false;\n\n  // VAR WINDOW STATE\n  let target = parseInt(targetRange.value,10);\n  let left = 0, right = -1, varSum = 0;\n  let varBest = {len: Infinity, l: -1, r: -1};\n  let varStarted = false;\n\n  // Initialize UI & events\n  function renderBars(){\n    barsEl.innerHTML = '';\n    const maxValInArr = Math.max(...arr, 1);\n    arr.forEach((v,i) => {\n      const bar = document.createElement('div');\n      bar.className = 'bar';\n      bar.style.height = Math.max(24, Math.round((v / maxValInArr) * 160)) + 'px';\n      bar.dataset.index = i;\n      bar.innerHTML = '<div class=\"val\">' + v + '</div>';\n      bar.title = 'Index ' + i + ' value ' + v;\n      bar.addEventListener('click', onBarClick);\n      barsEl.appendChild(bar);\n    });\n    lenDisplay.textContent = arr.length;\n    // adjust kRange max\n    kRange.max = Math.max(1, arr.length);\n    if (K > arr.length) { K = arr.length; kRange.value = K; kDisplay.textContent = K; }\n    targetRange.max = Math.max(10, arr.reduce((a,b)=>a+b,0)+5);\n    targetDisplay.textContent = target;\n    updateSummary();\n    refreshHighlights();\n  }\n\n  function onBarClick(e){\n    const idx = parseInt(e.currentTarget.dataset.index,10);\n    const newVal = prompt('Enter new integer value at index ' + idx + ' (current ' + arr[idx] + '):', String(arr[idx]));\n    if(newVal === null) return;\n    const num = parseInt(newVal,10);\n    if(Number.isFinite(num)){\n      arr[idx] = num;\n      resetAll();\n      renderBars();\n    } else alert('Invalid number');\n  }\n\n  function randize(length = arr.length){\n    arr = Array.from({length}, ()=> Math.floor(Math.random()*18)+1);\n    resetAll();\n    renderBars();\n  }\n\n  function preset(){\n    arr = [2,1,5,2,8,1,3,6,4,2,1,7];\n    resetAll();\n    renderBars();\n  }\n\n  randBtn.addEventListener('click', ()=> randize(arr.length));\n  addBtn.addEventListener('click', ()=> { if(arr.length < 30) { arr.push(Math.floor(Math.random()*18)+1); resetAll(); renderBars(); }});\n  remBtn.addEventListener('click', ()=> { if(arr.length>1) { arr.pop(); resetAll(); renderBars(); }});\n  presetBtn.addEventListener('click', preset);\n\n  // Controls for K and target\n  kRange.addEventListener('input', (e)=> {\n    K = parseInt(e.target.value,10);\n    kDisplay.textContent = K;\n    resetFixed();\n    renderBars();\n  });\n  targetRange.addEventListener('input', (e)=> {\n    target = parseInt(e.target.value,10);\n    targetDisplay.textContent = target;\n    resetVar();\n    renderBars();\n  });\n\n  // Summary stats\n  function updateSummary(){\n    const s = arr.reduce((a,b)=>a+b,0);\n    sumVal.textContent = s;\n    avgVal.textContent = (s/arr.length).toFixed(2);\n    maxVal.textContent = Math.max(...arr);\n    minVal.textContent = Math.min(...arr);\n    bestFixed.textContent = fixedBest.sum === -Infinity ? '—' : `${fixedBest.sum} (pos ${fixedBest.pos})`;\n    bestVar.textContent = varBest.len === Infinity ? '—' : `${varBest.len} (${varBest.l}-${varBest.r})`;\n  }\n\n  // Highlighting function\n  function refreshHighlights(){\n    const bars = [...barsEl.children];\n    bars.forEach(b => b.className = 'bar'); // reset\n    // Fixed window highlight\n    if(fixedStarted && K <= arr.length){\n      for(let i=fixedPos;i<Math.min(fixedPos+K, arr.length); i++){\n        const el = bars[i];\n        if(el) el.classList.add('range');\n      }\n      // current focus (the newly added element)\n      const focusIdx = Math.min(fixedPos+K-1, arr.length-1);\n      if(bars[focusIdx]) bars[focusIdx].classList.add('current');\n    }\n    // Variable pointers highlight\n    if(varStarted){\n      if(left>=0 && left < bars.length) bars[left].classList.add('left');\n      if(right>=0 && right < bars.length) bars[right].classList.add('right');\n    }\n  }\n\n  // FIXED WINDOW LOGIC\n  function computeInitialFixed(){\n    fixedPos = 0;\n    fixedSum = 0;\n    if(K <= arr.length){\n      fixedSum = arr.slice(0,K).reduce((a,b)=>a+b,0);\n      fixedBest = {sum: fixedSum, pos: 0};\n    } else {\n      fixedSum = 0; fixedBest = {sum:-Infinity,pos:0};\n    }\n    updateSummary();\n    operation.textContent = 'Fixed window initialized. sum(arr[0..' + (K-1) + ']) = ' + fixedSum;\n    fixedStarted = false;\n    refreshHighlights();\n  }\n\n  function stepFixedOnce(){\n    if(K > arr.length) {\n      operation.textContent = 'Window size K is larger than array length.';\n      return;\n    }\n    // On first call, if not started, just compute initial\n    if(!fixedStarted){\n      fixedStarted = true;\n      computeInitialFixed();\n      refreshHighlights();\n      return;\n    }\n    // move window by 1\n    if(fixedPos + K >= arr.length){\n      operation.textContent = 'Reached end of array.';\n      stopFixed();\n      return;\n    }\n    const leaving = arr[fixedPos];\n    const entering = arr[fixedPos + K];\n    const prevSum = fixedSum;\n    fixedSum = fixedSum - leaving + entering;\n    fixedPos++;\n    operation.innerHTML = `Shift window: subtract ${leaving}, add ${entering} → new sum = ${fixedSum}`;\n    if(fixedSum > fixedBest.sum){\n      fixedBest = {sum: fixedSum, pos: fixedPos};\n      operation.innerHTML += ` — new best! (sum=${fixedBest.sum} at pos ${fixedBest.pos})`;\n    }\n    updateSummary();\n    refreshHighlights();\n  }\n\n  function playFixedLoop(){\n    if(fixedTimer) return;\n    if(K > arr.length){ operation.textContent = 'Window size too big for play.'; return; }\n    if(!fixedStarted){\n      computeInitialFixed();\n      fixedStarted = true;\n      refreshHighlights();\n    }\n    operation.textContent = 'Playing fixed window animation...';\n    fixedTimer = setInterval(() => {\n      stepFixedOnce();\n      if(fixedPos + K >= arr.length){\n        stopFixed();\n      }\n    }, parseInt(speedFixed.value,10));\n  }\n  function stopFixed(){\n    if(fixedTimer){\n      clearInterval(fixedTimer); fixedTimer = null;\n      operation.textContent = 'Paused (fixed window reached end or stopped).';\n    }\n  }\n  playFixed.addEventListener('click', ()=> {\n    if(fixedTimer) { stopFixed(); playFixed.textContent = 'Play'; playFixed.classList.remove('primary'); }\n    else { playFixedLoop(); playFixed.textContent = 'Pause'; playFixed.classList.add('primary'); }\n  });\n  stepFixed.addEventListener('click', ()=> { stepFixedOnce(); });\n  resetFixed.addEventListener('click', ()=> { resetFixed(); renderBars(); });\n\n  function resetFixed(){\n    stopFixed();\n    fixedPos = 0; fixedSum = 0; fixedBest = {sum:-Infinity,pos:0}; fixedStarted = false;\n    playFixed.textContent = 'Play'; playFixed.classList.remove('primary');\n    operation.textContent = 'Fixed window reset.';\n    updateSummary(); refreshHighlights();\n  }\n\n  // VARIABLE WINDOW LOGIC\n  function computeInitialVar(){\n    left = 0; right = -1; varSum = 0; varBest = {len: Infinity, l:-1, r:-1};\n    varStarted = false;\n    operation.textContent = 'Variable window initialized (finding min length with sum ≥ ' + target + ').';\n    updateSummary(); refreshHighlights();\n  }\n\n  function stepVarOnce(){\n    // staged stepping: if not started, start by moving right once\n    if(!varStarted){\n      varStarted = true;\n      left = 0; right = -1; varSum = 0; varBest = {len: Infinity, l:-1, r:-1};\n      operation.textContent = 'Start variable sliding. Expand right.';\n      refreshHighlights();\n      return;\n    }\n    // If sum < target, expand right\n    if(varSum < target){\n      if(right+1 >= arr.length){\n        operation.textContent = 'Cannot expand: reached end. Algorithm finished.';\n        stopVar();\n        return;\n      }\n      right++;\n      varSum += arr[right];\n      operation.innerHTML = `Expanded right → index ${right}, add ${arr[right]}, sum=${varSum}`;\n      if(varSum >= target){\n        operation.innerHTML += ` (sum ≥ target) — try shrinking from left.`;\n      }\n      refreshHighlights();\n      // Record potential candidate in later step when shrink occurs\n      return;\n    } else {\n      // sum >= target, try to shrink from left\n      const currLen = right - left + 1;\n      if(currLen < varBest.len){\n        varBest = {len: currLen, l:left, r:right};\n        operation.innerHTML = `Found candidate length ${currLen} (indexes ${left}-${right}). Shrink left to try shorter.`;\n      } else {\n        operation.innerHTML = `Current window length ${currLen} >= best ${varBest.len || '∞'}. Shrink left.`;\n      }\n      // shrink\n      varSum -= arr[left];\n      operation.innerHTML += ` Subtract arr[${left}]=${arr[left]} => sum=${varSum}`;\n      left++;\n      refreshHighlights();\n      // If after shrinking still >= target, further shrinking will be handled by subsequent steps.\n    }\n  }\n\n  function playVarLoop(){\n    if(varTimer) return;\n    computeInitialVar();\n    varStarted = true;\n    operation.textContent = 'Playing variable window animation...';\n    varTimer = setInterval(() => {\n      // follow algorithm: expand until sum >= target, then shrink until sum < target, repeat\n      if(varSum < target){\n        if(right+1 >= arr.length){\n          operation.textContent = 'Reached end and cannot expand further. Done.';\n          stopVar();\n          return;\n        }\n        right++;\n        varSum += arr[right];\n        operation.innerHTML = `Expanded right → index ${right}, add ${arr[right]}, sum=${varSum}`;\n        refreshHighlights();\n      } else {\n        // shrink while possible (but in animation we shrink one step per tick to be visual)\n        const currLen = right - left + 1;\n        if(currLen < varBest.len){\n          varBest = {len: currLen, l:left, r:right};\n          operation.innerHTML = `Found candidate length ${currLen} (indexes ${left}-${right}). Shrinking left.`;\n        } else {\n          operation.innerHTML = `Shrinking left (current length ${currLen}).`;\n        }\n        varSum -= arr[left];\n        operation.innerHTML += ` Subtract arr[${left}]=${arr[left]} => sum=${varSum}`;\n        left++;\n        refreshHighlights();\n        // If after shrink sum < target and right at end, we may end soon\n        if(varSum < target && right >= arr.length-1){\n          // if cannot expand further and sum < target, done\n          if(right >= arr.length-1){\n            operation.innerHTML += ' Cannot expand further. Done.';\n            stopVar();\n          }\n        }\n      }\n      updateSummary();\n      // termination condition: when right==n-1 and varSum < target and no more shrinking possible or we've inspected all states\n      if(right >= arr.length-1 && varSum < target && (left > right || right >= arr.length-1 && left >= arr.length)){\n        stopVar();\n      }\n      // extra termination: if left > right and right at end\n      if(right >= arr.length-1 && left > right){\n        stopVar();\n      }\n    }, parseInt(speedVar.value,10));\n  }\n\n  function stopVar(){\n    if(varTimer){\n      clearInterval(varTimer); varTimer = null;\n      operation.textContent = 'Paused (variable window paused or finished).';\n    }\n    updateSummary();\n  }\n\n  playVar.addEventListener('click', ()=> {\n    if(varTimer) { stopVar(); playVar.textContent = 'Play'; playVar.classList.remove('primary'); }\n    else { playVarLoop(); playVar.textContent = 'Pause'; playVar.classList.add('primary'); }\n  });\n  stepVar.addEventListener('click', ()=> { stepVarOnce(); updateSummary(); });\n  resetVar.addEventListener('click', ()=> { resetVar(); renderBars(); });\n\n  function resetVar(){\n    stopVar();\n    left = 0; right = -1; varSum = 0; varBest = {len:Infinity,l:-1,r:-1}; varStarted = false;\n    playVar.textContent = 'Play'; playVar.classList.remove('primary');\n    operation.textContent = 'Variable window reset.';\n    updateSummary(); refreshHighlights();\n  }\n\n  function resetAll(){\n    resetFixed(); resetVar();\n  }\n\n  // init\n  function init(){\n    arr = defaultArr.slice();\n    K = parseInt(kRange.value,10);\n    target = parseInt(targetRange.value,10);\n    kDisplay.textContent = K;\n    targetDisplay.textContent = target;\n    renderBars();\n    computeInitialFixed();\n    computeInitialVar();\n  }\n\n  init();\n\n  // Make sure we update UI when timers stop externally\n  window.addEventListener('beforeunload', ()=>{ stopFixed(); stopVar(); });\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Sliding Window"
    }
  ],
  "topic": "Sliding Window",
  "hasFSM": false,
  "hasTest": true
}