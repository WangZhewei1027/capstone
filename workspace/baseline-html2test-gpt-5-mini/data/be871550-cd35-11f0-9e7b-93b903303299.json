{
  "id": "be871550-cd35-11f0-9e7b-93b903303299",
  "timestamp": "2025-11-29T15:13:37.979Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Array",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Array Playground — Interactive JavaScript Array Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  <style>\n    :root{\n      --bg:#0f1724; --panel:#0b1220; --muted:#93a3b5; --accent:#60a5fa; --accent2:#7dd3fc;\n      --card:#0b1226; --success:#16a34a; --danger:#ef4444; --glass: rgba(255,255,255,0.03);\n    }\n    html,body{height:100%; margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial; background:linear-gradient(180deg,#041226 0%, #081425 100%); color:white; -webkit-font-smoothing:antialiased;}\n    .wrap{max-width:1100px; margin:24px auto; padding:20px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow: 0 8px 30px rgba(2,6,23,0.7);}\n    header{display:flex; gap:12px; align-items:center; margin-bottom:14px;}\n    header h1{font-size:20px; margin:0; letter-spacing:-0.2px;}\n    header p{margin:0; color:var(--muted); font-size:13px;}\n    .grid{display:grid; grid-template-columns: 360px 1fr 360px; gap:16px;}\n    .panel{background:var(--panel); padding:14px; border-radius:10px; min-height:120px;}\n    .controls label{display:block; font-size:13px; color:var(--muted); margin-top:8px;}\n    input[type=\"text\"], select{width:100%; padding:8px 10px; margin-top:6px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:white; outline:none;}\n    button{background:linear-gradient(180deg,var(--accent), var(--accent2)); color:#022; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; margin:6px 6px 6px 0; font-weight:600;}\n    button.alt{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted);}\n    .small{font-size:13px; padding:6px 8px;}\n    .array-visual{display:flex; gap:8px; flex-wrap:wrap; align-items:flex-start; padding:8px; min-height:80px;}\n    .cell{min-width:56px; height:48px; border-radius:8px; background:var(--card); display:flex; flex-direction:column; justify-content:center; align-items:center; gap:4px; padding:6px; box-shadow: 0 4px 18px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);}\n    .index{font-size:11px; color:var(--muted);}\n    .value{font-weight:700;}\n    .log{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02)); padding:10px; border-radius:8px; max-height:260px; overflow:auto; font-family:monospace; font-size:13px; color:var(--muted);}\n    .ops{display:flex; flex-wrap:wrap; gap:6px; margin-top:8px;}\n    footer{margin-top:12px; color:var(--muted); font-size:13px; display:flex; justify-content:space-between; align-items:center;}\n    .badge{background:var(--glass); padding:6px 8px; border-radius:8px; font-size:13px; color:var(--muted);}\n    .row{display:flex; gap:8px; align-items:center;}\n    .examples button{background:linear-gradient(180deg,#34d399,#60a5fa); color:#022;}\n    .muted{color:var(--muted); font-size:13px;}\n    .chip{background:rgba(255,255,255,0.03); padding:6px 8px; border-radius:999px; font-size:12px; color:var(--muted);}\n    .highlight{color:var(--accent2); font-weight:700;}\n    .right-title{display:flex; justify-content:space-between; align-items:center;}\n    @media (max-width:1000px){\n      .grid{grid-template-columns: 1fr; }\n      .panel{min-height:unset;}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <header>\n      <div>\n        <h1>Array Playground</h1>\n        <p>Interactive demo of JavaScript arrays: create, modify, inspect, map, filter, reduce, and more.</p>\n      </div>\n      <div style=\"margin-left:auto\" class=\"badge\">JS arrays • dynamic • visual</div>\n    </header>\n\n    <div class=\"grid\">\n      <!-- Left: Controls -->\n      <div class=\"panel controls\">\n        <div style=\"display:flex; justify-content:space-between; align-items:center;\">\n          <strong>Create / Load Array</strong>\n          <span class=\"chip\">length: <span id=\"len\">0</span></span>\n        </div>\n\n        <label>Comma-separated values (numbers or strings)\n          <input id=\"inputArray\" type=\"text\" placeholder=\"e.g. 1,2,3,hello,true\">\n        </label>\n        <div style=\"margin-top:8px;\">\n          <button id=\"btnLoad\">Load Array</button>\n          <button id=\"btnRandom\" class=\"alt small\">Random (numbers)</button>\n          <button id=\"btnClear\" class=\"alt small\">Clear</button>\n        </div>\n\n        <label>Quick examples\n          <div class=\"examples\" style=\"margin-top:6px;\">\n            <button id=\"exNums\" class=\"small\">[1,2,3,4]</button>\n            <button id=\"exStr\" class=\"small alt\">['a','b','c']</button>\n            <button id=\"exNested\" class=\"small alt\">Nested [[1,2],[3,4]]</button>\n            <button id=\"exMixed\" class=\"small alt\">Mixed [1,'x',true]</button>\n          </div>\n        </label>\n\n        <label style=\"margin-top:10px;\">Array Type\n          <select id=\"arrayType\">\n            <option value=\"normal\">Normal Array (Array)</option>\n            <option value=\"int16\">Int16Array (Typed)</option>\n            <option value=\"float32\">Float32Array (Typed)</option>\n          </select>\n        </label>\n\n        <div style=\"margin-top:10px;\">\n          <strong>Mutate</strong>\n          <div class=\"ops\">\n            <button id=\"push\" class=\"small\">push(value)</button>\n            <button id=\"pop\" class=\"small alt\">pop()</button>\n            <button id=\"shift\" class=\"small\">shift()</button>\n            <button id=\"unshift\" class=\"small alt\">unshift(value)</button>\n            <button id=\"splice\" class=\"small\">splice(i,del,items...)</button>\n            <button id=\"slice\" class=\"small alt\">slice(start,end)</button>\n            <button id=\"concat\" class=\"small\">concat(other)</button>\n            <button id=\"fill\" class=\"small alt\">fill(value,start?,end?)</button>\n            <button id=\"reverse\" class=\"small\">reverse()</button>\n            <button id=\"sort\" class=\"small alt\">sort()</button>\n            <button id=\"flat\" class=\"small\">flat(depth)</button>\n          </div>\n        </div>\n\n        <label style=\"margin-top:10px;\">Value for operations\n          <input id=\"opValue\" type=\"text\" placeholder=\"value (e.g. 42 or 'x')\">\n        </label>\n        <div style=\"margin-top:6px;\">\n          <input id=\"opIndex\" type=\"text\" placeholder=\"index or start (e.g. 1)\">\n          <input id=\"opEnd\" type=\"text\" placeholder=\"end or count (e.g. 2)\" style=\"margin-left:6px;\">\n        </div>\n      </div>\n\n      <!-- Center: Visualization & Log -->\n      <div class=\"panel\">\n        <div class=\"right-title\">\n          <div>\n            <strong>Array Visualizer</strong>\n            <div class=\"muted\">Shows indexes and values. Click a cell to remove it.</div>\n          </div>\n          <div class=\"muted\">Type: <span id=\"currentType\">Array</span></div>\n        </div>\n\n        <div id=\"visual\" class=\"array-visual\" style=\"margin-top:12px;\"></div>\n\n        <div style=\"display:flex; justify-content:space-between; margin-top:12px; align-items:center;\">\n          <div><strong>Console Log</strong> <span class=\"muted\">(operations & results)</span></div>\n          <div>\n            <button id=\"clearLog\" class=\"alt small\">Clear Log</button>\n            <button id=\"export\" class=\"alt small\">Export JSON</button>\n          </div>\n        </div>\n        <div id=\"log\" class=\"log\" style=\"margin-top:8px;\"></div>\n      </div>\n\n      <!-- Right: Higher-order & Examples -->\n      <div class=\"panel\">\n        <div style=\"display:flex; justify-content:space-between; align-items:center;\">\n          <strong>Higher-order functions</strong>\n          <span class=\"muted\">map, filter, reduce, find...</span>\n        </div>\n\n        <div style=\"margin-top:8px;\">\n          <div class=\"ops\">\n            <button id=\"mapBtn\" class=\"small\">map(x => x*2)</button>\n            <button id=\"filterBtn\" class=\"small alt\">filter(x => condition)</button>\n            <button id=\"reduceBtn\" class=\"small\">reduce((a,b)=>a+b,0)</button>\n            <button id=\"findBtn\" class=\"small alt\">find(x => )</button>\n            <button id=\"someBtn\" class=\"small\">some(x => )</button>\n            <button id=\"everyBtn\" class=\"small alt\">every(x => )</button>\n            <button id=\"forEachBtn\" class=\"small\">forEach</button>\n            <button id=\"flatMapBtn\" class=\"small alt\">flatMap</button>\n          </div>\n        </div>\n\n        <label style=\"margin-top:10px;\">Expression input\n          <input id=\"expr\" type=\"text\" placeholder=\"e.g. x => x > 2  OR (a,b)=>a+b\">\n        </label>\n\n        <div style=\"margin-top:10px;\">\n          <strong>Utilities</strong>\n          <div class=\"ops\" style=\"margin-top:6px;\">\n            <button id=\"copySlice\" class=\"small\">copy (slice / spread)</button>\n            <button id=\"toString\" class=\"small alt\">join()</button>\n            <button id=\"indexOf\" class=\"small\">indexOf(value)</button>\n            <button id=\"includes\" class=\"small alt\">includes(value)</button>\n            <button id=\"flatten1\" class=\"small\">flat(1)</button>\n            <button id=\"typedDemo\" class=\"small alt\">TypedArray demo</button>\n          </div>\n        </div>\n\n        <div style=\"margin-top:12px;\">\n          <strong>Examples & Recipes</strong>\n          <div class=\"muted\" style=\"margin-top:6px;\">Click to run common patterns:</div>\n          <div class=\"ops\" style=\"margin-top:8px;\">\n            <button id=\"evens\" class=\"small\">Filter evens</button>\n            <button id=\"sum\" class=\"small alt\">Sum numbers</button>\n            <button id=\"unique\" class=\"small\">Unique values</button>\n            <button id=\"groupBy\" class=\"small alt\">Group by (parity)</button>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <footer>\n      <div class=\"muted\">Tip: type JavaScript expressions for callbacks, e.g. x => x*2 or (a,b)=>a+b</div>\n      <div class=\"muted\">Click a visual cell to remove it from the array</div>\n    </footer>\n  </div>\n\n<script>\n(function(){\n  // Core state\n  let arr = []; // can be Array or TypedArray\n  let type = 'normal'; // 'normal'|'int16'|'float32'\n  const visual = document.getElementById('visual');\n  const logEl = document.getElementById('log');\n  const lenEl = document.getElementById('len');\n  const typeEl = document.getElementById('currentType');\n\n  // Helpers\n  function parseInputToArray(text) {\n    if (!text.trim()) return [];\n    // Try to parse JSON first\n    try {\n      const j = JSON.parse(text);\n      if (Array.isArray(j)) return j;\n    } catch(e){}\n    // Fallback: split by commas and coerce numbers/booleans/null\n    return text.split(',').map(s => {\n      const t = s.trim();\n      if (t === '') return '';\n      if (t === 'null') return null;\n      if (t === 'undefined') return undefined;\n      if (t === 'true') return true;\n      if (t === 'false') return false;\n      // number?\n      if (!isNaN(Number(t))) return Number(t);\n      // quoted string?\n      if ((t.startsWith('\"') && t.endsWith('\"')) || (t.startsWith(\"'\") && t.endsWith(\"'\"))) {\n        return t.slice(1,-1);\n      }\n      return t;\n    });\n  }\n\n  function createArrayFromJs(v) {\n    if (type === 'normal') return Array.isArray(v) ? v.slice() : Array.from(v || []);\n    if (type === 'int16') {\n      const flat = Array.isArray(v) ? v.map(x=>Number(x)||0) : Array.from(v||[]);\n      return new Int16Array(flat);\n    }\n    if (type === 'float32') {\n      const flat = Array.isArray(v) ? v.map(x=>Number(x)||0) : Array.from(v||[]);\n      return new Float32Array(flat);\n    }\n  }\n\n  function ensureNormal() {\n    if (type === 'normal' || Array.isArray(arr)) return;\n    // convert typed array to normal array\n    arr = Array.from(arr);\n    type = 'normal';\n    document.getElementById('arrayType').value = 'normal';\n    updateTypeLabel();\n    log('Converted typed array -> normal Array');\n  }\n\n  function render() {\n    visual.innerHTML = '';\n    const a = arr;\n    const isTyped = ArrayBuffer.isView(a) && !(a instanceof DataView);\n    lenEl.textContent = a ? a.length : 0;\n    typeEl.textContent = isTyped ? (a.constructor && a.constructor.name) : (Array.isArray(a) ? 'Array' : typeof a);\n    // render cells\n    for (let i = 0; i < (a ? a.length : 0); i++) {\n      const cell = document.createElement('div');\n      cell.className = 'cell';\n      const idx = document.createElement('div');\n      idx.className = 'index';\n      idx.textContent = i;\n      const val = document.createElement('div');\n      val.className = 'value';\n      try {\n        const v = a[i];\n        val.textContent = stringifyValue(v);\n      } catch(e){\n        val.textContent = '?';\n      }\n      cell.appendChild(idx);\n      cell.appendChild(val);\n      // clickable removal (only for normal arrays)\n      cell.addEventListener('click', () => {\n        if (Array.isArray(arr)) {\n          const removed = arr.splice(i,1);\n          log(`splice(${i},1) -> removed ${stringifyValue(removed[0])}`);\n          render();\n        } else {\n          log('Cannot remove by click from TypedArray (fixed length). Convert to normal array to mutate freely.');\n        }\n      });\n      visual.appendChild(cell);\n    }\n    // show info row if empty\n    if (!a || a.length === 0) {\n      const note = document.createElement('div');\n      note.className = 'muted';\n      note.textContent = 'Array is empty — load values on the left or try examples on the right.';\n      visual.appendChild(note);\n    }\n  }\n\n  function stringifyValue(v) {\n    if (typeof v === 'string') return `\"${v}\"`;\n    if (v === null) return 'null';\n    if (v === undefined) return 'undefined';\n    if (Array.isArray(v)) return '[' + v.map(stringifyValue).join(',') + ']';\n    if (typeof v === 'object') {\n      try { return JSON.stringify(v); } catch(e){ return String(v); }\n    }\n    return String(v);\n  }\n\n  function log(...parts) {\n    const time = new Date().toLocaleTimeString();\n    const line = document.createElement('div');\n    line.innerHTML = `<span style=\"color:var(--muted);font-size:12px\">[${time}]</span> ` + parts.map(p => {\n      if (typeof p === 'string') return escapeHtml(p);\n      try { return escapeHtml(JSON.stringify(p)); } catch(e){ return escapeHtml(String(p)); }\n    }).join(' ');\n    logEl.prepend(line);\n  }\n\n  function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }\n\n  // Wire up controls\n  document.getElementById('btnLoad').addEventListener('click', () => {\n    const txt = document.getElementById('inputArray').value;\n    const parsed = parseInputToArray(txt);\n    arr = createArrayFromJs(parsed);\n    log('Loaded array:', parsed);\n    render();\n  });\n\n  document.getElementById('btnRandom').addEventListener('click', ()=>{\n    const n = 6;\n    const a = Array.from({length:n}, ()=>Math.floor(Math.random()*100));\n    arr = createArrayFromJs(a);\n    log('Random array:', a);\n    render();\n  });\n\n  document.getElementById('btnClear').addEventListener('click', ()=> {\n    arr = createArrayFromJs([]);\n    log('Cleared array');\n    render();\n  });\n\n  // Examples\n  document.getElementById('exNums').addEventListener('click', ()=> {\n    arr = createArrayFromJs([1,2,3,4]);\n    log('Example: [1,2,3,4]');\n    render();\n  });\n  document.getElementById('exStr').addEventListener('click', ()=> {\n    arr = createArrayFromJs(['a','b','c']);\n    log(\"Example: ['a','b','c']\");\n    render();\n  });\n  document.getElementById('exNested').addEventListener('click', ()=> {\n    arr = createArrayFromJs([[1,2],[3,4]]);\n    log('Example: nested arrays [[1,2],[3,4]]');\n    render();\n  });\n  document.getElementById('exMixed').addEventListener('click', ()=> {\n    arr = createArrayFromJs([1,'x',true,null]);\n    log('Example: mixed [1,\"x\",true,null]');\n    render();\n  });\n\n  // Array type selector\n  document.getElementById('arrayType').addEventListener('change', (e)=>{\n    const v = e.target.value;\n    if (v === type) return;\n    type = v;\n    // convert current arr to new type\n    arr = createArrayFromJs(Array.isArray(arr) ? arr : Array.from(arr));\n    updateTypeLabel();\n    log('Changed array type to', type);\n    render();\n  });\n\n  function updateTypeLabel(){\n    const isTyped = ArrayBuffer.isView(arr) && !(arr instanceof DataView);\n    typeEl.textContent = isTyped ? (arr.constructor && arr.constructor.name) : (Array.isArray(arr) ? 'Array' : typeof arr);\n  }\n\n  // Basic mutating ops\n  document.getElementById('push').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('push: convert to normal Array first.'); ensureNormal(); }\n    const v = parseSingle(document.getElementById('opValue').value);\n    arr.push(v);\n    log('push(', stringifyValue(v), ')');\n    render();\n  });\n  document.getElementById('pop').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('pop: cannot pop from TypedArray. Convert to normal Array.'); return; }\n    const r = arr.pop();\n    log('pop() ->', stringifyValue(r));\n    render();\n  });\n  document.getElementById('shift').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('shift: convert to normal Array first.'); ensureNormal(); }\n    const r = arr.shift();\n    log('shift() ->', stringifyValue(r));\n    render();\n  });\n  document.getElementById('unshift').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('unshift: convert to normal Array first.'); ensureNormal(); }\n    const v = parseSingle(document.getElementById('opValue').value);\n    arr.unshift(v);\n    log('unshift(', stringifyValue(v), ')');\n    render();\n  });\n\n  document.getElementById('splice').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('splice: convert to normal Array first.'); ensureNormal(); }\n    const i = Number(document.getElementById('opIndex').value) || 0;\n    const del = (document.getElementById('opEnd').value === '') ? undefined : Number(document.getElementById('opEnd').value);\n    const itemsTxt = document.getElementById('opValue').value;\n    const items = itemsTxt ? parseInputToArray(itemsTxt) : [];\n    const r = arr.splice(i, isNaN(del) ? undefined : del, ...items);\n    log(`splice(${i},${isNaN(del)?''+arr.length:del},[${items.map(stringifyValue).join(',')}]) -> removed ${stringifyValue(r)}`);\n    render();\n  });\n\n  document.getElementById('slice').addEventListener('click', ()=> {\n    const s = document.getElementById('opIndex').value === '' ? 0 : Number(document.getElementById('opIndex').value);\n    const e = document.getElementById('opEnd').value === '' ? undefined : Number(document.getElementById('opEnd').value);\n    const r = Array.prototype.slice.call(arr, s, e);\n    log(`slice(${s},${e}) ->`, r);\n    // show result in a popup-ish: set arr to result\n    arr = createArrayFromJs(r);\n    render();\n  });\n\n  document.getElementById('concat').addEventListener('click', ()=> {\n    const v = parseInputToArray(document.getElementById('opValue').value || '');\n    const result = Array.prototype.concat.call(Array.isArray(arr)?arr:Array.from(arr), v);\n    arr = createArrayFromJs(result);\n    log('concat ->', result);\n    render();\n  });\n\n  document.getElementById('fill').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('fill: convert to normal Array first.'); ensureNormal(); }\n    const v = parseSingle(document.getElementById('opValue').value);\n    const s = document.getElementById('opIndex').value === '' ? 0 : Number(document.getElementById('opIndex').value);\n    const e = document.getElementById('opEnd').value === '' ? undefined : Number(document.getElementById('opEnd').value);\n    arr.fill(v, s, e);\n    log(`fill(${stringifyValue(v)}, ${s}, ${e})`);\n    render();\n  });\n\n  document.getElementById('reverse').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('reverse: convert to normal Array first.'); ensureNormal(); }\n    arr.reverse();\n    log('reverse()');\n    render();\n  });\n\n  document.getElementById('sort').addEventListener('click', ()=> {\n    if (!Array.isArray(arr)) { log('sort: convert to normal Array first.'); ensureNormal(); }\n    try {\n      arr.sort();\n      log('sort()');\n    } catch(e){ log('sort() error', e.message); }\n    render();\n  });\n\n  document.getElementById('flat').addEventListener('click', ()=> {\n    const d = document.getElementById('opIndex').value === '' ? 1 : Number(document.getElementById('opIndex').value);\n    const r = arr.flat ? arr.flat(d) : Array.prototype.concat.apply([], arr);\n    arr = createArrayFromJs(r);\n    log(`flat(${d}) ->`, r);\n    render();\n  });\n\n  // Higher-order functions\n  function safeEval(fnText) {\n    // Accept arrow functions like \"x => x*2\" or \"(a,b)=>a+b\"\n    try {\n      if (!fnText || fnText.trim() === '') return null;\n      // Wrap into parentheses to allow object returns and arrow functions\n      const f = eval(`(${fnText})`);\n      if (typeof f === 'function') return f;\n    } catch(e){\n      log('Invalid expression:', fnText, e.message);\n    }\n    return null;\n  }\n\n  document.getElementById('mapBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || 'x => x';\n    const fn = safeEval(expr) || (x=>x);\n    try {\n      const result = Array.prototype.map.call(Array.isArray(arr)?arr:Array.from(arr), fn);\n      arr = createArrayFromJs(result);\n      log('map ->', result);\n      render();\n    } catch(e){ log('map error:', e.message); }\n  });\n\n  document.getElementById('filterBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || 'x => true';\n    const fn = safeEval(expr) || (x=>true);\n    try {\n      const result = Array.prototype.filter.call(Array.isArray(arr)?arr:Array.from(arr), fn);\n      arr = createArrayFromJs(result);\n      log('filter ->', result);\n      render();\n    } catch(e){ log('filter error:', e.message); }\n  });\n\n  document.getElementById('reduceBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || '(a,b)=>a+b';\n    const fn = safeEval(expr) || ((a,b)=>a+b);\n    const init = (() => {\n      const v = document.getElementById('opValue').value;\n      return v === '' ? undefined : parseSingle(v);\n    })();\n    try {\n      const result = Array.prototype.reduce.call(Array.isArray(arr)?arr:Array.from(arr), fn, init);\n      log('reduce ->', result);\n      // show result as single-element array for visualization\n      arr = createArrayFromJs([result]);\n      render();\n    } catch(e){ log('reduce error:', e.message); }\n  });\n\n  document.getElementById('findBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || 'x => true';\n    const fn = safeEval(expr) || (x=>true);\n    try {\n      const result = Array.prototype.find.call(Array.isArray(arr)?arr:Array.from(arr), fn);\n      log('find ->', result);\n      arr = createArrayFromJs([result]);\n      render();\n    } catch(e){ log('find error:', e.message); }\n  });\n\n  document.getElementById('someBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || 'x => false';\n    const fn = safeEval(expr) || (x=>false);\n    const result = Array.prototype.some.call(Array.isArray(arr)?arr:Array.from(arr), fn);\n    log('some ->', result);\n    arr = createArrayFromJs([result]);\n    render();\n  });\n\n  document.getElementById('everyBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || 'x => false';\n    const fn = safeEval(expr) || (x=>false);\n    const result = Array.prototype.every.call(Array.isArray(arr)?arr:Array.from(arr), fn);\n    log('every ->', result);\n    arr = createArrayFromJs([result]);\n    render();\n  });\n\n  document.getElementById('forEachBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || 'x => console.log(x)';\n    const fn = safeEval(expr) || (x=>void 0);\n    try {\n      const out = [];\n      Array.prototype.forEach.call(Array.isArray(arr)?arr:Array.from(arr), (v,i)=>{\n        try { out.push(fn(v,i)); } catch(e){ out.push('[error]'); }\n      });\n      log('forEach produced (collected results) ->', out);\n    } catch(e){ log('forEach error:', e.message); }\n  });\n\n  document.getElementById('flatMapBtn').addEventListener('click', ()=> {\n    const expr = document.getElementById('expr').value || 'x => [x]';\n    const fn = safeEval(expr) || (x=>[x]);\n    try {\n      const result = Array.prototype.flatMap.call(Array.isArray(arr)?arr:Array.from(arr), fn);\n      arr = createArrayFromJs(result);\n      log('flatMap ->', result);\n      render();\n    } catch(e){ log('flatMap error:', e.message); }\n  });\n\n  // Utilities\n  document.getElementById('copySlice').addEventListener('click', ()=> {\n    const copy = Array.isArray(arr) ? arr.slice() : Array.from(arr);\n    log('copy ->', copy);\n    arr = createArrayFromJs(copy);\n    render();\n  });\n\n  document.getElementById('toString').addEventListener('click', ()=> {\n    const sep = document.getElementById('opValue').value || ',';\n    const s = Array.prototype.join.call(Array.isArray(arr)?arr:Array.from(arr), sep);\n    log(`join('${sep}') ->`, s);\n    arr = createArrayFromJs([s]);\n    render();\n  });\n\n  document.getElementById('indexOf').addEventListener('click', ()=> {\n    const v = parseSingle(document.getElementById('opValue').value);\n    const i = Array.prototype.indexOf.call(Array.isArray(arr)?arr:Array.from(arr), v);\n    log(`indexOf(${stringifyValue(v)}) ->`, i);\n    arr = createArrayFromJs([i]);\n    render();\n  });\n\n  document.getElementById('includes').addEventListener('click', ()=> {\n    const v = parseSingle(document.getElementById('opValue').value);\n    const r = Array.prototype.includes.call(Array.isArray(arr)?arr:Array.from(arr), v);\n    log(`includes(${stringifyValue(v)}) ->`, r);\n    arr = createArrayFromJs([r]);\n    render();\n  });\n\n  document.getElementById('flatten1').addEventListener('click', ()=> {\n    const r = (Array.prototype.flat) ? arr.flat(1) : Array.prototype.concat.apply([], arr);\n    arr = createArrayFromJs(r);\n    log('flat(1) ->', r);\n    render();\n  });\n\n  document.getElementById('typedDemo').addEventListener('click', ()=> {\n    // Show typed array behavior\n    const sample = new Int16Array([10,20,30,40]);\n    arr = sample;\n    type = 'int16';\n    document.getElementById('arrayType').value = 'int16';\n    log('TypedArray demo: Int16Array([10,20,30,40]) — fixed length, numeric only.');\n    render();\n  });\n\n  // Examples & recipes\n  document.getElementById('evens').addEventListener('click', ()=> {\n    const nums = Array.prototype.slice.call(Array.isArray(arr)?arr:Array.from(arr));\n    const res = nums.filter(x => Number.isFinite(x) && x % 2 === 0);\n    log('Filter evens ->', res);\n    arr = createArrayFromJs(res);\n    render();\n  });\n\n  document.getElementById('sum').addEventListener('click', ()=> {\n    const nums = Array.prototype.slice.call(Array.isArray(arr)?arr:Array.from(arr));\n    const s = nums.reduce((a,b)=> (Number(a)||0) + (Number(b)||0), 0);\n    log('Sum ->', s);\n    arr = createArrayFromJs([s]);\n    render();\n  });\n\n  document.getElementById('unique').addEventListener('click', ()=> {\n    const a = Array.prototype.slice.call(Array.isArray(arr)?arr:Array.from(arr));\n    const u = Array.from(new Set(a));\n    log('Unique ->', u);\n    arr = createArrayFromJs(u);\n    render();\n  });\n\n  document.getElementById('groupBy').addEventListener('click', ()=> {\n    const a = Array.prototype.slice.call(Array.isArray(arr)?arr:Array.from(arr));\n    const groups = a.reduce((acc, x) => {\n      const k = (typeof x === 'number' && !isNaN(x) ? (x % 2 === 0 ? 'even' : 'odd') : 'other');\n      acc[k] = acc[k] || [];\n      acc[k].push(x);\n      return acc;\n    }, {});\n    log('Group by parity ->', groups);\n    arr = createArrayFromJs(Object.entries(groups));\n    render();\n  });\n\n  // Log controls\n  document.getElementById('clearLog').addEventListener('click', ()=> logEl.innerHTML = '');\n\n  document.getElementById('export').addEventListener('click', ()=> {\n    try {\n      const data = Array.isArray(arr) ? arr : Array.from(arr);\n      const json = JSON.stringify(data, null, 2);\n      const blob = new Blob([json], {type:'application/json'});\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url; a.download = 'array.json';\n      a.click();\n      URL.revokeObjectURL(url);\n      log('Exported array as JSON');\n    } catch(e){ log('Export failed', e.message); }\n  });\n\n  // parse a single value (for op inputs)\n  function parseSingle(s) {\n    if (s === undefined || s === null || s === '') return undefined;\n    // Trim\n    const t = String(s).trim();\n    if (t === '') return '';\n    if (t === 'null') return null;\n    if (t === 'undefined') return undefined;\n    if (t === 'true') return true;\n    if (t === 'false') return false;\n    if (!isNaN(Number(t))) return Number(t);\n    if ((t.startsWith('\"') && t.endsWith('\"')) || (t.startsWith(\"'\") && t.endsWith(\"'\"))) return t.slice(1,-1);\n    return t;\n  }\n\n  // init with a sample\n  arr = createArrayFromJs([1,2,3,4,5]);\n  log('Initialized with sample [1,2,3,4,5]');\n  render();\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Array"
    }
  ],
  "topic": "Array",
  "hasFSM": false,
  "hasTest": true
}