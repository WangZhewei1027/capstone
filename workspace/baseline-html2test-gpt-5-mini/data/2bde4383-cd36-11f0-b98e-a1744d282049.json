{
  "id": "2bde4383-cd36-11f0-b98e-a1744d282049",
  "timestamp": "2025-11-29T15:16:49.368Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Bubble Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg: #0f1724;\n      --panel: #0b1220;\n      --accent: #3b82f6;\n      --muted: #94a3b8;\n      --good: #16a34a;\n      --bad: #ef4444;\n      --card: #0b1220;\n      --glass: rgba(255,255,255,0.03);\n      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", \"Courier New\", monospace;\n    }\n    * { box-sizing: border-box; font-family: Inter, Roboto, system-ui, -apple-system, \"Segoe UI\", sans-serif; color: #e6eef8; }\n    html,body{ height:100%; margin:0; background: linear-gradient(180deg,#071026 0%, #0a1220 100%); }\n    .app{\n      max-width:1100px;\n      margin:24px auto;\n      padding:20px;\n      border-radius:12px;\n      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      box-shadow: 0 8px 30px rgba(2,6,23,0.6);\n      min-height: 80vh;\n    }\n    header{ display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:18px; }\n    header h1{ font-size:20px; margin:0; letter-spacing:0.2px; }\n    header p{ margin:0; color:var(--muted); font-size:13px; }\n    .controls{\n      display:flex; gap:12px; flex-wrap:wrap; align-items:center;\n      margin-bottom:12px;\n    }\n    .control {\n      background:var(--glass);\n      padding:10px;\n      border-radius:8px;\n      display:flex; gap:10px; align-items:center;\n      min-width:120px;\n    }\n    .control label{ font-size:12px; color:var(--muted); display:block; }\n    .control .val{ font-weight:600; color:#e6eef8; font-size:14px; }\n    .buttons{ display:flex; gap:8px; align-items:center; }\n    button.btn{\n      background:transparent;\n      border:1px solid rgba(255,255,255,0.06);\n      padding:8px 12px;\n      color: #e6eef8;\n      border-radius:8px;\n      cursor:pointer;\n      transition: all .15s;\n      font-weight:600;\n    }\n    button.btn.primary{\n      background: linear-gradient(90deg,var(--accent),#06b6d4);\n      color: black;\n      border: none;\n    }\n    button.btn:hover{ transform: translateY(-2px); }\n    .row { display:flex; gap:16px; align-items:center; }\n    .panel{\n      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));\n      padding:12px;\n      border-radius:10px;\n      border: 1px solid rgba(255,255,255,0.03);\n    }\n    /* Visualization area */\n    .visual{\n      margin-top:16px;\n      display:flex;\n      gap:18px;\n      align-items:flex-start;\n    }\n    .bars{\n      flex:1;\n      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));\n      padding:14px;\n      border-radius:10px;\n      min-height:340px;\n      display:flex;\n      align-items:end;\n      gap:6px;\n    }\n    .bar{\n      flex:1;\n      background: linear-gradient(180deg,#60a5fa,#2563eb);\n      height:50px;\n      border-radius:4px 4px 0 0;\n      transition: height 300ms ease, background-color 200ms ease, transform 200ms ease;\n      display:flex;\n      align-items:flex-start;\n      justify-content:center;\n      position:relative;\n      box-shadow: 0 4px 10px rgba(2,6,23,0.45), inset 0 -6px 15px rgba(0,0,0,0.15);\n    }\n    .bar .label{\n      position:absolute;\n      bottom:2px;\n      font-size:11px;\n      color: rgba(255,255,255,0.92);\n      padding: 2px 6px;\n      background: rgba(0,0,0,0.18);\n      border-radius: 6px;\n      transform: translateY(0);\n    }\n    .bar.compare{ background: linear-gradient(180deg,var(--bad),#ef4444); transform: scaleY(1.02); }\n    .bar.swap{ background: linear-gradient(180deg,#f97316,#fb923c); transform: scaleY(1.03); }\n    .bar.sorted{ background: linear-gradient(180deg,var(--good),#6ee7b7); }\n    .bar.inactive{ opacity:0.14; }\n    .side{\n      width:360px;\n      display:flex;\n      flex-direction:column;\n      gap:12px;\n    }\n    .stats{ display:flex; gap:8px; flex-wrap:wrap; }\n    .stat{\n      padding:8px 10px;\n      background:rgba(255,255,255,0.02);\n      border-radius:8px;\n      min-width:120px;\n    }\n    .pseudocode{\n      padding:8px;\n      border-radius:8px;\n      background: rgba(255,255,255,0.015);\n      font-family: var(--mono);\n      font-size:13px;\n      color:var(--muted);\n      line-height:1.5;\n      white-space:pre;\n      border: 1px solid rgba(255,255,255,0.02);\n      max-height:260px;\n      overflow:auto;\n    }\n    .pseudocode .line{\n      padding:4px 6px;\n      border-radius:6px;\n    }\n    .pseudocode .active{ background: rgba(59,130,246,0.12); color:#dbeafe; }\n    .footer{\n      margin-top:14px; display:flex; justify-content:space-between; align-items:center;\n      color:var(--muted); font-size:13px;\n    }\n    .small{ font-size:13px; color:var(--muted); }\n    input[type=\"range\"]{ width:140px; }\n    select{ padding:6px 8px; border-radius:6px; background:transparent; border:1px solid rgba(255,255,255,0.04); color: #e6eef8; }\n    .hint{ font-size:12px; color:var(--muted); }\n    @media (max-width:920px){\n      .visual{ flex-direction:column; }\n      .side{ width:100%; }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\" role=\"application\" aria-label=\"Bubble Sort Visualizer\">\n    <header>\n      <div>\n        <h1>Bubble Sort Visualizer</h1>\n        <p>See how Bubble Sort compares and swaps elements step-by-step.</p>\n      </div>\n      <div class=\"small\">Interactive demo • Click Start or Step to run</div>\n    </header>\n\n    <div class=\"controls\">\n      <div class=\"control\">\n        <div>\n          <label for=\"size\">Array Size</label>\n          <div style=\"display:flex; gap:8px; align-items:center;\">\n            <input id=\"size\" type=\"range\" min=\"4\" max=\"80\" value=\"28\" />\n            <div class=\"val\" id=\"sizeVal\">28</div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"control\">\n        <div>\n          <label for=\"speed\">Speed</label>\n          <div style=\"display:flex; gap:8px; align-items:center;\">\n            <input id=\"speed\" type=\"range\" min=\"1\" max=\"1000\" value=\"250\" />\n            <div class=\"val\" id=\"speedVal\">250ms</div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"control\">\n        <div>\n          <label for=\"order\">Order</label>\n          <select id=\"order\" aria-label=\"Sort order\">\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"control\">\n        <label><input type=\"checkbox\" id=\"optimized\" /> Optimized (stop early)</label>\n      </div>\n\n      <div class=\"buttons\">\n        <button id=\"newBtn\" class=\"btn\">Randomize</button>\n        <button id=\"resetBtn\" class=\"btn\">Reset</button>\n        <button id=\"stepBtn\" class=\"btn\">Step</button>\n        <button id=\"playBtn\" class=\"btn primary\">Start</button>\n      </div>\n    </div>\n\n    <div class=\"visual\">\n      <div class=\"bars panel\" id=\"bars\" aria-hidden=\"false\" role=\"list\" title=\"Array values visualized as bars\"></div>\n\n      <div class=\"side\">\n        <div class=\"panel stats\">\n          <div class=\"stat\">\n            <div style=\"font-size:12px; color:var(--muted)\">Comparisons</div>\n            <div id=\"compCount\" style=\"font-weight:700; font-size:18px\">0</div>\n          </div>\n          <div class=\"stat\">\n            <div style=\"font-size:12px; color:var(--muted)\">Swaps</div>\n            <div id=\"swapCount\" style=\"font-weight:700; font-size:18px\">0</div>\n          </div>\n          <div class=\"stat\">\n            <div style=\"font-size:12px; color:var(--muted)\">Current i, j</div>\n            <div id=\"indices\" style=\"font-weight:700; font-size:15px\">-</div>\n          </div>\n        </div>\n\n        <div class=\"panel pseudocode\" id=\"pseudocode\" aria-hidden=\"false\">\n          <!-- Pseudocode lines -->\n          <div class=\"line\" data-line=\"1\">1. procedure bubbleSort(A)</div>\n          <div class=\"line\" data-line=\"2\">2.   n ← length(A)</div>\n          <div class=\"line\" data-line=\"3\">3.   repeat</div>\n          <div class=\"line\" data-line=\"4\">4.     swapped ← false</div>\n          <div class=\"line\" data-line=\"5\">5.     for i from 1 to n - 1 do</div>\n          <div class=\"line\" data-line=\"6\">6.       if A[i - 1] > A[i] then      // compare</div>\n          <div class=\"line\" data-line=\"7\">7.         swap(A[i - 1], A[i])      // swap</div>\n          <div class=\"line\" data-line=\"8\">8.         swapped ← true</div>\n          <div class=\"line\" data-line=\"9\">9.       end if</div>\n          <div class=\"line\" data-line=\"10\">10.    end for</div>\n          <div class=\"line\" data-line=\"11\">11.    n ← n - 1</div>\n          <div class=\"line\" data-line=\"12\">12.  until not swapped</div>\n          <div class=\"line\" data-line=\"13\">13. end procedure</div>\n        </div>\n\n        <div class=\"panel\" style=\"padding:10px;\">\n          <div style=\"display:flex; gap:8px; align-items:center; justify-content:space-between;\">\n            <div>\n              <div style=\"font-weight:700\">Controls</div>\n              <div class=\"hint\">Start = Play/Pause. Step moves one action.</div>\n            </div>\n            <div style=\"text-align:right;\">\n              <div id=\"status\" class=\"small\">Idle</div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div class=\"footer\">\n      <div>Bubble Sort animation — highlights comparisons & swaps</div>\n      <div>Made for learning • Demo</div>\n    </div>\n  </div>\n\n  <script>\n    // Bubble Sort Visualizer\n    (function(){\n      const barsEl = document.getElementById('bars');\n      const sizeEl = document.getElementById('size');\n      const sizeValEl = document.getElementById('sizeVal');\n      const speedEl = document.getElementById('speed');\n      const speedValEl = document.getElementById('speedVal');\n      const orderEl = document.getElementById('order');\n      const optimizedEl = document.getElementById('optimized');\n      const newBtn = document.getElementById('newBtn');\n      const resetBtn = document.getElementById('resetBtn');\n      const stepBtn = document.getElementById('stepBtn');\n      const playBtn = document.getElementById('playBtn');\n      const compCountEl = document.getElementById('compCount');\n      const swapCountEl = document.getElementById('swapCount');\n      const indicesEl = document.getElementById('indices');\n      const pseudocodeEl = document.getElementById('pseudocode');\n      const statusEl = document.getElementById('status');\n\n      let array = [];\n      let bars = [];\n      let sortedSet = new Set();\n      let generator = null;\n      let running = false;\n      let timer = null;\n      let comparisons = 0;\n      let swaps = 0;\n      let lastAction = null;\n\n      function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }\n\n      function createArray(n){\n        array = [];\n        // create varied values\n        for(let i=0;i<n;i++){\n          array.push(randInt(5, 100));\n        }\n        sortedSet.clear();\n        comparisons = 0; swaps = 0;\n        updateCounts();\n        renderBars();\n        setStatus('Idle');\n        highlightLine(null);\n      }\n\n      function resetArray(){\n        // reset sorted flags and counts but keep array values\n        sortedSet.clear();\n        comparisons = 0; swaps = 0;\n        updateCounts();\n        renderBars();\n        setStatus('Idle');\n        highlightLine(null);\n        if(generator){ generator = null; }\n        stopAuto();\n      }\n\n      function renderBars(){\n        barsEl.innerHTML = '';\n        bars = [];\n        const n = array.length;\n        // compute heights\n        const maxVal = Math.max(...array, 100);\n        for(let i=0;i<n;i++){\n          const v = array[i];\n          const el = document.createElement('div');\n          el.className = 'bar';\n          el.style.height = (v / maxVal * 100) + '%';\n          el.setAttribute('data-index', String(i));\n          const label = document.createElement('div');\n          label.className = 'label';\n          label.textContent = v;\n          el.appendChild(label);\n          barsEl.appendChild(el);\n          bars.push(el);\n        }\n      }\n\n      function updateBarHeight(i){\n        const maxVal = Math.max(...array, 100);\n        const el = bars[i];\n        el.style.height = (array[i] / maxVal * 100) + '%';\n        el.querySelector('.label').textContent = array[i];\n      }\n\n      function updateCounts(){\n        compCountEl.textContent = comparisons;\n        swapCountEl.textContent = swaps;\n      }\n\n      function sleep(ms){ return new Promise(resolve => setTimeout(resolve, ms)); }\n\n      // Generator for bubble sort actions\n      // yields actions {type: 'compare'|'swap'|'setSorted'|'done', i, j, n}\n      function* bubbleGenerator(arr, ascending=true, optimized=false){\n        let n = arr.length;\n        if(n <= 1){\n          for(let k=0;k<n;k++) yield {type: 'setSorted', i: k};\n          yield {type: 'done'};\n          return;\n        }\n        let swapped;\n        // We'll follow the standard \"repeat...until not swapped\" pseudocode to match displayed pseudo\n        do {\n          swapped = false;\n          for(let i=0;i<n-1;i++){\n            yield {type:'compare', i:i, j:i+1, n};\n            const a = arr[i], b = arr[i+1];\n            const comp = ascending ? (a > b) : (a < b);\n            if(comp){\n              // swap in array and yield\n              // perform swap in array as generator consumer expects array updated when swap yielded\n              [arr[i], arr[i+1]] = [arr[i+1], arr[i]];\n              yield {type:'swap', i:i, j:i+1, n};\n              swapped = true;\n            }\n            // continue loop\n          }\n          // after inner loop, the last element of current n is in place\n          yield {type:'setSorted', i: n-1, n};\n          n = n - 1;\n          if(optimized && !swapped){\n            // if optimized and no swap, mark remaining as sorted\n            for(let k=n-1;k>=0;k--){\n              yield {type:'setSorted', i: k, n};\n            }\n            break;\n          }\n        } while (n > 1);\n        yield {type:'done'};\n      }\n\n      function startGeneratorIfNeeded(){\n        if(!generator){\n          // clone array for generator so swaps update that internal arr (we also update main array when swap action occurs)\n          generator = bubbleGenerator(array.slice(), orderEl.value === 'asc', optimizedEl.checked);\n        }\n      }\n\n      function step(){\n        startGeneratorIfNeeded();\n        const res = generator.next();\n        if(res.done){\n          setStatus('Finished');\n          highlightLine(null);\n          generator = null;\n          running = false;\n          stopAuto();\n          return;\n        }\n        const action = res.value;\n        handleAction(action);\n      }\n\n      function handleAction(action){\n        lastAction = action;\n        switch(action.type){\n          case 'compare':\n            comparisons++;\n            updateCounts();\n            indicesEl.textContent = `${action.i}, ${action.j}`;\n            markBarsCompare(action.i, action.j);\n            highlightLine(6); // pseudocode compare line\n            break;\n          case 'swap':\n            swaps++;\n            updateCounts();\n            indicesEl.textContent = `${action.i}, ${action.j}`;\n            // Update main array to reflect the swap (the generator already swapped its internal copy);\n            // swap values in our array\n            [array[action.i], array[action.j]] = [array[action.j], array[action.i]];\n            // animate swap by updating heights; add 'swap' class\n            markBarsSwap(action.i, action.j);\n            highlightLine(7); // pseudocode swap line\n            break;\n          case 'setSorted':\n            // Mark index as sorted (green)\n            sortedSet.add(action.i);\n            markBarSorted(action.i);\n            highlightLine(11); // marking n = n -1 is line 11; marking sorted could map to after inner, but we highlight n decrement\n            break;\n          case 'done':\n            // mark all sorted\n            for(let i=0;i<array.length;i++) sortedSet.add(i);\n            markAllSorted();\n            indicesEl.textContent = '-';\n            highlightLine(13);\n            setStatus('Finished');\n            break;\n        }\n      }\n\n      function markBarsCompare(i,j){\n        clearBarClasses();\n        if(bars[i]) bars[i].classList.add('compare');\n        if(bars[j]) bars[j].classList.add('compare');\n      }\n      function markBarsSwap(i,j){\n        clearBarClasses();\n        if(bars[i]) bars[i].classList.add('swap');\n        if(bars[j]) bars[j].classList.add('swap');\n        // update heights (they should animate because of CSS transitions)\n        updateBarHeight(i);\n        updateBarHeight(j);\n      }\n      function markBarSorted(i){\n        if(bars[i]){\n          bars[i].classList.remove('compare','swap','inactive');\n          bars[i].classList.add('sorted');\n        }\n      }\n      function markAllSorted(){\n        for(let i=0;i<bars.length;i++){\n          bars[i].classList.remove('compare','swap','inactive');\n          bars[i].classList.add('sorted');\n        }\n      }\n      function clearBarClasses(){\n        for(let b of bars){\n          b.classList.remove('compare','swap','inactive');\n          // keep sorted class if already sorted\n        }\n      }\n\n      function highlightLine(num){\n        const lines = pseudocodeEl.querySelectorAll('.line');\n        lines.forEach(el => {\n          const n = parseInt(el.getAttribute('data-line'),10);\n          if(num && n === num) el.classList.add('active'); else el.classList.remove('active');\n        });\n      }\n\n      function setStatus(s){\n        statusEl.textContent = s;\n      }\n\n      function stopAuto(){\n        if(timer){ clearInterval(timer); timer = null; }\n        running = false;\n        playBtn.textContent = 'Start';\n        playBtn.classList.add('primary');\n      }\n\n      function autoPlay(){\n        startGeneratorIfNeeded();\n        if(running) return;\n        running = true;\n        playBtn.textContent = 'Pause';\n        playBtn.classList.remove('primary');\n        setStatus('Running');\n        const speed = parseInt(speedEl.value,10);\n        // We'll use setInterval to step every speed ms\n        timer = setInterval(()=>{\n          // if generator consumed, stop\n          if(!generator) { stopAuto(); return; }\n          const res = generator.next();\n          if(res.done){\n            handleAction({type:'done'});\n            generator = null;\n            stopAuto();\n            setStatus('Finished');\n            return;\n          } else {\n            handleAction(res.value);\n          }\n        }, Math.max(10, speed));\n      }\n\n      // Controls wiring\n      sizeEl.addEventListener('input', ()=> {\n        sizeValEl.textContent = sizeEl.value;\n      });\n\n      speedEl.addEventListener('input', ()=> {\n        speedValEl.textContent = speedEl.value + 'ms';\n        // if running, restart interval with new speed\n        if(running){\n          stopAuto();\n          autoPlay();\n        }\n      });\n\n      newBtn.addEventListener('click', ()=>{\n        createArray(parseInt(sizeEl.value,10));\n      });\n\n      resetBtn.addEventListener('click', ()=>{\n        resetArray();\n      });\n\n      stepBtn.addEventListener('click', async ()=>{\n        // stop autoplay if running\n        if(running){\n          stopAuto();\n        }\n        setStatus('Stepping');\n        step();\n      });\n\n      playBtn.addEventListener('click', ()=>{\n        if(running){\n          // pause\n          stopAuto();\n          setStatus('Paused');\n        } else {\n          // start playing\n          // if already finished, reset generator to allow a new run on same array (array may be modified)\n          // but we want to run bubble sort on current array values, so recreate generator\n          generator = null;\n          autoPlay();\n        }\n      });\n\n      orderEl.addEventListener('change', ()=>{\n        // restart if running\n        resetArray();\n        generator = null;\n      });\n\n      optimizedEl.addEventListener('change', ()=>{\n        generator = null;\n        resetArray();\n      });\n\n      // initialize\n      sizeValEl.textContent = sizeEl.value;\n      speedValEl.textContent = speedEl.value + 'ms';\n      createArray(parseInt(sizeEl.value,10));\n\n      // Accessibility: allow keyboard step with space\n      document.addEventListener('keydown', (e)=>{\n        if(e.code === 'Space'){\n          e.preventDefault();\n          stepBtn.click();\n        }\n      });\n\n      // When stepping or auto-play, after each action, we want to clear the compare/swap classes after a short time (speed/2)\n      // We'll watch lastAction and clear after delay\n      setInterval(()=>{\n        if(!lastAction) return;\n        const speed = parseInt(speedEl.value,10);\n        // clear visual markers after half the speed interval\n        // But keep sorted markers intact\n        if(lastAction.type === 'compare' || lastAction.type === 'swap'){\n          // remove their class after half speed (but do not remove 'sorted')\n          setTimeout(()=>{\n            // if the bar is now in sortedSet, keep sorted class\n            for(let i=0;i<bars.length;i++){\n              if(sortedSet.has(i)){\n                bars[i].classList.add('sorted');\n                bars[i].classList.remove('compare','swap','inactive');\n              } else {\n                bars[i].classList.remove('compare','swap');\n              }\n            }\n          }, Math.max(40, speed/2));\n        }\n        lastAction = null;\n      }, 80);\n\n      // Resize behavior: update heights when window resizes (in case fonts or layout changes)\n      window.addEventListener('resize', ()=>{\n        for(let i=0;i<array.length;i++) updateBarHeight(i);\n      });\n\n      // Extra: when randomizing, ensure bars animate nicely\n      // initial animation: slight stagger\n      (function initialPulse(){\n        const els = barsEl.children;\n        for(let i=0;i<els.length;i++){\n          const el = els[i];\n          el.style.transform = 'translateY(3px)';\n          setTimeout(()=> el.style.transform = '', 100 + i*6);\n        }\n      })();\n\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": false,
  "hasTest": true
}