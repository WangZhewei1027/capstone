{
  "id": "be878a8b-cd35-11f0-9e7b-93b903303299",
  "timestamp": "2025-11-29T15:13:40.476Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Counting Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Counting Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  <style>\n    :root{\n      --bg:#0f1724; --panel:#0b1220; --accent:#06b6d4; --muted:#94a3b8; --card:#071126;\n      --good:#10b981; --bad:#ef4444;\n      --bar-height:120px;\n      font-family: Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n      color-scheme: dark;\n    }\n    html,body{height:100%;margin:0;background:linear-gradient(180deg,#031225 0%, #061022 100%); color:white}\n    .container{max-width:1100px;margin:18px auto;padding:18px;display:grid;grid-template-columns:360px 1fr;gap:18px}\n    .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03);padding:14px;border-radius:10px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}\n    h1{margin:0 0 8px;font-size:18px}\n    .controls{display:flex;flex-direction:column;gap:10px}\n    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}\n    .row{display:flex;gap:8px;align-items:center}\n    input[type=range]{width:100%}\n    button{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:8px;color:var(--accent);cursor:pointer}\n    button.secondary{color:var(--muted)}\n    .buttons{display:flex;gap:6px;flex-wrap:wrap}\n    .stats{font-size:13px;color:var(--muted);margin-top:8px}\n    .visual{display:flex;flex-direction:column;gap:12px}\n    .arrays{display:flex;flex-direction:column;gap:10px}\n    .array-row{display:flex;gap:8px;align-items:end;padding:6px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:8px}\n    .array-title{width:140px;color:var(--muted);font-size:13px}\n    .bars{display:flex;gap:6px;align-items:end;padding:6px;flex-wrap:nowrap;overflow:auto}\n    .bar{width:36px;height:var(--bar-height);display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:4px;border-radius:6px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));position:relative;min-width:36px}\n    .bar .value{background:rgba(255,255,255,0.04);padding:4px 6px;border-radius:6px;font-size:13px;margin-top:6px;color:var(--muted)}\n    .bar.active{outline:3px solid rgba(6,182,212,0.12);box-shadow:0 6px 18px rgba(6,182,212,0.06)}\n    .bar.count{width:48px;min-width:48px}\n    .bar .height{width:100%;background:linear-gradient(180deg,var(--accent),#0f5560);border-radius:4px 4px 0 0}\n    .bar .height.zero{background:rgba(255,255,255,0.02)}\n    .pointer{position:absolute;top:-24px;left:50%;transform:translateX(-50%);font-size:12px;color:var(--muted)}\n    .step-info{font-size:13px;color:var(--muted);margin-top:6px}\n    .legend{font-size:13px;color:var(--muted);margin-top:8px}\n    .explain{font-size:13px;color:var(--muted);line-height:1.4}\n    .small{font-size:12px;color:var(--muted)}\n    .badge{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-size:12px;color:var(--muted)}\n    .footer{margin-top:12px;font-size:13px;color:var(--muted)}\n    .highlight{outline:3px solid rgba(255,205,86,0.14);box-shadow:0 6px 18px rgba(255,205,86,0.04)}\n    @media (max-width:920px){.container{grid-template-columns:1fr; padding:10px}}\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"panel\">\n      <h1>Counting Sort â€” Interactive Visualizer</h1>\n      <div class=\"explain\">\n        Counting Sort is a non-comparison, stable sorting algorithm for integers in a small range [0..k].\n        It counts occurrences, computes cumulative positions, and places items into an output array.\n      </div>\n\n      <div style=\"height:12px\"></div>\n\n      <div class=\"controls\">\n        <div>\n          <label>Array size: <span id=\"sizeLabel\">12</span></label>\n          <input id=\"size\" type=\"range\" min=\"2\" max=\"40\" value=\"12\">\n        </div>\n        <div>\n          <label>Maximum value (k): <span id=\"kLabel\">9</span></label>\n          <input id=\"maxVal\" type=\"range\" min=\"1\" max=\"50\" value=\"9\">\n        </div>\n        <div>\n          <label>Speed: <span id=\"speedLabel\">600ms</span></label>\n          <input id=\"speed\" type=\"range\" min=\"50\" max=\"1500\" value=\"600\">\n        </div>\n\n        <div style=\"display:flex;gap:8px;\">\n          <button id=\"gen\">Generate Random</button>\n          <button id=\"genUnique\" class=\"secondary\">Generate Unique</button>\n        </div>\n\n        <div style=\"display:flex;gap:8px;margin-top:8px;\">\n          <button id=\"start\">Start</button>\n          <button id=\"pause\" class=\"secondary\" disabled>Pause</button>\n          <button id=\"step\" class=\"secondary\">Step</button>\n          <button id=\"reset\" class=\"secondary\">Reset</button>\n        </div>\n\n        <div class=\"stats\">\n          <div class=\"row\" style=\"justify-content:space-between\">\n            <div class=\"small\">Complexity</div>\n            <div class=\"small badge\">Time: O(n + k) &nbsp; Space: O(n + k)</div>\n          </div>\n          <div class=\"row\" style=\"justify-content:space-between;margin-top:6px\">\n            <div class=\"small\">Stability</div>\n            <div class=\"small badge\">Stable</div>\n          </div>\n        </div>\n\n        <div class=\"legend\">\n          <div style=\"margin-top:8px\" class=\"small\">Legend: <span style=\"color:var(--accent)\">Active</span>, <span style=\"color:var(--muted)\">Counts</span>, <span style=\"color:var(--done)\"></span></div>\n        </div>\n\n      </div>\n\n      <div class=\"footer\">\n        Use Step to move one micro-step at a time. Start runs automatically with selected speed.\n      </div>\n    </div>\n\n    <div class=\"panel visual\">\n      <div class=\"arrays\">\n        <div class=\"array-row\" style=\"align-items:flex-end\">\n          <div class=\"array-title\">Input Array</div>\n          <div class=\"bars\" id=\"inputBars\" aria-hidden=\"true\"></div>\n        </div>\n\n        <div class=\"array-row\">\n          <div class=\"array-title\">Counts (0..k)</div>\n          <div class=\"bars\" id=\"countBars\" aria-hidden=\"true\"></div>\n        </div>\n\n        <div class=\"array-row\">\n          <div class=\"array-title\">Cumulative</div>\n          <div class=\"bars\" id=\"cumBars\" aria-hidden=\"true\"></div>\n        </div>\n\n        <div class=\"array-row\">\n          <div class=\"array-title\">Output (building)</div>\n          <div class=\"bars\" id=\"outBars\" aria-hidden=\"true\"></div>\n        </div>\n      </div>\n\n      <div class=\"step-info\" id=\"stepInfo\">Status: ready</div>\n    </div>\n  </div>\n\n<script>\n/*\n  Counting Sort Visualizer\n  - Implements step-by-step counting sort:\n    1) Count occurrences\n    2) Compute cumulative counts\n    3) Build output (stable: traverse input from end)\n    4) Copy output back (visual only)\n  - Controls: generate, start/pause, step, reset, size, maxVal, speed\n*/\n\nconst sizeSlider = document.getElementById('size');\nconst sizeLabel = document.getElementById('sizeLabel');\nconst maxValSlider = document.getElementById('maxVal');\nconst kLabel = document.getElementById('kLabel');\nconst speedSlider = document.getElementById('speed');\nconst speedLabel = document.getElementById('speedLabel');\n\nconst genBtn = document.getElementById('gen');\nconst genUniqueBtn = document.getElementById('genUnique');\nconst startBtn = document.getElementById('start');\nconst pauseBtn = document.getElementById('pause');\nconst stepBtn = document.getElementById('step');\nconst resetBtn = document.getElementById('reset');\n\nconst inputBars = document.getElementById('inputBars');\nconst countBars = document.getElementById('countBars');\nconst cumBars = document.getElementById('cumBars');\nconst outBars = document.getElementById('outBars');\nconst stepInfo = document.getElementById('stepInfo');\n\nlet arr = [];\nlet n = parseInt(sizeSlider.value);\nlet k = parseInt(maxValSlider.value);\nlet counts = [];\nlet cum = [];\nlet out = [];\nlet state = 'ready'; // 'count', 'cum', 'build', 'copy', 'done'\nlet i = 0, j = 0; // loop indices\nlet timer = null;\nlet speed = parseInt(speedSlider.value);\nlet paused = false;\n\nfunction rndArr(n,k,unique=false){\n  let a=[];\n  if(unique){\n    // generate shuffled unique numbers in [0..k] with k+1 >= n\n    let maxK = Math.max(k, n-1);\n    let pool = [];\n    for(let x=0;x<=maxK;x++) pool.push(x);\n    // shuffle\n    for(let t=pool.length-1; t>0; t--){\n      let r=Math.floor(Math.random()*(t+1)); [pool[t],pool[r]]=[pool[r],pool[t]];\n    }\n    a = pool.slice(0,n);\n  } else {\n    for(let t=0;t<n;t++) a.push(Math.floor(Math.random()*(k+1)));\n  }\n  return a;\n}\n\nfunction init(){\n  n = parseInt(sizeSlider.value);\n  k = parseInt(maxValSlider.value);\n  speed = parseInt(speedSlider.value);\n\n  sizeLabel.textContent = n;\n  kLabel.textContent = k;\n  speedLabel.textContent = speed + 'ms';\n\n  arr = rndArr(n,k);\n  counts = new Array(k+1).fill(0);\n  cum = new Array(k+1).fill(0);\n  out = new Array(n).fill(null);\n\n  state = 'count';\n  i = 0; j = 0;\n  paused = false;\n  updateAll();\n  setStepInfo('Ready. Press Start to run or Step to advance one micro-step.');\n  startBtn.disabled = false;\n  pauseBtn.disabled = true;\n}\n\nfunction updateAll(){\n  renderInput();\n  renderCounts();\n  renderCum();\n  renderOut();\n}\n\nfunction renderInput(activeIndex=null, removed=[]) {\n  inputBars.innerHTML = '';\n  const maxHeight = 120;\n  const maxVal = Math.max(...arr, k);\n  for(let idx=0; idx<arr.length; idx++){\n    const v = arr[idx];\n    const bar = document.createElement('div');\n    bar.className = 'bar';\n    if(activeIndex===idx) bar.classList.add('active');\n    if(removed.indexOf(idx)!==-1){\n      bar.style.opacity = '0.25';\n    }\n    bar.style.minHeight = '56px';\n    // height proportion\n    const h = (maxVal>0) ? Math.max(6, Math.round((v/maxVal)*maxHeight)) : 6;\n    const height = document.createElement('div');\n    height.className = 'height';\n    height.style.height = h + 'px';\n    if(v===0) height.classList.add('zero');\n    const val = document.createElement('div');\n    val.className = 'value';\n    val.textContent = v;\n    bar.appendChild(height);\n    bar.appendChild(val);\n    if(activeIndex===idx){\n      const p = document.createElement('div'); p.className='pointer'; p.textContent='i=' + idx;\n      bar.appendChild(p);\n    }\n    inputBars.appendChild(bar);\n  }\n}\n\nfunction renderCounts(activeIndex=null){\n  countBars.innerHTML = '';\n  const maxCount = Math.max(1, ...counts);\n  for(let v=0; v<=k; v++){\n    const c = counts[v] || 0;\n    const bar = document.createElement('div');\n    bar.className = 'bar count';\n    if(activeIndex===v) bar.classList.add('active');\n    const hRatio = c / maxCount;\n    const h = Math.max(8, Math.round(hRatio * 80));\n    const height = document.createElement('div');\n    height.className='height';\n    height.style.height = h + 'px';\n    if(c===0) height.classList.add('zero');\n    const txt = document.createElement('div');\n    txt.className='value';\n    txt.textContent = c;\n    const lbl = document.createElement('div'); lbl.className='small'; lbl.style.position='absolute'; lbl.style.bottom='-20px'; lbl.style.fontSize='12px'; lbl.style.color='var(--muted)'; lbl.textContent = v;\n    bar.appendChild(height);\n    bar.appendChild(txt);\n    bar.appendChild(lbl);\n    countBars.appendChild(bar);\n  }\n}\n\nfunction renderCum(activeIndex=null){\n  cumBars.innerHTML = '';\n  const maxMade = Math.max(1, ...cum);\n  for(let v=0; v<=k; v++){\n    const c = cum[v] || 0;\n    const bar = document.createElement('div');\n    bar.className = 'bar count';\n    if(activeIndex===v) bar.classList.add('highlight');\n    const hRatio = c / maxMade;\n    const h = Math.max(8, Math.round(hRatio * 80));\n    const height = document.createElement('div');\n    height.className='height';\n    height.style.height = h + 'px';\n    if(c===0) height.classList.add('zero');\n    const txt = document.createElement('div');\n    txt.className='value';\n    txt.textContent = c;\n    const lbl = document.createElement('div'); lbl.className='small'; lbl.style.position='absolute'; lbl.style.bottom='-20px'; lbl.style.fontSize='12px'; lbl.style.color='var(--muted)'; lbl.textContent = v;\n    bar.appendChild(height);\n    bar.appendChild(txt);\n    bar.appendChild(lbl);\n    cumBars.appendChild(bar);\n  }\n}\n\nfunction renderOut(activeIndex=null){\n  outBars.innerHTML = '';\n  const maxVal = Math.max(...arr, ...out.filter(x=>x!==null), k);\n  for(let idx=0; idx<out.length; idx++){\n    const v = out[idx];\n    const bar = document.createElement('div');\n    bar.className = 'bar';\n    if(activeIndex===idx) bar.classList.add('active');\n    const h = (v===null) ? 6 : Math.max(6, Math.round((v/maxVal)*120));\n    const height = document.createElement('div');\n    height.className='height';\n    height.style.height = h + 'px';\n    if(v===null) height.classList.add('zero');\n    const txt = document.createElement('div');\n    txt.className='value';\n    txt.textContent = (v===null) ? '' : v;\n    bar.appendChild(height);\n    bar.appendChild(txt);\n    outBars.appendChild(bar);\n  }\n}\n\nfunction setStepInfo(msg){\n  stepInfo.textContent = 'Status: ' + msg;\n}\n\nfunction startAuto(){\n  if(state === 'done') return;\n  startBtn.disabled = true;\n  pauseBtn.disabled = false;\n  stepBtn.disabled = true;\n  genBtn.disabled = true;\n  genUniqueBtn.disabled = true;\n  sizeSlider.disabled = true;\n  maxValSlider.disabled = true;\n  resetBtn.disabled = false;\n  if(timer) clearInterval(timer);\n  timer = setInterval(()=>{ if(!paused) nextStep(); }, speed);\n}\n\nfunction pauseAuto(){\n  startBtn.disabled = false;\n  pauseBtn.disabled = true;\n  stepBtn.disabled = false;\n  genBtn.disabled = false;\n  genUniqueBtn.disabled = false;\n  sizeSlider.disabled = false;\n  maxValSlider.disabled = false;\n  if(timer) { clearInterval(timer); timer = null; }\n}\n\nfunction resetState(){\n  if(timer) clearInterval(timer);\n  timer = null;\n  sizeSlider.disabled = false;\n  maxValSlider.disabled = false;\n  genBtn.disabled = false;\n  genUniqueBtn.disabled = false;\n  startBtn.disabled = false;\n  pauseBtn.disabled = true;\n  stepBtn.disabled = false;\n  init();\n}\n\n// The core micro-stepper: we advance one tiny step in the algorithm\nfunction nextStep(){\n  if(state === 'count'){\n    // loop i = 0..n-1, increment count[arr[i]]\n    if(i < n){\n      const val = arr[i];\n      setStepInfo(`Counting: reading arr[${i}] = ${val} -> count[${val}]++`);\n      counts[val] = (counts[val] || 0) + 1;\n      renderInput(i);\n      renderCounts(i);\n      renderCum();\n      renderOut();\n      i++;\n    } else {\n      // move to cumulative\n      i = 0;\n      state = 'cum';\n      setStepInfo('Counting complete. Now computing cumulative counts.');\n      renderCounts();\n    }\n    return;\n  }\n\n  if(state === 'cum'){\n    // build cumulative counts: cum[0]=counts[0], cum[i]=cum[i-1]+counts[i]\n    if(i === 0){\n      cum[0] = counts[0] || 0;\n      renderCum(0); setStepInfo(`cum[0] = ${cum[0]}`);\n      i++;\n      return;\n    }\n    if(i <= k){\n      cum[i] = (cum[i-1] || 0) + (counts[i] || 0);\n      renderCum(i); setStepInfo(`cum[${i}] = cum[${i-1}] + count[${i}] = ${cum[i]}`);\n      i++;\n      return;\n    } else {\n      // done cumulative\n      i = n-1; // prepare for building output: traverse input from end\n      state = 'build';\n      setStepInfo('Cumulative computed. Building output array (stable) by traversing input from end.');\n      renderCum();\n      renderCounts();\n      renderOut();\n      return;\n    }\n  }\n\n  if(state === 'build'){\n    // traverse input from end: for i from n-1 downto 0:\n    if(i >= 0){\n      const val = arr[i];\n      const pos = (cum[val] || 0) - 1;\n      setStepInfo(`Placing arr[${i}] = ${val} into out[${pos}] (cum[${val}]--)`);\n      out[pos] = val;\n      cum[val] = pos; // decrement: cum[val] now points to next free slot\n      renderInput(i, [i]); // show this input element faded\n      renderCounts();\n      renderCum(val);\n      renderOut(pos);\n      i--;\n      return;\n    } else {\n      // output built\n      state = 'copy';\n      i = 0;\n      setStepInfo('Output built. Copying back to input (visual).');\n      renderInput();\n      renderOut();\n      renderCounts();\n      renderCum();\n      return;\n    }\n  }\n\n  if(state === 'copy'){\n    if(i < n){\n      // copy out[i] to arr[i]\n      setStepInfo(`Copy back: arr[${i}] = out[${i}] (${out[i]})`);\n      arr[i] = out[i];\n      renderInput(i);\n      renderOut(i);\n      i++;\n      return;\n    } else {\n      state = 'done';\n      setStepInfo('Sorting complete. Result is stable and ascending.');\n      renderInput();\n      renderOut();\n      renderCounts();\n      renderCum();\n      // stop auto if running\n      if(timer) { clearInterval(timer); clearInterval(timer); timer = null; }\n      startBtn.disabled = true;\n      pauseBtn.disabled = true;\n      stepBtn.disabled = true;\n      genBtn.disabled = false;\n      genUniqueBtn.disabled = false;\n      sizeSlider.disabled = false;\n      maxValSlider.disabled = false;\n      return;\n    }\n  }\n}\n\nsizeSlider.addEventListener('input', ()=>{\n  sizeLabel.textContent = sizeSlider.value;\n});\nmaxValSlider.addEventListener('input', ()=>{\n  kLabel.textContent = maxValSlider.value;\n});\nspeedSlider.addEventListener('input', ()=>{\n  speed = parseInt(speedSlider.value);\n  speedLabel.textContent = speed + 'ms';\n  if(timer){\n    clearInterval(timer);\n    timer = setInterval(()=>{ if(!paused) nextStep(); }, speed);\n  }\n});\n\ngenBtn.addEventListener('click', ()=>{\n  arr = rndArr(parseInt(sizeSlider.value), parseInt(maxValSlider.value), false);\n  counts = new Array(parseInt(maxValSlider.value)+1).fill(0);\n  cum = new Array(parseInt(maxValSlider.value)+1).fill(0);\n  out = new Array(parseInt(sizeSlider.value)).fill(null);\n  state = 'count'; i=0;\n  updateAll();\n  setStepInfo('Random array generated. Ready.');\n});\n\ngenUniqueBtn.addEventListener('click', ()=>{\n  arr = rndArr(parseInt(sizeSlider.value), parseInt(maxValSlider.value), true);\n  counts = new Array(parseInt(maxValSlider.value)+1).fill(0);\n  cum = new Array(parseInt(maxValSlider.value)+1).fill(0);\n  out = new Array(parseInt(sizeSlider.value)).fill(null);\n  state = 'count'; i=0;\n  updateAll();\n  setStepInfo('Unique random array generated. Ready.');\n});\n\nstartBtn.addEventListener('click', ()=>{\n  paused = false;\n  startAuto();\n});\n\npauseBtn.addEventListener('click', ()=>{\n  paused = true;\n  pauseAuto();\n});\n\nstepBtn.addEventListener('click', ()=>{\n  // advance one micro-step\n  nextStep();\n});\n\nresetBtn.addEventListener('click', ()=>{\n  resetState();\n});\n\n// initialization\ninit();\n\n// keyboard shortcuts: Space = step, Enter = start/pause\ndocument.addEventListener('keydown', (e)=>{\n  if(e.code === 'Space'){ e.preventDefault(); nextStep(); }\n  if(e.code === 'Enter'){ e.preventDefault(); if(!timer) startAuto(); else pauseAuto(); }\n});\n\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Counting Sort"
    }
  ],
  "topic": "Counting Sort",
  "hasFSM": false,
  "hasTest": true
}