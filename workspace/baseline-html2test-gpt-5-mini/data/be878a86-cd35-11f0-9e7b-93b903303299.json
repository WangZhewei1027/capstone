{
  "id": "be878a86-cd35-11f0-9e7b-93b903303299",
  "timestamp": "2025-11-29T15:13:31.794Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Selection Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Selection Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --muted:#94a3b8;\n      --accent:#60a5fa;\n      --good:#10b981;\n      --bad:#ef4444;\n      --highlight:#f59e0b;\n      --card:#0b1220;\n    }\n    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;}\n    body{\n      margin:0;\n      background:linear-gradient(180deg,var(--bg),#061023 80%);\n      color:#e6eef8;\n      min-height:100vh;\n      padding:24px;\n      display:flex;\n      gap:20px;\n      align-items:flex-start;\n      justify-content:center;\n    }\n    .container{\n      width:1100px;\n      max-width:96vw;\n      display:grid;\n      grid-template-columns: 1fr 360px;\n      gap:18px;\n      align-items:start;\n    }\n    .panel{\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      border:1px solid rgba(255,255,255,0.03);\n      border-radius:12px;\n      padding:14px;\n      box-shadow: 0 6px 30px rgba(2,6,23,0.6);\n    }\n    .visual.panel{\n      height:540px;\n      display:flex;\n      flex-direction:column;\n      gap:12px;\n    }\n    .controls{\n      display:flex;\n      gap:10px;\n      align-items:center;\n      flex-wrap:wrap;\n    }\n    .controls > *{margin:2px 0;}\n    .btn{\n      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));\n      border:1px solid rgba(255,255,255,0.03);\n      color:var(--muted);\n      padding:8px 12px;\n      border-radius:8px;\n      cursor:pointer;\n      font-weight:600;\n      transition:all .12s;\n    }\n    .btn.primary{\n      color:white;\n      background:linear-gradient(180deg,var(--accent),#2b6cb0);\n      border-color:rgba(96,165,250,0.2);\n      box-shadow:0 6px 18px rgba(96,165,250,0.08);\n    }\n    .btn:active{transform:translateY(1px);opacity:0.95;}\n    .btn.small{padding:6px 8px;font-size:13px;border-radius:6px;}\n    input[type=range]{width:160px}\n    .top-row{\n      display:flex;\n      justify-content:space-between;\n      align-items:center;\n      gap:12px;\n    }\n    .bars{\n      flex:1;\n      height:420px;\n      background:linear-gradient(0deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));\n      border-radius:10px;\n      padding:12px;\n      display:flex;\n      align-items:end;\n      gap:6px;\n      overflow:hidden;\n      border:1px dashed rgba(255,255,255,0.03);\n    }\n    .bar{\n      flex:1 1 auto;\n      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));\n      border-radius:6px 6px 4px 4px;\n      display:flex;\n      align-items:flex-end;\n      justify-content:center;\n      color:rgba(255,255,255,0.9);\n      font-size:12px;\n      font-weight:700;\n      transition:all 250ms ease;\n      position:relative;\n      min-width:8px;\n      margin:0 2px;\n    }\n    .bar .label{\n      transform:translateY(-6px);\n      padding:0 6px;\n      font-size:11px;\n      color:#081225;\n      font-weight:700;\n      border-radius:6px;\n    }\n    .bar.sorted{background:linear-gradient(180deg,#059669,#10b981); color:#052017;}\n    .bar.min{background:linear-gradient(180deg,#ef4444,#ef7a7a); color:#2b0b0b;}\n    .bar.current{background:linear-gradient(180deg,#60a5fa,#2b6cb0); color:#02102a;}\n    .bar.check{background:linear-gradient(180deg,#f59e0b,#fdb86b); color:#241303;}\n    .status{\n      display:flex;\n      gap:10px;\n      align-items:center;\n      flex-wrap:wrap;\n    }\n    .stat{\n      background:rgba(255,255,255,0.02);\n      padding:8px 10px;\n      border-radius:8px;\n      color:var(--muted);\n      font-weight:600;\n    }\n    .right.panel{\n      height:540px;\n      display:flex;\n      flex-direction:column;\n      gap:12px;\n      width:360px;\n      overflow:auto;\n    }\n    h1{margin:0;font-size:20px}\n    p.small{margin:6px 0 0;color:var(--muted);font-size:13px}\n    .legend{\n      display:flex;\n      gap:8px;\n      flex-wrap:wrap;\n      margin-top:6px;\n    }\n    .legend .item{\n      display:flex;\n      gap:8px;\n      align-items:center;\n      background:rgba(255,255,255,0.02);\n      padding:6px 8px;border-radius:8px;color:var(--muted);font-weight:600;font-size:13px;\n    }\n    .swatches{width:18px;height:18px;border-radius:4px}\n    pre{\n      background:rgba(255,255,255,0.02);\n      padding:10px;border-radius:8px;overflow:auto;\n      font-size:13px;color:var(--muted);\n    }\n    label{font-size:13px;color:var(--muted);display:flex;align-items:center;gap:8px}\n    footer{font-size:12px;color:var(--muted);margin-top:8px}\n    .tiny{font-size:12px;color:var(--muted)}\n    .controls-right{display:flex;gap:8px;align-items:center}\n    .flex-col{display:flex;flex-direction:column;gap:6px}\n    input[type=number]{width:74px;padding:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)}\n    .help{font-size:13px;color:var(--muted);line-height:1.35}\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"panel visual\">\n      <div class=\"top-row\">\n        <div style=\"display:flex;flex-direction:column;gap:6px\">\n          <h1>Selection Sort</h1>\n          <p class=\"small\">Find the minimum element and swap it into place. Repeat for each position.</p>\n          <div class=\"legend\" aria-hidden=\"true\">\n            <div class=\"item\"><div class=\"swatches\" style=\"background:linear-gradient(180deg,#059669,#10b981)\"></div> Sorted</div>\n            <div class=\"item\"><div class=\"swatches\" style=\"background:linear-gradient(180deg,#ef4444,#ef7a7a)\"></div> Current minimum</div>\n            <div class=\"item\"><div class=\"swatches\" style=\"background:linear-gradient(180deg,#60a5fa,#2b6cb0)\"></div> Current start position</div>\n            <div class=\"item\"><div class=\"swatches\" style=\"background:linear-gradient(180deg,#f59e0b,#fdb86b)\"></div> Element being compared</div>\n          </div>\n        </div>\n        <div class=\"controls-right\">\n          <div class=\"stat\" id=\"comparisons\">Comparisons: 0</div>\n          <div class=\"stat\" id=\"swaps\">Swaps: 0</div>\n        </div>\n      </div>\n\n      <div style=\"display:flex;gap:12px;align-items:center;justify-content:space-between;\">\n        <div class=\"controls\" role=\"toolbar\" aria-label=\"controls\">\n          <button class=\"btn primary\" id=\"playPause\">Play</button>\n          <button class=\"btn small\" id=\"stepBtn\">Step</button>\n          <button class=\"btn small\" id=\"resetBtn\">Reset</button>\n          <button class=\"btn small\" id=\"shuffleBtn\">Shuffle</button>\n          <label style=\"display:flex;align-items:center;gap:8px;\">\n            Speed\n            <input id=\"speed\" type=\"range\" min=\"1\" max=\"100\" value=\"40\" />\n          </label>\n        </div>\n        <div style=\"display:flex;gap:8px;align-items:center\">\n          <label class=\"tiny\">Size\n            <input id=\"size\" type=\"range\" min=\"5\" max=\"80\" value=\"20\" />\n          </label>\n          <button class=\"btn small\" id=\"newArrBtn\">New Array</button>\n        </div>\n      </div>\n\n      <div class=\"bars panel\" id=\"bars\" role=\"img\" aria-label=\"Array bars visualization\"></div>\n\n      <div class=\"status\">\n        <div class=\"stat\" id=\"info\">i: - , j: - , min: -</div>\n        <div class=\"stat\" id=\"progress\">Progress: 0 / 0</div>\n        <div style=\"flex:1\"></div>\n        <label class=\"tiny\" style=\"display:flex;align-items:center;gap:8px\">\n          <input type=\"checkbox\" id=\"showValues\" checked /> Show values\n        </label>\n      </div>\n      <footer class=\"tiny\">Use Step to advance one action (compare / new min / swap / mark sorted). Play animates automatically.</footer>\n    </div>\n\n    <div class=\"panel right\">\n      <div>\n        <h2 style=\"margin:0 0 6px 0\">How Selection Sort works</h2>\n        <p class=\"help\">\n          Selection sort repeatedly selects the smallest remaining element and swaps it into the next position of the sorted portion.\n          It's an in-place algorithm with O(n^2) comparisons (worst/average/best) and O(n) swaps. It is not stable in general.\n        </p>\n      </div>\n\n      <div>\n        <h3 style=\"margin:0 0 6px 0\">Pseudocode</h3>\n        <pre>\nfor i from 0 to n-2\n  minIndex = i\n  for j from i+1 to n-1\n    if A[j] &lt; A[minIndex]\n      minIndex = j\n  if minIndex != i\n    swap A[i] and A[minIndex]\n        </pre>\n      </div>\n\n      <div>\n        <h3 style=\"margin:0 0 6px 0\">Notes & Complexity</h3>\n        <ul style=\"margin:0 0 0 18px;color:var(--muted)\">\n          <li>Comparisons: Theta(n^2)</li>\n          <li>Swaps: O(n) (at most n-1 swaps)</li>\n          <li>Space: O(1) extra space</li>\n          <li>Not stable by default (equal elements may be swapped)</li>\n        </ul>\n      </div>\n\n      <div>\n        <h3 style=\"margin:0 0 6px 0\">Interact with the array</h3>\n        <p class=\"tiny\">Drag \"Size\" or press \"New Array\" to generate. \"Shuffle\" randomizes current values. You can toggle values visibility.</p>\n        <div style=\"display:flex;gap:8px;margin-top:8px\">\n          <input id=\"customArray\" type=\"text\" placeholder=\"e.g. 5,3,8,1,2\" style=\"flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)\"/>\n          <button class=\"btn small\" id=\"applyCustom\">Apply</button>\n        </div>\n        <p class=\"tiny\" style=\"margin-top:8px;color:var(--muted)\">Tip: numbers separated by commas will create that array.</p>\n      </div>\n\n    </div>\n  </div>\n\n  <script>\n    // Selection Sort Visualizer\n    const barsEl = document.getElementById('bars');\n    const playPauseBtn = document.getElementById('playPause');\n    const stepBtn = document.getElementById('stepBtn');\n    const resetBtn = document.getElementById('resetBtn');\n    const shuffleBtn = document.getElementById('shuffleBtn');\n    const newArrBtn = document.getElementById('newArrBtn');\n    const sizeInput = document.getElementById('size');\n    const speedInput = document.getElementById('speed');\n    const comparisonsEl = document.getElementById('comparisons');\n    const swapsEl = document.getElementById('swaps');\n    const infoEl = document.getElementById('info');\n    const progressEl = document.getElementById('progress');\n    const showValues = document.getElementById('showValues');\n    const customArrayInput = document.getElementById('customArray');\n    const applyCustomBtn = document.getElementById('applyCustom');\n\n    let arr = [];\n    let initialArr = [];\n    let generator = null;\n    let running = false;\n    let timer = null;\n    let interval = getInterval();\n    let comps = 0;\n    let swaps = 0;\n    let lastState = null;\n    let stepCount = 0;\n    let totalStepsEstimate = 0; // for progress bar\n    const MIN_SIZE = 5, MAX_SIZE = 80;\n\n    function getInterval(){\n      // speed input: 1 (slow) -> 100 (fast). Inverse mapping to ms.\n      const v = +speedInput.value;\n      const ms = 1200 - (v*10); // 1190ms -> 200ms\n      return Math.max(20, ms);\n    }\n\n    function createRandomArray(n){\n      const a = [];\n      for (let i=0;i<n;i++){\n        a.push( Math.floor(Math.random()*100) + 2 );\n      }\n      return a;\n    }\n\n    function renderBars(state = {}) {\n      barsEl.innerHTML = '';\n      const n = arr.length;\n      const max = Math.max(...arr, 1);\n      const show = showValues.checked;\n      const i = state.i ?? -1;\n      const j = state.j ?? -1;\n      const minIndex = state.minIndex ?? -1;\n      const sortedUpto = state.sortedUpto ?? -1;\n\n      for (let idx=0; idx<n; idx++){\n        const v = arr[idx];\n        const bar = document.createElement('div');\n        bar.className = 'bar';\n        bar.style.height = (v / max * 100) + '%';\n        bar.style.flexBasis = (100/n) + '%';\n        bar.style.transition = running ? 'all 220ms ease' : 'all 120ms ease';\n\n        if (idx <= sortedUpto) bar.classList.add('sorted');\n        if (idx === minIndex) bar.classList.add('min');\n        if (idx === i) bar.classList.add('current');\n        if (idx === j) bar.classList.add('check');\n\n        const label = document.createElement('div');\n        label.className = 'label';\n        label.style.background = 'transparent';\n        label.textContent = show ? v : '';\n        bar.appendChild(label);\n\n        barsEl.appendChild(bar);\n      }\n\n      comparisonsEl.textContent = `Comparisons: ${comps}`;\n      swapsEl.textContent = `Swaps: ${swaps}`;\n      infoEl.textContent = `i: ${i>=0?i:'-'} , j: ${j>=0?j:'-'} , min: ${minIndex>=0?minIndex:'-'}`;\n      progressEl.textContent = `Progress: ${Math.max(0, sortedUpto+1)} / ${n}`;\n    }\n\n    // Generator that yields action states.\n    function* selectionSortGenerator(a){\n      const n = a.length;\n      // We will modify a in place.\n      for (let i=0;i<n-1;i++){\n        let minIndex = i;\n        yield {type:'selectStart', i, minIndex, sortedUpto: i-1};\n        for (let j=i+1;j<n;j++){\n          yield {type:'compare', i, j, minIndex, sortedUpto: i-1};\n          if (a[j] < a[minIndex]){\n            minIndex = j;\n            yield {type:'newMin', i, j, minIndex, sortedUpto: i-1};\n          }\n        }\n        if (minIndex !== i){\n          // swap\n          const tmp = a[i]; a[i] = a[minIndex]; a[minIndex] = tmp;\n          yield {type:'swap', i, minIndex, arr: a.slice(), sortedUpto: i};\n        } else {\n          yield {type:'noSwap', i, minIndex, sortedUpto: i};\n        }\n        // mark sorted element at i\n        yield {type:'markSorted', i, sortedUpto: i};\n      }\n      yield {type:'done', sortedUpto: n-1};\n    }\n\n    function startGenerator(){\n      generator = selectionSortGenerator(arr);\n      comps = 0;\n      swaps = 0;\n      stepCount = 0;\n      totalStepsEstimate = estimateSteps(arr.length);\n      lastState = null;\n      renderBars({sortedUpto:-1});\n    }\n\n    function estimateSteps(n){\n      // Rough estimate: for each i, inner loop (n-i-1) compares. Each compare yields one step; newMin can add a step; each swap yields step; marking sorted yields step.\n      // We'll estimate comparisons + 2n extra.\n      let comps = n*(n-1)/2;\n      return Math.floor(comps + 3*n);\n    }\n\n    function resetToInitial(){\n      arr = initialArr.slice();\n      startGenerator();\n      stop();\n      renderBars({sortedUpto:-1});\n    }\n\n    function shuffleArray(){\n      // Fisher-Yates\n      for (let i=arr.length-1;i>0;i--){\n        const j = Math.floor(Math.random()*(i+1));\n        [arr[i],arr[j]] = [arr[j],arr[i]];\n      }\n      startGenerator();\n      renderBars({sortedUpto:-1});\n    }\n\n    function applyCustomArrayText(text){\n      const parts = text.split(',').map(s => s.trim()).filter(s => s.length);\n      if (!parts.length) return false;\n      const nums = parts.map(x => {\n        const n = Number(x);\n        return isNaN(n) ? null : n;\n      });\n      if (nums.some(x => x === null)) return false;\n      arr = nums.slice();\n      initialArr = arr.slice();\n      startGenerator();\n      renderBars({sortedUpto:-1});\n      return true;\n    }\n\n    function stop(){\n      running = false;\n      playPauseBtn.textContent = 'Play';\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n      }\n    }\n\n    function play(){\n      if (!generator) startGenerator();\n      running = true;\n      playPauseBtn.textContent = 'Pause';\n      interval = getInterval();\n      if (timer) clearInterval(timer);\n      timer = setInterval(() => {\n        const ok = runStep();\n        if (!ok) {\n          stop();\n        }\n      }, interval);\n    }\n\n    function togglePlay(){\n      if (running){\n        stop();\n      } else {\n        // if already done, restart from current array\n        if (!generator) startGenerator();\n        play();\n      }\n    }\n\n    function runStep(){\n      if (!generator) startGenerator();\n      const res = generator.next();\n      if (res.done){\n        renderBars({sortedUpto: arr.length-1});\n        lastState = {sortedUpto: arr.length-1};\n        return false;\n      }\n      const st = res.value;\n      stepCount++;\n      handleState(st);\n      lastState = st;\n      return true;\n    }\n\n    function handleState(st){\n      switch(st.type){\n        case 'selectStart':\n          // highlight current i and min\n          renderBars({...st, sortedUpto: st.sortedUpto});\n          break;\n        case 'compare':\n          comps++;\n          renderBars({...st, sortedUpto: st.sortedUpto});\n          break;\n        case 'newMin':\n          // found new minimum\n          renderBars({...st, sortedUpto: st.sortedUpto});\n          break;\n        case 'swap':\n          swaps++;\n          // arr already updated by generator\n          renderBars({...st, sortedUpto: st.sortedUpto});\n          break;\n        case 'noSwap':\n          renderBars({...st, sortedUpto: st.sortedUpto});\n          break;\n        case 'markSorted':\n          renderBars({...st, sortedUpto: st.sortedUpto});\n          break;\n        case 'done':\n          renderBars({...st, sortedUpto: st.sortedUpto});\n          break;\n      }\n    }\n\n    // UI wiring\n    playPauseBtn.addEventListener('click', () => {\n      togglePlay();\n    });\n\n    stepBtn.addEventListener('click', () => {\n      stop();\n      const ok = runStep();\n      if (!ok){\n        stop();\n      }\n    });\n\n    resetBtn.addEventListener('click', () => {\n      resetToInitial();\n    });\n\n    shuffleBtn.addEventListener('click', () => {\n      stop();\n      shuffleArray();\n    });\n\n    newArrBtn.addEventListener('click', () => {\n      const n = parseInt(sizeInput.value,10) || 20;\n      arr = createRandomArray(n);\n      initialArr = arr.slice();\n      startGenerator();\n      renderBars({sortedUpto:-1});\n      stop();\n    });\n\n    sizeInput.addEventListener('input', () => {\n      // live preview size change (not regenerated until New Array)\n      const n = parseInt(sizeInput.value,10);\n      // nothing else\n    });\n\n    speedInput.addEventListener('input', () => {\n      interval = getInterval();\n      if (running){\n        clearInterval(timer);\n        timer = setInterval(() => {\n          const ok = runStep();\n          if (!ok) stop();\n        }, interval);\n      }\n    });\n\n    showValues.addEventListener('change', () => {\n      renderBars(lastState || {sortedUpto:-1});\n    });\n\n    applyCustomBtn.addEventListener('click', () => {\n      const ok = applyCustomArrayText(customArrayInput.value);\n      if (!ok){\n        alert('Invalid input. Use comma separated numbers, e.g. 5,3,8,1,2');\n      } else {\n        stop();\n      }\n    });\n\n    // Keyboard: Space -> play/pause, Right -> step\n    window.addEventListener('keydown', (e) => {\n      if (e.code === 'Space') {\n        e.preventDefault();\n        togglePlay();\n      } else if (e.code === 'ArrowRight') {\n        e.preventDefault();\n        stop();\n        runStep();\n      }\n    });\n\n    // Initialize\n    (function init(){\n      const n = parseInt(sizeInput.value,10) || 20;\n      arr = createRandomArray(n);\n      initialArr = arr.slice();\n      startGenerator();\n      renderBars({sortedUpto:-1});\n    })();\n\n    // Make bars responsive to container resize\n    window.addEventListener('resize', () => renderBars(lastState || {sortedUpto:-1}));\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Selection Sort"
    }
  ],
  "topic": "Selection Sort",
  "hasFSM": false,
  "hasTest": true
}