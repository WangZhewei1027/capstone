{
  "id": "be878a8c-cd35-11f0-9e7b-93b903303299",
  "timestamp": "2025-11-29T15:13:44.036Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Radix Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title>Radix Sort Visualizer</title>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#00b4d8;\n    --muted:#94a3b8;\n    --good:#2dd4bf;\n    --danger:#ff6b6b;\n  }\n  html,body{height:100%;margin:0;background:linear-gradient(180deg,#071229, #071a2a);font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;color:#e6eef8}\n  .app{max-width:1100px;margin:24px auto;padding:18px;background:linear-gradient(180deg,#061226 0%, rgba(6,18,38,0.2) 100%);border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}\n  header{display:flex;align-items:center;gap:16px}\n  header h1{font-size:20px;margin:0;color:var(--accent)}\n  .controls{display:flex;flex-wrap:wrap;gap:12px;margin-top:12px;align-items:center}\n  .control{background:var(--panel);padding:8px;border-radius:8px;display:flex;gap:8px;align-items:center}\n  label{font-size:13px;color:var(--muted)}\n  input[type=range]{width:160px}\n  select,input[type=number]{background:#061623;border:1px solid rgba(255,255,255,0.04);padding:6px;border-radius:6px;color:#dff3ff}\n  button{background:linear-gradient(180deg,#0f3460,#07203c);border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:8px;color:#e6f8ff;cursor:pointer}\n  button.secondary{background:#112033;color:#bfe9ff}\n  button:disabled{opacity:0.45;cursor:not-allowed}\n  .visual{display:flex;gap:18px;margin-top:18px}\n  .canvas{flex:1;background:linear-gradient(180deg,#051224,#07172a);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}\n  .array-view{height:220px;display:flex;align-items:end;gap:6px;padding:6px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:8px}\n  .bar{background:linear-gradient(180deg,#2aa6d6,#1a6f93);width:28px;border-radius:6px;display:flex;align-items:end;justify-content:center;color:#031726;font-weight:700;box-shadow:0 3px 8px rgba(2,8,18,0.6);position:relative}\n  .bar.small{width:20px}\n  .bar .label{position:absolute;top:6px;font-size:12px;color:#e8fbff}\n  .bar.dim{opacity:0.45}\n  .bar.moving{outline:3px solid rgba(255,255,255,0.06)}\n  .buckets{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap}\n  .bucket{flex:0 0 calc(100% / 10 - 8px);min-width:48px;background:linear-gradient(180deg,#031827,#05243b);padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;align-items:center;gap:6px}\n  .bucket .bidx{font-size:12px;color:var(--muted);font-weight:700}\n  .bucket .items{display:flex;flex-direction:column;gap:4px;align-items:center;min-height:28px}\n  .bucket .item{background:#083447;color:#dffbff;padding:4px 6px;border-radius:6px;font-size:12px;min-width:24px;text-align:center}\n  .status{margin-top:12px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}\n  .chip{background:rgba(255,255,255,0.03);padding:8px;border-radius:8px;font-size:13px;color:#cfeffb}\n  .legend{font-size:13px;color:var(--muted);margin-top:10px}\n  .footer{margin-top:18px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;align-items:center}\n  .small-muted{font-size:12px;color:var(--muted)}\n  .top-row{display:flex;gap:12px;align-items:center}\n  .right-controls{display:flex;gap:8px}\n  .note{margin-top:8px;color:#9fcbea;font-size:13px}\n  @media(max-width:800px){\n    .bucket{flex:0 0 46%}\n    .bar{width:20px}\n  }\n</style>\n</head>\n<body>\n<div class=\"app\">\n  <header>\n    <div>\n      <h1>Radix Sort Visualizer (LSD - Least Significant Digit)</h1>\n      <div class=\"small-muted\">Stable, non-comparative integer sorting by processing digits from least significant to most significant.</div>\n    </div>\n  </header>\n\n  <div class=\"controls\" style=\"margin-top:14px\">\n    <div class=\"control\">\n      <label>Array size</label>\n      <input id=\"size\" type=\"range\" min=\"3\" max=\"60\" value=\"20\">\n      <div id=\"sizeVal\" class=\"small-muted\" style=\"min-width:36px;text-align:center\">20</div>\n    </div>\n\n    <div class=\"control\">\n      <label>Max value</label>\n      <input id=\"maxVal\" type=\"range\" min=\"5\" max=\"500\" value=\"120\">\n      <div id=\"maxValVal\" class=\"small-muted\" style=\"min-width:44px;text-align:center\">120</div>\n    </div>\n\n    <div class=\"control\">\n      <label>Base (radix)</label>\n      <select id=\"base\">\n        <option value=\"2\">2 (binary)</option>\n        <option value=\"4\">4</option>\n        <option value=\"8\">8 (octal)</option>\n        <option selected value=\"10\">10 (decimal)</option>\n        <option value=\"16\">16 (hex)</option>\n      </select>\n    </div>\n\n    <div class=\"control\">\n      <label>Speed (ms)</label>\n      <input id=\"speed\" type=\"range\" min=\"50\" max=\"1500\" value=\"350\">\n      <div id=\"speedVal\" class=\"small-muted\" style=\"min-width:48px;text-align:center\">350</div>\n    </div>\n\n    <div class=\"control right-controls\" style=\"margin-left:auto\">\n      <button id=\"generateBtn\">Generate</button>\n      <button id=\"startBtn\">Start</button>\n      <button id=\"stepBtn\" class=\"secondary\">Step</button>\n      <button id=\"resetBtn\" class=\"\">Reset</button>\n    </div>\n  </div>\n\n  <div class=\"visual\">\n    <div class=\"canvas\" style=\"flex:2\">\n      <div class=\"top-row\">\n        <div style=\"flex:1\">\n          <div class=\"legend\">Array</div>\n          <div id=\"arrayView\" class=\"array-view\" aria-hidden=\"false\"></div>\n        </div>\n\n        <div style=\"width:320px;margin-left:12px;\">\n          <div class=\"legend\">Status</div>\n          <div class=\"status\">\n            <div class=\"chip\">Pass: <span id=\"passIdx\">-</span></div>\n            <div class=\"chip\">Digit place (base^p): <span id=\"placeVal\">-</span></div>\n            <div class=\"chip\">Buckets: <span id=\"bucketCount\">-</span></div>\n            <div class=\"chip\">Steps: <span id=\"stepIdx\">0 / 0</span></div>\n          </div>\n          <div class=\"note\" id=\"explain\">Click \"Start\" to animate radial passes. Each pass groups numbers into buckets by the current digit, collecting them in stable order.</div>\n        </div>\n      </div>\n\n      <div style=\"margin-top:12px\">\n        <div class=\"legend\">Buckets (0 .. base-1)</div>\n        <div id=\"buckets\" class=\"buckets\"></div>\n      </div>\n    </div>\n\n    <div class=\"canvas\" style=\"flex:1\">\n      <div class=\"legend\">Legend</div>\n      <div style=\"margin-top:10px\">\n        <div class=\"small-muted\">Blue bars = values in array. During a pass, items are moved to buckets (right). After all items are placed, buckets are concatenated in bucket index order to form the array for the next pass.</div>\n        <ul style=\"margin-top:10px;color:#dff3ff\">\n          <li><strong>Stable:</strong> numbers with equal digit keep their relative order in each pass.</li>\n          <li><strong>Complexity:</strong> O(d * (n + b)) where d is digits and b is base. For fixed base, near linear.</li>\n        </ul>\n      </div>\n\n      <div style=\"margin-top:12px\">\n        <div class=\"legend\">Controls</div>\n        <div style=\"margin-top:8px\" class=\"small-muted\">You can change array size, max value, base (radix), and animation speed. Generate a new array before starting.</div>\n      </div>\n\n    </div>\n  </div>\n\n  <div style=\"display:flex;justify-content:space-between;align-items:center;margin-top:14px\">\n    <div class=\"small-muted\">This demo implements LSD (least significant digit) Radix Sort for non-negative integers.</div>\n    <div class=\"small-muted\">Tip: try base 2 or 16 to see more/fewer passes.</div>\n  </div>\n</div>\n\n<script>\n(function(){\n  // UI elements\n  const sizeSlider = document.getElementById('size');\n  const sizeVal = document.getElementById('sizeVal');\n  const maxSlider = document.getElementById('maxVal');\n  const maxValLabel = document.getElementById('maxValVal');\n  const baseSelect = document.getElementById('base');\n  const speedSlider = document.getElementById('speed');\n  const speedVal = document.getElementById('speedVal');\n\n  const generateBtn = document.getElementById('generateBtn');\n  const startBtn = document.getElementById('startBtn');\n  const stepBtn = document.getElementById('stepBtn');\n  const resetBtn = document.getElementById('resetBtn');\n\n  const arrayView = document.getElementById('arrayView');\n  const bucketsView = document.getElementById('buckets');\n\n  const passIdx = document.getElementById('passIdx');\n  const placeVal = document.getElementById('placeVal');\n  const bucketCount = document.getElementById('bucketCount');\n  const stepIdx = document.getElementById('stepIdx');\n\n  // State\n  let array = [];\n  let initialArray = [];\n  let steps = []; // precomputed steps\n  let curStep = 0;\n  let playing = false;\n  let timer = null;\n\n  // Event bindings\n  sizeSlider.addEventListener('input', ()=>{sizeVal.textContent = sizeSlider.value});\n  maxSlider.addEventListener('input', ()=>{maxValLabel.textContent = maxSlider.value});\n  speedSlider.addEventListener('input', ()=>{speedVal.textContent = speedSlider.value});\n\n  generateBtn.addEventListener('click', ()=>{generateNew();});\n  startBtn.addEventListener('click', ()=>{togglePlay();});\n  stepBtn.addEventListener('click', ()=>{stepOnce();});\n  resetBtn.addEventListener('click', ()=>{resetAll();});\n\n  // init\n  sizeVal.textContent = sizeSlider.value;\n  maxValLabel.textContent = maxSlider.value;\n  speedVal.textContent = speedSlider.value;\n  generateNew();\n\n  // Helpers\n  function randInt(min,max){\n    return Math.floor(Math.random()*(max-min+1))+min;\n  }\n\n  function generateNew(){\n    stopPlay();\n    const n = Number(sizeSlider.value);\n    const maxV = Number(maxSlider.value);\n    array = Array.from({length:n}, ()=>randInt(0, maxV));\n    initialArray = array.slice();\n    renderArray(array);\n    clearBuckets();\n    steps = buildRadixSteps(array, Number(baseSelect.value));\n    curStep = 0;\n    updateStatus();\n  }\n\n  function resetAll(){\n    stopPlay();\n    array = initialArray.slice();\n    renderArray(array);\n    clearBuckets();\n    steps = buildRadixSteps(array, Number(baseSelect.value));\n    curStep = 0;\n    updateStatus();\n  }\n\n  function togglePlay(){\n    if(playing){\n      stopPlay();\n    } else {\n      if(curStep >= steps.length) {\n        // if finished, restart from zero automatically\n        curStep = 0;\n        array = initialArray.slice();\n        renderArray(array);\n        clearBuckets();\n      }\n      playing = true;\n      startBtn.textContent = 'Pause';\n      playLoop();\n    }\n  }\n\n  function stopPlay(){\n    playing = false;\n    startBtn.textContent = 'Start';\n    if(timer) { clearTimeout(timer); timer = null; }\n  }\n\n  function playLoop(){\n    if(!playing) return;\n    const delay = Number(speedSlider.value);\n    timer = setTimeout(()=>{\n      const done = performStep();\n      if(done) {\n        stopPlay();\n      } else {\n        playLoop();\n      }\n    }, delay);\n  }\n\n  function stepOnce(){\n    stopPlay();\n    performStep();\n  }\n\n  function performStep(){\n    if(curStep >= steps.length){\n      updateStatus();\n      return true;\n    }\n    const s = steps[curStep];\n    renderStep(s);\n    curStep++;\n    updateStatus();\n    if(curStep >= steps.length){\n      // finished: mark\n      passIdx.textContent = 'done';\n      placeVal.textContent = '-';\n      bucketCount.textContent = Number(baseSelect.value);\n    }\n    return curStep >= steps.length;\n  }\n\n  function updateStatus(){\n    stepIdx.textContent = `${Math.min(curStep, steps.length)} / ${steps.length}`;\n  }\n\n  // Build steps for LSD radix sort (non-negative integers)\n  // Steps: {type:'place', pass, index, value, digit}\n  //        {type:'collect', pass, newArray}\n  function buildRadixSteps(arr, base){\n    const steps = [];\n    if(arr.length === 0) return steps;\n    const maxValue = Math.max(...arr);\n    const digits = Math.max(1, Math.floor(Math.log(maxValue) / Math.log(base)) + 1);\n    let working = arr.slice();\n    for(let p=0;p<digits;p++){\n      // place each element into bucket by digit\n      const buckets = Array.from({length:base}, ()=>[]);\n      for(let i=0;i<working.length;i++){\n        const v = working[i];\n        const digit = Math.floor(v / Math.pow(base, p)) % base;\n        steps.push({type:'place', pass:p, index:i, value:v, digit:digit, total:working.length});\n        buckets[digit].push(v);\n      }\n      // collect\n      const newArr = [];\n      for(let b=0;b<base;b++){\n        for(const v of buckets[b]) newArr.push(v);\n      }\n      steps.push({type:'collect', pass:p, newArray:newArr, buckets:JSON.parse(JSON.stringify(buckets))});\n      working = newArr;\n    }\n    // final 'done' marker\n    steps.push({type:'done', final:working});\n    return steps;\n  }\n\n  // Rendering functions\n  function renderArray(arr, highlightIndex=null, dimMask=[]){\n    arrayView.innerHTML = '';\n    const maxV = Math.max(...arr, 1);\n    const useSmall = arr.length > 36;\n    for(let i=0;i<arr.length;i++){\n      const v = arr[i];\n      const bar = document.createElement('div');\n      bar.className = 'bar' + (useSmall ? ' small' : '');\n      if(dimMask[i]) bar.classList.add('dim');\n      if(i === highlightIndex) bar.classList.add('moving');\n      const height = Math.max(6, Math.round((v / maxV) * 180));\n      bar.style.height = (height+20) + 'px';\n      const lbl = document.createElement('div');\n      lbl.className = 'label';\n      lbl.textContent = v;\n      bar.appendChild(lbl);\n      arrayView.appendChild(bar);\n    }\n  }\n\n  function clearBuckets(){\n    bucketsView.innerHTML = '';\n    const base = Number(baseSelect.value);\n    bucketCount.textContent = base;\n    for(let b=0;b<base;b++){\n      const buck = document.createElement('div');\n      buck.className = 'bucket';\n      const bid = document.createElement('div');\n      bid.className = 'bidx';\n      bid.textContent = b;\n      const items = document.createElement('div');\n      items.className = 'items';\n      buck.appendChild(bid);\n      buck.appendChild(items);\n      bucketsView.appendChild(buck);\n    }\n  }\n\n  function renderStep(s){\n    if(!s) return;\n    if(s.type === 'place'){\n      // On a place step, show the array with the current moving item highlighted and add to bucket display\n      // We'll keep a 'placed' count per bucket for this pass stored in a session place state.\n      if(s.pass !== currentRender.pass){\n        // new pass starts: reset bucket displays and store pass index\n        currentRender.pass = s.pass;\n        currentRender.placed = Array.from({length: Number(baseSelect.value)}, ()=>0);\n        clearBuckets();\n      }\n      // Render array with dimmed items that have already been placed (i.e., indices < current index for this pass)\n      const dimMask = [];\n      for(let i=0;i<s.total;i++){\n        dimMask.push(i < s.index);\n      }\n      renderArray(array, s.index, dimMask);\n\n      // append item to bucket\n      const bidx = s.digit;\n      const bucketElems = bucketsView.children;\n      const it = document.createElement('div');\n      it.className = 'item';\n      it.textContent = s.value;\n      // place item as last child of items container\n      const itemsContainer = bucketElems[bidx].querySelector('.items');\n      itemsContainer.appendChild(it);\n      currentRender.placed[bidx]++;\n\n      passIdx.textContent = (s.pass + 1) + ' / ?';\n      placeVal.textContent = Math.pow(Number(baseSelect.value), s.pass) + ' (base^' + s.pass + ')';\n      bucketCount.textContent = Number(baseSelect.value);\n    } else if(s.type === 'collect'){\n      // Show collection: update array to newArray and clear buckets\n      array = s.newArray.slice();\n      renderArray(array);\n      // show buckets content briefly then clear\n      // First, show bucket counts (already added during place steps we captured in s.buckets)\n      clearBuckets();\n      for(let b=0;b<s.buckets.length;b++){\n        const itemsContainer = bucketsView.children[b].querySelector('.items');\n        for(const v of s.buckets[b]){\n          const it = document.createElement('div');\n          it.className = 'item';\n          it.textContent = v;\n          itemsContainer.appendChild(it);\n        }\n      }\n      passIdx.textContent = (s.pass + 1);\n      placeVal.textContent = Math.pow(Number(baseSelect.value), s.pass) + ' (base^' + s.pass + ')';\n      bucketCount.textContent = Number(baseSelect.value);\n\n      // After a short pause (we manage via animation timing), we'll clear buckets to visually show collection done.\n      // But for simplicity we will clear them immediately so next steps can display placements fresh.\n      // However, to give feedback, we'll keep them for a short visual moment if playing.\n      if(playing){\n        // keep buckets visible for next animation frame, then clear\n        setTimeout(()=>{ clearBuckets(); }, Math.max(80, Number(speedSlider.value)/6));\n      } else {\n        // when stepping manually, keep buckets visible until next step\n      }\n    } else if(s.type === 'done'){\n      array = s.final.slice();\n      renderArray(array);\n      clearBuckets();\n      passIdx.textContent = 'done';\n      placeVal.textContent = '-';\n      bucketCount.textContent = Number(baseSelect.value);\n    }\n  }\n\n  // small state to track current rendering pass\n  const currentRender = {pass:-1, placed:[]};\n\n  // respond to base change by rebuilding steps around current array state\n  baseSelect.addEventListener('change', ()=>{\n    stopPlay();\n    steps = buildRadixSteps(array, Number(baseSelect.value));\n    curStep = 0;\n    clearBuckets();\n    renderArray(array);\n    updateStatus();\n  });\n\n  // keyboard shortcuts: space play/pause, right arrow step\n  window.addEventListener('keydown', (e)=>{\n    if(e.code === 'Space'){ e.preventDefault(); togglePlay(); }\n    if(e.code === 'ArrowRight'){ e.preventDefault(); stepOnce(); }\n  });\n\n  // initial render helpers\n  function initRenderOnce(){\n    clearBuckets();\n    renderArray(array);\n  }\n  initRenderOnce();\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Radix Sort"
    }
  ],
  "topic": "Radix Sort",
  "hasFSM": false,
  "hasTest": true
}