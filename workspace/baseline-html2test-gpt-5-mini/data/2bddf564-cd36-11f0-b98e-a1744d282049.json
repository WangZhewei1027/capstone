{
  "id": "2bddf564-cd36-11f0-b98e-a1744d282049",
  "timestamp": "2025-11-29T15:16:26.383Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Set",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Set — Interactive Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0e1720;\n      --card:#f8fafc;\n      --muted:#9aa6b2;\n      --accent:#60a5fa;\n      --success:#16a34a;\n      --danger:#ef4444;\n      --glass: rgba(255,255,255,0.03);\n    }\n    html,body {height:100%;margin:0;background:linear-gradient(180deg,#071021 0%, #0e1720 40%);color:var(--card);font-family:Inter,Segoe UI,Arial,sans-serif;}\n    .app {max-width:1100px;margin:24px auto;padding:20px;}\n    header {display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;}\n    h1{font-size:20px;margin:0;color:#fff;letter-spacing:0.2px}\n    .controls {display:flex;gap:8px;align-items:center;}\n    button {background:var(--glass);border:1px solid rgba(255,255,255,0.06);color:var(--card);padding:8px 12px;border-radius:8px;cursor:pointer;backdrop-filter: blur(4px);}\n    button:hover{transform:translateY(-1px)}\n    .minor {font-size:13px;color:var(--muted);display:flex;gap:12px;align-items:center;}\n    .board {display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:18px;}\n    .card {background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:12px;cursor:pointer;border:2px solid transparent;display:flex;align-items:center;justify-content:center;min-height:110px;box-shadow: 0 4px 18px rgba(2,6,23,0.5);}\n    .card.disabled {opacity:0.35;pointer-events:none}\n    .card.selected {outline:3px solid rgba(96,165,250,0.28);box-shadow:0 8px 30px rgba(96,165,250,0.06);}\n    .card.correct {outline:3px solid rgba(22,163,74,0.28);box-shadow:0 8px 30px rgba(22,163,74,0.06);}\n    .card.wrong {outline:3px solid rgba(239,68,68,0.28);box-shadow:0 8px 30px rgba(239,68,68,0.06);}\n    .status {display:flex;gap:12px;align-items:center;}\n    .pile {display:flex;align-items:center;gap:8px;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}\n    .small {font-size:13px;color:var(--muted)}\n    footer {margin-top:18px;color:var(--muted);font-size:13px}\n    .hintBtn {background:linear-gradient(90deg,#0ea5e9 0%,#7c3aed 100%);border:none;color:white;}\n    svg {width:100%;height:auto}\n    /* Stripes pattern control */\n    .stripePattern {stroke-width:1.6;stroke-opacity:0.55}\n    @media (max-width:800px){\n      .board {grid-template-columns:repeat(3,1fr)}\n    }\n    @media (max-width:480px){\n      .board {grid-template-columns:repeat(2,1fr)}\n      .card {min-height:88px;padding:8px}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\">\n    <header>\n      <div>\n        <h1>Set — Interactive Demo</h1>\n        <div class=\"minor\">Find sets: pick 3 cards where for each attribute (count, shape, shading, color) they are all the same or all different.</div>\n      </div>\n      <div class=\"controls\">\n        <div class=\"pile\" id=\"deckInfo\" title=\"Deck and score\">\n          <div style=\"font-weight:600\" id=\"score\">Score: 0</div>\n          <div class=\"small\" id=\"deckCount\">Deck: 81</div>\n        </div>\n        <button id=\"hint\" class=\"hintBtn\">Hint</button>\n        <button id=\"deal\">Deal +3</button>\n        <button id=\"new\">New Game</button>\n      </div>\n    </header>\n\n    <main>\n      <div id=\"msg\" class=\"minor\" style=\"margin-bottom:12px\"></div>\n      <div class=\"board\" id=\"board\"></div>\n      <footer>\n        Controls: Click cards to select. Buttons: Hint finds a set on the board, Deal +3 adds cards, New Game restarts. If no sets remain the game ends.\n      </footer>\n    </main>\n  </div>\n\n<script>\n/*\n  Set game demo in a single HTML file.\n  Card attributes: number(1-3), shape(0-2), shading(0-2), color(0-2)\n  81 unique cards total.\n*/\n\n// Constants and utilities\nconst COLORS = [\"#ef4444\",\"#16a34a\",\"#7c3aed\"]; // red, green, purple\nconst SHAPES = [\"diamond\",\"squiggle\",\"oval\"]; // mapping for rendering\nconst SHADINGS = [\"solid\",\"striped\",\"open\"];\nconst NUMBERS = [1,2,3];\n\nlet deck = [];\nlet boardCards = []; // array of card objects currently on board\nlet selected = []; // indices on board of selected cards\nlet score = 0;\n\nconst boardEl = document.getElementById('board');\nconst msgEl = document.getElementById('msg');\nconst deckCountEl = document.getElementById('deckCount');\nconst scoreEl = document.getElementById('score');\nconst hintBtn = document.getElementById('hint');\nconst dealBtn = document.getElementById('deal');\nconst newBtn = document.getElementById('new');\n\n// Build full deck\nfunction buildDeck(){\n  const d = [];\n  let id = 1;\n  for(let n=0;n<3;n++){\n    for(let s=0;s<3;s++){\n      for(let sh=0;sh<3;sh++){\n        for(let c=0;c<3;c++){\n          d.push({number:NUMBERS[n], shape:s, shading:sh, color:c, id:id++});\n        }\n      }\n    }\n  }\n  return d;\n}\nfunction shuffle(array){\n  for(let i=array.length-1;i>0;i--){\n    const j=Math.floor(Math.random()*(i+1));\n    [array[i],array[j]]=[array[j],array[i]];\n  }\n  return array;\n}\n\nfunction startGame(){\n  deck = shuffle(buildDeck());\n  boardCards = [];\n  selected = [];\n  score = 0;\n  msgEl.textContent = \"Game started — find sets!\";\n  fillInitialBoard();\n  render();\n}\n\nfunction fillInitialBoard(){\n  // Deal 12\n  for(let i=0;i<12;i++){\n    if(deck.length) boardCards.push(deck.pop());\n  }\n  // If starting board has no set, auto-deal 3 until there is or deck empty\n  while(findSetOnBoard()===null && deck.length>0 && boardCards.length<18){\n    for(let i=0;i<3;i++) if(deck.length) boardCards.push(deck.pop());\n  }\n}\n\nfunction render(){\n  boardEl.innerHTML = \"\";\n  boardCards.forEach((card, idx)=>{\n    const cardDiv = document.createElement('div');\n    cardDiv.className = 'card';\n    cardDiv.dataset.index = idx;\n    if(selected.includes(idx)) cardDiv.classList.add('selected');\n    // content: an SVG representation\n    cardDiv.appendChild(renderCardSVG(card));\n    cardDiv.addEventListener('click', ()=>onCardClick(idx, cardDiv));\n    boardEl.appendChild(cardDiv);\n  });\n  deckCountEl.textContent = `Deck: ${deck.length}`;\n  scoreEl.textContent = `Score: ${score}`;\n}\n\nfunction renderCardSVG(card){\n  // Create SVG element with patterns for stripes\n  const xmlns = \"http://www.w3.org/2000/svg\";\n  const svg = document.createElementNS(xmlns,'svg');\n  svg.setAttribute('viewBox','0 0 160 100');\n  svg.setAttribute('preserveAspectRatio','xMidYMid meet');\n\n  // defs for stripes\n  const defs = document.createElementNS(xmlns,'defs');\n  const pattern = document.createElementNS(xmlns,'pattern');\n  pattern.setAttribute('id','p'+card.id);\n  pattern.setAttribute('patternUnits','userSpaceOnUse');\n  pattern.setAttribute('width','6');\n  pattern.setAttribute('height','6');\n  const line = document.createElementNS(xmlns,'path');\n  line.setAttribute('d','M0,6 L6,0');\n  line.setAttribute('stroke','currentColor');\n  line.setAttribute('class','stripePattern');\n  pattern.appendChild(line);\n  defs.appendChild(pattern);\n  svg.appendChild(defs);\n\n  // color\n  const color = COLORS[card.color];\n\n  // positions for shapes depending on number\n  const positions = computePositions(card.number);\n\n  positions.forEach(pos=>{\n    let shapeEl;\n    if(SHAPES[card.shape]==='diamond'){\n      shapeEl = document.createElementNS(xmlns,'polygon');\n      const w = 28, h=44;\n      const cx=pos.x, cy=pos.y;\n      const points = `${cx},${cy-h/2} ${cx+w/2},${cy} ${cx},${cy+h/2} ${cx-w/2},${cy}`;\n      shapeEl.setAttribute('points',points);\n    } else if(SHAPES[card.shape]==='oval'){\n      shapeEl = document.createElementNS(xmlns,'ellipse');\n      shapeEl.setAttribute('cx',pos.x);\n      shapeEl.setAttribute('cy',pos.y);\n      shapeEl.setAttribute('rx',18);\n      shapeEl.setAttribute('ry',32/2);\n    } else { // squiggle\n      shapeEl = document.createElementNS(xmlns,'path');\n      // simple squiggle path scaled and translated\n      const sx = pos.x, sy = pos.y;\n      const path = `M ${sx-24} ${sy+6} C ${sx-8} ${sy-26}, ${sx+8} ${sy+26}, ${sx+24} ${sy-6} \n                    C ${sx+8} ${sy+26}, ${sx-8} ${sy-26}, ${sx-24} ${sy+6}`;\n      shapeEl.setAttribute('d',path);\n    }\n\n    // styling based on shading\n    if(SHADINGS[card.shading]==='solid'){\n      shapeEl.setAttribute('fill', color);\n      shapeEl.setAttribute('stroke', color);\n      shapeEl.setAttribute('stroke-width', '1.6');\n    } else if(SHADINGS[card.shading]==='open'){\n      shapeEl.setAttribute('fill','none');\n      shapeEl.setAttribute('stroke', color);\n      shapeEl.setAttribute('stroke-width','2.4');\n    } else { // striped\n      shapeEl.setAttribute('fill', `url(#p${card.id})`);\n      shapeEl.setAttribute('stroke', color);\n      shapeEl.setAttribute('stroke-width','1.6');\n      // pattern color: set currentColor for pattern path and assign computed color via color attribute\n      shapeEl.setAttribute('color', color);\n      // Also set fill opacity slightly for visibility\n      shapeEl.setAttribute('fill-opacity','0.95');\n    }\n    svg.appendChild(shapeEl);\n  });\n\n  return svg;\n}\n\nfunction computePositions(number){\n  // returns positions across the viewbox for 1-3 shapes\n  const cx = 80;\n  if(number===1) return [{x:cx,y:50}];\n  if(number===2) return [{x:cx-28,y:50},{x:cx+28,y:50}];\n  return [{x:cx-44,y:50},{x:cx,y:50},{x:cx+44,y:50}];\n}\n\n// Click handling\nfunction onCardClick(idx, el){\n  if(selected.includes(idx)){\n    selected = selected.filter(i=>i!==idx);\n    render();\n    return;\n  }\n  if(selected.length>=3) return;\n  selected.push(idx);\n  render();\n  if(selected.length===3){\n    // Check set\n    const c1 = boardCards[selected[0]];\n    const c2 = boardCards[selected[1]];\n    const c3 = boardCards[selected[2]];\n    if(isSet(c1,c2,c3)){\n      // mark correct visually\n      markSelectionClass('correct');\n      score++;\n      msgEl.textContent = \"Set! Good job.\";\n      // After short delay replace the cards\n      setTimeout(()=>{\n        removeAndReplaceSelected();\n        selected = [];\n        render();\n        // if board has no sets and deck has cards, keep dealing automatically until set or deck empty\n        if(findSetOnBoard()===null && deck.length>0){\n          // auto-deal up to 3 more and try to create a set\n          dealThree(true);\n        }\n        // Check for game over\n        if(findSetOnBoard()===null && deck.length===0){\n          msgEl.textContent = \"No sets remain and deck is empty — game over.\";\n        }\n      },450);\n    } else {\n      markSelectionClass('wrong');\n      msgEl.textContent = \"Not a set — try again.\";\n      // clear selection after a short delay\n      setTimeout(()=>{\n        selected = [];\n        render();\n        msgEl.textContent = \"\";\n      },750);\n    }\n  }\n}\n\nfunction markSelectionClass(cls){\n  // add class to selected card elements\n  selected.forEach(i=>{\n    const el = boardEl.querySelector(`[data-index=\"${i}\"]`);\n    if(el){\n      el.classList.add(cls);\n    }\n  });\n}\n\n// Remove selected three from board and replace with new cards from deck (fill positions)\nfunction removeAndReplaceSelected(){\n  // sort indices descending to remove without reindexing trouble\n  const idxs = [...selected].sort((a,b)=>b-a);\n  idxs.forEach(idx=>{\n    boardCards.splice(idx,1);\n  });\n  // Fill up to 12 (or previous size if >12) by popping deck\n  while(boardCards.length<12 && deck.length>0){\n    boardCards.push(deck.pop());\n  }\n  // If after replacement fewer than 12 but there are still sets not found it is ok.\n}\n\n// Check set rule\nfunction isSet(a,b,c){\n  return propAllSameOrAllDifferent(a.number,b.number,c.number) &&\n         propAllSameOrAllDifferent(a.shape,b.shape,c.shape) &&\n         propAllSameOrAllDifferent(a.shading,b.shading,c.shading) &&\n         propAllSameOrAllDifferent(a.color,b.color,c.color);\n}\n\nfunction propAllSameOrAllDifferent(x,y,z){\n  return (x===y && y===z) || (x!==y && x!==z && y!==z);\n}\n\n// Find a set on current board: return indices [i,j,k] or null\nfunction findSetOnBoard(){\n  const n = boardCards.length;\n  for(let i=0;i<n-2;i++){\n    for(let j=i+1;j<n-1;j++){\n      for(let k=j+1;k<n;k++){\n        if(isSet(boardCards[i], boardCards[j], boardCards[k])){\n          return [i,j,k];\n        }\n      }\n    }\n  }\n  return null;\n}\n\n// Hint: highlight one card that participates in a set\nfunction giveHint(){\n  const set = findSetOnBoard();\n  if(!set){\n    msgEl.textContent = deck.length>0 ? \"No set on board. You can deal +3.\" : \"No sets remain.\";\n    return;\n  }\n  // flash the three cards briefly\n  set.forEach(i=>{\n    const el = boardEl.querySelector(`[data-index=\"${i}\"]`);\n    if(el){\n      el.classList.add('selected');\n      setTimeout(()=>{ if(el) el.classList.remove('selected'); },1200);\n    }\n  });\n  msgEl.textContent = \"Hint shown (three cards highlighted).\";\n}\n\n// Deal +3 (manual)\nfunction dealThree(asAuto=false){\n  if(deck.length===0){\n    msgEl.textContent = \"Deck is empty — cannot deal.\";\n    return;\n  }\n  // add up to 3 cards\n  for(let i=0;i<3;i++){\n    if(deck.length) boardCards.push(deck.pop());\n  }\n  render();\n  if(!asAuto){\n    // After manual deal, if there is no set, message accordingly\n    if(findSetOnBoard()===null){\n      msgEl.textContent = \"Dealt 3 cards — beware, there might still be no set.\";\n    } else {\n      msgEl.textContent = \"Dealt 3 cards.\";\n    }\n  }\n}\n\n// Event listeners for buttons\nhintBtn.addEventListener('click', ()=>{ giveHint(); });\ndealBtn.addEventListener('click', ()=>{ dealThree(false); });\nnewBtn.addEventListener('click', ()=>{ startGame(); });\n\n// Start the game on load\nstartGame();\n\n// Helpful: show small animation when window resizes (re-render)\nwindow.addEventListener('resize', ()=>render());\n\n/* Accessibility / quick keyboard: press H for hint, D for deal, N for new game, numbers 1-9 to select cards\n   We'll implement simple keyboard mapping - numeric keys map to visible board cards left-to-right.\n*/\nwindow.addEventListener('keydown', (e)=>{\n  if(e.key==='h' || e.key==='H') { giveHint(); }\n  if(e.key==='d' || e.key==='D') { dealThree(false); }\n  if(e.key==='n' || e.key==='N') { startGame(); }\n  // digits 1-9 map to board indices 0..8 (visible order)\n  if(/^[1-9]$/.test(e.key)){\n    const idx = parseInt(e.key,10)-1;\n    if(idx < boardCards.length) {\n      const el = boardEl.querySelector(`[data-index=\"${idx}\"]`);\n      if(el) el.click();\n    }\n  }\n});\n\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Set"
    }
  ],
  "topic": "Set",
  "hasFSM": false,
  "hasTest": true
}