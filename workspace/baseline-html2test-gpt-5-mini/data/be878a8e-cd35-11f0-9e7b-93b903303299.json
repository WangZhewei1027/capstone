{
  "id": "be878a8e-cd35-11f0-9e7b-93b903303299",
  "timestamp": "2025-11-29T15:13:44.707Z",
  "type": "html-to-test",
  "htmlModel": "gpt-5-mini",
  "playwrightModel": "gpt-5-mini",
  "status": "success",
  "question": "Binary Search",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Binary Search Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --card:#0b1220;\n      --accent:#4f46e5;\n      --good:#10b981;\n      --bad:#ef4444;\n      --muted:#94a3b8;\n      --box:#0b1228;\n    }\n    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;}\n    body{background:linear-gradient(180deg,#071023 0%, var(--bg) 100%);color:#e6eef8;display:flex;align-items:flex-start;justify-content:center;padding:28px;}\n    .container{width:980px;max-width:96%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);padding:18px;border-radius:12px;box-shadow: 0 6px 30px rgba(2,6,23,0.6);}\n    h1{margin:0 0 8px 0;font-size:20px;}\n    .top{display:flex;gap:16px;align-items:center;flex-wrap:wrap;}\n    .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}\n    input[type=\"number\"], input[type=\"text\"], select {padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;min-width:90px;}\n    button{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:600;}\n    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);}\n    .row{margin-top:14px;display:flex;gap:14px;align-items:flex-start;}\n    .visual{flex:1;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);min-height:240px;}\n    .info{width:320px;max-width:36%;}\n    .arrayRow{display:flex;gap:8px;flex-wrap:wrap;margin-top:16px;align-items:center;}\n    .cell{width:54px;height:54px;border-radius:8px;background:var(--box);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;border:1px solid rgba(255,255,255,0.03);position:relative;box-shadow: 0 4px 14px rgba(2,6,23,0.5);}\n    .cell.small{width:44px;height:44px;font-size:14px;}\n    .cell.dim{opacity:0.28;filter:grayscale(40%);}\n    .label{font-size:12px;color:var(--muted);position:absolute;top:-18px;left:6px;}\n    .status{margin-top:12px;padding:10px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);font-size:14px;}\n    .log{margin-top:12px;height:180px;overflow:auto;background:rgba(255,255,255,0.01);padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);font-family:monospace;font-size:13px;}\n    .small{font-size:13px;color:var(--muted);}\n    .controlsColumn{display:flex;flex-direction:column;gap:8px;}\n    .pseudocode{font-family:monospace;background:rgba(255,255,255,0.01);padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);font-size:13px;}\n    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}\n    .badge{padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-size:13px;}\n    .mid{box-shadow:0 6px 20px rgba(79,70,229,0.18);border:1px solid rgba(79,70,229,0.9);background:linear-gradient(180deg, rgba(79,70,229,0.12), rgba(79,70,229,0.04));}\n    .low{box-shadow:0 6px 20px rgba(16,185,129,0.12);border:1px solid rgba(16,185,129,0.9);background:linear-gradient(180deg, rgba(16,185,129,0.08), rgba(16,185,129,0.02));}\n    .high{box-shadow:0 6px 20px rgba(239,68,68,0.12);border:1px solid rgba(239,68,68,0.9);background:linear-gradient(180deg, rgba(239,68,68,0.08), rgba(239,68,68,0.02));}\n    .found{box-shadow:0 6px 30px rgba(16,185,129,0.22);border:1px solid rgba(16,185,129,0.95);background:linear-gradient(180deg, rgba(16,185,129,0.12), rgba(16,185,129,0.04));}\n    .notice{font-size:13px;color:var(--muted);margin-top:8px;}\n    footer{margin-top:12px;color:var(--muted);font-size:13px;}\n    .help{font-size:13px;color:var(--muted);margin-top:8px;}\n    .inputRow{display:flex;gap:8px;align-items:center;}\n    .rangeInput{width:160px;}\n    .toggle{display:flex;gap:6px;align-items:center;}\n    .speed{width:120px;}\n  </style>\n</head>\n<body>\n  <div class=\"container\" role=\"main\">\n    <h1>Binary Search Visualizer</h1>\n    <div class=\"top\">\n      <div class=\"controls\">\n        <div class=\"inputRow\">\n          <label class=\"small\" for=\"size\">Array size</label>\n          <input id=\"size\" type=\"number\" min=\"5\" max=\"30\" value=\"15\" />\n        </div>\n        <div class=\"inputRow\">\n          <label class=\"small\" for=\"minVal\">Min</label>\n          <input id=\"minVal\" type=\"number\" value=\"1\" />\n          <label class=\"small\" for=\"maxVal\">Max</label>\n          <input id=\"maxVal\" type=\"number\" value=\"99\" />\n        </div>\n        <button id=\"genBtn\">Generate Sorted Array</button>\n        <button id=\"shuffleBtn\" class=\"secondary\">Shuffle (and sort)</button>\n        <button id=\"customBtn\" class=\"secondary\">Use custom array</button>\n      </div>\n\n      <div style=\"margin-left:auto;display:flex;gap:8px;align-items:center;\">\n        <div class=\"inputRow\">\n          <label class=\"small\" for=\"target\">Target</label>\n          <input id=\"target\" type=\"number\" placeholder=\"value\" />\n        </div>\n        <div class=\"toggle\">\n          <label class=\"small\" for=\"mode\">Mode</label>\n          <select id=\"mode\" title=\"Iterative or Recursive\">\n            <option value=\"iter\">Iterative</option>\n            <option value=\"rec\">Recursive</option>\n          </select>\n        </div>\n        <div class=\"toggle\">\n          <label class=\"small\" for=\"auto\">Auto</label>\n          <select id=\"speed\" class=\"speed\">\n            <option value=\"700\">Slow</option>\n            <option value=\"350\" selected>Normal</option>\n            <option value=\"120\">Fast</option>\n          </select>\n        </div>\n        <button id=\"startBtn\">Start Search</button>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"visual\" aria-live=\"polite\">\n        <div style=\"display:flex;align-items:center;justify-content:space-between;\">\n          <div class=\"small\">Array (sorted ascending)</div>\n          <div class=\"small\">Comparisons: <span id=\"compCount\">0</span></div>\n        </div>\n        <div id=\"array\" class=\"arrayRow\" aria-hidden=\"false\"></div>\n\n        <div class=\"status\" id=\"status\">Status: Ready — generate an array and enter a target, then click \"Start Search\"</div>\n\n        <div class=\"help\">Notes: Binary Search repeatedly halves the search interval by comparing the target to the middle element. It runs in O(log n) time for sorted arrays.</div>\n\n        <div style=\"margin-top:12px\" class=\"small\">Pseudocode (iterative):</div>\n        <div class=\"pseudocode\">\n          left = 0; right = n - 1\n          while left <= right:\n            mid = (left + right) // 2\n            if a[mid] == target: return mid\n            if a[mid] < target: left = mid + 1\n            else: right = mid - 1\n        </div>\n      </div>\n\n      <div class=\"info\">\n        <div class=\"controlsColumn\">\n          <div>\n            <button id=\"stepBtn\" class=\"secondary\">Step</button>\n            <button id=\"autoBtn\">Auto Play</button>\n            <button id=\"resetBtn\" class=\"secondary\">Reset</button>\n          </div>\n\n          <div class=\"meta\">\n            <div class=\"badge\">Low: <span id=\"lowIdx\">-</span></div>\n            <div class=\"badge\">Mid: <span id=\"midIdx\">-</span></div>\n            <div class=\"badge\">High: <span id=\"highIdx\">-</span></div>\n          </div>\n\n          <div class=\"status\" id=\"explain\">Explanation: —</div>\n          <div class=\"log\" id=\"log\" aria-live=\"polite\"></div>\n        </div>\n\n        <footer>\n          Tip: You can click \"Step\" to execute one comparison at a time or \"Auto Play\" to run automatically. Try targets that are present and not present to see different outcomes.\n        </footer>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    // Binary Search Visualizer\n    (function(){\n      const arrayEl = document.getElementById('array');\n      const genBtn = document.getElementById('genBtn');\n      const shuffleBtn = document.getElementById('shuffleBtn');\n      const customBtn = document.getElementById('customBtn');\n      const startBtn = document.getElementById('startBtn');\n      const stepBtn = document.getElementById('stepBtn');\n      const autoBtn = document.getElementById('autoBtn');\n      const resetBtn = document.getElementById('resetBtn');\n      const sizeInput = document.getElementById('size');\n      const minValInput = document.getElementById('minVal');\n      const maxValInput = document.getElementById('maxVal');\n      const targetInput = document.getElementById('target');\n      const compCountEl = document.getElementById('compCount');\n      const statusEl = document.getElementById('status');\n      const logEl = document.getElementById('log');\n      const lowEl = document.getElementById('lowIdx');\n      const midEl = document.getElementById('midIdx');\n      const highEl = document.getElementById('highIdx');\n      const modeSel = document.getElementById('mode');\n      const speedSel = document.getElementById('speed');\n\n      let arr = [];\n      let n = 0;\n      let left = 0, right = -1, mid = -1;\n      let comparisons = 0;\n      let running = false;\n      let autoTimer = null;\n      let state = null; // for recursive mode: stack simulation\n      let foundIndex = -1;\n\n      function log(msg){\n        const at = new Date().toLocaleTimeString();\n        logEl.innerHTML = `<div style=\"margin-bottom:6px\">[${at}] ${escapeHtml(msg)}</div>` + logEl.innerHTML;\n      }\n\n      function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }\n\n      function generateArray(){\n        n = Math.max(5, Math.min(30, parseInt(sizeInput.value)||15));\n        const minV = parseInt(minValInput.value) || 1;\n        const maxV = parseInt(maxValInput.value) || 100;\n        const set = new Set();\n        while(set.size < n){\n          const v = Math.floor(Math.random()*(maxV-minV+1)) + minV;\n          set.add(v);\n        }\n        arr = Array.from(set).sort((a,b)=>a-b);\n        resetState();\n        renderArray();\n        statusEl.textContent = `Status: Generated sorted array of ${n} unique values.`;\n        log(`Generated array: [${arr.join(', ')}]`);\n      }\n\n      function shuffleAndSort(){\n        // small shuffle then sort to show effect (keeps values same)\n        for(let i=arr.length-1;i>0;i--){\n          const j=Math.floor(Math.random()*(i+1));\n          [arr[i],arr[j]]=[arr[j],arr[i]];\n        }\n        arr.sort((a,b)=>a-b);\n        resetState();\n        renderArray();\n        log('Shuffled then sorted the existing array.');\n        statusEl.textContent = 'Status: Array reshuffled and sorted.';\n      }\n\n      function useCustomArray(){\n        const input = prompt('Enter numbers separated by commas (they will be sorted ascending):', arr.join(', '));\n        if(!input) return;\n        const parts = input.split(',').map(s=>s.trim()).filter(s=>s.length);\n        const nums = parts.map(s=>Number(s)).filter(x=>!isNaN(x));\n        if(nums.length===0){ alert('No valid numbers provided.'); return; }\n        arr = Array.from(new Set(nums)).sort((a,b)=>a-b);\n        n = arr.length;\n        sizeInput.value = n;\n        resetState();\n        renderArray();\n        log(`Custom array used: [${arr.join(', ')}]`);\n        statusEl.textContent = `Status: Custom array set (${n} unique sorted values).`;\n      }\n\n      function renderArray(){\n        arrayEl.innerHTML = '';\n        arr.forEach((v,i)=>{\n          const d = document.createElement('div');\n          d.className = 'cell';\n          d.dataset.index = i;\n          d.textContent = v;\n          const lb = document.createElement('div');\n          lb.className='label';\n          lb.textContent = i;\n          d.appendChild(lb);\n          arrayEl.appendChild(d);\n        });\n        updateMarkers();\n      }\n\n      function updateMarkers(){\n        const cells = arrayEl.querySelectorAll('.cell');\n        cells.forEach((cell, i)=>{\n          cell.classList.remove('mid','low','high','dim','found');\n          if(i < left || i > right) cell.classList.add('dim');\n          if(i === mid) cell.classList.add('mid');\n          if(i === left) cell.classList.add('low');\n          if(i === right) cell.classList.add('high');\n          if(i === foundIndex) cell.classList.add('found');\n        });\n        lowEl.textContent = left;\n        midEl.textContent = mid>=0?mid:'-';\n        highEl.textContent = right;\n        compCountEl.textContent = comparisons;\n      }\n\n      function resetState(){\n        left=0; right=arr.length-1; mid=-1; comparisons=0; running=false; foundIndex=-1;\n        clearInterval(autoTimer); autoTimer=null; autoBtn.textContent='Auto Play';\n        logEl.innerHTML = '';\n        state = null;\n        updateMarkers();\n        compCountEl.textContent = comparisons;\n        statusEl.textContent = 'Status: Ready.';\n      }\n\n      function startSearch(){\n        const tval = targetInput.value.trim();\n        if(!tval){ alert('Please enter a target value to search for.'); return; }\n        if(arr.length===0){ alert('Array is empty. Generate or enter a custom array first.'); return; }\n        resetState();\n        // parse target as number\n        const target = Number(tval);\n        if(isNaN(target)){ alert('Target must be a number.'); return; }\n        // initialize\n        left = 0; right = arr.length-1; mid=-1; comparisons=0; foundIndex=-1;\n        updateMarkers();\n        statusEl.textContent = `Status: Searching for ${target}`;\n        log(`Search started for target ${target} (mode: ${modeSel.value === 'iter' ? 'iterative' : 'recursive'})`);\n        if(modeSel.value === 'iter'){\n          running = true;\n        }else{\n          // prepare recursive stack as manual simulation: push initial segment\n          state = [{l:0, r: arr.length-1, stage:'enter'}];\n          running = true;\n        }\n      }\n\n      function stepOnce(){\n        if(!running){\n          statusEl.textContent = 'Status: Not running. Click Start Search first.';\n          return;\n        }\n        const target = Number(targetInput.value);\n        if(isNaN(target)){ alert('Target must be a number.'); running=false; return; }\n        if(modeSel.value === 'iter') return iterativeStep(target);\n        else return recursiveStep(target);\n      }\n\n      function iterativeStep(target){\n        if(left > right){\n          statusEl.textContent = `Status: Target ${target} NOT found after ${comparisons} comparisons.`;\n          log(`Exhausted search interval. ${target} not found.`);\n          running = false;\n          updateMarkers();\n          return;\n        }\n        mid = Math.floor((left + right)/2);\n        comparisons++;\n        updateMarkers();\n        const val = arr[mid];\n        statusEl.textContent = `Comparing target ${target} with a[mid]=${val} (index ${mid})`;\n        log(`Compare #${comparisons}: a[${mid}] = ${val} ${val === target ? '==' : (val < target ? '<' : '>')} target ${target}`);\n        if(val === target){\n          foundIndex = mid;\n          updateMarkers();\n          statusEl.textContent = `Status: Found target ${target} at index ${mid} in ${comparisons} comparisons.`;\n          log(`Found at index ${mid}.`);\n          running = false;\n          return;\n        }\n        if(val < target){\n          // move right\n          left = mid + 1;\n          log(`Target greater than a[${mid}]; narrowing to [${left}, ${right}]`);\n        }else{\n          right = mid - 1;\n          log(`Target less than a[${mid}]; narrowing to [${left}, ${right}]`);\n        }\n        updateMarkers();\n      }\n\n      function recursiveStep(target){\n        // we simulate recursion with a stack of frames: {l,r,stage,mid}\n        if(!state || state.length===0){\n          statusEl.textContent = `Status: Target ${target} NOT found after ${comparisons} comparisons.`;\n          log(`Recursive stack empty. ${target} not found.`);\n          running = false;\n          return;\n        }\n        const frame = state.pop();\n        if(!frame) return;\n        const l = frame.l, r = frame.r;\n        if(l > r){\n          log(`Frame [${l},${r}] is empty; backtrack.`);\n          // continue to next frame\n          if(state.length===0){\n            statusEl.textContent = `Status: Target ${target} NOT found after ${comparisons} comparisons.`;\n            running = false;\n          }\n          updateMarkers();\n          return;\n        }\n        mid = Math.floor((l + r)/2);\n        comparisons++;\n        updateMarkers();\n        const val = arr[mid];\n        statusEl.textContent = `Recursive call on [${l}, ${r}] — compare a[${mid}] = ${val} with target ${target}`;\n        log(`Compare #${comparisons}: a[${mid}] = ${val} ${val === target ? '==' : (val < target ? '<' : '>')} target ${target}`);\n        if(val === target){\n          foundIndex = mid;\n          updateMarkers();\n          statusEl.textContent = `Status: Found target ${target} at index ${mid} in ${comparisons} comparisons (recursive).`;\n          log(`Found at index ${mid} (recursive).`);\n          running = false;\n          return;\n        }\n        if(val < target){\n          log(`Target > a[${mid}]; recurse on [${mid+1}, ${r}]`);\n          // push the right interval to process next\n          state.push({l: mid+1, r:r});\n        }else{\n          log(`Target < a[${mid}]; recurse on [${l}, ${mid-1}]`);\n          state.push({l: l, r: mid-1});\n        }\n        updateMarkers();\n      }\n\n      function toggleAuto(){\n        if(autoTimer){\n          clearInterval(autoTimer);\n          autoTimer = null;\n          autoBtn.textContent = 'Auto Play';\n          return;\n        }\n        if(!running){\n          alert('Start the search first.');\n          return;\n        }\n        autoBtn.textContent = 'Stop';\n        const delay = parseInt(speedSel.value) || 350;\n        autoTimer = setInterval(()=>{\n          if(!running){\n            clearInterval(autoTimer); autoTimer=null; autoBtn.textContent='Auto Play';\n            return;\n          }\n          stepOnce();\n        }, delay);\n      }\n\n      // Event listeners\n      genBtn.addEventListener('click', generateArray);\n      shuffleBtn.addEventListener('click', shuffleAndSort);\n      customBtn.addEventListener('click', useCustomArray);\n      startBtn.addEventListener('click', ()=>{\n        startSearch();\n      });\n      stepBtn.addEventListener('click', ()=>{ stepOnce(); });\n      autoBtn.addEventListener('click', ()=>{ toggleAuto(); });\n      resetBtn.addEventListener('click', ()=>{ resetState(); renderArray(); });\n\n      // keyboard shortcuts\n      document.addEventListener('keydown', (e)=>{\n        if(e.key === ' ' && !/INPUT|SELECT|TEXTAREA/.test(document.activeElement.tagName)){\n          e.preventDefault();\n          stepOnce();\n        }\n        if(e.key === 'a' && !/INPUT|SELECT|TEXTAREA/.test(document.activeElement.tagName)){\n          toggleAuto();\n        }\n      });\n\n      // initialize\n      generateArray();\n\n      // small accessibility: clicking cells shows index/value\n      arrayEl.addEventListener('click', (e)=>{\n        const c = e.target.closest('.cell');\n        if(!c) return;\n        const i = parseInt(c.dataset.index);\n        alert(`Index: ${i}\\nValue: ${arr[i]}`);\n      });\n\n      // provide helpful initial examples by setting target suggestions when clicking cells\n      arrayEl.addEventListener('contextmenu', (e)=>{\n        const c = e.target.closest('.cell');\n        if(!c) return;\n        e.preventDefault();\n        const i = parseInt(c.dataset.index);\n        targetInput.value = arr[i];\n        log(`Target input set to a[${i}] = ${arr[i]} (via right-click)`);\n      });\n\n      // simple responsiveness: regenerate if size changed with quick button\n      sizeInput.addEventListener('change', ()=>{ /* do nothing until user clicks generate */ });\n\n      // small safety: stop auto if window hidden\n      document.addEventListener('visibilitychange', ()=>{\n        if(document.hidden && autoTimer){ clearInterval(autoTimer); autoTimer=null; autoBtn.textContent='Auto Play'; }\n      });\n\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Binary Search"
    }
  ],
  "topic": "Binary Search",
  "hasFSM": false,
  "hasTest": true
}