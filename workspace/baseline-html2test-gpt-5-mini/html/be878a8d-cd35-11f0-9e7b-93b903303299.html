<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Linear Search Visualizer</title>
  <style>
    :root{
      --bg:#0f1724;
      --panel:#0b1220;
      --accent:#07c;
      --muted:#94a3b8;
      --good:#16a34a;
      --bad:#ef4444;
      --card:#0b1220;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{
      margin:0;
      background:linear-gradient(180deg,var(--bg), #071127 80%);
      color:#e6eef8;
      min-height:100vh;
      padding:24px;
    }
    .container{
      max-width:1100px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:20px;
      align-items:start;
    }
    header{
      grid-column:1/-1;
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:8px;
    }
    header h1{
      margin:0;
      font-size:20px;
      letter-spacing:0.2px;
    }
    header p{margin:0;color:var(--muted);font-size:13px;}
    .panel{
      background:linear-gradient(180deg,var(--panel), rgba(255,255,255,0.02));
      padding:16px;
      border-radius:12px;
      box-shadow: 0 6px 20px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    .controls{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px;}
    input[type="number"], input[type="text"], select{
      width:100%;
      padding:8px 10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.04);
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      color:var(--muted);
      font-size:14px;
    }
    .row{display:flex;gap:8px;align-items:center;}
    .row .btn{
      padding:8px 10px;
      border-radius:8px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      color:var(--muted);
      cursor:pointer;
      font-size:13px;
    }
    .bigbtn{
      padding:10px 12px;
      font-weight:600;
      color:#fff;
      background:linear-gradient(180deg,var(--accent), #0a7bd6);
      border: none;
      border-radius:10px;
      box-shadow:0 6px 18px rgba(7,100,180,0.15);
    }
    .btn:active{transform:translateY(1px);}
    .array-area{
      padding:18px;
      min-height:240px;
      display:flex;
      gap:12px;
      align-items:end;
      justify-content:flex-start;
      overflow:auto;
      border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      border:1px dashed rgba(255,255,255,0.02);
    }
    .item{
      min-width:48px;
      height:64px;
      background:var(--glass);
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--muted);
      font-weight:700;
      position:relative;
      transition:transform 200ms ease, background-color 200ms, box-shadow 200ms, color 200ms;
      border:1px solid rgba(255,255,255,0.025);
      box-shadow: inset 0 -6px 24px rgba(0,0,0,0.25);
      user-select:none;
    }
    .item .label{
      position:absolute;
      top:-18px;
      left:50%;
      transform:translateX(-50%);
      font-size:12px;
      color:var(--muted);
    }
    .item.comparing{
      transform:translateY(-10px);
      background:linear-gradient(180deg,#0a2947,#063055);
      color:#fff;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
    }
    .item.found{
      transform:translateY(-12px) scale(1.03);
      background:linear-gradient(180deg,var(--good), #059669);
      color:#072010;
      box-shadow:0 14px 40px rgba(5,102,64,0.18);
    }
    .item.checked{
      opacity:0.6;
      transform:translateY(0);
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      color:var(--muted);
      border-color: rgba(255,255,255,0.02);
    }
    .status{
      margin-top:12px;
      font-size:14px;
      color:var(--muted);
    }
    .controls-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:8px;
    }
    .speed-wrap{display:flex;align-items:center;gap:8px}
    input[type="range"]{width:100%;}
    pre{background:rgba(255,255,255,0.02);padding:12px;border-radius:8px;overflow:auto;font-size:13px;color:var(--muted);margin:0}
    .footer{
      margin-top:12px;
      color:var(--muted);
      font-size:13px;
      border-top:1px dashed rgba(255,255,255,0.02);
      padding-top:10px;
    }
    .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .legend .key{display:flex;gap:6px;align-items:center;font-size:13px;color:var(--muted)}
    .dot{width:14px;height:14px;border-radius:4px}
    .dot.comp{background:linear-gradient(180deg,#0a2947,#063055)}
    .dot.found{background:linear-gradient(180deg,var(--good), #059669)}
    .dot.checked{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005))}
    /* Responsive */
    @media (max-width:980px){
      .container{grid-template-columns:1fr; padding-bottom:40px;}
      .array-area{min-height:160px;overflow:auto;}
    }
    .summary{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:8px;
      color:var(--muted);
      font-size:13px;
    }
    .pill{
      background:rgba(255,255,255,0.02);
      padding:6px 8px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Linear Search — Visual Demonstration</h1>
        <p>Step through a linear (sequential) search in an array. The algorithm checks each element one-by-one until it finds the target or reaches the end.</p>
      </div>
    </header>

    <!-- Left panel: controls -->
    <div class="panel">
      <div class="controls">
        <div>
          <label>Array (comma-separated numbers)</label>
          <input id="arrayInput" type="text" value="7, 2, 9, 4, 3, 11, 6, 3" />
        </div>
        <div style="margin-top:8px;">
          <label>Target value to search for</label>
          <input id="targetInput" type="text" value="3" />
        </div>

        <div class="controls-grid" style="margin-top:8px;">
          <div>
            <label>Array size (for random)</label>
            <input id="sizeInput" type="number" min="2" max="30" value="8" />
          </div>
          <div>
            <label>Max random value</label>
            <input id="maxValInput" type="number" min="5" max="999" value="20" />
          </div>
        </div>

        <div class="row" style="margin-top:10px;">
          <button id="generateBtn" class="row btn">Generate Random Array</button>
          <button id="applyBtn" class="row bigbtn">Apply & Reset</button>
        </div>

        <div style="margin-top:10px;">
          <label>Controls</label>
          <div class="row">
            <button id="stepBackBtn" class="btn">⟸ Step Back</button>
            <button id="stepBtn" class="btn">Step ⟹</button>
            <button id="playBtn" class="bigbtn">Play</button>
            <button id="resetBtn" class="btn">Reset</button>
          </div>
        </div>

        <div style="margin-top:10px;">
          <label>Speed</label>
          <div class="speed-wrap">
            <input id="speedRange" type="range" min="200" max="2000" step="100" value="900" />
            <div id="speedLabel" style="width:56px;text-align:right;color:var(--muted);font-size:13px;">900ms</div>
          </div>
        </div>

        <div style="margin-top:10px;">
          <label>Visualization options</label>
          <div style="display:flex;gap:8px;margin-top:6px;">
            <button id="shuffleBtn" class="btn">Shuffle</button>
            <button id="reverseBtn" class="btn">Reverse</button>
          </div>
        </div>

        <div class="status" id="statusArea" style="margin-top:12px;">
          <strong>Status:</strong> Ready. Press "Play" to start the search.
          <div class="legend">
            <div class="key"><div class="dot comp"></div>Comparing</div>
            <div class="key"><div class="dot found"></div>Found</div>
            <div class="key"><div class="dot checked"></div>Checked</div>
          </div>
        </div>

        <div class="footer">
          <div style="font-weight:600;margin-bottom:6px;">Pseudocode</div>
          <pre id="pseudo">
function linearSearch(A, target):
  for i from 0 to A.length - 1:
    if A[i] == target:
      return i   // found at index i
  return -1      // not found
          </pre>

          <div class="summary">
            <div class="pill">Time complexity: O(n)</div>
            <div class="pill">Space: O(1)</div>
            <div class="pill" id="comparisonsPill">Comparisons: 0</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right panel: visualization -->
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
        <div style="font-weight:700;">Array Visualization</div>
        <div style="color:var(--muted);font-size:13px;">Target: <span id="targetBadge" style="font-weight:700;color:#fff;margin-left:6px;">3</span></div>
      </div>

      <div id="arrayArea" class="array-area" aria-live="polite"></div>

      <div class="status" id="logArea" style="margin-top:12px;">
        <strong>Log:</strong> <span id="logText">No steps yet.</span>
      </div>
    </div>
  </div>

  <script>
    // Linear Search Visualizer
    (function(){
      // Elements
      const arrayInput = document.getElementById('arrayInput');
      const targetInput = document.getElementById('targetInput');
      const sizeInput = document.getElementById('sizeInput');
      const maxValInput = document.getElementById('maxValInput');
      const generateBtn = document.getElementById('generateBtn');
      const applyBtn = document.getElementById('applyBtn');
      const shuffleBtn = document.getElementById('shuffleBtn');
      const reverseBtn = document.getElementById('reverseBtn');
      const stepBtn = document.getElementById('stepBtn');
      const stepBackBtn = document.getElementById('stepBackBtn');
      const playBtn = document.getElementById('playBtn');
      const resetBtn = document.getElementById('resetBtn');
      const arrayArea = document.getElementById('arrayArea');
      const statusArea = document.getElementById('statusArea');
      const logText = document.getElementById('logText');
      const comparisonsPill = document.getElementById('comparisonsPill');
      const targetBadge = document.getElementById('targetBadge');
      const speedRange = document.getElementById('speedRange');
      const speedLabel = document.getElementById('speedLabel');

      let arr = [];
      let target = null;
      let currentIndex = -1;
      let comparisons = 0;
      let playing = false;
      let timer = null;
      let finished = false;

      // Utilities
      function parseArrayInput(value){
        // Allow numbers separated by comma or space
        const parts = value.split(',').map(s => s.trim()).filter(s => s !== '');
        const nums = parts.map(s => {
          const n = Number(s);
          return isNaN(n) ? s : n;
        });
        return nums;
      }
      function randomArray(n, max){
        const a = [];
        for(let i=0;i<n;i++){
          a.push(Math.floor(Math.random()*max)+1);
        }
        return a;
      }

      // Render array
      function renderArray(){
        arrayArea.innerHTML = '';
        arr.forEach((val, idx) => {
          const el = document.createElement('div');
          el.className = 'item';
          el.dataset.index = idx;
          const label = document.createElement('div');
          label.className = 'label';
          label.textContent = idx;
          const v = document.createElement('div');
          v.textContent = String(val);
          el.appendChild(label);
          el.appendChild(v);
          arrayArea.appendChild(el);
        });
      }

      function resetVisualStates(){
        const items = arrayArea.querySelectorAll('.item');
        items.forEach(it => {
          it.classList.remove('comparing','found','checked');
        });
      }

      function updateStatus(msg){
        statusArea.innerHTML = '<strong>Status:</strong> ' + msg;
      }

      function log(msg){
        logText.textContent = msg;
      }

      function updateComparisons(){
        comparisonsPill.textContent = 'Comparisons: ' + comparisons;
      }

      function setTargetBadge(){
        targetBadge.textContent = String(target);
      }

      // Control logic
      function applySettings(){
        const parsed = parseArrayInput(arrayInput.value);
        if(parsed.length === 0){
          alert('Array is empty. Please enter at least one value or generate a random array.');
          return;
        }
        arr = parsed;
        // target: try to parse number else keep string
        const tRaw = targetInput.value.trim();
        const tNum = Number(tRaw);
        target = (tRaw === '') ? '' : (isNaN(tNum) ? tRaw : tNum);
        currentIndex = -1;
        comparisons = 0;
        playing = false;
        finished = false;
        clearInterval(timer);
        renderArray();
        resetVisualStates();
        updateStatus('Ready. Press "Play" to start the search.');
        log('No steps yet.');
        updateComparisons();
        setTargetBadge();
        playBtn.textContent = 'Play';
      }

      function stepForward(){
        if(finished) return;
        if(currentIndex >= arr.length - 1){
          // reached end
          currentIndex = arr.length - 1;
          markChecked(currentIndex);
          finished = true;
          updateStatus('Target not found. Reached end of array.');
          log('Not found after ' + comparisons + ' comparisons.');
          return;
        }
        // move to next
        currentIndex++;
        comparisons++;
        updateComparisons();
        performComparison(currentIndex);
      }

      function stepBack(){
        if(currentIndex <= -1) return;
        // Undo last comparison visually: mark that element as unchecked
        const prev = currentIndex;
        const el = arrayArea.querySelector('.item[data-index="'+prev+'"]');
        if(el){
          el.classList.remove('comparing','found');
          el.classList.add('checked');
        }
        currentIndex--;
        comparisons = Math.max(0, comparisons-1);
        updateComparisons();
        finished = false;
        playing = false;
        clearInterval(timer);
        playBtn.textContent = 'Play';
        updateStatus('Stepped back.');
        log('Stepped back to index ' + (currentIndex >= 0 ? currentIndex : 'start'));
      }

      function performComparison(i){
        resetVisualStates();
        const el = arrayArea.querySelector('.item[data-index="'+i+'"]');
        if(!el) return;
        el.classList.add('comparing');
        updateStatus('Comparing index ' + i + ' (value: ' + String(arr[i]) + ') with target ' + String(target) + '...');
        log('Comparing index ' + i + ' → ' + String(arr[i]));
        // Compare with loose equality for numeric vs string handling
        if(arr[i] === target || String(arr[i]) === String(target)){
          // found
          el.classList.remove('comparing');
          el.classList.add('found');
          finished = true;
          playing = false;
          clearInterval(timer);
          playBtn.textContent = 'Play';
          updateStatus('Found target at index ' + i + '.');
          log('Found at index ' + i + ' after ' + comparisons + ' comparisons.');
        } else {
          // not this one — mark checked
          setTimeout(() => {
            el.classList.remove('comparing');
            el.classList.add('checked');
          }, 200);
          if(currentIndex >= arr.length - 1){
            finished = true;
            updateStatus('Target not found. Reached end.');
            log('Not found after ' + comparisons + ' comparisons.');
            playing = false;
            clearInterval(timer);
            playBtn.textContent = 'Play';
          } else {
            updateStatus('Checked index ' + i + ' — not a match.');
          }
        }
      }

      function markChecked(i){
        const el = arrayArea.querySelector('.item[data-index="'+i+'"]');
        if(el){
          el.classList.remove('comparing','found');
          el.classList.add('checked');
        }
      }

      function play(){
        if(finished){
          updateStatus('Search already finished. Reset or apply new settings to run again.');
          return;
        }
        if(playing){
          // pause
          playing = false;
          clearInterval(timer);
          playBtn.textContent = 'Play';
          updateStatus('Paused.');
          return;
        }
        // start playing
        playing = true;
        playBtn.textContent = 'Pause';
        updateStatus('Playing...');
        const delay = Number(speedRange.value);
        timer = setInterval(() => {
          if(!playing){
            clearInterval(timer);
            return;
          }
          if(finished){
            clearInterval(timer);
            playing = false;
            playBtn.textContent = 'Play';
            return;
          }
          if(currentIndex >= arr.length - 1){
            // after last element checked and not found
            if(currentIndex === arr.length - 1 && !finished){
              // mark last as checked (it was compared by stepForward maybe)
              markChecked(currentIndex);
            }
            finished = true;
            updateStatus('Target not found.');
            log('Not found after ' + comparisons + ' comparisons.');
            playing = false;
            playBtn.textContent = 'Play';
            clearInterval(timer);
            return;
          }
          stepForward();
        }, delay);
      }

      function reset(){
        currentIndex = -1;
        comparisons = 0;
        finished = false;
        playing = false;
        clearInterval(timer);
        renderArray();
        resetVisualStates();
        updateStatus('Reset. Ready to start.');
        log('No steps yet.');
        updateComparisons();
        playBtn.textContent = 'Play';
      }

      // UI bindings
      generateBtn.addEventListener('click', () => {
        const n = Math.max(2, Math.min(30, Number(sizeInput.value) || 8));
        const maxv = Math.max(2, Number(maxValInput.value) || 20);
        const r = randomArray(n, maxv);
        arrayInput.value = r.join(', ');
      });

      applyBtn.addEventListener('click', () => {
        applySettings();
      });

      stepBtn.addEventListener('click', () => {
        if(playing) return; // do not mix manual steps while playing
        stepForward();
      });

      stepBackBtn.addEventListener('click', () => {
        if(playing) return;
        stepBack();
      });

      playBtn.addEventListener('click', () => {
        // apply settings if not rendered
        if(arrayArea.children.length === 0){
          applySettings();
        }
        // if not started and no steps yet, start at -1
        play();
      });

      resetBtn.addEventListener('click', () => {
        reset();
      });

      shuffleBtn.addEventListener('click', () => {
        // Fisher-Yates
        for(let i = arr.length -1; i>0; i--){
          const j = Math.floor(Math.random()*(i+1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        arrayInput.value = arr.join(', ');
        reset();
      });

      reverseBtn.addEventListener('click', () => {
        arr.reverse();
        arrayInput.value = arr.join(', ');
        reset();
      });

      speedRange.addEventListener('input', () => {
        speedLabel.textContent = speedRange.value + 'ms';
        if(playing){
          // restart timer with new speed
          clearInterval(timer);
          const delay = Number(speedRange.value);
          timer = setInterval(() => {
            if(finished){ clearInterval(timer); playing = false; playBtn.textContent='Play'; return; }
            stepForward();
          }, delay);
        }
      });

      // keyboard shortcuts
      window.addEventListener('keydown', (e) => {
        if(e.key === ' '){
          e.preventDefault();
          playBtn.click();
        } else if(e.key === 'ArrowRight'){
          stepBtn.click();
        } else if(e.key === 'ArrowLeft'){
          stepBackBtn.click();
        } else if(e.key === 'r' || e.key === 'R'){
          resetBtn.click();
        }
      });

      // Initialize default
      applySettings();

      // Helpful initial message
      updateStatus('Ready. Press "Play" to begin the linear search. Use Step to move one-by-one.');
      log('No steps yet.');

    })();
  </script>
</body>
</html>