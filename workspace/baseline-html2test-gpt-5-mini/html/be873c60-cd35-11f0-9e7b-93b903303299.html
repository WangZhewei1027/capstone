<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Linked List Visualizer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0f1724;
      --panel:#0b1220;
      --accent:#67e8f9;
      --muted:#94a3b8;
      --card:#071029;
      --good:#10b981;
      --danger:#ef4444;
      --btn:#0ea5a3;
    }
    *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#041024 0%, #07132a 100%);color:#e6eef6}
    .wrap{max-width:1100px;margin:28px auto;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 6px 30px rgba(2,6,23,0.6);}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between}
    h1{font-size:20px;margin:0}
    p.lead{margin:6px 0 0;color:var(--muted);font-size:13px}
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
    .panel{display:flex;gap:12px;align-items:center}
    input[type="text"],input[type="number"],select{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;outline:none;width:120px}
    button{background:linear-gradient(90deg,var(--btn),#06b6d4);color:#012;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;box-shadow:0 6px 18px rgba(6,95,98,0.12)}
    button.secondary{background:transparent;color:var(--accent);border:1px solid rgba(255,255,255,0.04);box-shadow:none}
    button.danger{background:linear-gradient(90deg,#ef4444,#f97316);color:white}
    .display-area{margin-top:18px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:18px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
    .list-canvas{min-height:120px;padding:18px;border-radius:8px;background:linear-gradient(90deg, rgba(255,255,255,0.01), transparent);display:flex;align-items:center;overflow:auto}
    .node{display:flex;align-items:center;gap:0;border-radius:8px;padding:6px 8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);margin-right:8px;transition:transform .25s, box-shadow .2s, background .2s;min-width:68px}
    .node .box{min-width:46px;height:40px;border-radius:6px;background:#021426;border:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:700;font-size:15px;margin-right:8px;padding:6px}
    .node .ptr{width:22px;height:22px;border-radius:4px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:12px;border:1px dashed rgba(255,255,255,0.02)}
    .arrow{width:36px;height:16px;display:flex;align-items:center;justify-content:center;margin-right:12px}
    svg{fill:none;stroke:rgba(255,255,255,0.14);stroke-width:2}
    .node.highlight{transform:translateY(-8px);box-shadow:0 8px 24px rgba(3,12,23,0.5);background:linear-gradient(90deg, rgba(103,232,249,0.06), rgba(103,232,249,0.03));}
    .node.found .box{background:linear-gradient(90deg,#064e3b,#065f46);color:white}
    .node.head .box{box-shadow:0 6px 18px rgba(14,165,233,0.06);border:1px solid rgba(103,232,249,0.12)}
    .node.tail .box{box-shadow:0 6px 18px rgba(34,197,94,0.06);border:1px solid rgba(34,197,94,0.12)}
    .info{margin-left:auto;text-align:right;color:var(--muted);font-size:13px}
    .small{font-size:13px;color:var(--muted)}
    .actions{display:flex;gap:8px;align-items:center}
    .log{margin-top:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);max-height:160px;overflow:auto;font-size:13px;color:var(--muted)}
    .code{margin-top:12px;padding:12px;border-radius:8px;background:#001825;border:1px solid rgba(255,255,255,0.02);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;color:#bfefff;font-size:13px;white-space:pre-wrap}
    footer{display:flex;gap:10px;align-items:center;margin-top:14px;justify-content:space-between}
    @media (max-width:820px){header{flex-direction:column;align-items:flex-start} .info{display:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Linked List Visualizer</h1>
        <p class="lead">Interactive singly linked list: insert, remove, search, traverse, and reverse with animations.</p>
      </div>
      <div class="info small">
        Tip: use "Step" to animate traversal. Values are strings/numbers.
      </div>
    </header>

    <div class="controls" style="margin-top:16px;">
      <div class="card panel">
        <input id="val" type="text" placeholder="value (e.g. 42)" />
        <input id="idx" type="number" placeholder="index" min="0" />
        <div class="actions">
          <button id="addHead">Add Head</button>
          <button id="addTail">Add Tail</button>
          <button id="insertAt">Insert At</button>
        </div>
      </div>

      <div class="card panel">
        <button id="delHead" class="secondary">Delete Head</button>
        <button id="delTail" class="secondary">Delete Tail</button>
        <button id="delAt" class="secondary">Delete At</button>
        <button id="delVal" class="secondary">Delete Value</button>
      </div>

      <div class="card panel">
        <button id="search" class="secondary">Search</button>
        <button id="traverse" class="secondary">Traverse</button>
        <button id="step" class="secondary">Step</button>
        <button id="reverse" class="secondary">Reverse</button>
      </div>

      <div class="card panel">
        <button id="random" class="secondary">Random List</button>
        <button id="clear" class="danger">Clear</button>
      </div>
    </div>

    <div class="display-area">
      <div class="list-canvas card" id="canvas">
        <!-- nodes will render here -->
        <div style="color:var(--muted);padding:6px 12px;border-radius:8px;background:rgba(255,255,255,0.01)">List is empty. Add nodes to begin.</div>
      </div>

      <div style="display:flex;gap:12px;margin-top:12px;align-items:flex-start">
        <div style="flex:1">
          <div class="log" id="log"></div>
          <div class="code" id="code">
            // LinkedList class (simplified)
            class Node { constructor(v){this.value=v;this.next=null} }
            class LinkedList {
              constructor(){ this.head=null; this.size=0 }
              addHead(v){...}
              addTail(v){...}
              insertAt(v,i){...}
              removeAt(i){...}
              find(v){...}
              reverse(){...}
            }
          </div>
        </div>
        <div style="width:280px">
          <div class="card" style="padding:12px">
            <div style="font-weight:700;margin-bottom:6px">List Info</div>
            <div class="small" id="infoCount">Size: 0</div>
            <div class="small" id="infoHead">Head: null</div>
            <div class="small" id="infoTail">Tail: null</div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="small">This demo implements a singly linked list in JavaScript and visualizes nodes and pointers.</div>
      <div class="small">Author: Interactive Demo</div>
    </footer>
  </div>

<script>
/*
  Simple singly linked list implementation + visualization.
  Controls:
   - Add Head/Tail/Insert At (index)
   - Delete Head/Tail/Delete At/Delete Value
   - Search, Traverse (instant), Step (animated traversal), Reverse
   - Random list, Clear
*/

(function(){
  // Linked List data structure
  class Node {
    constructor(value){
      this.value = String(value);
      this.next = null;
    }
  }

  class LinkedList {
    constructor(){
      this.head = null;
      this.size = 0;
    }

    addHead(value){
      const node = new Node(value);
      node.next = this.head;
      this.head = node;
      this.size++;
    }

    addTail(value){
      const node = new Node(value);
      if (!this.head){
        this.head = node;
      } else {
        let cur = this.head;
        while (cur.next) cur = cur.next;
        cur.next = node;
      }
      this.size++;
    }

    insertAt(value, index){
      if (index <= 0){
        this.addHead(value);
        return true;
      }
      if (index >= this.size){
        this.addTail(value);
        return true;
      }
      const node = new Node(value);
      let prev = this.head;
      for (let i=0;i<index-1;i++) prev = prev.next;
      node.next = prev.next;
      prev.next = node;
      this.size++;
      return true;
    }

    removeHead(){
      if (!this.head) return null;
      const val = this.head.value;
      this.head = this.head.next;
      this.size--;
      return val;
    }

    removeTail(){
      if (!this.head) return null;
      if (!this.head.next){
        const v = this.head.value;
        this.head = null;
        this.size--;
        return v;
      }
      let cur = this.head;
      while (cur.next && cur.next.next) cur = cur.next;
      const val = cur.next.value;
      cur.next = null;
      this.size--;
      return val;
    }

    removeAt(index){
      if (index < 0 || index >= this.size || !this.head) return null;
      if (index === 0) return this.removeHead();
      let prev = this.head;
      for (let i=0;i<index-1;i++) prev = prev.next;
      const val = prev.next.value;
      prev.next = prev.next.next;
      this.size--;
      return val;
    }

    removeValue(value){
      if (!this.head) return null;
      if (this.head.value === value){
        this.head = this.head.next; this.size--; return value;
      }
      let cur = this.head;
      while (cur.next && cur.next.value !== value) cur = cur.next;
      if (!cur.next) return null;
      cur.next = cur.next.next;
      this.size--;
      return value;
    }

    find(value){
      let idx = 0;
      let cur = this.head;
      while (cur){
        if (cur.value === value) return idx;
        cur = cur.next; idx++;
      }
      return -1;
    }

    toArray(){
      const arr = [];
      let cur = this.head;
      while (cur){ arr.push(cur.value); cur = cur.next; }
      return arr;
    }

    reverse(){
      let prev = null, cur = this.head;
      while (cur){
        const next = cur.next;
        cur.next = prev;
        prev = cur;
        cur = next;
      }
      this.head = prev;
    }
  }

  // UI & state
  const list = new LinkedList();
  const canvas = document.getElementById('canvas');
  const logEl = document.getElementById('log');
  const infoCount = document.getElementById('infoCount');
  const infoHead = document.getElementById('infoHead');
  const infoTail = document.getElementById('infoTail');
  const codeEl = document.getElementById('code');

  // helpers
  function log(msg){
    const time = new Date().toLocaleTimeString();
    logEl.innerHTML = `<div style="padding:6px 0;border-bottom:1px dashed rgba(255,255,255,0.02)"><b style="color:var(--accent)">[${time}]</b> ${escapeHtml(msg)}</div>` + logEl.innerHTML;
  }
  function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;'); }

  function render(){
    // Clear and re-render nodes with arrows
    canvas.innerHTML = '';
    const arr = list.toArray();
    if (arr.length === 0){
      const n = document.createElement('div');
      n.style.color = 'var(--muted)';
      n.style.padding = '6px 12px';
      n.style.borderRadius = '8px';
      n.style.background = 'rgba(255,255,255,0.01)';
      n.textContent = 'List is empty. Add nodes to begin.';
      canvas.appendChild(n);
    } else {
      arr.forEach((val, i) => {
        const nodeEl = document.createElement('div');
        nodeEl.className = 'node';
        if (i===0) nodeEl.classList.add('head');
        if (i===arr.length-1) nodeEl.classList.add('tail');

        const box = document.createElement('div');
        box.className = 'box';
        box.textContent = val;

        const ptr = document.createElement('div');
        ptr.className = 'ptr';
        ptr.textContent = 'next';

        nodeEl.appendChild(box);
        nodeEl.appendChild(ptr);
        canvas.appendChild(nodeEl);

        if (i < arr.length-1){
          const arrow = document.createElementNS('http://www.w3.org/2000/svg','svg');
          arrow.setAttribute('class','arrow');
          arrow.setAttribute('width','36');
          arrow.setAttribute('height','16');
          arrow.setAttribute('viewBox','0 0 36 16');
          arrow.innerHTML = '<path d="M0 8 H28" stroke-linecap="round"></path><path d="M22 4 L28 8 L22 12" stroke-linejoin="round" stroke-linecap="round"></path>';
          const cont = document.createElement('div');
          cont.className = 'arrow';
          cont.appendChild(arrow);
          canvas.appendChild(cont);
        } else {
          // tail arrow (null)
          const nullEl = document.createElement('div');
          nullEl.style.minWidth = '46px';
          nullEl.style.fontSize = '13px';
          nullEl.style.color = 'var(--muted)';
          nullEl.style.marginLeft = '6px';
          nullEl.textContent = 'null';
          canvas.appendChild(nullEl);
        }
      });
    }
    updateInfo();
  }

  function updateInfo(){
    infoCount.textContent = 'Size: ' + list.size;
    infoHead.textContent = 'Head: ' + (list.head ? list.head.value : 'null');
    // find tail
    let tail = null;
    let cur = list.head;
    while (cur){ tail = cur; cur = cur.next; }
    infoTail.textContent = 'Tail: ' + (tail ? tail.value : 'null');
    // update code sample with current list values
    codeEl.textContent = `// Current list values: [${list.toArray().map(v=>JSON.stringify(v)).join(', ')}]\n// You can perform operations like addHead, addTail, insertAt(index), removeAt(index), find(value), reverse()`;
  }

  // UI actions
  const valInput = document.getElementById('val');
  const idxInput = document.getElementById('idx');

  function readVal(){ return valInput.value.trim(); }
  function readIdx(){ const v = parseInt(idxInput.value); return Number.isNaN(v) ? null : v; }

  document.getElementById('addHead').addEventListener('click', ()=>{
    const v = readVal();
    if (v===''){ alert('Enter a value'); return; }
    list.addHead(v);
    log(`addHead(${v})`);
    render();
  });

  document.getElementById('addTail').addEventListener('click', ()=>{
    const v = readVal();
    if (v===''){ alert('Enter a value'); return; }
    list.addTail(v);
    log(`addTail(${v})`);
    render();
  });

  document.getElementById('insertAt').addEventListener('click', ()=>{
    const v = readVal();
    const i = readIdx();
    if (v===''){ alert('Enter a value'); return; }
    if (i===null){ alert('Enter a valid index'); return; }
    list.insertAt(v, i);
    log(`insertAt(${v}, ${i})`);
    render();
  });

  document.getElementById('delHead').addEventListener('click', ()=>{
    const v = list.removeHead();
    if (v === null) { log('removeHead(): list empty'); alert('List is empty'); }
    else { log(`removeHead() -> ${v}`); render(); }
  });

  document.getElementById('delTail').addEventListener('click', ()=>{
    const v = list.removeTail();
    if (v === null) { log('removeTail(): list empty'); alert('List is empty'); }
    else { log(`removeTail() -> ${v}`); render(); }
  });

  document.getElementById('delAt').addEventListener('click', ()=>{
    const i = readIdx();
    if (i===null){ alert('Enter a valid index'); return; }
    const v = list.removeAt(i);
    if (v === null) { log(`removeAt(${i}): invalid index`); alert('Invalid index'); }
    else { log(`removeAt(${i}) -> ${v}`); render(); }
  });

  document.getElementById('delVal').addEventListener('click', ()=>{
    const v = readVal();
    if (v===''){ alert('Enter a value'); return; }
    const r = list.removeValue(v);
    if (r === null) { log(`removeValue(${v}): not found`); alert('Value not found'); }
    else { log(`removeValue(${v})`); render(); }
  });

  document.getElementById('search').addEventListener('click', ()=>{
    const v = readVal();
    if (v===''){ alert('Enter a value'); return; }
    const idx = list.find(v);
    if (idx === -1){ log(`find(${v}) -> not found`); alert('Not found'); }
    else { log(`find(${v}) -> index ${idx}`); animateHighlight(idx); }
  });

  document.getElementById('traverse').addEventListener('click', ()=>{
    const arr = list.toArray();
    log('traverse() -> [' + arr.join(', ') + ']');
    if (arr.length === 0) alert('List is empty');
    else {
      // flash each node quickly
      const nodes = canvas.querySelectorAll('.node');
      nodes.forEach((n,i)=> {
        setTimeout(()=>{ n.classList.add('highlight'); setTimeout(()=> n.classList.remove('highlight'),350); }, i*180);
      });
    }
  });

  document.getElementById('step').addEventListener('click', ()=>{
    if (!list.head){ alert('List is empty'); return; }
    stepTraversal();
  });

  document.getElementById('reverse').addEventListener('click', ()=>{
    // animate reversal with stepping visuals
    if (!list.head) { alert('List empty'); return; }
    animateReverse();
  });

  document.getElementById('random').addEventListener('click', ()=>{
    generateRandom();
  });

  document.getElementById('clear').addEventListener('click', ()=>{
    if (!confirm('Clear the entire list?')) return;
    while (list.size) list.removeHead();
    log('clear()');
    render();
  });

  // visual helpers
  function animateHighlight(index){
    const nodes = Array.from(canvas.querySelectorAll('.node'));
    if (index < 0 || index >= nodes.length) return;
    // highlight step-by-step until target
    nodes.forEach(n=> n.classList.remove('found'));
    nodes.forEach((n,i)=>{
      setTimeout(()=>{
        n.classList.add('highlight');
        setTimeout(()=> n.classList.remove('highlight'), 520);
        if (i === index){
          setTimeout(()=> n.classList.add('found'), 520);
          setTimeout(()=> n.classList.remove('found'), 2000);
        }
      }, i*450);
    });
  }

  function stepTraversal(){
    const nodes = Array.from(canvas.querySelectorAll('.node'));
    if (nodes.length === 0) return;
    let i = 0;
    log('step traversal started');
    function step(){
      if (i>0) nodes[i-1].classList.remove('highlight');
      if (i >= nodes.length){ log('step traversal finished'); return; }
      nodes[i].classList.add('highlight');
      i++;
      setTimeout(step, 700);
    }
    step();
  }

  function animateReverse(){
    // We'll show nodes being highlighted and then perform reverse and re-render after steps.
    const nodes = Array.from(canvas.querySelectorAll('.node'));
    nodes.forEach(n=> n.classList.remove('highlight'));
    let i = 0;
    function walk(){
      if (i < nodes.length){
        nodes[i].classList.add('highlight');
        setTimeout(()=>{ nodes[i].classList.remove('highlight'); i++; walk(); }, 240);
      } else {
        // after walking, perform reverse with a small delay
        log('reverse()');
        list.reverse();
        // flash nodes to indicate new order
        setTimeout(()=> {
          render();
          const newNodes = Array.from(canvas.querySelectorAll('.node'));
          newNodes.forEach((n,j)=> {
            setTimeout(()=> { n.classList.add('highlight'); setTimeout(()=> n.classList.remove('highlight'), 400); }, j*120);
          });
        }, 260);
      }
    }
    walk();
  }

  function generateRandom(){
    const count = Math.floor(Math.random()*6)+3;
    while (list.size) list.removeHead();
    for (let i=0;i<count;i++){
      list.addTail(Math.floor(Math.random()*99)+1);
    }
    log('random list generated ('+count+' nodes)');
    render();
  }

  // initial render
  render();

  // Expose for debugging
  window._linkedList = list;
})();
</script>
</body>
</html>