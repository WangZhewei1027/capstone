{
  "topic": "K-Nearest Neighbors Interactive Visualization",
  "description": "FSM for an interactive KNN algorithm visualization that allows users to place points, adjust K value, and see classification results",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "CANVAS_CLICK": "placingPoint",
        "K_SLIDER_CHANGE": "updatingK",
        "TOGGLE_DISTANCES": "togglingDistances",
        "ADD_CLASS_A": "addingClassA",
        "ADD_CLASS_B": "addingClassB",
        "CLEAR_CANVAS": "clearing",
        "POINT_DRAG_START": "draggingPoint",
        "CANVAS_HOVER": "previewing"
      }
    },
    {
      "name": "placingPoint",
      "onEnter": "createNewPoint",
      "onExit": "noop",
      "on": {
        "POINT_PLACED": "findingNeighbors"
      }
    },
    {
      "name": "findingNeighbors",
      "onEnter": "calculateDistances",
      "onExit": "noop",
      "on": {
        "NEIGHBORS_FOUND": "animatingDistances"
      }
    },
    {
      "name": "animatingDistances",
      "onEnter": "showExpandingCircles",
      "onExit": "noop",
      "on": {
        "DISTANCE_ANIMATION_COMPLETE": "highlightingNeighbors"
      }
    },
    {
      "name": "highlightingNeighbors",
      "onEnter": "pulseNearestNeighbors",
      "onExit": "noop",
      "on": {
        "HIGHLIGHT_COMPLETE": "voting"
      }
    },
    {
      "name": "voting",
      "onEnter": "animateVoteCount",
      "onExit": "noop",
      "on": {
        "VOTE_COMPLETE": "classifying"
      }
    },
    {
      "name": "classifying",
      "onEnter": "animateClassTransition",
      "onExit": "updateVoteDisplay",
      "on": {
        "CLASSIFICATION_COMPLETE": "idle"
      }
    },
    {
      "name": "updatingK",
      "onEnter": "updateKValue",
      "onExit": "noop",
      "on": {
        "K_UPDATED": "recalculating"
      }
    },
    {
      "name": "recalculating",
      "onEnter": "recalculateAllPoints",
      "onExit": "noop",
      "on": {
        "RECALCULATION_COMPLETE": "idle"
      }
    },
    {
      "name": "togglingDistances",
      "onEnter": "toggleDistanceVisibility",
      "onExit": "noop",
      "on": {
        "TOGGLE_COMPLETE": "idle"
      }
    },
    {
      "name": "addingClassA",
      "onEnter": "addClassAPoint",
      "onExit": "noop",
      "on": {
        "POINT_ADDED": "recalculating"
      }
    },
    {
      "name": "addingClassB",
      "onEnter": "addClassBPoint",
      "onExit": "noop",
      "on": {
        "POINT_ADDED": "recalculating"
      }
    },
    {
      "name": "clearing",
      "onEnter": "clearAllPoints",
      "onExit": "resetVoteDisplay",
      "on": {
        "CLEAR_COMPLETE": "idle"
      }
    },
    {
      "name": "draggingPoint",
      "onEnter": "startDrag",
      "onExit": "noop",
      "on": {
        "POINT_DRAG": "draggingPoint",
        "POINT_DRAG_END": "recalculating"
      }
    },
    {
      "name": "previewing",
      "onEnter": "showGhostPreview",
      "onExit": "hideGhostPreview",
      "on": {
        "CANVAS_HOVER": "previewing",
        "CANVAS_LEAVE": "idle",
        "CANVAS_CLICK": "placingPoint"
      }
    }
  ],
  "events": [
    "CANVAS_CLICK",
    "K_SLIDER_CHANGE",
    "TOGGLE_DISTANCES",
    "ADD_CLASS_A",
    "ADD_CLASS_B",
    "CLEAR_CANVAS",
    "POINT_DRAG_START",
    "POINT_DRAG",
    "POINT_DRAG_END",
    "CANVAS_HOVER",
    "CANVAS_LEAVE",
    "POINT_PLACED",
    "NEIGHBORS_FOUND",
    "DISTANCE_ANIMATION_COMPLETE",
    "HIGHLIGHT_COMPLETE",
    "VOTE_COMPLETE",
    "CLASSIFICATION_COMPLETE",
    "K_UPDATED",
    "RECALCULATION_COMPLETE",
    "TOGGLE_COMPLETE",
    "POINT_ADDED",
    "CLEAR_COMPLETE"
  ],
  "notes": "The FSM manages the complete interaction flow including point placement, K-value adjustments, animations for distance visualization and neighbor highlighting, voting visualization, and real-time classification updates. The preview state provides immediate feedback during hover interactions."
}