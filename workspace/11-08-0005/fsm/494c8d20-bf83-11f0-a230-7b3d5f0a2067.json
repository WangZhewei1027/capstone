{
  "topic": "Quick Sort Interactive Visualization",
  "description": "FSM for an interactive Quick Sort algorithm visualization with manual/automatic pivot selection, step controls, and animation states",
  "states": [
    {
      "name": "idle",
      "onEnter": "resetVisualization",
      "onExit": "noop",
      "on": {
        "GENERATE_ARRAY": "idle",
        "START": "selectingPivot",
        "TOGGLE_MODE": "idle",
        "ADJUST_SPEED": "idle"
      }
    },
    {
      "name": "selectingPivot",
      "onEnter": "highlightCurrentSubarray",
      "onExit": "noop",
      "on": {
        "PAUSE": "paused",
        "RESET": "idle",
        "PIVOT_SELECTED": "partitioning",
        "AUTO_SELECT_PIVOT": "partitioning",
        "ADJUST_SPEED": "selectingPivot"
      }
    },
    {
      "name": "partitioning",
      "onEnter": "highlightPivot",
      "onExit": "noop",
      "on": {
        "PAUSE": "paused",
        "RESET": "idle",
        "COMPARE_ELEMENTS": "comparing",
        "PARTITION_COMPLETE": "checkingSubarrays",
        "ADJUST_SPEED": "partitioning"
      }
    },
    {
      "name": "comparing",
      "onEnter": "highlightComparedElements",
      "onExit": "updateCounters",
      "on": {
        "PAUSE": "paused",
        "RESET": "idle",
        "SWAP_NEEDED": "swapping",
        "NO_SWAP_NEEDED": "partitioning",
        "ADJUST_SPEED": "comparing"
      }
    },
    {
      "name": "swapping",
      "onEnter": "animateSwap",
      "onExit": "updateSwapCounter",
      "on": {
        "PAUSE": "paused",
        "RESET": "idle",
        "SWAP_COMPLETE": "partitioning",
        "ADJUST_SPEED": "swapping"
      }
    },
    {
      "name": "checkingSubarrays",
      "onEnter": "updateCallStack",
      "onExit": "noop",
      "on": {
        "PAUSE": "paused",
        "RESET": "idle",
        "RECURSE_LEFT": "selectingPivot",
        "RECURSE_RIGHT": "selectingPivot",
        "SUBARRAY_SORTED": "markSorted",
        "ALL_SORTED": "done",
        "ADJUST_SPEED": "checkingSubarrays"
      }
    },
    {
      "name": "markSorted",
      "onEnter": "colorSortedElements",
      "onExit": "updateProgress",
      "on": {
        "PAUSE": "paused",
        "RESET": "idle",
        "CONTINUE_SORTING": "checkingSubarrays",
        "ADJUST_SPEED": "markSorted"
      }
    },
    {
      "name": "paused",
      "onEnter": "showPauseIndicator",
      "onExit": "hidePauseIndicator",
      "on": {
        "RESUME": "resumePreviousState",
        "STEP_FORWARD": "executeNextStep",
        "RESET": "idle",
        "TOGGLE_MODE": "paused",
        "ADJUST_SPEED": "paused"
      }
    },
    {
      "name": "done",
      "onEnter": "showCompletionAnimation",
      "onExit": "noop",
      "on": {
        "RESET": "idle",
        "GENERATE_ARRAY": "idle"
      }
    }
  ],
  "events": [
    "GENERATE_ARRAY",
    "START",
    "PAUSE",
    "RESUME",
    "STEP_FORWARD",
    "RESET",
    "TOGGLE_MODE",
    "ADJUST_SPEED",
    "PIVOT_SELECTED",
    "AUTO_SELECT_PIVOT",
    "COMPARE_ELEMENTS",
    "SWAP_NEEDED",
    "NO_SWAP_NEEDED",
    "SWAP_COMPLETE",
    "PARTITION_COMPLETE",
    "RECURSE_LEFT",
    "RECURSE_RIGHT",
    "SUBARRAY_SORTED",
    "ALL_SORTED",
    "CONTINUE_SORTING"
  ],
  "notes": "The FSM handles both automatic and manual pivot selection modes. In manual mode, the system waits for PIVOT_SELECTED event in selectingPivot state. The paused state maintains context to resume from the interrupted state. Animation timing is controlled by the speed slider which triggers ADJUST_SPEED events."
}