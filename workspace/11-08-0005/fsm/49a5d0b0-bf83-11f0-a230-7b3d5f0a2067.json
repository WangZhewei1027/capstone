{
  "topic": "Red-Black Tree Interactive Visualizer",
  "description": "FSM for an interactive Red-Black Tree visualization tool that allows users to insert nodes, observe balancing operations, and learn about RB-Tree properties",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "INSERT_NODE": "inserting",
        "TOGGLE_STEP_MODE": "idle",
        "CLEAR_TREE": "clearing",
        "GENERATE_RANDOM": "generating",
        "SELECT_PRESET": "loadingPreset",
        "CLICK_NODE": "showingNodeInfo",
        "HOVER_NODE": "showingBlackHeight"
      }
    },
    {
      "name": "inserting",
      "onEnter": "startInsertAnimation",
      "onExit": "noop",
      "on": {
        "NEXT_STEP": "checkingViolations",
        "AUTO_ADVANCE": "checkingViolations",
        "CANCEL": "idle"
      }
    },
    {
      "name": "checkingViolations",
      "onEnter": "highlightViolations",
      "onExit": "clearHighlights",
      "on": {
        "NO_VIOLATIONS": "idle",
        "COLOR_VIOLATION": "recoloring",
        "ROTATION_NEEDED": "rotating",
        "NEXT_STEP": "applyingFix",
        "AUTO_ADVANCE": "applyingFix"
      }
    },
    {
      "name": "recoloring",
      "onEnter": "animateColorChange",
      "onExit": "updatePropertyPanel",
      "on": {
        "ANIMATION_COMPLETE": "checkingViolations",
        "NEXT_STEP": "checkingViolations",
        "CANCEL": "idle"
      }
    },
    {
      "name": "rotating",
      "onEnter": "animateRotation",
      "onExit": "updateTreeStructure",
      "on": {
        "ROTATION_COMPLETE": "checkingViolations",
        "NEXT_STEP": "checkingViolations",
        "CANCEL": "idle"
      }
    },
    {
      "name": "applyingFix",
      "onEnter": "determineFixType",
      "onExit": "noop",
      "on": {
        "APPLY_RECOLOR": "recoloring",
        "APPLY_ROTATION": "rotating",
        "FIX_COMPLETE": "idle"
      }
    },
    {
      "name": "clearing",
      "onEnter": "animateClear",
      "onExit": "resetTree",
      "on": {
        "CLEAR_COMPLETE": "idle"
      }
    },
    {
      "name": "generating",
      "onEnter": "generateRandomTree",
      "onExit": "validateTree",
      "on": {
        "GENERATION_COMPLETE": "idle"
      }
    },
    {
      "name": "loadingPreset",
      "onEnter": "loadPresetScenario",
      "onExit": "highlightRelevantNodes",
      "on": {
        "PRESET_LOADED": "demonstrating"
      }
    },
    {
      "name": "demonstrating",
      "onEnter": "startDemonstration",
      "onExit": "clearDemoHighlights",
      "on": {
        "NEXT_STEP": "demonstrating",
        "DEMO_COMPLETE": "idle",
        "CANCEL": "idle"
      }
    },
    {
      "name": "showingNodeInfo",
      "onEnter": "displayNodeProperties",
      "onExit": "hideNodeProperties",
      "on": {
        "CLICK_OUTSIDE": "idle",
        "CLICK_NODE": "showingNodeInfo",
        "INSERT_NODE": "inserting"
      }
    },
    {
      "name": "showingBlackHeight",
      "onEnter": "highlightPath",
      "onExit": "clearPathHighlight",
      "on": {
        "HOVER_END": "idle",
        "HOVER_NODE": "showingBlackHeight",
        "CLICK_NODE": "showingNodeInfo"
      }
    }
  ],
  "events": [
    "INSERT_NODE",
    "TOGGLE_STEP_MODE",
    "CLEAR_TREE",
    "GENERATE_RANDOM",
    "SELECT_PRESET",
    "CLICK_NODE",
    "HOVER_NODE",
    "HOVER_END",
    "NEXT_STEP",
    "AUTO_ADVANCE",
    "CANCEL",
    "NO_VIOLATIONS",
    "COLOR_VIOLATION",
    "ROTATION_NEEDED",
    "ANIMATION_COMPLETE",
    "ROTATION_COMPLETE",
    "APPLY_RECOLOR",
    "APPLY_ROTATION",
    "FIX_COMPLETE",
    "CLEAR_COMPLETE",
    "GENERATION_COMPLETE",
    "PRESET_LOADED",
    "DEMO_COMPLETE",
    "CLICK_OUTSIDE"
  ],
  "notes": "The FSM manages the complex state transitions during RB-Tree operations. Key states handle insertion, violation checking, and fixing through recoloring or rotation. The step-by-step mode allows manual progression through states, while auto mode advances automatically. Visual feedback states ensure users can see black-height calculations and node properties on demand."
}