{
  "topic": "Recursive Tree Drawing Application",
  "description": "Interactive visualization of recursive tree drawing with step-by-step execution and call stack display",
  "states": [
    {
      "name": "idle",
      "onEnter": "clearCanvas",
      "onExit": "noop",
      "on": {
        "MOUSE_DOWN": "drawing_preview",
        "CHANGE_MODE": "idle",
        "ADJUST_DEPTH": "idle"
      }
    },
    {
      "name": "drawing_preview",
      "onEnter": "startDrawing",
      "onExit": "noop",
      "on": {
        "MOUSE_MOVE": "drawing_preview",
        "MOUSE_UP": "check_length"
      }
    },
    {
      "name": "check_length",
      "onEnter": "calculateLength",
      "onExit": "noop",
      "on": {
        "LENGTH_VALID": "setup_execution",
        "LENGTH_INVALID": "idle"
      }
    },
    {
      "name": "setup_execution",
      "onEnter": "initializeExecution",
      "onExit": "noop",
      "on": {
        "AUTO_MODE": "auto_drawing",
        "STEP_MODE": "step_queue_setup"
      }
    },
    {
      "name": "auto_drawing",
      "onEnter": "startAutoDrawing",
      "onExit": "noop",
      "on": {
        "DRAW_BRANCH": "branch_processing",
        "COMPLETE": "idle"
      }
    },
    {
      "name": "step_queue_setup",
      "onEnter": "queueAllBranches",
      "onExit": "noop",
      "on": {
        "QUEUE_READY": "step_waiting"
      }
    },
    {
      "name": "step_waiting",
      "onEnter": "enableStepButton",
      "onExit": "noop",
      "on": {
        "STEP_CLICK": "step_drawing",
        "CHANGE_MODE": "idle",
        "MOUSE_DOWN": "drawing_preview"
      }
    },
    {
      "name": "step_drawing",
      "onEnter": "executeStep",
      "onExit": "noop",
      "on": {
        "STEP_COMPLETE": "check_queue"
      }
    },
    {
      "name": "check_queue",
      "onEnter": "checkStepQueue",
      "onExit": "noop",
      "on": {
        "QUEUE_NOT_EMPTY": "step_waiting",
        "QUEUE_EMPTY": "step_complete"
      }
    },
    {
      "name": "step_complete",
      "onEnter": "disableStepButton",
      "onExit": "noop",
      "on": {
        "MOUSE_DOWN": "drawing_preview",
        "CHANGE_MODE": "idle"
      }
    },
    {
      "name": "branch_processing",
      "onEnter": "processBranch",
      "onExit": "updateCallStack",
      "on": {
        "BASE_CASE": "branch_complete",
        "RECURSIVE_CALL": "branch_drawing"
      }
    },
    {
      "name": "branch_drawing",
      "onEnter": "drawBranchLine",
      "onExit": "incrementBranchCount",
      "on": {
        "BRANCH_DRAWN": "branch_recursion"
      }
    },
    {
      "name": "branch_recursion",
      "onEnter": "highlightRecursiveCalls",
      "onExit": "noop",
      "on": {
        "RECURSE": "branch_processing",
        "RECURSION_COMPLETE": "branch_complete"
      }
    },
    {
      "name": "branch_complete",
      "onEnter": "removeStackFrame",
      "onExit": "noop",
      "on": {
        "RETURN": "auto_drawing",
        "ALL_COMPLETE": "idle"
      }
    }
  ],
  "events": [
    "MOUSE_DOWN",
    "MOUSE_MOVE",
    "MOUSE_UP",
    "LENGTH_VALID",
    "LENGTH_INVALID",
    "AUTO_MODE",
    "STEP_MODE",
    "CHANGE_MODE",
    "ADJUST_DEPTH",
    "STEP_CLICK",
    "DRAW_BRANCH",
    "BASE_CASE",
    "RECURSIVE_CALL",
    "BRANCH_DRAWN",
    "RECURSE",
    "RECURSION_COMPLETE",
    "RETURN",
    "COMPLETE",
    "ALL_COMPLETE",
    "QUEUE_READY",
    "STEP_COMPLETE",
    "QUEUE_NOT_EMPTY",
    "QUEUE_EMPTY"
  ],
  "notes": "The FSM models the interactive recursive tree drawing with two execution modes (auto and step-by-step). It handles mouse interactions for drawing, branch processing with visual feedback, call stack management, and code highlighting during execution."
}