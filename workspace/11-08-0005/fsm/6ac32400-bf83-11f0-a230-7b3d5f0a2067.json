{
  "topic": "K-Nearest Neighbors Interactive Explorer",
  "description": "FSM for an interactive KNN classifier visualization that allows users to add training points, query points, and visualize the classification process",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "ADD_TRAINING_POINT": "addingPoint",
        "ADD_QUERY_POINT": "classifying",
        "TOGGLE_DISTANCE": "idle",
        "CLEAR_DATA": "clearing",
        "ADD_SAMPLE_DATA": "addingSample",
        "CHANGE_K": "idle",
        "SELECT_CLASS": "idle",
        "MOUSE_MOVE": "idle"
      }
    },
    {
      "name": "addingPoint",
      "onEnter": "addTrainingPoint",
      "onExit": "updateStats",
      "on": {
        "DRAW_COMPLETE": "idle"
      }
    },
    {
      "name": "classifying",
      "onEnter": "calculateNeighbors",
      "onExit": "noop",
      "on": {
        "CLASSIFICATION_COMPLETE": "animating"
      }
    },
    {
      "name": "animating",
      "onEnter": "startAnimation",
      "onExit": "noop",
      "on": {
        "ANIMATION_FRAME": "animating",
        "ANIMATION_COMPLETE": "showingResult"
      }
    },
    {
      "name": "showingResult",
      "onEnter": "displayPrediction",
      "onExit": "noop",
      "on": {
        "ADD_TRAINING_POINT": "addingPoint",
        "ADD_QUERY_POINT": "classifying",
        "TOGGLE_DISTANCE": "showingResult",
        "CLEAR_DATA": "clearing",
        "ADD_SAMPLE_DATA": "addingSample",
        "CHANGE_K": "recalculating",
        "SELECT_CLASS": "showingResult",
        "MOUSE_MOVE": "showingResult"
      }
    },
    {
      "name": "recalculating",
      "onEnter": "recalculateClassification",
      "onExit": "noop",
      "on": {
        "CLASSIFICATION_COMPLETE": "showingResult"
      }
    },
    {
      "name": "clearing",
      "onEnter": "clearAllData",
      "onExit": "updateStats",
      "on": {
        "CLEAR_COMPLETE": "idle"
      }
    },
    {
      "name": "addingSample",
      "onEnter": "generateSampleData",
      "onExit": "updateStats",
      "on": {
        "SAMPLE_ADDED": "idle"
      }
    }
  ],
  "events": [
    "ADD_TRAINING_POINT",
    "ADD_QUERY_POINT",
    "TOGGLE_DISTANCE",
    "CLEAR_DATA",
    "ADD_SAMPLE_DATA",
    "CHANGE_K",
    "SELECT_CLASS",
    "MOUSE_MOVE",
    "DRAW_COMPLETE",
    "CLASSIFICATION_COMPLETE",
    "ANIMATION_FRAME",
    "ANIMATION_COMPLETE",
    "CLEAR_COMPLETE",
    "SAMPLE_ADDED"
  ],
  "notes": "The FSM manages the KNN visualization states including adding training points, classifying query points with animation, showing/hiding distance circles, and handling user interactions. The animation state loops until completion before transitioning to showingResult."
}