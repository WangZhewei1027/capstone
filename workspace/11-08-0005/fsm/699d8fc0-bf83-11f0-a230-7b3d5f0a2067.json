{
  "topic": "Interactive Linear Regression Visualization",
  "description": "FSM for an interactive linear regression demo where users can add points, adjust parameters, and auto-fit lines",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "CLICK_CANVAS": "addingPoint",
        "ADJUST_SLOPE": "adjustingSlope",
        "ADJUST_INTERCEPT": "adjustingIntercept",
        "CLICK_FIT": "fitting",
        "CLICK_CLEAR": "clearing",
        "TOGGLE_ERRORS": "togglingErrors"
      }
    },
    {
      "name": "addingPoint",
      "onEnter": "addPoint",
      "onExit": "updateStats",
      "on": {
        "POINT_ADDED": "idle"
      }
    },
    {
      "name": "adjustingSlope",
      "onEnter": "updateSlope",
      "onExit": "updateStats",
      "on": {
        "SLOPE_UPDATED": "idle"
      }
    },
    {
      "name": "adjustingIntercept",
      "onEnter": "updateIntercept",
      "onExit": "updateStats",
      "on": {
        "INTERCEPT_UPDATED": "idle"
      }
    },
    {
      "name": "fitting",
      "onEnter": "calculateBestFit",
      "onExit": "noop",
      "on": {
        "INSUFFICIENT_POINTS": "idle",
        "START_ANIMATION": "animating"
      }
    },
    {
      "name": "animating",
      "onEnter": "animateValues",
      "onExit": "updateStats",
      "on": {
        "ANIMATION_COMPLETE": "idle",
        "ANIMATION_FRAME": "animating"
      }
    },
    {
      "name": "clearing",
      "onEnter": "clearAllPoints",
      "onExit": "updateStats",
      "on": {
        "POINTS_CLEARED": "idle"
      }
    },
    {
      "name": "togglingErrors",
      "onEnter": "toggleErrorDisplay",
      "onExit": "noop",
      "on": {
        "ERRORS_TOGGLED": "idle"
      }
    }
  ],
  "events": [
    "CLICK_CANVAS",
    "POINT_ADDED",
    "ADJUST_SLOPE",
    "SLOPE_UPDATED",
    "ADJUST_INTERCEPT",
    "INTERCEPT_UPDATED",
    "CLICK_FIT",
    "INSUFFICIENT_POINTS",
    "START_ANIMATION",
    "ANIMATION_FRAME",
    "ANIMATION_COMPLETE",
    "CLICK_CLEAR",
    "POINTS_CLEARED",
    "TOGGLE_ERRORS",
    "ERRORS_TOGGLED"
  ],
  "notes": "The application continuously renders via requestAnimationFrame in all states. The fitting state transitions to animating when there are sufficient points (>=2). The animating state loops on itself with ANIMATION_FRAME events until the animation completes."
}