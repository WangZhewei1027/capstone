<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sliding Window Algorithm Explorer</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            min-height: 100vh;
            padding: 24px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            padding: 24px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 2px solid #e9ecef;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            color: #1a202c;
        }

        .problem-selector {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .problem-selector label {
            font-weight: 500;
            color: #4a5568;
        }

        select {
            padding: 8px 16px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        select:hover {
            border-color: #4299e1;
        }

        .visualization-area {
            position: relative;
            height: 400px;
            background: #f8fafc;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 24px;
            overflow-x: auto;
        }

        .array-container {
            position: relative;
            display: flex;
            gap: 8px;
            justify-content: center;
            align-items: center;
            height: 100%;
            min-width: fit-content;
        }

        .array-element {
            width: 60px;
            height: 60px;
            background: #e2e8f0;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            cursor: default;
        }

        .array-element.in-window {
            background: #bee3f8;
            border-color: #4299e1;
            transform: translateY(-4px);
        }

        .array-element.in-window::after {
            content: '';
            position: absolute;
            inset: -4px;
            background: radial-gradient(circle, rgba(66, 153, 225, 0.3) 0%, transparent 70%);
            border-radius: 8px;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .sliding-window {
            position: absolute;
            background: rgba(66, 153, 225, 0.2);
            border: 3px solid #4299e1;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: move;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sliding-window:hover {
            background: rgba(66, 153, 225, 0.3);
        }

        .window-handle {
            position: absolute;
            width: 16px;
            height: 100%;
            background: #4299e1;
            cursor: ew-resize;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .window-handle.left {
            left: -8px;
            border-radius: 8px 0 0 8px;
        }

        .window-handle.right {
            right: -8px;
            border-radius: 0 8px 8px 0;
        }

        .sliding-window:hover .window-handle {
            opacity: 0.6;
        }

        .window-info {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3748;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 24px;
            margin-bottom: 24px;
        }

        .button-group {
            display: flex;
            gap: 16px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .speed-control label {
            font-size: 14px;
            font-weight: 500;
            color: #4a5568;
        }

        input[type="range"] {
            width: 120px;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #4299e1;
            border-radius: 50%;
            cursor: pointer;
        }

        .info-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .info-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
        }

        .info-card h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #2d3748;
        }

        .pseudocode {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: #4a5568;
        }

        .pseudocode .active {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }

        .stats {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .stat-label {
            color: #718096;
            font-size: 14px;
        }

        .stat-value {
            font-weight: 600;
            font-size: 16px;
            color: #2d3748;
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }

            .info-panel {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .button-group {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Sliding Window Algorithm Explorer</h1>
            <div class="problem-selector">
                <label for="problem">Problem:</label>
                <select id="problem">
                    <option value="maxSum">Maximum Sum Subarray (Size K)</option>
                    <option value="minWindow">Minimum Window Substring</option>
                    <option value="longestSubstring">Longest Substring Without Repeating</option>
                </select>
            </div>
        </header>

        <div class="visualization-area">
            <div class="array-container" id="arrayContainer">
                <!-- Array elements will be generated dynamically -->
            </div>
            <div class="sliding-window" id="slidingWindow" style="display: none;">
                <div class="window-handle left"></div>
                <div class="window-handle right"></div>
                <div class="window-info" id="windowInfo">Sum: 0</div>
            </div>
        </div>

        <div class="controls">
            <div class="button-group">
                <button class="btn-primary" id="playBtn">
                    <span>▶</span> Play
                </button>
                <button class="btn-secondary" id="stepBtn">
                    <span>→</span> Step
                </button>
                <button class="btn-secondary" id="resetBtn">
                    <span>↺</span> Reset
                </button>
            </div>
            <div class="speed-control">
                <label for="speed">Speed:</label>
                <input type="range" id="speed" min="1" max="10" value="5">
            </div>
        </div>

        <div class="info-panel">
            <div class="info-card">
                <h3>Algorithm Pseudocode</h3>
                <div class="pseudocode" id="pseudocode">
                    <div>1. Initialize window at start</div>
                    <div>2. Calculate initial window sum</div>
                    <div>3. Slide window one position</div>
                    <div>4. Update sum: subtract left, add right</div>
                    <div>5. Track maximum sum</div>
                    <div>6. Repeat until end</div>
                </div>
            </div>
            <div class="info-card">
                <h3>Statistics</h3>
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-label">Window Size:</span>
                        <span class="stat-value" id="windowSize">3</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Current Sum:</span>
                        <span class="stat-value" id="currentSum">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Maximum Sum:</span>
                        <span class="stat-value" id="maxSum">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Operations:</span>
                        <span class="stat-value" id="operations">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class SlidingWindowVisualizer {
            constructor() {
                this.array = [2, 1, 5, 1, 3, 2, 4, 3, 1, 2];
                this.windowSize = 3;
                this.windowStart = 0;
                this.windowEnd = 2;
                this.maxSum = 0;
                this.currentSum = 0;
                this.operations = 0;
                this.isPlaying = false;
                this.currentStep = 0;
                this.animationSpeed = 5;
                
                this.initializeElements();
                this.setupEventListeners();
                this.render();
                this.calculateInitialSum();
            }

            initializeElements() {
                this.arrayContainer = document.getElementById('arrayContainer');
                this.slidingWindow = document.getElementById('slidingWindow');
                this.windowInfo = document.getElementById('windowInfo');
                this.playBtn = document.getElementById('playBtn');
                this.stepBtn = document.getElementById('stepBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.speedSlider = document.getElementById('speed');
                this.pseudocode = document.getElementById('pseudocode');
                
                // Stats elements
                this.windowSizeEl = document.getElementById('windowSize');
                this.currentSumEl = document.getElementById('currentSum');
                this.maxSumEl = document.getElementById('maxSum');
                this.operationsEl = document.getElementById('operations');
            }

            setupEventListeners() {
                this.playBtn.addEventListener('click', () => this.togglePlay());
                this.stepBtn.addEventListener('click', () => this.step());
                this.resetBtn.addEventListener('click', () => this.reset());
                this.speedSlider.addEventListener('input', (e) => {
                    this.animationSpeed = parseInt(e.target.value);
                });

                // Window dragging
                let isDragging = false;
                let dragStartX = 0;
                let windowStartX = 0;

                this.slidingWindow.addEventListener('mousedown', (e) => {
                    if (e.target.classList.contains('window-handle')) {
                        // Handle resizing - to be implemented
                        return;
                    }
                    isDragging = true;
                    dragStartX = e.clientX;
                    windowStartX = this.windowStart;
                    this.slidingWindow.style.cursor = 'grabbing';
                });

                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    
                    const deltaX = e.clientX - dragStartX;
                    const elementWidth = 68; // 60px + 8px gap
                    const newPosition = Math.round(deltaX / elementWidth);
                    const newStart = Math.max(0, Math.min(this.array.length - this.windowSize, windowStartX + newPosition));
                    
                    if (newStart !== this.windowStart) {
                        this.windowStart = newStart;
                        this.windowEnd = newStart + this.windowSize - 1;
                        this.updateWindow();
                        this.calculateCurrentSum();
                    }
                });

                document.addEventListener('mouseup', () => {
                    isDragging = false;
                    this.slidingWindow.style.cursor = 'move';
                });

                // Problem selector
                document.getElementById('problem').addEventListener('change', (e) => {
                    this.reset();
                    this.loadProblem(e.target.value);
                });
            }

            loadProblem(problemType) {
                switch (problemType) {
                    case 'maxSum':
                        this.array = [2, 1, 5, 1, 3, 2, 4, 3, 1, 2];
                        this.windowSize = 3;
                        break;
                    case 'minWindow':
                        this.array = [1, 2, 3, 2, 1, 4, 2, 1, 3];
                        this.windowSize = 2;
                        break;
                    case 'longestSubstring':
                        this.array = [1, 2, 3, 1, 2, 4, 5, 3, 2];
                        this.windowSize = 4;
                        break;
                }
                this.render();
                this.calculateInitialSum();
            }

            render() {
                // Clear and render array elements
                this.arrayContainer.innerHTML = '';
                this.array.forEach((value, index) => {
                    const element = document.createElement('div');
                    element.className = 'array-element';
                    element.textContent = value;
                    element.dataset.index = index;
                    this.arrayContainer.appendChild(element);
                });

                // Show sliding window
                this.slidingWindow.style.display = 'block';
                this.updateWindow();
            }

            updateWindow() {
                const elements = document.querySelectorAll('.array-element');
                const elementWidth = 68; // 60px + 8px gap
                
                // Update window position and size
                this.slidingWindow.style.left = `${this.windowStart * elementWidth - 4}px`;
                this.slidingWindow.style.width = `${this.windowSize * elementWidth - 8}px`;
                
                // Update element highlighting
                elements.forEach((el, index) => {
                    if (index >= this.windowStart && index <= this.windowEnd) {
                        el.classList.add('in-window');
                    } else {
                        el.classList.remove('in-window');
                    }
                });

                // Update stats
                this.updateStats();
            }

            calculateInitialSum() {
                this.currentSum = 0;
                for (let i = this.windowStart; i <= this.windowEnd; i++) {
                    this.currentSum += this.array[i];
                }
                this.maxSum = this.currentSum;
                this.updateStats();
            }

            calculateCurrentSum() {
                this.currentSum = 0;
                for (let i = this.windowStart; i <= this.windowEnd; i++) {
                    this.currentSum += this.array[i];
                }
                if (this.currentSum > this.maxSum) {
                    this.maxSum = this.currentSum;
                }
                this.operations++;
                this.updateStats();
            }

            updateStats() {
                this.windowSizeEl.textContent = this.windowSize;
                this.currentSumEl.textContent = this.currentSum;
                this.maxSumEl.textContent = this.maxSum;
                this.operationsEl.textContent = this.operations;
                this.windowInfo.textContent = `Sum: ${this.currentSum}`;
            }

            highlightPseudocodeLine(line) {
                const lines = this.pseudocode.querySelectorAll('div');
                lines.forEach((l, index) => {
                    l.classList.toggle('active', index === line);
                });
            }

            step() {
                if (this.windowEnd >= this.array.length - 1) return;

                this.highlightPseudocodeLine(3); // Slide window
                
                setTimeout(() => {
                    this.windowStart++;
                    this.windowEnd++;
                    this.updateWindow();
                    
                    this.highlightPseudocodeLine(4); // Update sum
                    setTimeout(() => {
                        this.calculateCurrentSum();
                        this.highlightPseudocodeLine(5); // Track maximum
                    }, 300);
                }, 300);
            }

            async togglePlay() {
                this.isPlaying = !this.isPlaying;
                this.playBtn.innerHTML = this.isPlaying ? '<span>⏸</span> Pause' : '<span>▶</span> Play';
                
                if (this.isPlaying) {
                    await this.play();
                }
            }

            async play() {
                while (this.isPlaying && this.windowEnd < this.array.length - 1) {
                    this.step();
                    await new Promise(resolve => setTimeout(resolve, 1000 / this.animationSpeed));
                }
                
                if (this.windowEnd >= this.array.length - 1) {
                    this.isPlaying = false;
                    this.playBtn.innerHTML = '<span>▶</span> Play';
                }
            }

            reset() {
                this.windowStart = 0;
                this.windowEnd = this.windowSize - 1;
                this.currentSum = 0;
                this.maxSum = 0;
                this.operations = 0;
                this.isPlaying = false;
                this.playBtn.innerHTML = '<span>▶</span> Play';
                this.updateWindow();
                this.calculateInitialSum();
                this.highlightPseudocodeLine(-1);
            }
        }

        // Initialize the visualizer when the page loads
        window.addEventListener('DOMContentLoaded', () => {
            new SlidingWindowVisualizer();
        });
    </script>
</body>
</html>