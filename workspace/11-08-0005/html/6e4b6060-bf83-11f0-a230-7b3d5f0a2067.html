<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Longest Common Subsequence Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            padding: 24px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 32px;
            margin-bottom: 12px;
            color: #1a202c;
        }
        
        .explanation {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 24px;
            color: #4a5568;
        }
        
        .input-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 24px;
        }
        
        .input-row {
            display: flex;
            gap: 24px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        
        .input-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2d3748;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #4299e1;
        }
        
        .controls {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        button {
            padding: 10px 20px;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background: #3182ce;
        }
        
        button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }
        
        .toggle-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .toggle {
            width: 48px;
            height: 24px;
            background: #cbd5e0;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .toggle.active {
            background: #48bb78;
        }
        
        .toggle-slider {
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .toggle.active .toggle-slider {
            transform: translateX(24px);
        }
        
        .speed-control {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-left: auto;
        }
        
        input[type="range"] {
            width: 120px;
        }
        
        .visualization-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 24px;
            overflow-x: auto;
        }
        
        .table-container {
            display: flex;
            gap: 24px;
            align-items: flex-start;
        }
        
        .dp-table {
            border-collapse: collapse;
        }
        
        .dp-table td, .dp-table th {
            width: 50px;
            height: 50px;
            text-align: center;
            border: 1px solid #e2e8f0;
            position: relative;
            transition: all 0.3s;
        }
        
        .dp-table th {
            background: #f7fafc;
            font-weight: 600;
            color: #4a5568;
        }
        
        .dp-table td {
            background: white;
            cursor: pointer;
            font-weight: 500;
            font-size: 18px;
        }
        
        .dp-table td:hover {
            background: #f0f4f8;
        }
        
        .dp-table td.current {
            background: #4299e1;
            color: white;
            animation: pulse 0.5s ease-in-out;
        }
        
        .dp-table td.match {
            background: #48bb78;
            color: white;
        }
        
        .dp-table td.path {
            background: #f6e05e;
            color: #744210;
        }
        
        .dp-table td.filled {
            background: #f7fafc;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .arrow {
            position: absolute;
            width: 20px;
            height: 20px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .arrow.visible {
            opacity: 0.8;
        }
        
        .arrow::before {
            content: '';
            position: absolute;
            width: 15px;
            height: 2px;
            background: #e53e3e;
            top: 50%;
            left: 50%;
            transform-origin: left center;
        }
        
        .arrow.diagonal::before {
            transform: rotate(-135deg) translateY(-50%);
        }
        
        .arrow.left::before {
            transform: rotate(180deg) translateY(-50%);
        }
        
        .arrow.up::before {
            transform: rotate(-90deg) translateY(-50%);
        }
        
        .legend {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            min-width: 200px;
        }
        
        .legend h3 {
            font-size: 18px;
            margin-bottom: 12px;
            color: #2d3748;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
        }
        
        .results-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
        }
        
        .result-item h3 {
            font-size: 16px;
            color: #4a5568;
            margin-bottom: 8px;
        }
        
        .result-value {
            font-size: 24px;
            font-weight: 600;
            color: #2d3748;
        }
        
        .lcs-sequence {
            font-family: 'Courier New', monospace;
            background: #f7fafc;
            padding: 8px 12px;
            border-radius: 6px;
            letter-spacing: 2px;
        }
        
        .step-explanation {
            background: #e6fffa;
            border-left: 4px solid #48bb78;
            padding: 16px;
            border-radius: 0 8px 8px 0;
            margin-top: 16px;
            font-style: italic;
            color: #234e52;
        }
        
        .string-display {
            font-family: 'Courier New', monospace;
            font-size: 20px;
            letter-spacing: 4px;
            margin: 8px 0;
        }
        
        .char-highlight {
            background: #48bb78;
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Longest Common Subsequence Explorer</h1>
        <p class="explanation">
            The Longest Common Subsequence (LCS) problem finds the longest sequence that appears in both strings 
            in the same order, but not necessarily consecutively. Watch how dynamic programming builds the solution!
        </p>
        
        <div class="input-section">
            <div class="input-row">
                <div class="input-group">
                    <label for="string1">First String</label>
                    <input type="text" id="string1" value="ABCDGH" maxlength="10">
                </div>
                <div class="input-group">
                    <label for="string2">Second String</label>
                    <input type="text" id="string2" value="AEDFHR" maxlength="10">
                </div>
            </div>
            
            <div class="controls">
                <button id="startBtn">Start</button>
                <button id="nextBtn" disabled>Next Step</button>
                <button id="resetBtn">Reset</button>
                
                <div class="toggle-group">
                    <label>Auto Play</label>
                    <div class="toggle" id="autoPlayToggle">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                
                <div class="speed-control">
                    <label>Speed:</label>
                    <input type="range" id="speedSlider" min="100" max="2000" value="800">
                    <span id="speedValue">800ms</span>
                </div>
            </div>
        </div>
        
        <div class="visualization-section">
            <div class="table-container">
                <div id="tableWrapper">
                    <table class="dp-table" id="dpTable"></table>
                </div>
                
                <div class="legend">
                    <h3>Legend</h3>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4299e1;"></div>
                        <span>Currently calculating</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #48bb78;"></div>
                        <span>Character match</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f6e05e;"></div>
                        <span>LCS path</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f7fafc;"></div>
                        <span>Calculated</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="results-section">
            <div class="result-grid">
                <div class="result-item">
                    <h3>Current Step</h3>
                    <div class="result-value" id="currentStep">Ready to start</div>
                </div>
                <div class="result-item">
                    <h3>LCS Length</h3>
                    <div class="result-value" id="lcsLength">-</div>
                </div>
                <div class="result-item">
                    <h3>LCS Sequence</h3>
                    <div class="result-value lcs-sequence" id="lcsSequence">-</div>
                </div>
            </div>
            <div class="step-explanation" id="stepExplanation">
                Click "Start" to begin exploring the Longest Common Subsequence algorithm. 
                The algorithm will build a table where each cell [i,j] contains the length of the LCS 
                for the first i characters of string 1 and first j characters of string 2.
            </div>
        </div>
    </div>
    
    <script>
        class LCSExplorer {
            constructor() {
                this.string1 = '';
                this.string2 = '';
                this.dp = [];
                this.currentI = 0;
                this.currentJ = 0;
                this.isRunning = false;
                this.autoPlay = false;
                this.speed = 800;
                this.lcsPath = [];
                this.isComplete = false;
                
                this.initializeElements();
                this.attachEventListeners();
            }
            
            initializeElements() {
                this.elements = {
                    string1Input: document.getElementById('string1'),
                    string2Input: document.getElementById('string2'),
                    startBtn: document.getElementById('startBtn'),
                    nextBtn: document.getElementById('nextBtn'),
                    resetBtn: document.getElementById('resetBtn'),
                    autoPlayToggle: document.getElementById('autoPlayToggle'),
                    speedSlider: document.getElementById('speedSlider'),
                    speedValue: document.getElementById('speedValue'),
                    dpTable: document.getElementById('dpTable'),
                    currentStep: document.getElementById('currentStep'),
                    lcsLength: document.getElementById('lcsLength'),
                    lcsSequence: document.getElementById('lcsSequence'),
                    stepExplanation: document.getElementById('stepExplanation')
                };
            }
            
            attachEventListeners() {
                this.elements.startBtn.addEventListener('click', () => this.start());
                this.elements.nextBtn.addEventListener('click', () => this.nextStep());
                this.elements.resetBtn.addEventListener('click', () => this.reset());
                
                this.elements.autoPlayToggle.addEventListener('click', () => {
                    this.autoPlay = !this.autoPlay;
                    this.elements.autoPlayToggle.classList.toggle('active');
                    if (this.autoPlay && this.isRunning && !this.isComplete) {
                        this.autoPlaySteps();
                    }
                });
                
                this.elements.speedSlider.addEventListener('input', (e) => {
                    this.speed = parseInt(e.target.value);
                    this.elements.speedValue.textContent = `${this.speed}ms`;
                });
            }
            
            start() {
                this.string1 = this.elements.string1Input.value.toUpperCase();
                this.string2 = this.elements.string2Input.value.toUpperCase();
                
                if (!this.string1 || !this.string2) {
                    alert('Please enter both strings');
                    return;
                }
                
                this.isRunning = true;
                this.isComplete = false;
                this.currentI = 0;
                this.currentJ = 0;
                this.lcsPath = [];
                
                this.initializeDP();
                this.renderTable();
                
                this.elements.startBtn.disabled = true;
                this.elements.nextBtn.disabled = false;
                this.elements.string1Input.disabled = true;
                this.elements.string2Input.disabled = true;
                
                this.elements.currentStep.textContent = `Comparing: Starting...`;
                this.elements.stepExplanation.textContent = 
                    'We start by initializing the first row and column to 0, representing empty string comparisons.';
                
                if (this.autoPlay) {
                    this.autoPlaySteps();
                }
            }
            
            initializeDP() {
                const m = this.string1.length;
                const n = this.string2.length;
                
                this.dp = Array(m + 1).fill(null).map(() => Array(n + 1).fill(0));
            }
            
            renderTable() {
                const table = this.elements.dpTable;
                table.innerHTML = '';
                
                // Header row
                const headerRow = document.createElement('tr');
                headerRow.innerHTML = '<th></th><th>∅</th>';
                for (let j = 0; j < this.string2.length; j++) {
                    headerRow.innerHTML += `<th>${this.string2[j]}</th>`;
                }
                table.appendChild(headerRow);
                
                // Data rows
                for (let i = 0; i <= this.string1.length; i++) {
                    const row = document.createElement('tr');
                    const header = i === 0 ? '∅' : this.string1[i - 1];
                    row.innerHTML = `<th>${header}</th>`;
                    
                    for (let j = 0; j <= this.string2.length; j++) {
                        const cell = document.createElement('td');
                        cell.textContent = this.dp[i][j];
                        cell.dataset.i = i;
                        cell.dataset.j = j;
                        
                        if (i === 0 || j === 0) {
                            cell.classList.add('filled');
                        }
                        
                        cell.addEventListener('click', () => this.cellClick(i, j));
                        cell.addEventListener('mouseenter', () => this.cellHover(i, j));
                        
                        row.appendChild(cell);
                    }
                    table.appendChild(row);
                }
            }
            
            nextStep() {
                if (this.isComplete) return;
                
                this.currentJ++;
                if (this.currentJ > this.string2.length) {
                    this.currentJ = 1;
                    this.currentI++;
                }
                
                if (this.currentI > this.string1.length) {
                    this.completeAlgorithm();
                    return;
                }
                
                this.calculateCell(this.currentI, this.currentJ);
                
                if (this.autoPlay && !this.isComplete) {
                    setTimeout(() => this.autoPlaySteps(), this.speed);
                }
            }
            
            calculateCell(i, j) {
                const cells = document.querySelectorAll('.dp-table td');
                cells.forEach(cell => {
                    cell.classList.remove('current');
                });
                
                const currentCell = document.querySelector(`[data-i="${i}"][data-j="${j}"]`);
                currentCell.classList.add('current');
                
                const char1 = this.string1[i - 1];
                const char2 = this.string2[j - 1];
                
                if (char1 === char2) {
                    this.dp[i][j] = this.dp[i - 1][j - 1] + 1;
                    setTimeout(() => {
                        currentCell.classList.add('match');
                    }, 200);
                    
                    this.elements.stepExplanation.textContent = 
                        `Characters match! ${char1} = ${char2}. Value = diagonal + 1 = ${this.dp[i - 1][j - 1]} + 1 = ${this.dp[i][j]}`;
                } else {
                    this.dp[i][j] = Math.max(this.dp[i - 1][j], this.dp[i][j - 1]);
                    
                    this.elements.stepExplanation.textContent = 
                        `No match. ${char1} ≠ ${char2}. Value = max(top, left) = max(${this.dp[i - 1][j]}, ${this.dp[i][j - 1]}) = ${this.dp[i][j]}`;
                }
                
                currentCell.textContent = this.dp[i][j];
                currentCell.classList.add('filled');
                
                this.elements.currentStep.textContent = `Comparing: ${char1} vs ${char2}`;
                this.elements.lcsLength.textContent = this.dp[i][j];
            }
            
            completeAlgorithm() {
                this.isComplete = true;
                this.elements.nextBtn.disabled = true;
                this.findLCSPath();
                this.elements.currentStep.textContent = 'Complete!';
                this.elements.stepExplanation.textContent = 
                    'Algorithm complete! The yellow path shows how we backtrack to find the actual LCS sequence.';
            }
            
            findLCSPath() {
                let i = this.string1.length;
                let j = this.string2.length;
                const lcs = [];
                
                while (i > 0 && j > 0) {
                    const cell = document.querySelector(`[data-i="${i}"][data-j="${j}"]`);
                    cell.classList.add('path');
                    
                    if (this.string1[i - 1] === this.string2[j - 1]) {
                        lcs.unshift(this.string1[i - 1]);
                        i--;
                        j--;
                    } else if (this.dp[i - 1][j] > this.dp[i][j - 1]) {
                        i--;
                    } else {
                        j--;
                    }
                }
                
                this.elements.lcsSequence.textContent = lcs.join('') || 'None';
            }
            
            cellClick(i, j) {
                if (!this.isRunning || i === 0 || j === 0) return;
                
                const cell = document.querySelector(`[data-i="${i}"][data-j="${j}"]`);
                const char1 = i > 0 ? this.string1[i - 1] : '';
                const char2 = j > 0 ? this.string2[j - 1] : '';
                
                let explanation = `Cell [${i},${j}]: `;
                if (char1 === char2) {
                    explanation += `Match! ${char1} = ${char2}. Value from diagonal + 1`;
                } else {
                    explanation += `No match. ${char1} ≠ ${char2}. Value from max(top, left)`;
                }
                
                this.elements.stepExplanation.textContent = explanation;
            }
            
            cellHover(i, j) {
                // Could add hover effects here
            }
            
            autoPlaySteps() {
                if (this.autoPlay && this.isRunning && !this.isComplete) {
                    this.nextStep();
                }
            }
            
            reset() {
                this.isRunning = false;
                this.isComplete = false;
                this.autoPlay = false;
                this.currentI = 0;
                this.currentJ = 0;
                this.lcsPath = [];
                
                this.elements.autoPlayToggle.classList.remove('active');
                this.elements.startBtn.disabled = false;
                this.elements.nextBtn.disabled = true;
                this.elements.string1Input.disabled = false;
                this.elements.string2Input.disabled = false;
                
                this.elements.dpTable.innerHTML = '';
                this.elements.currentStep.textContent = 'Ready to start';
                this.elements.lcsLength.textContent = '-';
                this.elements.lcsSequence.textContent = '-';
                this.elements.stepExplanation.textContent = 
                    'Click "Start" to begin exploring the Longest Common Subsequence algorithm. ' +
                    'The algorithm will build a table where each cell [i,j] contains the length of the LCS ' +
                    'for the first i characters of string 1 and first j characters of string 2.';
            }
        }
        
        // Initialize the explorer
        const explorer = new LCSExplorer();
    </script>
</body>
</html>