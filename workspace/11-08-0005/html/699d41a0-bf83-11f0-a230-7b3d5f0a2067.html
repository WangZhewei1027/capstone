<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Longest Common Subsequence Interactive Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            padding: 24px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .description {
            text-align: center;
            font-size: 1.1rem;
            color: #5a6c7d;
            margin-bottom: 32px;
            line-height: 1.6;
        }

        .input-section {
            display: flex;
            gap: 24px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .input-group {
            flex: 1;
            min-width: 250px;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #4a5568;
        }

        .input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .primary-btn {
            background: #667eea;
            color: white;
        }

        .primary-btn:hover {
            background: #5a67d8;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .secondary-btn {
            background: #e2e8f0;
            color: #4a5568;
        }

        .secondary-btn:hover {
            background: #cbd5e0;
        }

        .secondary-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .step-indicator {
            font-weight: 600;
            color: #4a5568;
        }

        .table-container {
            overflow-x: auto;
            margin-bottom: 32px;
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        }

        .dp-table {
            margin: 0 auto;
            border-collapse: separate;
            border-spacing: 4px;
        }

        .dp-table td, .dp-table th {
            width: 50px;
            height: 50px;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .dp-table th {
            background: #f7fafc;
            color: #718096;
            font-size: 1.1rem;
        }

        .dp-table td {
            background: #edf2f7;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .dp-table td.calculated {
            background: #e6fffa;
            animation: calculate 0.5s ease;
        }

        .dp-table td.path {
            background: #fef3c7;
            box-shadow: 0 0 0 2px #f59e0b;
        }

        .dp-table td:hover:not(.header) {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        @keyframes calculate {
            0% {
                background: #667eea;
                color: white;
                transform: scale(1.2);
            }
            100% {
                background: #e6fffa;
                color: #2c3e50;
                transform: scale(1);
            }
        }

        .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3748;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 100;
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #2d3748;
        }

        .dp-table td:hover .tooltip {
            opacity: 1;
        }

        .result-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        }

        .result-section h2 {
            font-size: 1.5rem;
            margin-bottom: 16px;
            color: #2d3748;
        }

        .result-strings {
            display: flex;
            gap: 32px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .result-string {
            flex: 1;
            min-width: 200px;
        }

        .result-string h3 {
            font-size: 1rem;
            color: #718096;
            margin-bottom: 8px;
        }

        .char-display {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .char {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: 600;
            font-family: 'Courier New', monospace;
            transition: all 0.3s ease;
        }

        .char.normal {
            background: #edf2f7;
            color: #4a5568;
        }

        .char.highlight {
            background: #fef3c7;
            color: #92400e;
            transform: scale(1.1);
        }

        .lcs-result {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
            font-family: 'Courier New', monospace;
            letter-spacing: 3px;
            margin-top: 16px;
        }

        .legend {
            display: flex;
            gap: 24px;
            justify-content: center;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-box {
            width: 24px;
            height: 24px;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .dp-table td, .dp-table th {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Longest Common Subsequence Explorer</h1>
        <p class="description">
            Discover how the LCS algorithm finds the longest sequence of characters that appears in both strings
            in the same order (but not necessarily consecutively).
        </p>

        <div class="input-section">
            <div class="input-group">
                <label for="string1">First String:</label>
                <input type="text" id="string1" value="ABCDGH" maxlength="10" placeholder="Enter first string">
            </div>
            <div class="input-group">
                <label for="string2">Second String:</label>
                <input type="text" id="string2" value="AEDFHR" maxlength="10" placeholder="Enter second string">
            </div>
        </div>

        <div class="controls">
            <button class="secondary-btn" id="prevBtn" disabled>
                <span>←</span> Previous Step
            </button>
            <span class="step-indicator" id="stepIndicator">Step 0 / 0</span>
            <button class="primary-btn" id="nextBtn">
                Next Step <span>→</span>
            </button>
            <button class="secondary-btn" id="resetBtn">
                Reset
            </button>
            <button class="primary-btn" id="autoBtn">
                Auto Play
            </button>
        </div>

        <div class="table-container">
            <table class="dp-table" id="dpTable"></table>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box" style="background: #e6fffa;"></div>
                    <span>Calculated</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: #fef3c7; box-shadow: 0 0 0 2px #f59e0b;"></div>
                    <span>LCS Path</span>
                </div>
            </div>
        </div>

        <div class="result-section">
            <h2>Result</h2>
            <div class="result-strings">
                <div class="result-string">
                    <h3>First String:</h3>
                    <div class="char-display" id="string1Display"></div>
                </div>
                <div class="result-string">
                    <h3>Second String:</h3>
                    <div class="char-display" id="string2Display"></div>
                </div>
            </div>
            <div>
                <h3 style="margin-bottom: 8px;">Longest Common Subsequence:</h3>
                <div class="lcs-result" id="lcsResult">-</div>
            </div>
        </div>
    </div>

    <script>
        class LCSVisualizer {
            constructor() {
                this.string1 = '';
                this.string2 = '';
                this.dp = [];
                this.currentStep = 0;
                this.totalSteps = 0;
                this.autoPlaying = false;
                this.path = [];
                this.lcs = '';
                
                this.initializeElements();
                this.attachEventListeners();
                this.reset();
            }

            initializeElements() {
                this.elements = {
                    string1Input: document.getElementById('string1'),
                    string2Input: document.getElementById('string2'),
                    dpTable: document.getElementById('dpTable'),
                    prevBtn: document.getElementById('prevBtn'),
                    nextBtn: document.getElementById('nextBtn'),
                    resetBtn: document.getElementById('resetBtn'),
                    autoBtn: document.getElementById('autoBtn'),
                    stepIndicator: document.getElementById('stepIndicator'),
                    string1Display: document.getElementById('string1Display'),
                    string2Display: document.getElementById('string2Display'),
                    lcsResult: document.getElementById('lcsResult')
                };
            }

            attachEventListeners() {
                this.elements.string1Input.addEventListener('input', () => this.reset());
                this.elements.string2Input.addEventListener('input', () => this.reset());
                this.elements.prevBtn.addEventListener('click', () => this.previousStep());
                this.elements.nextBtn.addEventListener('click', () => this.nextStep());
                this.elements.resetBtn.addEventListener('click', () => this.reset());
                this.elements.autoBtn.addEventListener('click', () => this.toggleAutoPlay());
            }

            reset() {
                this.string1 = this.elements.string1Input.value;
                this.string2 = this.elements.string2Input.value;
                this.currentStep = 0;
                this.totalSteps = (this.string1.length + 1) * (this.string2.length + 1);
                this.autoPlaying = false;
                this.path = [];
                this.lcs = '';
                
                this.initializeDP();
                this.buildTable();
                this.updateControls();
                this.updateStringDisplays();
            }

            initializeDP() {
                const m = this.string1.length;
                const n = this.string2.length;
                this.dp = Array(m + 1).fill().map(() => Array(n + 1).fill(0));
            }

            buildTable() {
                const table = this.elements.dpTable;
                table.innerHTML = '';
                
                // Header row
                const headerRow = table.insertRow();
                headerRow.insertCell(); // Empty corner
                const emptyCell = headerRow.insertCell();
                emptyCell.innerHTML = '<th>∅</th>';
                
                for (let j = 0; j < this.string2.length; j++) {
                    const cell = headerRow.insertCell();
                    cell.innerHTML = `<th>${this.string2[j]}</th>`;
                }
                
                // Data rows
                for (let i = 0; i <= this.string1.length; i++) {
                    const row = table.insertRow();
                    
                    // Row header
                    const headerCell = row.insertCell();
                    headerCell.innerHTML = `<th>${i === 0 ? '∅' : this.string1[i - 1]}</th>`;
                    
                    // Data cells
                    for (let j = 0; j <= this.string2.length; j++) {
                        const cell = row.insertCell();
                        const td = document.createElement('td');
                        td.dataset.row = i;
                        td.dataset.col = j;
                        td.textContent = '0';
                        
                        // Add tooltip
                        const tooltip = document.createElement('div');
                        tooltip.className = 'tooltip';
                        td.appendChild(tooltip);
                        
                        cell.appendChild(td);
                    }
                }
                
                this.updateTable();
            }

            calculateCell(i, j) {
                if (i === 0 || j === 0) {
                    return { value: 0, formula: 'Base case: 0' };
                }
                
                if (this.string1[i - 1] === this.string2[j - 1]) {
                    return {
                        value: this.dp[i - 1][j - 1] + 1,
                        formula: `Match! ${this.dp[i - 1][j - 1]} + 1`
                    };
                } else {
                    const left = this.dp[i][j - 1];
                    const top = this.dp[i - 1][j];
                    return {
                        value: Math.max(left, top),
                        formula: `max(${left}, ${top})`
                    };
                }
            }

            updateTable() {
                const cells = this.elements.dpTable.querySelectorAll('td');
                let stepCount = 0;
                
                cells.forEach(cell => {
                    const i = parseInt(cell.dataset.row);
                    const j = parseInt(cell.dataset.col);
                    const cellIndex = i * (this.string2.length + 1) + j;
                    
                    if (stepCount < this.currentStep) {
                        const result = this.calculateCell(i, j);
                        this.dp[i][j] = result.value;
                        cell.textContent = result.value;
                        cell.classList.add('calculated');
                        
                        // Update tooltip
                        const tooltip = cell.querySelector('.tooltip');
                        tooltip.textContent = result.formula;
                    } else {
                        cell.textContent = '?';
                        cell.classList.remove('calculated');
                    }
                    
                    cell.classList.remove('path');
                    stepCount++;
                });
                
                // If complete, show path
                if (this.currentStep >= this.totalSteps) {
                    this.findPath();
                    this.highlightPath();
                    this.updateLCSDisplay();
                }
            }

            findPath() {
                this.path = [];
                this.lcs = '';
                let i = this.string1.length;
                let j = this.string2.length;
                
                while (i > 0 && j > 0) {
                    this.path.push({ i, j });
                    
                    if (this.string1[i - 1] === this.string2[j - 1]) {
                        this.lcs = this.string1[i - 1] + this.lcs;
                        i--;
                        j--;
                    } else {
                        if (this.dp[i - 1][j] > this.dp[i][j - 1]) {
                            i--;
                        } else {
                            j--;
                        }
                    }
                }
                
                if (i > 0 || j > 0) {
                    this.path.push({ i, j });
                }
            }

            highlightPath() {
                this.path.forEach(({ i, j }) => {
                    const cell = this.elements.dpTable.querySelector(`td[data-row="${i}"][data-col="${j}"]`);
                    if (cell) {
                        cell.classList.add('path');
                    }
                });
            }

            updateStringDisplays() {
                // Update string 1 display
                this.elements.string1Display.innerHTML = '';
                for (let i = 0; i < this.string1.length; i++) {
                    const charDiv = document.createElement('div');
                    charDiv.className = 'char normal';
                    charDiv.textContent = this.string1[i];
                    this.elements.string1Display.appendChild(charDiv);
                }
                
                // Update string 2 display
                this.elements.string2Display.innerHTML = '';
                for (let i = 0; i < this.string2.length; i++) {
                    const charDiv = document.createElement('div');
                    charDiv.className = 'char normal';
                    charDiv.textContent = this.string2[i];
                    this.elements.string2Display.appendChild(charDiv);
                }
            }

            updateLCSDisplay() {
                // Highlight LCS characters in both strings
                const lcsSet = new Set(this.lcs.split(''));
                const string1Chars = this.elements.string1Display.querySelectorAll('.char');
                const string2Chars = this.elements.string2Display.querySelectorAll('.char');
                
                // Track which characters from LCS we've already marked
                const lcsChars = this.lcs.split('');
                let lcsIndex1 = 0;
                let lcsIndex2 = 0;
                
                // Highlight in string 1
                for (let i = 0; i < this.string1.length && lcsIndex1 < lcsChars.length; i++) {
                    if (this.string1[i] === lcsChars[lcsIndex1]) {
                        string1Chars[i].classList.add('highlight');
                        lcsIndex1++;
                    }
                }
                
                // Highlight in string 2
                for (let i = 0; i < this.string2.length && lcsIndex2 < lcsChars.length; i++) {
                    if (this.string2[i] === lcsChars[lcsIndex2]) {
                        string2Chars[i].classList.add('highlight');
                        lcsIndex2++;
                    }
                }
                
                // Update LCS result
                this.elements.lcsResult.textContent = this.lcs || 'No common subsequence';
            }

            nextStep() {
                if (this.currentStep < this.totalSteps) {
                    this.currentStep++;
                    this.updateTable();
                    this.updateControls();
                }
            }

            previousStep() {
                if (this.currentStep > 0) {
                    this.currentStep--;
                    this.updateTable();
                    this.updateControls();
                }
            }

            toggleAutoPlay() {
                this.autoPlaying = !this.autoPlaying;
                this.elements.autoBtn.textContent = this.autoPlaying ? 'Stop' : 'Auto Play';
                
                if (this.autoPlaying) {
                    this.autoPlayStep();
                }
            }

            autoPlayStep() {
                if (!this.autoPlaying) return;
                
                if (this.currentStep < this.totalSteps) {
                    this.nextStep();
                    setTimeout(() => this.autoPlayStep(), 200);
                } else {
                    this.autoPlaying = false;
                    this.elements.autoBtn.textContent = 'Auto Play';
                }
            }

            updateControls() {
                this.elements.prevBtn.disabled = this.currentStep === 0;
                this.elements.nextBtn.disabled = this.currentStep >= this.totalSteps;
                this.elements.stepIndicator.textContent = `Step ${this.currentStep} / ${this.totalSteps}`;
            }
        }

        // Initialize the visualizer
        const visualizer = new LCSVisualizer();
    </script>
</body>
</html>