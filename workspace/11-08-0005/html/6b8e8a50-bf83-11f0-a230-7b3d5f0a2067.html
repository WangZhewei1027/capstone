<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Longest Common Subsequence Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #2d3748;
            line-height: 1.6;
            padding: 24px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            padding: 32px;
        }

        h1 {
            text-align: center;
            color: #1a202c;
            margin-bottom: 8px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 32px;
            font-size: 16px;
        }

        .input-section {
            display: flex;
            gap: 24px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        .input-group {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
            font-size: 14px;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #4299e1;
        }

        .table-container {
            overflow-x: auto;
            margin-bottom: 32px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 8px;
        }

        .dp-table {
            margin: 0 auto;
            border-collapse: separate;
            border-spacing: 2px;
        }

        .dp-table td {
            width: 40px;
            height: 40px;
            text-align: center;
            border: 1px solid #cbd5e0;
            background: white;
            font-weight: 500;
            position: relative;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .dp-table td.header {
            background: #edf2f7;
            font-weight: 700;
            color: #2d3748;
            font-family: 'Courier New', monospace;
        }

        .dp-table td.active {
            background: #3182ce;
            color: white;
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 4px 12px rgba(49, 130, 206, 0.4);
        }

        .dp-table td.filled {
            background: #e6f3ff;
            color: #2b6cb0;
        }

        .dp-table td.match {
            background: #48bb78;
            color: white;
        }

        .dp-table td.path {
            background: #f687b3;
            color: white;
            animation: pathPulse 0.6s ease;
        }

        @keyframes pathPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        .arrow {
            position: absolute;
            font-size: 10px;
            color: #a0aec0;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .arrow.show {
            opacity: 1;
        }

        .arrow.top {
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
        }

        .arrow.left {
            left: -12px;
            top: 50%;
            transform: translateY(-50%);
        }

        .arrow.diagonal {
            top: -8px;
            left: -8px;
        }

        .controls {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 100px;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-primary {
            background: #3182ce;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #2c5aa0;
        }

        .btn-secondary {
            background: #718096;
            color: white;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #5a657a;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover:not(:disabled) {
            background: #38a169;
        }

        .result-section {
            text-align: center;
            padding: 24px;
            background: #f7fafc;
            border-radius: 8px;
            margin-top: 32px;
        }

        .result-label {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 16px;
        }

        .lcs-result {
            font-size: 24px;
            font-family: 'Courier New', monospace;
            color: #2d3748;
            letter-spacing: 3px;
            margin-bottom: 16px;
            min-height: 36px;
        }

        .lcs-result .highlight {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 4px;
            color: #d97706;
        }

        .string-display {
            margin: 16px 0;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            letter-spacing: 3px;
        }

        .string-display .match {
            background: #c6f6d5;
            padding: 2px 4px;
            border-radius: 4px;
            color: #22543d;
        }

        .info-box {
            background: #e6fffa;
            border: 2px solid #81e6d9;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            font-size: 14px;
            color: #234e52;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
        }

        input[type="range"] {
            flex: 1;
            max-width: 200px;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            .dp-table td {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }

            button {
                min-width: 80px;
                padding: 8px 16px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Longest Common Subsequence Explorer</h1>
        <p class="subtitle">Visualize how LCS finds the longest sequence present in both strings</p>

        <div class="info-box">
            üí° <strong>Tip:</strong> Enter two strings below and watch how the algorithm builds a table to find their longest common subsequence. Characters don't need to be consecutive!
        </div>

        <div class="input-section">
            <div class="input-group">
                <label for="string1">String 1:</label>
                <input type="text" id="string1" value="ABCDGH" maxlength="10" />
            </div>
            <div class="input-group">
                <label for="string2">String 2:</label>
                <input type="text" id="string2" value="AEDFHR" maxlength="10" />
            </div>
        </div>

        <div class="table-container">
            <table class="dp-table" id="dpTable"></table>
        </div>

        <div class="controls">
            <button id="stepBtn" class="btn-primary">Step Forward</button>
            <button id="playBtn" class="btn-success">Auto Play</button>
            <button id="backtrackBtn" class="btn-secondary" disabled>Show Path</button>
            <button id="resetBtn" class="btn-secondary">Reset</button>
        </div>

        <div class="speed-control">
            <label>Animation Speed:</label>
            <input type="range" id="speedSlider" min="100" max="1000" value="500" />
            <span id="speedValue">500ms</span>
        </div>

        <div class="result-section">
            <div class="result-label">Longest Common Subsequence:</div>
            <div class="lcs-result" id="lcsResult">‚Äî</div>
            <div id="string1Display" class="string-display"></div>
            <div id="string2Display" class="string-display"></div>
        </div>
    </div>

    <script>
        class LCSVisualizer {
            constructor() {
                this.string1 = '';
                this.string2 = '';
                this.dpTable = [];
                this.currentRow = 0;
                this.currentCol = 0;
                this.isPlaying = false;
                this.animationSpeed = 500;
                this.lcs = '';
                this.backtrackPath = [];
                
                this.initializeElements();
                this.attachEventListeners();
                this.initialize();
            }

            initializeElements() {
                this.tableElement = document.getElementById('dpTable');
                this.string1Input = document.getElementById('string1');
                this.string2Input = document.getElementById('string2');
                this.stepBtn = document.getElementById('stepBtn');
                this.playBtn = document.getElementById('playBtn');
                this.backtrackBtn = document.getElementById('backtrackBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.lcsResult = document.getElementById('lcsResult');
                this.string1Display = document.getElementById('string1Display');
                this.string2Display = document.getElementById('string2Display');
                this.speedSlider = document.getElementById('speedSlider');
                this.speedValue = document.getElementById('speedValue');
            }

            attachEventListeners() {
                this.string1Input.addEventListener('input', () => this.initialize());
                this.string2Input.addEventListener('input', () => this.initialize());
                this.stepBtn.addEventListener('click', () => this.step());
                this.playBtn.addEventListener('click', () => this.togglePlay());
                this.backtrackBtn.addEventListener('click', () => this.showBacktrack());
                this.resetBtn.addEventListener('click', () => this.reset());
                this.speedSlider.addEventListener('input', (e) => {
                    this.animationSpeed = parseInt(e.target.value);
                    this.speedValue.textContent = `${this.animationSpeed}ms`;
                });
            }

            initialize() {
                this.string1 = this.string1Input.value.toUpperCase();
                this.string2 = this.string2Input.value.toUpperCase();
                
                if (!this.string1 || !this.string2) {
                    this.tableElement.innerHTML = '<tr><td style="padding: 20px; color: #718096;">Enter strings to begin</td></tr>';
                    return;
                }

                this.dpTable = Array(this.string2.length + 1).fill(null)
                    .map(() => Array(this.string1.length + 1).fill(0));
                
                this.currentRow = 0;
                this.currentCol = 0;
                this.lcs = '';
                this.backtrackPath = [];
                
                this.renderTable();
                this.updateButtons();
                this.lcsResult.textContent = '‚Äî';
                this.string1Display.innerHTML = '';
                this.string2Display.innerHTML = '';
            }

            renderTable() {
                let html = '<tr><td class="header"></td><td class="header"></td>';
                for (let char of this.string1) {
                    html += `<td class="header">${char}</td>`;
                }
                html += '</tr>';

                for (let i = 0; i <= this.string2.length; i++) {
                    html += '<tr>';
                    html += `<td class="header">${i === 0 ? '' : this.string2[i - 1]}</td>`;
                    
                    for (let j = 0; j <= this.string1.length; j++) {
                        const isFilled = i <= this.currentRow && (i < this.currentRow || j <= this.currentCol);
                        const isActive = i === this.currentRow && j === this.currentCol && isFilled;
                        const isPath = this.backtrackPath.some(([pi, pj]) => pi === i && pj === j);
                        
                        let className = '';
                        if (isPath) className = 'path';
                        else if (isActive) className = 'active';
                        else if (isFilled) className = 'filled';
                        
                        let arrows = '';
                        if (i > 0 && j > 0 && isFilled && !isPath) {
                            if (this.string1[j - 1] === this.string2[i - 1]) {
                                arrows = '<span class="arrow diagonal show">‚Üñ</span>';
                            } else if (this.dpTable[i - 1][j] >= this.dpTable[i][j - 1]) {
                                arrows = '<span class="arrow top show">‚Üë</span>';
                            } else {
                                arrows = '<span class="arrow left show">‚Üê</span>';
                            }
                        }
                        
                        const value = isFilled ? this.dpTable[i][j] : '';
                        html += `<td class="${className}">${value}${arrows}</td>`;
                    }
                    html += '</tr>';
                }

                this.tableElement.innerHTML = html;
            }

            step() {
                if (this.currentRow > this.string2.length) return;

                if (this.currentRow === 0 || this.currentCol > 0) {
                    this.fillCell(this.currentRow, this.currentCol);
                }

                this.currentCol++;
                if (this.currentCol > this.string1.length) {
                    this.currentCol = 0;
                    this.currentRow++;
                }

                this.renderTable();
                this.updateButtons();

                if (this.currentRow > this.string2.length) {
                    this.onComplete();
                }
            }

            fillCell(i, j) {
                if (i === 0 || j === 0) {
                    this.dpTable[i][j] = 0;
                } else if (this.string1[j - 1] === this.string2[i - 1]) {
                    this.dpTable[i][j] = this.dpTable[i - 1][j - 1] + 1;
                } else {
                    this.dpTable[i][j] = Math.max(this.dpTable[i - 1][j], this.dpTable[i][j - 1]);
                }
            }

            async togglePlay() {
                this.isPlaying = !this.isPlaying;
                this.playBtn.textContent = this.isPlaying ? 'Pause' : 'Auto Play';
                
                while (this.isPlaying && this.currentRow <= this.string2.length) {
                    this.step();
                    await this.sleep(this.animationSpeed);
                }
                
                if (this.currentRow > this.string2.length) {
                    this.isPlaying = false;
                    this.playBtn.textContent = 'Auto Play';
                }
            }

            async showBacktrack() {
                this.backtrackPath = [];
                let i = this.string2.length;
                let j = this.string1.length;
                let lcsChars = [];

                while (i > 0 && j > 0) {
                    this.backtrackPath.push([i, j]);
                    this.renderTable();
                    await this.sleep(this.animationSpeed / 2);

                    if (this.string1[j - 1] === this.string2[i - 1]) {
                        lcsChars.unshift(this.string1[j - 1]);
                        i--;
                        j--;
                    } else if (this.dpTable[i - 1][j] > this.dpTable[i][j - 1]) {
                        i--;
                    } else {
                        j--;
                    }
                }

                this.lcs = lcsChars.join('');
                this.displayResult();
            }

            displayResult() {
                this.lcsResult.innerHTML = this.lcs.split('').map(char => 
                    `<span class="highlight">${char}</span>`
                ).join('');

                // Highlight matching characters in original strings
                let lcsIndex = 0;
                this.string1Display.innerHTML = this.string1.split('').map(char => {
                    if (lcsIndex < this.lcs.length && char === this.lcs[lcsIndex]) {
                        lcsIndex++;
                        return `<span class="match">${char}</span>`;
                    }
                    return char;
                }).join('');

                lcsIndex = 0;
                this.string2Display.innerHTML = this.string2.split('').map(char => {
                    if (lcsIndex < this.lcs.length && char === this.lcs[lcsIndex]) {
                        lcsIndex++;
                        return `<span class="match">${char}</span>`;
                    }
                    return char;
                }).join('');
            }

            onComplete() {
                this.backtrackBtn.disabled = false;
                this.stepBtn.disabled = true;
                this.playBtn.disabled = true;
                this.isPlaying = false;
                this.playBtn.textContent = 'Auto Play';
            }

            reset() {
                this.currentRow = 0;
                this.currentCol = 0;
                this.lcs = '';
                this.backtrackPath = [];
                this.isPlaying = false;
                this.playBtn.textContent = 'Auto Play';
                
                this.renderTable();
                this.updateButtons();
                this.lcsResult.textContent = '‚Äî';
                this.string1Display.innerHTML = '';
                this.string2Display.innerHTML = '';
            }

            updateButtons() {
                const isComplete = this.currentRow > this.string2.length;
                this.stepBtn.disabled = isComplete;
                this.playBtn.disabled = isComplete;
                this.backtrackBtn.disabled = !isComplete;
            }

            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize the visualizer
        new LCSVisualizer();
    </script>
</body>
</html>