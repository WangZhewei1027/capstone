<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radix Sort Interactive Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f7fa;
            color: #2d3748;
            padding: 24px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 24px;
        }

        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        h1 {
            font-size: 2.5em;
            color: #1a365d;
            margin-bottom: 8px;
        }

        .subtitle {
            color: #718096;
            font-size: 1.1em;
        }

        .visualization-area {
            background: #f7fafc;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            min-height: 400px;
            position: relative;
        }

        .array-display {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .number-element {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #4299e1;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        .number-element:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.4);
        }

        .number-element.highlighting {
            background: #f56565;
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .digit-indicator {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8em;
            color: #718096;
            white-space: nowrap;
        }

        .buckets-container {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin: 40px 0;
        }

        .bucket {
            background: #e2e8f0;
            border-radius: 8px;
            padding: 8px;
            min-height: 120px;
            position: relative;
            transition: all 0.3s ease;
        }

        .bucket-label {
            text-align: center;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 8px;
        }

        .bucket-content {
            display: flex;
            flex-direction: column;
            gap: 4px;
            align-items: center;
        }

        .bucket-item {
            width: 50px;
            height: 30px;
            background: #4299e1;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 0.9em;
            animation: dropIn 0.4s ease-out;
        }

        @keyframes dropIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .controls {
            background: #f7fafc;
            border-radius: 8px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .input-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        input[type="text"] {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1em;
            width: 200px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #4299e1;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #718096;
            color: white;
        }

        .btn-secondary:hover {
            background: #4a5568;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        input[type="range"] {
            width: 150px;
        }

        .info-panel {
            background: #edf2f7;
            border-radius: 8px;
            padding: 20px;
            margin-top: 24px;
        }

        .info-section {
            margin-bottom: 16px;
        }

        .info-section h3 {
            color: #2d3748;
            margin-bottom: 8px;
        }

        .info-section p {
            color: #4a5568;
            line-height: 1.6;
        }

        .step-info {
            background: #bee3f8;
            color: #2c5282;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
            font-weight: 500;
        }

        .complexity-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .complexity-item {
            background: white;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
        }

        .complexity-label {
            font-size: 0.9em;
            color: #718096;
        }

        .complexity-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
            margin-top: 4px;
        }

        .pass-indicator {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            color: #2d3748;
        }

        .pass-indicator span {
            font-weight: bold;
            color: #4299e1;
        }

        @media (max-width: 768px) {
            .buckets-container {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .controls {
                justify-content: center;
            }
            
            .number-element {
                width: 50px;
                height: 50px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Radix Sort: Sorting by Digits</h1>
            <p class="subtitle">Watch how Radix Sort efficiently sorts integers by processing each digit position</p>
        </div>

        <div class="visualization-area">
            <div class="pass-indicator">
                Pass: <span id="currentPass">Ready to start</span>
            </div>
            
            <div class="array-display" id="arrayDisplay">
                <!-- Numbers will be displayed here -->
            </div>

            <div class="buckets-container" id="bucketsContainer">
                <!-- Buckets 0-9 will be displayed here -->
            </div>

            <div class="array-display" id="sortedDisplay">
                <!-- Sorted array after each pass -->
            </div>
        </div>

        <div class="controls">
            <div class="input-group">
                <input type="text" id="numberInput" placeholder="Enter numbers (e.g., 170, 45, 75)" />
                <button class="btn-primary" onclick="setCustomNumbers()">Set Numbers</button>
            </div>
            
            <button class="btn-secondary" onclick="generateRandom()">Generate Random</button>
            <button class="btn-primary" onclick="startSort()">Start Sort</button>
            <button class="btn-secondary" onclick="stepSort()">Step</button>
            <button class="btn-secondary" onclick="resetSort()">Reset</button>
            
            <div class="speed-control">
                <label>Speed:</label>
                <input type="range" id="speedSlider" min="1" max="10" value="5" />
                <span id="speedValue">5</span>
            </div>
        </div>

        <div class="info-panel">
            <div class="step-info" id="stepInfo">
                Click "Generate Random" or enter custom numbers to begin
            </div>

            <div class="info-section">
                <h3>How Radix Sort Works</h3>
                <p>Radix Sort processes integers digit by digit, from the least significant digit (rightmost) to the most significant digit (leftmost). For each digit position, it uses counting sort to distribute numbers into buckets (0-9), maintaining the relative order of elements with the same digit.</p>
            </div>

            <div class="complexity-info">
                <div class="complexity-item">
                    <div class="complexity-label">Time Complexity</div>
                    <div class="complexity-value">O(d Ã— n)</div>
                </div>
                <div class="complexity-item">
                    <div class="complexity-label">Space Complexity</div>
                    <div class="complexity-value">O(n + k)</div>
                </div>
                <div class="complexity-item">
                    <div class="complexity-label">Stable</div>
                    <div class="complexity-value">Yes</div>
                </div>
                <div class="complexity-item">
                    <div class="complexity-label">In-place</div>
                    <div class="complexity-value">No</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let numbers = [];
        let currentPass = 0;
        let maxDigits = 0;
        let isAnimating = false;
        let animationSpeed = 500;

        const speedSlider = document.getElementById('speedSlider');
        const speedValue = document.getElementById('speedValue');
        
        speedSlider.addEventListener('input', (e) => {
            speedValue.textContent = e.target.value;
            animationSpeed = 1100 - (e.target.value * 100);
        });

        function initializeBuckets() {
            const bucketsContainer = document.getElementById('bucketsContainer');
            bucketsContainer.innerHTML = '';
            
            for (let i = 0; i < 10; i++) {
                const bucket = document.createElement('div');
                bucket.className = 'bucket';
                bucket.id = `bucket-${i}`;
                bucket.innerHTML = `
                    <div class="bucket-label">Bucket ${i}</div>
                    <div class="bucket-content" id="bucket-content-${i}"></div>
                `;
                bucketsContainer.appendChild(bucket);
            }
        }

        function displayArray(array, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            array.forEach((num, index) => {
                const element = document.createElement('div');
                element.className = 'number-element';
                element.textContent = num;
                element.id = `${containerId}-num-${index}`;
                
                if (containerId === 'arrayDisplay' && currentPass > 0) {
                    const digit = getDigit(num, currentPass - 1);
                    const indicator = document.createElement('div');
                    indicator.className = 'digit-indicator';
                    indicator.textContent = `Digit: ${digit}`;
                    element.appendChild(indicator);
                }
                
                element.addEventListener('mouseenter', () => {
                    if (!isAnimating) {
                        highlightDigits(num);
                    }
                });
                
                element.addEventListener('mouseleave', () => {
                    clearHighlights();
                });
                
                container.appendChild(element);
            });
        }

        function getDigit(num, position) {
            return Math.floor(Math.abs(num) / Math.pow(10, position)) % 10;
        }

        function getMaxDigits(array) {
            let max = 0;
            for (let num of array) {
                const digits = num === 0 ? 1 : Math.floor(Math.log10(Math.abs(num))) + 1;
                max = Math.max(max, digits);
            }
            return max;
        }

        function highlightDigits(num) {
            const digits = num.toString().split('').map(d => parseInt(d));
            updateStepInfo(`Number ${num} has digits: ${digits.join(', ')}`);
        }

        function clearHighlights() {
            if (!isAnimating) {
                updateStepInfo('Hover over a number to see its digits');
            }
        }

        function generateRandom() {
            const count = Math.floor(Math.random() * 6) + 8; // 8-13 numbers
            numbers = [];
            for (let i = 0; i < count; i++) {
                numbers.push(Math.floor(Math.random() * 900) + 100); // 3-digit numbers
            }
            resetSort();
        }

        function setCustomNumbers() {
            const input = document.getElementById('numberInput').value;
            const nums = input.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n) && n >= 0);
            
            if (nums.length > 0) {
                numbers = nums;
                resetSort();
            } else {
                updateStepInfo('Please enter valid positive integers separated by commas');
            }
        }

        function resetSort() {
            currentPass = 0;
            maxDigits = getMaxDigits(numbers);
            isAnimating = false;
            
            initializeBuckets();
            displayArray(numbers, 'arrayDisplay');
            document.getElementById('sortedDisplay').innerHTML = '';
            document.getElementById('currentPass').textContent = 'Ready to start';
            updateStepInfo(`Array initialized with ${numbers.length} numbers. Maximum ${maxDigits} digits.`);
        }

        async function startSort() {
            if (numbers.length === 0 || isAnimating) return;
            
            isAnimating = true;
            
            for (let digit = 0; digit < maxDigits; digit++) {
                currentPass = digit + 1;
                await performRadixPass(digit);
            }
            
            updateStepInfo('Sorting complete! The array is now sorted in ascending order.');
            document.getElementById('currentPass').textContent = 'Complete!';
            isAnimating = false;
        }

        async function stepSort() {
            if (numbers.length === 0 || isAnimating) return;
            
            if (currentPass < maxDigits) {
                isAnimating = true;
                await performRadixPass(currentPass);
                currentPass++;
                isAnimating = false;
            }
        }

        async function performRadixPass(digitPosition) {
            const passLabel = ['ones', 'tens', 'hundreds', 'thousands'][digitPosition] || `10^${digitPosition}`;
            document.getElementById('currentPass').textContent = `${digitPosition + 1} (${passLabel} place)`;
            updateStepInfo(`Processing ${passLabel} place digit`);
            
            // Clear buckets
            initializeBuckets();
            
            // Highlight current array
            displayArray(numbers, 'arrayDisplay');
            await sleep(animationSpeed);
            
            // Distribute into buckets
            const buckets = Array(10).fill(null).map(() => []);
            
            for (let i = 0; i < numbers.length; i++) {
                const num = numbers[i];
                const digit = getDigit(num, digitPosition);
                
                // Highlight current number
                const element = document.getElementById(`arrayDisplay-num-${i}`);
                element.classList.add('highlighting');
                
                updateStepInfo(`Number ${num}: digit at position ${digitPosition} is ${digit}`);
                await sleep(animationSpeed / 2);
                
                // Add to bucket with animation
                buckets[digit].push(num);
                const bucketContent = document.getElementById(`bucket-content-${digit}`);
                const bucketItem = document.createElement('div');
                bucketItem.className = 'bucket-item';
                bucketItem.textContent = num;
                bucketContent.appendChild(bucketItem);
                
                element.classList.remove('highlighting');
                await sleep(animationSpeed / 2);
            }
            
            // Collect from buckets
            updateStepInfo('Collecting numbers from buckets in order...');
            await sleep(animationSpeed);
            
            numbers = [];
            for (let i = 0; i < 10; i++) {
                for (let num of buckets[i]) {
                    numbers.push(num);
                }
            }
            
            // Display sorted array for this pass
            displayArray(numbers, 'sortedDisplay');
            updateStepInfo(`Pass ${digitPosition + 1} complete. Array after sorting by ${passLabel} place.`);
        }

        function updateStepInfo(message) {
            document.getElementById('stepInfo').textContent = message;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Initialize on load
        window.onload = () => {
            initializeBuckets();
            updateStepInfo('Click "Generate Random" or enter custom numbers to begin');
        };
    </script>
</body>
</html>