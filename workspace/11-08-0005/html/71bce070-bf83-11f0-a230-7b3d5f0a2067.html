<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two Pointers: Interactive Algorithm Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f2f5;
            color: #1a1a1a;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
            min-height: 100vh;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 32px;
            color: #2c3e50;
            font-size: 2.5rem;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1.4fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .panel {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .panel h2 {
            font-size: 1.25rem;
            margin-bottom: 16px;
            color: #34495e;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        select, input[type="range"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        
        button {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: #ecf0f1;
            color: #34495e;
        }
        
        .btn-secondary:hover {
            background: #bdc3c7;
        }
        
        .array-container {
            position: relative;
            padding: 40px 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 24px;
        }
        
        .array-elements {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 60px;
        }
        
        .array-element {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .array-element.highlighted {
            background: #e3f2fd;
            border-color: #2196f3;
            transform: scale(1.1);
        }
        
        .array-element.found {
            background: #e8f5e9;
            border-color: #4caf50;
            animation: pulse 0.5s ease-out;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .pointer {
            position: absolute;
            bottom: 20px;
            width: 50px;
            text-align: center;
            transition: all 0.5s ease;
        }
        
        .pointer-arrow {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 20px solid;
            margin: 0 auto;
        }
        
        .pointer-label {
            margin-top: 8px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .pointer.left .pointer-arrow {
            border-bottom-color: #e74c3c;
        }
        
        .pointer.left .pointer-label {
            color: #e74c3c;
        }
        
        .pointer.right .pointer-arrow {
            border-bottom-color: #27ae60;
        }
        
        .pointer.right .pointer-label {
            color: #27ae60;
        }
        
        .code-display {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .code-line {
            padding: 4px 8px;
            margin: 2px 0;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .code-line.active {
            background: #34495e;
            border-left: 3px solid #3498db;
        }
        
        .info-section {
            margin-top: 20px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .info-section h3 {
            font-size: 16px;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .operation-display {
            text-align: center;
            font-size: 18px;
            margin-top: 16px;
            color: #555;
            min-height: 30px;
        }
        
        .speed-display {
            text-align: center;
            margin-top: 8px;
            font-size: 12px;
            color: #777;
        }
        
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Two Pointers: Interactive Algorithm Visualization</h1>
        
        <div class="main-layout">
            <div class="panel">
                <h2>Controls</h2>
                
                <div class="control-group">
                    <label for="problem-select">Select Problem:</label>
                    <select id="problem-select">
                        <option value="twoSum">Two Sum (Sorted Array)</option>
                        <option value="palindrome">Valid Palindrome</option>
                        <option value="removeDuplicates">Remove Duplicates</option>
                        <option value="containerWater">Container With Most Water</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="speed-slider">Animation Speed:</label>
                    <input type="range" id="speed-slider" min="1" max="10" value="5">
                    <div class="speed-display">Speed: <span id="speed-value">5</span></div>
                </div>
                
                <div class="button-group">
                    <button class="btn-primary" id="play-btn">Play</button>
                    <button class="btn-secondary" id="step-btn">Step</button>
                    <button class="btn-secondary" id="reset-btn">Reset</button>
                </div>
                
                <div class="info-section">
                    <h3>Algorithm Info</h3>
                    <p id="algorithm-description">
                        Two Sum: Find two numbers that add up to a target value using two pointers moving from opposite ends.
                    </p>
                    <p style="margin-top: 12px;">
                        <strong>Time:</strong> <span id="time-complexity">O(n)</span><br>
                        <strong>Space:</strong> <span id="space-complexity">O(1)</span>
                    </p>
                </div>
            </div>
            
            <div class="panel">
                <h2>Visualization</h2>
                
                <div class="array-container">
                    <div class="array-elements" id="array-display"></div>
                    <div class="pointer left" id="left-pointer">
                        <div class="pointer-arrow"></div>
                        <div class="pointer-label">Left</div>
                    </div>
                    <div class="pointer right" id="right-pointer">
                        <div class="pointer-arrow"></div>
                        <div class="pointer-label">Right</div>
                    </div>
                </div>
                
                <div class="operation-display" id="operation-display">
                    Click "Play" or "Step" to begin
                </div>
            </div>
            
            <div class="panel">
                <h2>Code</h2>
                
                <div class="code-display" id="code-display">
                    <div class="code-line">function twoSum(arr, target) {</div>
                    <div class="code-line">    let left = 0;</div>
                    <div class="code-line">    let right = arr.length - 1;</div>
                    <div class="code-line">    </div>
                    <div class="code-line">    while (left < right) {</div>
                    <div class="code-line">        let sum = arr[left] + arr[right];</div>
                    <div class="code-line">        </div>
                    <div class="code-line">        if (sum === target) {</div>
                    <div class="code-line">            return [left, right];</div>
                    <div class="code-line">        } else if (sum < target) {</div>
                    <div class="code-line">            left++;</div>
                    <div class="code-line">        } else {</div>
                    <div class="code-line">            right--;</div>
                    <div class="code-line">        }</div>
                    <div class="code-line">    }</div>
                    <div class="code-line">    return [];</div>
                    <div class="code-line">}</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Algorithm implementations
        const algorithms = {
            twoSum: {
                array: [1, 3, 4, 6, 8, 10, 13],
                target: 14,
                description: "Two Sum: Find two numbers that add up to a target value using two pointers moving from opposite ends.",
                timeComplexity: "O(n)",
                spaceComplexity: "O(1)",
                code: [
                    "function twoSum(arr, target) {",
                    "    let left = 0;",
                    "    let right = arr.length - 1;",
                    "    ",
                    "    while (left < right) {",
                    "        let sum = arr[left] + arr[right];",
                    "        ",
                    "        if (sum === target) {",
                    "            return [left, right];",
                    "        } else if (sum < target) {",
                    "            left++;",
                    "        } else {",
                    "            right--;",
                    "        }",
                    "    }",
                    "    return [];",
                    "}"
                ]
            },
            palindrome: {
                array: ['r', 'a', 'c', 'e', 'c', 'a', 'r'],
                description: "Valid Palindrome: Check if a string reads the same forwards and backwards using two pointers.",
                timeComplexity: "O(n)",
                spaceComplexity: "O(1)",
                code: [
                    "function isPalindrome(str) {",
                    "    let left = 0;",
                    "    let right = str.length - 1;",
                    "    ",
                    "    while (left < right) {",
                    "        if (str[left] !== str[right]) {",
                    "            return false;",
                    "        }",
                    "        left++;",
                    "        right--;",
                    "    }",
                    "    return true;",
                    "}"
                ]
            },
            removeDuplicates: {
                array: [1, 1, 2, 2, 3, 4, 4, 5],
                description: "Remove Duplicates: Use slow and fast pointers to remove duplicates from a sorted array in-place.",
                timeComplexity: "O(n)",
                spaceComplexity: "O(1)",
                code: [
                    "function removeDuplicates(arr) {",
                    "    let slow = 0;",
                    "    let fast = 1;",
                    "    ",
                    "    while (fast < arr.length) {",
                    "        if (arr[slow] !== arr[fast]) {",
                    "            slow++;",
                    "            arr[slow] = arr[fast];",
                    "        }",
                    "        fast++;",
                    "    }",
                    "    return slow + 1;",
                    "}"
                ]
            },
            containerWater: {
                array: [1, 8, 6, 2, 5, 4, 8, 3, 7],
                description: "Container With Most Water: Find the maximum area between two lines using two pointers.",
                timeComplexity: "O(n)",
                spaceComplexity: "O(1)",
                code: [
                    "function maxArea(heights) {",
                    "    let left = 0;",
                    "    let right = heights.length - 1;",
                    "    let maxArea = 0;",
                    "    ",
                    "    while (left < right) {",
                    "        let width = right - left;",
                    "        let height = Math.min(heights[left], heights[right]);",
                    "        let area = width * height;",
                    "        maxArea = Math.max(maxArea, area);",
                    "        ",
                    "        if (heights[left] < heights[right]) {",
                    "            left++;",
                    "        } else {",
                    "            right--;",
                    "        }",
                    "    }",
                    "    return maxArea;",
                    "}"
                ]
            }
        };
        
        // State management
        let currentAlgorithm = 'twoSum';
        let leftPointer = 0;
        let rightPointer = 0;
        let isPlaying = false;
        let animationSpeed = 5;
        let currentStep = 0;
        
        // DOM elements
        const arrayDisplay = document.getElementById('array-display');
        const leftPointerEl = document.getElementById('left-pointer');
        const rightPointerEl = document.getElementById('right-pointer');
        const operationDisplay = document.getElementById('operation-display');
        const codeDisplay = document.getElementById('code-display');
        const playBtn = document.getElementById('play-btn');
        const stepBtn = document.getElementById('step-btn');
        const resetBtn = document.getElementById('reset-btn');
        const problemSelect = document.getElementById('problem-select');
        const speedSlider = document.getElementById('speed-slider');
        const speedValue = document.getElementById('speed-value');
        
        // Initialize
        function init() {
            renderArray();
            updatePointers();
            renderCode();
            updateInfo();
        }
        
        function renderArray() {
            const algo = algorithms[currentAlgorithm];
            arrayDisplay.innerHTML = '';
            
            algo.array.forEach((val, idx) => {
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = val;
                element.id = `element-${idx}`;
                arrayDisplay.appendChild(element);
            });
        }
        
        function updatePointers() {
            const elements = document.querySelectorAll('.array-element');
            if (elements.length === 0) return;
            
            const leftEl = elements[leftPointer];
            const rightEl = elements[rightPointer];
            
            if (leftEl) {
                const leftRect = leftEl.getBoundingClientRect();
                const containerRect = leftEl.parentElement.getBoundingClientRect();
                leftPointerEl.style.left = `${leftRect.left - containerRect.left + leftRect.width/2 - 25}px`;
            }
            
            if (rightEl) {
                const rightRect = rightEl.getBoundingClientRect();
                const containerRect = rightEl.parentElement.getBoundingClientRect();
                rightPointerEl.style.left = `${rightRect.left - containerRect.left + rightRect.width/2 - 25}px`;
            }
            
            // Update labels for different algorithms
            if (currentAlgorithm === 'removeDuplicates') {
                leftPointerEl.querySelector('.pointer-label').textContent = 'Slow';
                rightPointerEl.querySelector('.pointer-label').textContent = 'Fast';
            } else {
                leftPointerEl.querySelector('.pointer-label').textContent = 'Left';
                rightPointerEl.querySelector('.pointer-label').textContent = 'Right';
            }
        }
        
        function highlightElements() {
            document.querySelectorAll('.array-element').forEach(el => {
                el.classList.remove('highlighted', 'found');
            });
            
            const leftEl = document.getElementById(`element-${leftPointer}`);
            const rightEl = document.getElementById(`element-${rightPointer}`);
            
            if (leftEl) leftEl.classList.add('highlighted');
            if (rightEl && rightPointer !== leftPointer) rightEl.classList.add('highlighted');
        }
        
        function renderCode() {
            const algo = algorithms[currentAlgorithm];
            codeDisplay.innerHTML = '';
            
            algo.code.forEach((line, idx) => {
                const lineEl = document.createElement('div');
                lineEl.className = 'code-line';
                lineEl.textContent = line;
                lineEl.id = `code-line-${idx}`;
                codeDisplay.appendChild(lineEl);
            });
        }
        
        function highlightCodeLine(lineNum) {
            document.querySelectorAll('.code-line').forEach(el => {
                el.classList.remove('active');
            });
            
            const line = document.getElementById(`code-line-${lineNum}`);
            if (line) line.classList.add('active');
        }
        
        function updateInfo() {
            const algo = algorithms[currentAlgorithm];
            document.getElementById('algorithm-description').textContent = algo.description;
            document.getElementById('time-complexity').textContent = algo.timeComplexity;
            document.getElementById('space-complexity').textContent = algo.spaceComplexity;
        }
        
        // Animation functions
        async function stepTwoSum() {
            const arr = algorithms.twoSum.array;
            const target = algorithms.twoSum.target;
            
            highlightElements();
            
            if (leftPointer >= rightPointer) {
                operationDisplay.textContent = "No solution found!";
                return false;
            }
            
            const sum = arr[leftPointer] + arr[rightPointer];
            operationDisplay.textContent = `${arr[leftPointer]} + ${arr[rightPointer]} = ${sum} (Target: ${target})`;
            
            highlightCodeLine(5);
            await sleep(1000 / animationSpeed);
            
            if (sum === target) {
                highlightCodeLine(8);
                document.getElementById(`element-${leftPointer}`).classList.add('found');
                document.getElementById(`element-${rightPointer}`).classList.add('found');
                operationDisplay.textContent = `Found! ${arr[leftPointer]} + ${arr[rightPointer]} = ${target}`;
                return false;
            } else if (sum < target) {
                highlightCodeLine(10);
                leftPointer++;
            } else {
                highlightCodeLine(12);
                rightPointer--;
            }
            
            await sleep(500 / animationSpeed);
            updatePointers();
            
            return leftPointer < rightPointer;
        }
        
        async function stepPalindrome() {
            const arr = algorithms.palindrome.array;
            
            highlightElements();
            
            if (leftPointer >= rightPointer) {
                operationDisplay.textContent = "It's a palindrome!";
                return false;
            }
            
            operationDisplay.textContent = `Comparing '${arr[leftPointer]}' and '${arr[rightPointer]}'`;
            highlightCodeLine(5);
            
            await sleep(1000 / animationSpeed);
            
            if (arr[leftPointer] !== arr[rightPointer]) {
                highlightCodeLine(6);
                operationDisplay.textContent = `'${arr[leftPointer]}' ≠ '${arr[rightPointer]}' - Not a palindrome!`;
                return false;
            }
            
            highlightCodeLine(8);
            leftPointer++;
            highlightCodeLine(9);
            rightPointer--;
            
            await sleep(500 / animationSpeed);
            updatePointers();
            
            return leftPointer < rightPointer;
        }
        
        async function stepRemoveDuplicates() {
            const arr = algorithms.removeDuplicates.array;
            
            highlightElements();
            
            if (rightPointer >= arr.length) {
                operationDisplay.textContent = `Unique elements: ${leftPointer + 1}`;
                return false;
            }
            
            operationDisplay.textContent = `Comparing ${arr[leftPointer]} and ${arr[rightPointer]}`;
            highlightCodeLine(5);
            
            await sleep(1000 / animationSpeed);
            
            if (arr[leftPointer] !== arr[rightPointer]) {
                highlightCodeLine(6);
                leftPointer++;
                highlightCodeLine(7);
                operationDisplay.textContent = `Found new unique: ${arr[rightPointer]}`;
                await sleep(500 / animationSpeed);
            }
            
            highlightCodeLine(9);
            rightPointer++;
            
            await sleep(500 / animationSpeed);
            updatePointers();
            
            return rightPointer < arr.length;
        }
        
        async function stepContainerWater() {
            const heights = algorithms.containerWater.array;
            
            highlightElements();
            
            if (leftPointer >= rightPointer) {
                operationDisplay.textContent = "Algorithm complete!";
                return false;
            }
            
            const width = rightPointer - leftPointer;
            const height = Math.min(heights[leftPointer], heights[rightPointer]);
            const area = width * height;
            
            highlightCodeLine(6);
            operationDisplay.textContent = `Area = ${width} × ${height} = ${area}`;
            
            await sleep(1000 / animationSpeed);
            
            if (heights[leftPointer] < heights[rightPointer]) {
                highlightCodeLine(11);
                leftPointer++;
            } else {
                highlightCodeLine(13);
                rightPointer--;
            }
            
            await sleep(500 / animationSpeed);
            updatePointers();
            
            return leftPointer < rightPointer;
        }
        
        async function step() {
            let canContinue = true;
            
            switch (currentAlgorithm) {
                case 'twoSum':
                    canContinue = await stepTwoSum();
                    break;
                case 'palindrome':
                    canContinue = await stepPalindrome();
                    break;
                case 'removeDuplicates':
                    canContinue = await stepRemoveDuplicates();
                    break;
                case 'containerWater':
                    canContinue = await stepContainerWater();
                    break;
            }
            
            if (!canContinue) {
                isPlaying = false;
                playBtn.textContent = 'Play';
            }
            
            return canContinue;
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        async function play() {
            isPlaying = true;
            playBtn.textContent = 'Pause';
            
            while (isPlaying && await step()) {
                await sleep(200);
            }
        }
        
        function reset() {
            isPlaying = false;
            playBtn.textContent = 'Play';
            leftPointer = 0;
            rightPointer = currentAlgorithm === 'removeDuplicates' ? 1 : algorithms[currentAlgorithm].array.length - 1;
            currentStep = 0;
            
            renderArray();
            updatePointers();
            highlightElements();
            operationDisplay.textContent = "Click 'Play' or 'Step' to begin";
            document.querySelectorAll('.code-line').forEach(el => el.classList.remove('active'));
        }
        
        // Event listeners
        playBtn.addEventListener('click', () => {
            if (isPlaying) {
                isPlaying = false;
                playBtn.textContent = 'Play';
            } else {
                play();
            }
        });
        
        stepBtn.addEventListener('click', () => {
            if (!isPlaying) {
                step();
            }
        });
        
        resetBtn.addEventListener('click', reset);
        
        problemSelect.addEventListener('change', (e) => {
            currentAlgorithm = e.target.value;
            reset();
            renderCode();
            updateInfo();
        });
        
        speedSlider.addEventListener('input', (e) => {
            animationSpeed = parseInt(e.target.value);
            speedValue.textContent = animationSpeed;
        });
        
        // Initialize on load
        init();
        reset();
    </script>
</body>
</html>