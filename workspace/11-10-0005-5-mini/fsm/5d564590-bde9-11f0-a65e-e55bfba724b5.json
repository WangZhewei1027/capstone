{
  "topic": "Bubble Sort Interactive Module",
  "description": "Models the interactive states and transitions of the Bubble Sort visualizer (play/step/shuffle/reset, generator-driven compare/swap/pass actions, animation timing, and finished state).",
  "states": [
    {
      "name": "idle",
      "onEnter": "setStatusReady_and_render",
      "onExit": "noop",
      "on": {
        "CLICK_PLAY": "playing",
        "CLICK_STEP": "fetchingAction",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle",
        "TOGGLE_ORDER": "idle",
        "TOGGLE_OPTIMIZED": "idle",
        "SPEED_CHANGE": "idle",
        "WINDOW_RESIZE": "idle"
      }
    },
    {
      "name": "playing",
      "onEnter": "startPlayLoop_createGenerator_if_needed_updatePlayButton_setPlayingTrue",
      "onExit": "pausePlay_clearScheduled_updatePlayButton_setPlayingFalse",
      "on": {
        "CLICK_PLAY": "idle",
        "GEN_ACTION_PASSSTART": "passStart",
        "GEN_ACTION_COMPARE": "comparing",
        "GEN_ACTION_SWAP": "swapping",
        "GEN_ACTION_PASSEND": "passEnd",
        "GEN_ACTION_FINISHED": "finished",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle"
      }
    },
    {
      "name": "fetchingAction",
      "onEnter": "fetchNextGeneratorAction_createGenerator_if_needed_and_emit_gen_action_event",
      "onExit": "noop",
      "on": {
        "GEN_ACTION_PASSSTART": "passStart",
        "GEN_ACTION_COMPARE": "comparing",
        "GEN_ACTION_SWAP": "swapping",
        "GEN_ACTION_PASSEND": "passEnd",
        "GEN_ACTION_FINISHED": "finished",
        "NO_ACTION": "idle",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle"
      }
    },
    {
      "name": "passStart",
      "onEnter": "applyAction_passStart_update_pass_counts_and_highlight",
      "onExit": "noop",
      "on": {
        "CLICK_STEP": "fetchingAction",
        "PLAY_DELAY_DONE": "fetchingAction",
        "CLICK_PLAY": "playing",
        "GEN_ACTION_COMPARE": "comparing",
        "GEN_ACTION_SWAP": "swapping",
        "GEN_ACTION_PASSEND": "passEnd",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle"
      }
    },
    {
      "name": "comparing",
      "onEnter": "applyAction_compare_increment_comparisons_highlight_bars_and_line3",
      "onExit": "clear_temporary_bar_states_if_not_sorted",
      "on": {
        "CLICK_STEP": "fetchingAction",
        "PLAY_DELAY_DONE": "fetchingAction",
        "CLICK_PLAY": "playing",
        "GEN_ACTION_SWAP": "swapping",
        "GEN_ACTION_PASSEND": "passEnd",
        "GEN_ACTION_FINISHED": "finished",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle"
      }
    },
    {
      "name": "swapping",
      "onEnter": "applyAction_swap_increment_swaps_set_swapping_state_and_performSwapAnimation",
      "onExit": "ensure_render_after_swap",
      "on": {
        "SWAP_ANIM_DONE": "fetchingAction",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle",
        "GEN_ACTION_PASSEND": "passEnd",
        "GEN_ACTION_FINISHED": "finished"
      }
    },
    {
      "name": "passEnd",
      "onEnter": "applyAction_passEnd_mark_sorted_and_highlight_line5",
      "onExit": "noop",
      "on": {
        "CLICK_STEP": "fetchingAction",
        "PLAY_DELAY_DONE": "fetchingAction",
        "CLICK_PLAY": "playing",
        "GEN_ACTION_COMPARE": "comparing",
        "GEN_ACTION_SWAP": "swapping",
        "GEN_ACTION_FINISHED": "finished",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle"
      }
    },
    {
      "name": "finished",
      "onEnter": "applyAction_finished_mark_all_sorted_setPlayingFalse_updatePlayButton_highlight_line6",
      "onExit": "noop",
      "on": {
        "CLICK_PLAY": "playing",
        "CLICK_STEP": "fetchingAction",
        "CLICK_SHUFFLE": "idle",
        "CLICK_RESET": "idle",
        "APPLY_CUSTOM": "idle"
      }
    }
  ],
  "events": [
    "CLICK_PLAY",
    "CLICK_STEP",
    "CLICK_SHUFFLE",
    "CLICK_RESET",
    "APPLY_CUSTOM",
    "TOGGLE_ORDER",
    "TOGGLE_OPTIMIZED",
    "SPEED_CHANGE",
    "WINDOW_RESIZE",
    "GEN_ACTION_PASSSTART",
    "GEN_ACTION_COMPARE",
    "GEN_ACTION_SWAP",
    "GEN_ACTION_PASSEND",
    "GEN_ACTION_FINISHED",
    "PLAY_DELAY_DONE",
    "SWAP_ANIM_DONE",
    "NO_ACTION"
  ],
  "notes": "This FSM models high-level interactive states. 'fetchingAction' represents the transient work of pulling the next generator yield; generator yields are represented by GEN_ACTION_* events. PLAY_DELAY_DONE represents the inter-action delay when in play mode, SWAP_ANIM_DONE represents the completion of the swap animation/wait. User controls (shuffle/reset/apply/toggles) reset or recreate the generator and return to idle. onEnter strings name the implementation actions invoked by the app (renderItems, applyAction_* functions, start/pause play loop, performSwap, etc.)."
}