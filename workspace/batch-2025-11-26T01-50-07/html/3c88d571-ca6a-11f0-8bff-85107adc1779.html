<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Selection Sort Visualization</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin-bottom: 10px;
    }
    #arrayContainer {
      display: flex;
      align-items: flex-end;
      height: 200px;
      width: 80vw;
      max-width: 800px;
      border: 1px solid #ccc;
      background: white;
      margin-bottom: 20px;
      padding: 10px 5px;
      position: relative;
    }
    .bar {
      margin: 0 2px;
      background-color: steelblue;
      flex: 1;
      transition: height 0.3s ease, background-color 0.3s ease;
      border-radius: 3px;
      position: relative;
    }
    .bar span {
      position: absolute;
      bottom: -20px;
      width: 100%;
      text-align: center;
      font-size: 12px;
      user-select: none;
      color: #333;
    }
    .current {
      background-color: orange !important;
    }
    .min {
      background-color: crimson !important;
    }
    .sorted {
      background-color: seagreen !important;
    }
    #controls {
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    button {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      background-color: #007bff;
      color: white;
      transition: background-color 0.3s ease;
    }
    button:disabled {
      background-color: #b0c9ff;
      cursor: not-allowed;
    }
    button:hover:not(:disabled) {
      background-color: #0056b3;
    }
    input[type="number"] {
      width: 80px;
      font-size: 16px;
      padding: 5px 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      text-align: center;
    }
    #speedLabel {
      margin-left: 10px;
    }
    #explanation {
      max-width: 800px;
      text-align: center;
      font-size: 16px;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>Selection Sort Visualization</h1>
  <div id="arrayContainer"></div>
  <div id="controls">
    <button id="startBtn">Start Sorting</button>
    <button id="resetBtn">Reset Array</button>
    <label for="sizeInput">Array Size:</label>
    <input type="number" id="sizeInput" min="5" max="50" value="20" />
    <label for="speedRange">Speed:</label>
    <input type="range" id="speedRange" min="50" max="2000" value="500" />
    <span id="speedLabel">500 ms</span>
  </div>
  <div id="explanation">
    <p><strong>Selection Sort</strong> is a simple comparison-based sorting algorithm. It works by repeatedly finding the minimum element from the unsorted portion of the array and placing it at the beginning. This visualization highlights the part of the array currently being scanned (orange) and the minimum found so far (red). Once an element is placed into its sorted position, it turns green.</p>
  </div>

<script>
  (() => {
    const container = document.getElementById('arrayContainer');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const sizeInput = document.getElementById('sizeInput');
    const speedRange = document.getElementById('speedRange');
    const speedLabel = document.getElementById('speedLabel');

    let array = [];
    let bars = [];
    let isSorting = false;
    let delay = +speedRange.value;

    function generateArray(size) {
      array = [];
      for (let i = 0; i < size; i++) {
        array.push(Math.floor(Math.random() * 100) + 1);
      }
    }

    function renderArray() {
      container.innerHTML = '';
      bars = [];
      const maxVal = Math.max(...array);
      for (let i = 0; i < array.length; i++) {
        const bar = document.createElement('div');
        bar.classList.add('bar');
        // height relative to maxVal but with a minimum height for visibility
        const heightPercent = (array[i] / maxVal) * 100;
        bar.style.height = heightPercent + '%';
        bar.title = array[i];
        const label = document.createElement('span');
        label.textContent = array[i];
        bar.appendChild(label);
        container.appendChild(bar);
        bars.push(bar);
      }
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function selectionSort() {
      isSorting = true;
      startBtn.disabled = true;
      resetBtn.disabled = true;
      sizeInput.disabled = true;
      speedRange.disabled = true;

      const n = array.length;

      for (let i = 0; i < n - 1; i++) {
        // Mark initial minimum
        let minIndex = i;
        bars[minIndex].classList.add('min');

        for (let j = i + 1; j < n; j++) {
          // highlight current bar being compared
          bars[j].classList.add('current');
          await sleep(delay);

          if (array[j] < array[minIndex]) {
            bars[minIndex].classList.remove('min');
            minIndex = j;
            bars[minIndex].classList.add('min');
          }
          bars[j].classList.remove('current');
        }

        if (minIndex !== i) {
          // swap in array
          [array[i], array[minIndex]] = [array[minIndex], array[i]];
          // swap bars height and label
          bars[i].style.height = ((array[i] / Math.max(...array)) * 100) + '%';
          bars[i].title = array[i];
          bars[i].firstChild.textContent = array[i];
          bars[minIndex].style.height = ((array[minIndex] / Math.max(...array)) * 100) + '%';
          bars[minIndex].title = array[minIndex];
          bars[minIndex].firstChild.textContent = array[minIndex];
        }

        bars[minIndex].classList.remove('min');
        bars[i].classList.add('sorted');
      }

      // last element is automatically sorted
      bars[n - 1].classList.add('sorted');

      isSorting = false;
      startBtn.disabled = false;
      resetBtn.disabled = false;
      sizeInput.disabled = false;
      speedRange.disabled = false;
    }

    function reset() {
      if (isSorting) return;
      const size = +sizeInput.value;
      if (size < 5) sizeInput.value = 5;
      if (size > 50) sizeInput.value = 50;
      generateArray(+sizeInput.value);
      renderArray();
    }

    startBtn.addEventListener('click', () => {
      if (isSorting) return;
      selectionSort();
    });

    resetBtn.addEventListener('click', () => {
      reset();
    });

    speedRange.addEventListener('input', () => {
      delay = +speedRange.value;
      speedLabel.textContent = delay + ' ms';
    });

    sizeInput.addEventListener('change', () => {
      reset();
    });

    // Init on load
    reset();
  })();
</script>
</body>
</html>