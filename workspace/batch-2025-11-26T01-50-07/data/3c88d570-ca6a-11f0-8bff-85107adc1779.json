{
  "id": "3c88d570-ca6a-11f0-8bff-85107adc1779",
  "timestamp": "2025-11-26T01:50:48.133Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Bubble Sort Demonstration</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2rem;\n    background-color: #f0f4f8;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n    margin-bottom: 1rem;\n  }\n  #arrayInput {\n    width: 100%;\n    max-width: 400px;\n    font-size: 1.1rem;\n    padding: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n  button {\n    padding: 0.6rem 1rem;\n    font-size: 1.1rem;\n    cursor: pointer;\n    margin-right: 1rem;\n  }\n  #sortBtn:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n  #arrayContainer {\n    display: flex;\n    margin-top: 2rem;\n    justify-content: center;\n    gap: 0.5rem;\n    flex-wrap: wrap;\n  }\n  .bar {\n    background-color: #4a90e2;\n    height: 50px;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n    color: white;\n    font-weight: bold;\n    border-radius: 4px 4px 0 0;\n    transition: background-color 0.3s ease;\n    user-select: none;\n  }\n  .bar.current {\n    background-color: #f39c12;\n  }\n  .bar.swapping {\n    background-color: #e74c3c;\n  }\n  .bar.sorted {\n    background-color: #2ecc71;\n  }\n  #steps {\n    margin-top: 2rem;\n    font-family: monospace;\n    white-space: pre-line;\n    max-height: 300px;\n    overflow-y: auto;\n    background: #222;\n    color: #eee;\n    padding: 1rem;\n    border-radius: 8px;\n  }\n  @media (max-width: 600px) {\n    #arrayContainer {\n      justify-content: center;\n    }\n    .bar {\n      height: 40px;\n      font-size: 0.8rem;\n    }\n  }\n</style>\n</head>\n<body>\n<h1>Bubble Sort Visualization</h1>\n<p>Enter numbers separated by commas (e.g. 5,3,8,6,2)</p>\n<input type=\"text\" id=\"arrayInput\" placeholder=\"Enter numbers here\" />\n<button id=\"sortBtn\">Start Bubble Sort</button>\n<button id=\"resetBtn\" disabled>Reset</button>\n\n<div id=\"arrayContainer\"></div>\n\n<div id=\"steps\"></div>\n\n<script>\n  const arrayInput = document.getElementById('arrayInput');\n  const sortBtn = document.getElementById('sortBtn');\n  const resetBtn = document.getElementById('resetBtn');\n  const arrayContainer = document.getElementById('arrayContainer');\n  const stepsContainer = document.getElementById('steps');\n\n  let arr = [];\n  let bars = [];\n  let sorting = false;\n\n  function parseInput(input) {\n    // Parse input and ensure only numbers\n    return input\n      .split(',')\n      .map(num => num.trim())\n      .filter(num => num !== '')\n      .map(num => Number(num))\n      .filter(num => !isNaN(num));\n  }\n\n  function createBars(array) {\n    arrayContainer.innerHTML = '';\n    bars = [];\n    for (let num of array) {\n      const bar = document.createElement('div');\n      bar.classList.add('bar');\n      bar.style.width = `${Math.max(30, 300 / array.length)}px`;\n      bar.style.height = `${num * 5 + 30}px`; // scaled height\n      bar.textContent = num;\n      arrayContainer.appendChild(bar);\n      bars.push(bar);\n    }\n  }\n\n  function logStep(text) {\n    stepsContainer.textContent += text + '\\n';\n    stepsContainer.scrollTop = stepsContainer.scrollHeight;\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function bubbleSortVisual(array) {\n    const n = array.length;\n    sorting = true;\n    sortBtn.disabled = true;\n    resetBtn.disabled = false;\n    arrayInput.disabled = true;\n    stepsContainer.textContent = '';\n    logStep('Starting Bubble Sort...\\n');\n\n    for (let i = 0; i < n -1; i++) {\n      let swapped = false;\n      logStep(`Pass ${i + 1}:`);\n      for (let j = 0; j < n - i - 1; j++) {\n        highlightBars(j, j+1, 'current');\n        logStep(`  Compare indices ${j} and ${j+1}: ${array[j]} and ${array[j+1]}`);\n        await sleep(600);\n\n        if (array[j] > array[j+1]) {\n          logStep(`  Swap ${array[j]} and ${array[j+1]}`);\n          highlightBars(j, j+1, 'swapping');\n          await sleep(600);\n\n          // Swap values\n          [array[j], array[j+1]] = [array[j+1], array[j]];\n\n          updateBars(j, array[j]);\n          updateBars(j+1, array[j+1]);\n\n          await sleep(600);\n          swapped = true;\n        }\n        clearHighlights(j, j+1);\n      }\n      markSorted(n - i - 1);\n      if (!swapped) {\n        logStep('No swaps done, array is sorted.');\n        break;\n      }\n      logStep('');\n    }\n    // Mark the rest as sorted if early break\n    for (let k = 0; k < n; k++) {\n      bars[k].classList.add('sorted');\n    }\n    logStep('Sorting completed.');\n    sorting = false;\n    sortBtn.disabled = true;\n    resetBtn.disabled = false;\n    arrayInput.disabled = true;\n  }\n\n  function highlightBars(i, j, className) {\n    bars[i].classList.add(className);\n    bars[j].classList.add(className);\n  }\n\n  function clearHighlights(i, j) {\n    bars[i].classList.remove('current', 'swapping');\n    bars[j].classList.remove('current', 'swapping');\n  }\n\n  function updateBars(index, value) {\n    bars[index].style.height = `${value * 5 + 30}px`;\n    bars[index].textContent = value;\n  }\n\n  function markSorted(index) {\n    bars[index].classList.add('sorted');\n  }\n\n  sortBtn.addEventListener('click', () => {\n    if (sorting) return;\n    arr = parseInput(arrayInput.value);\n    if (arr.length < 2) {\n      alert('Please enter at least two valid numbers.');\n      return;\n    }\n    createBars(arr);\n    bubbleSortVisual(arr);\n  });\n\n  resetBtn.addEventListener('click', () => {\n    sorting = false;\n    sortBtn.disabled = false;\n    resetBtn.disabled = true;\n    arrayInput.disabled = false;\n    stepsContainer.textContent = '';\n    arrayContainer.innerHTML = '';\n  });\n\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}