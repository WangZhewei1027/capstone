{
  "id": "3c8a3500-ca6a-11f0-8bff-85107adc1779",
  "timestamp": "2025-11-26T01:51:08.307Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Knapsack Problem",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Knapsack Problem Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    max-width: 900px;\n  }\n  h1 {\n    text-align: center;\n  }\n  table {\n    border-collapse: collapse;\n    width: 100%;\n    margin-top: 10px;\n  }\n  table, th, td {\n    border: 1px solid #555;\n  }\n  th, td {\n    padding: 8px;\n    text-align: center;\n  }\n  input[type=number] {\n    width: 60px;\n  }\n  input[type=button], button {\n    margin-top: 15px;\n    padding: 10px 15px;\n    font-weight: bold;\n    cursor: pointer;\n  }\n  #result {\n    background: #f9f9f9;\n    border: 1px solid #bbb;\n    padding: 12px;\n    margin-top: 20px;\n  }\n</style>\n</head>\n<body>\n<h1>0/1 Knapsack Problem Demo</h1>\n<p>\n  You have a knapsack with a max weight capacity.<br />\n  Add items with weight and value, then compute the best selection to maximize total value.\n</p>\n\n<div>\n  <label for=\"capacity\">Knapsack Capacity (weight): </label>\n  <input type=\"number\" id=\"capacity\" min=\"1\" value=\"50\" />\n</div>\n\n<h3>Items</h3>\n<table id=\"items-table\">\n  <thead>\n    <tr><th>#</th><th>Weight</th><th>Value</th><th>Actions</th></tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n\n<button id=\"add-item\">Add Item</button>\n\n<br />\n<button id=\"solve-knapsack\">Solve Knapsack</button>\n\n<div id=\"result\"></div>\n\n<script>\n(function(){\n  const itemsTableBody = document.querySelector(\"#items-table tbody\");\n  const addItemButton = document.getElementById(\"add-item\");\n  const solveButton = document.getElementById(\"solve-knapsack\");\n  const capacityInput = document.getElementById(\"capacity\");\n  const resultDiv = document.getElementById(\"result\");\n  \n  let itemCount = 0;\n\n  function createItemRow(weight = \"\", value = \"\") {\n    itemCount++;\n    const tr = document.createElement(\"tr\");\n    tr.dataset.index = itemCount;\n    \n    const numberTd = document.createElement(\"td\");\n    numberTd.textContent = itemCount;\n    \n    const weightTd = document.createElement(\"td\");\n    const weightInput = document.createElement(\"input\");\n    weightInput.type = \"number\";\n    weightInput.min = \"1\";\n    weightInput.value = weight;\n    weightInput.placeholder = \"weight\";\n    weightInput.required = true;\n    weightTd.appendChild(weightInput);\n    \n    const valueTd = document.createElement(\"td\");\n    const valueInput = document.createElement(\"input\");\n    valueInput.type = \"number\";\n    valueInput.min = \"0\";\n    valueInput.value = value;\n    valueInput.placeholder = \"value\";\n    valueInput.required = true;\n    valueTd.appendChild(valueInput);\n    \n    const actionTd = document.createElement(\"td\");\n    const delButton = document.createElement(\"button\");\n    delButton.textContent = \"Delete\";\n    delButton.type = \"button\";\n    delButton.style.color = \"red\";\n    delButton.onclick = () => {\n      itemsTableBody.removeChild(tr);\n      refreshRowNumbers();\n    };\n    actionTd.appendChild(delButton);\n    \n    tr.appendChild(numberTd);\n    tr.appendChild(weightTd);\n    tr.appendChild(valueTd);\n    tr.appendChild(actionTd);\n    \n    return tr;\n  }\n  function refreshRowNumbers() {\n    let i = 1;\n    for (const row of itemsTableBody.children) {\n      row.dataset.index = i;\n      row.children[0].textContent = i;\n      i++;\n    }\n    itemCount = itemsTableBody.children.length;\n  }\n  \n  function getItems() {\n    const items = [];\n    for (const row of itemsTableBody.children) {\n      const weightInput = row.children[1].firstElementChild;\n      const valueInput = row.children[2].firstElementChild;\n      \n      const w = parseInt(weightInput.value);\n      const v = parseInt(valueInput.value);\n      if (isNaN(w) || isNaN(v) || w <= 0 || v < 0) {\n        throw new Error(`Invalid values in item #${row.dataset.index}`);\n      }\n      items.push({weight: w, value: v});\n    }\n    if (items.length === 0) {\n      throw new Error(\"Please add at least one item.\");\n    }\n    return items;\n  }\n  \n  // The 0/1 Knapsack dynamic programming solver\n  // Returns the maximum value and the list of selected items indices\n  function knapsack(items, capacity) {\n    const n = items.length;\n    // dp[i][w] = max value using first i items with max capacity w\n    const dp = Array.from({length: n+1}, () => Array(capacity+1).fill(0));\n    \n    for(let i = 1; i <= n; i++) {\n      const {weight, value} = items[i-1];\n      for(let w = 0; w <= capacity; w++) {\n        if(weight <= w) {\n          dp[i][w] = Math.max(dp[i-1][w], dp[i-1][w - weight] + value);\n        } else {\n          dp[i][w] = dp[i-1][w];\n        }\n      }\n    }\n    \n    // Backtrack to find selected items\n    let w = capacity;\n    const selectedIndices = [];\n    for (let i = n; i > 0; i--) {\n      if (dp[i][w] !== dp[i-1][w]) {\n        selectedIndices.push(i-1);\n        w -= items[i-1].weight;\n      }\n    }\n    selectedIndices.reverse();\n    \n    return {\n      maxValue: dp[n][capacity],\n      selectedIndices\n    };\n  }\n  \n  function displayResult(items, capacity, solution) {\n    if(solution.selectedIndices.length === 0){\n      resultDiv.innerHTML = `<strong>No items can be included given the capacity ${capacity}.</strong>`;\n      return;\n    }\n    \n    let html = `<h3>Knapsack Solution</h3>`;\n    html += `<p>Capacity: <strong>${capacity}</strong></p>`;\n    html += `<p>Maximum Value: <strong>${solution.maxValue}</strong></p>`;\n    html += `<p>Selected Items (index, weight, value):</p>`;\n    html += `<table><thead><tr><th>#</th><th>Weight</th><th>Value</th></tr></thead><tbody>`;\n    for (let idx of solution.selectedIndices) {\n      const it = items[idx];\n      html += `<tr><td>${idx+1}</td><td>${it.weight}</td><td>${it.value}</td></tr>`;\n    }\n    html += `</tbody></table>`;\n    \n    // Summary\n    const totalWeight = solution.selectedIndices.reduce((acc, i) => acc + items[i].weight, 0);\n    html += `<p>Total Weight Used: <strong>${totalWeight}</strong></p>`;\n    resultDiv.innerHTML = html;\n  }\n  \n  addItemButton.onclick = () => {\n    const newRow = createItemRow();\n    itemsTableBody.appendChild(newRow);\n  };\n\n  solveButton.onclick = () => {\n    try {\n      const capacity = parseInt(capacityInput.value);\n      if (isNaN(capacity) || capacity <= 0) {\n        alert(\"Please enter a valid positive knapsack capacity.\");\n        capacityInput.focus();\n        return;\n      }\n      const items = getItems();\n      const result = knapsack(items, capacity);\n      displayResult(items, capacity, result);\n    } catch(e) {\n      alert(e.message);\n      resultDiv.innerHTML = \"\";\n    }\n  };\n\n  // Initialize with some example items:\n  const exampleItems = [\n    { weight: 10, value: 60 },\n    { weight: 20, value: 100 },\n    { weight: 30, value: 120 },\n  ];\n  exampleItems.forEach(item => {\n    itemsTableBody.appendChild(createItemRow(item.weight, item.value));\n  });\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Knapsack Problem"
    }
  ],
  "topic": "Knapsack Problem",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}