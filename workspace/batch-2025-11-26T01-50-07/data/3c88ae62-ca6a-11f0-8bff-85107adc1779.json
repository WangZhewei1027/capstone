{
  "id": "3c88ae62-ca6a-11f0-8bff-85107adc1779",
  "timestamp": "2025-11-26T01:51:21.489Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Priority Queue",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Priority Queue Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2rem;\n    background: #f0f4f8;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n    margin-bottom: 1rem;\n  }\n  .container {\n    max-width: 600px;\n    margin: 0 auto;\n    background: white;\n    padding: 1.5rem 2rem 2rem;\n    border-radius: 8px;\n    box-shadow: 0 8px 15px rgba(0,0,0,0.1);\n  }\n  label {\n    display: block;\n    margin-top: 1rem;\n    font-weight: 600;\n  }\n  input[type=\"text\"],\n  input[type=\"number\"] {\n    width: 100%;\n    padding: 0.4rem 0.6rem;\n    margin-top: 0.3rem;\n    border-radius: 4px;\n    border: 1px solid #bbb;\n    font-size: 1rem;\n  }\n  button {\n    margin-top: 1.2rem;\n    padding: 0.5rem 1rem;\n    font-size: 1rem;\n    background: #0078d7;\n    border: none;\n    border-radius: 4px;\n    color: white;\n    cursor: pointer;\n  }\n  button:hover {\n    background: #005ea1;\n  }\n  .output {\n    margin-top: 2rem;\n    background: #eef5fc;\n    border-left: 4px solid #0078d7;\n    padding: 1rem 1.25rem;\n    min-height: 60px;\n    white-space: pre-wrap;\n    font-family: monospace;\n  }\n  .queue-visual {\n    margin-top: 1.5rem;\n    display: flex;\n    gap: 0.75rem;\n    flex-wrap: wrap;\n  }\n  .queue-item {\n    background: #0078d7;\n    color: white;\n    padding: 0.5rem 0.75rem;\n    border-radius: 4px;\n    min-width: 60px;\n    text-align: center;\n    font-weight: 600;\n    box-shadow: 0 3px 7px rgba(0,120,215,0.5);\n  }\n  .queue-item .prio {\n    display: block;\n    font-size: 0.75rem;\n    opacity: 0.8;\n  }\n</style>\n</head>\n<body>\n  <h1>Priority Queue Demonstration</h1>\n  <div class=\"container\">\n    <label for=\"elementInput\">Element (string or number):</label>\n    <input type=\"text\" id=\"elementInput\" placeholder=\"Enter element to enqueue\" />\n    <label for=\"priorityInput\">Priority (integer, lower number = higher priority):</label>\n    <input type=\"number\" id=\"priorityInput\" placeholder=\"Enter priority\" />\n    <button id=\"enqueueBtn\">Enqueue</button>\n    <button id=\"dequeueBtn\" style=\"background: #d9534f; margin-left: 1rem;\">Dequeue</button>\n    <button id=\"peekBtn\" style=\"background: #5bc0de; margin-left: 1rem;\">Peek</button>\n\n    <div class=\"output\" id=\"outputArea\">Queue is empty.</div>\n\n    <h3 style=\"margin-top: 2rem;\">Current Queue State (front â†’ back):</h3>\n    <div class=\"queue-visual\" id=\"queueVisual\"></div>\n  </div>\n\n<script>\n  // Priority Queue Implementation using a Min-Heap (lowest priority number = highest priority)\n  class PriorityQueue {\n    constructor() {\n      this.heap = [];\n    }\n    // Helper: Swap two elements in the heap\n    swap(i, j) {\n      [this.heap[i], this.heap[j]] = [this.heap[j], this.heap[i]];\n    }\n    // Helper: Heapify up starting at index i\n    heapifyUp(i) {\n      let parent = Math.floor((i - 1) / 2);\n      while (\n        i > 0 &&\n        this.heap[i].priority < this.heap[parent].priority\n      ) {\n        this.swap(i, parent);\n        i = parent;\n        parent = Math.floor((i - 1) / 2);\n      }\n    }\n    // Helper: Heapify down starting at index i\n    heapifyDown(i) {\n      let left = 2 * i + 1;\n      let right = 2 * i + 2;\n      let smallest = i;\n\n      if (\n        left < this.size() &&\n        this.heap[left].priority < this.heap[smallest].priority\n      ) smallest = left;\n\n      if (\n        right < this.size() &&\n        this.heap[right].priority < this.heap[smallest].priority\n      ) smallest = right;\n\n      if (smallest !== i) {\n        this.swap(i, smallest);\n        this.heapifyDown(smallest);\n      }\n    }\n    enqueue(element, priority) {\n      if (typeof priority !== \"number\" || !Number.isInteger(priority)) {\n        throw new Error(\"Priority must be an integer.\");\n      }\n      const node = { element, priority };\n      this.heap.push(node);\n      this.heapifyUp(this.heap.length - 1);\n    }\n    dequeue() {\n      if (this.isEmpty()) return null;\n      const min = this.heap[0];\n      const end = this.heap.pop();\n      if (this.heap.length > 0) {\n        this.heap[0] = end;\n        this.heapifyDown(0);\n      }\n      return min;\n    }\n    peek() {\n      return this.isEmpty() ? null : this.heap[0];\n    }\n    size() {\n      return this.heap.length;\n    }\n    isEmpty() {\n      return this.size() === 0;\n    }\n    // Returns array of elements in priority order without modifying the queue\n    toSortedArray() {\n      // clone heap array\n      const clone = this.heap.slice();\n      const result = [];\n      // create a temporary min heap using the clone\n      const tmpPQ = new PriorityQueue();\n      tmpPQ.heap = clone;\n      // since we bypassed heapify, heap might not be valid;\n      // so heapify entire array once:\n      for (let i = Math.floor(tmpPQ.size() / 2); i >= 0; i--) tmpPQ.heapifyDown(i);\n\n      while (!tmpPQ.isEmpty()) {\n        result.push(tmpPQ.dequeue());\n      }\n      return result;\n    }\n  }\n  // === DOM Elements ===\n  const elementInput = document.getElementById(\"elementInput\");\n  const priorityInput = document.getElementById(\"priorityInput\");\n  const enqueueBtn = document.getElementById(\"enqueueBtn\");\n  const dequeueBtn = document.getElementById(\"dequeueBtn\");\n  const peekBtn = document.getElementById(\"peekBtn\");\n  const outputArea = document.getElementById(\"outputArea\");\n  const queueVisual = document.getElementById(\"queueVisual\");\n\n  const pq = new PriorityQueue();\n\n  // Updates the queue visual display\n  function updateVisual() {\n    queueVisual.innerHTML = \"\";\n    // Display queue from front (highest priority) to back (lowest priority)\n    const sorted = pq.toSortedArray();\n    if (sorted.length === 0) {\n      queueVisual.innerHTML = \"<em>Queue is empty.</em>\";\n    } else {\n      sorted.forEach(({element, priority}) => {\n        const div = document.createElement(\"div\");\n        div.className = \"queue-item\";\n        div.textContent = element;\n        const prioSpan = document.createElement(\"span\");\n        prioSpan.className = \"prio\";\n        prioSpan.textContent = \"Prio: \" + priority;\n        div.appendChild(prioSpan);\n        queueVisual.appendChild(div);\n      });\n    }\n  }\n\n  // Updates the textual output area\n  function updateOutput(text) {\n    outputArea.textContent = text;\n  }\n\n  // Event Handlers\n  enqueueBtn.onclick = () => {\n    const element = elementInput.value.trim();\n    const priorityStr = priorityInput.value.trim();\n\n    if (element === \"\") {\n      updateOutput(\"Error: Element cannot be empty.\");\n      return;\n    }\n    if (priorityStr === \"\") {\n      updateOutput(\"Error: Priority cannot be empty.\");\n      return;\n    }\n    const priority = Number(priorityStr);\n    if (!Number.isInteger(priority)) {\n      updateOutput(\"Error: Priority must be an integer.\");\n      return;\n    }\n    try {\n      pq.enqueue(element, priority);\n      updateOutput(`Enqueued element \"${element}\" with priority ${priority}.`);\n      elementInput.value = \"\";\n      priorityInput.value = \"\";\n      elementInput.focus();\n      updateVisual();\n    } catch (err) {\n      updateOutput(\"Error: \" + err.message);\n    }\n  };\n\n  dequeueBtn.onclick = () => {\n    if (pq.isEmpty()) {\n      updateOutput(\"Queue is empty, nothing to dequeue.\");\n      return;\n    }\n    const {element, priority} = pq.dequeue();\n    updateOutput(`Dequeued element \"${element}\" with priority ${priority}.`);\n    updateVisual();\n  };\n\n  peekBtn.onclick = () => {\n    if (pq.isEmpty()) {\n      updateOutput(\"Queue is empty.\");\n      return;\n    }\n    const {element, priority} = pq.peek();\n    updateOutput(`Front element is \"${element}\" with priority ${priority}.`);\n  };\n\n  // Initial Visual Update\n  updateVisual();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Priority Queue"
    }
  ],
  "topic": "Priority Queue",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}