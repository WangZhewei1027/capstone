<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Stack (LIFO) Interactive Demo</title>
<style>
  :root{
    --bg:#0f1320;
    --panel:#141a2b;
    --accent:#4cc9f0;
    --accent2:#ffafcc;
    --text:#e6eef7;
    --muted:#99a4b3;
    --danger:#ff6b6b;
    --success:#80ffdb;
    --item:#1d2540;
    --itemBorder:#2a355e;
    --green:#3bd671;
    --yellow:#ffd166;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    color:var(--text);
    background: radial-gradient(80% 120% at 100% 0%, #0b1020 0%, var(--bg) 45%, #0c1222 100%);
  }
  a{color:var(--accent)}
  .app{
    max-width:1100px;
    margin:0 auto;
    padding:24px;
  }
  header{
    display:flex;
    align-items:flex-start;
    gap:16px;
    margin-bottom:18px;
  }
  h1{
    font-size:28px;
    margin:0;
    letter-spacing:.2px;
  }
  .subtitle{
    color:var(--muted);
    font-size:14px;
    max-width:800px;
    line-height:1.4;
  }

  .grid{
    display:grid;
    grid-template-columns: 1.1fr .9fr;
    gap:20px;
  }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border:1px solid #1e2644;
    border-radius:14px;
    padding:16px;
    box-shadow: 0 10px 20px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
  }
  .card h2{
    margin:0 0 10px 0;
    font-size:18px;
  }

  /* Controls */
  .controls{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    align-items:center;
    margin-bottom:12px;
  }
  .controls input{
    background:var(--panel);
    border:1px solid #243057;
    color:var(--text);
    padding:10px 12px;
    border-radius:10px;
    min-width:180px;
    outline:none;
  }
  .btn{
    border:1px solid #243057;
    background:linear-gradient(180deg, #1b2340, #151b31);
    color:var(--text);
    padding:10px 12px;
    border-radius:10px;
    cursor:pointer;
    transition:transform .08s ease, box-shadow .08s ease, background .2s ease;
    user-select:none;
    font-weight:600;
    font-size:14px;
  }
  .btn:hover{transform:translateY(-1px)}
  .btn:active{transform:translateY(0)}
  .btn.primary{
    border-color:#275b7a;
    background:linear-gradient(180deg, #1b3143, #152233);
    color:#dff7ff;
  }
  .btn.danger{
    border-color:#64333a;
    background:linear-gradient(180deg, #2b1920, #1c1217);
    color:#ffe9ed;
  }
  .btn.ghost{
    background:transparent;
  }
  .mini{
    font-size:12px;
    padding:6px 9px;
    border-radius:8px;
  }

  /* Stack visualization */
  .stackWrap{
    display:grid;
    grid-template-columns: 1fr 220px;
    gap:14px;
  }
  .stack{
    position:relative;
    height:380px;
    border:1px dashed #2a355e;
    border-radius:14px;
    background:
      repeating-linear-gradient(180deg, rgba(255,255,255,0.03) 0, rgba(255,255,255,0.03) 2px, transparent 2px, transparent 26px),
      linear-gradient(180deg, rgba(76,201,240,0.06), rgba(0,0,0,0));
    padding:14px;
    overflow:hidden;
  }
  .stackInner{
    height:100%;
    display:flex;
    flex-direction:column-reverse; /* Latest appended shown at top */
    align-items:center;
    gap:8px;
  }
  .item{
    width:75%;
    max-width:360px;
    min-height:40px;
    background:linear-gradient(180deg, var(--item), #131a32);
    border:1px solid var(--itemBorder);
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#d9e6ff;
    font-weight:700;
    letter-spacing:.2px;
    box-shadow: 0 6px 12px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.04);
    transition: transform .22s cubic-bezier(.2,.8,.2,1), opacity .22s ease, box-shadow .22s ease;
  }
  .item.enter{
    transform: translateY(-24px) scale(.96);
    opacity:0;
  }
  .item.leave{
    transform: translateY(-30px) scale(.94);
    opacity:0;
  }
  .item.peek{
    box-shadow: 0 0 0 2px var(--accent), 0 10px 20px rgba(76,201,240,.25), inset 0 1px 0 rgba(255,255,255,.08);
  }

  .labels{
    position:absolute;
    left:12px;
    right:12px;
    pointer-events:none;
  }
  .labels .top{
    position:absolute;
    top:4px;
    left:4px;
    display:flex;
    align-items:center;
    gap:6px;
    color:#cdefff;
    font-size:12px;
    background:rgba(76,201,240,.08);
    border:1px solid rgba(76,201,240,.3);
    border-radius:8px;
    padding:4px 8px;
  }
  .labels .bottom{
    position:absolute;
    bottom:6px;
    left:4px;
    display:inline-block;
    color:#fcefff;
    font-size:12px;
    background:rgba(255,175,204,.08);
    border:1px solid rgba(255,175,204,.3);
    border-radius:8px;
    padding:4px 8px;
  }
  .emptyMsg{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--muted);
    font-size:14px;
    opacity:.8;
    pointer-events:none;
  }

  /* Side panel */
  .stats{
    display:grid;
    gap:10px;
  }
  .kv{
    display:flex;
    justify-content:space-between;
    padding:8px 10px;
    border:1px solid #223059;
    border-radius:10px;
    background:linear-gradient(180deg, #131a2b, #101524);
    font-size:13px;
  }
  .kv .value{font-weight:700;color:#cfe8ff}
  .bigO{
    display:grid;
    gap:6px;
    font-size:13px;
  }
  .bigO .row{
    display:flex;
    justify-content:space-between;
    padding:6px 10px;
    border:1px dashed #263254;
    border-radius:8px;
    color:#cfe8ff;
    background:rgba(255,255,255,.02);
  }
  .row .op{color:#a9c4ff}
  .row .o{color:#80ffdb;font-weight:700}

  /* Log */
  .log{
    list-style:none;
    margin:10px 0 0 0;
    padding:0;
    max-height:140px;
    overflow:auto;
    border:1px solid #223059;
    border-radius:10px;
    background:linear-gradient(180deg, #0f1528, #0d1220);
  }
  .log li{
    display:flex;
    justify-content:space-between;
    gap:8px;
    padding:8px 10px;
    border-bottom:1px solid rgba(255,255,255,.05);
    font-size:12px;
    color:#cfe3ff;
  }
  .log li:last-child{border-bottom:none}
  .log .time{color:#7fa3d1}
  .log .desc{font-weight:600}

  /* Examples */
  .examples{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:16px;
  }
  .exBox .controls{
    margin:8px 0 0 0;
  }
  .result{
    margin-top:8px;
    background:linear-gradient(180deg,#12182c,#0f1424);
    border:1px solid #223059;
    border-radius:10px;
    padding:10px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size:13px;
    color:#d9edff;
    min-height:38px;
    word-break:break-word;
  }

  /* Toast */
  .toast{
    position:fixed;
    bottom:16px;
    left:50%;
    transform:translateX(-50%);
    background:#162038;
    color:#d9edff;
    border:1px solid #2a355e;
    border-radius:10px;
    box-shadow: 0 10px 20px rgba(0,0,0,.4);
    padding:10px 14px;
    opacity:0;
    pointer-events:none;
    transition: opacity .2s ease, transform .2s ease;
  }
  .toast.show{
    opacity:1;
    transform:translateX(-50%) translateY(-4px);
  }

  @media (max-width: 980px){
    .grid{grid-template-columns: 1fr}
    .stackWrap{grid-template-columns: 1fr}
    .examples{grid-template-columns: 1fr}
  }
</style>
</head>
<body>
<div class="app">
  <header>
    <div>
      <h1>Stack (LIFO) Interactive Demo</h1>
      <div class="subtitle">
        A stack is a Last-In, First-Out structure. You push values onto the top and pop them off from the top. This page lets you interact with a stack, visualize operations, and see two classic applications: reversing a string and checking balanced parentheses.
      </div>
    </div>
  </header>

  <div class="grid">

    <section class="card">
      <h2>Play with the Stack</h2>
      <div class="controls">
        <input id="valueInput" type="text" placeholder="Enter a value to push">
        <button class="btn primary" id="pushBtn">Push</button>
        <button class="btn" id="popBtn">Pop</button>
        <button class="btn" id="peekBtn">Peek</button>
        <button class="btn ghost mini" id="randBtn">Push random</button>
        <button class="btn danger mini" id="clearBtn">Clear</button>
      </div>

      <div class="stackWrap">
        <div class="stack">
          <div class="labels">
            <div class="top">Top</div>
            <div class="bottom">Bottom</div>
          </div>
          <div class="emptyMsg" id="emptyMsg">Stack is empty</div>
          <div class="stackInner" id="stackItems"></div>
        </div>

        <div class="stats">
          <div class="kv"><div>Size</div><div class="value" id="sizeVal">0</div></div>
          <div class="kv"><div>Top element</div><div class="value" id="topVal">None</div></div>

          <div class="bigO">
            <div class="row"><div class="op">push</div><div class="o">O(1)</div></div>
            <div class="row"><div class="op">pop</div><div class="o">O(1)</div></div>
            <div class="row"><div class="op">peek</div><div class="o">O(1)</div></div>
            <div class="row"><div class="op">search</div><div class="o">O(n)</div></div>
          </div>

          <h3 style="margin:8px 0 6px 0;font-size:14px;">Operation log</h3>
          <ul class="log" id="logList"></ul>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Examples Using a Stack</h2>
      <div class="examples">

        <div class="exBox">
          <h3 style="margin:0 0 6px 0;font-size:15px;">Reverse a string</h3>
          <div class="subtitle" style="font-size:12px;margin-bottom:6px;">
            Push each character, then pop to build the reversed output.
          </div>
          <div class="controls">
            <input id="revInput" type="text" placeholder="Type text to reverse">
            <button class="btn primary" id="revBtn">Reverse using stack</button>
          </div>
          <div class="result" id="revResult"></div>
        </div>

        <div class="exBox">
          <h3 style="margin:0 0 6px 0;font-size:15px;">Balanced parentheses</h3>
          <div class="subtitle" style="font-size:12px;margin-bottom:6px;">
            Use a stack to ensure every closing bracket matches the most recent opening bracket.
          </div>
          <div class="controls">
            <input id="balInput" type="text" placeholder="e.g. (a+[b*c]-{d/3})">
            <button class="btn primary" id="balBtn">Check balance</button>
          </div>
          <div class="result" id="balResult"></div>
        </div>

      </div>
    </section>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
  // Stack implementation
  class Stack {
    constructor(){ this._arr = []; }
    push(x){ this._arr.push(x); return x; }
    pop(){ return this._arr.pop(); }
    peek(){ return this._arr[this._arr.length - 1]; }
    size(){ return this._arr.length; }
    isEmpty(){ return this._arr.length === 0; }
    clear(){ this._arr.length = 0; }
    toArray(){ return [...this._arr]; }
  }

  const stack = new Stack();

  // DOM elements
  const itemsEl = document.getElementById('stackItems');
  const sizeEl = document.getElementById('sizeVal');
  const topEl = document.getElementById('topVal');
  const emptyMsgEl = document.getElementById('emptyMsg');

  const inputEl = document.getElementById('valueInput');
  const pushBtn = document.getElementById('pushBtn');
  const popBtn = document.getElementById('popBtn');
  const peekBtn = document.getElementById('peekBtn');
  const clearBtn = document.getElementById('clearBtn');
  const randBtn = document.getElementById('randBtn');

  const logEl = document.getElementById('logList');
  const toastEl = document.getElementById('toast');

  // Examples
  const revInput = document.getElementById('revInput');
  const revBtn = document.getElementById('revBtn');
  const revResult = document.getElementById('revResult');

  const balInput = document.getElementById('balInput');
  const balBtn = document.getElementById('balBtn');
  const balResult = document.getElementById('balResult');

  // Helpers
  const nowTime = () => new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit', second:'2-digit'});
  function log(action){
    const li = document.createElement('li');
    li.innerHTML = `<span class="time">${nowTime()}</span><span class="desc">${action}</span>`;
    logEl.prepend(li); // newest on top
  }
  let toastTimer;
  function toast(msg){
    clearTimeout(toastTimer);
    toastEl.textContent = msg;
    toastEl.classList.add('show');
    toastTimer = setTimeout(()=> toastEl.classList.remove('show'), 2000);
  }

  function updateInfo(){
    sizeEl.textContent = stack.size();
    topEl.textContent = stack.isEmpty() ? 'None' : String(stack.peek());
    emptyMsgEl.style.display = stack.isEmpty() ? 'flex' : 'none';
  }

  function createItemEl(text){
    const el = document.createElement('div');
    el.className = 'item enter';
    el.textContent = text;
    return el;
  }

  // Render initial
  updateInfo();

  // Actions
  function pushValue(val){
    if (val == null) return;
    const str = String(val).trim();
    if (!str){
      toast('Enter a value to push.');
      inputEl.focus();
      return;
    }
    stack.push(str);
    const node = createItemEl(str);
    itemsEl.appendChild(node);
    requestAnimationFrame(()=> node.classList.remove('enter'));
    updateInfo();
    log(`push("${str}")`);
    inputEl.value = '';
    inputEl.focus();
  }

  function popValue(){
    if (stack.isEmpty()){
      toast('Stack is already empty.');
      return;
    }
    const removed = stack.pop();
    const topNode = itemsEl.lastElementChild;
    if (topNode){
      topNode.classList.add('leave');
      topNode.addEventListener('transitionend', ()=> { topNode.remove(); updateInfo(); }, {once:true});
    } else {
      updateInfo();
    }
    log(`pop() -> "${removed}"`);
  }

  function peekValue(){
    if (stack.isEmpty()){
      toast('Nothing to peek.');
      return;
    }
    const topNode = itemsEl.lastElementChild;
    topNode.classList.add('peek');
    setTimeout(()=> topNode.classList.remove('peek'), 700);
    log(`peek() -> "${stack.peek()}"`);
    updateInfo();
  }

  function clearStack(){
    if (stack.isEmpty()){
      toast('Stack is already clear.');
      return;
    }
    stack.clear();
    const children = Array.from(itemsEl.children);
    let delay = 0;
    children.reverse().forEach((node, i)=>{
      setTimeout(()=> {
        node.classList.add('leave');
        node.addEventListener('transitionend', ()=> node.remove(), {once:true});
      }, delay);
      delay += 40;
    });
    setTimeout(updateInfo, delay + 200);
    log('clear()');
  }

  function pushRandom(){
    const rand = Math.random();
    const val = Math.random() < .33
      ? Math.floor(rand * 100)
      : Math.random() < .66
        ? ['alpha','beta','gamma','delta','omega'][Math.floor(rand*5)]
        : '#' + Math.floor(rand * 0xFFFFFF).toString(16).padStart(6,'0');
    pushValue(val);
  }

  // Bindings
  pushBtn.addEventListener('click', ()=> pushValue(inputEl.value));
  inputEl.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter') pushValue(inputEl.value);
  });
  popBtn.addEventListener('click', popValue);
  peekBtn.addEventListener('click', peekValue);
  clearBtn.addEventListener('click', clearStack);
  randBtn.addEventListener('click', pushRandom);

  // Example: reverse string using a stack
  function reverseUsingStack(text){
    const s = new Stack();
    for (const ch of text) s.push(ch);
    let out = '';
    while(!s.isEmpty()) out += s.pop();
    return out;
  }
  revBtn.addEventListener('click', ()=>{
    const t = String(revInput.value ?? '');
    if (!t.length){ toast('Type text to reverse.'); revInput.focus(); return; }
    const out = reverseUsingStack(t);
    revResult.textContent = out;
  });
  revInput.addEventListener('keydown', e=>{
    if (e.key === 'Enter') revBtn.click();
  });

  // Example: balanced parentheses using a stack
  function isBalanced(expr){
    const s = new Stack();
    const pairs = {')':'(',']':'[','}':'{'};
    for (const ch of expr){
      if (ch === '(' || ch === '[' || ch === '{'){
        s.push(ch);
      } else if (ch === ')' || ch === ']' || ch === '}'){
        const top = s.pop();
        if (top !== pairs[ch]) return false;
      }
    }
    return s.isEmpty();
  }
  balBtn.addEventListener('click', ()=>{
    const t = String(balInput.value ?? '');
    if (!t.length){ toast('Enter an expression to check.'); balInput.focus(); return; }
    const ok = isBalanced(t);
    balResult.textContent = ok ? 'Balanced ✓' : 'Not balanced ✕';
    balResult.style.color = ok ? 'var(--green)' : 'var(--danger)';
  });
  balInput.addEventListener('keydown', e=>{
    if (e.key === 'Enter') balBtn.click();
  });

  // Seed with a few values for visual interest
  ['A','B','C'].forEach(v=>{
    stack.push(v);
    const node = createItemEl(v);
    itemsEl.appendChild(node);
    requestAnimationFrame(()=> node.classList.remove('enter'));
  });
  updateInfo();
  log('Initialized stack with ["A","B","C"]');
</script>
</body>
</html>