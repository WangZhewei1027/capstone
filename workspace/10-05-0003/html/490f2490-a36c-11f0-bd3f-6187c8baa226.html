<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Linear Search — Interactive Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --accent: #2563eb;
      --accent-2: #10b981;
      --warn: #ef4444;
      --text: #111827;
      --muted: #6b7280;
      --bg: #f8fafc;
      --card: #ffffff;
      --border: #e5e7eb;
      --current: #fde68a;
      --checked: #e5e7eb;
      --found: #bbf7d0;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 24px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg); color: var(--text);
    }
    h1 { margin: 0 0 12px; font-size: 22px; }
    p { margin: 8px 0; color: var(--muted); }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-top: 16px;
    }
    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    label { font-size: 14px; color: var(--text); }
    input[type="text"], input[type="number"] {
      width: 280px; max-width: 90vw;
      padding: 10px 12px; border-radius: 8px; border: 1px solid var(--border);
      outline: none;
    }
    input[type="text"]:focus, input[type="number"]:focus { border-color: var(--accent); }
    .btn {
      appearance: none; border: none; background: var(--accent); color: white; padding: 10px 14px; border-radius: 8px;
      cursor: pointer; font-weight: 600; font-size: 14px;
    }
    .btn.secondary { background: #374151; }
    .btn.ghost { background: transparent; color: var(--text); border: 1px solid var(--border); }
    .btn[disabled] { opacity: 0.5; cursor: not-allowed; }
    .array-visual {
      display: flex; flex-wrap: wrap; gap: 8px; padding: 12px; border: 1px dashed var(--border); border-radius: 12px; background: #fafafa;
      min-height: 64px;
    }
    .box {
      min-width: 48px; text-align: center; padding: 12px 10px; border-radius: 10px; border: 2px solid #e5e7eb; background: white;
      font-weight: 600; color: #111827; position: relative; transition: transform 0.15s ease, background 0.2s ease, border-color 0.2s ease;
    }
    .box .index {
      position: absolute; top: -10px; left: 6px; color: var(--muted); font-size: 11px; background: #fff; padding: 0 4px; border-radius: 4px; border: 1px solid var(--border);
    }
    .box.current {
      background: var(--current); border-color: #f59e0b; transform: translateY(-3px);
    }
    .box.checked { background: var(--checked); }
    .box.found { background: var(--found); border-color: var(--accent-2); transform: translateY(-5px); }
    .box.target {
      outline: 2px dashed var(--accent); outline-offset: 2px;
    }
    .status {
      display: grid; grid-template-columns: repeat(3, minmax(140px, 1fr)); gap: 12px; margin-top: 10px;
    }
    .stat {
      background: #fff; border: 1px solid var(--border); border-radius: 10px; padding: 10px;
    }
    .stat .label { color: var(--muted); font-size: 12px; }
    .stat .value { font-size: 18px; font-weight: 700; }
    .log {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: #0b1020; color: #c8e1ff; border-radius: 10px; padding: 10px; height: 140px; overflow: auto; margin-top: 12px;
    }
    .legend { display: flex; gap: 16px; align-items: center; font-size: 13px; color: var(--muted); }
    .swatch { width: 14px; height: 14px; border-radius: 3px; border: 1px solid var(--border); display: inline-block; vertical-align: middle; margin-right: 6px; }
    .swatch.current { background: var(--current); border-color: #f59e0b; }
    .swatch.checked { background: var(--checked); }
    .swatch.found { background: var(--found); border-color: var(--accent-2); }
    .swatch.target { background: #fff; border: 2px dashed var(--accent); }
    .error { color: var(--warn); font-size: 13px; }
    .controls { display: flex; gap: 8px; flex-wrap: wrap; }
    .speed {
      display: flex; align-items: center; gap: 8px;
    }
    .code {
      background: #111827; color: #e5e7eb; border-radius: 10px; padding: 10px; font-family: ui-monospace, monospace; font-size: 13px; overflow: auto;
    }
  </style>
</head>
<body>
  <h1>Linear Search</h1>
  <p>Linear search scans a list from left to right, comparing each element to the target until it finds a match or reaches the end.</p>

  <div class="card">
    <div class="row" style="gap:16px; align-items:flex-end;">
      <div>
        <label for="arrayInput">Array (comma-separated numbers)</label><br />
        <input id="arrayInput" type="text" value="4, 2, 7, 1, 9, 3, 7" />
      </div>
      <div>
        <label for="targetInput">Target</label><br />
        <input id="targetInput" type="number" value="7" />
      </div>
      <div class="controls">
        <button id="randomBtn" class="btn ghost" title="Generate a random array">Randomize</button>
        <button id="resetBtn" class="btn ghost" title="Reset to initial state">Reset</button>
      </div>
    </div>

    <div class="row" style="margin-top:12px;">
      <div class="controls">
        <button id="stepBtn" class="btn">Step</button>
        <button id="autoBtn" class="btn">Search (Auto)</button>
        <button id="pauseBtn" class="btn secondary" disabled>Pause</button>
      </div>
      <div class="speed">
        <label for="speedRange">Speed</label>
        <input id="speedRange" type="range" min="100" max="2000" step="100" value="700" />
        <span id="speedLabel" style="color:var(--muted); font-size:12px;">700 ms/step</span>
      </div>
    </div>

    <div id="error" class="error" role="alert" aria-live="polite" style="min-height:18px; margin-top:8px;"></div>

    <div class="legend" style="margin-top:8px;">
      <span><span class="swatch current"></span>Current check</span>
      <span><span class="swatch checked"></span>Checked (no match)</span>
      <span><span class="swatch found"></span>Found</span>
      <span><span class="swatch target"></span>Target value</span>
    </div>

    <div id="arrayVis" class="array-visual" aria-label="Array visualization" style="margin-top:8px;"></div>

    <div class="status">
      <div class="stat">
        <div class="label">Result index</div>
        <div id="resultIndex" class="value">—</div>
      </div>
      <div class="stat">
        <div class="label">Comparisons</div>
        <div id="comparisons" class="value">0</div>
      </div>
      <div class="stat">
        <div class="label">Complexity</div>
        <div id="complexity" class="value">Best O(1), Worst O(n)</div>
      </div>
    </div>

    <div id="log" class="log" aria-live="polite"></div>
  </div>

  <div class="card">
    <div style="font-weight:700; margin-bottom:8px;">Pseudocode</div>
    <div class="code"><pre style="margin:0;">function linearSearch(arr, x):
  for i from 0 to length(arr) - 1:
    if arr[i] == x:
      return i
  return -1</pre></div>
    <p style="margin-top:8px;">
      - Stops immediately when a match is found (best case).<br />
      - If the item is not present, it checks every element (worst case).<br />
      - Works on unsorted lists; simple but not optimal for large datasets.
    </p>
  </div>

  <script>
    // State
    const state = {
      arr: [],
      target: null,
      i: 0,
      comparisons: 0,
      foundIndex: null,
      running: false,
      timer: null,
      lastHighlighted: null,
    };

    // Elements
    const arrayInput = document.getElementById('arrayInput');
    const targetInput = document.getElementById('targetInput');
    const randomBtn = document.getElementById('randomBtn');
    const resetBtn = document.getElementById('resetBtn');
    const stepBtn = document.getElementById('stepBtn');
    const autoBtn = document.getElementById('autoBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const speedRange = document.getElementById('speedRange');
    const speedLabel = document.getElementById('speedLabel');
    const arrayVis = document.getElementById('arrayVis');
    const resultIndexEl = document.getElementById('resultIndex');
    const comparisonsEl = document.getElementById('comparisons');
    const complexityEl = document.getElementById('complexity');
    const errorEl = document.getElementById('error');
    const logEl = document.getElementById('log');

    // Utility
    function log(msg) {
      const t = new Date().toLocaleTimeString();
      logEl.textContent += `[${t}] ${msg}\n`;
      logEl.scrollTop = logEl.scrollHeight;
    }

    function showError(msg) {
      errorEl.textContent = msg || '';
    }

    function parseArray(str) {
      const parts = str.split(/[, ]+/).filter(Boolean);
      if (parts.length === 0) return { ok: false, error: 'Please enter at least one number.' };
      const nums = parts.map(p => Number(p));
      const bad = nums.find(n => Number.isNaN(n));
      if (bad !== undefined) return { ok: false, error: 'Array must contain only numbers (use commas or spaces).' };
      return { ok: true, value: nums };
    }

    function renderArray(arr, target) {
      arrayVis.innerHTML = '';
      arr.forEach((val, idx) => {
        const box = document.createElement('div');
        box.className = 'box';
        box.dataset.index = idx;
        box.textContent = String(val);
        const indexTag = document.createElement('div');
        indexTag.className = 'index';
        indexTag.textContent = idx;
        box.appendChild(indexTag);
        if (val === target) {
          box.classList.add('target');
        }
        arrayVis.appendChild(box);
      });
    }

    function clearHighlights() {
      Array.from(arrayVis.children).forEach(box => {
        box.classList.remove('current', 'checked', 'found');
      });
    }

    function setUIRunning(running) {
      state.running = running;
      autoBtn.disabled = running;
      stepBtn.disabled = running;
      pauseBtn.disabled = !running;
      arrayInput.disabled = running;
      targetInput.disabled = running;
      randomBtn.disabled = running;
    }

    function updateStats() {
      comparisonsEl.textContent = state.comparisons;
      resultIndexEl.textContent = state.foundIndex === null ? '—' : state.foundIndex;
    }

    function resetSearch(keepInputs = true) {
      if (state.timer) clearInterval(state.timer);
      state.timer = null;
      setUIRunning(false);
      state.i = 0;
      state.comparisons = 0;
      state.foundIndex = null;
      state.lastHighlighted = null;
      updateStats();
      showError('');
      log('Reset.');
      // Re-render based on current inputs if keepInputs
      const arrParse = parseArray(arrayInput.value);
      if (!arrParse.ok) {
        showError(arrParse.error);
        arrayVis.innerHTML = '';
        return;
      }
      const targetVal = Number(targetInput.value);
      if (Number.isNaN(targetVal)) {
        showError('Target must be a number.');
        arrayVis.innerHTML = '';
        return;
      }
      state.arr = arrParse.value;
      state.target = targetVal;
      renderArray(state.arr, state.target);
    }

    function initFromInputs() {
      const arrParse = parseArray(arrayInput.value);
      if (!arrParse.ok) {
        showError(arrParse.error);
        return false;
      }
      const targetVal = Number(targetInput.value);
      if (Number.isNaN(targetVal)) {
        showError('Target must be a number.');
        return false;
      }
      showError('');
      state.arr = arrParse.value;
      state.target = targetVal;
      state.i = 0;
      state.comparisons = 0;
      state.foundIndex = null;
      state.lastHighlighted = null;
      updateStats();
      renderArray(state.arr, state.target);
      log(`Initialized search for target ${state.target} in [${state.arr.join(', ')}].`);
      return true;
    }

    function highlightIndex(i, status) {
      const boxes = Array.from(arrayVis.children);
      boxes.forEach(b => b.classList.remove('current'));
      if (state.lastHighlighted !== null && state.lastHighlighted < boxes.length) {
        const prev = boxes[state.lastHighlighted];
        if (prev && prev.classList.contains('current')) prev.classList.remove('current');
        // If it wasn't found, mark it as checked
        if (status !== 'found') prev && prev.classList.add('checked');
      }
      if (i >= 0 && i < boxes.length) {
        const box = boxes[i];
        box.classList.add('current');
        if (status === 'found') {
          box.classList.add('found');
        }
      }
      state.lastHighlighted = i;
    }

    function stepOnce() {
      const n = state.arr.length;
      if (state.foundIndex !== null || state.i >= n) {
        // Already done
        if (state.running) {
          clearInterval(state.timer);
          state.timer = null;
          setUIRunning(false);
          log('Search complete.');
        }
        return;
      }

      highlightIndex(state.i, 'checking');
      const val = state.arr[state.i];
      state.comparisons++;
      updateStats();

      log(`Compare arr[${state.i}] = ${val} with target ${state.target} ... ${val === state.target ? 'match!' : 'no match'}`);

      if (val === state.target) {
        state.foundIndex = state.i;
        highlightIndex(state.i, 'found');
        updateStats();
        log(`Found at index ${state.i}. Comparisons: ${state.comparisons}.`);
        if (state.running) {
          clearInterval(state.timer);
          state.timer = null;
          setUIRunning(false);
        }
        return;
      } else {
        // Move to next index
        state.i++;
        if (state.i >= n) {
          log(`Target not found. Comparisons: ${state.comparisons}.`);
          resultIndexEl.textContent = -1;
          if (state.running) {
            clearInterval(state.timer);
            state.timer = null;
            setUIRunning(false);
          }
          return;
        }
      }
    }

    // Events
    stepBtn.addEventListener('click', () => {
      if (!state.arr.length || state.foundIndex !== null || state.i === 0) {
        // Initialize if needed
        if (!initFromInputs()) return;
      }
      stepOnce();
    });

    autoBtn.addEventListener('click', () => {
      if (!initFromInputs()) return;
      const interval = Number(speedRange.value);
      setUIRunning(true);
      state.timer = setInterval(stepOnce, interval);
    });

    pauseBtn.addEventListener('click', () => {
      if (state.running) {
        clearInterval(state.timer);
        state.timer = null;
        setUIRunning(false);
        log('Paused.');
      }
    });

    resetBtn.addEventListener('click', () => resetSearch(true));

    randomBtn.addEventListener('click', () => {
      const len = Math.floor(Math.random() * 8) + 7; // 7..14
      const arr = Array.from({ length: len }, () => Math.floor(Math.random() * 99));
      const target = arr[Math.floor(Math.random() * arr.length)];
      arrayInput.value = arr.join(', ');
      targetInput.value = target;
      resetSearch(true);
      log(`Randomized array and target (target=${target}).`);
    });

    arrayInput.addEventListener('input', () => {
      // Lightweight validation feedback
      const res = parseArray(arrayInput.value);
      showError(res.ok ? '' : res.error);
    });

    targetInput.addEventListener('input', () => {
      const t = Number(targetInput.value);
      showError(Number.isNaN(t) ? 'Target must be a number.' : '');
    });

    speedRange.addEventListener('input', () => {
      speedLabel.textContent = `${speedRange.value} ms/step`;
      if (state.running && state.timer) {
        clearInterval(state.timer);
        state.timer = setInterval(stepOnce, Number(speedRange.value));
      }
    });

    // Initialize on load
    resetSearch(true);
    log('Ready. Enter an array and target, then Step or Search (Auto).');
  </script>
</body>
</html>