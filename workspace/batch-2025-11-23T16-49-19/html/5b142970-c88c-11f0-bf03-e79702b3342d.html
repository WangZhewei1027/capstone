<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linked List Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2em;
    background: #f9f9f9;
  }
  h1 {
    text-align: center;
  }
  #linked-list-container {
    display: flex;
    gap: 10px;
    margin: 20px auto;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
  }
  .node {
    background-color: #007bff;
    color: white;
    padding: 0.5em 1em;
    border-radius: 6px;
    position: relative;
    min-width: 50px;
    text-align: center;
    font-weight: bold;
  }
  .node::after {
    content: 'â†’';
    position: absolute;
    right: -20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.5em;
    color: #333;
  }
  .node:last-child::after {
    content: 'null';
    right: -45px;
    color: #666;
    font-size: 0.9em;
  }
  form {
    max-width: 400px;
    margin: 0 auto 2em auto;
    display: flex;
    gap: 0.8em;
    flex-wrap: wrap;
  }
  input[type="text"] {
    flex: 1 0 120px;
    padding: 0.5em;
    font-size: 1em;
  }
  button {
    padding: 0.5em 1em;
    font-size: 1em;
    cursor: pointer;
    background-color: #007bff;
    border: none;
    color: white;
    border-radius: 4px;
    transition: background-color 0.25s ease;
  }
  button:hover:not(:disabled) {
    background-color: #0056b3;
  }
  button:disabled {
    background-color: #cccccc;
    cursor: default;
  }
  .log {
    max-width: 600px;
    margin: 0 auto;
    background-color: #e9ecef;
    padding: 1em;
    border-radius: 8px;
    height: 200px;
    overflow-y: auto;
    font-family: monospace;
    white-space: pre-wrap;
    user-select: text;
  }
  .description {
    max-width: 720px;
    margin: 0 auto 1em auto;
    color: #333;
    font-size: 1.1em;
    line-height: 1.4em;
    text-align: center;
  }
</style>
</head>
<body>
<h1>Singly Linked List Demo</h1>
<div class="description">
  This demo shows a simple <b>singly linked list</b> with operations to <em>append</em>, <em>prepend</em>, <em>insert at index</em>, <em>delete by value</em>, and <em>search</em>.
</div>

<form id="form-append" aria-label="Append node">
  <input type="text" id="append-value" placeholder="Value to append" aria-label="Value to append" required />
  <button type="submit">Append</button>
</form>

<form id="form-prepend" aria-label="Prepend node">
  <input type="text" id="prepend-value" placeholder="Value to prepend" required aria-label="Value to prepend" />
  <button type="submit">Prepend</button>
</form>

<form id="form-insert" aria-label="Insert node at index">
  <input type="number" id="insert-index" placeholder="Index (0-based)" min="0" required aria-label="Index to insert at" />
  <input type="text" id="insert-value" placeholder="Value to insert" required aria-label="Value to insert" />
  <button type="submit">Insert at Index</button>
</form>

<form id="form-delete" aria-label="Delete node by value">
  <input type="text" id="delete-value" placeholder="Value to delete" required aria-label="Value to delete" />
  <button type="submit">Delete</button>
</form>

<form id="form-search" aria-label="Search value">
  <input type="text" id="search-value" placeholder="Value to search" required aria-label="Value to search" />
  <button type="submit">Search</button>
</form>

<div id="linked-list-container" aria-live="polite" aria-label="Linked list nodes"></div>

<h2 style="text-align: center;">Console Log</h2>
<div class="log" id="log" aria-live="polite" aria-atomic="true"></div>

<script>
  // Node class
  class Node {
    constructor(value) {
      this.value = value;
      this.next = null;
    }
  }

  // Singly linked list class
  class LinkedList {
    constructor() {
      this.head = null;
      this.size = 0;
    }

    append(value) {
      const newNode = new Node(value);
      if (!this.head) {
        this.head = newNode;
      } else {
        let current = this.head;
        while (current.next) {
          current = current.next;
        }
        current.next = newNode;
      }
      this.size++;
    }

    prepend(value) {
      const newNode = new Node(value);
      newNode.next = this.head;
      this.head = newNode;
      this.size++;
    }

    insertAt(index, value) {
      if (index < 0 || index > this.size) {
        return false;
      }
      if (index === 0) {
        this.prepend(value);
        return true;
      }
      if (index === this.size) {
        this.append(value);
        return true;
      }
      const newNode = new Node(value);
      let prev = null;
      let current = this.head;
      let count = 0;
      while (count < index) {
        prev = current;
        current = current.next;
        count++;
      }
      prev.next = newNode;
      newNode.next = current;
      this.size++;
      return true;
    }

    deleteByValue(value) {
      if (!this.head) return false;
      if (this.head.value === value) {
        this.head = this.head.next;
        this.size--;
        return true;
      }
      let current = this.head;
      let prev = null;
      while (current && current.value !== value) {
        prev = current;
        current = current.next;
      }
      if (current) {
        prev.next = current.next;
        this.size--;
        return true;
      }
      return false;
    }

    search(value) {
      let current = this.head;
      let index = 0;
      while (current) {
        if (current.value === value) {
          return index;
        }
        current = current.next;
        index++;
      }
      return -1;
    }

    toArray() {
      const arr = [];
      let current = this.head;
      while (current) {
        arr.push(current.value);
        current = current.next;
      }
      return arr;
    }
  }

  // UI and interaction
  const linkedList = new LinkedList();
  const container = document.getElementById('linked-list-container');
  const logEl = document.getElementById('log');

  function log(message) {
    const time = new Date().toLocaleTimeString();
    logEl.textContent += `[${time}] ${message}\n`;
    logEl.scrollTop = logEl.scrollHeight;
  }

  function renderList(highlightIndex = -1) {
    container.innerHTML = '';
    let current = linkedList.head;
    let index = 0;
    while (current) {
      const nodeEl = document.createElement('div');
      nodeEl.className = 'node';
      nodeEl.textContent = current.value;
      if (index === highlightIndex) {
        nodeEl.style.backgroundColor = '#28a745'; // green highlight for found node
        nodeEl.style.boxShadow = '0 0 10px 3px #28a745aa';
      }
      container.appendChild(nodeEl);
      current = current.next;
      index++;
    }
  }

  // Append
  document.getElementById('form-append').addEventListener('submit', e => {
    e.preventDefault();
    const input = document.getElementById('append-value');
    const val = input.value.trim();
    if (val === '') return;
    linkedList.append(val);
    log(`Appended value "${val}"`);
    renderList();
    input.value = '';
  });

  // Prepend
  document.getElementById('form-prepend').addEventListener('submit', e => {
    e.preventDefault();
    const input = document.getElementById('prepend-value');
    const val = input.value.trim();
    if (val === '') return;
    linkedList.prepend(val);
    log(`Prepended value "${val}"`);
    renderList();
    input.value = '';
  });

  // Insert at index
  document.getElementById('form-insert').addEventListener('submit', e => {
    e.preventDefault();
    const indexInput = document.getElementById('insert-index');
    const valInput = document.getElementById('insert-value');
    const val = valInput.value.trim();
    const idx = parseInt(indexInput.value);
    if (val === '' || isNaN(idx) || idx < 0) return;
    const success = linkedList.insertAt(idx, val);
    if (success) {
      log(`Inserted value "${val}" at index ${idx}`);
      renderList();
    } else {
      log(`Failed to insert: index ${idx} is out of bounds`);
      alert('Index out of bounds');
    }
    indexInput.value = '';
    valInput.value = '';
  });

  // Delete by value
  document.getElementById('form-delete').addEventListener('submit', e => {
    e.preventDefault();
    const input = document.getElementById('delete-value');
    const val = input.value.trim();
    if (val === '') return;
    const deleted = linkedList.deleteByValue(val);
    if (deleted) {
      log(`Deleted first occurrence of value "${val}"`);
      renderList();
    } else {
      log(`Value "${val}" not found in list`);
      alert(`Value "${val}" not found in the list.`);
    }
    input.value = '';
  });

  // Search
  document.getElementById('form-search').addEventListener('submit', e => {
    e.preventDefault();
    const input = document.getElementById('search-value');
    const val = input.value.trim();
    if (val === '') return;
    const idx = linkedList.search(val);
    if (idx !== -1) {
      log(`Value "${val}" found at index ${idx}`);
      renderList(idx);
    } else {
      log(`Value "${val}" not found in list`);
      renderList();
      alert(`Value "${val}" not found in the list.`);
    }
    input.value = '';
  });

  // Initial
  renderList();
</script>
</body>
</html>