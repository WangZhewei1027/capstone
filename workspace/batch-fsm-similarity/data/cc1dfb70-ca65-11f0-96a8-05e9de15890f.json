{
  "id": "cc1dfb70-ca65-11f0-96a8-05e9de15890f",
  "timestamp": "2025-11-26T01:20:54.548Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Counting Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Counting Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#7dd3fc;\n      --muted:#94a3b8;\n      --good:#60a5fa;\n      --danger:#fb7185;\n      --card:#081127;\n      --glass: rgba(255,255,255,0.03);\n      --glass-2: rgba(255,255,255,0.02);\n      --text:#e6eef8;\n      --mono: 'Segoe UI', Roboto, 'Helvetica Neue', Arial;\n    }\n    *{box-sizing:border-box}\n    html,body{height:100%}\n    body{\n      margin:0;\n      font-family:var(--mono);\n      background: linear-gradient(180deg,#051025 0%, #071526 55%, #071326 100%);\n      color:var(--text);\n      -webkit-font-smoothing:antialiased;\n      -moz-osx-font-smoothing:grayscale;\n      padding:20px;\n    }\n    h1{margin:0 0 10px 0;font-size:20px}\n    .app{\n      display:grid;\n      grid-template-columns: 380px 1fr;\n      gap:18px;\n      align-items:start;\n    }\n    .card{\n      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      border: 1px solid rgba(255,255,255,0.04);\n      padding:14px;\n      border-radius:10px;\n      box-shadow: 0 6px 24px rgba(2,6,23,0.6), inset 0 1px rgba(255,255,255,0.02);\n    }\n    .controls h2{font-size:16px;margin:0 0 8px 0}\n    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}\n    .row{display:flex;gap:10px;align-items:center;margin-bottom:8px}\n    input[type=\"number\"], input[type=\"text\"], select{\n      width:100%;\n      padding:8px 10px;\n      border-radius:8px;\n      border:1px solid rgba(255,255,255,0.04);\n      background:var(--glass);\n      color:var(--text);\n      outline:none;\n    }\n    button{\n      background:linear-gradient(180deg,var(--good),#2b6cb0);\n      color:white;\n      border:none;\n      padding:8px 12px;\n      border-radius:8px;\n      cursor:pointer;\n      font-weight:600;\n      box-shadow: 0 6px 16px rgba(29,78,216,0.12);\n    }\n    button.ghost{\n      background:transparent;\n      border:1px solid rgba(255,255,255,0.04);\n      color:var(--text);\n      box-shadow:none;\n    }\n    .small{font-size:13px;padding:6px 10px}\n    .muted{color:var(--muted);font-size:13px}\n    .visual{\n      padding:16px;\n      min-height:420px;\n    }\n    .arrays{\n      display:flex;\n      flex-direction:column;\n      gap:18px;\n      margin-bottom:12px;\n    }\n    .array-row{\n      display:flex;\n      flex-direction:column;\n      gap:8px;\n    }\n    .array-title{\n      display:flex;\n      justify-content:space-between;\n      align-items:center;\n      font-size:13px;\n      color:var(--muted);\n      margin-bottom:6px;\n    }\n    .boxes{\n      display:flex;\n      gap:8px;\n      align-items:end;\n      padding:6px;\n      overflow:auto;\n      min-height:72px;\n      background:var(--glass-2);\n      border-radius:10px;\n      border:1px solid rgba(255,255,255,0.02);\n    }\n    .cell{\n      width:46px;\n      min-width:46px;\n      height:64px;\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      border-radius:8px;\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      justify-content:center;\n      color:var(--text);\n      font-weight:700;\n      position:relative;\n      transition:transform .18s ease, box-shadow .18s ease, background .18s;\n      border:1px solid rgba(255,255,255,0.03);\n    }\n    .cell.small{width:40px;height:56px}\n    .cell .val{font-size:16px}\n    .cell .idx{font-size:12px;color:var(--muted);position:absolute;bottom:6px}\n    .highlight{\n      box-shadow:0 8px 28px rgba(125,211,252,0.08);\n      transform:translateY(-6px) scale(1.02);\n      border-color:rgba(125,211,252,0.18);\n      background:linear-gradient(180deg, rgba(125,211,252,0.06), rgba(125,211,252,0.02));\n    }\n    .placed{\n      background:linear-gradient(180deg, rgba(96,165,250,0.08), rgba(96,165,250,0.03));\n      border-color:rgba(96,165,250,0.12);\n      box-shadow:0 8px 24px rgba(96,165,250,0.06);\n      transform:translateY(-4px);\n    }\n    .muted-cell{opacity:0.4}\n    .legend{display:flex;gap:8px;align-items:center;font-size:13px;color:var(--muted)}\n    .legend .dot{width:12px;height:12px;border-radius:3px}\n    .dot.current{background:var(--accent)}\n    .dot.placed{background:var(--good)}\n    .controls-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px}\n    .play-controls{display:flex;gap:8px;align-items:center;margin-top:8px}\n    .status{font-size:13px;color:var(--muted)}\n    .stepper{display:flex;gap:6px}\n    .speed{display:flex;gap:8px;align-items:center}\n    .info{font-size:13px;color:var(--muted);line-height:1.5}\n    .footer{\n      margin-top:10px;\n      display:flex;\n      justify-content:space-between;\n      align-items:center;\n      gap:12px;\n    }\n    pre{background:transparent;color:var(--muted);font-size:13px;margin:0}\n    .note{font-size:12px;color:var(--muted)}\n    /* Responsive */\n    @media (max-width:980px){\n      .app{grid-template-columns:1fr; padding-bottom:60px}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\">\n    <div class=\"card controls\">\n      <h1>Counting Sort — Visual Playground</h1>\n      <div style=\"margin-bottom:10px\" class=\"muted\">Step through Counting Sort (stable) on non‑negative integers. See counts, cumulative counts, and placement into output.</div>\n\n      <div style=\"margin-top:10px\" class=\"card\" id=\"inputCard\">\n        <h2>Input & Parameters</h2>\n        <label>Array (comma separated) — values must be integers ≥ 0</label>\n        <input id=\"arrInput\" type=\"text\" placeholder=\"e.g. 4,2,2,8,3,3,1\" value=\"4,2,2,8,3,3,1\" />\n        <div class=\"row\" style=\"margin-top:8px\">\n          <div style=\"flex:1\">\n            <label>Number of elements (generate)</label>\n            <input id=\"nInput\" type=\"number\" min=\"1\" max=\"40\" value=\"7\" />\n          </div>\n          <div style=\"width:120px\">\n            <label>Max value (k)</label>\n            <input id=\"kInput\" type=\"number\" min=\"0\" max=\"100\" value=\"8\" />\n          </div>\n        </div>\n        <div class=\"row\" style=\"margin-top:10px\">\n          <button id=\"genRnd\">Generate Random</button>\n          <button id=\"useCustom\" class=\"ghost\">Use From Text</button>\n          <div style=\"flex:1\"></div>\n        </div>\n        <div style=\"margin-top:10px\">\n          <label>Options</label>\n          <div style=\"display:flex;gap:10px;align-items:center\">\n            <label style=\"display:flex;gap:8px;align-items:center\"><input id=\"stableToggle\" type=\"checkbox\" checked /> Stable (right-to-left placement)</label>\n            <label style=\"display:flex;gap:8px;align-items:center\"><input id=\"copyBack\" type=\"checkbox\" checked /> Copy back to original (final step)</label>\n          </div>\n        </div>\n      </div>\n\n      <div style=\"margin-top:12px\" class=\"card\">\n        <h2>Controls</h2>\n        <div class=\"controls-grid\">\n          <div>\n            <label>Record Steps</label>\n            <button id=\"recordBtn\">Record (prepare steps)</button>\n          </div>\n          <div>\n            <label>Reset</label>\n            <button id=\"resetBtn\" class=\"ghost\">Reset View</button>\n          </div>\n        </div>\n\n        <div class=\"play-controls\">\n          <div class=\"stepper\">\n            <button id=\"backBtn\" class=\"small ghost\">⟲ Back</button>\n            <button id=\"stepBack\" class=\"small ghost\">◀ Step</button>\n            <button id=\"playBtn\" class=\"small\">▶ Play</button>\n            <button id=\"stepFwd\" class=\"small ghost\">Step ▶</button>\n            <button id=\"fwdBtn\" class=\"small ghost\">Forward ⟳</button>\n          </div>\n          <div style=\"margin-left:auto\" class=\"speed\">\n            <span class=\"muted\">Speed</span>\n            <input id=\"speed\" type=\"range\" min=\"100\" max=\"1600\" step=\"50\" value=\"600\" />\n          </div>\n        </div>\n\n        <div style=\"margin-top:10px;display:flex;justify-content:space-between;align-items:center\">\n          <div>\n            <div class=\"status\" id=\"status\">Status: idle</div>\n          </div>\n          <div style=\"text-align:right\">\n            <div class=\"muted\">Step <span id=\"curStep\">0</span> / <span id=\"totalSteps\">0</span></div>\n          </div>\n        </div>\n      </div>\n\n      <div style=\"margin-top:12px\" class=\"card\">\n        <h2>Quick Notes</h2>\n        <div class=\"info\">\n          - Counting sort is fastest when k (range of values) is not much larger than n (number of elements).<br>\n          - Time: O(n + k). Space: O(n + k). Stable by placing from right→left.<br>\n          - Only works directly for integers in a small non‑negative range.\n        </div>\n        <div style=\"margin-top:10px\" class=\"footer\">\n          <div class=\"muted\">Algorithm: Counting Sort</div>\n          <div class=\"muted\">Complexity: O(n + k)</div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"card visual\">\n      <div style=\"display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:6px\">\n        <div>\n          <div style=\"font-weight:700\">Visualization</div>\n          <div class=\"muted\" style=\"margin-top:6px\" id=\"stepDesc\">Prepare by recording steps...</div>\n        </div>\n        <div class=\"legend\">\n          <div style=\"display:flex;gap:8px;align-items:center\">\n            <div class=\"dot current\"></div><div class=\"muted\">current / being processed</div>\n          </div>\n          <div style=\"display:flex;gap:8px;align-items:center\">\n            <div class=\"dot placed\" style=\"margin-left:6px\"></div><div class=\"muted\">placed</div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"arrays\">\n        <div class=\"array-row\">\n          <div class=\"array-title\"><div>Input Array</div><div class=\"muted\">indices below</div></div>\n          <div class=\"boxes\" id=\"inputBoxes\" aria-label=\"Input array\"></div>\n        </div>\n\n        <div class=\"array-row\">\n          <div class=\"array-title\"><div>Counts Array (0..k)</div><div class=\"muted\">counts & cumulative during phase</div></div>\n          <div class=\"boxes\" id=\"countBoxes\" aria-label=\"Counts array\"></div>\n        </div>\n\n        <div class=\"array-row\">\n          <div class=\"array-title\"><div>Output Array</div><div class=\"muted\">built gradually</div></div>\n          <div class=\"boxes\" id=\"outBoxes\" aria-label=\"Output array\"></div>\n        </div>\n      </div>\n\n      <div style=\"margin-top:8px;display:flex;gap:12px;align-items:center;justify-content:space-between\">\n        <div class=\"muted\">Tip: Click \"Record\" to compute an animation timeline you can step through.</div>\n        <div class=\"muted\">Values highlighted as they change. Final output shows sorted array.</div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n  // Counting Sort Visualizer\n  (function(){\n    // DOM elements\n    const arrInput = document.getElementById('arrInput');\n    const nInput = document.getElementById('nInput');\n    const kInput = document.getElementById('kInput');\n    const genBtn = document.getElementById('genRnd');\n    const useCustom = document.getElementById('useCustom');\n    const recordBtn = document.getElementById('recordBtn');\n    const resetBtn = document.getElementById('resetBtn');\n    const stableToggle = document.getElementById('stableToggle');\n    const copyBack = document.getElementById('copyBack');\n    const inputBoxes = document.getElementById('inputBoxes');\n    const countBoxes = document.getElementById('countBoxes');\n    const outBoxes = document.getElementById('outBoxes');\n    const status = document.getElementById('status');\n    const stepDesc = document.getElementById('stepDesc');\n    const curStepLabel = document.getElementById('curStep');\n    const totalStepsLabel = document.getElementById('totalSteps');\n    const playBtn = document.getElementById('playBtn');\n    const backBtn = document.getElementById('backBtn');\n    const fwdBtn = document.getElementById('fwdBtn');\n    const stepBack = document.getElementById('stepBack');\n    const stepFwd = document.getElementById('stepFwd');\n    const speedInput = document.getElementById('speed');\n\n    let arr = [];\n    let steps = []; // snapshot steps\n    let playTimer = null;\n    let currentStep = 0;\n\n    // Helpers\n    function parseArrayInput(txt){\n      if(!txt.trim()) return [];\n      const parts = txt.split(',').map(s => s.trim()).filter(Boolean);\n      const vals = [];\n      for(const p of parts){\n        const n = Number(p);\n        if(!Number.isInteger(n)) return {error:'All values must be integers.'};\n        if(n < 0) return {error:'Values must be non-negative.'};\n        vals.push(n);\n      }\n      return {vals};\n    }\n\n    function clamp(v, a,b){ return Math.max(a, Math.min(b, v)); }\n\n    function genRandomArray(n,k){\n      const out = [];\n      for(let i=0;i<n;i++){\n        out.push(Math.floor(Math.random()*(k+1)));\n      }\n      return out;\n    }\n\n    function setStatus(txt){\n      status.textContent = 'Status: ' + txt;\n    }\n\n    function renderSnapshot(step){\n      if(!step) return;\n      const s = step;\n      // Input\n      renderBoxes(inputBoxes, s.arr, {\n        highlightIndex: s.currentIndex,\n        highlightLabel: s.phase === 'count' ? 'counting' : (s.phase === 'place' ? 'placing' : 'current'),\n        highlightValue: s.currentValue,\n        placedIndices: s.placedInputIndices || [],\n        muted: s.phase === 'place' ? s.mutedInputIndices || [] : []\n      });\n\n      // Counts\n      renderBoxes(countBoxes, s.counts, {\n        small:true,\n        highlightIndex: s.countIndex,\n        highlightLabel: s.countLabel,\n        placedIndices: s.countsPlaced || [],\n        muted: s.phase === 'init' ? [] : []\n      });\n\n      // Output\n      renderBoxes(outBoxes, s.out, {\n        small:false,\n        highlightIndex: s.outputIndex,\n        placedIndices: s.placedOutputIndices || [],\n        muted: s.mutedOutputIndices || []\n      });\n\n      // Step info\n      stepDesc.innerHTML = s.desc || '';\n      curStepLabel.textContent = currentStep;\n      totalStepsLabel.textContent = steps.length-1;\n    }\n\n    function renderBoxes(container, arrayVals, opts = {}){\n      container.innerHTML = '';\n      const small = !!opts.small;\n      const highlightIndex = typeof opts.highlightIndex === 'number' ? opts.highlightIndex : null;\n      const placed = new Set((opts.placedIndices || []).map(i=>i));\n      const muted = new Set((opts.muted || []).map(i=>i));\n      arrayVals.forEach((v,i)=>{\n        const div = document.createElement('div');\n        div.className = 'cell' + (small? ' small':'');\n        if(i === highlightIndex) div.classList.add('highlight');\n        if(placed.has(i)) div.classList.add('placed');\n        if(muted.has(i)) div.classList.add('muted-cell');\n        const val = document.createElement('div');\n        val.className = 'val';\n        val.textContent = (v===null || typeof v === 'undefined') ? '' : v;\n        const idx = document.createElement('div');\n        idx.className = 'idx';\n        idx.textContent = i;\n        div.appendChild(val);\n        div.appendChild(idx);\n        container.appendChild(div);\n      });\n    }\n\n    // Build snapshots (steps) for counting sort\n    function recordCountingSort(initialArr, k, options){\n      // options: stable(bool), copyBack(bool)\n      const snapshots = [];\n      const n = initialArr.length;\n      const arrCopy = initialArr.slice();\n      const counts = new Array(k+1).fill(0);\n      const out = new Array(n).fill(null);\n\n      // helper to push snapshot\n      function push(desc, phase, extras = {}){\n        snapshots.push({\n          desc,\n          phase,\n          arr: arrCopy.slice(),\n          counts: counts.slice(),\n          out: out.slice(),\n          currentIndex: typeof extras.currentIndex === 'number' ? extras.currentIndex : null,\n          currentValue: typeof extras.currentValue === 'number' ? extras.currentValue : null,\n          countIndex: typeof extras.countIndex === 'number' ? extras.countIndex : null,\n          outputIndex: typeof extras.outputIndex === 'number' ? extras.outputIndex : null,\n          placedOutputIndices: extras.placedOutputIndices ? extras.placedOutputIndices.slice() : [],\n          placedInputIndices: extras.placedInputIndices ? extras.placedInputIndices.slice() : [],\n          countsPlaced: extras.countsPlaced ? extras.countsPlaced.slice() : [],\n          mutedInputIndices: extras.mutedInputIndices ? extras.mutedInputIndices.slice() : [],\n          mutedOutputIndices: extras.mutedOutputIndices ? extras.mutedOutputIndices.slice() : [],\n          countLabel: extras.countLabel || null\n        });\n      }\n\n      // Initial snapshot\n      push('Initial arrays. Counts initialized to 0.', 'init');\n\n      // Counting occurrences\n      for(let i=0;i<n;i++){\n        const v = arrCopy[i];\n        counts[v]++;\n        push(`Counting: read arr[${i}] = ${v} → increment counts[${v}] (now ${counts[v]})`, 'count', {\n          currentIndex:i,\n          currentValue:v,\n          countIndex:v,\n          countsPlaced: [v]\n        });\n      }\n\n      // Cumulative (prefix sums)\n      push('Counts complete. Now compute cumulative counts (prefix sums).', 'cumulative');\n      for(let i=1;i<=k;i++){\n        counts[i] += counts[i-1];\n        push(`Cumulative: counts[${i}] += counts[${i-1}] → ${counts[i]}`, 'cumulative', {\n          countIndex: i,\n          countLabel: `counts[${i}] = ${counts[i]}`\n        });\n      }\n\n      // Build output: stable placement: if stable, iterate from right to left; else left to right (not stable)\n      push('Begin building output array.', 'place');\n      if(options.stable){\n        const placedOutput = [];\n        for(let i=n-1;i>=0;i--){\n          const v = arrCopy[i];\n          counts[v]--;\n          const pos = counts[v];\n          out[pos] = v;\n          placedOutput.push(pos);\n          push(`Place: arr[${i}] = ${v} → decrement counts[${v}] -> ${counts[v]}, place at out[${pos}]`, 'place', {\n            currentIndex:i,\n            currentValue:v,\n            countIndex:v,\n            outputIndex:pos,\n            placedOutputIndices: placedOutput.slice(),\n            mutedInputIndices: (new Array(n)).fill(null).map((_,j)=> j< i ? j : null).filter(x=>x!==null)\n          });\n        }\n      } else {\n        // not stable: left-to-right placement using counts as next index\n        const placedOutput = [];\n        for(let i=0;i<n;i++){\n          const v = arrCopy[i];\n          const pos = counts[v] - 1 - (counts[v]-counts[v]); // this is messy; simpler: we can use a pointer array\n          // simpler approach: build pointers from cumulative: we'll convert counts to starting positions\n          // For non-stable, we can compute starts\n        }\n        // For clarity, implement non-stable as placing left-to-right using an auxiliary pointers array.\n        // Recompute counts from scratch to get frequencies\n        const freq = new Array(k+1).fill(0);\n        for(let j=0;j<n;j++) freq[arrCopy[j]]++;\n        const ptr = new Array(k+1).fill(0);\n        let acc = 0;\n        for(let j=0;j<=k;j++){ ptr[j] = acc; acc += freq[j]; }\n        push('Non-stable placement will place left→right using start pointers.', 'place');\n        const placedOutput = [];\n        for(let i=0;i<n;i++){\n          const v = arrCopy[i];\n          const pos = ptr[v];\n          out[pos] = v;\n          ptr[v]++;\n          placedOutput.push(pos);\n          push(`Place (non-stable): arr[${i}] = ${v} → write at out[${pos}]`, 'place', {\n            currentIndex:i,\n            currentValue:v,\n            outputIndex:pos,\n            placedOutputIndices: placedOutput.slice()\n          });\n        }\n      }\n\n      // Optionally copy back to original array\n      if(options.copyBack){\n        push('Copying output back to input array (final sorted result).', 'final-copy', {\n          placedInputIndices: (new Array(n)).fill(0).map((_,i)=>i)\n        });\n        // copy\n        for(let i=0;i<n;i++) arrCopy[i] = out[i];\n        push('Final: input array replaced by sorted output.', 'done');\n      } else {\n        push('Final: sorted array is in the output array (input unchanged).', 'done');\n      }\n\n      // Prepend a dummy zero index so steps start from 0 for convenience\n      // We'll keep snapshots as-is and set currentStep pointer starting at 0 as first snapshot index 0\n      return snapshots;\n    }\n\n    // UI event handlers\n    genBtn.addEventListener('click', ()=>{\n      const n = clamp(parseInt(nInput.value) || 0, 1, 40);\n      const k = clamp(parseInt(kInput.value) || 0, 0, 100);\n      arr = genRandomArray(n,k);\n      arrInput.value = arr.join(',');\n      setStatus('Random array generated.');\n    });\n\n    useCustom.addEventListener('click', ()=>{\n      const parsed = parseArrayInput(arrInput.value);\n      if(parsed.error){\n        alert(parsed.error);\n        return;\n      }\n      arr = parsed.vals.slice();\n      nInput.value = arr.length;\n      const maxv = arr.length ? Math.max(...arr) : 0;\n      kInput.value = Math.max(parseInt(kInput.value||0), maxv);\n      setStatus('Using custom array from text.');\n    });\n\n    recordBtn.addEventListener('click', ()=>{\n      // create arr from text if needed\n      const parsed = parseArrayInput(arrInput.value);\n      if(parsed.error){\n        alert(parsed.error);\n        return;\n      }\n      arr = parsed.vals.slice();\n      const k = clamp(parseInt(kInput.value) || 0, 0, 500);\n      if(arr.some(v => v > k)){\n        if(!confirm(`Some values are greater than k=${k}. Increase k automatically to ${Math.max(...arr)}?`)){\n          return;\n        } else {\n          kInput.value = Math.max(...arr);\n        }\n      }\n      const options = { stable: !!stableToggle.checked, copyBack: !!copyBack.checked };\n      setStatus('Recording steps...');\n      steps = recordCountingSort(arr, parseInt(kInput.value), options);\n      // Add a small sentinel step 0 that shows initial (already there)\n      currentStep = 0;\n      totalStepsLabel.textContent = Math.max(0, steps.length-1);\n      curStepLabel.textContent = currentStep;\n      setStatus('Steps recorded. Ready.');\n      renderSnapshot(steps[currentStep]);\n    });\n\n    // Step controls\n    function goToStep(i){\n      if(!steps || steps.length === 0) return;\n      i = clamp(i, 0, steps.length-1);\n      currentStep = i;\n      renderSnapshot(steps[currentStep]);\n    }\n\n    stepFwd.addEventListener('click', ()=>{\n      goToStep(currentStep+1);\n    });\n    stepBack.addEventListener('click', ()=>{\n      goToStep(currentStep-1);\n    });\n    backBtn.addEventListener('click', ()=>{\n      goToStep(0);\n    });\n    fwdBtn.addEventListener('click', ()=>{\n      goToStep(steps.length-1);\n    });\n\n    playBtn.addEventListener('click', ()=>{\n      if(!steps || steps.length === 0) return;\n      if(playTimer){\n        // stop\n        clearInterval(playTimer); playTimer = null;\n        playBtn.textContent = '▶ Play';\n        setStatus('Paused.');\n      } else {\n        playBtn.textContent = '❚❚ Pause';\n        setStatus('Playing...');\n        const speed = parseInt(speedInput.value);\n        playTimer = setInterval(()=>{\n          if(currentStep < steps.length-1){\n            currentStep++;\n            renderSnapshot(steps[currentStep]);\n          } else {\n            clearInterval(playTimer); playTimer = null;\n            playBtn.textContent = '▶ Play';\n            setStatus('Finished.');\n          }\n        }, speed);\n      }\n    });\n\n    speedInput.addEventListener('input', ()=>{\n      if(playTimer){\n        clearInterval(playTimer);\n        playTimer = null;\n        playBtn.textContent = '▶ Play';\n        setStatus('Speed changed; playback stopped. Press Play again.');\n      }\n    });\n\n    resetBtn.addEventListener('click', ()=>{\n      steps = [];\n      currentStep = 0;\n      inputBoxes.innerHTML = '';\n      countBoxes.innerHTML = '';\n      outBoxes.innerHTML = '';\n      curStepLabel.textContent = 0;\n      totalStepsLabel.textContent = 0;\n      stepDesc.textContent = 'Prepare by recording steps...';\n      setStatus('Reset.');\n      playBtn.textContent = '▶ Play';\n      if(playTimer){ clearInterval(playTimer); playTimer = null; }\n    });\n\n    // initial render\n    setStatus('Idle. Enter array and press Record.');\n    // Preload default parsed array\n    (function initDefault(){\n      const parsed = parseArrayInput(arrInput.value);\n      if(!parsed.error){\n        arr = parsed.vals.slice();\n        const k = parseInt(kInput.value) || (arr.length?Math.max(...arr):0);\n        // render minimal view\n        const dummyCounts = new Array(k+1).fill(0);\n        const dummyOut = new Array(arr.length).fill(null);\n        renderBoxes(inputBoxes, arr);\n        renderBoxes(countBoxes, dummyCounts, {small:true});\n        renderBoxes(outBoxes, dummyOut);\n      }\n    })();\n\n  })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Counting Sort"
    }
  ],
  "topic": "Counting Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}