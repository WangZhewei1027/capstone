{
  "id": "cc1dad51-ca65-11f0-96a8-05e9de15890f",
  "timestamp": "2025-11-26T01:21:16.153Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Bubble Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#60a5fa;\n      --muted:#94a3b8;\n      --good:#34d399;\n      --danger:#fb7185;\n      --bar:#60a5fa;\n      --bar-compare:#f59e0b;\n      --bar-swap:#ef4444;\n      --bar-sorted:#10b981;\n      color-scheme: dark;\n    }\n    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial;}\n    html,body{height:100%;margin:0;background:linear-gradient(180deg,#061026 0%, #071426 100%);color:#e6eef8}\n    .wrap{max-width:1100px;margin:28px auto;padding:20px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}\n    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}\n    h1{font-size:20px;margin:0}\n    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center}\n    .panel{padding:12px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}\n    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}\n    input[type=\"range\"]{width:160px}\n    .buttons{display:flex;gap:8px;flex-wrap:wrap}\n    button{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 12px;border-radius:8px;cursor:pointer}\n    button.primary{background:linear-gradient(180deg,var(--accent),#3b82f6);color:#021225;border:font-weight:600}\n    button.warn{background:linear-gradient(180deg,var(--danger),#ef4444);color:white}\n    button:disabled{opacity:0.45;cursor:not-allowed}\n    .visual{margin-top:18px;padding:14px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));min-height:260px;display:flex;align-items:flex-end;gap:6px;overflow:hidden}\n    .bar{flex:1 1 auto;margin:0 2px;background:var(--bar);border-radius:6px 6px 4px 4px;display:flex;align-items:flex-end;justify-content:center;position:relative;transition:height 160ms linear, background 120ms}\n    .bar .val{font-size:11px;color:rgba(0,0,0,0.7);padding:4px 6px;border-radius:6px 6px 0 0;background:rgba(255,255,255,0.9);transform:translateY(4px)}\n    .bar.compare{background:var(--bar-compare)}\n    .bar.swap{background:var(--bar-swap)}\n    .bar.sorted{background:var(--bar-sorted)}\n    .info{display:flex;gap:12px;align-items:center;margin-top:12px;flex-wrap:wrap}\n    .stat{padding:10px 12px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-size:13px;color:var(--muted)}\n    .bottom{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap}\n    .array-input{width:360px}\n    input[type=\"text\"]{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}\n    .small{font-size:13px}\n    pre{background:rgba(0,0,0,0.25);padding:12px;border-radius:8px;overflow:auto;max-height:260px}\n    .code-line{opacity:0.7}\n    .code-line.active{background:linear-gradient(90deg,rgba(255,255,255,0.03),rgba(255,255,255,0.018));opacity:1;padding:2px 6px;border-radius:6px}\n    footer{margin-top:18px;color:var(--muted);font-size:12px}\n    @media (max-width:720px){\n      .array-input{width:100%}\n      .controls{flex-direction:column;align-items:stretch}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <header>\n      <h1>Bubble Sort — Interactive Visualizer</h1>\n      <div style=\"margin-left:auto;color:var(--muted);font-size:13px\">Compare & swap adjacent elements until array is sorted</div>\n    </header>\n\n    <div class=\"controls\">\n      <div class=\"panel\">\n        <label>Array size: <span id=\"sizeLabel\">12</span></label>\n        <input id=\"size\" type=\"range\" min=\"4\" max=\"64\" value=\"12\"/>\n      </div>\n\n      <div class=\"panel\">\n        <label>Speed (ms delay per step)</label>\n        <input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"180\"/>\n        <div style=\"font-size:12px;color:var(--muted);margin-top:6px\">Delay: <span id=\"speedLabel\">180</span> ms</div>\n      </div>\n\n      <div class=\"panel\">\n        <label>Options</label>\n        <div style=\"display:flex;gap:8px;align-items:center\">\n          <label class=\"small\"><input id=\"ascending\" type=\"checkbox\" checked/> Ascending</label>\n          <label class=\"small\"><input id=\"optimized\" type=\"checkbox\" checked/> Stop early (optimized)</label>\n        </div>\n      </div>\n\n      <div class=\"panel buttons\" style=\"margin-left:auto\">\n        <button id=\"randomBtn\" class=\"primary\">Generate Random</button>\n        <button id=\"startBtn\" class=\"primary\">Start</button>\n        <button id=\"stepBtn\">Step</button>\n        <button id=\"pauseBtn\" disabled>Pause</button>\n        <button id=\"resetBtn\">Reset</button>\n      </div>\n    </div>\n\n    <div class=\"bottom\">\n      <div style=\"flex:1;min-width:320px\">\n        <label>Array (comma separated) — edit and press \"Reset\" to use</label>\n        <input id=\"arrayInput\" class=\"array-input\" type=\"text\" placeholder=\"e.g. 5,3,8,1,2\"/>\n        <div style=\"display:flex;gap:8px;margin-top:8px\">\n          <button id=\"useInputBtn\">Use Input</button>\n          <button id=\"shuffleBtn\">Shuffle Current</button>\n        </div>\n\n        <div class=\"info\">\n          <div class=\"stat\">Comparisons: <strong id=\"comparisons\">0</strong></div>\n          <div class=\"stat\">Swaps: <strong id=\"swaps\">0</strong></div>\n          <div class=\"stat\">Passes: <strong id=\"passes\">0</strong></div>\n        </div>\n\n        <div class=\"visual panel\" id=\"visual\" aria-label=\"Array visualization\">\n          <!-- Bars inserted here -->\n        </div>\n\n        <div class=\"info\" style=\"margin-top:10px\">\n          <div class=\"stat\">Current action: <strong id=\"action\">Idle</strong></div>\n          <div class=\"stat\">Last compared indices: <strong id=\"lastComp\">-</strong></div>\n        </div>\n      </div>\n\n      <div style=\"width:380px;min-width:280px\">\n        <label>Pseudocode (highlights current line)</label>\n        <pre id=\"pseudocode\" class=\"panel small\" style=\"height:220px\">\n<span class=\"code-line\" data-line=\"1\">for i from 0 to n-1</span>\n<span class=\"code-line\" data-line=\"2\">  swapped = false</span>\n<span class=\"code-line\" data-line=\"3\">  for j from 0 to n-i-2</span>\n<span class=\"code-line\" data-line=\"4\">    if a[j] > a[j+1]</span>\n<span class=\"code-line\" data-line=\"5\">      swap a[j] and a[j+1]</span>\n<span class=\"code-line\" data-line=\"6\">      swapped = true</span>\n<span class=\"code-line\" data-line=\"7\">  if not swapped: break</span>\n        </pre>\n\n        <label style=\"margin-top:10px\">Notes</label>\n        <div class=\"panel small\" style=\"padding:10px\">\n          - This visualizer shows each comparison and swap.<br>\n          - \"Optimized\" bubble sort stops early if the array becomes sorted during a pass.<br>\n          - Use \"Step\" to advance one algorithm action at a time.\n        </div>\n      </div>\n    </div>\n\n    <footer style=\"display:flex;justify-content:space-between;align-items:center\">\n      <div>© Bubble Sort Visualizer</div>\n      <div style=\"color:var(--muted)\">Tip: press Generate Random then Start</div>\n    </footer>\n  </div>\n\n<script>\n(function(){\n  // Utilities\n  const el = id => document.getElementById(id);\n  const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));\n\n  // Elements\n  const sizeRange = el('size');\n  const sizeLabel = el('sizeLabel');\n  const speedRange = el('speed');\n  const speedLabel = el('speedLabel');\n  const ascendingCb = el('ascending');\n  const optimizedCb = el('optimized');\n  const randomBtn = el('randomBtn');\n  const startBtn = el('startBtn');\n  const pauseBtn = el('pauseBtn');\n  const stepBtn = el('stepBtn');\n  const resetBtn = el('resetBtn');\n  const shuffleBtn = el('shuffleBtn');\n  const useInputBtn = el('useInputBtn');\n  const arrayInput = el('arrayInput');\n  const visual = el('visual');\n  const compsEl = el('comparisons');\n  const swapsEl = el('swaps');\n  const passesEl = el('passes');\n  const actionEl = el('action');\n  const lastCompEl = el('lastComp');\n  const pseudocodeEl = el('pseudocode');\n\n  // State\n  let array = [];\n  let initialArray = [];\n  let gen = null;\n  let running = false;\n  let timer = null;\n  let stepDelay = parseInt(speedRange.value,10);\n  let comparisons = 0, swaps = 0, passes = 0;\n  let currentHighlight = {i:-1,j:-1, type:null, sortedIndex:-1};\n\n  // Pseudocode line mapping\n  function setPseudocodeLine(n){\n    pseudocodeEl.querySelectorAll('.code-line').forEach(el=>{\n      el.classList.toggle('active', Number(el.dataset.line)===n);\n    });\n  }\n\n  // Generate random array\n  function randomArray(n){\n    const arr = [];\n    for(let i=0;i<n;i++){\n      // values 5..100 for visible bars\n      arr.push(Math.floor(Math.random()*96)+5);\n    }\n    return arr;\n  }\n\n  // Render\n  function render(){\n    visual.innerHTML='';\n    const maxVal = Math.max(...array,1);\n    const barCount = array.length;\n    array.forEach((v,idx)=>{\n      const bar = document.createElement('div');\n      bar.className='bar';\n      const h = (v/maxVal)*92; // percentage of container height\n      bar.style.height = h + '%';\n      bar.title = String(v);\n      // value label\n      const label = document.createElement('div');\n      label.className='val';\n      label.textContent = v;\n      bar.appendChild(label);\n\n      // states\n      if(currentHighlight.type === 'compare' && (idx===currentHighlight.i || idx===currentHighlight.j)){\n        bar.classList.add('compare');\n      }\n      if(currentHighlight.type === 'swap' && (idx===currentHighlight.i || idx===currentHighlight.j)){\n        bar.classList.add('swap');\n      }\n      if(currentHighlight.type === 'sorted' && idx >= currentHighlight.sortedIndex){\n        bar.classList.add('sorted');\n      }\n      visual.appendChild(bar);\n    });\n    compsEl.textContent = comparisons;\n    swapsEl.textContent = swaps;\n    passesEl.textContent = passes;\n    lastCompEl.textContent = (currentHighlight.i>=0 && currentHighlight.j>=0) ? `${currentHighlight.i}, ${currentHighlight.j}` : '-';\n  }\n\n  // Bubble sort generator: yields at each compare and swap, and at pass end\n  function* bubbleSortGen(arr, ascending=true, optimized=true){\n    let a = arr.slice(); // work on copy\n    const n = a.length;\n    let comps=0, sw=0;\n    for(let i=0;i<n;i++){\n      let swapped=false;\n      // signal start of pass\n      // inner loop\n      for(let j=0;j<n-i-1;j++){\n        // comparing j and j+1\n        yield {type:'compare', i:j, j:j+1, arr:a.slice(), comps, sw, pass:i, sortedIndex:n-i};\n        comps++;\n        const cmp = ascending ? (a[j] > a[j+1]) : (a[j] < a[j+1]);\n        if(cmp){\n          // swap\n          const tmp = a[j]; a[j]=a[j+1]; a[j+1]=tmp;\n          sw++;\n          swapped=true;\n          yield {type:'swap', i:j, j:j+1, arr:a.slice(), comps, sw, pass:i, sortedIndex:n-i};\n        }\n      }\n      passes++;\n      // end of pass: mark last element as sorted (n-i-1)\n      yield {type:'passEnd', i:-1, j:-1, arr:a.slice(), comps, sw, pass:i, sortedIndex:n-i-1};\n      if(optimized && !swapped){\n        break;\n      }\n    }\n    yield {type:'done', i:-1, j:-1, arr:a.slice(), comps, sw, pass:null, sortedIndex:0};\n  }\n\n  // Advance generator one step and update UI\n  function advanceOnce(){\n    if(!gen) return false;\n    const res = gen.next();\n    if(res.done){\n      // algorithm finished\n      const s = res.value || {};\n      if(s.arr) array = s.arr.slice();\n      comparisons = (s.comps !== undefined) ? s.comps : comparisons;\n      swaps = (s.sw !== undefined) ? s.sw : swaps;\n      currentHighlight = {i:-1,j:-1,type:'sorted',sortedIndex:0};\n      setPseudocodeLine(null);\n      render();\n      running = false;\n      stopAuto();\n      actionEl.textContent = 'Finished';\n      startBtn.disabled = true;\n      pauseBtn.disabled = true;\n      stepBtn.disabled = true;\n      return false;\n    }\n    const state = res.value;\n    // update counters from yield (they represent counts before or after)\n    comparisons = state.comps;\n    swaps = state.sw;\n    // interpret state\n    if(state.type === 'compare'){\n      currentHighlight = {i:state.i, j:state.j, type:'compare', sortedIndex:state.sortedIndex||-1};\n      actionEl.textContent = 'Comparing';\n      setPseudocodeLine(4);\n    } else if(state.type === 'swap'){\n      array = state.arr.slice();\n      currentHighlight = {i:state.i, j:state.j, type:'swap', sortedIndex:state.sortedIndex||-1};\n      actionEl.textContent = 'Swapped';\n      setPseudocodeLine(5);\n    } else if(state.type === 'passEnd'){\n      array = state.arr.slice();\n      passes = state.pass+1;\n      currentHighlight = {i:-1,j:-1,type:'sorted',sortedIndex:state.sortedIndex||-1};\n      actionEl.textContent = 'End of pass';\n      setPseudocodeLine(2);\n    } else {\n      // fallback\n      array = state.arr ? state.arr.slice() : array;\n      currentHighlight = {i:-1,j:-1,type:null,sortedIndex:-1};\n      actionEl.textContent = state.type || 'Running';\n      setPseudocodeLine(null);\n    }\n    render();\n    return true;\n  }\n\n  // Auto-run\n  function startAuto(){\n    if(running) return;\n    running = true;\n    startBtn.disabled = true;\n    pauseBtn.disabled = false;\n    stepBtn.disabled = true;\n    resetBtn.disabled = true;\n    randomBtn.disabled = true;\n    useInputBtn.disabled = true;\n    shuffleBtn.disabled = true;\n    sizeRange.disabled = true;\n    speedRange.disabled = false;\n    arrayInput.disabled = true;\n    const loop = async ()=>{\n      if(!running) return;\n      const did = advanceOnce();\n      if(!did){\n        running=false;\n        stopAuto();\n        return;\n      }\n      timer = setTimeout(loop, stepDelay);\n    };\n    timer = setTimeout(loop, stepDelay);\n  }\n\n  function stopAuto(){\n    running = false;\n    if(timer) { clearTimeout(timer); timer=null; }\n    startBtn.disabled = false;\n    pauseBtn.disabled = true;\n    stepBtn.disabled = false;\n    resetBtn.disabled = false;\n    randomBtn.disabled = false;\n    useInputBtn.disabled = false;\n    shuffleBtn.disabled = false;\n    sizeRange.disabled = false;\n    arrayInput.disabled = false;\n  }\n\n  function pauseAuto(){\n    running = false;\n    if(timer) { clearTimeout(timer); timer=null; }\n    startBtn.disabled = false;\n    pauseBtn.disabled = true;\n    stepBtn.disabled = false;\n    resetBtn.disabled = false;\n    randomBtn.disabled = false;\n    useInputBtn.disabled = false;\n    shuffleBtn.disabled = false;\n    sizeRange.disabled = false;\n    arrayInput.disabled = false;\n    actionEl.textContent = 'Paused';\n  }\n\n  // Initialize array and UI\n  function resetToInitial(useInput=false){\n    if(useInput){\n      const txt = arrayInput.value.trim();\n      if(txt){\n        try{\n          const parts = txt.split(',').map(s=>s.trim()).filter(s=>s.length>0).map(Number);\n          if(parts.some(x=>Number.isNaN(x))) throw new Error('Invalid number in input');\n          array = parts.slice();\n        }catch(e){\n          alert('Invalid input. Please enter comma separated numbers.');\n          return;\n        }\n      } else {\n        array = randomArray(parseInt(sizeRange.value,10));\n      }\n    } else {\n      array = initialArray.slice();\n    }\n    comparisons = 0; swaps = 0; passes = 0;\n    gen = null;\n    running = false;\n    currentHighlight = {i:-1,j:-1,type:null,sortedIndex:-1};\n    actionEl.textContent = 'Idle';\n    lastCompEl.textContent = '-';\n    startBtn.disabled = false;\n    pauseBtn.disabled = true;\n    stepBtn.disabled = false;\n    resetBtn.disabled = false;\n    randomBtn.disabled = false;\n    useInputBtn.disabled = false;\n    shuffleBtn.disabled = false;\n    sizeRange.disabled = false;\n    arrayInput.disabled = false;\n    render();\n    setPseudocodeLine(null);\n  }\n\n  // Event handlers\n  sizeRange.addEventListener('input', ()=>{\n    sizeLabel.textContent = sizeRange.value;\n  });\n\n  speedRange.addEventListener('input', ()=>{\n    speedLabel.textContent = speedRange.value;\n    stepDelay = parseInt(speedRange.value,10);\n  });\n\n  randomBtn.addEventListener('click', ()=>{\n    const n = parseInt(sizeRange.value,10);\n    initialArray = randomArray(n);\n    arrayInput.value = initialArray.join(', ');\n    resetToInitial(false);\n  });\n\n  shuffleBtn.addEventListener('click', ()=>{\n    // shuffle current array\n    for(let i=array.length-1;i>0;i--){\n      const j = Math.floor(Math.random()*(i+1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    initialArray = array.slice();\n    resetToInitial(false);\n  });\n\n  useInputBtn.addEventListener('click', ()=>{\n    resetToInitial(true);\n  });\n\n  startBtn.addEventListener('click', ()=>{\n    if(!gen){\n      // create new generator from current array copy\n      gen = bubbleSortGen(array.slice(), ascendingCb.checked, optimizedCb.checked);\n    }\n    startAuto();\n    actionEl.textContent = 'Running';\n  });\n\n  pauseBtn.addEventListener('click', ()=>{\n    pauseAuto();\n  });\n\n  stepBtn.addEventListener('click', ()=>{\n    if(!gen){\n      gen = bubbleSortGen(array.slice(), ascendingCb.checked, optimizedCb.checked);\n    }\n    const ok = advanceOnce();\n    if(!ok){\n      // finished\n      gen = null;\n    }\n  });\n\n  resetBtn.addEventListener('click', ()=>{\n    gen = null;\n    resetToInitial(false);\n  });\n\n  arrayInput.addEventListener('keydown', (e)=>{\n    if(e.key === 'Enter'){\n      resetToInitial(true);\n    }\n  });\n\n  // init defaults\n  function init(){\n    sizeLabel.textContent = sizeRange.value;\n    speedLabel.textContent = speedRange.value;\n    stepDelay = parseInt(speedRange.value,10);\n    initialArray = randomArray(parseInt(sizeRange.value,10));\n    arrayInput.value = initialArray.join(', ');\n    resetToInitial(false);\n  }\n\n  // Create accessibility: keyboard shortcuts\n  window.addEventListener('keydown', (e)=>{\n    if(e.ctrlKey || e.metaKey) return;\n    if(e.key === ' '){ e.preventDefault(); if(running) pauseAuto(); else startBtn.click(); }\n    if(e.key === 'ArrowRight'){ stepBtn.click(); }\n  });\n\n  // Kick off\n  init();\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}