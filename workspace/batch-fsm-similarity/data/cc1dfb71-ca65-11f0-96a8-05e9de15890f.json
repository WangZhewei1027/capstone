{
  "id": "cc1dfb71-ca65-11f0-96a8-05e9de15890f",
  "timestamp": "2025-11-26T01:22:02.389Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Radix Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\"/>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n<title>Radix Sort Visualizer (LSD) — Interactive Demo</title>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#4f46e5;\n    --muted:#94a3b8;\n    --card:#0b1220;\n    --box:#111827;\n    --good:#10b981;\n    --danger:#ef4444;\n  }\n  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071129);color:#e6eef6;font-family:Inter,ui-sans-serif,system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}\n  .container{max-width:1100px;margin:28px auto;padding:18px;}\n  header{display:flex;align-items:center;gap:12px;margin-bottom:14px;}\n  header h1{font-size:20px;margin:0;}\n  .controls{display:flex;flex-wrap:wrap;gap:8px;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;margin-bottom:14px;}\n  .controls label{font-size:13px;color:var(--muted);display:flex;flex-direction:column;}\n  input[type=\"text\"]{min-width:260px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;}\n  button{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:0;font-weight:600;cursor:pointer;}\n  button.secondary{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04);}\n  .small{padding:6px 8px;font-size:13px;}\n  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;}\n  .visual{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);}\n  .array-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:12px;}\n  .num{min-width:40px;min-height:40px;padding:6px 8px;border-radius:8px;background:linear-gradient(180deg,#0b1220,#091021);display:flex;align-items:center;justify-content:center;font-weight:700;border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 14px rgba(2,6,23,0.6);position:relative;}\n  .num.small{min-width:34px;min-height:34px;font-size:14px;}\n  .panel{display:flex;gap:12px;align-items:flex-start;margin-top:12px;}\n  .buckets{display:flex;gap:8px;flex-wrap:wrap;align-items:flex-start;padding:6px;}\n  .bucket{min-width:72px;min-height:70px;background:#071428;border-radius:8px;padding:8px;border:1px solid rgba(255,255,255,0.03);}\n  .bucket h4{margin:0;color:var(--muted);font-size:12px;text-align:center;}\n  .bucket .bucket-content{display:flex;flex-direction:column;gap:6px;align-items:center;margin-top:8px;min-height:18px;}\n  .status{margin-top:12px;color:var(--muted);font-size:13px;}\n  .legend{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:13px;margin-left:auto;}\n  .controls-group{display:flex;gap:8px;align-items:center;}\n  .speed{width:140px;}\n  .info{margin-top:12px;color:var(--muted);font-size:13px;line-height:1.4;}\n  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;}\n  pre{background:rgba(255,255,255,0.02);padding:12px;border-radius:8px;overflow:auto;color:#cfe8ff;font-size:13px;}\n  .footer{margin-top:14px;color:var(--muted);font-size:13px;display:flex;gap:12px;align-items:center;}\n  .badge{font-size:12px;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.03);}\n  .muted{color:var(--muted);}\n  .controls .help{font-size:12px;color:var(--muted);margin-left:8px;}\n  .highlight{background:linear-gradient(90deg, rgba(79,70,229,0.12), rgba(79,70,229,0.03));border:1px solid rgba(79,70,229,0.12);padding:8px;border-radius:8px;}\n  .checkbox{display:flex;gap:6px;align-items:center;cursor:pointer;}\n  /* small responsive */\n  @media (max-width:900px){\n    .grid{grid-template-columns:1fr; }\n  }\n</style>\n</head>\n<body>\n<div class=\"container\">\n  <header>\n    <svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden><path d=\"M4 6h16M4 12h16M4 18h16\" stroke=\"#7c83ff\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>\n    <div>\n      <h1>Radix Sort Visualizer (LSD) — Interactive Demo</h1>\n      <div class=\"muted\" style=\"font-size:13px;margin-top:4px;\">Least Significant Digit (LSD) radix sort for integers — step-through animation.</div>\n    </div>\n  </header>\n\n  <div class=\"controls\">\n    <div style=\"display:flex;gap:8px;align-items:center;flex-wrap:wrap;\">\n      <label>\n        Input numbers (comma/space separated)\n        <input id=\"inputArray\" type=\"text\" value=\"170, 45, 75, 90, 802, 24, 2, 66\" />\n      </label>\n\n      <label>\n        Base (radix)\n        <select id=\"radixSelect\" style=\"padding:8px;border-radius:8px;background:transparent;color:inherit;border:1px solid rgba(255,255,255,0.04);\">\n          <option value=\"2\">2 (binary)</option>\n          <option value=\"4\">4</option>\n          <option value=\"8\">8</option>\n          <option value=\"10\" selected>10 (decimal)</option>\n          <option value=\"16\">16 (hex)</option>\n        </select>\n      </label>\n\n      <label style=\"min-width:130px;\">\n        Random array\n        <div style=\"display:flex;gap:6px;\">\n          <input id=\"randCount\" type=\"number\" value=\"12\" min=\"1\" style=\"width:72px;padding:6px;border-radius:8px;background:transparent;color:inherit;border:1px solid rgba(255,255,255,0.04);\" />\n          <input id=\"randMax\" type=\"number\" value=\"999\" min=\"1\" style=\"width:72px;padding:6px;border-radius:8px;background:transparent;color:inherit;border:1px solid rgba(255,255,255,0.04);\" />\n        </div>\n      </label>\n\n      <div class=\"controls-group\">\n        <button id=\"btnRandom\" class=\"small secondary\">Randomize</button>\n        <button id=\"btnLoad\" class=\"small\">Load & Prepare</button>\n      </div>\n    </div>\n\n    <div style=\"margin-left:auto;display:flex;gap:8px;align-items:center\">\n      <div style=\"display:flex;gap:8px;align-items:center\">\n        <label style=\"display:flex;flex-direction:column;align-items:flex-end;\">\n          Speed\n          <input id=\"speed\" class=\"speed\" type=\"range\" min=\"0.2\" max=\"2.5\" step=\"0.1\" value=\"1\" />\n        </label>\n      </div>\n\n      <div class=\"controls-group\">\n        <button id=\"btnStart\" class=\"small\">Play</button>\n        <button id=\"btnStep\" class=\"small secondary\">Step</button>\n        <button id=\"btnBack\" class=\"small secondary\">Back</button>\n        <button id=\"btnReset\" class=\"small secondary\">Reset</button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"visual\">\n    <div style=\"display:flex;align-items:center;gap:12px;\">\n      <div class=\"badge\">LSD Radix Sort</div>\n      <div class=\"muted\">Stable, digit-by-digit (least significant to most)</div>\n      <div class=\"legend\">\n        <div class=\"muted\">Radix (base): <strong id=\"radixLabel\">10</strong></div>\n      </div>\n    </div>\n\n    <div style=\"margin-top:12px;\">\n      <div class=\"muted\">Initial array:</div>\n      <div id=\"initialArray\" class=\"array-row\"></div>\n    </div>\n\n    <div class=\"grid\">\n      <div>\n        <div class=\"muted\" style=\"margin-bottom:8px;\">Active group (sorting):</div>\n        <div id=\"activePanel\" class=\"panel highlight\" style=\"min-height:160px;padding:12px;border-radius:10px;\">\n          <div style=\"flex:1;\">\n            <div class=\"muted\">Group label: <span id=\"groupLabel\">—</span></div>\n            <div id=\"groupArray\" class=\"array-row\" style=\"margin-top:8px;\"></div>\n          </div>\n\n          <div style=\"width:420px;\">\n            <div class=\"muted\">Buckets:</div>\n            <div id=\"buckets\" class=\"buckets\" style=\"margin-top:8px;\"></div>\n          </div>\n        </div>\n\n        <div class=\"status\"><span id=\"statusText\">Press \"Load & Prepare\" to build events.</span></div>\n      </div>\n\n      <div>\n        <div class=\"muted\" style=\"margin-bottom:8px;\">Final result (combined):</div>\n        <div class=\"visual\" style=\"padding:10px;\">\n          <div id=\"resultArray\" class=\"array-row\"></div>\n          <div class=\"info\" style=\"margin-top:10px;\">\n            This demo handles negative integers by sorting negative and non-negative groups separately:\n            negative values are sorted by their absolute values, then reversed and re-negated so that the overall array is correctly ascending.\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div style=\"margin-top:12px;\">\n      <div style=\"display:flex;gap:12px;align-items:flex-start;\">\n        <div style=\"flex:1;\">\n          <h3 style=\"margin:6px 0 8px 0;\">Pseudocode (LSD Radix Sort)</h3>\n          <pre>\nfunction radixSortLSD(array, base):\n  for d = 0 to maxDigits-1:\n    create base buckets (0..base-1)\n    for each value in array (in order):          // stable placement\n      digit = (value / base^d) % base\n      buckets[digit].append(value)\n    array = concatenate buckets in order\n  return array\n          </pre>\n        </div>\n        <div style=\"width:340px;\">\n          <h3 style=\"margin:6px 0 8px 0;\">Complexity & notes</h3>\n          <div class=\"muted\" style=\"font-size:13px;line-height:1.4;\">\n            - Time: O(d*(n + b)) where d = number of digits, b = radix (base).<br>\n            - Space: O(n + b).<br>\n            - Stable sort; works well for integers and fixed-length keys.<br>\n            - Negative values: handled by splitting negatives and positives.\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"footer\">\n      <div class=\"muted\">Use Step / Play to observe placements and collections per digit.</div>\n    </div>\n  </div>\n</div>\n\n<script>\n(() => {\n  // Utility helpers\n  const $ = id => document.getElementById(id);\n  const randInt = (min,max) => Math.floor(Math.random()*(max-min+1))+min;\n\n  // DOM elements\n  const inputArray = $('inputArray');\n  const btnRandom = $('btnRandom');\n  const btnLoad = $('btnLoad');\n  const btnStart = $('btnStart');\n  const btnStep = $('btnStep');\n  const btnBack = $('btnBack');\n  const btnReset = $('btnReset');\n  const speedRange = $('speed');\n  const radixSelect = $('radixSelect');\n  const radLabel = $('radixLabel');\n  const initialArrayDiv = $('initialArray');\n  const groupArrayDiv = $('groupArray');\n  const bucketsDiv = $('buckets');\n  const statusText = $('statusText');\n  const resultArrayDiv = $('resultArray');\n  const groupLabel = $('groupLabel');\n\n  const randCount = $('randCount');\n  const randMax = $('randMax');\n\n  // State\n  let inputNumbers = [];\n  let events = []; // sequence of events for animation\n  let eventIndex = -1;\n  let playing = false;\n  let playTimer = null;\n  let speed = parseFloat(speedRange.value) || 1;\n  let base = parseInt(radixSelect.value,10) || 10;\n\n  // Colors for items by value (consistent mapping)\n  function colorForValue(v){\n    // deterministic color by value\n    const seed = Math.abs(v*2654435761) >>> 0;\n    const r = 80 + (seed % 120);\n    const g = 90 + ((seed>>8) % 90);\n    const b = 130 + ((seed>>16) % 80);\n    return `rgb(${r},${g},${b})`;\n  }\n\n  function parseInput(text){\n    if(!text) return [];\n    const parts = text.split(/[\\s,;]+/).filter(s=>s.trim().length>0);\n    const nums = [];\n    for(const p of parts){\n      const n = Number(p);\n      if(Number.isFinite(n) && Number.isInteger(n)){\n        nums.push(n);\n      }\n    }\n    return nums;\n  }\n\n  function renderInitialArray(arr){\n    initialArrayDiv.innerHTML = '';\n    for(const v of arr){\n      const el = document.createElement('div');\n      el.className = 'num';\n      el.textContent = v;\n      el.style.background = `linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.1)), ${colorForValue(v)}`;\n      el.style.color = '#fff';\n      initialArrayDiv.appendChild(el);\n    }\n  }\n\n  function clearActivePanel(){\n    groupArrayDiv.innerHTML = '';\n    bucketsDiv.innerHTML = '';\n  }\n\n  function renderArrayTo(div, arr, small=false){\n    div.innerHTML = '';\n    for(const v of arr){\n      const el = document.createElement('div');\n      el.className = 'num' + (small? ' small':'');\n      el.textContent = v;\n      el.style.background = `linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.1)), ${colorForValue(v)}`;\n      el.style.color = '#fff';\n      div.appendChild(el);\n    }\n  }\n\n  function createBucketsDom(b){\n    bucketsDiv.innerHTML = '';\n    for(let i=0;i<b;i++){\n      const bucket = document.createElement('div');\n      bucket.className = 'bucket';\n      const h = document.createElement('h4');\n      h.textContent = 'bucket ' + i;\n      bucket.appendChild(h);\n      const content = document.createElement('div');\n      content.className = 'bucket-content';\n      bucket.appendChild(content);\n      bucketsDiv.appendChild(bucket);\n    }\n  }\n\n  // Build events for LSD radix sort for one group (non-negative integers, values >= 0)\n  function buildEventsLSDForGroup(arr, base, groupName){\n    // arr assumed non-negative integers\n    const events = [];\n    if(arr.length === 0){\n      return events;\n    }\n    const maxVal = Math.max(...arr);\n    const maxDigits = Math.max(1, Math.ceil(Math.log(maxVal+1) / Math.log(base)));\n    let state = arr.slice();\n\n    for(let d=0; d<maxDigits; d++){\n      // placement events: one per element in current order\n      const buckets = Array.from({length: base}, ()=>[]);\n      for(let i=0;i<state.length;i++){\n        const value = state[i];\n        const digit = Math.floor(value / Math.pow(base, d)) % base;\n        // push place event\n        events.push({\n          type: 'place',\n          group: groupName,\n          pass: d,\n          value,\n          digit,\n          idx: i\n        });\n        buckets[digit].push(value);\n      }\n      // after placements, collect event\n      const newArray = [].concat(...buckets);\n      events.push({\n        type: 'collect',\n        group: groupName,\n        pass: d,\n        newArray: newArray.slice()\n      });\n      state = newArray;\n    }\n    // final state event\n    events.push({\n      type: 'groupDone',\n      group: groupName,\n      finalArray: state.slice()\n    });\n    return events;\n  }\n\n  // Build combined events for entire input (handles negatives by splitting)\n  function buildAllEvents(arr, base){\n    const positives = arr.filter(x=>x>=0);\n    const negatives = arr.filter(x=>x<0).map(x=>-x); // store absolute values for sorting\n    const allEvents = [];\n\n    // initial separation event\n    allEvents.push({type:'separate', positives: positives.slice(), negatives: negatives.slice()});\n\n    // sort negatives (their values are absolute)\n    if(negatives.length>0){\n      allEvents.push({type:'focus', group: 'negatives', note: 'Sorting negative values by absolute digits'});\n      const evNeg = buildEventsLSDForGroup(negatives, base, 'negatives');\n      allEvents.push(...evNeg);\n      // after groupDone there will be finalArray of absolute values (sorted ascending by abs)\n      // we will need to reverse and reapply negative sign when combining.\n    }\n\n    // sort positives\n    if(positives.length>0){\n      allEvents.push({type:'focus', group: 'positives', note: 'Sorting non-negative values'});\n      const evPos = buildEventsLSDForGroup(positives, base, 'positives');\n      allEvents.push(...evPos);\n    }\n\n    // combine event: take sorted negatives (reverse and negate), then sorted positives\n    allEvents.push({type:'combine'});\n    allEvents.push({type:'done'});\n    return allEvents;\n  }\n\n  // Rendering & animation of events\n  let model = {\n    separatedPos: [],\n    separatedNegAbs: [],\n    sortedPos: [],\n    sortedNegAbs: []\n  };\n\n  function resetModel(){\n    model = {\n      separatedPos: [],\n      separatedNegAbs: [],\n      sortedPos: [],\n      sortedNegAbs: []\n    };\n  }\n\n  function prepareAndBuild(){\n    base = parseInt(radixSelect.value,10) || 10;\n    radLabel.textContent = base;\n    inputNumbers = parseInput(inputArray.value);\n    if(inputNumbers.length === 0){\n      statusText.textContent = 'No valid integers found in input.';\n      return;\n    }\n    renderInitialArray(inputNumbers);\n    clearActivePanel();\n    resultArrayDiv.innerHTML = '';\n    resetModel();\n    events = buildAllEvents(inputNumbers, base);\n    eventIndex = -1;\n    playing = false;\n    updateControlButtons();\n    statusText.textContent = `Prepared ${events.length} events. Ready to play.`;\n  }\n\n  function stepForward(){\n    if(eventIndex >= events.length - 1) return;\n    eventIndex++;\n    applyEvent(events[eventIndex]);\n    updateControlButtons();\n  }\n\n  function stepBack(){\n    // For simplicity, reset to start and replay up to eventIndex-1\n    if(eventIndex <= -1) return;\n    eventIndex--;\n    // Reset visuals and model, then replay events up to eventIndex\n    clearActivePanel();\n    resultArrayDiv.innerHTML = '';\n    renderInitialArray(inputNumbers);\n    resetModel();\n    clearBucketsAndGroup();\n    for(let i=0;i<=eventIndex;i++){\n      applyEvent(events[i], {replayMode:true});\n    }\n    updateControlButtons();\n  }\n\n  function clearBucketsAndGroup(){\n    groupLabel.textContent = '—';\n    groupArrayDiv.innerHTML = '';\n    bucketsDiv.innerHTML = '';\n  }\n\n  function applyEvent(ev, opts={}){\n    opts = opts || {};\n    switch(ev.type){\n      case 'separate':\n        // show separated arrays\n        model.separatedPos = ev.positives.slice();\n        model.separatedNegAbs = ev.negatives.slice();\n        groupLabel.textContent = 'Separation';\n        renderArrayTo(groupArrayDiv, ['negatives:',''] , true);\n        // show separated as two groups by rendering them in the active array area\n        // We'll show negative abs and positives below in active area temporarily\n        createBucketsDom(base);\n        // Render both groups in active area (negatives left, positives right)\n        groupArrayDiv.innerHTML = '';\n        const negLabel = document.createElement('div'); negLabel.className='muted'; negLabel.textContent='Negatives (abs):';\n        const posLabel = document.createElement('div'); posLabel.className='muted'; posLabel.textContent='Positives:';\n        groupArrayDiv.appendChild(negLabel);\n        renderArrayTo(groupArrayDiv, model.separatedNegAbs);\n        groupArrayDiv.appendChild(posLabel);\n        renderArrayTo(groupArrayDiv, model.separatedPos);\n        statusText.textContent = `Separated ${model.separatedNegAbs.length} negatives and ${model.separatedPos.length} non-negatives.`;\n        break;\n\n      case 'focus':\n        // prepare panel for group\n        createBucketsDom(base);\n        groupLabel.textContent = ev.group === 'negatives' ? 'NEGATIVES (abs)' : 'POSITIVES';\n        if(ev.group === 'negatives'){\n          renderArrayTo(groupArrayDiv, model.separatedNegAbs);\n        } else {\n          renderArrayTo(groupArrayDiv, model.separatedPos);\n        }\n        statusText.textContent = ev.note || `Focusing on ${ev.group}`;\n        break;\n\n      case 'place':\n        // place value into a bucket (append)\n        {\n          const bucketBoxes = bucketsDiv.querySelectorAll('.bucket');\n          // find bucket content by digit\n          const bucketContent = bucketBoxes[ev.digit].querySelector('.bucket-content');\n          // create element\n          const node = document.createElement('div');\n          node.className = 'num small';\n          node.textContent = ev.value;\n          node.style.background = `linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.1)), ${colorForValue(ev.value * (ev.group==='negatives'? -1:1))}`;\n          node.style.color = '#fff';\n          // append with slight opacity animation\n          node.style.opacity = '0';\n          bucketContent.appendChild(node);\n          requestAnimationFrame(()=>{ node.style.transition = 'opacity 280ms'; node.style.opacity = '1'; });\n          statusText.textContent = `Pass ${ev.pass}: placed ${ev.value} into bucket ${ev.digit} (${ev.group})`;\n          // optionally highlight source position\n          highlightSourceIndex(ev);\n        }\n        break;\n\n      case 'collect':\n        {\n          // update the group's array display to collected newArray\n          if(ev.group === 'negatives'){\n            model.sortedNegAbs = ev.newArray.slice();\n            renderArrayTo(groupArrayDiv, ev.newArray);\n            // clear bucket contents visually (but keep them for the animation sense)\n            // We'll clear after a slight delay to emphasize collection\n            setTimeout(()=> {\n              const bucketContents = bucketsDiv.querySelectorAll('.bucket-content');\n              bucketContents.forEach(bc=>bc.innerHTML='');\n            }, 300);\n          } else {\n            model.sortedPos = ev.newArray.slice();\n            renderArrayTo(groupArrayDiv, ev.newArray);\n            setTimeout(()=> {\n              const bucketContents = bucketsDiv.querySelectorAll('.bucket-content');\n              bucketContents.forEach(bc=>bc.innerHTML='');\n            }, 300);\n          }\n          statusText.textContent = `Pass ${ev.pass} collected (group ${ev.group}). New group order: [${ev.newArray.join(', ')}]`;\n        }\n        break;\n\n      case 'groupDone':\n        if(ev.group === 'negatives'){\n          model.sortedNegAbs = ev.finalArray.slice();\n          statusText.textContent = `Negatives sorted by absolute values: [${model.sortedNegAbs.join(', ')}]`;\n        } else {\n          model.sortedPos = ev.finalArray.slice();\n          statusText.textContent = `Positives sorted: [${model.sortedPos.join(', ')}]`;\n        }\n        // clear buckets\n        setTimeout(()=> {\n          const bucketContents = bucketsDiv.querySelectorAll('.bucket-content');\n          bucketContents.forEach(bc=>bc.innerHTML='');\n        }, 200);\n        break;\n\n      case 'combine':\n        // produce final array: reverse sortedNegAbs, map to negative values, then append positives\n        const finalNegs = model.sortedNegAbs.slice().reverse().map(x=>-x);\n        const finalPos = model.sortedPos.slice();\n        const finalArr = finalNegs.concat(finalPos);\n        renderArrayTo(resultArrayDiv, finalArr);\n        statusText.textContent = `Combined final result: [${finalArr.join(', ')}]`;\n        // also show in active panel a summary\n        groupLabel.textContent = 'Result combined';\n        groupArrayDiv.innerHTML = '';\n        renderArrayTo(groupArrayDiv, finalArr);\n        break;\n\n      case 'done':\n        statusText.textContent = 'Sorting complete.';\n        break;\n\n      default:\n        console.warn('Unknown event', ev);\n    }\n  }\n\n  function highlightSourceIndex(ev){\n    // If possible, highlight the source item in groupArrayDiv corresponding to ev.idx\n    // We'll attempt to set a slight pulse effect on the element\n    const arrNodes = groupArrayDiv.querySelectorAll('.num');\n    if(arrNodes && arrNodes[ev.idx]){\n      const el = arrNodes[ev.idx];\n      el.style.transition = 'transform 240ms, box-shadow 240ms';\n      el.style.transform = 'scale(1.06)';\n      el.style.boxShadow = '0 10px 18px rgba(0,0,0,0.45)';\n      setTimeout(()=>{ el.style.transform = ''; el.style.boxShadow=''; }, 280);\n    }\n  }\n\n  // Playback controls\n  function play(){\n    if(playing) return;\n    playing = true;\n    btnStart.textContent = 'Pause';\n    scheduleNext();\n  }\n\n  function pause(){\n    playing = false;\n    btnStart.textContent = 'Play';\n    if(playTimer) {\n      clearTimeout(playTimer);\n      playTimer = null;\n    }\n  }\n\n  function scheduleNext(){\n    if(!playing) return;\n    const interval = Math.max(180, 600 / (speed || 1));\n    playTimer = setTimeout(()=>{\n      if(eventIndex >= events.length - 1){\n        pause();\n        return;\n      }\n      stepForward();\n      scheduleNext();\n    }, interval);\n  }\n\n  function updateControlButtons(){\n    btnBack.disabled = (eventIndex <= -1);\n    btnStep.disabled = (eventIndex >= events.length - 1);\n    btnStart.disabled = (events.length === 0);\n    btnReset.disabled = (eventIndex <= -1 && events.length>0);\n  }\n\n  // Event listeners\n  btnRandom.addEventListener('click', ()=>{\n    const n = Math.max(1, Math.min(500, parseInt(randCount.value)||12));\n    const maxv = Math.max(1, parseInt(randMax.value)||999);\n    const arr = [];\n    for(let i=0;i<n;i++){\n      // generate some negatives too sometimes\n      const sign = Math.random() < 0.18 ? -1 : 1;\n      arr.push(sign * randInt(0, maxv));\n    }\n    inputArray.value = arr.join(', ');\n  });\n\n  btnLoad.addEventListener('click', ()=> {\n    try{\n      prepareAndBuild();\n    }catch(e){\n      console.error(e);\n      statusText.textContent = 'Error preparing: ' + e.message;\n    }\n  });\n\n  btnStep.addEventListener('click', ()=> {\n    pause();\n    stepForward();\n  });\n  btnBack.addEventListener('click', ()=> {\n    pause();\n    stepBack();\n  });\n  btnStart.addEventListener('click', ()=>{\n    if(playing){\n      pause();\n    } else {\n      if(events.length === 0){\n        prepareAndBuild();\n      }\n      play();\n    }\n  });\n  btnReset.addEventListener('click', ()=>{\n    pause();\n    eventIndex = -1;\n    clearActivePanel();\n    resultArrayDiv.innerHTML = '';\n    renderInitialArray(inputNumbers);\n    resetModel();\n    statusText.textContent = 'Reset to initial state.';\n    updateControlButtons();\n  });\n\n  speedRange.addEventListener('input', (e)=>{\n    speed = parseFloat(e.target.value);\n  });\n\n  radixSelect.addEventListener('change', ()=>{\n    radLabel.textContent = radixSelect.value;\n  });\n\n  // Initialize UI\n  renderInitialArray(parseInput(inputArray.value));\n  updateControlButtons();\n  statusText.textContent = 'Ready. Edit numbers and press \"Load & Prepare\".';\n\n  // Accessibility: allow Enter in input to load\n  inputArray.addEventListener('keydown', (e)=>{\n    if(e.key === 'Enter'){\n      e.preventDefault();\n      prepareAndBuild();\n    }\n  });\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Radix Sort"
    }
  ],
  "topic": "Radix Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}