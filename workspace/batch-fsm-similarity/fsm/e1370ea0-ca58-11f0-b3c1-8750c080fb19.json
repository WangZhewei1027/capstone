{
  "meta": {
    "concept": "Heap",
    "topic": "Min/Max Heap Visualization",
    "educational_goal": "Demonstrate heap insertion and removal operations",
    "expected_interactions": [
      "insert",
      "remove_min",
      "remove_max"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "idle",
      "entry_actions": [
        "enableControls()"
      ],
      "exit_actions": []
    },
    {
      "id": "S1_Inserting",
      "label": "Inserting",
      "type": "atomic",
      "entry_actions": [
        "readInputValue()",
        "highlightInput()"
      ],
      "exit_actions": [
        "clearHighlight()"
      ]
    },
    {
      "id": "S2_RemovingMin",
      "label": "RemovingMin",
      "type": "atomic",
      "entry_actions": [
        "showRemovingMinFeedback()"
      ],
      "exit_actions": [
        "clearFeedback()"
      ]
    },
    {
      "id": "S3_RemovingMax",
      "label": "RemovingMax",
      "type": "atomic",
      "entry_actions": [
        "showRemovingMaxFeedback()"
      ],
      "exit_actions": [
        "clearFeedback()"
      ]
    }
  ],
  "events": [
    {
      "id": "USER_CLICKS_INSERT",
      "event_type": "user_action",
      "description": "User clicks the Insert button",
      "triggers": [
        "#numberInput",
        "button[onclick='insertNumber()']"
      ]
    },
    {
      "id": "USER_CLICKS_REMOVE_MIN",
      "event_type": "user_action",
      "description": "User clicks the Remove Min button",
      "triggers": [
        "button[onclick='removeMin()']"
      ]
    },
    {
      "id": "USER_CLICKS_REMOVE_MAX",
      "event_type": "user_action",
      "description": "User clicks the Remove Max button",
      "triggers": [
        "button[onclick='removeMax()']"
      ]
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Inserting",
      "event": "USER_CLICKS_INSERT",
      "guard": "inputNotEmpty",
      "actions": [
        "captureInput()",
        "disableControls()"
      ],
      "expected_observables": [
        "dom:inputValueCaptured"
      ],
      "timeout": 1000
    },
    {
      "from": "S1_Inserting",
      "to": "S0_Idle",
      "event": "USER_CLICKS_INSERT",
      "guard": "true",
      "actions": [
        "insertValue()",
        "updateHeapDisplay()"
      ],
      "expected_observables": [
        "dom:heapUpdated"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S2_RemovingMin",
      "event": "USER_CLICKS_REMOVE_MIN",
      "guard": "heapNotEmpty",
      "actions": [
        "disableControls()"
      ],
      "expected_observables": [
        "dom:removeMinTriggered"
      ],
      "timeout": 1000
    },
    {
      "from": "S2_RemovingMin",
      "to": "S0_Idle",
      "event": "USER_CLICKS_REMOVE_MIN",
      "guard": "true",
      "actions": [
        "removeMinValue()",
        "updateHeapDisplay()"
      ],
      "expected_observables": [
        "dom:heapUpdated"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S3_RemovingMax",
      "event": "USER_CLICKS_REMOVE_MAX",
      "guard": "heapNotEmpty",
      "actions": [
        "disableControls()"
      ],
      "expected_observables": [
        "dom:removeMaxTriggered"
      ],
      "timeout": 1000
    },
    {
      "from": "S3_RemovingMax",
      "to": "S0_Idle",
      "event": "USER_CLICKS_REMOVE_MAX",
      "guard": "true",
      "actions": [
        "removeMaxValue()",
        "updateHeapDisplay()"
      ],
      "expected_observables": [
        "dom:heapUpdated"
      ],
      "timeout": 500
    }
  ],
  "components": [
    "#numberInput",
    "button[onclick='insertNumber()']",
    "button[onclick='removeMin()']",
    "button[onclick='removeMax()']",
    "#heapOutput"
  ]
}