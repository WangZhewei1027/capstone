<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Two Pointers Technique Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
      background-color: #f0f0f0;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    section {
      background: #fff;
      padding: 20px;
      margin-top: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px #ccc;
    }
    label {
      font-weight: bold;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 1em;
      margin-top: 6px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 10px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .output {
      background: #e9ecef;
      padding: 15px;
      border-radius: 5px;
      white-space: pre-wrap;
      font-family: Consolas, monospace;
      max-height: 300px;
      overflow-y: auto;
      margin-top: 10px;
    }
    .code {
      background: #272822;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-family: 'Fira Code', Consolas, monospace;
      margin-top: 10px;
    }
    a {
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    footer {
      margin-top: 40px;
      text-align: center;
      font-size: 0.9em;
      color: #777;
    }
  </style>
</head>
<body>
  <h1>Two Pointers Technique Visualization</h1>
  <section>
    <h2>Concept</h2>
    <p>
      The <strong>Two Pointers</strong> technique involves using two indices to iterate through a data structure,
      often to find pairs or subarrays matching certain conditions efficiently.
      Commonly used in sorted arrays or linked lists for problems like finding pairs with a given sum,
      merging sorted arrays, removing duplicates, etc.
    </p>
    <p>
      Below is a demo to find two numbers in a sorted array that add up to a target sum using two pointers.
    </p>
  </section>

  <section>
    <h2>Find Two Numbers Sum to Target (Sorted Array)</h2>
    <label for="inputArray">Input Sorted Array (comma separated):</label>
    <input type="text" id="inputArray" value="1,2,3,4,5,6,7,8,9,10" />

    <label for="inputTarget">Target Sum:</label>
    <input type="number" id="inputTarget" value="15" />

    <button id="runBtn">Run Two Pointers</button>

    <div class="output" id="outputArea">
      Enter an array and target, then click 'Run Two Pointers' to see the process.
    </div>
  </section>

  <section>
    <h2>Explanation</h2>
    <p>
      We start with two pointers: <code>left</code> at the start and <code>right</code> at the end of the array.
      We sum the numbers at these pointers:
    </p>
    <ul>
      <li>If sum equals target, we found the pair.</li>
      <li>If sum is less than target, increment <code>left</code> (to increase sum).</li>
      <li>If sum is greater than target, decrement <code>right</code> (to decrease sum).</li>
    </ul>
    <p>This works efficiently because the array is sorted.</p>
  </section>

  <section>
    <h2>Code (JavaScript)</h2>
    <pre class="code">
// input: sorted array 'arr', target sum 'target'
// output: indices of two numbers adding to target or -1 if none
function twoPointersSum(arr, target) {
  let left = 0;
  let right = arr.length - 1;
  while (left < right) {
    let sum = arr[left] + arr[right];
    if (sum === target) {
      return [left, right];
    } else if (sum < target) {
      left++;
    } else {
      right--;
    }
  }
  return -1;
}
    </pre>
  </section>

  <script>
    const runBtn = document.getElementById("runBtn");
    const outputArea = document.getElementById("outputArea");
    const inputArrayInput = document.getElementById("inputArray");
    const inputTargetInput = document.getElementById("inputTarget");

    // Helper to display the array with highlighting left/right pointers
    function displayArray(arr, left, right) {
      return arr
        .map((num, i) => {
          if (i === left && i === right) {
            return `[<b style="color:#d6336c;">${num}</b>]`;
          } else if (i === left) {
            return `<b style="color:#28a745;">${num}</b>`;
          } else if (i === right) {
            return `<b style="color:#dc3545;">${num}</b>`;
          } else {
            return num;
          }
        })
        .join(", ");
    }

    // Two pointers with step-by-step trace
    function twoPointersSumTrace(arr, target) {
      let left = 0;
      let right = arr.length - 1;
      const steps = [];
      steps.push(`Initial array: [${arr.join(", ")}]`);
      steps.push(`Target sum: ${target}`);

      while (left < right) {
        const sum = arr[left] + arr[right];
        steps.push(
          `Pointers: left=${left} (value=${arr[left]}), right=${right} (value=${arr[right]})`
        );
        steps.push(
          `Current sum = arr[left] + arr[right] = ${arr[left]} + ${arr[right]} = ${sum}`
        );

        steps.push(
          `Array state: ${displayArray(arr, left, right)}`
        );

        if (sum === target) {
          steps.push(
            `Found target sum! Elements at indices ${left} and ${right}: ${arr[left]} + ${arr[right]} = ${target}`
          );
          return { steps, result: [left, right] };
        } else if (sum < target) {
          steps.push(
            `Sum ${sum} is less than target ${target}, increment left pointer.`
          );
          left++;
        } else {
          steps.push(
            `Sum ${sum} is greater than target ${target}, decrement right pointer.`
          );
          right--;
        }
        steps.push("---");
      }
      steps.push("No pair found with the target sum.");
      return { steps, result: -1 };
    }

    runBtn.addEventListener("click", () => {
      const arrStr = inputArrayInput.value.trim();
      const targetStr = inputTargetInput.value.trim();

      if (!arrStr) {
        outputArea.innerHTML = "Please enter a valid array of integers.";
        return;
      }
      if (!targetStr || isNaN(targetStr)) {
        outputArea.innerHTML = "Please enter a valid target sum (number).";
        return;
      }

      // Parse array
      const arrRaw = arrStr.split(",");
      let arr = [];
      for (let s of arrRaw) {
        const num = parseInt(s.trim(), 10);
        if (isNaN(num)) {
          outputArea.innerHTML = `Invalid number detected: "${s.trim()}"`;
          return;
        }
        arr.push(num);
      }

      // Confirm array is sorted
      for (let i = 1; i < arr.length; i++) {
        if (arr[i] < arr[i - 1]) {
          outputArea.innerHTML = "Array is not sorted. Please enter a sorted array.";
          return;
        }
      }

      const target = Number(targetStr);

      // Run two pointers with trace
      const { steps, result } = twoPointersSumTrace(arr, target);

      // Format output
      let outputHtml = steps
        .map((line) => {
          // Highlight certain keywords
          return line
            .replace(/(left=\d+)/g, `<span style="color:#28a745;">$1</span>`)
            .replace(/(right=\d+)/g, `<span style="color:#dc3545;">$1</span>`)
            .replace(/(Found target sum!)/g, `<strong style="color:#0a74da;">$1</strong>`)
            .replace(/(No pair found)/g, `<strong style="color:#d6336c;">$1</strong>`)
            .replace(/---/g, `<hr style="opacity: 0.3;">`);
        })
        .join("\n");

      if (result !== -1) {
        outputHtml += `<br><br><strong>Result:</strong> Indices [${result[0]}, ${result[1]}] -> Values (${arr[result[0]]}, ${arr[result[1]]})`;
      } else {
        outputHtml += `<br><br><strong>Result:</strong> No two elements sum to ${target}.`;
      }

      outputArea.innerHTML = outputHtml;
      outputArea.scrollTop = 0;
    });
  </script>

  <footer>
    Two Pointers Demo by ChatGPT &nbsp;&middot;&nbsp; Enter a sorted array and target sum, then run.
  </footer>
</body>
</html>