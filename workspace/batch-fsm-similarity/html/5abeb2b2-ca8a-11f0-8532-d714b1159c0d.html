<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dijkstra's Algorithm</title>
    <style>
        #graph {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>Dijkstra's Algorithm</h1>
    <input type="number" id="source" placeholder="Source Node">
    <input type="number" id="target" placeholder="Target Node">
    <button id="start-button">Start</button>
    <button id="reset-button">Reset</button>
    <div id="graph"></div>

    <script>
        let graph = {};
        let distances = {};
        let previousNodes = {};
        let nodes = {};
        let visited = {};

        function addNode(node) {
            graph[node] = [];
            distances[node] = Infinity;
            previousNodes[node] = null;
            visited[node] = false;
            nodes[node] = node;
        }

        function addEdge(node1, node2, weight) {
            graph[node1].push([node2, weight]);
            graph[node2].push([node1, weight]);
        }

        function dijkstra(source) {
            let queue = [source];
            while (queue.length > 0) {
                let currentNode = queue.shift();
                if (currentNode === source) {
                    break;
                }
                for (let neighbor of graph[currentNode]) {
                    let weight = neighbor[1];
                    if (distances[currentNode] + weight < distances[neighbor[0]]) {
                        distances[neighbor[0]] = distances[currentNode] + weight;
                        previousNodes[neighbor[0]] = currentNode;
                        queue.push(neighbor[0]);
                    }
                }
            }
        }

        function visualizeGraph() {
            let div = document.getElementById('graph');
            let canvas = document.createElement('canvas');
            let ctx = canvas.getContext('2d');
            canvas.width = 500;
            canvas.height = 500;
            div.appendChild(canvas);
            ctx.clearRect(0, 0, 500, 500);
            for (let node in graph) {
                let x = (500 - Math.sqrt(2 * 500 * graph[node].length)) / 2;
                let y = (500 + Math.sqrt(2 * 500 * graph[node].length)) / 2;
                ctx.beginPath();
                ctx.arc(x, y, 20, 0, 2 * Math.PI);
                ctx.fillStyle = 'blue';
                ctx.fill();
                ctx.beginPath();
                ctx.arc(x + 20, y, 20, 0, 2 * Math.PI);
                ctx.fillStyle = 'red';
                ctx.fill();
                ctx.beginPath();
                ctx.arc(x, y + 20, 20, 0, 2 * Math.PI);
                ctx.fillStyle = 'green';
                ctx.fill();
                ctx.beginPath();
                ctx.arc(x + 20, y + 20, 20, 0, 2 * Math.PI);
                ctx.fillStyle = 'yellow';
                ctx.fill();
                ctx.fillStyle = 'black';
                ctx.font = '24px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('Node', x + 25, y + 25);
                ctx.fillText('Weight', x + 25, y + 50);
                ctx.fillText('Distance', x + 25, y + 75);
                ctx.fillText('Previous Node', x + 25, y + 100);
                ctx.fillText('Visited', x + 25, y + 125);
                ctx.fillText('Source Node', x + 25, y + 150);
                ctx.fillText('Target Node', x + 25, y + 175);
            }
            for (let node in distances) {
                let x = (500 - Math.sqrt(2 * 500 * distances[node].length)) / 2;
                let y = (500 + Math.sqrt(2 * 500 * distances[node].length)) / 2;
                ctx.beginPath();
                ctx.arc(x, y, 20, 0, 2 * Math.PI);
                ctx.fillStyle = 'blue';
                ctx.fill();
            }
        }

        function start() {
            let source = document.getElementById('source').value;
            let target = document.getElementById('target').value;
            if (source === target) {
                console.log("Source and target nodes are the same");
            } else {
                addNode(source);
                addNode(target);
                for (let node in graph) {
                    distances[node] = Infinity;
                    previousNodes[node] = null;
                    visited[node] = false;
                }
                dijkstra(source);
                visualizeGraph();
            }
        }

        function reset() {
            for (let node in graph) {
                graph[node] = [];
                distances[node] = Infinity;
                previousNodes[node] = null;
                visited[node] = false;
            }
            nodes = {};
            visited = {};
            dijkstra(source);
            visualizeGraph();
        }

        let startButton = document.getElementById('start-button');
        let resetButton = document.getElementById('reset-button');
        startButton.addEventListener('click', start);
        resetButton.addEventListener('click', reset);
    </script>
</body>
</html>