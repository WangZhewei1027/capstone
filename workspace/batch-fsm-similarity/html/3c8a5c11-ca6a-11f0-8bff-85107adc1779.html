<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Recursion Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
  }
  h1 {
    color: #2a7ae2;
  }
  input[type=number] {
    width: 60px;
    padding: 0.3rem;
    font-size: 1rem;
  }
  button {
    padding: 0.5rem 1rem;
    font-size: 1rem;
    margin-left: 0.5rem;
    cursor: pointer;
  }
  #output {
    margin-top: 1.5rem;
    white-space: pre-wrap;
    background: #f7f9fc;
    padding: 1rem;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-family: monospace;
  }
</style>
</head>
<body>
<h1>Recursion Demo: Factorial Calculator</h1>
<p>Enter a non-negative integer to calculate its factorial using a recursive function.</p>

<label for="numInput">Number (0 - 20): </label>
<input type="number" id="numInput" min="0" max="20" value="5" />
<button id="calcBtn">Calculate Factorial</button>

<div id="output"></div>

<script>
// Recursive factorial function with call trace
function factorial(n, depth = 0, path = []) {
  path.push(n);
  printTrace(depth, `factorial(${n}) called.`);
  if (n === 0 || n === 1) {
    printTrace(depth, `Base case reached: factorial(${n}) = 1.`);
    return 1;
  } else {
    const result = n * factorial(n - 1, depth + 1, path);
    printTrace(depth, `Returning factorial(${n}) = ${result}.`);
    path.pop();
    return result;
  }
}

function printTrace(depth, message) {
  const indent = '  '.repeat(depth);
  output.textContent += indent + message + '\n';
}

const input = document.getElementById('numInput');
const calcBtn = document.getElementById('calcBtn');
const output = document.getElementById('output');

calcBtn.onclick = () => {
  output.textContent = '';
  let n = Number(input.value);
  if (!Number.isInteger(n) || n < 0 || n > 20) {
    output.textContent = 'Please enter an integer between 0 and 20.';
    return;
  }
  output.textContent = `Calculating factorial(${n}) using recursion:\n\n`;
  const start = performance.now();
  const result = factorial(n);
  const end = performance.now();
  output.textContent += `\nFinal Result: factorial(${n}) = ${result}\n`;
  output.textContent += `Computed in ${(end - start).toFixed(4)} ms.`;
};
</script>
</body>
</html>