<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JavaScript Set Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f0f0;
  }
  h1 {
    color: #333;
  }
  .box {
    background: #fff;
    padding: 1rem;
    border-radius: 6px;
    box-shadow: 0 2px 6px #ccc;
    max-width: 600px;
  }
  label, button {
    margin-top: 1rem;
    display: block;
  }
  input[type="text"] {
    padding: 0.5rem;
    font-size: 1rem;
    margin-top: 0.3rem;
    width: 100%;
    box-sizing: border-box;
  }
  ul {
    margin-top: 0.5rem;
    padding-left: 1.2rem;
  }
  .log {
    background: #222;
    color: #eee;
    font-family: monospace;
    padding: 1rem;
    margin-top: 1rem;
    border-radius: 6px;
    max-height: 150px;
    overflow-y: auto;
  }
</style>
</head>
<body>
  <h1>JavaScript Set Demonstration</h1>
  <div class="box">
    <p>
      A <code>Set</code> is a collection of unique values. It stores unique elements of any type,
      whether primitive values or object references.
    </p>
    <label for="itemInput">Enter an item to add to the Set:</label>
    <input type="text" id="itemInput" placeholder="e.g. apple" />
    <button id="addButton">Add Item</button>
    <button id="clearButton" style="margin-left: 10px;">Clear Set</button>
    <p><strong>Current Set contents (<span id="setSize">0</span> items):</strong></p>
    <ul id="setContents"></ul>

    <div class="log" id="log"></div>
  </div>

<script>
  (() => {
    const addButton = document.getElementById('addButton');
    const clearButton = document.getElementById('clearButton');
    const itemInput = document.getElementById('itemInput');
    const setContents = document.getElementById('setContents');
    const setSize = document.getElementById('setSize');
    const log = document.getElementById('log');

    // Create a new Set instance
    const mySet = new Set();

    // Helper: update the list UI to show set contents
    function updateDisplay() {
      setContents.innerHTML = '';
      for (const item of mySet) {
        const li = document.createElement('li');
        li.textContent = item;
        setContents.appendChild(li);
      }
      setSize.textContent = mySet.size;
    }

    // Helper: log messages with timestamp
    function logMessage(msg) {
      const now = new Date().toLocaleTimeString();
      log.textContent += `[${now}] ${msg}\n`;
      log.scrollTop = log.scrollHeight;
    }

    // Parse input to try to handle numbers, strings, booleans sensibly
    function parseInput(input) {
      input = input.trim();
      // Try to interpret "true", "false", null, undefined, numbers
      if (input === '') return null;
      if (/^(true)$/i.test(input)) return true;
      if (/^(false)$/i.test(input)) return false;
      if (/^(null)$/i.test(input)) return null;
      if (/^(undefined)$/i.test(input)) return undefined;
      // Number detection (integer or float)
      if (!isNaN(input)) return Number(input);
      // Otherwise treat as string
      return input;
    }

    addButton.addEventListener('click', () => {
      const rawInput = itemInput.value;
      const value = parseInput(rawInput);

      if (value === null || value === '') {
        logMessage('No input entered or empty string, nothing added.');
        return;
      }

      if (mySet.has(value)) {
        logMessage(`The item "${value}" is already in the Set, duplicate not added.`);
      } else {
        mySet.add(value);
        logMessage(`Added "${value}" to the Set.`);
        updateDisplay();
      }
      itemInput.value = '';
      itemInput.focus();
    });

    clearButton.addEventListener('click', () => {
      mySet.clear();
      logMessage('Cleared all items from the Set.');
      updateDisplay();
      itemInput.focus();
    });

    // Initial call to show empty set
    updateDisplay();

    // Demonstrating other Set methods in console:
    console.log('Set demonstration in console:');

    // Add initial values
    mySet.add(1);
    mySet.add(5);
    mySet.add(5); // duplicate, ignored
    mySet.add('some text');
    mySet.add({ a: 1, b: 2 }); // object reference
    mySet.add(1); // duplicate, ignored

    console.log('Initial set values:', [...mySet]);

    // ForEach example
    mySet.forEach((value) => {
      console.log('Set value:', value);
    });

    // Check for existence
    console.log('Set has 5:', mySet.has(5));
    console.log('Set has 10:', mySet.has(10));

    // Size of the set
    console.log('Size of the set:', mySet.size);

  })();
</script>
</body>
</html>