<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linear Search Visualization</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f4f8;
    color: #333;
  }
  h1 {
    text-align: center;
  }
  #container {
    max-width: 600px;
    margin: 2rem auto;
    text-align: center;
  }
  input[type="number"] {
    width: 80px;
    font-size: 1rem;
    padding: 0.2rem 0.5rem;
    margin-left: 0.5rem;
  }
  button {
    margin-left: 1rem;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    cursor: pointer;
  }
  #array {
    margin-top: 2rem;
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
  }
  .array-element {
    width: 40px;
    height: 40px;
    line-height: 40px;
    background: white;
    border: 2px solid #888;
    border-radius: 5px;
    font-weight: bold;
    user-select: none;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .checking {
    background-color: #ffecb3;
    border-color: #ffb300;
  }
  .found {
    background-color: #a5d6a7;
    border-color: #388e3c;
    color: #1b5e20;
  }
  .notfound {
    background-color: #ef9a9a;
    border-color: #c62828;
    color: #b71c1c;
  }
  #message {
    margin-top: 1rem;
    font-size: 1.2rem;
    min-height: 1.5em;
  }
  #controls {
    margin-top: 1rem;
  }
</style>
</head>
<body>
  <h1>Linear Search Visualization</h1>
  <div id="container">
    <div>
      Array (comma separated integers):
      <input type="text" id="arrayInput" value="4, 2, 9, 7, 3, 8, 10, 1" />
    </div>
    <div style="margin-top: 1rem;">
      Search for:
      <input type="number" id="searchInput" />
      <button id="startSearch">Start Search</button>
      <button id="resetArray">Reset Array</button>
    </div>

    <div id="array"></div>
    <div id="message"></div>
  </div>

<script>
  const arrayContainer = document.getElementById('array');
  const arrayInput = document.getElementById('arrayInput');
  const searchInput = document.getElementById('searchInput');
  const startSearchBtn = document.getElementById('startSearch');
  const resetArrayBtn = document.getElementById('resetArray');
  const message = document.getElementById('message');

  let arr = [];
  let searching = false;

  function createArrayElements() {
    arrayContainer.innerHTML = '';
    arr.forEach((num, idx) => {
      const elem = document.createElement('div');
      elem.className = 'array-element';
      elem.textContent = num;
      elem.dataset.index = idx;
      arrayContainer.appendChild(elem);
    });
  }

  function parseInputArray(text) {
    // Parse and filter numbers
    let nums = text.split(',').map(s => s.trim()).filter(s => s !== '').map(s => Number(s));
    // Remove non-numbers or NaN
    nums = nums.filter(n => !isNaN(n));
    return nums;
  }

  function reset() {
    if (searching) return;
    arr = parseInputArray(arrayInput.value);
    createArrayElements();
    message.textContent = '';
  }

  async function linearSearch(target) {
    searching = true;
    message.textContent = 'Starting linear search...';
    for (let i = 0; i < arr.length; i++) {
      // Highlight current element as checking
      const elems = document.querySelectorAll('.array-element');
      elems.forEach(el => {
        el.classList.remove('checking', 'found', 'notfound');
      });
      elems[i].classList.add('checking');
      message.textContent = `Checking index ${i}: ${arr[i]}`;
      await delay(1000);

      if(arr[i] === target) {
        elems[i].classList.remove('checking');
        elems[i].classList.add('found');
        message.textContent = `Element ${target} found at index ${i}.`;
        searching = false;
        return i;
      }
    }
    // No element found
    const elems = document.querySelectorAll('.array-element');
    elems.forEach(el => {
      el.classList.remove('checking');
    });
    message.textContent = `Element ${target} not found in the array.`;
    searching = false;
    return -1;
  }

  function delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  startSearchBtn.addEventListener('click', async () => {
    if(searching) return;
    const target = Number(searchInput.value);
    if(isNaN(target)) {
      alert('Please enter a valid number to search for.');
      return;
    }
    if(arr.length === 0) {
      alert('Array is empty or invalid. Please enter a valid array.');
      return;
    }
    await linearSearch(target);
  });

  resetArrayBtn.addEventListener('click', () => {
    if(searching) return;
    reset();
  });

  // Initial setup
  reset();
</script>
</body>
</html>