{
  "topic": "Interactive Application - Bubble Sort Visualization",
  "description": "Finite state machine modeling the interactive Bubble Sort visualization: initial drawing, user-triggered start, per-comparison highlighting, optional swaps, visualization delay, and completion.",
  "states": [
    {
      "name": "idle",
      "onEnter": "drawArray",
      "onExit": "noop",
      "on": {
        "START_CLICKED": "sorting"
      }
    },
    {
      "name": "sorting",
      "onEnter": "startBubbleSort",
      "onExit": "noop",
      "on": {
        "COMPARISON_STARTED": "comparing",
        "SORT_COMPLETE": "done",
        "START_CLICKED": "sorting"
      }
    },
    {
      "name": "comparing",
      "onEnter": "highlightBars",
      "onExit": "noop",
      "on": {
        "SWAP_OCCURRED": "swapping",
        "NO_SWAP": "delaying"
      }
    },
    {
      "name": "swapping",
      "onEnter": "performSwapAndRedraw",
      "onExit": "noop",
      "on": {
        "DELAY_COMPLETE": "delaying"
      }
    },
    {
      "name": "delaying",
      "onEnter": "startDelay",
      "onExit": "removeHighlights",
      "on": {
        "DELAY_COMPLETE": "comparing",
        "SORT_COMPLETE": "done"
      }
    },
    {
      "name": "done",
      "onEnter": "finalize",
      "onExit": "noop",
      "on": {
        "START_CLICKED": "sorting"
      }
    }
  ],
  "events": [
    "START_CLICKED",
    "COMPARISON_STARTED",
    "SWAP_OCCURRED",
    "NO_SWAP",
    "DELAY_COMPLETE",
    "NEXT_COMPARISON",
    "SORT_COMPLETE"
  ],
  "triggers": {
    "START_CLICKED": "#sortButton, button",
    "COMPARISON_STARTED": ".bar, .bar.swapping",
    "SWAP_OCCURRED": ".bar, #array",
    "NO_SWAP": ".bar",
    "DELAY_COMPLETE": ".bar, .bar.swapping, #array",
    "NEXT_COMPARISON": ".bar",
    "SORT_COMPLETE": "#array, .bar"
  },
  "notes": "Triggers map events to actual DOM selectors found or manipulated in the HTML/JS: #sortButton, #array, .bar, .swapping (added/removed at runtime). The FSM models the visual steps: initial draw (idle), start (sorting), per-comparison highlight (comparing), optional swap (swapping), wait/delay for visualization (delaying), and final completion (done). Clicking the Start button while sorting will start another run (START_CLICKED remains mapped to sorting)."
}