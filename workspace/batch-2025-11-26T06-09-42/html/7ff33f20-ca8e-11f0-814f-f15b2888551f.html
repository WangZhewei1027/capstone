<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linked List Visualization</title>
    <style>
        :root {
            --node-bg: #87CEEB;
            --node-border: #4682B4;
            --arrow-color: #333;
            --null-color: #CD5C5C;
            --highlight-color: #FFD700;
            --bg-color: #F0F8FF;
            --text-color: #333;
            --header-color: #4682B4;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            color: var(--header-color);
            border-bottom: 2px solid var(--header-color);
            padding-bottom: 10px;
        }

        .controls {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
            width: 90%;
            max-width: 900px;
        }

        .control-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        input[type="text"], input[type="number"] {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 80px;
        }

        button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            background-color: var(--node-border);
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: #5a9ac6;
        }
        
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #visualization-area {
            width: 100%;
            padding: 20px 0;
            min-height: 150px;
            display: flex;
            align-items: center;
            overflow-x: auto;
        }

        .linked-list-container {
            display: flex;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        .node-container {
            display: flex;
            align-items: center;
        }

        .node {
            width: 60px;
            height: 60px;
            background-color: var(--node-bg);
            border: 2px solid var(--node-border);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2em;
            position: relative;
            z-index: 2;
            transition: background-color 0.3s, transform 0.3s;
        }

        .node.highlight {
            background-color: var(--highlight-color);
            transform: scale(1.1);
        }

        .arrow {
            width: 50px;
            height: 4px;
            background-color: var(--arrow-color);
            position: relative;
            margin: 0 -5px;
            z-index: 1;
        }

        .arrow::after {
            content: '';
            position: absolute;
            right: -8px;
            top: -6px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 12px solid var(--arrow-color);
        }

        .null-node {
            font-size: 1.5em;
            color: var(--null-color);
            font-weight: bold;
            padding: 0 10px;
        }
        
        .head-pointer {
            position: absolute;
            top: -25px;
            left: 50px;
            transform: translateX(-50%);
            font-style: italic;
            color: var(--header-color);
            transition: left 0.5s ease-in-out;
        }
        
        .head-pointer::after {
            content: 'â†“';
            font-size: 1.5em;
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
        }

        #message-area {
            margin-top: 15px;
            font-style: italic;
            color: #555;
            min-height: 24px;
        }
    </style>
</head>
<body>

    <h1>Linked List Demonstration</h1>

    <div class="controls">
        <div class="control-group">
            <input type="text" id="value-input" placeholder="Value">
            <button id="add-head-btn">Add to Head</button>
            <button id="add-tail-btn">Add to Tail</button>
        </div>
        <div class="control-group">
            <input type="number" id="index-input" placeholder="Index">
            <button id="insert-at-btn">Insert At</button>
        </div>
        <div class="control-group">
            <button id="remove-head-btn">Remove Head</button>
            <button id="remove-tail-btn">Remove Tail</button>
        </div>
        <div class="control-group">
            <input type="number" id="remove-index-input" placeholder="Index">
            <button id="remove-at-btn">Remove At</button>
        </div>
         <div class="control-group">
            <input type="text" id="find-value-input" placeholder="Value">
            <button id="find-btn">Find</button>
        </div>
    </div>
    
    <div id="message-area">Enter a value and perform an operation.</div>

    <div id="visualization-area">
        <div id="linked-list-container" class="linked-list-container">
            <!-- Nodes will be injected here by JavaScript -->
        </div>
    </div>

    <script>
        // --- 1. The Core Linked List Logic ---

        // Node class: Represents an element in the list.
        class Node {
            constructor(data, next = null) {
                this.data = data; // The value stored in the node
                this.next = next; // A reference (pointer) to the next node
            }
        }

        // LinkedList class: Manages the collection of nodes.
        class LinkedList {
            constructor() {
                this.head = null; // The first node in the list. Null if the list is empty.
                this.size = 0;
            }

            // Add a node to the beginning (head) of the list
            addFirst(data) {
                this.head = new Node(data, this.head);
                this.size++;
            }

            // Add a node to the end (tail) of the list
            addLast(data) {
                const newNode = new Node(data);
                if (!this.head) {
                    this.head = newNode;
                } else {
                    let current = this.head;
                    while (current.next) {
                        current = current.next;
                    }
                    current.next = newNode;
                }
                this.size++;
            }

            // Insert a node at a specific index
            insertAt(data, index) {
                if (index < 0 || index > this.size) {
                    throw new Error("Index out of bounds");
                }
                if (index === 0) {
                    this.addFirst(data);
                    return;
                }

                const newNode = new Node(data);
                let current = this.head;
                let previous;
                let count = 0;

                while (count < index) {
                    previous = current;
                    current = current.next;
                    count++;
                }

                newNode.next = current;
                previous.next = newNode;
                this.size++;
            }

            // Remove the first node (head)
            removeFirst() {
                if (!this.head) return;
                this.head = this.head.next;
                this.size--;
            }

            // Remove the last node (tail)
            removeLast() {
                if (!this.head) return;
                if (!this.head.next) {
                    this.head = null;
                } else {
                    let current = this.head;
                    let previous;
                    while (current.next) {
                        previous = current;
                        current = current.next;
                    }
                    previous.next = null;
                }
                this.size--;
            }
            
            // Remove a node at a specific index
            removeAt(index) {
                if (index < 0 || index >= this.size) {
                    throw new Error("Index out of bounds");
                }
                if (index === 0) {
                    this.removeFirst();
                    return;
                }
                
                let current = this.head;
                let previous;
                let count = 0;
                while (count < index) {
                    previous = current;
                    current = current.next;
                    count++;
                }
                previous.next = current.next;
                this.size--;
            }
            
            // Find the index of a node with a given value
            find(data) {
                let current = this.head;
                let index = 0;
                while (current) {
                    if (current.data === data) {
                        return index;
                    }
                    current = current.next;
                    index++;
                }
                return -1; // Not found
            }
        }

        // --- 2. The Visualization Logic ---

        const list = new LinkedList();
        const visualizationContainer = document.getElementById('linked-list-container');
        const messageArea = document.getElementById('message-area');

        function renderList() {
            visualizationContainer.innerHTML = ''; // Clear previous render
            let current = list.head;
            let index = 0;

            if (!current) {
                visualizationContainer.innerHTML = '<div class="head-pointer" style="left: 50px;">HEAD</div><div class="null-node">NULL</div>';
                return;
            }

            // Add the head pointer
            const headPointer = document.createElement('div');
            headPointer.className = 'head-pointer';
            headPointer.textContent = 'HEAD';
            visualizationContainer.appendChild(headPointer);

            while (current) {
                const nodeContainer = document.createElement('div');
                nodeContainer.className = 'node-container';
                
                const nodeEl = document.createElement('div');
                nodeEl.className = 'node';
                nodeEl.textContent = current.data;
                nodeEl.dataset.index = index;
                nodeContainer.appendChild(nodeEl);
                
                if (current.next) {
                    const arrowEl = document.createElement('div');
                    arrowEl.className = 'arrow';
                    nodeContainer.appendChild(arrowEl);
                }
                
                visualizationContainer.appendChild(nodeContainer);
                current = current.next;
                index++;
            }

            // Add the final NULL indicator
            const nullEl = document.createElement('div');
            nullEl.className = 'null-node';
            nullEl.textContent = 'NULL';
            visualizationContainer.appendChild(nullEl);
        }

        function highlightNode(index, duration = 1500) {
            const nodeEl = document.querySelector(`.node[data-index='${index}']`);
            if (nodeEl) {
                nodeEl.classList.add('highlight');
                setTimeout(() => {
                    nodeEl.classList.remove('highlight');
                }, duration);
            }
        }

        function displayMessage(msg, isError = false) {
            messageArea.textContent = msg;
            messageArea.style.color = isError ? 'var(--null-color)' : '#555';
        }

        // --- 3. Event Listeners for Controls ---

        const valueInput = document.getElementById('value-input');
        const indexInput = document.getElementById('index-input');
        const removeIndexInput = document.getElementById('remove-index-input');
        const findValueInput = document.getElementById('find-value-input');

        document.getElementById('add-head-btn').addEventListener('click', () => {
            const value = valueInput.value;
            if (!value) {
                displayMessage('Please enter a value.', true);
                return;
            }
            list.addFirst(value);
            renderList();
            highlightNode(0);
            displayMessage(`Added '${value}' to the head of the list.`);
            valueInput.value = '';
        });

        document.getElementById('add-tail-btn').addEventListener('click', () => {
            const value = valueInput.value;
            if (!value) {
                displayMessage('Please enter a value.', true);
                return;
            }
            list.addLast(value);
            renderList();
            highlightNode(list.size - 1);
            displayMessage(`Added '${value}' to the tail of the list.`);
            valueInput.value = '';
        });
        
        document.getElementById('insert-at-btn').addEventListener('click', () => {
            const value = valueInput.value;
            const index = parseInt(indexInput.value, 10);
            if (!value) {
                displayMessage('Please enter a value.', true);
                return;
            }
            if (isNaN(index)) {
                displayMessage('Please enter a valid index.', true);
                return;
            }
            try {
                list.insertAt(value, index);
                renderList();
                highlightNode(index);
                displayMessage(`Inserted '${value}' at index ${index}.`);
                valueInput.value = '';
                indexInput.value = '';
            } catch (e) {
                displayMessage(e.message, true);
            }
        });

        document.getElementById('remove-head-btn').addEventListener('click', () => {
            if (list.size === 0) {
                displayMessage('List is already empty.', true);
                return;
            }
            const removedData = list.head.data;
            list.removeFirst();
            renderList();
            displayMessage(`Removed head node with value '${removedData}'.`);
        });

        document.getElementById('remove-tail-btn').addEventListener('click', () => {
            if (list.size === 0) {
                displayMessage('List is already empty.', true);
                return;
            }
            list.removeLast();
            renderList();
            displayMessage('Removed tail node.');
        });
        
        document.getElementById('remove-at-btn').addEventListener('click', () => {
             const index = parseInt(removeIndexInput.value, 10);
             if (isNaN(index)) {
                displayMessage('Please enter a valid index.', true);
                return;
            }
            try {
                list.removeAt(index);
                renderList();
                displayMessage(`Removed node at index ${index}.`);
                removeIndexInput.value = '';
            } catch (e) {
                displayMessage(e.message, true);
            }
        });
        
        document.getElementById('find-btn').addEventListener('click', async () => {
            const value = findValueInput.value;
            if (!value) {
                displayMessage('Please enter a value to find.', true);
                return;
            }

            let current = list.head;
            let index = 0;
            let found = false;
            
            // Disable buttons during find animation
            document.querySelectorAll('.controls button').forEach(b => b.disabled = true);
            
            while(current) {
                displayMessage(`Checking index ${index}...`);
                highlightNode(index, 500);
                await new Promise(resolve => setTimeout(resolve, 500)); // wait for animation
                
                if (current.data === value) {
                    displayMessage(`Found '${value}' at index ${index}!`);
                    found = true;
                    // Keep the found node highlighted
                    setTimeout(() => highlightNode(index, 3000), 100); 
                    break;
                }
                current = current.next;
                index++;
            }
            
            if (!found) {
                displayMessage(`Value '${value}' not found in the list.`);
            }
            
            findValueInput.value = '';
            // Re-enable buttons
            document.querySelectorAll('.controls button').forEach(b => b.disabled = false);
        });

        // Initial render
        renderList();
    </script>

</body>
</html>