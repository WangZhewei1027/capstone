<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Means Clustering Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        canvas {
            border: 1px solid black;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <h1>K-Means Clustering Demo</h1>
    <canvas id="canvas" width="600" height="400"></canvas>
    <br>
    <button id="startButton">Start K-Means Clustering</button>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const numClusters = 3;
        const dataPoints = [];
        const centroids = [];
        const clusterAssignments = [];
        const colors = ['#FF6347', '#4682B4', '#32CD32', '#FFD700', '#FF69B4'];

        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Generate random data points
        function generateDataPoints(numPoints) {
            for (let i = 0; i < numPoints; i++) {
                dataPoints.push({
                    x: randomInt(50, 550),
                    y: randomInt(50, 350)
                });
            }
        }

        // Initialize centroids
        function initializeCentroids() {
            for (let i = 0; i < numClusters; i++) {
                const point = dataPoints[randomInt(0, dataPoints.length - 1)];
                centroids.push({ x: point.x, y: point.y });
            }
        }

        // Assign points to the nearest centroid
        function assignClusters() {
            for (let i = 0; i < dataPoints.length; i++) {
                let minDistance = Infinity;
                let closestCentroid = -1;
                for (let j = 0; j < centroids.length; j++) {
                    const distance = Math.hypot(dataPoints[i].x - centroids[j].x, dataPoints[i].y - centroids[j].y);
                    if (distance < minDistance) {
                        minDistance = distance;
                        closestCentroid = j;
                    }
                }
                clusterAssignments[i] = closestCentroid;
            }
        }

        // Update centroids based on cluster assignments
        function updateCentroids() {
            const newCentroids = Array.from({length: numClusters}, () => ({x: 0, y: 0, count: 0}));
            for (let i = 0; i < clusterAssignments.length; i++) {
                const clusterIndex = clusterAssignments[i];
                newCentroids[clusterIndex].x += dataPoints[i].x;
                newCentroids[clusterIndex].y += dataPoints[i].y;
                newCentroids[clusterIndex].count++;
            }
            for (let j = 0; j < newCentroids.length; j++) {
                if (newCentroids[j].count > 0) {
                    centroids[j].x = newCentroids[j].x / newCentroids[j].count;
                    centroids[j].y = newCentroids[j].y / newCentroids[j].count;
                }
            }
        }

        // Draw the data points and centroids
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < dataPoints.length; i++) {
                ctx.fillStyle = colors[clusterAssignments[i]];
                ctx.beginPath();
                ctx.arc(dataPoints[i].x, dataPoints[i].y, 5, 0, Math.PI * 2);
                ctx.fill();
            }
            for (let j = 0; j < centroids.length; j++) {
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(centroids[j].x, centroids[j].y, 8, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function kMeans() {
            assignClusters();
            updateCentroids();
            draw();
        }

        document.getElementById('startButton').addEventListener('click', () => {
            dataPoints.length = 0;
            centroids.length = 0;
            clusterAssignments.length = 0;
            generateDataPoints(20);
            initializeCentroids();
            for (let i = 0; i < 10; i++) {
                kMeans();
            }
        });

        // Initial draw
        generateDataPoints(20);
        initializeCentroids();
        draw();

    </script>
</body>
</html>