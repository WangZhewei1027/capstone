<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linked List Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
  }
  h1 {
    text-align: center;
  }
  .linked-list {
    margin: 20px auto;
    max-width: 800px;
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
  }
  .node {
    background: #4285f4;
    color: white;
    padding: 15px 20px;
    border-radius: 8px;
    position: relative;
    min-width: 60px;
    text-align: center;
    font-weight: bold;
    user-select: none;
  }
  .node::after {
    content: 'â†’';
    position: absolute;
    right: -20px;
    top: 50%;
    transform: translateY(-50%);
    font-weight: normal;
    font-size: 24px;
    color: #555;
  }
  .node:last-child::after {
    content: 'NULL';
    position: absolute;
    right: -52px;
    font-size: 14px;
    color: #888;
    top: 50%;
    transform: translateY(-50%);
  }
  .controls {
    max-width: 800px;
    margin: 0 auto 40px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }
  input[type="number"] {
    width: 70px;
    padding: 6px 10px;
    font-size: 16px;
  }
  input[type="text"] {
    width: 70px;
    padding: 6px 10px;
    font-size: 16px;
  }
  button {
    background: #34a853;
    border: none;
    padding: 10px 15px;
    color: white;
    cursor: pointer;
    font-weight: bold;
    border-radius: 6px;
    font-size: 16px;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #2c8c40;
  }
  #log {
    max-width: 800px;
    margin: 0 auto;
    height: 150px;
    overflow-y: auto;
    border: 1px solid #ccc;
    background: #f9f9f9;
    padding: 10px;
    font-family: monospace;
    white-space: pre-wrap;
    border-radius: 6px;
  }
  label {
    font-weight: bold;
    font-size: 16px;
    user-select: none;
  }
  .section {
    max-width: 800px;
    margin: 0 auto 30px;
    padding: 15px 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background: #f5f5f5;
  }
  footer {
    text-align: center;
    margin-top: 50px;
    color: #666;
    font-size: 14px;
  }
</style>
</head>
<body>
  <h1>Singly Linked List Interactive Demo</h1>

  <div class="section">
    <h2>Linked List Visualization</h2>
    <div class="linked-list" id="linkedListDisplay" aria-label="Linked list visualization" role="list"></div>
    <div style="text-align:center; margin-top: 10px; color:#555; font-size:14px;">
      Each box is a node. Arrows show the link to next node. Last node points to NULL.
    </div>
  </div>

  <div class="section">
    <h2>Operations</h2>
    <div class="controls" aria-label="Linked list controls">
      <label for="valueInput">Value:</label>
      <input type="text" id="valueInput" aria-describedby="valueDesc" />
      <div id="valueDesc" style="display:none;">Enter the value for the new node.</div>

      <button id="addHeadBtn" title="Add node at head">Add Head</button>
      <button id="addTailBtn" title="Add node at tail">Add Tail</button>

      <label for="indexInput" style="margin-left: 10px;">Index:</label>
      <input type="number" id="indexInput" min="0" step="1" aria-describedby="indexDesc" />
      <div id="indexDesc" style="display:none;">Index position of the node (0-based).</div>

      <button id="addAtIndexBtn" title="Add node at index">Add at Index</button>
      <button id="removeHeadBtn" title="Remove node at head">Remove Head</button>
      <button id="removeTailBtn" title="Remove node at tail">Remove Tail</button>
      <button id="removeAtIndexBtn" title="Remove node at index">Remove at Index</button>
      <button id="clearBtn" title="Clear entire list" style="background:#d93025;">Clear List</button>
    </div>
  </div>

  <div class="section" aria-live="polite" aria-atomic="true">
    <h2>Operations Log</h2>
    <div id="log" tabindex="0" aria-label="Operations log"></div>
  </div>

<script>
  class Node {
    constructor(value) {
      this.value = value;
      this.next = null;
    }
  }

  class LinkedList {
    constructor() {
      this.head = null;
      this.length = 0;
    }
    addAtHead(value) {
      const newNode = new Node(value);
      newNode.next = this.head;
      this.head = newNode;
      this.length++;
      return true;
    }
    addAtTail(value) {
      const newNode = new Node(value);
      if (!this.head) {
        this.head = newNode;
      } else {
        let current = this.head;
        while (current.next) current = current.next;
        current.next = newNode;
      }
      this.length++;
      return true;
    }
    addAtIndex(index, value) {
      if (index < 0 || index > this.length) return false;
      if (index === 0) {
        this.addAtHead(value);
        return true;
      }
      if (index === this.length) {
        this.addAtTail(value);
        return true;
      }
      const newNode = new Node(value);
      let prev = this.head;
      for (let i = 0; i < index - 1; i++) {
        prev = prev.next;
      }
      newNode.next = prev.next;
      prev.next = newNode;
      this.length++;
      return true;
    }
    removeHead() {
      if (!this.head) return null;
      const removed = this.head;
      this.head = this.head.next;
      this.length--;
      return removed.value;
    }
    removeTail() {
      if (!this.head) return null;
      if (!this.head.next) {
        const val = this.head.value;
        this.head = null;
        this.length--;
        return val;
      }
      let current = this.head;
      while (current.next.next) {
        current = current.next;
      }
      const val = current.next.value;
      current.next = null;
      this.length--;
      return val;
    }
    removeAtIndex(index) {
      if (index < 0 || index >= this.length || !this.head) return null;
      if (index === 0) return this.removeHead();
      let prev = this.head;
      for (let i = 0; i < index -1; i++) {
        prev = prev.next;
      }
      const removed = prev.next;
      prev.next = removed.next;
      this.length--;
      return removed.value;
    }
    toArray() {
      const arr = [];
      let current = this.head;
      while(current) {
        arr.push(current.value);
        current = current.next;
      }
      return arr;
    }
    clear() {
      this.head = null;
      this.length = 0;
    }
  }

  // Initialize linked list
  const list = new LinkedList();

  const linkedListDisplay = document.getElementById('linkedListDisplay');
  const logEl = document.getElementById('log');

  function log(message) {
    const time = new Date().toLocaleTimeString();
    logEl.textContent = `[${time}] ${message}\n` + logEl.textContent;
  }

  function renderList() {
    linkedListDisplay.innerHTML = '';
    let node = list.head;
    if (!node) {
      linkedListDisplay.innerHTML = '<span style="color:#999; font-style:italic;">Empty List</span>';
      return;
    }
    let idx = 0;
    while(node) {
      const nodeDiv = document.createElement('div');
      nodeDiv.className = 'node';
      nodeDiv.textContent = node.value;
      nodeDiv.title = `Node at index ${idx} with value: ${node.value}`;
      nodeDiv.setAttribute('role', 'listitem');
      linkedListDisplay.appendChild(nodeDiv);
      node = node.next;
      idx++;
    }
  }

  // Button references
  const valueInput = document.getElementById('valueInput');
  const indexInput = document.getElementById('indexInput');

  document.getElementById('addHeadBtn').addEventListener('click', () => {
    const val = valueInput.value.trim();
    if(val === '') {
      alert('Please enter a value');
      valueInput.focus();
      return;
    }
    list.addAtHead(val);
    log(`Added "${val}" at head`);
    renderList();
    valueInput.value = '';
    valueInput.focus();
  });

  document.getElementById('addTailBtn').addEventListener('click', () => {
    const val = valueInput.value.trim();
    if(val === '') {
      alert('Please enter a value');
      valueInput.focus();
      return;
    }
    list.addAtTail(val);
    log(`Added "${val}" at tail`);
    renderList();
    valueInput.value = '';
    valueInput.focus();
  });

  document.getElementById('addAtIndexBtn').addEventListener('click', () => {
    const val = valueInput.value.trim();
    const idx = parseInt(indexInput.value, 10);
    if(val === '') {
      alert('Please enter a value');
      valueInput.focus();
      return;
    }
    if (isNaN(idx)) {
      alert('Please enter a valid index');
      indexInput.focus();
      return;
    }
    if (idx < 0 || idx > list.length) {
      alert('Index out of bounds');
      indexInput.focus();
      return;
    }
    list.addAtIndex(idx, val);
    log(`Added "${val}" at index ${idx}`);
    renderList();
    valueInput.value = '';
    indexInput.value = '';
    valueInput.focus();
  });

  document.getElementById('removeHeadBtn').addEventListener('click', () => {
    const removed = list.removeHead();
    if(removed === null) {
      alert('List is empty - nothing to remove');
      return;
    }
    log(`Removed "${removed}" from head`);
    renderList();
  });

  document.getElementById('removeTailBtn').addEventListener('click', () => {
    const removed = list.removeTail();
    if(removed === null) {
      alert('List is empty - nothing to remove');
      return;
    }
    log(`Removed "${removed}" from tail`);
    renderList();
  });

  document.getElementById('removeAtIndexBtn').addEventListener('click', () => {
    const idx = parseInt(indexInput.value, 10);
    if (isNaN(idx)) {
      alert('Please enter a valid index');
      indexInput.focus();
      return;
    }
    const removed = list.removeAtIndex(idx);
    if(removed === null) {
      alert('Index out of bounds or list empty');
      indexInput.focus();
      return;
    }
    log(`Removed "${removed}" at index ${idx}`);
    renderList();
    indexInput.value = '';
  });

  document.getElementById('clearBtn').addEventListener('click', () => {
    if (!confirm('Are you sure you want to clear the entire list?')) return;
    list.clear();
    log('Cleared the entire list');
    renderList();
  });

  renderList();
</script>
<footer>
  &copy; 2024 Linked List Demo
</footer>
</body>
</html>