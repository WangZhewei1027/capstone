<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hash Map Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f4f4f9;
  }
  h1 {
    color: #333;
  }
  #hash-map {
    margin-top: 1rem;
    border-collapse: collapse;
    width: 100%;
    max-width: 600px;
  }
  #hash-map th, #hash-map td {
    border: 1px solid #bbb;
    padding: 0.5rem 1rem;
    text-align: left;
  }
  #hash-map th {
    background-color: #e0e0e0;
  }
  input, select, button {
    margin: 0.5rem 0;
    padding: 0.4rem 0.8rem;
    font-size: 1rem;
  }
  label {
    display: block;
    margin-top: 1rem;
    font-weight: bold;
  }
  #output {
    margin-top: 1rem;
    padding: 0.7rem;
    background: #fff8c6;
    border: 1px solid #f0e68c;
    max-width: 600px;
    white-space: pre-wrap;
    min-height: 40px;
  }
  .footer {
    margin-top: 3rem;
    font-size: 0.9rem;
    color: #666;
  }
</style>
</head>
<body>
<h1>Hash Map (JavaScript Map) Demonstration</h1>

<p>
  This demo shows a <strong>hash map</strong> concept using the built-in <code>Map</code> class in JavaScript.
  You can add, retrieve, check, delete key-value pairs, and view the entire map.
</p>

<label for="keyInput">Key:</label>
<input type="text" id="keyInput" placeholder="Enter key" />

<label for="valueInput">Value:</label>
<input type="text" id="valueInput" placeholder="Enter value" />

<br />

<label for="operation">Operation:</label>
<select id="operation">
  <option value="set">Add / Set</option>
  <option value="get">Get Value</option>
  <option value="has">Check if Key Exists</option>
  <option value="delete">Delete Key</option>
  <option value="clear">Clear Map</option>
  <option value="size">Get Map Size</option>
  <option value="keys">Get All Keys</option>
  <option value="values">Get All Values</option>
  <option value="entries">Get All Entries</option>
</select>

<br />
<button id="executeBtn">Execute</button>

<div id="output" aria-live="polite" role="region"></div>

<h2>Current Hash Map Content</h2>
<table id="hash-map" aria-label="Hash Map contents">
  <thead>
    <tr>
      <th>Key</th><th>Value</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<script>
(() => {
  const map = new Map();

  const keyInput = document.getElementById('keyInput');
  const valueInput = document.getElementById('valueInput');
  const operation = document.getElementById('operation');
  const executeBtn = document.getElementById('executeBtn');
  const output = document.getElementById('output');
  const tableBody = document.querySelector('#hash-map tbody');

  function renderMap() {
    tableBody.innerHTML = '';
    if (map.size === 0) {
      const tr = document.createElement('tr');
      const td = document.createElement('td');
      td.colSpan = 2;
      td.style.textAlign = 'center';
      td.textContent = '(empty)';
      tr.appendChild(td);
      tableBody.appendChild(tr);
      return;
    }
    for (let [k, v] of map.entries()) {
      const tr = document.createElement('tr');
      let tdKey = document.createElement('td');
      let tdValue = document.createElement('td');

      // Display keys and values nicely depending on type:
      tdKey.textContent = stringify(k);
      tdValue.textContent = stringify(v);

      tr.appendChild(tdKey);
      tr.appendChild(tdValue);
      tableBody.appendChild(tr);
    }
  }

  // Helper function to stringify various types for display
  function stringify(val) {
    if (val === null) return 'null';
    if (val === undefined) return 'undefined';
    if (typeof val === 'object') {
      try {
        return JSON.stringify(val);
      } catch {
        return val.toString();
      }
    }
    return String(val);
  }

  // Show/hide value input based on operation
  function updateInputs() {
    const op = operation.value;
    if (op === 'set') {
      valueInput.disabled = false;
    } else {
      valueInput.disabled = true;
      valueInput.value = '';
    }
  }

  // Parse user input key to appropriate type (string by default)
  // For demonstration let's keep keys as strings (most common)
  // You could extend to parse JSON for complex keys but this confuses beginners
  function getKey() {
    return keyInput.value.trim();
  }

  // For set operation, value is a string too
  function getValue() {
    return valueInput.value;
  }

  function showOutput(msg) {
    output.textContent = msg;
  }

  executeBtn.addEventListener('click', () => {
    const op = operation.value;
    const k = getKey();

    switch(op) {
      case 'set':
        if (k === '') {
          showOutput('Please enter a key.');
          return;
        }
        const v = getValue();
        map.set(k,v);
        showOutput(`Set key "${k}" with value "${v}".`);
        renderMap();
        break;

      case 'get':
        if (k === '') {
          showOutput('Please enter a key.');
          return;
        }
        if (map.has(k)) {
          showOutput(`Value for key "${k}": ${stringify(map.get(k))}`);
        } else {
          showOutput(`Key "${k}" does not exist.`);
        }
        break;

      case 'has':
        if (k === '') {
          showOutput('Please enter a key.');
          return;
        }
        showOutput(map.has(k)
          ? `Map has the key "${k}".`
          : `Map does NOT have the key "${k}".`);
        break;

      case 'delete':
        if (k === '') {
          showOutput('Please enter a key.');
          return;
        }
        if (map.delete(k)) {
          showOutput(`Key "${k}" deleted from the map.`);
          renderMap();
        } else {
          showOutput(`Key "${k}" was not found in the map.`);
        }
        break;

      case 'clear':
        map.clear();
        renderMap();
        showOutput('Map cleared.');
        break;

      case 'size':
        showOutput(`Map size: ${map.size}`);
        break;

      case 'keys':
        if (map.size === 0) {
          showOutput('Map is empty. No keys.');
        } else {
          showOutput('Keys:\n' + [...map.keys()].map(stringify).join('\n'));
        }
        break;

      case 'values':
        if (map.size === 0) {
          showOutput('Map is empty. No values.');
        } else {
          showOutput('Values:\n' + [...map.values()].map(stringify).join('\n'));
        }
        break;

      case 'entries':
        if (map.size === 0) {
          showOutput('Map is empty. No entries.');
        } else {
          const entriesText = [...map.entries()]
            .map(([key, val]) => `${stringify(key)} => ${stringify(val)}`)
            .join('\n');
          showOutput('Entries:\n' + entriesText);
        }
        break;

      default:
        showOutput('Unknown operation.');
    }
  });

  operation.addEventListener('change', () => {
    updateInputs();
    showOutput('');
  });

  // Initial setup:
  updateInputs();
  renderMap();

})();
</script>

<div class="footer">
  &copy; 2024 Hash Map Demo using JavaScript Map
</div>
</body>
</html>