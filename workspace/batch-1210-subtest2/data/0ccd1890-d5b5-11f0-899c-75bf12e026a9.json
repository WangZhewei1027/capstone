{
  "id": "0ccd1890-d5b5-11f0-899c-75bf12e026a9",
  "timestamp": "2025-12-10T10:45:22.797Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Huffman Coding",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Huffman Coding Demonstration</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2rem;\n    background: #f5f6fa;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n    color: #2f3640;\n  }\n  textarea {\n    width: 100%;\n    height: 4rem;\n    font-size: 1.1rem;\n    padding: 0.5rem;\n    border-radius: 6px;\n    border: 1px solid #ccc;\n    resize: vertical;\n  }\n  button {\n    margin-top: 1rem;\n    padding: 0.7rem 1.5rem;\n    font-size: 1rem;\n    border: none;\n    border-radius: 8px;\n    background-color: #273c75;\n    color: white;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  button:hover {\n    background-color: #40739e;\n  }\n  .results {\n    margin-top: 2rem;\n    background: white;\n    padding: 1.2rem 1.5rem;\n    border-radius: 8px;\n    box-shadow: 0 3px 8px rgb(0 0 0 / 0.1);\n  }\n  .section {\n    margin-bottom: 1.8rem;\n  }\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 0.5rem;\n  }\n  th, td {\n    text-align: center;\n    border: 1px solid #ccc;\n    padding: 0.4rem 0.6rem;\n  }\n  th {\n    background: #dcdde1;\n  }\n  pre {\n    background: #f0f0f0;\n    padding: 1rem;\n    border-radius: 6px;\n    overflow-x: auto;\n  }\n  .tree-node {\n    background: #718093;\n    color: white;\n    display: inline-block;\n    padding: 0.3rem 0.5rem;\n    border-radius: 50%;\n    font-weight: bold;\n  }\n  .tree-branch {\n    margin-left: 1.5rem;\n    border-left: 2px solid #95a5a6;\n    padding-left: 1rem;\n  }\n  .code-output {\n    font-family: monospace;\n    font-size: 1.1rem;\n    word-break: break-all;\n    background: #dff9fb;\n    padding: 1rem;\n    border-radius: 6px;\n    margin-top: 0.3rem;\n  }\n  .highlight {\n    font-weight: bold;\n    color: #e84118;\n  }\n</style>\n</head>\n<body>\n<h1>Huffman Coding Demonstration</h1>\n<p>Enter a string below and click <strong>Encode</strong>. The page will show the Huffman tree, codes for each character, and the compressed bitstring.</p>\n<textarea id=\"inputText\" placeholder=\"Type your text here... (example: aaabbc)\"></textarea>\n<br />\n<button id=\"encodeBtn\">Encode</button>\n\n<div class=\"results\" id=\"results\" style=\"display:none;\">\n  <div class=\"section\" id=\"freqSection\">\n    <h2>Character Frequencies</h2>\n    <table id=\"freqTable\">\n      <thead>\n        <tr><th>Character</th><th>Frequency</th></tr>\n      </thead>\n      <tbody></tbody>\n    </table>\n  </div>\n  <div class=\"section\" id=\"treeSection\">\n    <h2>Huffman Tree Structure</h2>\n    <div id=\"treeDisplay\"></div>\n  </div>\n  <div class=\"section\" id=\"codesSection\">\n    <h2>Huffman Codes for Each Character</h2>\n    <table id=\"codesTable\">\n      <thead>\n        <tr><th>Character</th><th>Code</th></tr>\n      </thead>\n      <tbody></tbody>\n    </table>\n  </div>\n  <div class=\"section\" id=\"compressedSection\">\n    <h2>Compressed Bitstring (Encoded Output)</h2>\n    <pre id=\"compressedOutput\"></pre>\n  </div>\n  <div class=\"section\" id=\"sizesSection\">\n    <h2>Size Comparison</h2>\n    <p><strong>Original size:</strong> <span id=\"origSize\"></span> bits</p>\n    <p><strong>Huffman encoded size:</strong> <span id=\"encodedSize\"></span> bits</p>\n    <p><strong>Compression ratio:</strong> <span id=\"compressionRatio\"></span>%</p>\n  </div>\n</div>\n\n<script>\n// Huffman Coding Implementation:\n\n// Node constructor for tree\nfunction Node(char, freq, left = null, right = null) {\n  this.char = char;\n  this.freq = freq;\n  this.left = left;\n  this.right = right;\n}\n\n// Priority queue (min-heap) based on frequency:\nclass PriorityQueue {\n  constructor() {\n    this.nodes = [];\n  }\n  enqueue(node) {\n    this.nodes.push(node);\n    this.nodes.sort((a,b) => a.freq - b.freq);\n  }\n  dequeue() {\n    return this.nodes.shift();\n  }\n  size() {\n    return this.nodes.length;\n  }\n}\n\n// Generate frequency map from text\nfunction buildFrequencyMap(text) {\n  const freqMap = new Map();\n  for (const c of text) {\n    freqMap.set(c, (freqMap.get(c) || 0) + 1);\n  }\n  return freqMap;\n}\n\n// Build the Huffman tree from freqMap\nfunction buildHuffmanTree(freqMap) {\n  const pq = new PriorityQueue();\n  for (const [char, freq] of freqMap.entries()) {\n    pq.enqueue(new Node(char, freq));\n  }\n\n  while (pq.size() > 1) {\n    let left = pq.dequeue();\n    let right = pq.dequeue();\n    let merged = new Node(null, left.freq + right.freq, left, right);\n    pq.enqueue(merged);\n  }\n  return pq.dequeue();\n}\n\n// Generate codes for each character by traversing tree\nfunction generateCodes(node, prefix = '', codes = {}) {\n  if (!node.left && !node.right && node.char !== null) { // leaf node\n    codes[node.char] = prefix || \"0\"; // handle single char edge case\n    return codes;\n  }\n  if (node.left) generateCodes(node.left, prefix + '0', codes);\n  if (node.right) generateCodes(node.right, prefix + '1', codes);\n  return codes;\n}\n\n// Visualize the Huffman tree recursively\nfunction renderTreeNode(node) {\n  if (!node) return document.createTextNode('');\n  let container = document.createElement('div');\n\n  if (!node.left && !node.right) { // leaf node\n    const leafSpan = document.createElement('span');\n    leafSpan.className = 'tree-node';\n    leafSpan.title = `Char: '${node.char}'\\nFreq: ${node.freq}`;\n    leafSpan.textContent = node.char === ' ' ? '[space]' : node.char;\n    container.appendChild(leafSpan);\n    container.appendChild(document.createTextNode(` (${node.freq})`));\n    return container;\n  }\n\n  // internal node with frequency sum\n  const internalSpan = document.createElement('span');\n  internalSpan.className = 'tree-node';\n  internalSpan.title = `Freq: ${node.freq}`;\n  internalSpan.textContent = node.freq;\n  container.appendChild(internalSpan);\n\n  // children\n  const childrenDiv = document.createElement('div');\n  childrenDiv.className = 'tree-branch';\n\n  // Left branch labeled 0\n  const leftBranch = document.createElement('div');\n  leftBranch.textContent = '0 → ';\n  leftBranch.appendChild(renderTreeNode(node.left));\n  childrenDiv.appendChild(leftBranch);\n\n  // Right branch labeled 1\n  const rightBranch = document.createElement('div');\n  rightBranch.textContent = '1 → ';\n  rightBranch.appendChild(renderTreeNode(node.right));\n  childrenDiv.appendChild(rightBranch);\n\n  container.appendChild(childrenDiv);\n  return container;\n}\n\n// Convert string to bits with Huffman codes\nfunction encodeText(text, codes) {\n  let bitstring = '';\n  for (const c of text) {\n    bitstring += codes[c];\n  }\n  return bitstring;\n}\n\n// Main execution on button click\ndocument.getElementById('encodeBtn').addEventListener('click', () => {\n  const text = document.getElementById('inputText').value;\n  const resultsDiv = document.getElementById('results');\n\n  if (!text) {\n    alert(\"Please enter some text to encode.\");\n    resultsDiv.style.display = 'none';\n    return;\n  }\n\n  // 1. Frequency Map\n  const freqMap = buildFrequencyMap(text);\n\n  // 2. Build Huffman Tree\n  const huffTree = buildHuffmanTree(freqMap);\n\n  // 3. Generate Codes\n  const codes = generateCodes(huffTree);\n\n  // 4. Encode text\n  const encodedBits = encodeText(text, codes);\n\n  // Show frequency table\n  const freqTableBody = document.getElementById('freqTable').querySelector('tbody');\n  freqTableBody.innerHTML = '';\n  [...freqMap.entries()]\n    .sort((a,b) => b[1] - a[1])\n    .forEach(([char,freq]) => {\n      const tr = document.createElement('tr');\n      const charCell = document.createElement('td');\n      charCell.textContent = char === ' ' ? '[space]' : char;\n      const freqCell = document.createElement('td');\n      freqCell.textContent = freq;\n      tr.appendChild(charCell);\n      tr.appendChild(freqCell);\n      freqTableBody.appendChild(tr);\n    });\n\n  // Show Huffman tree\n  const treeDisplay = document.getElementById('treeDisplay');\n  treeDisplay.innerHTML = '';\n  treeDisplay.appendChild(renderTreeNode(huffTree));\n\n  // Show codes table\n  const codesTableBody = document.getElementById('codesTable').querySelector('tbody');\n  codesTableBody.innerHTML = '';\n  Object.entries(codes)\n    .sort((a,b) => a[0].localeCompare(b[0]))\n    .forEach(([char, code]) => {\n      const tr = document.createElement('tr');\n      const charCell = document.createElement('td');\n      charCell.textContent = char === ' ' ? '[space]' : char;\n      const codeCell = document.createElement('td');\n      codeCell.textContent = code;\n      tr.appendChild(charCell);\n      tr.appendChild(codeCell);\n      codesTableBody.appendChild(tr);\n    });\n\n  // Show encoded bitstring\n  const compressedOutput = document.getElementById('compressedOutput');\n  compressedOutput.textContent = encodedBits;\n\n  // Size calculations\n  // Assuming 8 bits per character original (ASCII)\n  const originalBits = text.length * 8;\n  const encodedBitsLength = encodedBits.length;\n  const compressionRatio = ((1 - encodedBitsLength/originalBits)*100).toFixed(2);\n\n  document.getElementById('origSize').textContent = originalBits;\n  document.getElementById('encodedSize').textContent = encodedBitsLength;\n  document.getElementById('compressionRatio').textContent = compressionRatio;\n\n  resultsDiv.style.display = 'block';\n});\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Huffman Coding"
    }
  ],
  "topic": "Huffman Coding",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}