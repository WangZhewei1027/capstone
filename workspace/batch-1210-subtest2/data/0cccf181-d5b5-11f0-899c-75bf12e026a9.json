{
  "id": "0cccf181-d5b5-11f0-899c-75bf12e026a9",
  "timestamp": "2025-12-10T10:45:18.376Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Knapsack Problem",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Knapsack Problem Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 1em 2em;\n    max-width: 800px;\n  }\n  h1 {\n    text-align: center;\n  }\n  table {\n    border-collapse: collapse;\n    width: 100%;\n    margin-top: 1em;\n  }\n  th, td {\n    border: 1px solid #777;\n    text-align: center;\n    padding: 0.3em 0.6em;\n  }\n  th {\n    background: #eee;\n  }\n  input[type=\"number\"] {\n    width: 5em;\n  }\n  button {\n    margin-top: 1em;\n    padding: 0.5em 1em;\n    font-size: 1em;\n    cursor: pointer;\n  }\n  #result {\n    margin-top: 1em;\n    background: #f9f9f9;\n    border: 1px solid #ccc;\n    padding: 1em;\n  }\n  #itemsContainer {\n    margin-bottom: 1em;\n  }\n  .item-row {\n    margin-bottom: 0.5em;\n  }\n  label {\n    margin-right: 0.5em;\n  }\n  #dpTableContainer {\n    margin-top: 2em;\n    overflow-x: auto;\n  }\n  #dpTableContainer table {\n    font-size: 0.8em;\n  }\n</style>\n</head>\n<body>\n\n<h1>0/1 Knapsack Problem</h1>\n\n<p>\n  Given items with weights and values and a maximum carrying capacity (knapsack weight), \n  find the subset of items that maximizes the total value without exceeding the capacity.\n</p>\n\n<div>\n  <label for=\"capacity\">Knapsack Capacity: </label>\n  <input type=\"number\" id=\"capacity\" min=\"1\" value=\"10\" />\n</div>\n\n<h3>Items (Weight & Value)</h3>\n<div id=\"itemsContainer\"></div>\n\n<button id=\"addItemBtn\">Add Item</button>\n<button id=\"solveBtn\">Solve Knapsack</button>\n\n<div id=\"result\"></div>\n\n<div id=\"dpTableContainer\"></div>\n\n<script>\n  // Initialize some example items\n  let items = [\n    {weight: 3, value: 25},\n    {weight: 2, value: 20},\n    {weight: 1, value: 15},\n    {weight: 4, value: 40},\n    {weight: 5, value: 50}\n  ];\n\n  const itemsContainer = document.getElementById(\"itemsContainer\");\n  const addItemBtn = document.getElementById(\"addItemBtn\");\n  const solveBtn = document.getElementById(\"solveBtn\");\n  const capacityInput = document.getElementById(\"capacity\");\n  const resultDiv = document.getElementById(\"result\");\n  const dpTableContainer = document.getElementById(\"dpTableContainer\");\n\n  // Render items input rows\n  function renderItems() {\n    itemsContainer.innerHTML = \"\";\n    items.forEach((item, i) => {\n      const div = document.createElement(\"div\");\n      div.className = \"item-row\";\n\n      // Weight input\n      const wLabel = document.createElement(\"label\");\n      wLabel.textContent = `Weight #${i+1}:`;\n      const wInput = document.createElement(\"input\");\n      wInput.type = \"number\";\n      wInput.min = 1;\n      wInput.value = item.weight;\n      wInput.dataset.index = i;\n      wInput.dataset.type = \"weight\";\n\n      // Value input\n      const vLabel = document.createElement(\"label\");\n      vLabel.textContent = `Value #${i+1}:`;\n      const vInput = document.createElement(\"input\");\n      vInput.type = \"number\";\n      vInput.min = 0;\n      vInput.value = item.value;\n      vInput.dataset.index = i;\n      vInput.dataset.type = \"value\";\n\n      // Delete button\n      const delBtn = document.createElement(\"button\");\n      delBtn.textContent = \"Remove\";\n      delBtn.style.marginLeft = \"10px\";\n      delBtn.dataset.index = i;\n      delBtn.onclick = () => {\n        items.splice(i, 1);\n        renderItems();\n      };\n\n      div.appendChild(wLabel);\n      div.appendChild(wInput);\n      div.appendChild(vLabel);\n      div.appendChild(vInput);\n      div.appendChild(delBtn);\n\n      itemsContainer.appendChild(div);\n    });\n  }\n\n  // Update items array on input change\n  itemsContainer.addEventListener(\"input\", e => {\n    const target = e.target;\n    if (target.tagName === \"INPUT\") {\n      const i = Number(target.dataset.index);\n      if (target.dataset.type === \"weight\") {\n        let val = parseInt(target.value);\n        if (val > 0) {\n          items[i].weight = val;\n        }\n      } else if (target.dataset.type === \"value\") {\n        let val = parseInt(target.value);\n        if (val >= 0) {\n          items[i].value = val;\n        }\n      }\n    }\n  });\n\n  addItemBtn.onclick = () => {\n    items.push({weight: 1, value: 0});\n    renderItems();\n  };\n\n  // Knapsack DP solver\n  function knapsack(weights, values, capacity) {\n    const n = weights.length;\n    // dp[i][w]: max value for first i items with capacity w\n    const dp = Array.from({length: n+1}, () =>\n      new Array(capacity+1).fill(0)\n    );\n\n    for (let i=1; i <= n; i++) {\n      const wt = weights[i-1], val = values[i-1];\n      for (let w=0; w <= capacity; w++) {\n        if (wt > w) {\n          dp[i][w] = dp[i-1][w];\n        } else {\n          dp[i][w] = Math.max(dp[i-1][w], dp[i-1][w - wt] + val);\n        }\n      }\n    }\n\n    // To find chosen items, trace back\n    let w = capacity;\n    const chosen = [];\n    for (let i = n; i > 0; i--) {\n      if (dp[i][w] !== dp[i-1][w]) {\n        chosen.push(i-1); // item chosen\n        w -= weights[i-1];\n      }\n    }\n    chosen.reverse();\n\n    return {maxValue: dp[n][capacity], chosenItems: chosen, dpTable: dp};\n  }\n\n  // Render DP table for educational purposes\n  function renderDPTable(dp, weights, values, capacity) {\n    const n = weights.length;\n\n    // Build table\n    const table = document.createElement(\"table\");\n\n    // Header row: capacity labels\n    const headerRow = document.createElement(\"tr\");\n    let th = document.createElement(\"th\");\n    th.textContent = \"Items \\\\ Capacity\";\n    headerRow.appendChild(th);\n    for (let w=0; w <= capacity; w++) {\n      th = document.createElement(\"th\");\n      th.textContent = w;\n      headerRow.appendChild(th);\n    }\n    table.appendChild(headerRow);\n\n    // Rows\n    for (let i=0; i <= n; i++) {\n      const tr = document.createElement(\"tr\");\n      const itemCell = document.createElement(\"th\");\n      if (i === 0) {\n        itemCell.textContent = \"0 (no items)\";\n      } else {\n        itemCell.textContent = `Item ${i} (w:${weights[i-1]}, v:${values[i-1]})`;\n      }\n      tr.appendChild(itemCell);\n      for (let w=0; w <= capacity; w++) {\n        const td = document.createElement(\"td\");\n        td.textContent = dp[i][w];\n        tr.appendChild(td);\n      }\n      table.appendChild(tr);\n    }\n\n    dpTableContainer.innerHTML = \"<h3>DP Table (Maximum Values)</h3>\";\n    dpTableContainer.appendChild(table);\n  }\n\n  solveBtn.onclick = () => {\n    // Validate inputs\n    const capacity = parseInt(capacityInput.value);\n    if (!(capacity > 0)) {\n      alert(\"Please enter a positive knapsack capacity.\");\n      return;\n    }\n    if (items.length === 0) {\n      alert(\"Please add at least one item.\");\n      return;\n    }\n    for (const item of items) {\n      if (!(item.weight > 0) || !(item.value >= 0)) {\n        alert(\"Please enter valid weights and values for all items.\");\n        return;\n      }\n    }\n\n    const weights = items.map(i => i.weight);\n    const values = items.map(i => i.value);\n\n    const {maxValue, chosenItems, dpTable} = knapsack(weights, values, capacity);\n\n    let html = `<h3>Result</h3>`;\n    html += `<p><strong>Maximum Value:</strong> ${maxValue}</p>`;\n\n    if (chosenItems.length === 0) {\n      html += \"<p>No items can be taken (capacity too small or all items too heavy).</p>\";\n    } else {\n      html += \"<p><strong>Items chosen:</strong></p><ul>\";\n      chosenItems.forEach(i => {\n        html += `<li>Item ${i+1} - Weight: ${weights[i]}, Value: ${values[i]}</li>`;\n      });\n      html += \"</ul>\";\n    }\n\n    resultDiv.innerHTML = html;\n\n    // Render dp table for visualization\n    renderDPTable(dpTable, weights, values, capacity);\n  };\n\n  // Initial render\n  renderItems();\n\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Knapsack Problem"
    }
  ],
  "topic": "Knapsack Problem",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}