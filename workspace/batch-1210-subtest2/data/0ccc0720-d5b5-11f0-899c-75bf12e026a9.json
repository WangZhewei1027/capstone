{
  "id": "0ccc0720-d5b5-11f0-899c-75bf12e026a9",
  "timestamp": "2025-12-10T10:45:25.642Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Insertion Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Insertion Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #fafafa;\n  }\n  h1 {\n    text-align: center;\n  }\n  #arrayInput {\n    width: 80%;\n    margin: 0 auto 10px;\n    display: block;\n    font-size: 16px;\n    padding: 8px;\n  }\n  #buttons {\n    text-align: center;\n    margin-bottom: 20px;\n  }\n  button {\n    font-size: 16px;\n    padding: 8px 14px;\n    margin: 0 5px;\n    cursor: pointer;\n  }\n  #message {\n    text-align: center;\n    margin-bottom: 10px;\n    height: 20px;\n    font-weight: bold;\n    color: #333;\n  }\n  #arrayContainer {\n    display: flex;\n    justify-content: center;\n    gap: 6px;\n    flex-wrap: wrap;\n    max-width: 800px;\n    margin: 0 auto;\n  }\n  .bar {\n    background-color: steelblue;\n    color: white;\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    font-weight: bold;\n    border-radius: 4px 4px 0 0;\n    transition: background-color 0.3s ease;\n  }\n  .bar.highlight {\n    background-color: #ff704d;\n  }\n  .bar.current {\n    background-color: #4caf50;\n  }\n  .bar.compare {\n    background-color: #ffa726;\n  }\n</style>\n</head>\n<body>\n<h1>Insertion Sort Visualization</h1>\n<input\n  id=\"arrayInput\"\n  type=\"text\"\n  placeholder=\"Enter numbers separated by commas, e.g. 5,3,8,6,2\"\n/>\n<div id=\"buttons\">\n  <button id=\"startBtn\">Start Sorting</button>\n  <button id=\"resetBtn\" disabled>Reset</button>\n</div>\n<div id=\"message\"></div>\n<div id=\"arrayContainer\"></div>\n\n<script>\n(() => {\n  const arrayInput = document.getElementById(\"arrayInput\");\n  const startBtn = document.getElementById(\"startBtn\");\n  const resetBtn = document.getElementById(\"resetBtn\");\n  const arrayContainer = document.getElementById(\"arrayContainer\");\n  const message = document.getElementById(\"message\");\n\n  let array = [];\n  let bars = [];\n  let sorting = false;\n\n  function createBars(arr) {\n    arrayContainer.innerHTML = \"\";\n    bars = [];\n    const maxVal = Math.max(...arr);\n    const scaleFactor = 300 / maxVal;\n    arr.forEach((num) => {\n      const bar = document.createElement(\"div\");\n      bar.classList.add(\"bar\");\n      bar.style.height = `${num * scaleFactor}px`;\n      bar.style.width = \"30px\";\n      bar.textContent = num;\n      bars.push(bar);\n      arrayContainer.appendChild(bar);\n    });\n  }\n\n  // Sleep utility for delay\n  function sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  async function insertionSort(arr) {\n    message.textContent = \"Starting insertion sort...\";\n    for (let i = 1; i < arr.length; i++) {\n      let key = arr[i];\n      let j = i - 1;\n\n      // Highlight the current key bar\n      setBarColors(i, \"current\");\n      message.textContent = `Considering element ${key} at index ${i}`;\n\n      while (j >= 0 && arr[j] > key) {\n        setBarColors(j, \"compare\");\n\n        message.textContent = `Compare ${arr[j]} (index ${j}) > ${key}`;\n        await sleep(700);\n\n        arr[j + 1] = arr[j];\n        updateBarHeight(j + 1, arr[j]);\n        setBarColors(j + 1, \"highlight\");\n        message.textContent = `Shift ${arr[j]} from index ${j} to index ${j + 1}`;\n        await sleep(700);\n\n        resetBarColors(j + 1);\n        resetBarColors(j);\n        j = j - 1;\n      }\n\n      arr[j + 1] = key;\n      updateBarHeight(j + 1, key);\n\n      resetAllBarColors();\n      message.textContent = `Inserted ${key} at position ${j + 1}`;\n      await sleep(800);\n    }\n    message.textContent = \"Array sorted!\";\n    sorting = false;\n    startBtn.disabled = false;\n    resetBtn.disabled = false;\n  }\n\n  function setBarColors(index, type) {\n    if (bars[index]) {\n      bars[index].classList.add(type);\n    }\n  }\n\n  function resetBarColors(index) {\n    if (bars[index]) {\n      bars[index].classList.remove(\"current\", \"compare\", \"highlight\");\n    }\n  }\n\n  function resetAllBarColors() {\n    bars.forEach((bar) => {\n      bar.classList.remove(\"current\", \"compare\", \"highlight\");\n    });\n  }\n\n  function updateBarHeight(index, value) {\n    const maxVal = Math.max(...array);\n    const scaleFactor = 300 / maxVal;\n    if (bars[index]) {\n      bars[index].style.height = `${value * scaleFactor}px`;\n      bars[index].textContent = value;\n    }\n  }\n\n  function validateInput(input) {\n    const parts = input.split(\",\").map((s) => s.trim());\n    if (parts.length === 0) return null;\n\n    const nums = [];\n    for (const p of parts) {\n      if (!p.match(/^-?\\d+$/)) return null;\n      nums.push(parseInt(p, 10));\n    }\n    return nums;\n  }\n\n  function reset() {\n    sorting = false;\n    message.textContent = \"\";\n    array = [];\n    bars = [];\n    arrayContainer.innerHTML = \"\";\n    arrayInput.disabled = false;\n    startBtn.disabled = false;\n    resetBtn.disabled = true;\n  }\n\n  startBtn.addEventListener(\"click\", () => {\n    const userInput = arrayInput.value.trim();\n    if (!userInput) {\n      alert(\"Please enter a comma-separated list of numbers.\");\n      return;\n    }\n    const nums = validateInput(userInput);\n    if (!nums || nums.length === 0) {\n      alert(\"Invalid input. Please enter only integers separated by commas.\");\n      return;\n    }\n    array = nums;\n    createBars(array);\n    sorting = true;\n    startBtn.disabled = true;\n    resetBtn.disabled = true;\n    arrayInput.disabled = true;\n    insertionSort(array).then(() => {\n      resetBtn.disabled = false;\n      arrayInput.disabled = false;\n    });\n  });\n\n  resetBtn.addEventListener(\"click\", () => {\n    reset();\n  });\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Insertion Sort"
    }
  ],
  "topic": "Insertion Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}