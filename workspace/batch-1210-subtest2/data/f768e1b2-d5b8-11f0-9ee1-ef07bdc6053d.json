{
  "id": "f768e1b2-d5b8-11f0-9ee1-ef07bdc6053d",
  "timestamp": "2025-12-10T11:13:35.475Z",
  "model": "gpt-4o-mini",
  "status": "success",
  "question": "K-Nearest Neighbors (KNN)",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>K-Nearest Neighbors (KNN) Visualization</title>\n    <style>\n        body { font-family: Arial, sans-serif; text-align: center; }\n        #canvas { border: 1px solid black; margin: 20px auto; display: block; }\n        #controls { margin: 20px; }\n        .data-point { cursor: pointer; }\n    </style>\n</head>\n<body>\n\n    <h1>K-Nearest Neighbors (KNN) Visualization</h1>\n    <canvas id=\"canvas\" width=\"500\" height=\"500\"></canvas>\n\n    <div id=\"controls\">\n        <label for=\"k-value\">Enter K value:</label>\n        <input type=\"number\" id=\"k-value\" value=\"3\" min=\"1\" max=\"10\">\n        <button id=\"add-data\">Add Data Point</button>\n        <button id=\"compute-knn\">Compute KNN</button>\n    </div>\n\n    <script>\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n\n        let points = [];\n        let k = 3;  // Default K value\n        const colors = ['red', 'blue']; // Example colors for classes\n\n        // Drawing function for points\n        function drawPoints() {\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            points.forEach((point, index) => {\n                ctx.fillStyle = colors[point.class];\n                ctx.beginPath();\n                ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n                ctx.fill();\n                ctx.closePath();\n            });\n        }\n\n        // Function to calculate distance\n        function distance(point1, point2) {\n            return Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2));\n        }\n\n        // Function to compute KNN\n        function computeKNN(targetPoint) {\n            const distances = points.map(point => ({\n                point,\n                distance: distance(point, targetPoint)\n            }));\n\n            distances.sort((a, b) => a.distance - b.distance);\n            const nearestNeighbors = distances.slice(0, k);\n\n            // Count votes\n            const votes = {};\n            nearestNeighbors.forEach(({ point }) => {\n                votes[point.class] = (votes[point.class] || 0) + 1;\n            });\n\n            // Majority vote\n            let predictedClass = Object.keys(votes).reduce((a, b) => votes[a] > votes[b] ? a : b);\n            return predictedClass;\n        }\n\n        // Add event listener for canvas\n        canvas.addEventListener('click', event => {\n            const rect = canvas.getBoundingClientRect();\n            const x = event.clientX - rect.left;\n            const y = event.clientY - rect.top;\n\n            let newPoint = { x: x, y: y, class: points.length % 2 }; // Alternating classes for demonstration\n            points.push(newPoint);\n            drawPoints();\n        });\n\n        // Add event listener for compute KNN button\n        document.getElementById('compute-knn').addEventListener('click', () => {\n            k = parseInt(document.getElementById('k-value').value);\n            const targetPoint = { x: Math.random() * canvas.width, y: Math.random() * canvas.height, class: 'unknown' };\n\n            const predictedClass = computeKNN(targetPoint);\n            ctx.fillStyle = colors[predictedClass];\n            ctx.beginPath();\n            ctx.arc(targetPoint.x, targetPoint.y, 10, 0, Math.PI * 2);\n            ctx.fill();\n            ctx.closePath();\n\n            console.log(`Predicted class for ${targetPoint.x}, ${targetPoint.y}: Class ${predictedClass}`);\n        });\n\n        // Add event listener for adding data point button\n        document.getElementById('add-data').addEventListener('click', () => {\n            const x = Math.random() * canvas.width;\n            const y = Math.random() * canvas.height;\n            let newPoint = { x: x, y: y, class: points.length % 2 }; // Alternating classes for demonstration\n            points.push(newPoint);\n            drawPoints();\n        });\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "K-Nearest Neighbors (KNN)"
    }
  ],
  "topic": "K-Nearest Neighbors (KNN)",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}