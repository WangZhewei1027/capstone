{
  "id": "0ccbe010-d5b5-11f0-899c-75bf12e026a9",
  "timestamp": "2025-12-10T10:45:25.973Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Priority Queue",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Priority Queue Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 1rem;\n    max-width: 600px;\n  }\n  h1 {\n    text-align: center;\n  }\n  .input-section {\n    margin-bottom: 1rem;\n  }\n  label {\n    display: inline-block;\n    width: 70px;\n  }\n  input[type=\"text\"], input[type=\"number\"] {\n    width: 200px;\n    padding: 5px;\n    margin-right: 1rem;\n  }\n  button {\n    padding: 6px 12px;\n    margin-right: 10px;\n    cursor: pointer;\n  }\n  #queueVisual {\n    margin-top: 1rem;\n    padding: 10px;\n    border: 1px solid #ddd;\n    background: #fafafa;\n    min-height: 80px;\n    font-family: monospace;\n    white-space: pre-wrap;\n  }\n  .item {\n    display: inline-block;\n    margin: 0 5px 5px 0;\n    padding: 6px 10px;\n    border-radius: 4px;\n    background: #007bff;\n    color: white;\n    font-weight: bold;\n    user-select: none;\n  }\n  .item .prio {\n    font-weight: normal;\n    font-size: 0.85em;\n    color: #cce5ff;\n    margin-left: 4px;\n  }\n  .message {\n    margin-top: 0.5rem;\n    font-size: 0.9rem;\n    color: #555;\n  }\n  #dequeuedItem {\n    margin-top: 0.5rem;\n    font-weight: bold;\n  }\n</style>\n</head>\n<body>\n<h1>Priority Queue Demo</h1>\n\n<div class=\"input-section\">\n  <label for=\"itemInput\">Item:</label>\n  <input type=\"text\" id=\"itemInput\" placeholder=\"Enter value\" />\n  <label for=\"priorityInput\">Priority:</label>\n  <input type=\"number\" id=\"priorityInput\" placeholder=\"Priority (number)\" />\n  <button id=\"enqueueBtn\">Enqueue</button>\n  <button id=\"dequeueBtn\">Dequeue</button>\n  <button id=\"peekBtn\">Peek</button>\n</div>\n\n<div>\n  <strong>Queue (highest priority first):</strong>\n  <div id=\"queueVisual\"></div>\n</div>\n\n<div id=\"dequeuedItem\"></div>\n<div class=\"message\" id=\"message\"></div>\n\n<script>\n  /*\n    Priority Queue Implementation (Min-Heap based on priority):\n    Lower numeric priority value = higher priority.\n    Items with same priority: first-enqueued served first (stability).\n  */\n\n  class PriorityQueue {\n    constructor() {\n      this.heap = [];\n      this.counter = 0; // To keep insertion order for stability\n    }\n\n    // Helper methods for heap operations\n    parentIndex(idx) {\n      return Math.floor((idx - 1) / 2);\n    }\n    leftChildIndex(idx) {\n      return idx * 2 + 1;\n    }\n    rightChildIndex(idx) {\n      return idx * 2 + 2;\n    }\n\n    swap(i, j) {\n      [this.heap[i], this.heap[j]] = [this.heap[j], this.heap[i]];\n    }\n\n    compare(a, b) {\n      // Compare by priority first\n      if (a.priority < b.priority) return -1;\n      if (a.priority > b.priority) return 1;\n      // If same priority, compare insertion order (lower first)\n      return a.count - b.count;\n    }\n\n    enqueue(item, priority) {\n      if (item === '' || item == null) return false;\n      if (typeof priority !== 'number' || isNaN(priority)) return false;\n\n      const node = { item, priority, count: this.counter++ };\n      this.heap.push(node);\n      this.bubbleUp(this.heap.length - 1);\n      return true;\n    }\n\n    bubbleUp(idx) {\n      while (idx > 0) {\n        const parent = this.parentIndex(idx);\n        if (this.compare(this.heap[idx], this.heap[parent]) < 0) {\n          this.swap(idx, parent);\n          idx = parent;\n        } else {\n          break;\n        }\n      }\n    }\n\n    dequeue() {\n      if (this.isEmpty()) return null;\n      const root = this.heap[0];\n      const last = this.heap.pop();\n      if (this.heap.length > 0) {\n        this.heap[0] = last;\n        this.bubbleDown(0);\n      }\n      return root.item;\n    }\n\n    bubbleDown(idx) {\n      const length = this.heap.length;\n      while (true) {\n        let left = this.leftChildIndex(idx);\n        let right = this.rightChildIndex(idx);\n        let smallest = idx;\n\n        if (left < length && this.compare(this.heap[left], this.heap[smallest]) < 0) {\n          smallest = left;\n        }\n        if (right < length && this.compare(this.heap[right], this.heap[smallest]) < 0) {\n          smallest = right;\n        }\n        if (smallest !== idx) {\n          this.swap(idx, smallest);\n          idx = smallest;\n        } else {\n          break;\n        }\n      }\n    }\n\n    peek() {\n      if (this.isEmpty()) return null;\n      return this.heap[0].item;\n    }\n\n    isEmpty() {\n      return this.heap.length === 0;\n    }\n\n    toArray() {\n      // Return a shallow copy of array sorted as priority (not changing heap)\n      // For visualization: sort by priority and insertion count ascending\n      return [...this.heap].sort((a,b) => this.compare(a,b));\n    }\n  }\n\n  const pq = new PriorityQueue();\n\n  const itemInput = document.getElementById('itemInput');\n  const priorityInput = document.getElementById('priorityInput');\n  const enqueueBtn = document.getElementById('enqueueBtn');\n  const dequeueBtn = document.getElementById('dequeueBtn');\n  const peekBtn = document.getElementById('peekBtn');\n  const queueVisual = document.getElementById('queueVisual');\n  const message = document.getElementById('message');\n  const dequeuedItem = document.getElementById('dequeuedItem');\n\n  function updateVisual() {\n    const arr = pq.toArray();\n    if (arr.length === 0) {\n      queueVisual.textContent = '(empty)';\n      return;\n    }\n    queueVisual.innerHTML = '';\n    arr.forEach(node => {\n      const div = document.createElement('div');\n      div.className = 'item';\n      div.textContent = node.item;\n      const spanPrio = document.createElement('span');\n      spanPrio.className = 'prio';\n      spanPrio.textContent = `(p:${node.priority})`;\n      div.appendChild(spanPrio);\n      queueVisual.appendChild(div);\n    });\n  }\n\n  enqueueBtn.addEventListener('click', () => {\n    message.textContent = '';\n    dequeuedItem.textContent = '';\n    const val = itemInput.value.trim();\n    const prioRaw = priorityInput.value.trim();\n    if (val === '') {\n      message.textContent = 'Please enter an item value.';\n      return;\n    }\n    const prioNum = Number(prioRaw);\n    if (prioRaw === '' || isNaN(prioNum)) {\n      message.textContent = 'Please enter a valid numeric priority.';\n      return;\n    }\n    if (pq.enqueue(val, prioNum)) {\n      message.textContent = `Enqueued \"${val}\" with priority ${prioNum}.`;\n      itemInput.value = '';\n      priorityInput.value = '';\n      updateVisual();\n      itemInput.focus();\n    } else {\n      message.textContent = 'Failed to enqueue. Check input.';\n    }\n  });\n\n  dequeueBtn.addEventListener('click', () => {\n    message.textContent = '';\n    const removed = pq.dequeue();\n    if (removed === null) {\n      dequeuedItem.textContent = '';\n      message.textContent = 'Queue is empty, nothing to dequeue.';\n    } else {\n      dequeuedItem.textContent = `Dequeued item: \"${removed}\"`;\n      updateVisual();\n    }\n  });\n\n  peekBtn.addEventListener('click', () => {\n    message.textContent = '';\n    dequeuedItem.textContent = '';\n    const next = pq.peek();\n    if (next === null) {\n      message.textContent = 'Queue is empty.';\n    } else {\n      message.textContent = `Next to dequeue (peek): \"${next}\"`;\n    }\n  });\n\n  // Initial visualization\n  updateVisual();\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Priority Queue"
    }
  ],
  "topic": "Priority Queue",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}