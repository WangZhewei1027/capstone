{
  "id": "0ccc2e31-d5b5-11f0-899c-75bf12e026a9",
  "timestamp": "2025-12-10T10:45:29.024Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Counting Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Counting Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f5f5f5;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n    margin-bottom: 0.5em;\n  }\n  #inputArea {\n    max-width: 600px;\n    margin: 0 auto 1em auto;\n    text-align: center;\n  }\n  input[type=\"text\"] {\n    width: 80%;\n    padding: 8px;\n    font-size: 1em;\n    border: 2px solid #ccc;\n    border-radius: 4px;\n    box-sizing: border-box;\n  }\n  button {\n    margin-top: 10px;\n    padding: 10px 18px;\n    font-size: 1em;\n    background-color: #007bff;\n    border: none;\n    border-radius: 5px;\n    color: white;\n    cursor: pointer;\n  }\n  button:disabled {\n    background-color: #999;\n    cursor: not-allowed;\n  }\n  .error {\n    color: #cc0000;\n    margin-top: 10px;\n  }\n  .array-container {\n    margin-top: 20px;\n    max-width: 700px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  .title {\n    font-weight: bold;\n    margin-bottom: 6px;\n  }\n  .array-bar-container {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    gap: 6px;\n  }\n  .array-bar {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n    width: 30px;\n    background-color: #4caf50;\n    color: white;\n    font-weight: bold;\n    border-radius: 4px 4px 0 0;\n    position: relative;\n    cursor: default;\n    user-select: none;\n    transition: background-color 0.3s ease;\n  }\n  .array-bar.counting {\n    background-color: #2196f3;\n  }\n  .array-bar.output {\n    background-color: #ff9800;\n    color: black;\n  }\n  .array-bar-label {\n    margin-top: 4px;\n    font-size: 0.8em;\n    color: #555;\n  }\n  #steps {\n    max-width: 720px;\n    margin: 20px auto 0 auto;\n    background: white;\n    padding: 15px 20px;\n    border-radius: 8px;\n    box-shadow: 0 0 10px rgba(0,0,0,0.1);\n    font-family: monospace;\n    line-height: 1.4;\n    max-height: 280px;\n    overflow-y: auto;\n  }\n  #steps h2 {\n    margin-top: 0;\n    text-align: center;\n  }\n  .step-highlight {\n    background-color: #ffffcc;\n    padding: 2px 4px;\n    border-radius: 3px;\n  }\n  footer {\n    margin-top: 40px;\n    text-align: center;\n    font-size: 0.9em;\n    color: #666;\n  }\n</style>\n</head>\n<body>\n<h1>Counting Sort Visualization</h1>\n\n<div id=\"inputArea\">\n  <p>Enter integers separated by commas (range: 0 to 100):</p>\n  <input type=\"text\" id=\"inputArray\" placeholder=\"e.g. 4,2,2,8,3,3,1\" />\n  <br />\n  <button id=\"startBtn\">Start Counting Sort</button>\n  <div class=\"error\" id=\"errorMsg\"></div>\n</div>\n\n<div id=\"visualization\" class=\"array-container\" style=\"display:none;\">\n  <div>\n    <div class=\"title\">Input Array:</div>\n    <div id=\"inputBars\" class=\"array-bar-container\"></div>\n  </div>\n  <div style=\"margin-top:30px;\">\n    <div class=\"title\">Counting Array (Frequency of values):</div>\n    <div id=\"countBars\" class=\"array-bar-container\"></div>\n  </div>\n  <div style=\"margin-top:30px;\">\n    <div class=\"title\">Sorted Output Array:</div>\n    <div id=\"outputBars\" class=\"array-bar-container\"></div>\n  </div>\n</div>\n\n<div id=\"steps\" style=\"display:none;\">\n  <h2>Algorithm Steps</h2>\n  <pre id=\"stepsContent\"></pre>\n</div>\n\n<script>\n(() => {\n  const startBtn = document.getElementById('startBtn');\n  const inputArrayEl = document.getElementById('inputArray');\n  const errorMsg = document.getElementById('errorMsg');\n  const visualization = document.getElementById('visualization');\n  const inputBars = document.getElementById('inputBars');\n  const countBars = document.getElementById('countBars');\n  const outputBars = document.getElementById('outputBars');\n  const stepsDiv = document.getElementById('steps');\n  const stepsContent = document.getElementById('stepsContent');\n\n  let originalArray = [];\n  let maxVal = 0;\n  let stepLines = [];\n\n  function parseInput(str) {\n    // Split by comma, space or newlines and filter out empties\n    let parts = str.split(/[\\s,]+/).filter(x => x.length);\n    let arr = [];\n    for(let p of parts) {\n      let n = Number(p);\n      if (!Number.isInteger(n) || n < 0 || n > 100) {\n        return null;\n      }\n      arr.push(n);\n    }\n    return arr;\n  }\n\n  function createArrayBars(array, container, type) {\n    // Clear container first\n    container.innerHTML = '';\n    // For counting array, we show bars for each value even if zero count\n    // For input and output, show only existing elements\n    if(type === 'count') {\n      for (let i = 0; i < array.length; i++) {\n        let bar = document.createElement('div');\n        bar.className = 'array-bar counting';\n        bar.style.height = (array[i] * 20 + 25) + 'px';\n        bar.textContent = array[i];\n        bar.title = `Value: ${i}, Count: ${array[i]}`;\n        let label = document.createElement('div');\n        label.className = 'array-bar-label';\n        label.textContent = i;\n        bar.appendChild(label);\n        container.appendChild(bar);\n      }\n    } else {\n      array.forEach((val, idx) => {\n        let bar = document.createElement('div');\n        bar.className = type === 'input' ? 'array-bar' : 'array-bar output';\n        bar.style.height = (val * 20 + 25) + 'px';\n        bar.textContent = val;\n        bar.title = `Index: ${idx}, Value: ${val}`;\n        container.appendChild(bar);\n      });\n    }\n  }\n\n  function wait(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function runCountingSort(arr) {\n    visualization.style.display = 'block';\n    stepsDiv.style.display = 'block';\n    errorMsg.textContent = '';\n    stepLines = [];\n\n    // Show input array bars\n    createArrayBars(arr, inputBars, 'input');\n    createArrayBars([], countBars, 'count');\n    createArrayBars([], outputBars, 'output');\n    stepsContent.textContent = '';\n\n    await wait(500);\n\n    stepLines.push(`Input array: [${arr.join(', ')}]`);\n\n    // Step 1: Find max value to determine count array size\n    maxVal = Math.max(...arr);\n    stepLines.push(`Maximum value found: ${maxVal}`);\n\n    // Step 2: Initialize count array with zeros\n    let count = new Array(maxVal + 1).fill(0);\n    createArrayBars(count, countBars, 'count');\n    stepsContent.textContent = stepLines.join('\\n');\n    await wait(1000);\n\n    // Step 3: Count frequencies\n    for (let i = 0; i < arr.length; i++) {\n      count[arr[i]]++;\n      stepsContent.textContent = stepLines.join('\\n') + `\\nCounting value ${arr[i]}... count[${arr[i]}] = ${count[arr[i]]}`;\n      createArrayBars(count, countBars, 'count');\n      await wait(500);\n    }\n    stepLines.push(`Counting array after counting frequencies: [${count.join(', ')}]`);\n    stepsContent.textContent = stepLines.join('\\n');\n    await wait(1000);\n\n    // Step 4: Modify count array by adding previous counts (prefix sums)\n    stepLines.push('Computing prefix sums in count array...');\n    stepsContent.textContent = stepLines.join('\\n');\n    for (let i = 1; i < count.length; i++) {\n      count[i] = count[i] + count[i - 1];\n      stepsContent.textContent = stepLines.join('\\n') + `\\ncount[${i}] = count[${i}] + count[${i - 1}] => ${count[i]}`;\n      createArrayBars(count, countBars, 'count');\n      await wait(600);\n    }\n    stepLines.push(`Count array after prefix sums: [${count.join(', ')}]`);\n    stepsContent.textContent = stepLines.join('\\n');\n    await wait(1000);\n\n    // Step 5: Build output array\n    let output = new Array(arr.length);\n    stepLines.push('Placing elements into output array in sorted order (from right to left)...');\n    stepsContent.textContent = stepLines.join('\\n');\n    createArrayBars(output, outputBars, 'output');\n\n    for (let i = arr.length - 1; i >= 0; i--) {\n      let val = arr[i];\n      count[val]--;\n      let pos = count[val];\n      output[pos] = val;\n      stepsContent.textContent = stepLines.join('\\n') + `\\nPlacing value ${val} at output[${pos}]`;\n      createArrayBars(output, outputBars, 'output');\n      createArrayBars(count, countBars, 'count');\n      await wait(700);\n    }\n    stepLines.push(`Sorted output array: [${output.join(', ')}]`);\n    stepsContent.textContent = stepLines.join('\\n');\n  }\n\n  startBtn.addEventListener('click', () => {\n    let inputStr = inputArrayEl.value.trim();\n    let arr = parseInput(inputStr);\n    if (!arr) {\n      errorMsg.textContent = 'Invalid input! Please enter integers between 0 and 100, separated by commas.';\n      visualization.style.display = 'none';\n      stepsDiv.style.display = 'none';\n      return;\n    }\n    if(arr.length === 0) {\n      errorMsg.textContent = 'Please enter at least one number.';\n      visualization.style.display = 'none';\n      stepsDiv.style.display = 'none';\n      return;\n    }\n    errorMsg.textContent = '';\n    runCountingSort(arr);\n  });\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Counting Sort"
    }
  ],
  "topic": "Counting Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}