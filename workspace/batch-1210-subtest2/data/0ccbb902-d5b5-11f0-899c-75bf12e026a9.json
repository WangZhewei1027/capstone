{
  "id": "0ccbb902-d5b5-11f0-899c-75bf12e026a9",
  "timestamp": "2025-12-10T10:46:41.954Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Union-Find (Disjoint Set)",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Union-Find (Disjoint Set) Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 1em;\n    background: #f5f5f5;\n  }\n  h1 {\n    text-align: center;\n  }\n  #controls {\n    max-width: 600px;\n    margin: 0 auto 1em auto;\n    background: white;\n    padding: 1em;\n    border-radius: 8px;\n    box-shadow: 0 0 10px #ccc;\n  }\n  label {\n    margin-right: 0.5em;\n  }\n  input[type=number] {\n    width: 60px;\n    padding: 0.2em;\n  }\n  button {\n    margin-left: 0.5em;\n    padding: 0.5em 1em;\n    background: #007bff;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  button:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n  }\n  #message {\n    margin-top: 1em;\n    min-height: 1.5em;\n    font-weight: bold;\n  }\n  #canvas-container {\n    max-width: 700px;\n    margin: 1em auto;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 0 10px #ccc;\n    padding: 1em;\n  }\n  svg {\n    width: 100%;\n    height: 400px;\n  }\n  .node {\n    cursor: pointer;\n    user-select: none;\n  }\n  .node circle {\n    fill: #69b3a2;\n    stroke: #336655;\n    stroke-width: 2px;\n    transition: fill 0.3s;\n  }\n  .node text {\n    fill: white;\n    font-weight: bold;\n    pointer-events: none;\n  }\n  .node.root circle {\n    fill: #d9534f;\n  }\n  .edge {\n    stroke: #888;\n    stroke-width: 2px;\n  }\n</style>\n</head>\n<body>\n\n<h1>Union-Find (Disjoint Set) Visualizer</h1>\n\n<div id=\"controls\">\n  <label for=\"numElements\">Number of elements (max 20):</label>\n  <input type=\"number\" id=\"numElements\" min=\"2\" max=\"20\" value=\"8\" />\n  <button id=\"initBtn\">Initialize</button>\n  <br/><br/>\n  <label for=\"unionA\">Union A:</label>\n  <input type=\"number\" id=\"unionA\" min=\"0\" max=\"19\" value=\"0\" />\n  <label for=\"unionB\">Union B:</label>\n  <input type=\"number\" id=\"unionB\" min=\"0\" max=\"19\" value=\"1\" />\n  <button id=\"unionBtn\" disabled>Union</button>\n  <br/><br/>\n  <label for=\"findX\">Find X:</label>\n  <input type=\"number\" id=\"findX\" min=\"0\" max=\"19\" value=\"0\" />\n  <label for=\"findY\">Find Y:</label>\n  <input type=\"number\" id=\"findY\" min=\"0\" max=\"19\" value=\"1\" />\n  <button id=\"connectedBtn\" disabled>Check Connected</button>\n  <div id=\"message\"></div>\n</div>\n\n<div id=\"canvas-container\">\n  <svg id=\"graph\" viewBox=\"0 0 700 400\" aria-label=\"Union-Find graph visualization\">\n    <!-- Nodes and edges will be dynamically generated here -->\n  </svg>\n</div>\n\n<script>\n(() => {\n  // Union-Find data structure with path compression and union by rank\n  class UnionFind {\n    constructor(n) {\n      this.parent = Array.from({length: n}, (_, i) => i);\n      this.rank = new Array(n).fill(0);\n      this.n = n;\n    }\n\n    find(x) {\n      if (this.parent[x] !== x) {\n        this.parent[x] = this.find(this.parent[x]); // path compression\n      }\n      return this.parent[x];\n    }\n\n    union(x, y) {\n      let rootX = this.find(x);\n      let rootY = this.find(y);\n      if (rootX === rootY) return false; // already connected\n\n      // union by rank\n      if (this.rank[rootX] < this.rank[rootY]) {\n        this.parent[rootX] = rootY;\n      } else if (this.rank[rootX] > this.rank[rootY]) {\n        this.parent[rootY] = rootX;\n      } else {\n        this.parent[rootY] = rootX;\n        this.rank[rootX]++;\n      }\n      return true;\n    }\n\n    connected(x, y) {\n      return this.find(x) === this.find(y);\n    }\n  }\n\n  // Visualization variables\n  const svg = document.getElementById('graph');\n  const msgEl = document.getElementById('message');\n  const initBtn = document.getElementById('initBtn');\n  const unionBtn = document.getElementById('unionBtn');\n  const connectedBtn = document.getElementById('connectedBtn');\n  const numElementsInput = document.getElementById('numElements');\n  const unionAInput = document.getElementById('unionA');\n  const unionBInput = document.getElementById('unionB');\n  const findXInput = document.getElementById('findX');\n  const findYInput = document.getElementById('findY');\n\n  let uf = null;\n  let n = 0;\n\n  // Layout parameters for nodes in circle\n  function calculatePositions(n) {\n    const radius = 140;\n    const centerX = 350;\n    const centerY = 200;\n    const angleGap = (2 * Math.PI) / n;\n    let positions = [];\n    for (let i = 0; i < n; i++) {\n      const angle = i * angleGap - Math.PI/2;\n      positions.push({\n        x: centerX + radius * Math.cos(angle),\n        y: centerY + radius * Math.sin(angle),\n      });\n    }\n    return positions;\n  }\n\n  // Draw the graph of the Union-Find sets:\n  // Each element is a node.\n  // Edges connect child to its parent.\n  // Roots are colored differently.\n\n  function draw() {\n    svg.innerHTML = '';\n    if (!uf) return;\n    const positions = calculatePositions(n);\n\n    // Draw edges (child -> parent link), except for root nodes\n    for (let i = 0; i < n; i++) {\n      const p = uf.parent[i];\n      if (p !== i) {\n        // Draw line from node i to node p\n        const x1 = positions[i].x;\n        const y1 = positions[i].y;\n        const x2 = positions[p].x;\n        const y2 = positions[p].y;\n\n        // We draw a line with an arrow marker\n        const edge = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        edge.setAttribute('x1', x1);\n        edge.setAttribute('y1', y1);\n        edge.setAttribute('x2', x2);\n        edge.setAttribute('y2', y2);\n        edge.setAttribute('class', 'edge');\n        edge.setAttribute('marker-end', 'url(#arrowhead)');\n        svg.appendChild(edge);\n      }\n    }\n\n    // Define arrow marker\n    if (!svg.querySelector('marker#arrowhead')) {\n      const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n      const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');\n      marker.setAttribute('id', 'arrowhead');\n      marker.setAttribute('markerWidth', '8');\n      marker.setAttribute('markerHeight', '6');\n      marker.setAttribute('refX', '7');\n      marker.setAttribute('refY', '3');\n      marker.setAttribute('orient', 'auto');\n      const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n      path.setAttribute('d', 'M0,0 L8,3 L0,6 Z');\n      path.setAttribute('fill', '#888');\n      marker.appendChild(path);\n      defs.appendChild(marker);\n      svg.appendChild(defs);\n    }\n\n    // Draw nodes\n    for (let i = 0; i < n; i++) {\n      const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      group.setAttribute('class', 'node');\n      group.setAttribute('tabindex', 0);\n      group.setAttribute('aria-label', `Element ${i}, parent ${uf.parent[i]}, rank ${uf.rank[i]}`);\n      group.style.userSelect = 'none';\n      group.dataset.index = i;\n\n      const cx = positions[i].x;\n      const cy = positions[i].y;\n      const r = 22;\n\n      // Root nodes get different styling\n      let isRoot = (uf.parent[i] === i);\n      if (isRoot) group.classList.add('root');\n\n      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n      circle.setAttribute('cx', cx);\n      circle.setAttribute('cy', cy);\n      circle.setAttribute('r', r);\n      group.appendChild(circle);\n\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      text.setAttribute('x', cx);\n      text.setAttribute('y', cy + 6);\n      text.setAttribute('text-anchor', 'middle');\n      text.style.fontSize = '16px';\n      text.textContent = i;\n      group.appendChild(text);\n\n      svg.appendChild(group);\n    }\n  }\n\n  // Validate if inputs are in range, enable/disable buttons accordingly\n  function refreshControls() {\n    unionBtn.disabled = !uf || !validIndex(unionAInput.value) || !validIndex(unionBInput.value);\n    connectedBtn.disabled = !uf || !validIndex(findXInput.value) || !validIndex(findYInput.value);\n\n    // Update input max attributes in case n changes\n    const maxIndex = n - 1;\n    [unionAInput, unionBInput, findXInput, findYInput].forEach(input => {\n      input.max = maxIndex;\n    });\n  }\n  function validIndex(val) {\n    if (!uf) return false;\n    let v = Number(val);\n    return v >= 0 && v < n && Number.isInteger(v);\n  }\n\n  function showMessage(text, color = 'black') {\n    msgEl.textContent = text;\n    msgEl.style.color = color;\n  }\n\n  // Initialize union-find with n elements\n  function initialize() {\n    let size = Number(numElementsInput.value);\n    if (!Number.isInteger(size) || size < 2 || size > 20) {\n      showMessage('Please enter a valid number of elements (2 to 20).', 'red');\n      return;\n    }\n    n = size;\n    uf = new UnionFind(n);\n    showMessage(`Initialized with ${n} elements (0 to ${n-1}).`, 'green');\n\n    // Set input max values and default values\n    [unionAInput, unionBInput, findXInput, findYInput].forEach(input => {\n      input.max = n - 1;\n      // If current value > max, reset to 0\n      if (Number(input.value) > n-1) {\n        input.value = 0;\n      }\n    });\n\n    refreshControls();\n    draw();\n  }\n\n  // Perform union operation and redraw\n  function performUnion() {\n    const a = Number(unionAInput.value);\n    const b = Number(unionBInput.value);\n    if (!validIndex(a) || !validIndex(b)) {\n      showMessage('Invalid elements for union.', 'red');\n      return;\n    }\n    if (uf.connected(a,b)) {\n      showMessage(`Elements ${a} and ${b} are already connected.`, 'orange');\n      return;\n    }\n    uf.union(a,b);\n    showMessage(`Union performed between elements ${a} and ${b}.`, 'green');\n    draw();\n  }\n\n  // Check connection and display\n  function checkConnected() {\n    const x = Number(findXInput.value);\n    const y = Number(findYInput.value);\n    if (!validIndex(x) || !validIndex(y)) {\n      showMessage('Invalid elements for connected check.', 'red');\n      return;\n    }\n    const res = uf.connected(x,y);\n    showMessage(`Elements ${x} and ${y} are ${res ? '' : 'NOT '}connected.`, res ? 'green' : 'red');\n  }\n\n  // Event listeners\n  initBtn.addEventListener('click', () => {\n    initialize();\n  });\n  unionBtn.addEventListener('click', () => {\n    performUnion();\n  });\n  connectedBtn.addEventListener('click', () => {\n    checkConnected();\n  });\n\n  [numElementsInput, unionAInput, unionBInput, findXInput, findYInput].forEach(input => {\n    input.addEventListener('input', refreshControls);\n  });\n\n  // Initialize at load\n  initialize();\n\n})();\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Union-Find (Disjoint Set)"
    }
  ],
  "topic": "Union-Find (Disjoint Set)",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}