{
  "id": "0ccc5540-d5b5-11f0-899c-75bf12e026a9",
  "timestamp": "2025-12-10T10:45:51.202Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Radix Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title>Radix Sort Visualization</title>\n  <style>\n    body {\n      font-family: Arial, sans-serif;\n      margin: 20px;\n      background: #f0f0f0;\n    }\n    h1 {\n      text-align: center;\n      color: #333;\n    }\n    #inputSection {\n      max-width: 600px;\n      margin: 0 auto 20px auto;\n      display: flex;\n      flex-wrap: wrap;\n      gap: 10px;\n      justify-content: center;\n      align-items: center;\n    }\n    input[type=\"text\"] {\n      flex-grow: 1;\n      padding: 8px 12px;\n      font-size: 16px;\n      border: 1px solid #ccc;\n      border-radius: 4px;\n    }\n    button {\n      background-color: #007bff;\n      border: none;\n      color: white;\n      padding: 10px 18px;\n      font-size: 16px;\n      border-radius: 4px;\n      cursor: pointer;\n      transition: background-color 0.2s;\n    }\n    button:disabled {\n      background-color: #6c757d;\n      cursor: default;\n    }\n    button:hover:not(:disabled) {\n      background-color: #0056b3;\n    }\n    #errorMsg {\n      max-width: 600px;\n      margin: 0 auto 10px auto;\n      color: #d93025;\n      font-weight: bold;\n      min-height: 1.2em;\n      text-align: center;\n    }\n    #arrayContainer {\n      max-width: 800px;\n      margin: 0 auto;\n      display: flex;\n      justify-content: center;\n      flex-wrap: wrap;\n      gap: 6px;\n      min-height: 50px;\n    }\n    .array-element {\n      background-color: #3498db;\n      color: white;\n      padding: 10px 14px;\n      border-radius: 4px;\n      min-width: 40px;\n      text-align: center;\n      font-weight: bold;\n      user-select: none;\n      transition: background-color 0.3s;\n      box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n      font-family: 'Courier New', Courier, monospace;\n    }\n    .highlight {\n      background-color: #e67e22 !important;\n    }\n    #bucketsContainer {\n      max-width: 880px;\n      margin: 20px auto;\n      display: flex;\n      justify-content: space-around;\n      flex-wrap: wrap;\n      gap: 10px;\n    }\n    .bucket {\n      background: white;\n      box-shadow: 0 0 8px rgba(0,0,0,0.1);\n      border-radius: 6px;\n      padding: 10px;\n      flex: 1 1 70px;\n      max-width: 75px;\n      min-height: 80px;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      font-family: monospace;\n    }\n    .bucket-label {\n      font-weight: bold;\n      margin-bottom: 6px;\n      font-size: 18px;\n      color: #555;\n    }\n    .bucket-content {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n      width: 100%;\n      min-height: 40px;\n      justify-content: flex-start;\n      align-items: center;\n      color: #333;\n    }\n    .bucket-element {\n      background-color: #95a5a6;\n      color: white;\n      padding: 4px 8px;\n      border-radius: 3px;\n      width: 90%;\n      text-align: center;\n      font-weight: 600;\n      font-size: 14px;\n      user-select: none;\n      box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n    }\n    #controls {\n      max-width: 600px;\n      margin: 15px auto;\n      text-align: center;\n    }\n    #stepInfo {\n      font-size: 18px;\n      font-weight: bold;\n      margin-top: 10px;\n      min-height: 1.2em;\n      color: #2c3e50;\n    }\n\n    /* Scroll for buckets container if too wide */\n    #bucketsContainer {\n      overflow-x: auto;\n      padding-bottom: 10px;\n    }\n  </style>\n</head>\n<body>\n  <h1>Radix Sort Visualization (LSD - Least Significant Digit)</h1>\n  <div id=\"inputSection\">\n    <input type=\"text\" id=\"inputArray\" placeholder=\"Enter positive integers separated by commas\" />\n    <button id=\"startBtn\">Start Sort</button>\n  </div>\n  <div id=\"errorMsg\"></div>\n  <div id=\"arrayContainer\"></div>\n  <div id=\"bucketsContainer\" aria-live=\"polite\" aria-label=\"Digit buckets\"></div>\n  <div id=\"controls\">\n    <button id=\"prevStep\" disabled>Previous Step</button>\n    <button id=\"nextStep\" disabled>Next Step</button>\n    <div id=\"stepInfo\"></div>\n  </div>\n\n  <script>\n  (() => {\n    // Elements\n    const inputArrayEl = document.getElementById('inputArray');\n    const startBtn = document.getElementById('startBtn');\n    const arrayContainer = document.getElementById('arrayContainer');\n    const bucketsContainer = document.getElementById('bucketsContainer');\n    const prevStepBtn = document.getElementById('prevStep');\n    const nextStepBtn = document.getElementById('nextStep');\n    const stepInfo = document.getElementById('stepInfo');\n    const errorMsg = document.getElementById('errorMsg');\n\n    /*\n      Radix Sort Algorithm Outline (LSD):\n        - Find the max number to know number of digits\n        - For d from 0 to maxDigit-1:\n          - Create 10 buckets (0-9)\n          - Put each element in bucket according to d-th digit\n          - Flatten buckets back to array\n      We want to collect snapshots for visualization after each major action:\n        - Start of pass\n        - After distributing into buckets\n        - After concatenating buckets back\n    */\n\n    // State for visualization steps\n    let steps = [];\n    let currentStepIndex = 0;\n\n    // Visualize array as elements\n    function renderArray(arr, highlightIndices=[]) {\n      arrayContainer.innerHTML = '';\n      arr.forEach((num, i) => {\n        const el = document.createElement('div');\n        el.className = 'array-element';\n        if (highlightIndices.includes(i)) {\n          el.classList.add('highlight');\n        }\n        el.textContent = num;\n        arrayContainer.appendChild(el);\n      });\n    }\n\n    // Render buckets, buckets is array of arrays for digits 0..9\n    function renderBuckets(buckets) {\n      bucketsContainer.innerHTML = '';\n      for(let i=0; i<=9; i++) {\n        const bucketEl = document.createElement('div');\n        bucketEl.className = 'bucket';\n        const label = document.createElement('div');\n        label.className = 'bucket-label';\n        label.textContent = i;\n        bucketEl.appendChild(label);\n        const content = document.createElement('div');\n        content.className = 'bucket-content';\n        if(buckets[i].length === 0) {\n          const emptyNote = document.createElement('div');\n          emptyNote.style.color = '#bbb';\n          emptyNote.style.fontSize = '14px';\n          emptyNote.style.fontStyle = 'italic';\n          emptyNote.textContent = '(empty)';\n          content.appendChild(emptyNote);\n        } else {\n          buckets[i].forEach(num => {\n            const numEl = document.createElement('div');\n            numEl.className = 'bucket-element';\n            numEl.textContent = num;\n            content.appendChild(numEl);\n          });\n        }\n        bucketEl.appendChild(content);\n        bucketsContainer.appendChild(bucketEl);\n      }\n    }\n\n    // Add step: array, buckets (nullable), description, highlights in array\n    function addStep(arr, buckets, description, highlightIndices=[]) {\n      // Deep copy arr and buckets to avoid mutations\n      const arrCopy = arr.slice();\n      const bucketsCopy = buckets ? buckets.map(bucket => bucket.slice()) : null;\n      steps.push({arr: arrCopy, buckets: bucketsCopy, description, highlightIndices});\n    }\n\n    // Clear visualization and controls\n    function resetVisualization() {\n      steps = [];\n      currentStepIndex = 0;\n      stepInfo.textContent = '';\n      prevStepBtn.disabled = true;\n      nextStepBtn.disabled = true;\n      bucketsContainer.innerHTML = '';\n      arrayContainer.innerHTML = '';\n      errorMsg.textContent = '';\n    }\n\n    // Update visualization to current step\n    function showStep(index) {\n      if(index < 0 || index >= steps.length) return;\n      const step = steps[index];\n      renderArray(step.arr, step.highlightIndices);\n      if(step.buckets !== null) {\n        renderBuckets(step.buckets);\n        bucketsContainer.style.visibility = 'visible';\n      } else {\n        bucketsContainer.style.visibility = 'hidden';\n        bucketsContainer.innerHTML = '';\n      }\n      stepInfo.textContent = `Step ${index+1} of ${steps.length}: ${step.description}`;\n      prevStepBtn.disabled = index <= 0;\n      nextStepBtn.disabled = index >= steps.length - 1;\n    }\n\n    // Extract digit at position d (0-based from right)\n    function getDigit(num, d) {\n      return Math.floor(num / Math.pow(10, d)) % 10;\n    }\n\n    // Radix sort with step recording\n    function radixSort(arr) {\n      const max = Math.max(...arr);\n      const maxDigit = max.toString().length;\n      let res = arr.slice();\n\n      for(let d=0; d<maxDigit; d++) {\n        addStep(res, null, `Start pass for digit place ${d+1} (0 = ones, 1 = tens, etc)`);\n        // Initialize buckets\n        let buckets = Array.from({length: 10}, () => []);\n        // Distribute elements to buckets based on digit d\n        for(let i=0; i<res.length; i++) {\n          const digit = getDigit(res[i], d);\n          buckets[digit].push(res[i]);\n        }\n        addStep(res, buckets, `After distributing into buckets for digit place ${d+1}`, []);\n        // Flatten buckets\n        res = [].concat(...buckets);\n        addStep(res, null, `After concatenating buckets for digit place ${d+1}`, []);\n      }\n      addStep(res, null, `Final sorted array`, []);\n      return res;\n    }\n\n    // Parse input string into array of positive integers\n    function parseInput(str) {\n      if(!str.trim()) {\n        throw new Error('Input cannot be empty.');\n      }\n      const parts = str.split(',');\n      const numbers = parts.map(p => {\n        const trimmed = p.trim();\n        if(trimmed === '') throw new Error('Empty value detected.');\n        if(!/^\\d+$/.test(trimmed)) throw new Error(`Invalid number: \"${trimmed}\". Only non-negative integers allowed.`);\n        const n = Number(trimmed);\n        if(!Number.isSafeInteger(n)) throw new Error(`Number out of safe integer range: ${n}`);\n        return n;\n      });\n      if(numbers.length === 0) {\n        throw new Error('No valid numbers found.');\n      }\n      return numbers;\n    }\n\n    // Event handlers\n    startBtn.addEventListener('click', () => {\n      resetVisualization();\n      try {\n        const arr = parseInput(inputArrayEl.value);\n        if(arr.some(n => n < 0)) {\n          errorMsg.textContent = \"Please enter only non-negative integers (0 or greater).\";\n          return;\n        }\n        if(arr.length > 50) {\n          // Limit large inputs for visualization clarity\n          errorMsg.textContent = \"Please enter 50 or fewer numbers for good visualization performance.\";\n          return;\n        }\n        errorMsg.textContent = '';\n        radixSort(arr);\n        if(steps.length === 0) {\n          errorMsg.textContent = 'No steps generated.';\n          return;\n        }\n        currentStepIndex = 0;\n        showStep(currentStepIndex);\n        prevStepBtn.disabled = true;\n        nextStepBtn.disabled = steps.length <= 1;\n      } catch(e) {\n        errorMsg.textContent = e.message;\n      }\n    });\n\n    prevStepBtn.addEventListener('click', () => {\n      if(currentStepIndex > 0) {\n        currentStepIndex--;\n        showStep(currentStepIndex);\n      }\n    });\n\n    nextStepBtn.addEventListener('click', () => {\n      if(currentStepIndex < steps.length - 1) {\n        currentStepIndex++;\n        showStep(currentStepIndex);\n      }\n    });\n\n    // Allow Enter key start sorting\n    inputArrayEl.addEventListener('keydown', e => {\n      if(e.key === 'Enter') {\n        startBtn.click();\n      }\n    });\n\n    // Initial example placeholder\n    inputArrayEl.value = '170, 45, 75, 90, 802, 24, 2, 66';\n  })();\n  </script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Radix Sort"
    }
  ],
  "topic": "Radix Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}