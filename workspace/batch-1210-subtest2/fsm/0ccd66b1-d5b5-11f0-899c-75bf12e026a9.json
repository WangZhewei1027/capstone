{
  "meta": {
    "concept": "K-Means Clustering Demo",
    "topic": "K-Means Clustering",
    "educational_goal": "To demonstrate the K-Means clustering algorithm interactively.",
    "expected_interactions": [
      "Click on the canvas to add points.",
      "Set the number of clusters (k).",
      "Start the clustering process.",
      "Step through iterations of clustering.",
      "Run the clustering to convergence.",
      "Reset the clustering process."
    ]
  },
  "states": [
    {
      "id": "S0_Input",
      "label": "Input State",
      "type": "input",
      "entry_actions": [
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "let state = 'input';"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Clustering",
      "label": "Clustering State",
      "type": "clustering",
      "entry_actions": [
        "initializeCentroids()",
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "state = 'clustering';"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Finished",
      "label": "Finished State",
      "type": "finished",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "state = 'finished';"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "ClickCanvas",
      "event_type": "click",
      "description": "Click on the canvas to add a point.",
      "trigger_selectors": [
        "#canvas"
      ],
      "evidence": [
        "canvas.addEventListener('click', handleCanvasClick);"
      ],
      "confidence": 1
    },
    {
      "id": "StartClustering",
      "event_type": "click",
      "description": "Start the K-Means clustering process.",
      "trigger_selectors": [
        "#startBtn"
      ],
      "evidence": [
        "startBtn.addEventListener('click', startClustering);"
      ],
      "confidence": 1
    },
    {
      "id": "StepIteration",
      "event_type": "click",
      "description": "Perform one iteration of K-Means clustering.",
      "trigger_selectors": [
        "#stepBtn"
      ],
      "evidence": [
        "stepBtn.addEventListener('click', () => { if(state === 'clustering' && !converged){ iterate(); } });"
      ],
      "confidence": 1
    },
    {
      "id": "RunToConvergence",
      "event_type": "click",
      "description": "Run the K-Means clustering to convergence.",
      "trigger_selectors": [
        "#runBtn"
      ],
      "evidence": [
        "runBtn.addEventListener('click', () => { if(state === 'clustering' && !converged){ runToConvergence(); } });"
      ],
      "confidence": 1
    },
    {
      "id": "Reset",
      "event_type": "click",
      "description": "Reset the clustering process.",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', reset);"
      ],
      "confidence": 1
    },
    {
      "id": "KeyDownEnter",
      "event_type": "keydown",
      "description": "Add a point at the center of the canvas using the Enter key.",
      "trigger_selectors": [
        "#canvas"
      ],
      "evidence": [
        "canvas.addEventListener('keydown', e => { if(e.key === 'Enter'){ ... } });"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Input",
      "to": "S1_Clustering",
      "event": "StartClustering",
      "actions": [
        "initializeCentroids()",
        "draw()"
      ],
      "expected_observables": [
        "centroids initialized",
        "state changed to clustering"
      ],
      "evidence": [
        "state = 'clustering';"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Clustering",
      "to": "S1_Clustering",
      "event": "StepIteration",
      "actions": [
        "iterate()"
      ],
      "expected_observables": [
        "points assigned to clusters",
        "centroids updated"
      ],
      "evidence": [
        "if(state === 'clustering' && !converged){ iterate(); }"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Clustering",
      "to": "S2_Finished",
      "event": "RunToConvergence",
      "actions": [
        "runToConvergence()"
      ],
      "expected_observables": [
        "clustering converged"
      ],
      "evidence": [
        "while(!converged) { iterate(); await new Promise(r => setTimeout(r, 300)); }"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Clustering",
      "to": "S0_Input",
      "event": "Reset",
      "actions": [
        "reset()"
      ],
      "expected_observables": [
        "points cleared",
        "state reset to input"
      ],
      "evidence": [
        "reset();"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Input",
      "to": "S0_Input",
      "event": "ClickCanvas",
      "actions": [
        "add point to points array",
        "draw()"
      ],
      "expected_observables": [
        "point added to canvas"
      ],
      "evidence": [
        "points.push({x, y, cluster: null});"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Input",
      "to": "S0_Input",
      "event": "KeyDownEnter",
      "actions": [
        "add point at center of canvas",
        "draw()"
      ],
      "expected_observables": [
        "point added at center"
      ],
      "evidence": [
        "if(state === 'input'){ points.push({x, y, cluster:null}); draw(); }"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#startBtn",
      "text": "Start Clustering",
      "attributes": {
        "title": "Start K-Means Clustering"
      },
      "evidence": [
        "<button id=\"startBtn\" title=\"Start K-Means Clustering\">Start Clustering</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBtn",
      "text": "Step",
      "attributes": {
        "title": "Perform one iteration of K-Means",
        "disabled": "true"
      },
      "evidence": [
        "<button id=\"stepBtn\" title=\"Perform one iteration of K-Means\" disabled>Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runBtn",
      "text": "Run",
      "attributes": {
        "title": "Run full K-Means to convergence",
        "disabled": "true"
      },
      "evidence": [
        "<button id=\"runBtn\" title=\"Run full K-Means to convergence\" disabled>Run</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset",
      "attributes": {
        "title": "Clear all points and start over"
      },
      "evidence": [
        "<button id=\"resetBtn\" title=\"Clear all points and start over\">Reset</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#kInput",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "1",
        "max": "10",
        "value": "3"
      },
      "evidence": [
        "<input type=\"number\" id=\"kInput\" min=\"1\" max=\"10\" value=\"3\" />"
      ]
    },
    {
      "type": "canvas",
      "selector": "#canvas",
      "text": "",
      "attributes": {
        "width": "700",
        "height": "500",
        "tabindex": "0",
        "aria-label": "Canvas for K-Means clustering visualization"
      },
      "evidence": [
        "<canvas id=\"canvas\" width=\"700\" height=\"500\" tabindex=\"0\" aria-label=\"Canvas for K-Means clustering visualization\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 6,
    "detected_components": [
      {
        "type": "button",
        "selector": "#startBtn"
      },
      {
        "type": "button",
        "selector": "#stepBtn"
      },
      {
        "type": "button",
        "selector": "#runBtn"
      },
      {
        "type": "button",
        "selector": "#resetBtn"
      },
      {
        "type": "input",
        "selector": "#kInput"
      },
      {
        "type": "canvas",
        "selector": "#canvas"
      }
    ],
    "detected_event_handlers_count": 6,
    "detected_event_handlers": [
      "canvas.addEventListener('click', handleCanvasClick);",
      "startBtn.addEventListener('click', startClustering);",
      "stepBtn.addEventListener('click', () => { if(state === 'clustering' && !converged){ iterate(); } });",
      "runBtn.addEventListener('click', () => { if(state === 'clustering' && !converged){ runToConvergence(); } });",
      "resetBtn.addEventListener('click', reset);",
      "canvas.addEventListener('keydown', e => { if(e.key === 'Enter'){ ... } });"
    ],
    "extracted_states_count": 3,
    "extracted_transitions_count": 6,
    "extraction_confidence": 1,
    "notes": []
  }
}