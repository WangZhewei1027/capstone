{
  "meta": {
    "concept": "Graph Visualization (Directed / Undirected)",
    "topic": "Graph",
    "educational_goal": "To visualize and manipulate directed and undirected graphs interactively.",
    "expected_interactions": [
      "Add nodes by clicking on the canvas.",
      "Create edges by dragging from one node to another.",
      "Switch between directed and undirected graph modes.",
      "Reset the graph to its initial state."
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "drawGraph()",
        "updateInfo()"
      ],
      "exit_actions": [],
      "evidence": [
        "Initial state",
        "canvas.addEventListener('click', ...)",
        "canvas.addEventListener('mousedown', ...)",
        "toggleBtn.addEventListener('click', ...)",
        "resetBtn.addEventListener('click', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "S1_AddingNode",
      "label": "Adding Node",
      "type": "interaction",
      "entry_actions": [
        "addNode(x, y)"
      ],
      "exit_actions": [
        "drawGraph()"
      ],
      "evidence": [
        "canvas.addEventListener('click', ...)",
        "if (!findNodeAt(x, y)) { addNode(x, y); }"
      ],
      "confidence": 1
    },
    {
      "id": "S2_DraggingNode",
      "label": "Dragging Node",
      "type": "interaction",
      "entry_actions": [],
      "exit_actions": [
        "drawGraph()"
      ],
      "evidence": [
        "canvas.addEventListener('mousedown', ...)",
        "canvas.addEventListener('mousemove', ...)",
        "canvas.addEventListener('mouseup', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "S3_CreatingEdge",
      "label": "Creating Edge",
      "type": "interaction",
      "entry_actions": [
        "draggingEdge = { fromNode: node, toX: x, toY: y }"
      ],
      "exit_actions": [
        "addEdge(draggingEdge.fromNode.id, toNode.id)",
        "drawGraph()"
      ],
      "evidence": [
        "canvas.addEventListener('mousedown', ...)",
        "canvas.addEventListener('mouseup', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "S4_SwitchingMode",
      "label": "Switching Mode",
      "type": "interaction",
      "entry_actions": [
        "mode = mode === 'directed' ? 'undirected' : 'directed'"
      ],
      "exit_actions": [
        "drawGraph()",
        "updateInfo()"
      ],
      "evidence": [
        "toggleBtn.addEventListener('click', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "S5_ResettingGraph",
      "label": "Resetting Graph",
      "type": "interaction",
      "entry_actions": [
        "resetGraph()"
      ],
      "exit_actions": [
        "drawGraph()",
        "updateInfo()"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ...)"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "ClickCanvas",
      "event_type": "click",
      "description": "Click on the canvas to add a node.",
      "trigger_selectors": [
        "canvas"
      ],
      "evidence": [
        "canvas.addEventListener('click', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "MouseDownCanvas",
      "event_type": "mousedown",
      "description": "Mouse down on the canvas to start dragging a node or edge.",
      "trigger_selectors": [
        "canvas"
      ],
      "evidence": [
        "canvas.addEventListener('mousedown', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "MouseMoveCanvas",
      "event_type": "mousemove",
      "description": "Mouse move on the canvas to drag a node or edge.",
      "trigger_selectors": [
        "canvas"
      ],
      "evidence": [
        "canvas.addEventListener('mousemove', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "MouseUpCanvas",
      "event_type": "mouseup",
      "description": "Mouse up on the canvas to finish dragging a node or edge.",
      "trigger_selectors": [
        "canvas"
      ],
      "evidence": [
        "canvas.addEventListener('mouseup', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "ToggleMode",
      "event_type": "click",
      "description": "Click the toggle button to switch between directed and undirected modes.",
      "trigger_selectors": [
        "#toggleMode"
      ],
      "evidence": [
        "toggleBtn.addEventListener('click', ...)"
      ],
      "confidence": 1
    },
    {
      "id": "ResetGraph",
      "event_type": "click",
      "description": "Click the reset button to clear the graph.",
      "trigger_selectors": [
        "#resetGraph"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ...)"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_AddingNode",
      "event": "ClickCanvas",
      "actions": [
        "addNode(x, y)"
      ],
      "expected_observables": [
        "Node added to graph"
      ],
      "evidence": [
        "if (!findNodeAt(x, y)) { addNode(x, y); }"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S2_DraggingNode",
      "event": "MouseDownCanvas",
      "actions": [],
      "expected_observables": [
        "Node is being dragged"
      ],
      "evidence": [
        "draggingNode = node;"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DraggingNode",
      "to": "S0_Idle",
      "event": "MouseUpCanvas",
      "actions": [],
      "expected_observables": [
        "Node dropped"
      ],
      "evidence": [
        "draggingNode = null;"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DraggingNode",
      "to": "S2_DraggingNode",
      "event": "MouseMoveCanvas",
      "actions": [
        "drawGraph()"
      ],
      "expected_observables": [
        "Node position updated"
      ],
      "evidence": [
        "draggingNode.x = x - dragOffsetX;"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_CreatingEdge",
      "event": "MouseDownCanvas",
      "actions": [
        "draggingEdge = { fromNode: node, toX: x, toY: y }"
      ],
      "expected_observables": [
        "Edge creation started"
      ],
      "evidence": [
        "if (e.ctrlKey) { draggingEdge = { fromNode: node, toX: x, toY: y }; }"
      ],
      "confidence": 1
    },
    {
      "from": "S3_CreatingEdge",
      "to": "S0_Idle",
      "event": "MouseUpCanvas",
      "actions": [
        "addEdge(draggingEdge.fromNode.id, toNode.id)"
      ],
      "expected_observables": [
        "Edge created"
      ],
      "evidence": [
        "if (toNode && toNode.id !== draggingEdge.fromNode.id) { addEdge(draggingEdge.fromNode.id, toNode.id); }"
      ],
      "confidence": 1
    },
    {
      "from": "S3_CreatingEdge",
      "to": "S3_CreatingEdge",
      "event": "MouseMoveCanvas",
      "actions": [
        "drawGraph()"
      ],
      "expected_observables": [
        "Edge preview updated"
      ],
      "evidence": [
        "draggingEdge.toX = x; draggingEdge.toY = y;"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_SwitchingMode",
      "event": "ToggleMode",
      "actions": [
        "mode = mode === 'directed' ? 'undirected' : 'directed'"
      ],
      "expected_observables": [
        "Graph mode switched"
      ],
      "evidence": [
        "toggleBtn.addEventListener('click', ...)"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S5_ResettingGraph",
      "event": "ResetGraph",
      "actions": [
        "resetGraph()"
      ],
      "expected_observables": [
        "Graph reset"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ...)"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#toggleMode",
      "text": "Switch to Undirected",
      "attributes": {},
      "evidence": [
        "<button id=\"toggleMode\">Switch to Undirected</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetGraph",
      "text": "Reset Graph",
      "attributes": {},
      "evidence": [
        "<button id=\"resetGraph\">Reset Graph</button>"
      ]
    },
    {
      "type": "canvas",
      "selector": "#graphCanvas",
      "text": "",
      "attributes": {
        "width": "800",
        "height": "600"
      },
      "evidence": [
        "<canvas id=\"graphCanvas\" width=\"800\" height=\"600\"></canvas>"
      ]
    },
    {
      "type": "div",
      "selector": "#info",
      "text": "",
      "attributes": {},
      "evidence": [
        "<div id=\"info\"></div>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-04T00:00:00Z",
    "detected_components_count": 4,
    "detected_components": [
      {
        "type": "button",
        "selector": "#toggleMode",
        "text": "Switch to Undirected",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#resetGraph",
        "text": "Reset Graph",
        "attributes": {}
      },
      {
        "type": "canvas",
        "selector": "#graphCanvas",
        "text": "",
        "attributes": {
          "width": "800",
          "height": "600"
        }
      },
      {
        "type": "div",
        "selector": "#info",
        "text": "",
        "attributes": {}
      }
    ],
    "detected_event_handlers_count": 6,
    "detected_event_handlers": [
      "canvas.addEventListener('click', ...)",
      "canvas.addEventListener('mousedown', ...)",
      "canvas.addEventListener('mousemove', ...)",
      "canvas.addEventListener('mouseup', ...)",
      "toggleBtn.addEventListener('click', ...)",
      "resetBtn.addEventListener('click', ...)"
    ],
    "extracted_states_count": 6,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}