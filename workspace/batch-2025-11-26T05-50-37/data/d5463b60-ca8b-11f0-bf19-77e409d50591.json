{
  "id": "d5463b60-ca8b-11f0-bf19-77e409d50591",
  "timestamp": "2025-11-26T05:54:33.657Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Array",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"/>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n  <title>Array Playground — Interactive Demonstration</title>\n  <style>\n    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;line-height:1.4;color:#111}\n    body{margin:20px;background:#f7f9fc}\n    .container{max-width:1100px;margin:0 auto;background:#fff;border:1px solid #e3e7ee;border-radius:8px;padding:18px;box-shadow:0 6px 18px rgba(15,30,50,0.06)}\n    h1{font-size:20px;margin:0 0 12px}\n    .row{display:flex;gap:12px;flex-wrap:wrap}\n    .col{flex:1;min-width:240px}\n    label{display:block;font-size:13px;margin-bottom:6px;color:#334155}\n    input[type=\"text\"], input[type=\"number\"], textarea, select {\n      width:100%;padding:8px;border-radius:6px;border:1px solid #cbd5e1;background:#fff;font-size:14px;\n    }\n    textarea{min-height:72px;resize:vertical}\n    button{cursor:pointer;padding:8px 12px;border-radius:6px;border:0;background:#0ea5a4;color:white;font-weight:600}\n    button.secondary{background:#64748b}\n    button.ghost{background:transparent;border:1px solid #e2e8f0;color:#334155;font-weight:600}\n    .controls{display:flex;gap:8px;flex-wrap:wrap}\n    .array-visual{display:flex;gap:8px;flex-wrap:wrap;padding:12px;border-radius:8px;border:1px dashed #e2e8f0;background:#fcfeff}\n    .cell{min-width:64px;padding:8px;border-radius:8px;border:1px solid #dbeafe;background:#e8f0ff;text-align:center;font-size:13px}\n    .idx{display:block;font-size:11px;color:#475569;margin-bottom:6px}\n    .type{font-size:11px;color:#475569;margin-top:6px}\n    .meta{margin-top:10px;font-size:13px;color:#0f172a}\n    .result{white-space:pre-wrap;background:#0f172a;color:#fff;padding:10px;border-radius:6px;margin-top:10px;font-family:monospace;font-size:13px}\n    .small{font-size:13px;color:#475569}\n    .examples button{padding:6px 8px;background:#f1f5f9;color:#0f172a;border-radius:6px;border:1px solid #e2e8f0}\n    .ops-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;margin-top:12px}\n    .card{background:#fff;border:1px solid #e6eef8;padding:10px;border-radius:8px}\n    .footer{margin-top:14px;font-size:13px;color:#475569}\n    .warn{color:#b91c1c;font-weight:700}\n    .code{font-family:monospace;background:#f8fafc;padding:8px;border-radius:6px;border:1px solid #e2e8f0;font-size:13px}\n    .inline {display:inline-flex;gap:8px;align-items:center}\n    .muted{color:#94a3b8}\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>Array Playground — interactive guide to JavaScript arrays</h1>\n    <p class=\"small\">Create, inspect and run common array operations. Values are parsed as JSON when possible (e.g. numbers, strings with quotes, objects, arrays). For custom functions you can enter an expression like \"x => x * 2\" or \"acc,x => acc + x\".</p>\n\n    <div class=\"row\" style=\"margin-top:12px\">\n      <div class=\"col\">\n        <label>Initial array (JSON-ish). Examples: [1,2,3], [\"a\",\"b\"], [{\"x\":1},2]</label>\n        <textarea id=\"initInput\">[1, 2, 3, 4, 5]</textarea>\n        <div style=\"margin-top:8px\" class=\"controls\">\n          <button id=\"setArrayBtn\">Set Array</button>\n          <button id=\"resetBtn\" class=\"ghost\">Reset to default</button>\n          <div style=\"flex:1\"></div>\n          <select id=\"presetSelect\" aria-label=\"examples\">\n            <option value=\"\">Load example...</option>\n            <option value='[1,2,3,4,5]'>Numbers</option>\n            <option value='[\"apple\",\"banana\",\"cherry\"]'>Strings</option>\n            <option value='[{\"id\":1,\"name\":\"A\"},{\"id\":2,\"name\":\"B\"}]'>Array of objects</option>\n            <option value='[[1,2],[3,4],[5,6]]'>2D array</option>\n            <option value='[1,\"two\",{\"three\":3},[4]]'>Mixed types</option>\n          </select>\n        </div>\n\n        <div style=\"margin-top:12px\" class=\"card\">\n          <label>Array visualization</label>\n          <div id=\"arrayVis\" class=\"array-visual\" aria-live=\"polite\"></div>\n          <div class=\"meta\" id=\"metaInfo\"></div>\n        </div>\n\n      </div>\n\n      <div class=\"col\">\n        <div class=\"card\">\n          <label>Basic operations</label>\n          <div style=\"display:flex;gap:8px;flex-wrap:wrap;margin-top:8px\">\n            <div style=\"flex:1;min-width:160px\">\n              <label>push (value)</label>\n              <div class=\"inline\">\n                <input id=\"pushVal\" type=\"text\" placeholder='e.g. 6 or \"x\" or {\"a\":1}'/>\n                <button id=\"pushBtn\">push</button>\n              </div>\n            </div>\n\n            <div style=\"flex:1;min-width:120px\">\n              <label>pop</label>\n              <div class=\"inline\">\n                <button id=\"popBtn\" class=\"secondary\">pop</button>\n              </div>\n            </div>\n\n            <div style=\"flex:1;min-width:160px\">\n              <label>unshift (value)</label>\n              <div class=\"inline\">\n                <input id=\"unshiftVal\" type=\"text\" placeholder='e.g. 0'/>\n                <button id=\"unshiftBtn\">unshift</button>\n              </div>\n            </div>\n\n            <div style=\"flex:1;min-width:120px\">\n              <label>shift</label>\n              <div class=\"inline\">\n                <button id=\"shiftBtn\" class=\"secondary\">shift</button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"ops-grid\">\n            <div>\n              <label>splice(start, deleteCount, items...)</label>\n              <div style=\"display:flex;gap:6px;margin-top:8px\">\n                <input id=\"spliceStart\" type=\"number\" placeholder=\"start\" />\n                <input id=\"spliceDel\" type=\"number\" placeholder=\"deleteCount\" />\n                <input id=\"spliceItems\" type=\"text\" placeholder='items CSV e.g. 9,\"x\",{\"a\":1}' />\n                <button id=\"spliceBtn\" class=\"ghost\">apply</button>\n              </div>\n            </div>\n\n            <div>\n              <label>slice(start, end) — non-destructive</label>\n              <div style=\"display:flex;gap:6px;margin-top:8px\">\n                <input id=\"sliceStart\" type=\"number\" placeholder=\"start\" />\n                <input id=\"sliceEnd\" type=\"number\" placeholder=\"end\" />\n                <button id=\"sliceBtn\" class=\"ghost\">slice</button>\n              </div>\n            </div>\n\n            <div>\n              <label>concat(array)</label>\n              <div style=\"display:flex;gap:6px;margin-top:8px\">\n                <input id=\"concatVal\" type=\"text\" placeholder='e.g. [7,8] or \"x\"' />\n                <button id=\"concatBtn\" class=\"ghost\">concat</button>\n              </div>\n            </div>\n\n            <div>\n              <label>reverse</label>\n              <div style=\"display:flex;gap:6px;margin-top:8px\">\n                <button id=\"reverseBtn\" class=\"ghost\">reverse</button>\n              </div>\n            </div>\n\n            <div>\n              <label>sort (compare expression)</label>\n              <div style=\"display:flex;gap:6px;margin-top:8px\">\n                <input id=\"sortExpr\" type=\"text\" placeholder='e.g. (a,b) => a-b or \"alpha\"' />\n                <button id=\"sortBtn\" class=\"ghost\">sort</button>\n              </div>\n            </div>\n\n            <div>\n              <label>flat(depth)</label>\n              <div style=\"display:flex;gap:6px;margin-top:8px\">\n                <input id=\"flatDepth\" type=\"number\" placeholder=\"1\" value=\"1\"/>\n                <button id=\"flatBtn\" class=\"ghost\">flat</button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"card\" style=\"margin-top:10px\">\n          <label>Functional ops (map, filter, reduce, find...)</label>\n          <div style=\"margin-top:8px;display:flex;flex-direction:column;gap:8px\">\n            <div>\n              <label>map (expr) e.g. \"x => x*2\" or \"x*2\"</label>\n              <div style=\"display:flex;gap:8px;margin-top:6px\">\n                <input id=\"mapExpr\" type=\"text\" placeholder=\"x => ...\" />\n                <button id=\"mapBtn\">map (show)</button>\n                <label style=\"display:inline-flex;align-items:center;gap:6px\"><input id=\"mapReplace\" type=\"checkbox\" /> replace</label>\n              </div>\n            </div>\n\n            <div>\n              <label>filter (expr) e.g. \"x => x%2===0\" or \"x>2\"</label>\n              <div style=\"display:flex;gap:8px;margin-top:6px\">\n                <input id=\"filterExpr\" type=\"text\" placeholder=\"x => ...\" />\n                <button id=\"filterBtn\">filter (show)</button>\n                <label style=\"display:inline-flex;align-items:center;gap:6px\"><input id=\"filterReplace\" type=\"checkbox\" /> replace</label>\n              </div>\n            </div>\n\n            <div>\n              <label>reduce (expr) e.g. \"(acc,x) => acc+x\" and initial value</label>\n              <div style=\"display:flex;gap:8px;margin-top:6px\">\n                <input id=\"reduceExpr\" type=\"text\" placeholder=\"acc,x => ...\" />\n                <input id=\"reduceInit\" type=\"text\" placeholder=\"initial e.g. 0\" />\n                <button id=\"reduceBtn\">reduce</button>\n                <label class=\"muted\" style=\"align-self:center;margin-left:6px\">returns a value</label>\n              </div>\n            </div>\n\n            <div style=\"display:flex;gap:8px;flex-wrap:wrap\">\n              <input id=\"findExpr\" type=\"text\" placeholder='find expr e.g. \"x=>x>3\" or value 3' style=\"flex:1\"/>\n              <button id=\"findBtn\" class=\"ghost\">find</button>\n              <button id=\"findIndexBtn\" class=\"ghost\">findIndex</button>\n              <button id=\"includesBtn\" class=\"ghost\">includes</button>\n              <button id=\"indexOfBtn\" class=\"ghost\">indexOf</button>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div style=\"margin-top:12px\" class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <label>Custom JS snippet (arr is the current array)</label>\n          <textarea id=\"customCode\" placeholder='e.g. arr.map(x=>x*10).filter(x=>x>20)'></textarea>\n          <div style=\"display:flex;gap:8px;margin-top:8px\">\n            <button id=\"runCustom\">Run (show result)</button>\n            <button id=\"runReplace\" class=\"ghost\">Run & replace array</button>\n            <button id=\"showCodeBtn\" class=\"ghost\">Show array as code</button>\n            <div style=\"flex:1\"></div>\n            <button id=\"clearConsole\" class=\"ghost\">Clear output</button>\n          </div>\n        </div>\n\n        <div id=\"output\" class=\"result\" style=\"margin-top:12px\">Output area — results and errors appear here.</div>\n      </div>\n\n      <div class=\"col\">\n        <div class=\"card\">\n          <label>Current array as copyable code</label>\n          <div id=\"codeView\" class=\"code\" style=\"margin-top:8px\"></div>\n          <div class=\"footer\">\n            <button id=\"copyCode\" class=\"ghost\">Copy code text</button>\n            <button id=\"downloadJson\" class=\"ghost\">Download JSON file</button>\n            <div style=\"margin-top:8px\" class=\"small muted\">Length: <span id=\"lenInfo\">0</span> • First: <span id=\"firstInfo\">—</span> • Last: <span id=\"lastInfo\">—</span></div>\n          </div>\n        </div>\n\n        <div class=\"card\" style=\"margin-top:10px\">\n          <label>Quick tips</label>\n          <ul style=\"margin:8px 0 0 18px\">\n            <li>Arrays are objects with numeric keys and length property.</li>\n            <li>Many methods are non-destructive (slice, map, filter). Some mutate (push, pop, splice, sort, reverse).</li>\n            <li>Enter functions as \"x => x*2\" or plain expressions like \"x*2\". Reduce uses \"acc,x => ...\".</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <script>\n    // Simple Array Playground\n    (function(){\n      // State\n      let arr = [];\n      const defaultInit = document.getElementById('initInput').value;\n\n      // Helpers\n      function parseValue(text) {\n        if (text === undefined) return undefined;\n        text = text.trim();\n        if (text === '') return undefined;\n        // try JSON.parse for numbers, arrays, objects, booleans, null, strings with quotes\n        try {\n          return JSON.parse(text);\n        } catch(e) {\n          // if user typed unquoted string, treat as string\n          return text;\n        }\n      }\n\n      function parseCSVItems(text) {\n        if (!text) return [];\n        // split on commas that are not inside braces or quotes (simple approach)\n        const items = [];\n        let cur = '';\n        let depth = 0;\n        let inQuote = null;\n        for (let ch of text) {\n          if (inQuote) {\n            cur += ch;\n            if (ch === inQuote) inQuote = null;\n          } else {\n            if (ch === '\"' || ch === \"'\") { inQuote = ch; cur += ch; }\n            else if (ch === '[' || ch === '{') { depth++; cur += ch; }\n            else if (ch === ']' || ch === '}') { depth--; cur += ch; }\n            else if (ch === ',' && depth === 0) { items.push(cur.trim()); cur = ''; }\n            else cur += ch;\n          }\n        }\n        if (cur.trim() !== '') items.push(cur.trim());\n        return items.map(s => parseValue(s));\n      }\n\n      function safeEvalFunction(expr, argNames) {\n        // expr can be:\n        // - an arrow function string \"x => x*2\" (we will return the function)\n        // - a normal expression \"x*2\" -> we'll convert to function with argNames\n        expr = expr.trim();\n        if (!expr) throw new Error('Empty expression');\n        try {\n          if (expr.includes('=>')) {\n            // return the function result of evaluating \"return <expr>\"\n            // Using Function constructor to avoid eval(...)\n            const fn = new Function('return ' + expr)();\n            if (typeof fn !== 'function') throw new Error('Not a function');\n            return fn;\n          } else {\n            // create a function with provided arg names\n            const args = argNames.join(',');\n            // build: return (arg1,...) => (expr) ??\n            // simpler: new Function(argNames..., 'return ('+expr+');')\n            const constructorArgs = argNames.concat('return (' + expr + ');');\n            const fn = Function.apply(null, constructorArgs);\n            return fn;\n          }\n        } catch(e) {\n          throw new Error('Invalid expression: ' + e.message);\n        }\n      }\n\n      function showOutput(msg, isError) {\n        const out = document.getElementById('output');\n        const time = new Date().toLocaleTimeString();\n        out.textContent = `[${time}] ${msg}`;\n        if (isError) out.style.background = '#3b082a', out.style.color = '#fff';\n        else out.style.background = '#0f172a', out.style.color = '#fff';\n      }\n\n      function renderArray() {\n        const vis = document.getElementById('arrayVis');\n        vis.innerHTML = '';\n        arr.forEach((v,i) => {\n          const cell = document.createElement('div');\n          cell.className = 'cell';\n          const idx = document.createElement('span'); idx.className='idx'; idx.textContent = '['+i+']';\n          const val = document.createElement('div');\n          // pretty print small values\n          try {\n            val.textContent = stringifyForCell(v);\n          } catch(e) {\n            val.textContent = String(v);\n          }\n          const type = document.createElement('div'); type.className='type'; type.textContent = typeof v;\n          cell.appendChild(idx); cell.appendChild(val); cell.appendChild(type);\n          vis.appendChild(cell);\n        });\n        document.getElementById('metaInfo').textContent =\n          'length: ' + arr.length + ' • isArray: ' + Array.isArray(arr);\n        // code view and meta\n        const codeView = document.getElementById('codeView');\n        codeView.textContent = JSON.stringify(arr, null, 2);\n        document.getElementById('lenInfo').textContent = arr.length;\n        document.getElementById('firstInfo').textContent = arr.length ? stringifyForCell(arr[0]) : '—';\n        document.getElementById('lastInfo').textContent = arr.length ? stringifyForCell(arr[arr.length-1]) : '—';\n      }\n\n      function stringifyForCell(v) {\n        if (v === null) return 'null';\n        if (typeof v === 'string') {\n          // show quoted strings unless long\n          return v.length > 20 ? ('\"' + v.slice(0,17) + '...\"') : ('\"' + v + '\"');\n        }\n        if (typeof v === 'object') {\n          try {\n            const s = JSON.stringify(v);\n            return s.length > 40 ? s.slice(0,37) + '...' : s;\n          } catch(e) {\n            return Object.prototype.toString.call(v);\n          }\n        }\n        return String(v);\n      }\n\n      // Bind UI\n      document.getElementById('setArrayBtn').addEventListener('click', ()=> {\n        try {\n          const txt = document.getElementById('initInput').value;\n          const parsed = JSON.parse(txt);\n          if (!Array.isArray(parsed)) {\n            showOutput('Provided JSON is not an array.', true);\n            return;\n          }\n          arr = parsed;\n          renderArray();\n          showOutput('Array set.');\n        } catch(e) {\n          showOutput('Error parsing JSON: ' + e.message, true);\n        }\n      });\n\n      document.getElementById('presetSelect').addEventListener('change', (ev) => {\n        const val = ev.target.value;\n        if (!val) return;\n        document.getElementById('initInput').value = val;\n      });\n\n      document.getElementById('resetBtn').addEventListener('click', ()=> {\n        document.getElementById('initInput').value = defaultInit;\n        try {\n          arr = JSON.parse(defaultInit);\n        } catch(e) { arr = []; }\n        renderArray();\n        showOutput('Reset to default.');\n      });\n\n      // many ops\n      document.getElementById('pushBtn').addEventListener('click', ()=>{\n        const v = parseValue(document.getElementById('pushVal').value);\n        arr.push(v);\n        renderArray();\n        showOutput('push -> ' + JSON.stringify(v));\n      });\n\n      document.getElementById('popBtn').addEventListener('click', ()=>{\n        const v = arr.pop();\n        renderArray();\n        showOutput('pop -> ' + JSON.stringify(v));\n      });\n\n      document.getElementById('unshiftBtn').addEventListener('click', ()=>{\n        const v = parseValue(document.getElementById('unshiftVal').value);\n        arr.unshift(v);\n        renderArray();\n        showOutput('unshift -> ' + JSON.stringify(v));\n      });\n\n      document.getElementById('shiftBtn').addEventListener('click', ()=>{\n        const v = arr.shift();\n        renderArray();\n        showOutput('shift -> ' + JSON.stringify(v));\n      });\n\n      document.getElementById('spliceBtn').addEventListener('click', ()=>{\n        const start = Number(document.getElementById('spliceStart').value) || 0;\n        const del = Number(document.getElementById('spliceDel').value) || 0;\n        const items = parseCSVItems(document.getElementById('spliceItems').value);\n        const removed = arr.splice(start, del, ...items);\n        renderArray();\n        showOutput('splice removed: ' + JSON.stringify(removed));\n      });\n\n      document.getElementById('sliceBtn').addEventListener('click', ()=>{\n        const s = document.getElementById('sliceStart').value;\n        const e = document.getElementById('sliceEnd').value;\n        const start = s === '' ? undefined : Number(s);\n        const end = e === '' ? undefined : Number(e);\n        const res = arr.slice(start, end);\n        showOutput('slice result: ' + JSON.stringify(res));\n      });\n\n      document.getElementById('concatBtn').addEventListener('click', ()=>{\n        const text = document.getElementById('concatVal').value.trim();\n        let toConcat;\n        if (!text) { showOutput('Provide value to concat.', true); return; }\n        try {\n          if (text[0] === '[') toConcat = JSON.parse(text);\n          else toConcat = parseValue(text);\n          arr = arr.concat(toConcat);\n          renderArray();\n          showOutput('concat applied.');\n        } catch(e) { showOutput('Error: ' + e.message, true); }\n      });\n\n      document.getElementById('reverseBtn').addEventListener('click', ()=>{\n        arr.reverse();\n        renderArray();\n        showOutput('reverse applied.');\n      });\n\n      document.getElementById('sortBtn').addEventListener('click', ()=>{\n        const expr = document.getElementById('sortExpr').value.trim();\n        try {\n          if (!expr || expr === 'alpha') {\n            arr.sort();\n          } else {\n            // user can supply \"(a,b) => a-b\" or \"a-b\"\n            let cmp;\n            if (expr.includes('=>')) cmp = safeEvalFunction(expr, []);\n            else cmp = safeEvalFunction(expr, ['a','b']);\n            arr.sort(cmp);\n          }\n          renderArray();\n          showOutput('sort applied.');\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      document.getElementById('flatBtn').addEventListener('click', ()=>{\n        const d = Number(document.getElementById('flatDepth').value);\n        arr = arr.flat(Number.isFinite(d) ? d : 1);\n        renderArray();\n        showOutput('flat(' + d + ') applied.');\n      });\n\n      // functional\n      document.getElementById('mapBtn').addEventListener('click', ()=>{\n        const expr = document.getElementById('mapExpr').value;\n        const replace = document.getElementById('mapReplace').checked;\n        try {\n          const fn = safeEvalFunction(expr, ['x','i','arr']);\n          const res = arr.map(fn);\n          showOutput('map result: ' + JSON.stringify(res));\n          if (replace) { arr = res; renderArray(); showOutput('map replaced array.'); }\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      document.getElementById('filterBtn').addEventListener('click', ()=>{\n        const expr = document.getElementById('filterExpr').value;\n        const replace = document.getElementById('filterReplace').checked;\n        try {\n          const fn = safeEvalFunction(expr, ['x','i','arr']);\n          const res = arr.filter(fn);\n          showOutput('filter result: ' + JSON.stringify(res));\n          if (replace) { arr = res; renderArray(); showOutput('filter replaced array.'); }\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      document.getElementById('reduceBtn').addEventListener('click', ()=>{\n        const expr = document.getElementById('reduceExpr').value;\n        const initTxt = document.getElementById('reduceInit').value;\n        try {\n          const fn = safeEvalFunction(expr, ['acc','x','i','arr']);\n          const init = initTxt === '' ? undefined : parseValue(initTxt);\n          const res = Array.prototype.reduce.call(arr, fn, init);\n          showOutput('reduce result: ' + JSON.stringify(res));\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      document.getElementById('findBtn').addEventListener('click', ()=>{\n        const txt = document.getElementById('findExpr').value;\n        try {\n          if (txt.includes('=>')) {\n            const fn = safeEvalFunction(txt, []);\n            const r = arr.find(fn);\n            showOutput('find -> ' + JSON.stringify(r));\n          } else {\n            const val = parseValue(txt);\n            const r = arr.find(x => deepEqual(x, val));\n            showOutput('find (value) -> ' + JSON.stringify(r));\n          }\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      document.getElementById('findIndexBtn').addEventListener('click', ()=>{\n        const txt = document.getElementById('findExpr').value;\n        try {\n          let idx;\n          if (txt.includes('=>')) {\n            const fn = safeEvalFunction(txt, []);\n            idx = arr.findIndex(fn);\n          } else {\n            const val = parseValue(txt);\n            idx = arr.findIndex(x => deepEqual(x, val));\n          }\n          showOutput('findIndex -> ' + idx);\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      document.getElementById('includesBtn').addEventListener('click', ()=>{\n        const txt = document.getElementById('findExpr').value;\n        try {\n          const val = parseValue(txt);\n          const yes = arr.some(x => deepEqual(x, val));\n          showOutput('includes -> ' + yes);\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      document.getElementById('indexOfBtn').addEventListener('click', ()=>{\n        const txt = document.getElementById('findExpr').value;\n        try {\n          const val = parseValue(txt);\n          const idx = arr.findIndex(x => deepEqual(x, val));\n          showOutput('indexOf (deep) -> ' + idx);\n        } catch(e){ showOutput(e.message, true); }\n      });\n\n      // custom code\n      document.getElementById('runCustom').addEventListener('click', ()=> {\n        runCustom(false);\n      });\n      document.getElementById('runReplace').addEventListener('click', ()=> {\n        runCustom(true);\n      });\n\n      function runCustom(replace) {\n        const code = document.getElementById('customCode').value;\n        try {\n          // create a function with arr in scope and return the evaluated expression\n          // We provide a copy to avoid accidental mutation unless replace=true and function returns array\n          const arrCopy = arr.slice();\n          const fn = new Function('arr', 'return (function(){ try { return ' + code + '} catch(e){ throw e } })();');\n          const res = fn(arrCopy);\n          showOutput('result: ' + JSON.stringify(res));\n          if (replace) {\n            if (!Array.isArray(res)) {\n              showOutput('Replace aborted: result is not an array', true);\n            } else {\n              arr = res;\n              renderArray();\n              showOutput('Array replaced by custom result.');\n            }\n          }\n        } catch(e) {\n          showOutput('Error running code: ' + e.message, true);\n        }\n      }\n\n      document.getElementById('showCodeBtn').addEventListener('click', ()=>{\n        document.getElementById('codeView').textContent = 'const arr = ' + JSON.stringify(arr, null, 2) + ';';\n        showOutput('Code updated.');\n      });\n\n      document.getElementById('copyCode').addEventListener('click', ()=>{\n        const txt = 'const arr = ' + JSON.stringify(arr, null, 2) + ';';\n        navigator.clipboard?.writeText(txt).then(()=> showOutput('Code copied to clipboard.'), ()=> showOutput('Copy failed.', true));\n      });\n\n      document.getElementById('downloadJson').addEventListener('click', ()=>{\n        const data = JSON.stringify(arr, null, 2);\n        const blob = new Blob([data], {type:'application/json'});\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url; a.download = 'array.json';\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n        URL.revokeObjectURL(url);\n        showOutput('Downloaded array.json');\n      });\n\n      document.getElementById('clearConsole').addEventListener('click', ()=> {\n        const out = document.getElementById('output');\n        out.textContent = '';\n        out.style.background = '#0f172a';\n        out.style.color = '#fff';\n      });\n\n      // utility deep equal for primitives and simple objects/arrays\n      function deepEqual(a,b) {\n        try {\n          return JSON.stringify(a) === JSON.stringify(b);\n        } catch(e) {\n          return a === b;\n        }\n      }\n\n      // Initialize from init input\n      (function init(){\n        try {\n          arr = JSON.parse(document.getElementById('initInput').value);\n          if (!Array.isArray(arr)) arr = [];\n        } catch(e) { arr = []; }\n        renderArray();\n      })();\n\n      // small tooltip-like message\n      showOutput('Ready. Edit the input array and try operations.');\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Array"
    }
  ],
  "topic": "Array",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}