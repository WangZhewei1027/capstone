{
  "meta": {
    "concept": "Heap",
    "topic": "Heap (Min/Max)",
    "educational_goal": "Demonstrate heap operations including push, pop, search, and average calculation",
    "expected_interactions": [
      "input",
      "calculate_average",
      "search",
      "find_min_heap",
      "find_max_heap"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "idle",
      "entry_actions": [
        "enableInput()"
      ],
      "exit_actions": []
    },
    {
      "id": "S1_InputReceived",
      "label": "InputReceived",
      "type": "atomic",
      "entry_actions": [
        "processInput()"
      ],
      "exit_actions": [
        "clearInputField()"
      ]
    },
    {
      "id": "S2_CalculatingAverage",
      "label": "CalculatingAverage",
      "type": "atomic",
      "entry_actions": [
        "calculateAverage()"
      ],
      "exit_actions": []
    },
    {
      "id": "S3_Searching",
      "label": "Searching",
      "type": "atomic",
      "entry_actions": [
        "performSearch()"
      ],
      "exit_actions": []
    },
    {
      "id": "S4_FindingMinHeap",
      "label": "FindingMinHeap",
      "type": "atomic",
      "entry_actions": [
        "findMinHeap()"
      ],
      "exit_actions": []
    },
    {
      "id": "S5_FindingMaxHeap",
      "label": "FindingMaxHeap",
      "type": "atomic",
      "entry_actions": [
        "findMaxHeap()"
      ],
      "exit_actions": []
    }
  ],
  "events": [
    {
      "id": "UserInputsValue",
      "event_type": "user_action",
      "description": "User inputs a number in the heap input field",
      "triggers": [
        "#myHeap"
      ]
    },
    {
      "id": "UserClicksCalculateAverage",
      "event_type": "user_action",
      "description": "User clicks the Calculate Average button",
      "triggers": [
        "button: Calculate Average"
      ]
    },
    {
      "id": "UserClicksSearch",
      "event_type": "user_action",
      "description": "User clicks the Search for 1 button",
      "triggers": [
        "button: Search for 1"
      ]
    },
    {
      "id": "UserClicksFindMinHeap",
      "event_type": "user_action",
      "description": "User clicks the Find Min Heap button",
      "triggers": [
        "button: Find Min Heap"
      ]
    },
    {
      "id": "UserClicksFindMaxHeap",
      "event_type": "user_action",
      "description": "User clicks the Find Max Heap button",
      "triggers": [
        "button: Find Max Heap"
      ]
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_InputReceived",
      "event": "UserInputsValue",
      "guard": "true",
      "actions": [
        "storeInputValue()"
      ],
      "expected_observables": [
        "dom:inputReceived"
      ],
      "timeout": 500
    },
    {
      "from": "S1_InputReceived",
      "to": "S0_Idle",
      "event": "UserInputsValue",
      "guard": "true",
      "actions": [
        "updateHeapDisplay()"
      ],
      "expected_observables": [
        "dom:heapUpdated"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S2_CalculatingAverage",
      "event": "UserClicksCalculateAverage",
      "guard": "true",
      "actions": [
        "initiateAverageCalculation()"
      ],
      "expected_observables": [
        "dom:averageCalculationStarted"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S3_Searching",
      "event": "UserClicksSearch",
      "guard": "true",
      "actions": [
        "initiateSearch()"
      ],
      "expected_observables": [
        "dom:searchInitiated"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S4_FindingMinHeap",
      "event": "UserClicksFindMinHeap",
      "guard": "true",
      "actions": [
        "initiateMinHeapFinding()"
      ],
      "expected_observables": [
        "dom:minHeapFindingInitiated"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S5_FindingMaxHeap",
      "event": "UserClicksFindMaxHeap",
      "guard": "true",
      "actions": [
        "initiateMaxHeapFinding()"
      ],
      "expected_observables": [
        "dom:maxHeapFindingInitiated"
      ],
      "timeout": 500
    }
  ],
  "components": [
    "input#myHeap",
    "button: Calculate Average",
    "button: Search for 1",
    "button: Find Min Heap",
    "button: Find Max Heap"
  ]
}