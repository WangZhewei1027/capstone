<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huffman Coding Demonstration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #input-area, #output-area {
            margin: 20px 0;
        }
        .tree {
            margin-top: 20px;
            font-style: italic;
        }
        #codeTable {
            margin-top: 10px;
            border-collapse: collapse;
            width: 80%;
        }
        #codeTable, #codeTable th, #codeTable td {
            border: 1px solid black;
        }
        #codeTable th, #codeTable td {
            padding: 8px;
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>Huffman Coding Demonstration</h1>
    <div id="input-area">
        <label for="textInput">Enter text to encode:</label>
        <input type="text" id="textInput" placeholder="Enter text here" size="30">
        <button onclick="runHuffmanCoding()">Run Huffman Coding</button>
    </div>

    <div id="output-area">
        <h2>Results:</h2>
        <div id="encodedText"></div>
        <table id="codeTable">
            <thead>
                <tr>
                    <th>Character</th>
                    <th>Frequency</th>
                    <th>Code</th>
                </tr>
            </thead>
            <tbody id="tableBody">
            </tbody>
        </table>
        <div id="treeResult" class="tree"></div>
    </div>

    <script>
        function runHuffmanCoding() {
            const inputText = document.getElementById('textInput').value;
            if (!inputText) {
                alert('Please enter text to encode');
                return;
            }

            const frequencies = {};

            // Count the frequency of each character in the input text
            for (const char of inputText) {
                frequencies[char] = (frequencies[char] || 0) + 1;
            }

            // Create nodes for each unique character
            const nodes = Object.entries(frequencies).map(([char, frequency]) => ({ char, frequency, left: null, right: null }));

            // Build the Huffman Tree
            while (nodes.length > 1) {
                nodes.sort((a, b) => a.frequency - b.frequency);
                const left = nodes.shift();
                const right = nodes.shift();
                const newNode = {
                    char: null,
                    frequency: left.frequency + right.frequency,
                    left,
                    right
                };
                nodes.push(newNode);
            }

            const huffmanTree = nodes[0];

            // Generate Huffman codes
            const huffmanCodes = {};
            const generateCodes = (node, code) => {
                if (node.char !== null) {
                    huffmanCodes[node.char] = code;
                    return;
                }
                generateCodes(node.left, code + '0');
                generateCodes(node.right, code + '1');
            };

            generateCodes(huffmanTree, '');

            // Update the HTML with encoded text
            let encodedText = '';
            for (const char of inputText) {
                encodedText += huffmanCodes[char];
            }
            document.getElementById('encodedText').innerText = `Encoded Text: ${encodedText}`;

            // Display coding table
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            for (const [char, frequency] of Object.entries(frequencies)) {
                const code = huffmanCodes[char];
                const row = `<tr><td>${char}</td><td>${frequency}</td><td>${code}</td></tr>`;
                tableBody.innerHTML += row;
            }

            // Display the tree structure
            const displayTree = (node, indent = '') => {
                if (!node) return '';
                let result = node.char ? `${indent}'${node.char}' (${node.frequency})` : `${indent}(${node.frequency})`;
                result += '\n' + displayTree(node.right, indent + '    ');
                result += '\n' + displayTree(node.left, indent + '    ');
                return result;
            };

            document.getElementById('treeResult').innerText = `Tree Structure:\n${displayTree(huffmanTree)}`;
        }
    </script>

</body>
</html>