<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Nearest Neighbors (KNN) Demonstration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
        }
        canvas {
            border: 1px solid #ccc;
        }
        .controls {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <h1>K-Nearest Neighbors (KNN) Demonstration</h1>
    <div class="controls">
        <label for="kValue">Number of Neighbors (K):</label>
        <input type="number" id="kValue" value="3" min="1" max="10">
        <button onclick="classify()">Classify New Point</button>
    </div>
    <canvas id="canvas" width="500" height="400"></canvas>
    <p id="output"></p>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const output = document.getElementById('output');
        
        // Randomly generate some data points for two classes
        const data = [
            {x: 100, y: 150, class: 'A'},
            {x: 200, y: 250, class: 'A'},
            {x: 300, y: 200, class: 'A'},
            {x: 150, y: 100, class: 'B'},
            {x: 250, y: 150, class: 'B'},
            {x: 350, y: 300, class: 'B'}
        ];

        const colors = { 'A': 'blue', 'B': 'red' };

        function drawData() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (const point of data) {
                ctx.fillStyle = colors[point.class];
                ctx.beginPath();
                ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function distance(point1, point2) {
            return Math.sqrt((point1.x - point2.x) ** 2 + (point1.y - point2.y) ** 2);
        }

        function classify() {
            const k = parseInt(document.getElementById('kValue').value, 10);
            const newPoint = {x: 250, y: 250}; // This is the new point we classify
            let distances = [];

            for (const point of data) {
                distances.push({
                    ...point,
                    dist: distance(newPoint, point)
                });
            }

            distances.sort((a, b) => a.dist - b.dist);
            const nearestNeighbors = distances.slice(0, k);

            const classCount = {};
            for (const neighbor of nearestNeighbors) {
                classCount[neighbor.class] = (classCount[neighbor.class] || 0) + 1;
            }

            let maxClass;
            let maxCount = 0;
            for (const cls in classCount) {
                if (classCount[cls] > maxCount) {
                    maxCount = classCount[cls];
                    maxClass = cls;
                }
            }

            output.innerHTML = `New point classified as: <strong>${maxClass}</strong>`;
            
            // Draw the new point and highlight nearest neighbors
            drawData();
            
            ctx.fillStyle = 'green';
            ctx.beginPath();
            ctx.arc(newPoint.x, newPoint.y, 5, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = 'green';
            for (const neighbor of nearestNeighbors) {
                ctx.beginPath();
                ctx.moveTo(newPoint.x, newPoint.y);
                ctx.lineTo(neighbor.x, neighbor.y);
                ctx.stroke();
            }
        }

        // Initial draw
        drawData();
    </script>
</body>
</html>