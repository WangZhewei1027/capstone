<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huffman Coding Demonstration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        input, button, pre {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Huffman Coding</h1>
    <p>Enter a string to see its Huffman Encoding:</p>
    <input type="text" id="inputString" placeholder="Enter your text here">
    <button onclick="huffmanCoding()">Encode</button>

    <h2>Encoded Output:</h2>
    <pre id="output"></pre>

    <h2>Generated Codes:</h2>
    <pre id="codes"></pre>

    <script>
        function huffmanCoding() {
            const input = document.getElementById('inputString').value;
            if (!input) {
                alert('Please enter some text');
                return;
            }

            const frequency = calculateFrequency(input);
            const huffmanTree = buildHuffmanTree(frequency);
            const codes = generateCodes(huffmanTree);
            const encodedString = encodeString(input, codes);

            document.getElementById('output').textContent = encodedString;
            const codeString = Object.entries(codes).map(([char, code]) => `'${char}': ${code}`).join(', ');
            document.getElementById('codes').textContent = `{ ${codeString} }`;
        }

        function calculateFrequency(string) {
            const freq = {};
            for (const char of string) {
                freq[char] = (freq[char] || 0) + 1;
            }
            return freq;
        }

        function buildHuffmanTree(frequency) {
            const heap = Object.entries(frequency).map(([value, freq]) => ({ value, freq }));

            while (heap.length > 1) {
                heap.sort((a, b) => a.freq - b.freq);

                const left = heap.shift();
                const right = heap.shift();
                const newNode = { value: null, freq: left.freq + right.freq, left, right };
                heap.push(newNode);
            }

            return heap[0];
        }

        function generateCodes(node, path = '', codes = {}) {
            if (!node.left && !node.right) {
                codes[node.value] = path;
            } else {
                if (node.left) {
                    generateCodes(node.left, path + '0', codes);
                }
                if (node.right) {
                    generateCodes(node.right, path + '1', codes);
                }
            }
            return codes;
        }

        function encodeString(string, codes) {
            return string.split('').map(char => codes[char]).join('');
        }
    </script>
</body>
</html>