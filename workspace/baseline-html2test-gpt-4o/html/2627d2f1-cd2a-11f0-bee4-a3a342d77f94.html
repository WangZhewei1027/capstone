<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prim's Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        #graph {
            width: 600px;
            height: 400px;
            border: 1px solid black;
            position: relative;
        }
        .node {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: lightblue;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            color: black;
            font-weight: bold;
        }
        .edge {
            position: absolute;
            background-color: gray;
            width: 2px;
        }
    </style>
</head>
<body>
    <h1>Prim's Algorithm Visualization</h1>
    <div id="graph"></div>
    <button id="runAlgorithm">Run Prim's Algorithm</button>
    <script>
        const nodes = [
            { id: 'A', x: 50, y: 100 },
            { id: 'B', x: 200, y: 50 },
            { id: 'C', x: 350, y: 150 },
            { id: 'D', x: 500, y: 250 },
            { id: 'E', x: 250, y: 300 }
        ];

        const edges = [
            { from: 'A', to: 'B', weight: 3 },
            { from: 'A', to: 'C', weight: 5 },
            { from: 'B', to: 'C', weight: 1 },
            { from: 'B', to: 'E', weight: 4 },
            { from: 'C', to: 'D', weight: 2 },
            { from: 'E', to: 'D', weight: 6 }
        ];

        const graphDiv = document.getElementById('graph');

        function createNode(node) {
            const nodeDiv = document.createElement('div');
            nodeDiv.className = 'node';
            nodeDiv.style.left = `${node.x}px`;
            nodeDiv.style.top = `${node.y}px`;
            nodeDiv.textContent = node.id;
            graphDiv.appendChild(nodeDiv);
        }

        function createEdge(edge) {
            const fromNode = nodes.find(node => node.id === edge.from);
            const toNode = nodes.find(node => node.id === edge.to);
            const x1 = fromNode.x + 10;
            const y1 = fromNode.y + 10;
            const x2 = toNode.x + 10;
            const y2 = toNode.y + 10;
            const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            const angle = Math.atan2(y2 - y1, x2 - x1) * (180 / Math.PI);
            const edgeDiv = document.createElement('div');
            edgeDiv.className = 'edge';
            edgeDiv.style.width = `${length}px`;
            edgeDiv.style.transform = `rotate(${angle}deg)`;
            edgeDiv.style.left = `${x1}px`;
            edgeDiv.style.top = `${y1}px`;
            graphDiv.appendChild(edgeDiv);
        }

        function initializeGraph() {
            nodes.forEach(createNode);
            edges.forEach(createEdge);
        }

        function runPrimsAlgorithm() {
            const mstEdges = [];
            const visitedNodes = new Set();
            const availableEdges = [...edges];
            visitedNodes.add(nodes[0].id);

            while (visitedNodes.size < nodes.length) {
                const eligibleEdges = availableEdges.filter(edge => 
                    visitedNodes.has(edge.from) && !visitedNodes.has(edge.to) ||
                    visitedNodes.has(edge.to) && !visitedNodes.has(edge.from)
                );
                const nextEdge = eligibleEdges.reduce((minEdge, edge) => {
                    return edge.weight < minEdge.weight ? edge : minEdge;
                }, { weight: Infinity });

                if (nextEdge.from && nextEdge.to) {
                    mstEdges.push(nextEdge);
                    visitedNodes.add(nextEdge.from);
                    visitedNodes.add(nextEdge.to);
                    const index = availableEdges.indexOf(nextEdge);
                    if (index !== -1) availableEdges.splice(index, 1);
                }
            }

            mstEdges.forEach(edge => {
                const edgeDivs = document.getElementsByClassName('edge');
                Array.from(edgeDivs).forEach(edgeDiv => {
                    edgeDiv.style.backgroundColor = 'gray';
                });
                document.querySelectorAll('.edge').forEach(edgeDiv => {
                    if (edgeDiv.style.transform === `rotate(${Math.atan2(
                        nodes.find(node => node.id === edge.to).y - nodes.find(node => node.id === edge.from).y,
                        nodes.find(node => node.id === edge.to).x - nodes.find(node => node.id === edge.from).x
                    ) * (180 / Math.PI)}deg)`) {
                        edgeDiv.style.backgroundColor = 'green';
                    }
                });
            });
        }

        document.getElementById('runAlgorithm').addEventListener('click', runPrimsAlgorithm);

        initializeGraph();
    </script>
</body>
</html>