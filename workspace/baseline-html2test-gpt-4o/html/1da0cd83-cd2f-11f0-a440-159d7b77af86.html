<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Visualization</title>
    <style>
        #graph-container {
            width: 800px;
            height: 600px;
            border: 1px solid #ccc;
            margin: 20px auto;
            position: relative;
        }
        .node {
            width: 20px;
            height: 20px;
            background-color: #3498db;
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            text-align: center;
            color: white;
            font-size: 12px;
        }
        .arrow {
            stroke: #2ecc71;
            stroke-width: 2px;
        }
    </style>
</head>
<body>

<div id="graph-container"></div>
<div style="text-align: center;">
    <button onclick="addNode()">Add Node</button>
    <button onclick="addDirectedEdge()">Add Directed Edge</button>
    <button onclick="addUndirectedEdge()">Add Undirected Edge</button>
</div>

<script>
    const graphContainer = document.getElementById('graph-container');
    const nodes = [];
    const edges = [];

    function addNode() {
        const nodeCount = nodes.length;
        const newNode = {
            id: nodeCount,
            x: Math.random() * graphContainer.offsetWidth,
            y: Math.random() * graphContainer.offsetHeight
        };
        nodes.push(newNode);

        const nodeElement = document.createElement('div');
        nodeElement.className = 'node';
        nodeElement.innerHTML = nodeCount;
        nodeElement.style.top = `${newNode.y - 10}px`;
        nodeElement.style.left = `${newNode.x - 10}px`;
        graphContainer.appendChild(nodeElement);
    }

    function addDirectedEdge() {
        if (nodes.length < 2) {
            alert("Add more nodes to create an edge!");
            return;
        }
        const source = nodes[Math.floor(Math.random() * nodes.length)];
        const target = nodes[Math.floor(Math.random() * nodes.length)];
        if (source.id === target.id) return;

        edges.push({type: 'directed', source, target});
        drawEdge(source, target, true);
    }

    function addUndirectedEdge() {
        if (nodes.length < 2) {
            alert("Add more nodes to create an edge!");
            return;
        }
        const source = nodes[Math.floor(Math.random() * nodes.length)];
        const target = nodes[Math.floor(Math.random() * nodes.length)];
        if (source.id === target.id) return;

        edges.push({type: 'undirected', source, target});
        drawEdge(source, target, false);
    }

    function drawEdge(source, target, directed) {
        const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
        line.setAttribute("x1", `${source.x}`);
        line.setAttribute("y1", `${source.y}`);
        line.setAttribute("x2", `${target.x}`);
        line.setAttribute("y2", `${target.y}`);
        line.setAttribute("class", "arrow");
        
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.style.position = "absolute";
        svg.style.top = "0";
        svg.style.left = "0";
        svg.style.width = "100%";
        svg.style.height = "100%";
        svg.appendChild(line);
        
        if (directed) {
            const arrowHead = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
            const angle = Math.atan2(target.y - source.y, target.x - source.x);
            const arrowSize = 10;
            const arrowStr = `${target.x},${target.y} 
                            ${target.x - arrowSize * Math.cos(angle - Math.PI / 6)},${target.y - arrowSize * Math.sin(angle - Math.PI / 6)}
                            ${target.x - arrowSize * Math.cos(angle + Math.PI / 6)},${target.y - arrowSize * Math.sin(angle + Math.PI / 6)}`;
            arrowHead.setAttribute("points", arrowStr);
            arrowHead.setAttribute("fill", "#2ecc71");
            svg.appendChild(arrowHead);
        }

        graphContainer.appendChild(svg);
    }
</script>

</body>
</html>