<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Nearest Neighbors (KNN) Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #f7f7f7;
        }
        canvas {
            border: 1px solid #aaa;
            background-color: #fff;
        }
        .controls {
            margin-top: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .controls input {
            width: 50px;
        }
    </style>
</head>
<body>
    <h1>K-Nearest Neighbors (KNN) Demonstration</h1>
    <canvas id="knnCanvas" width="600" height="400"></canvas>
    <div class="controls">
        <label for="kValue">K Value: </label>
        <input type="number" id="kValue" value="3" min="1"/>
        <button id="addPoint">Add Point</button>
    </div>
    <script>
        const canvas = document.getElementById('knnCanvas');
        const ctx = canvas.getContext('2d');
        const kInput = document.getElementById('kValue');
        const addPointBtn = document.getElementById('addPoint');

        let data = [
            { x: 50, y: 100, class: 'A' },
            { x: 120, y: 200, class: 'A' },
            { x: 200, y: 150, class: 'B' },
            { x: 300, y: 90, class: 'B' },
            { x: 400, y: 300, class: 'A' },
            { x: 500, y: 240, class: 'B' }
        ];

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            data.forEach(point => {
                ctx.fillStyle = point.class === 'A' ? '#FF5733' : '#33FF57';
                ctx.beginPath();
                ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function addNewPoint(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            const distances = data.map(point => ({
                ...point,
                distance: Math.sqrt(Math.pow(point.x - x, 2) + Math.pow(point.y - y, 2))
            }));

            distances.sort((a, b) => a.distance - b.distance);
            const k = parseInt(kInput.value, 10);
            const nearestNeighbors = distances.slice(0, k);

            const classCount = nearestNeighbors.reduce((count, neighbor) => {
                count[neighbor.class] = (count[neighbor.class] || 0) + 1;
                return count;
            }, {});

            const newClass = Object.keys(classCount).reduce((prev, curr) => classCount[prev] > classCount[curr] ? prev : curr);
            data.push({ x, y, class: newClass });
            draw();
        }

        canvas.addEventListener('click', addNewPoint);
        addPointBtn.addEventListener('click', draw);

        draw();
    </script>
</body>
</html>