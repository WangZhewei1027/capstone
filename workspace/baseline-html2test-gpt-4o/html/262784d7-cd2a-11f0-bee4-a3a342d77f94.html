<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            background-color: #f4f4f9;
        }
        #arrayContainer {
            display: flex;
        }
        .arrayElement {
            margin: 5px;
            padding: 10px;
            background-color: #4A90E2;
            color: white;
            border-radius: 5px;
            font-weight: bold;
        }
        .highlight {
            background-color: #F5A623;
        }
    </style>
</head>
<body>

    <h1>Bubble Sort Visualization</h1>
    <div id="arrayContainer"></div>
    <button onclick="startBubbleSort()">Start Bubble Sort</button>

    <script>
        const arrayContainer = document.getElementById('arrayContainer');
        const array = [5, 3, 8, 4, 2, 7];
        
        function displayArray() {
            arrayContainer.innerHTML = '';
            for (let i = 0; i < array.length; i++) {
                const element = document.createElement('div');
                element.classList.add('arrayElement');
                element.innerText = array[i];
                arrayContainer.appendChild(element);
            }
        }

        function highlightElements(idx1, idx2) {
            arrayContainer.children[idx1].classList.add('highlight');
            arrayContainer.children[idx2].classList.add('highlight');
        }

        function removeHighlight() {
            Array.from(arrayContainer.children).forEach(element => {
                element.classList.remove('highlight');
            });
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function startBubbleSort() {
            displayArray();
            const length = array.length;
            for (let i = 0; i < length; i++) {
                for (let j = 0; j < length - i - 1; j++) {
                    highlightElements(j, j + 1);
                    await sleep(500);
                    if (array[j] > array[j + 1]) {
                        const temp = array[j];
                        array[j] = array[j + 1];
                        array[j + 1] = temp;
                    }
                    removeHighlight();
                    displayArray();
                    await sleep(500);
                }
            }
        }

        displayArray();
    </script>

</body>
</html>