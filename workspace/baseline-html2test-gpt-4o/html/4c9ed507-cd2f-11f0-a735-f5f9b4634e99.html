<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kruskal's Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #graph {
            border: 1px solid black;
            margin-top: 20px;
        }

        .node {
            fill: lightblue;
            stroke: black;
            stroke-width: 1px;
        }

        .edge {
            stroke: lightgray;
            stroke-width: 2px;
        }

        .mst {
            stroke: green;
            stroke-width: 2px;
        }
    </style>
</head>

<body>
    <h1>Kruskal's Algorithm Visualization</h1>
    <svg id="graph" width="500" height="500">
        <!-- Nodes and edges will be dynamically created by JavaScript -->
    </svg>
    <button onclick="visualizeKruskal()">Start Kruskal's Algorithm</button>

    <script>
        const nodes = [
            { id: 0, x: 50, y: 50 },
            { id: 1, x: 450, y: 50 },
            { id: 2, x: 450, y: 450 },
            { id: 3, x: 50, y: 450 },
            { id: 4, x: 250, y: 250 }
        ];

        const edges = [
            { u: 0, v: 1, weight: 10 },
            { u: 0, v: 3, weight: 10 },
            { u: 0, v: 4, weight: 5 },
            { u: 1, v: 2, weight: 10 },
            { u: 1, v: 4, weight: 7 },
            { u: 2, v: 3, weight: 10 },
            { u: 2, v: 4, weight: 4 },
            { u: 3, v: 4, weight: 8 }
        ];

        const graph = document.getElementById('graph');

        function drawGraph() {
            for (const edge of edges) {
                const { u, v } = edge;
                const x1 = nodes[u].x;
                const y1 = nodes[u].y;
                const x2 = nodes[v].x;
                const y2 = nodes[v].y;

                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', x1);
                line.setAttribute('y1', y1);
                line.setAttribute('x2', x2);
                line.setAttribute('y2', y2);
                line.setAttribute('class', 'edge');
                graph.appendChild(line);
            }

            for (const node of nodes) {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', node.x);
                circle.setAttribute('cy', node.y);
                circle.setAttribute('r', 20);
                circle.setAttribute('class', 'node');

                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', node.x);
                text.setAttribute('y', node.y + 5);
                text.setAttribute('text-anchor', 'middle');
                text.textContent = node.id;

                graph.appendChild(circle);
                graph.appendChild(text);
            }
        }

        function find(parent, i) {
            if (parent[i] !== i) {
                parent[i] = find(parent, parent[i]);
            }
            return parent[i];
        }

        function union(parent, rank, x, y) {
            const xRoot = find(parent, x);
            const yRoot = find(parent, y);

            if (rank[xRoot] < rank[yRoot]) {
                parent[xRoot] = yRoot;
            } else if (rank[xRoot] > rank[yRoot]) {
                parent[yRoot] = xRoot;
            } else {
                parent[yRoot] = xRoot;
                rank[xRoot]++;
            }
        }

        function visualizeKruskal() {
            const parent = [];
            const rank = [];
            for (let i = 0; i < nodes.length; i++) {
                parent[i] = i;
                rank[i] = 0;
            }

            edges.sort((a, b) => a.weight - b.weight);

            const mstEdges = [];

            for (const edge of edges) {
                const { u, v, weight } = edge;
                const uRoot = find(parent, u);
                const vRoot = find(parent, v);

                if (uRoot !== vRoot) {
                    mstEdges.push(edge);
                    union(parent, rank, uRoot, vRoot);

                    setTimeout(() => {
                        const x1 = nodes[u].x;
                        const y1 = nodes[u].y;
                        const x2 = nodes[v].x;
                        const y2 = nodes[v].y;

                        const line = graph.querySelector(`line[x1="${x1}"][y1="${y1}"][x2="${x2}"][y2="${y2}"]`);
                        line.classList.add('mst');
                    }, mstEdges.length * 1000);
                }
            }
        }

        drawGraph();
    </script>
</body>

</html>