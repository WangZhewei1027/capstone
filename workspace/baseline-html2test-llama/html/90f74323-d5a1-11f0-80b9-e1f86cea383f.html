<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topological Sort</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #graph {
            width: 50%;
            height: 400px;
            border: 1px solid #ccc;
            padding: 10px;
        }
        #graph input[type="number"] {
            width: 50%;
            height: 30px;
            margin-bottom: 10px;
        }
        #graph input[type="number"]:focus {
            outline: none;
            border: 2px solid #007bff;
        }
    </style>
</head>
<body>
    <h1>Topological Sort</h1>
    <form id="sort-form">
        <label for="vertices">Vertices:</label>
        <input type="number" id="vertices" value="5">
        <br><br>
        <label for="edges">Edges:</label>
        <input type="number" id="edges" value="10">
        <br><br>
        <button type="submit">Sort</button>
    </form>
    <div id="graph"></div>

    <script>
        const vertices = document.getElementById('vertices').value;
        const edges = document.getElementById('edges').value;

        const graph = new Array(vertices).fill(0).map(() => []);

        function addEdge(vertex1, vertex2) {
            graph[vertex1].push(vertex2);
            graph[vertex2].push(vertex1);
        }

        function topologicalSort() {
            const visited = new Array(vertices).fill(false);
            const stack = [];

            function dfs(vertex) {
                visited[vertex] = true;
                for (const neighbor of graph[vertex]) {
                    if (!visited[neighbor]) {
                        dfs(neighbor);
                    }
                }
                stack.push(vertex);
            }

            for (let i = 0; i < vertices; i++) {
                if (!visited[i]) {
                    dfs(i);
                }
            }

            return stack.reverse();
        }

        const sort = () => {
            const sorted = topologicalSort();
            const graphCopy = JSON.parse(JSON.stringify(graph));

            for (const vertex of sorted) {
                for (const neighbor of graphCopy[vertex]) {
                    graphCopy[neighbor].splice(graphCopy[neighbor].indexOf(vertex), 1);
                }
            }

            for (const vertex of sorted) {
                for (const neighbor of graphCopy[vertex]) {
                    graph[vertex].splice(graph[vertex].indexOf(neighbor), 1);
                }
            }

            for (const vertex of sorted) {
                for (const neighbor of graph[vertex]) {
                    graphCopy[neighbor].push(vertex);
                }
            }

            for (let i = 0; i < vertices; i++) {
                graph[i].sort((a, b) => a - b);
            }

            const graphHTML = graph.map((row, index) => {
                return row.map((vertex) => {
                    return `<div class="edge ${vertex !== index ? 'undirected' : 'directed'}">${vertex} -> ${index === 0 ? '' : graph[index - 1][vertex - 1]}</div>`;
                }).join('');
            }).join('');

            document.getElementById('graph').innerHTML = graphHTML;
        };

        const form = document.getElementById('sort-form');
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const verticesInput = document.getElementById('vertices').value;
            const edgesInput = document.getElementById('edges').value;

            if (verticesInput === '' || edgesInput === '') {
                alert('Please fill in both vertices and edges');
            } else {
                topologicalSort();
                sort();
            }
        });
    </script>
</body>
</html>