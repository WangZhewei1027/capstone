<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Depth-First Search (DFS)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #graph {
            width: 800px;
            height: 600px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>Depth-First Search (DFS)</h1>
    <canvas id="graph"></canvas>
    <script>
        let graph = new Array(5).fill(0).map(() => new Array(5).fill(0));
        let visited = new Array(5).fill(false);
        let stack = new Array(5).fill(false);
        let currentPath = new Array(5).fill(false);
        let colors = new Array(5).fill(0);

        function drawGraph() {
            let ctx = document.getElementById('graph').getContext('2d');
            let g = new Graph(ctx, graph, visited, stack, currentPath, colors);
            g.init();
        }

        function dfs(node) {
            visited[node] = true;
            currentPath[node] = true;
            colors[node] = g.getColors();
            stack[node] = true;

            for (let neighbor of graph[node]) {
                if (!visited[neighbor]) {
                    dfs(neighbor);
                } else if (currentPath[neighbor]) {
                    // Node is in the current path, so we backtrack
                    g.backtrack();
                }
            }

            stack[node] = false;
            currentPath[node] = false;
            g.updateColors();
        }

        function backtrack() {
            for (let i = 0; i < graph.length; i++) {
                if (stack[i]) {
                    let color = colors[i];
                    let node = i;
                    let colorIndex = colors.indexOf(color);
                    let neighbors = graph[node];
                    let visited = graph[node].filter(neighbor => !stack[neighbor]);

                    // Update the color of the node
                    graph[node][colorIndex] = color;

                    // Update the color of the neighbors
                    for (let neighbor of visited) {
                        graph[neighbor][colorIndex] = color;
                    }

                    // Update the colors of the neighbors
                    for (let neighbor of neighbors) {
                        graph[neighbor][colorIndex] = color;
                    }

                    // Update the color of the node
                    colors[node] = color;

                    // Update the colors of the neighbors
                    for (let neighbor of neighbors) {
                        graph[neighbor][colorIndex] = color;
                    }

                    return;
                }
            }
        }

        let graphData = {
            'A': ['B', 'C'],
            'B': ['D'],
            'C': ['A', 'F'],
            'D': ['E'],
            'E': ['F'],
            'F': ['A', 'C', 'D']
        };

        drawGraph();
        dfs('A');
    </script>
</body>
</html>