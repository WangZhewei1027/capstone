import { test, expect } from '@playwright/test';

const APP_URL = 'http://127.0.0.1:5500/workspace/baseline-html2test-llama/html/90f6f503-d5a1-11f0-80b9-e1f86cea383f.html';

test.describe('Radix Sort Application (90f6f503-d5a1-11f0-80b9-e1f86cea383f)', () => {
  // Test the static structure and presence of expected elements without waiting for the page's scripts to complete.
  test('Initial page load: static content and structure are present', async ({ page }) => {
    // Navigate using waitUntil: 'commit' so we don't hang if the page's inline script blocks load events.
    await page.goto(APP_URL, { waitUntil: 'commit' });

    // Verify the page title and main heading
    await expect(page).toHaveTitle(/Radix Sort/);
    const heading = page.locator('h1');
    await expect(heading).toHaveText('Radix Sort');
    await expect(heading).toBeVisible();

    // The output container should exist and be initially empty
    const output = page.locator('#output');
    await expect(output).toBeVisible();
    const text = (await output.textContent()) ?? '';
    expect(text.trim()).toBe('', 'Expected #output to be empty on initial load');

    // Assert there are no interactive form controls (inputs, buttons, selects, textareas, or forms)
    const interactive = await page.locator('input, button, select, textarea, form').count();
    expect(interactive).toBe(0);

    // Ensure the algorithm functions are declared on the global scope (function declarations are hoisted).
    // We check that window.radixSort exists and is a function without invoking it.
    const hasRadixSort = await page.evaluate(() => typeof window.radixSort === 'function');
    expect(hasRadixSort).toBe(true);
  });

  // Test the runtime behaviour: observe console messages and page errors emitted by the page's script.
  test('Runtime observation: capture console logs and page errors from inline script', async ({ page }) => {
    // Collect console messages and page errors for assertions.
    const consoleMessages