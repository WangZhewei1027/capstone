<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Binary Search Tree (BST) Exploration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        #bst-visualization {
            text-align: center;
            margin: 20px 0;
        }
        #bst-visualization svg {
            max-width: 100%;
            height: auto;
        }
        #controls {
            text-align: center;
            margin: 20px 0;
        }
        input[type="number"] {
            padding: 10px;
            margin: 0 5px;
            width: 60px;
        }
        button {
            padding: 10px 20px;
            margin: 0 5px;
            cursor: pointer;
        }
        #explanation {
            margin-top: 20px;
            background-color: #fff;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

<h1>Interactive Binary Search Tree (BST) Explorer</h1>

<div id="bst-visualization"></div>

<div id="controls">
    <input type="number" id="value" placeholder="Enter a value" />
    <button onclick="insertNode()">Insert Node</button>
    <button onclick="deleteNode()">Delete Node</button>
</div>

<div id="explanation">
    <h3>How Binary Search Trees Work:</h3>
    <p>A binary search tree (BST) is a data structure that maintains sorted order. Each node has a value, and nodes to the left have lesser values while nodes to the right have greater values.</p>
    <h4>Operations:</h4>
    <ul>
        <li><strong>Insertion:</strong> Adds a new value to the BST.</li>
        <li><strong>Deletion:</strong> Removes a value from the BST.</li>
        <li><strong>Traversal:</strong> Explore nodes in sorted order.</li>
    </ul>
</div>

<script>
    let bst = null;

    class Node {
        constructor(data) {
            this.data = data;
            this.left = null;
            this.right = null;
        }
    }

    function insert(data) {
        const newNode = new Node(data);
        if (bst === null) {
            bst = newNode;
        } else {
            insertNode(bst, newNode);
        }
        drawBST();
    }

    function insertNode(root, newNode) {
        if (newNode.data < root.data) {
            if (root.left === null) {
                root.left = newNode;
            } else {
                insertNode(root.left, newNode);
            }
        } else {
            if (root.right === null) {
                root.right = newNode;
            } else {
                insertNode(root.right, newNode);
            }
        }
    }

    function deleteNode() {
        const value = parseInt(document.getElementById("value").value);
        bst = deleteNodeUtil(bst, value);
        drawBST();
    }

    function deleteNodeUtil(root, key) {
        if (root === null) return root;

        if (key < root.data) {
            root.left = deleteNodeUtil(root.left, key);
        } else if (key > root.data) {
            root.right = deleteNodeUtil(root.right, key);
        } else {
            if (root.left === null) return root.right;
            else if (root.right === null) return root.left;

            root.data = findMin(root.right).data;
            root.right = deleteNodeUtil(root.right, root.data);
        }
        return root;
    }

    function findMin(root) {
        while (root.left !== null) root = root.left;
        return root;
    }

    function drawBST() {
        const svg = d3.select("#bst-visualization").html("").append("svg")
            .attr("width", 600)
            .attr("height", 400);

        drawNode(bst, svg, 300, 20, 150);
    }

    function drawNode(node, svg, x, y, offset) {
        if (node === null) return;

        svg.append("circle")
            .attr("cx", x)
            .attr("cy", y)
            .attr("r", 20)
            .attr("fill", "#7cb342");

        svg.append("text")
            .attr("x", x)
            .attr("y", y + 5)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .text(node.data);

        if (node.left !== null) {
            svg.append("line")
                .attr("x1", x)
                .attr("y1", y + 20)
                .attr("x2", x - offset)
                .attr("y2", y + 80)
                .attr("stroke", "#000");

            drawNode(node.left, svg, x - offset, y + 80, offset / 2);
        }

        if (node.right !== null) {
            svg.append("line")
                .attr("x1", x)
                .attr("y1", y + 20)
                .attr("x2", x + offset)
                .attr("y2", y + 80)
                .attr("stroke", "#000");

            drawNode(node.right, svg, x + offset, y + 80, offset / 2);
        }
    }

    function insertNode() {
        const value = parseInt(document.getElementById("value").value);
        insert(value);
        document.getElementById("value").value = '';
    }
</script>

<script src="https://d3js.org/d3.v7.min.js"></script>
</body>
</html>