<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Red-Black Tree Interactive Module</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 24px;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            margin-bottom: 16px;
        }
        .container {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            max-width: 800px;
            width: 100%;
        }
        #visualization {
            width: 60%;
            height: 400px;
            border: 1px solid #333;
            background-color: white;
            position: relative;
            overflow: hidden;
        }
        #controls {
            width: 35%;
            padding: 16px;
            background-color: white;
            border: 1px solid #333;
            border-radius: 8px;
        }
        #insert-input {
            width: calc(100% - 32px);
            padding: 8px;
            margin-bottom: 16px;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .node {
            width: 30px;
            height: 30px;
            display: inline-block;
            position: absolute;
            text-align: center;
            line-height: 30px;
            border-radius: 50%;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.3s;
        }
        .red { background-color: red; color: white; }
        .black { background-color: black; color: white; }
        .balance-msg {
            margin-top: 12px;
            font-style: italic;
            color: green;
        }
    </style>
</head>
<body>

<h1>Interactive Red-Black Tree</h1>

<div class="container">
    <div id="visualization"></div>
    <div id="controls">
        <input type="number" id="insert-input" placeholder="Enter a number to insert" />
        <button id="insert-button">Insert</button>
        <div class="balance-msg" id="balance-msg"></div>
    </div>
</div>

<script>
    let tree = [];
    let visualization = document.getElementById('visualization');
    let insertInput = document.getElementById('insert-input');
    let insertButton = document.getElementById('insert-button');
    let balanceMsg = document.getElementById('balance-msg');

    // Insert a new node into the Red-Black Tree
    insertButton.addEventListener('click', function() {
        let value = parseInt(insertInput.value);
        insertInput.value = '';
        if (!isNaN(value)) {
            tree.push(value);
            buildVisualization();
            rebalance();
        }
    });

    function buildVisualization() {
        visualization.innerHTML = '';
        const positions = calculateNodePositions(tree.length);
        tree.forEach((value, index) => {
            let node = document.createElement('div');
            node.className = 'node ' + (index % 2 === 0 ? 'red' : 'black');  // Simple alternation for color
            node.innerText = value;
            node.style.left = positions[index].x + 'px';
            node.style.top = positions[index].y + 'px';
            visualization.appendChild(node);
        });
    }

    function calculateNodePositions(count) {
        let positions = [];
        const startX = 60; // Starting position
        const startY = 40;
        const gap = 50; // Gap between nodes

        for (let i = 0; i < count; i++) {
            positions.push({ x: startX + (i * gap), y: startY });
        }
        return positions;
    }

    function rebalance() {
        // Dummy logic for "rebalancing" to simply show feedback
        balanceMsg.textContent = "Tree balanced after insertion!";
    }
</script>



  <script id="fsm" type="application/json">
    {
  "topic": "Interactive Application",
  "description": "Finite State Machine modeling user interactions and visual updates in a simple Red-Black Tree visualization app. It captures input processing, rendering, feedback, and hover states.",
  "states": [
    {
      "name": "idle",
      "onEnter": "readyForInteraction",
      "on": {
        "MOUSE_OVER_INSERT": "insert_button_hovered",
        "CLICK_INSERT": "processing_input"
      }
    },
    {
      "name": "insert_button_hovered",
      "onEnter": "applyHoverStyle",
      "onExit": "removeHoverStyle",
      "on": {
        "MOUSE_OUT_INSERT": "idle",
        "CLICK_INSERT": "processing_input"
      }
    },
    {
      "name": "processing_input",
      "onEnter": "readValueAndClearInput",
      "on": {
        "VALUE_VALID": "updating_tree",
        "VALUE_INVALID": "idle"
      }
    },
    {
      "name": "updating_tree",
      "onEnter": "appendValueToTree",
      "on": {
        "TREE_UPDATED": "building_visualization"
      }
    },
    {
      "name": "building_visualization",
      "onEnter": "buildVisualization",
      "on": {
        "VISUALIZATION_BUILT": "rebalancing"
      }
    },
    {
      "name": "rebalancing",
      "onEnter": "updateBalanceMessage",
      "on": {
        "REBALANCE_COMPLETE": "idle"
      }
    }
  ],
  "events": [
    "MOUSE_OVER_INSERT",
    "MOUSE_OUT_INSERT",
    "CLICK_INSERT",
    "VALUE_VALID",
    "VALUE_INVALID",
    "TREE_UPDATED",
    "VISUALIZATION_BUILT",
    "REBALANCE_COMPLETE"
  ],
  "notes": "All transitions are synchronous and occur in response to a single Insert button click or hover. readValueAndClearInput parses the number, then clears the input field, and triggers VALUE_VALID/INVALID internally based on isNaN(value). appendValueToTree corresponds to tree.push(value). buildVisualization clears the visualization, computes positions, and renders nodes with alternating red/black styles. updateBalanceMessage sets the feedback text to 'Tree balanced after insertion!'. Hover feedback for the Insert button is handled via CSS, represented here by applyHoverStyle/removeHoverStyle. No real red-black balancing is performed; the rebalancing state only updates the message. Returning to idle indicates the UI is ready for further input."
}
  </script>
</body>
</html>