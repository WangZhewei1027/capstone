{
  "topic": "Binary Search Tree Interactive Module",
  "description": "FSM modeling user interactions, animations and visual feedback for inserting, searching and deleting nodes in the BST interactive visualization.",
  "states": [
    {
      "name": "idle",
      "onEnter": "renderTree",
      "onExit": "noop",
      "on": {
        "INSERT": "inserting",
        "SEARCH": "searching",
        "DELETE": "deleting",
        "RANDOM": "random_inserting",
        "CLEAR": "cleared",
        "SPEED_CHANGE": "idle",
        "TOGGLE_STEP": "idle",
        "TOGGLE_SHOW_VALUES": "idle"
      }
    },
    {
      "name": "inserting",
      "onEnter": "call_doInsert",
      "onExit": "noop",
      "on": {
        "INSERT_FINISHED": "idle",
        "INSERT_DUPLICATE": "duplicate",
        "CANCEL": "idle",
        "INSERT": "inserting",
        "SEARCH": "inserting",
        "DELETE": "inserting",
        "CLEAR": "inserting"
      }
    },
    {
      "name": "duplicate",
      "onEnter": "setStatusDuplicate",
      "onExit": "renderTree",
      "on": {
        "ACK": "idle",
        "INSERT": "inserting",
        "CLEAR": "cleared"
      }
    },
    {
      "name": "searching",
      "onEnter": "call_doSearch",
      "onExit": "noop",
      "on": {
        "SEARCH_FOUND": "found",
        "SEARCH_NOT_FOUND": "not_found",
        "CANCEL": "idle",
        "INSERT": "searching",
        "DELETE": "searching",
        "CLEAR": "searching"
      }
    },
    {
      "name": "found",
      "onEnter": "highlightFound",
      "onExit": "renderTree",
      "on": {
        "ACK": "idle",
        "INSERT": "inserting",
        "SEARCH": "searching",
        "DELETE": "deleting",
        "CLEAR": "cleared"
      }
    },
    {
      "name": "not_found",
      "onEnter": "setStatusNotFound",
      "onExit": "renderTree",
      "on": {
        "ACK": "idle",
        "INSERT": "inserting",
        "SEARCH": "searching",
        "DELETE": "deleting",
        "CLEAR": "cleared"
      }
    },
    {
      "name": "deleting",
      "onEnter": "call_doDelete",
      "onExit": "noop",
      "on": {
        "DELETE_FINISHED": "deleted",
        "DELETE_NOT_FOUND": "not_found",
        "CANCEL": "idle",
        "INSERT": "deleting",
        "SEARCH": "deleting",
        "CLEAR": "deleting"
      }
    },
    {
      "name": "deleted",
      "onEnter": "setStatusDeleted",
      "onExit": "renderTree",
      "on": {
        "ACK": "idle",
        "INSERT": "inserting",
        "SEARCH": "searching",
        "DELETE": "deleting",
        "CLEAR": "cleared"
      }
    },
    {
      "name": "random_inserting",
      "onEnter": "call_doRandomInsert",
      "onExit": "noop",
      "on": {
        "RANDOM_DONE": "idle",
        "CANCEL": "idle",
        "INSERT": "random_inserting",
        "CLEAR": "random_inserting"
      }
    },
    {
      "name": "cleared",
      "onEnter": "clearTree",
      "onExit": "renderTree",
      "on": {
        "ACK": "idle",
        "INSERT": "inserting",
        "RANDOM": "random_inserting"
      }
    }
  ],
  "events": [
    "INSERT",
    "SEARCH",
    "DELETE",
    "RANDOM",
    "CLEAR",
    "SPEED_CHANGE",
    "TOGGLE_STEP",
    "TOGGLE_SHOW_VALUES",
    "INSERT_FINISHED",
    "INSERT_DUPLICATE",
    "SEARCH_FOUND",
    "SEARCH_NOT_FOUND",
    "DELETE_FINISHED",
    "DELETE_NOT_FOUND",
    "RANDOM_DONE",
    "ACK",
    "CANCEL"
  ],
  "notes": "Animation timing and step-by-step behavior are controlled by speedRange (animDelay) and stepToggle. renderTree and setStatus are invoked on many transitions to update visual state. animatePath is used internally during inserting/searching/deleting to highlight comparisons; these are modeled as part of the inserting/searching/deleting states. The UI does not explicitly disable controls during animations; concurrent user actions may invoke additional transitions but the intended flow is to complete the current operation (INSERT/SEARCH/DELETE/RANDOM) before returning to idle."
}