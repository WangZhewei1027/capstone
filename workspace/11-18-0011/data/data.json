[
  {
    "id": "29cd9c30-c494-11f0-86ed-1584fbbc737c",
    "timestamp": "2025-11-18T15:37:44.335Z",
    "model": "gpt-5-mini",
    "status": "success",
    "question": "bubble sort",
    "answer": {
      "role": "assistant",
      "content": "<!doctype html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Bubble Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#38bdf8;\n      --muted:#94a3b8;\n      --good:#34d399;\n      --bad:#fb7185;\n      --bar-gap:4px;\n    }\n    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;background:var(--bg);color:#e6eef6}\n    .app{display:flex;flex-direction:column;height:100%;padding:16px;box-sizing:border-box;gap:12px}\n    header{display:flex;align-items:center;gap:12px}\n    h1{font-size:18px;margin:0}\n    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center}\n    .panel{background:linear-gradient(180deg,var(--panel),#071025);padding:12px;border-radius:8px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}\n    .row{display:flex;gap:8px;align-items:center}\n    label{font-size:13px;color:var(--muted)}\n    input[type=range]{width:160px}\n    button{background:var(--accent);border:none;color:#042033;padding:8px 12px;border-radius:6px;cursor:pointer;font-weight:600}\n    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 10px}\n    button:disabled{opacity:.4;cursor:not-allowed}\n    .main{display:flex;gap:12px;flex:1;min-height:0}\n    .visual{flex:1;display:flex;flex-direction:column;gap:12px}\n    .bars{flex:1;background:linear-gradient(180deg,#071428,#071428);display:flex;align-items:end;padding:12px;border-radius:8px;gap:var(--bar-gap);overflow:hidden}\n    .bar{background:linear-gradient(180deg,var(--accent),#0ea5b7);flex:1;border-radius:4px 4px 2px 2px;transition:height 300ms ease, background-color 200ms ease;display:flex;align-items:end;justify-content:center;color:rgba(255,255,255,0.9);font-size:11px}\n    .bar.small{font-size:10px}\n    .bar.compare{background:linear-gradient(180deg,#f97316,#fb923c)}\n    .bar.swap{background:linear-gradient(180deg,#fb7185,#f43f5e)}\n    .bar.sorted{background:linear-gradient(180deg,var(--good),#10b981)}\n    .info{width:320px;display:flex;flex-direction:column;gap:12px}\n    pre{margin:0;background:transparent;color:var(--muted);font-size:13px;line-height:1.4}\n    .pseudocode{background:linear-gradient(180deg,#071022,#081227);padding:8px;border-radius:6px;min-height:120px}\n    .line{padding:6px;border-radius:4px}\n    .line.current{background:linear-gradient(90deg,rgba(56,189,248,0.08),transparent);color:var(--accent);font-weight:600}\n    .stats{display:flex;flex-direction:column;gap:6px}\n    .stat{display:flex;justify-content:space-between;color:var(--muted);font-size:13px}\n    footer{display:flex;justify-content:space-between;align-items:center}\n    .small{font-size:12px;color:var(--muted)}\n    @media (max-width:900px){\n      .main{flex-direction:column}\n      .info{width:auto}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\">\n    <header>\n      <h1>Bubble Sort Visualizer</h1>\n      <div class=\"small\">Demonstrates step-by-step bubble sort with animated swaps, comparisons, and counters.</div>\n    </header>\n\n    <div class=\"controls panel row\">\n      <div class=\"row\">\n        <label>Size</label>\n        <input id=\"size\" type=\"range\" min=\"5\" max=\"60\" value=\"30\">\n        <div id=\"sizeVal\" class=\"small\">30</div>\n      </div>\n\n      <div class=\"row\">\n        <label>Speed</label>\n        <input id=\"speed\" type=\"range\" min=\"1\" max=\"100\" value=\"50\">\n        <div id=\"speedVal\" class=\"small\">Medium</div>\n      </div>\n\n      <div class=\"row\">\n        <button id=\"shuffleBtn\">Generate</button>\n        <button id=\"playBtn\">Play</button>\n        <button id=\"stepBackBtn\" class=\"secondary\">Step ◀</button>\n        <button id=\"stepFwdBtn\" class=\"secondary\">Step ▶</button>\n        <button id=\"resetBtn\" class=\"secondary\">Reset</button>\n      </div>\n    </div>\n\n    <div class=\"main\">\n      <div class=\"visual\">\n        <div class=\"panel\" style=\"display:flex;justify-content:space-between;align-items:center\">\n          <div class=\"small\">Array visualization</div>\n          <div class=\"small\" id=\"status\">Idle</div>\n        </div>\n        <div id=\"bars\" class=\"bars panel\" aria-hidden=\"false\"></div>\n        <div style=\"display:flex;gap:8px;justify-content:space-between\">\n          <div class=\"small\">Comparisons: <strong id=\"compCount\">0</strong></div>\n          <div class=\"small\">Swaps: <strong id=\"swapCount\">0</strong></div>\n          <div class=\"small\">Step: <strong id=\"stepIdx\">0</strong>/<strong id=\"totalSteps\">0</strong></div>\n        </div>\n      </div>\n\n      <div class=\"info\">\n        <div class=\"panel pseudocode\">\n          <div style=\"font-weight:700;margin-bottom:6px\">Pseudocode</div>\n          <div id=\"line1\" class=\"line\">1. for i = 0 to n-1</div>\n          <div id=\"line2\" class=\"line\">2.   for j = 0 to n-i-2</div>\n          <div id=\"line3\" class=\"line\">3.     if arr[j] &gt; arr[j+1]</div>\n          <div id=\"line4\" class=\"line\">4.       swap arr[j], arr[j+1]</div>\n        </div>\n\n        <div class=\"panel stats\">\n          <div class=\"stat\"><div>Array</div><div id=\"arrText\" style=\"font-family:monospace\"></div></div>\n          <div class=\"stat\"><div>Current i, j</div><div id=\"ijText\">-</div></div>\n          <div class=\"stat\"><div>Time Complexity</div><div>O(n²) (worst/average), O(n) (best, already sorted)</div></div>\n          <div class=\"stat\"><div>Space Complexity</div><div>O(1)</div></div>\n        </div>\n      </div>\n    </div>\n\n    <footer>\n      <div class=\"small\">Tip: press Generate to create a new array. Use Play to animate all steps or Step to move one step at a time.</div>\n      <div class=\"small\">Bubble sort is stable and compares adjacent elements repeatedly.</div>\n    </footer>\n  </div>\n\n  <script>\n    // Bubble Sort Visualizer\n    (function(){\n      // DOM\n      const barsEl = document.getElementById('bars');\n      const sizeEl = document.getElementById('size');\n      const sizeVal = document.getElementById('sizeVal');\n      const speedEl = document.getElementById('speed');\n      const speedVal = document.getElementById('speedVal');\n      const shuffleBtn = document.getElementById('shuffleBtn');\n      const playBtn = document.getElementById('playBtn');\n      const stepBackBtn = document.getElementById('stepBackBtn');\n      const stepFwdBtn = document.getElementById('stepFwdBtn');\n      const resetBtn = document.getElementById('resetBtn');\n      const compCountEl = document.getElementById('compCount');\n      const swapCountEl = document.getElementById('swapCount');\n      const stepIdxEl = document.getElementById('stepIdx');\n      const totalStepsEl = document.getElementById('totalSteps');\n      const arrText = document.getElementById('arrText');\n      const ijText = document.getElementById('ijText');\n      const statusEl = document.getElementById('status');\n      const lineEls = [null, document.getElementById('line1'), document.getElementById('line2'), document.getElementById('line3'), document.getElementById('line4')];\n\n      // State\n      let array = [];\n      let steps = []; // each step: {arr:[], type:'init'|'compare'|'swap'|'finish', i, j}\n      let current = 0;\n      let playing = false;\n      let timer = null;\n      let comparisons = 0, swaps = 0;\n\n      // init\n      sizeVal.textContent = sizeEl.value;\n      updateSpeedLabel();\n\n      function randomArray(n){\n        const arr = [];\n        for(let i=0;i<n;i++){\n          arr.push(Math.floor(Math.random()*100)+1);\n        }\n        return arr;\n      }\n\n      function copyArr(a){ return a.slice(); }\n\n      // build steps for bubble sort: we record a step for each comparison and each swap; we also store arr snapshot at each step\n      function buildBubbleSteps(input){\n        const a = input.slice();\n        const n = a.length;\n        const s = [];\n        s.push({arr:copyArr(a), type:'init', i:-1, j:-1});\n        for(let i=0;i<n;i++){\n          let swapped = false;\n          for(let j=0;j<n-i-1;j++){\n            // comparison step\n            s.push({arr:copyArr(a), type:'compare', i:i, j:j});\n            if(a[j] > a[j+1]){\n              // swap\n              const tmp = a[j]; a[j]=a[j+1]; a[j+1]=tmp;\n              swapped = true;\n              s.push({arr:copyArr(a), type:'swap', i:i, j:j});\n            }\n          }\n          // after each pass, optionally mark element as in-place (we'll use arr snapshot)\n          if(!swapped){\n            break; // early exit optimization recorded by final steps\n          }\n        }\n        s.push({arr:copyArr(a), type:'finish', i:-1, j:-1});\n        return s;\n      }\n\n      function renderBars(vals, highlightIndices = [], modeMap = {}) {\n        // modeMap: index -> 'compare'|'swap'|'sorted'\n        barsEl.innerHTML = '';\n        const n = vals.length;\n        const max = Math.max(...vals, 1);\n        for(let i=0;i<n;i++){\n          const v = vals[i];\n          const bar = document.createElement('div');\n          bar.className = 'bar';\n          if(n>40) bar.classList.add('small');\n          const h = Math.max(6, Math.round((v / max) * 100)); // percent-ish\n          bar.style.height = h + '%';\n          bar.style.transitionDuration = Math.max(40, 600 - speedEl.value*5) + 'ms';\n          if(modeMap[i]) bar.classList.add(modeMap[i]);\n          // show value if few bars\n          if(n <= 30) bar.textContent = v;\n          barsEl.appendChild(bar);\n        }\n      }\n\n      function setStatus(t){\n        statusEl.textContent = t;\n      }\n\n      function computeCountsUpTo(idx){\n        let c=0,s=0;\n        for(let k=0;k<=idx && k<steps.length;k++){\n          if(steps[k].type === 'compare') c++;\n          if(steps[k].type === 'swap') s++;\n        }\n        return {c,s};\n      }\n\n      function updateUIForStep(idx){\n        const step = steps[idx];\n        // display array snapshot\n        renderBars(step.arr);\n        arrText.textContent = '[' + step.arr.join(', ') + ']';\n        stepIdxEl.textContent = idx;\n        totalStepsEl.textContent = steps.length - 1;\n        // highlight pseudocode\n        lineEls.forEach((el,i)=>{ if(el) el.classList.remove('current'); });\n        if(step.type === 'compare'){\n          lineEls[3].classList.add('current'); // if arr[j] > arr[j+1]\n          highlightBars(step.arr, step.j, step.j+1, 'compare');\n          ijText.textContent = 'i=' + step.i + ', j=' + step.j;\n        } else if(step.type === 'swap'){\n          lineEls[4].classList.add('current'); // swap\n          highlightBars(step.arr, step.j, step.j+1, 'swap');\n          ijText.textContent = 'i=' + step.i + ', j=' + step.j;\n        } else if(step.type === 'init'){\n          lineEls[1].classList.add('current'); // for i...\n          ijText.textContent = '-';\n        } else if(step.type === 'finish'){\n          lineEls[1].classList.add('current');\n          // mark all sorted\n          renderBars(step.arr, [], createSortedMap(step.arr.length));\n          ijText.textContent = '-';\n        }\n        const counts = computeCountsUpTo(idx);\n        comparisons = counts.c;\n        swaps = counts.s;\n        compCountEl.textContent = comparisons;\n        swapCountEl.textContent = swaps;\n        // status\n        setStatus(playing ? 'Playing' : 'Paused');\n      }\n\n      function createSortedMap(n){\n        const map = {};\n        for(let i=0;i<n;i++) map[i] = 'sorted';\n        return map;\n      }\n\n      function highlightBars(arr, i, j, cls){\n        const mode = {};\n        mode[i] = cls;\n        mode[j] = cls;\n        renderBars(arr, [i,j], mode);\n      }\n\n      function goToStep(idx){\n        current = Math.max(0, Math.min(idx, steps.length-1));\n        updateUIForStep(current);\n      }\n\n      function playAll(){\n        if(playing) return;\n        if(current >= steps.length-1){\n          setStatus('Already finished');\n          return;\n        }\n        playing = true;\n        playBtn.textContent = 'Pause';\n        setStatus('Playing');\n        scheduleNext();\n      }\n\n      function pause(){\n        playing = false;\n        playBtn.textContent = 'Play';\n        setStatus('Paused');\n        if(timer) clearTimeout(timer);\n        timer = null;\n      }\n\n      function scheduleNext(){\n        if(!playing) return;\n        if(current >= steps.length-1){\n          playing = false;\n          playBtn.textContent = 'Play';\n          setStatus('Finished');\n          updateUIForStep(steps.length-1);\n          return;\n        }\n        const step = steps[current+1];\n        // set transition delay according to speed\n        const durationMs = Math.max(40, 600 - speedEl.value*5);\n        // advance\n        timer = setTimeout(()=>{\n          current++;\n          updateUIForStep(current);\n          // continue\n          scheduleNext();\n        }, durationMs + 60);\n      }\n\n      function reset(){\n        pause();\n        if(steps.length){\n          current = 0;\n          comparisons = 0; swaps = 0;\n          updateUIForStep(0);\n        }\n      }\n\n      // build initial\n      function generateAndPrepare(){\n        pause();\n        array = randomArray(parseInt(sizeEl.value,10));\n        steps = buildBubbleSteps(array);\n        current = 0;\n        comparisons = 0; swaps = 0;\n        updateUIForStep(0);\n      }\n\n      // Event handlers\n      shuffleBtn.addEventListener('click', ()=>{ generateAndPrepare(); });\n      sizeEl.addEventListener('input', ()=>{\n        sizeVal.textContent = sizeEl.value;\n      });\n      speedEl.addEventListener('input', ()=>{\n        updateSpeedLabel();\n      });\n\n      function updateSpeedLabel(){\n        const v = parseInt(speedEl.value,10);\n        let label = 'Medium';\n        if(v < 30) label = 'Slow';\n        else if(v > 70) label = 'Fast';\n        speedVal.textContent = label;\n      }\n\n      playBtn.addEventListener('click', ()=>{\n        if(!steps.length) generateAndPrepare();\n        if(playing) pause(); else playAll();\n      });\n\n      stepFwdBtn.addEventListener('click', ()=>{\n        pause();\n        if(!steps.length) generateAndPrepare();\n        if(current < steps.length-1){ current++; updateUIForStep(current); }\n      });\n\n      stepBackBtn.addEventListener('click', ()=>{\n        pause();\n        if(!steps.length) generateAndPrepare();\n        if(current > 0){ current--; updateUIForStep(current); }\n      });\n\n      resetBtn.addEventListener('click', ()=>{\n        generateAndPrepare();\n      });\n\n      // initial generate\n      generateAndPrepare();\n\n      // keyboard shortcuts\n      document.addEventListener('keydown', (e)=>{\n        if(e.code === 'Space'){ e.preventDefault(); playBtn.click(); }\n        if(e.code === 'ArrowRight'){ stepFwdBtn.click(); }\n        if(e.code === 'ArrowLeft'){ stepBackBtn.click(); }\n      });\n\n      // ensure window resizes keep bars transition reasonable\n      window.addEventListener('resize', ()=> updateUIForStep(current));\n    })();\n  </script>\n</body>\n</html>"
    },
    "messages": [
      {
        "role": "system",
        "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
      },
      {
        "role": "user",
        "content": "bubble sort"
      }
    ],
    "topic": null,
    "hasFSM": false,
    "hasTest": false,
    "evaluation": {
      "score": null,
      "notes": ""
    }
  }
]