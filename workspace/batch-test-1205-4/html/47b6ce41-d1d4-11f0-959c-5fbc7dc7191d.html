<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dijkstra's Algorithm Demonstration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }
        #graph {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        .node {
            width: 50px;
            height: 50px;
            background-color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ccc;
            position: relative;
        }
        .selected {
            background-color: #ffa500;
        }
        .shortest-path {
            background-color: #32cd32;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
        }
        button {
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Dijkstra's Algorithm Visualization</h1>
    <div id="graph"></div>
    <button id="run">Run Dijkstra's Algorithm</button>
    <div id="result"></div>

    <script>
        const graph = [
            { id: 0, edges: [{ to: 1, weight: 10 }, { to: 2, weight: 5 }] },
            { id: 1, edges: [{ to: 3, weight: 1 }] },
            { id: 2, edges: [{ to: 1, weight: 3 }, { to: 3, weight: 9 }, { to: 4, weight: 2 }] },
            { id: 3, edges: [{ to: 4, weight: 4 }] },
            { id: 4, edges: [] },
        ];

        const nodes = {};
        const graphContainer = document.getElementById('graph');

        function createGraph() {
            graph.forEach(node => {
                const nodeDiv = document.createElement('div');
                nodeDiv.classList.add('node');
                nodeDiv.setAttribute('data-id', node.id);
                nodeDiv.innerText = node.id;
                graphContainer.appendChild(nodeDiv);
                nodes[node.id] = nodeDiv;
            });
        }

        function dijkstra(startId) {
            const distances = {};
            const prev = {};
            const queue = new Set();

            graph.forEach(node => {
                distances[node.id] = Infinity;
                prev[node.id] = null;
                queue.add(node.id);
            });

            distances[startId] = 0;

            while (queue.size > 0) {
                let currentId = Array.from(queue).reduce((minNode, id) => distances[id] < distances[minNode] ? id : minNode);

                queue.delete(currentId);

                graph[currentId].edges.forEach(edge => {
                    const alt = distances[currentId] + edge.weight;
                    if (alt < distances[edge.to]) {
                        distances[edge.to] = alt;
                        prev[edge.to] = currentId;
                    }
                });
            }

            return { distances, prev };
        }

        function drawShortestPath(prev, targetId) {
            let path = [];
            for (let at = targetId; at != null; at = prev[at]) {
                path.push(at);
            }
            path.reverse();

            path.forEach(id => {
                nodes[id].classList.add('shortest-path');
            });
        }

        document.getElementById('run').onclick = function() {
            graphContainer.querySelectorAll('.node').forEach(node => {
                node.classList.remove('selected', 'shortest-path');
            });

            const startId = 0;
            const targetId = 4;
            const result = dijkstra(startId);
            drawShortestPath(result.prev, targetId);

            result.distances[0] = 0; // Distance to itself
            let output = `Shortest distances from node ${startId}:<br>`;
            for (const [id, distance] of Object.entries(result.distances)) {
                output += `Node ${id}: ${distance}<br>`;
            }

            document.getElementById('result').innerHTML = output;
        };

        createGraph();
    </script>
</body>
</html>