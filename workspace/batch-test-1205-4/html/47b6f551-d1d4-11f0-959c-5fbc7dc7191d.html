<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kruskal's Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        #graph {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        .edge {
            stroke: #888;
            stroke-width: 2;
        }
        .mst {
            stroke: #f00;
            stroke-width: 2;
        }
        .vertex {
            fill: #00f;
        }
        .label {
            text-anchor: middle;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Kruskal's Algorithm Visualization</h1>
    <svg id="graph" width="600" height="400"></svg>
    <button onclick="runKruskal()">Run Kruskal's Algorithm</button>
    <script>
        const edges = [
            {source: 0, target: 1, weight: 10},
            {source: 0, target: 2, weight: 6},
            {source: 0, target: 3, weight: 5},
            {source: 1, target: 3, weight: 15},
            {source: 2, target: 3, weight: 4},
        ];

        const vertices = [
            {id: 0, x: 100, y: 50},
            {id: 1, x: 300, y: 50},
            {id: 2, x: 150, y: 200},
            {id: 3, x: 250, y: 200},
        ];

        const svg = document.getElementById("graph");

        function drawGraph() {
            svg.innerHTML = '';
            edges.forEach(edge => {
                const source = vertices[edge.source];
                const target = vertices[edge.target];
                
                // Draw edges
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("class", "edge");
                line.setAttribute("x1", source.x);
                line.setAttribute("y1", source.y);
                line.setAttribute("x2", target.x);
                line.setAttribute("y2", target.y);
                svg.appendChild(line);
                
                // Draw weights
                const midX = (source.x + target.x) / 2;
                const midY = (source.y + target.y) / 2;
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute("class", "label");
                text.setAttribute("x", midX);
                text.setAttribute("y", midY - 5);
                text.textContent = edge.weight;
                svg.appendChild(text);
            });

            vertices.forEach(vertex => {
                const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                circle.setAttribute("class", "vertex");
                circle.setAttribute("cx", vertex.x);
                circle.setAttribute("cy", vertex.y);
                circle.setAttribute("r", 20);
                svg.appendChild(circle);
                
                const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
                label.setAttribute("class", "label");
                label.setAttribute("x", vertex.x);
                label.setAttribute("y", vertex.y + 5);
                label.textContent = vertex.id;
                svg.appendChild(label);
            });
        }

        function find(parent, i) {
            if (parent[i] === -1) return i;
            return find(parent, parent[i]);
        }

        function union(parent, rank, x, y) {
            const xroot = find(parent, x);
            const yroot = find(parent, y);
            if (rank[xroot] < rank[yroot]) {
                parent[xroot] = yroot;
            } else if (rank[xroot] > rank[yroot]) {
                parent[yroot] = xroot;
            } else {
                parent[yroot] = xroot;
                rank[xroot]++;
            }
        }

        function runKruskal() {
            const result = [];
            let e = 0;
            let i = 0;

            edges.sort((a, b) => a.weight - b.weight);
            const parent = Array(vertices.length).fill(-1);
            const rank = Array(vertices.length).fill(0);

            while (e < vertices.length - 1 && i < edges.length) {
                const {source, target, weight} = edges[i++];
                const x = find(parent, source);
                const y = find(parent, target);
                if (x !== y) {
                    e++;
                    result.push(edges[i - 1]);
                    union(parent, rank, x, y);
                }
            }

            drawMST(result);
        }

        function drawMST(mst) {
            mst.forEach(edge => {
                const source = vertices[edge.source];
                const target = vertices[edge.target];
                
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("class", "mst");
                line.setAttribute("x1", source.x);
                line.setAttribute("y1", source.y);
                line.setAttribute("x2", target.x);
                line.setAttribute("y2", target.y);
                svg.appendChild(line);
            });
        }

        window.onload = drawGraph;
    </script>
</body>
</html>