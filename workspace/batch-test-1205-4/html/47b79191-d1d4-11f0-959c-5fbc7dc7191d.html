<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Regression Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        #chart {
            width: 600px;
            height: 400px;
            border: 1px solid #ccc;
            position: relative;
        }
        .point {
            width: 8px;
            height: 8px;
            background-color: blue;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
        }
        .line {
            position: absolute;
            background-color: red;
        }
    </style>
</head>
<body>

<h1>Linear Regression Demonstration</h1>
<p>Click on the chart to add points. A linear regression line will be displayed based on the points you add.</p>
<div id="chart"></div>
<button id="resetButton">Reset Points</button>

<script>
    const chart = document.getElementById('chart');
    const resetButton = document.getElementById('resetButton');
    let points = [];

    chart.addEventListener('click', (event) => {
        const rect = chart.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;

        points.push({ x, y });
        drawPoints();
        drawRegressionLine();
    });

    resetButton.addEventListener('click', () => {
        points = [];
        chart.innerHTML = '';
    });

    function drawPoints() {
        points.forEach(point => {
            const pointDiv = document.createElement('div');
            pointDiv.className = 'point';
            pointDiv.style.left = `${point.x}px`;
            pointDiv.style.top = `${point.y}px`;
            chart.appendChild(pointDiv);
        });
    }

    function drawRegressionLine() {
        if (points.length < 2) return;

        const xValues = points.map(p => p.x);
        const yValues = points.map(p => p.y);
        const xMean = xValues.reduce((sum, val) => sum + val, 0) / xValues.length;
        const yMean = yValues.reduce((sum, val) => sum + val, 0) / yValues.length;

        const num = xValues.reduce((sum, x, i) => sum + (x - xMean) * (yValues[i] - yMean), 0);
        const den = xValues.reduce((sum, x) => sum + (x - xMean) ** 2, 0);
        const m = num / den; // Slope
        const b = yMean - m * xMean; // Intercept

        const startX = 0;
        const startY = m * startX + b;
        const endX = chart.offsetWidth;
        const endY = m * endX + b;

        const lineDiv = document.createElement('div');
        lineDiv.className = 'line';
        lineDiv.style.width = '2px';
        lineDiv.style.height = `${endY - startY}px`;
        lineDiv.style.top = `${startY}px`;
        lineDiv.style.left = `${startX}px`;
        lineDiv.style.transform = `rotate(${Math.atan(m) * (180 / Math.PI)}deg)`;
        chart.appendChild(lineDiv);
    }
</script>

</body>
</html>