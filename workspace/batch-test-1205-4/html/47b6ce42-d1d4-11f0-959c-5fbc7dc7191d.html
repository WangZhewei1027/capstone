<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bellman-Ford Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #graph {
            margin: 20px 0;
        }
        #result {
            border: 1px solid #ccc;
            padding: 10px;
        }
    </style>
</head>
<body>
    <h1>Bellman-Ford Algorithm Visualization</h1>
    <p>Input the number of vertices and edges, and their properties to find the shortest path from a source vertex.</p>

    <div>
        <label for="vertices">Number of Vertices:</label>
        <input type="number" id="vertices" min="1" value="5">
    </div>
    
    <div>
        <label for="edges">Number of Edges:</label>
        <input type="number" id="edges" min="1" value="7">
    </div>

    <h3>Define Edges:</h3>
    <div id="edge-inputs"></div>
    <button id="add-edges">Add Edge Inputs</button>
    
    <h3>Run Algorithm</h3>
    <label for="source">Source Vertex:</label>
    <input type="number" id="source" min="0" value="0">
    <button id="run-algorithm">Run Bellman-Ford</button>
    
    <h3>Result</h3>
    <div id="result"></div>

    <script>
        const edgeInputs = document.getElementById('edge-inputs');
        const addEdgesButton = document.getElementById('add-edges');
        const runAlgorithmButton = document.getElementById('run-algorithm');
        const resultDiv = document.getElementById('result');

        let edgeCount = 0;

        addEdgesButton.addEventListener('click', () => {
            if (edgeCount < document.getElementById('edges').value) {
                const edgeDiv = document.createElement('div');
                edgeDiv.innerHTML = `
                    <label>Edge ${edgeCount + 1} (from, to, weight): </label>
                    <input type="number" min="0" max="9" placeholder="From (0-9)"> 
                    <input type="number" min="0" max="9" placeholder="To (0-9)"> 
                    <input type="number" placeholder="Weight">
                `;
                edgeInputs.appendChild(edgeDiv);
                edgeCount++;
            } else {
                alert('Maximum edges reached!');
            }
        });

        runAlgorithmButton.addEventListener('click', () => {
            const vertices = parseInt(document.getElementById('vertices').value);
            const edges = [];
            const source = parseInt(document.getElementById('source').value);
            const edgeDivs = edgeInputs.getElementsByTagName('div');

            for (const div of edgeDivs) {
                const inputs = div.getElementsByTagName('input');
                const from = parseInt(inputs[0].value);
                const to = parseInt(inputs[1].value);
                const weight = parseInt(inputs[2].value);
                edges.push({ from, to, weight });
            }

            const distances = bellmanFord(vertices, edges, source);
            displayResult(distances);
        });

        function bellmanFord(vertices, edges, source) {
            const distances = new Array(vertices).fill(Infinity);
            distances[source] = 0;

            for (let i = 0; i < vertices - 1; i++) {
                for (const edge of edges) {
                    const {from, to, weight} = edge;
                    if (distances[from] !== Infinity && distances[from] + weight < distances[to]) {
                        distances[to] = distances[from] + weight;
                    }
                }
            }

            // Check for negative-weight cycles
            for (const edge of edges) {
                const {from, to, weight} = edge;
                if (distances[from] !== Infinity && distances[from] + weight < distances[to]) {
                    throw new Error("Graph contains a negative-weight cycle");
                }
            }

            return distances;
        }

        function displayResult(distances) {
            resultDiv.innerHTML = '';
            distances.forEach((dist, index) => {
                resultDiv.innerHTML += `Distance from source to vertex ${index}: ${dist === Infinity ? 'Infinity' : dist}<br/>`;
            });
        }
    </script>
</body>
</html>