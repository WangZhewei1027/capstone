<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insertion Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        #array {
            display: flex;
            margin: 20px 0;
        }
        .bar {
            width: 30px;
            margin: 0 5px;
            background-color: steelblue;
            text-align: center;
            color: white;
            transition: height 0.3s;
        }
        #inputArray {
            width: 200px;
            margin-bottom: 10px;
        }
        #btnSort {
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <h1>Insertion Sort Visualization</h1>
    <input type="text" id="inputArray" placeholder="Enter numbers separated by commas" />
    <button id="btnSort">Sort</button>
    <div id="array"></div>

    <script>
        document.getElementById('btnSort').addEventListener('click', function() {
            const input = document.getElementById('inputArray').value;
            const array = input.split(',').map(Number);
            visualizeArray(array);
            insertionSort(array);
        });

        function visualizeArray(array) {
            const arrayDiv = document.getElementById('array');
            arrayDiv.innerHTML = ''; // Clear previous bars
            array.forEach(value => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${value * 5}px`;
                bar.textContent = value;
                arrayDiv.appendChild(bar);
            });
        }

        async function insertionSort(array) {
            for (let i = 1; i < array.length; i++) {
                let key = array[i];
                let j = i - 1;

                // Highlight the current element being compared
                highlightElement(i, true);

                while (j >= 0 && array[j] > key) {
                    // Move elements that are greater than key, to one position ahead
                    array[j + 1] = array[j];
                    visualizeArray(array);
                    await sleep(300); // Delay to visualize
                    j--;
                }
                array[j + 1] = key;

                // Highlight the sorted position of key
                highlightElement(j + 1, false);
                visualizeArray(array);
                await sleep(300); // Delay to visualize
            }
        }

        function highlightElement(index, isHighlight) {
            const bars = document.querySelectorAll('.bar');
            if (isHighlight) {
                bars[index].style.backgroundColor = 'tomato';
            } else {
                bars[index].style.backgroundColor = 'steelblue';
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>

</body>
</html>