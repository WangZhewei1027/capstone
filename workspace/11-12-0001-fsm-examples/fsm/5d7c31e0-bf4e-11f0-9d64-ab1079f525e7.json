{
  "topic": "Interactive BST Explorer",
  "description": "Models the interactive states, user actions, animations, and step-mode behavior for a BST insertion/search/delete visualizer.",
  "states": [
    {
      "name": "idle",
      "onEnter": "noop",
      "onExit": "noop",
      "on": {
        "CLICK_INSERT": "inserting_auto",
        "CLICK_INSERT_STEP": "stepping_operation",
        "CLICK_SEARCH": "searching_auto",
        "CLICK_SEARCH_STEP": "stepping_operation",
        "CLICK_DELETE": "confirming_delete",
        "NODE_CLICK": "confirming_delete",
        "CLICK_CLEAR": "confirming_clear",
        "CLICK_RANDOMIZE": "randomizing",
        "TOGGLE_STEP_ON": "step_mode_idle",
        "KEYBOARD_ENTER": "inserting_auto",
        "KEYBOARD_SEARCH_SHORTCUT": "searching_auto"
      }
    },
    {
      "name": "inserting_auto",
      "onEnter": "startInsertAnimation",
      "onExit": "cleanupAnimation",
      "on": {
        "ANIMATION_COMPLETE": "idle",
        "CLICK_INSERT": "inserting_auto",
        "CLICK_SEARCH": "searching_auto",
        "CLICK_DELETE": "confirming_delete",
        "CLICK_CLEAR": "confirming_clear",
        "CLICK_RANDOMIZE": "randomizing",
        "TOGGLE_STEP_ON": "step_mode_idle",
        "INTERRUPT": "idle"
      }
    },
    {
      "name": "searching_auto",
      "onEnter": "startSearchAnimation",
      "onExit": "cleanupAnimation",
      "on": {
        "ANIMATION_COMPLETE": "idle",
        "CLICK_INSERT": "inserting_auto",
        "CLICK_SEARCH": "searching_auto",
        "CLICK_DELETE": "confirming_delete",
        "CLICK_CLEAR": "confirming_clear",
        "CLICK_RANDOMIZE": "randomizing",
        "TOGGLE_STEP_ON": "step_mode_idle",
        "INTERRUPT": "idle"
      }
    },
    {
      "name": "deleting_auto",
      "onEnter": "startDeleteAnimation",
      "onExit": "cleanupAnimation",
      "on": {
        "ANIMATION_COMPLETE": "idle",
        "CLICK_INSERT": "inserting_auto",
        "CLICK_SEARCH": "searching_auto",
        "CLICK_DELETE": "confirming_delete",
        "CLICK_CLEAR": "confirming_clear",
        "CLICK_RANDOMIZE": "randomizing",
        "TOGGLE_STEP_ON": "step_mode_idle",
        "INTERRUPT": "idle"
      }
    },
    {
      "name": "step_mode_idle",
      "onEnter": "enableStepMode",
      "onExit": "noop",
      "on": {
        "CLICK_INSERT_STEP": "stepping_operation",
        "CLICK_SEARCH_STEP": "stepping_operation",
        "CLICK_DELETE": "confirming_delete",
        "NODE_CLICK": "confirming_delete",
        "NEXT_STEP": "step_mode_idle",
        "PREV_STEP": "step_mode_idle",
        "TOGGLE_STEP_OFF": "idle"
      }
    },
    {
      "name": "stepping_operation",
      "onEnter": "startStepOperation",
      "onExit": "finishOperation",
      "on": {
        "NEXT_STEP": "stepping_operation",
        "PREV_STEP": "stepping_operation",
        "OPERATION_FINISH": "step_mode_idle",
        "CLICK_INSERT": "inserting_auto",
        "CLICK_SEARCH": "searching_auto",
        "CLICK_DELETE": "confirming_delete",
        "CLICK_CLEAR": "confirming_clear",
        "INTERRUPT": "idle"
      }
    },
    {
      "name": "confirming_delete",
      "onEnter": "promptConfirmDelete",
      "onExit": "noop",
      "on": {
        "CONFIRM_YES": "deleting_auto",
        "CONFIRM_NO": "idle"
      }
    },
    {
      "name": "confirming_clear",
      "onEnter": "promptConfirmClear",
      "onExit": "noop",
      "on": {
        "CONFIRM_YES": "idle",
        "CONFIRM_NO": "idle"
      }
    },
    {
      "name": "randomizing",
      "onEnter": "startRandomize",
      "onExit": "stopRandomize",
      "on": {
        "RANDOMIZE_NEXT": "randomizing",
        "RANDOMIZE_COMPLETE": "idle",
        "CLICK_INSERT": "inserting_auto",
        "CLICK_SEARCH": "searching_auto",
        "CLICK_DELETE": "confirming_delete",
        "CLICK_CLEAR": "confirming_clear",
        "TOGGLE_STEP_ON": "step_mode_idle",
        "INTERRUPT": "idle"
      }
    }
  ],
  "events": [
    "CLICK_INSERT",
    "CLICK_INSERT_STEP",
    "CLICK_SEARCH",
    "CLICK_SEARCH_STEP",
    "CLICK_DELETE",
    "NODE_CLICK",
    "CLICK_CLEAR",
    "CLICK_RANDOMIZE",
    "TOGGLE_STEP_ON",
    "TOGGLE_STEP_OFF",
    "NEXT_STEP",
    "PREV_STEP",
    "ANIMATION_COMPLETE",
    "OPERATION_FINISH",
    "RANDOMIZE_NEXT",
    "RANDOMIZE_COMPLETE",
    "CONFIRM_YES",
    "CONFIRM_NO",
    "KEYBOARD_ENTER",
    "KEYBOARD_SEARCH_SHORTCUT",
    "INTERRUPT"
  ],
  "notes": "The FSM models UI-triggered operations (insert/search/delete), automatic animations (ANIMATION_COMPLETE), a step mode where comparisons advance with NEXT_STEP/PREV_STEP, confirmation dialogs for delete/clear, and a randomize sequence that performs multiple inserts. Buttons can interrupt pending animations (INTERRUPT). Confirm dialogs are implemented synchronously in the UI (promptConfirm* events)."
}