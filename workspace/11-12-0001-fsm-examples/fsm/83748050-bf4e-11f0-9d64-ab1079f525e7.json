{
  "topic": "Bubble Sort Interactive Module",
  "description": "Finite state machine modeling the interactive states, controls, and algorithmic progress of the Bubble Sort visualization application.",
  "states": [
    {
      "name": "idle",
      "onEnter": "updateModeManual_stopAuto_render",
      "onExit": "noop",
      "on": {
        "PLAY": "autoplay",
        "STEP": "stepping",
        "TILE_CLICK": "tileSelected",
        "APPLY_CUSTOM": "applying",
        "RANDOMIZE": "randomized",
        "SHUFFLE": "shuffled",
        "RESET": "resetting",
        "SPEED_CHANGE": "idle",
        "SIZE_CHANGE": "idle"
      }
    },
    {
      "name": "tileSelected",
      "onEnter": "selectTile",
      "onExit": "clearSelection",
      "on": {
        "TILE_CLICK_SAME": "idle",
        "TILE_CLICK_OTHER": "idle",
        "MANUAL_SWAP": "idle",
        "RESET": "resetting",
        "PLAY": "autoplay",
        "APPLY_CUSTOM": "applying"
      }
    },
    {
      "name": "stepping",
      "onEnter": "generatorInit_if_needed_updateModeStepping",
      "onExit": "noop",
      "on": {
        "ACTION_PASS": "passState",
        "ACTION_COMPARE": "comparing",
        "ACTION_SWAP": "swapping",
        "ACTION_DONE": "finished",
        "PAUSE": "paused",
        "STOP_AUTOPLAY": "idle",
        "RESET": "resetting"
      }
    },
    {
      "name": "passState",
      "onEnter": "handlePass_updateStats_highlightLine1",
      "onExit": "noop",
      "on": {
        "PASS_COMPLETE": "stepping",
        "PAUSE": "paused",
        "RESET": "resetting"
      }
    },
    {
      "name": "comparing",
      "onEnter": "markCompare_incrementComparisons_highlightLine2_updateStatus",
      "onExit": "clearCompare",
      "on": {
        "COMPARE_COMPLETE": "stepping",
        "SWAP_DETECTED": "swapping",
        "PAUSE": "paused",
        "RESET": "resetting"
      }
    },
    {
      "name": "swapping",
      "onEnter": "incrementSwaps_highlightLine3_animateSwap_render_updateStats",
      "onExit": "noop",
      "on": {
        "SWAP_COMPLETE": "stepping",
        "PAUSE": "paused",
        "RESET": "resetting"
      }
    },
    {
      "name": "autoplay",
      "onEnter": "startAuto_updateModeAutoplay_runAuto",
      "onExit": "stopAuto",
      "on": {
        "ACTION_PASS": "passState",
        "ACTION_COMPARE": "comparing",
        "ACTION_SWAP": "swapping",
        "ACTION_DONE": "finished",
        "PAUSE": "paused",
        "STOP_AUTOPLAY": "idle",
        "RESET": "resetting",
        "SPEED_CHANGE": "autoplay",
        "STEP": "stepping"
      }
    },
    {
      "name": "paused",
      "onEnter": "stopAuto_updateModePaused_updateStatus",
      "onExit": "noop",
      "on": {
        "PLAY": "autoplay",
        "STEP": "stepping",
        "RESET": "resetting",
        "APPLY_CUSTOM": "applying"
      }
    },
    {
      "name": "finished",
      "onEnter": "highlightLine7_markAllSorted_updateModeFinished_updateStatus",
      "onExit": "noop",
      "on": {
        "RESET": "resetting",
        "APPLY_CUSTOM": "applying",
        "RANDOMIZE": "randomized",
        "SHUFFLE": "shuffled",
        "PLAY": "autoplay"
      }
    },
    {
      "name": "applying",
      "onEnter": "applyCustomArray_resetStats_render_updateModeManual_updateStatus",
      "onExit": "noop",
      "on": {
        "APPLIED": "idle",
        "RESET": "resetting"
      }
    },
    {
      "name": "randomized",
      "onEnter": "randomizeArray_resetStats_render_updateModeManual_updateStatus",
      "onExit": "noop",
      "on": {
        "RANDOMIZED": "idle",
        "RESET": "resetting"
      }
    },
    {
      "name": "shuffled",
      "onEnter": "shuffleArray_resetStats_render_updateModeManual_updateStatus",
      "onExit": "noop",
      "on": {
        "SHUFFLED": "idle",
        "RESET": "resetting"
      }
    },
    {
      "name": "resetting",
      "onEnter": "restoreInitialArray_generatorClear_resetStats_render_updateModeManual_updateStatus",
      "onExit": "noop",
      "on": {
        "RESET_DONE": "idle",
        "APPLY_CUSTOM": "applying"
      }
    }
  ],
  "events": [
    "PLAY",
    "PAUSE",
    "STEP",
    "ACTION_PASS",
    "ACTION_COMPARE",
    "ACTION_SWAP",
    "ACTION_DONE",
    "PASS_COMPLETE",
    "COMPARE_COMPLETE",
    "SWAP_COMPLETE",
    "MANUAL_SWAP",
    "TILE_CLICK",
    "TILE_CLICK_SAME",
    "TILE_CLICK_OTHER",
    "RESET",
    "RESET_DONE",
    "APPLY_CUSTOM",
    "APPLIED",
    "RANDOMIZE",
    "RANDOMIZED",
    "SHUFFLE",
    "SHUFFLED",
    "SPEED_CHANGE",
    "SIZE_CHANGE",
    "START_AUTOPLAY",
    "STOP_AUTOPLAY",
    "FINISHED"
  ],
  "notes": "States model user modes (manual selection/idle), algorithm execution (stepping, comparing, swapping, pass), autoplay/paused behavior, transient actions (apply/randomize/shuffle/reset), and completion. onEnter strings reference actions performed when entering a state (e.g., starting/stopping autoplay, rendering, updating stats, highlighting pseudocode line, animating swaps). Events correspond to button clicks, keyboard shortcuts, generator-produced actions, and UI control changes. Transitions for transient states (applying, randomized, shuffled, resetting) assume the onEnter action will dispatch the corresponding completion event (APPLIED, RANDOMIZED, SHUFFLED, RESET_DONE) immediately after performing DOM updates."
}