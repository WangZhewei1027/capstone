<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bellman-Ford Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #graph {
            margin: 20px 0;
        }
        #result {
            margin-top: 20px;
        }
        input {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Bellman-Ford Algorithm Demo</h1>
    <p>Enter the edges of the graph in the format: <strong>source destination weight</strong>.</p>
    <p>Type 'done' when finished.</p>
    <input type="text" id="edgeInput" placeholder="e.g., 0 1 4">
    <button onclick="addEdge()">Add Edge</button>
    <button onclick="runBellmanFord()">Run Bellman-Ford Algorithm</button>
    <button onclick="resetGraph()">Reset Graph</button>

    <div id="graph"></div>
    
    <div id="result"></div>

    <script>
        let edges = [];
        let vertices = new Set();
        const resultDiv = document.getElementById('result');

        function addEdge() {
            const input = document.getElementById('edgeInput').value;
            if (input.toLowerCase() === 'done') {
                runBellmanFord();
                return;
            }

            const parts = input.split(' ');
            if(parts.length === 3) {
                const u = parseInt(parts[0]);
                const v = parseInt(parts[1]);
                const w = parseInt(parts[2]);
                edges.push({ from: u, to: v, weight: w });
                vertices.add(u);
                vertices.add(v);
                updateGraph();
            } else {
                alert("Invalid format! Please use: source destination weight");
            }
            document.getElementById('edgeInput').value = '';
        }

        function updateGraph() {
            const graphDiv = document.getElementById('graph');
            graphDiv.innerHTML = '<strong>Current Edges:</strong><br>' + edges.map(e => `${e.from} -> ${e.to} [${e.weight}]`).join('<br>');
        }

        function resetGraph() {
            edges = [];
            vertices.clear();
            document.getElementById('graph').innerHTML = '';
            resultDiv.innerHTML = '';
        }

        function runBellmanFord() {
            const result = bellmanFord(Array.from(vertices), edges, 0);
            resultDiv.innerHTML = '<strong>Shortest Path Results:</strong><br>' + formatResults(result);
        }

        function bellmanFord(vertices, edges, start) {
            const distances = {};
            const predecessor = {};

            for (const vertex of vertices) {
                distances[vertex] = Infinity;
                predecessor[vertex] = null;
            }
            distances[start] = 0;

            for (let i = 0; i < vertices.length - 1; i++) {
                for (const edge of edges) {
                    if (distances[edge.from] !== Infinity && distances[edge.from] + edge.weight < distances[edge.to]) {
                        distances[edge.to] = distances[edge.from] + edge.weight;
                        predecessor[edge.to] = edge.from;
                    }
                }
            }

            for (const edge of edges) {
                if (distances[edge.from] !== Infinity && distances[edge.from] + edge.weight < distances[edge.to]) {
                    throw new Error("Graph contains a negative-weight cycle");
                }
            }

            return { distances, predecessor };
        }

        function formatResults(result) {
            let output = '';
            for (const vertex in result.distances) {
                output += `Vertex: ${vertex}, Distance from start: ${result.distances[vertex]}<br>`;
            }
            return output;
        }
    </script>
</body>
</html>