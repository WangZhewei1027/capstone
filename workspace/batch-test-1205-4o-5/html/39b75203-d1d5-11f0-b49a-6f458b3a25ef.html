<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Union-Find (Disjoint Set) Demonstration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #result {
            margin-top: 20px;
            font-weight: bold;
        }
        input {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Union-Find (Disjoint Set) Demonstration</h1>
    <p>Enter the number of elements, followed by pairs to union:</p>
    
    <input type="number" id="numElements" placeholder="Number of elements" min="1">
    <button id="initialize">Initialize</button><br><br>

    <input type="text" id="pairInput" placeholder="Enter pair (e.g., 0 1)">
    <button id="unionBtn">Union</button>
    <button id="findBtn">Find</button>
    <input type="number" id="findInput" placeholder="Enter element to find"><br><br>
    
    <div id="result"></div>

    <script>
        class UnionFind {
            constructor(size) {
                this.parent = Array.from({ length: size }, (_, i) => i);
                this.rank = Array(size).fill(1);
            }

            find(x) {
                if (this.parent[x] !== x) {
                    this.parent[x] = this.find(this.parent[x]); // Path compression
                }
                return this.parent[x];
            }

            union(x, y) {
                const rootX = this.find(x);
                const rootY = this.find(y);

                if (rootX !== rootY) {
                    // Union by rank
                    if (this.rank[rootX] > this.rank[rootY]) {
                        this.parent[rootY] = rootX;
                    } else if (this.rank[rootX] < this.rank[rootY]) {
                        this.parent[rootX] = rootY;
                    } else {
                        this.parent[rootY] = rootX;
                        this.rank[rootX]++;
                    }
                }
            }

            connected(x, y) {
                return this.find(x) === this.find(y);
            }
        }

        let uf;

        document.getElementById('initialize').onclick = function() {
            const numElements = parseInt(document.getElementById('numElements').value);
            uf = new UnionFind(numElements);
            document.getElementById('result').innerText = `Initialized Union-Find with ${numElements} elements.`;
        };

        document.getElementById('unionBtn').onclick = function() {
            const input = document.getElementById('pairInput').value.split(' ');
            if(input.length === 2){
                const x = parseInt(input[0]);
                const y = parseInt(input[1]);
                if(x >= 0 && y >= 0 && x < uf.parent.length && y < uf.parent.length) {
                    uf.union(x, y);
                    document.getElementById('result').innerText = `Unioned ${x} and ${y}.`;
                } else {
                    document.getElementById('result').innerText = 'Invalid input. Ensure numbers are within range.';
                }
            } else {
                document.getElementById('result').innerText = 'Please enter a valid pair.';
            }
        };

        document.getElementById('findBtn').onclick = function() {
            const element = parseInt(document.getElementById('findInput').value);
            if(element >= 0 && element < uf.parent.length) {
                const root = uf.find(element);
                document.getElementById('result').innerText = `Element ${element} is in the set with root ${root}.`;
            } else {
                document.getElementById('result').innerText = 'Invalid input. Ensure number is within range.';
            }
        };
    </script>
</body>
</html>