<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prim's Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #graph {
            margin: 20px;
        }
        .node {
            width: 20px;
            height: 20px;
            background-color: #3498db;
            border: 2px solid #2980b9;
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
        }
        .edge {
            width: 2px;
            height: 2px;
            background-color: #2ecc71;
            position: absolute;
            z-index: -1;
        }
    </style>
</head>
<body>

<h1>Prim's Algorithm Visualization</h1>
<div id="graph" style="position: relative; height: 500px; width: 500px; border: 1px solid #000;"></div>
<button id="startAlgorithm">Start Prim's Algorithm</button>

<script>
    const graphElement = document.getElementById('graph');
    const button = document.getElementById('startAlgorithm');

    const nodes = [];
    const edges = [];

    // Generate Random Graph
    for (let i = 0; i < 10; i++) {
        const node = {
            id: i,
            x: Math.random() * 480,
            y: Math.random() * 480
        };
        nodes.push(node);
        const nodeElement = document.createElement('div');
        nodeElement.className = 'node';
        nodeElement.style.left = `${node.x}px`;
        nodeElement.style.top = `${node.y}px`;
        nodeElement.setAttribute('data-id', node.id);
        graphElement.appendChild(nodeElement);
    }

    // Connect Nodes with Edges
    for (let i = 0; i < nodes.length; i++) {
        for (let j = i + 1; j < nodes.length; j++) {
            const weight = Math.floor(Math.random() * 10) + 1; // Random weight between 1 and 10
            edges.push({ from: i, to: j, weight });
        }
    }

    // Start Prim's Algorithm
    button.addEventListener('click', () => {
        const selectedEdges = primAlgorithm(nodes.length, edges);
        drawEdges(selectedEdges);
    });

    function primAlgorithm(nodeCount, edges) {
        const selected = Array(nodeCount).fill(false);
        const edgeList = [];
        const minEdge = Array(nodeCount).fill(Infinity);
        const parent = Array(nodeCount).fill(-1);

        // Start with the first node
        selected[0] = true;

        for (let count = 0; count < nodeCount - 1; count++) {
            let min = Infinity;
            let u = -1, v = -1;

            // Find the minimum weight edge
            for (const edge of edges) {
                if (selected[edge.from] && !selected[edge.to] && edge.weight < min) {
                    min = edge.weight;
                    u = edge.from;
                    v = edge.to;
                }
            }
            selected[v] = true;
            edgeList.push({ from: u, to: v });
        }
        return edgeList;
    }

    function drawEdges(selectedEdges) {
        selectedEdges.forEach(edge => {
            const nodeFrom = nodes[edge.from];
            const nodeTo = nodes[edge.to];
            const edgeElement = document.createElement('div');
            edgeElement.className = 'edge';
            edgeElement.style.width = '2px';
            edgeElement.style.height = '2px';
            edgeElement.style.backgroundColor = 'red';
            edgeElement.style.transform = `rotate(${Math.atan2(nodeTo.y - nodeFrom.y, nodeTo.x - nodeFrom.x) * 180 / Math.PI}deg)`;
            edgeElement.style.left = `${nodeFrom.x + 10}px`; // center offset
            edgeElement.style.top = `${nodeFrom.y + 10}px`; 
            const length = Math.hypot(nodeTo.x - nodeFrom.x, nodeTo.y - nodeFrom.y);
            edgeElement.style.width = `${length}px`;
            graphElement.appendChild(edgeElement);
        });
    }
</script>

</body>
</html>