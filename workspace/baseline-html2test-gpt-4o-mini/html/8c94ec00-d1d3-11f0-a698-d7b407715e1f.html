<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Regression Demonstration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>Linear Regression Demonstration</h1>
    <p>Click on the chart below to add data points. The linear regression line will be calculated and displayed.</p>
    <canvas id="regressionCanvas" width="600" height="400"></canvas>
    <button id="clearButton">Clear Data</button>
    <h2>Data Points:</h2>
    <ul id="dataPoints"></ul>
    <h2>Equation of the Line:</h2>
    <p id="equation"></p>

    <script>
        const canvas = document.getElementById('regressionCanvas');
        const ctx = canvas.getContext('2d');

        let points = [];

        // Function to draw the chart and regression line
        function drawChart() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'lightgray';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw data points
            points.forEach(point => {
                ctx.fillStyle = 'blue';
                ctx.beginPath();
                ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                ctx.fill();
            });

            // Calculate and draw regression line
            if (points.length > 1) {
                const { m, b } = linearRegression(points);
                drawLine(m, b);
                document.getElementById('equation').innerText = `y = ${m.toFixed(2)}x + ${b.toFixed(2)}`;
            } else {
                document.getElementById('equation').innerText = '';
            }
        }

        // Function to draw the regression line
        function drawLine(m, b) {
            ctx.strokeStyle = 'red';
            ctx.beginPath();
            ctx.moveTo(0, b);
            ctx.lineTo(canvas.width, m * canvas.width + b);
            ctx.stroke();
        }

        // Linear regression calculation
        function linearRegression(points) {
            let n = points.length;
            let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;

            points.forEach(point => {
                sumX += point.x;
                sumY += point.y;
                sumXY += point.x * point.y;
                sumX2 += point.x * point.x;
            });

            const m = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const b = (sumY - m * sumX) / n;

            return { m, b };
        }

        // Event listener for canvas click
        canvas.addEventListener('click', (event) => {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            points.push({ x, y });
            document.getElementById('dataPoints').innerHTML += `<li>(${x}, ${y})</li>`;
            drawChart();
        });

        // Event listener for clear button
        document.getElementById('clearButton').addEventListener('click', () => {
            points = [];
            document.getElementById('dataPoints').innerHTML = '';
            document.getElementById('equation').innerText = '';
            drawChart();
        });
    </script>
</body>
</html>