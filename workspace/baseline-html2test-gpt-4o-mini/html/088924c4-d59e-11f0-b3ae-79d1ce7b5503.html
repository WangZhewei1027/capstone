<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huffman Coding Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
        }
        #inputArea {
            margin-bottom: 20px;
        }
        #resultArea {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            background: #fff;
        }
        .bar {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin: 3px;
            text-align: center;
            line-height: 20px;
            color: white;
            font-weight: bold;
        }
        .btn {
            padding: 10px 15px;
            margin-top: 10px;
            background-color: #5cb85c;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>Huffman Coding Visualization</h1>

<div id="inputArea">
    <label for="inputString">Enter a string: </label>
    <input type="text" id="inputString" />
    <button class="btn" onclick="generateHuffman()">Generate Huffman Codes</button>
</div>

<div id="resultArea">
    <h2>Huffman Codes:</h2>
    <pre id="huffmanCodes"></pre>
    <h2>Encoded String:</h2>
    <pre id="encodedString"></pre>
</div>

<script>
function generateHuffman() {
    const input = document.getElementById("inputString").value;
    const frequency = {};
    
    // Calculate character frequencies
    for (const char of input) {
        frequency[char] = (frequency[char] || 0) + 1;
    }

    const huffmanTree = buildHuffmanTree(frequency);
    const huffmanCodes = {};
    generateCodes(huffmanTree, '', huffmanCodes);

    displayResult(huffmanCodes, input);
}

function buildHuffmanTree(frequency) {
    const nodes = Object.entries(frequency).map(([char, freq]) => ({ char, freq }));

    while (nodes.length > 1) {
        nodes.sort((a, b) => a.freq - b.freq);
        
        const left = nodes.shift();
        const right = nodes.shift();
        
        const newNode = {
            char: null,
            freq: left.freq + right.freq,
            left,
            right
        };

        nodes.push(newNode);
    }

    return nodes[0];
}

function generateCodes(node, code, codes) {
    if (!node) return;

    if (node.char !== null) {
        codes[node.char] = code;
    }

    generateCodes(node.left, code + '0', codes);
    generateCodes(node.right, code + '1', codes);
}

function displayResult(huffmanCodes, input) {
    const codesOutput = JSON.stringify(huffmanCodes, null, 2);
    document.getElementById("huffmanCodes").textContent = codesOutput;

    const encodedString = input.split('').map(char => huffmanCodes[char]).join('');
    document.getElementById("encodedString").textContent = encodedString;
}
</script>

</body>
</html>