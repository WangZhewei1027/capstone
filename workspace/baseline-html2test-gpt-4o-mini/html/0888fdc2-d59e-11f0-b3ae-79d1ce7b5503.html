<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prim's Algorithm Visualization</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 20px; }
        canvas { border: 1px solid #000; margin-top: 20px; }
        #controls { margin-bottom: 20px; }
        #result { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Prim's Algorithm Visualization</h1>
    <div id="controls">
        <button id="run">Run Prim's Algorithm</button>
        <button id="reset">Reset</button>
    </div>
    <canvas id="canvas" width="600" height="400"></canvas>
    <div id="result"></div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Define a simple graph (nodes and edges with weights)
        const graph = {
            0: { 1: 2, 3: 6 },
            1: { 0: 2, 2: 3, 3: 8, 4: 5 },
            2: { 1: 3, 4: 7 },
            3: { 0: 6, 1: 8, 4: 9 },
            4: { 1: 5, 2: 7, 3: 9 }
        };

        const nodes = [{x: 50, y: 100}, {x: 150, y: 50}, {x: 250, y: 150}, {x: 350, y: 100}, {x: 450, y: 200}];
        const edges = [];

        // Function to draw the graph
        function drawGraph(treeEdges) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw edges
            for (const edge of edges) {
                ctx.beginPath();
                ctx.moveTo(nodes[edge[0]].x, nodes[edge[0]].y);
                ctx.lineTo(nodes[edge[1]].x, nodes[edge[1]].y);
                ctx.strokeStyle = 'grey';
                ctx.stroke();
                ctx.closePath();
            }

            // Draw the tree edges
            for (const edge of treeEdges) {
                ctx.beginPath();
                ctx.moveTo(nodes[edge[0]].x, nodes[edge[0]].y);
                ctx.lineTo(nodes[edge[1]].x, nodes[edge[1]].y);
                ctx.strokeStyle = 'green';
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.closePath();
            }

            // Draw nodes
            nodes.forEach((node, index) => {
                ctx.beginPath();
                ctx.arc(node.x, node.y, 10, 0, Math.PI * 2, true);
                ctx.fillStyle = 'blue';
                ctx.fill();
                ctx.strokeStyle = 'black';
                ctx.stroke();
                ctx.closePath();
                ctx.fillStyle = 'black';
                ctx.fillText(index, node.x - 5, node.y + 3);
            });
        }

        // Prim's Algorithm implementation
        function primAlgorithm() {
            const totalNodes = Object.keys(graph).length;
            const visited = Array(totalNodes).fill(false);
            const treeEdges = [];
            const minHeap = [[0, -1]]; // [weight, node]

            while (minHeap.length > 0) {
                // Sort and pop the minimum weight edge
                minHeap.sort((a, b) => a[0] - b[0]);
                const [weight, node] = minHeap.shift();

                // If this node is already visited, continue
                if (visited[node]) continue;
                visited[node] = true;

                // If this is not the starting node, track the edge
                if (node !== -1) {
                    treeEdges.push([node, minHeap[0][1]]);
                }

                // Add all adjacent edges
                for (const neighbor in graph[node]) {
                    if (!visited[neighbor]) {
                        minHeap.push([graph[node][neighbor], neighbor]);
                    }
                }
            }

            return treeEdges;
        }

        // Event Listeners
        document.getElementById('run').addEventListener('click', () => {
            edges.length = 0;
            for (const node in graph) {
                for (const neighbor in graph[node]) {
                    edges.push([node, neighbor]);
                }
            }
            const treeEdges = primAlgorithm();
            drawGraph(treeEdges);
            document.getElementById('result').textContent = `Minimum Spanning Tree Edges: ${JSON.stringify(treeEdges)}`;
        });

        document.getElementById('reset').addEventListener('click', () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('result').textContent = '';
        });
    </script>
</body>
</html>