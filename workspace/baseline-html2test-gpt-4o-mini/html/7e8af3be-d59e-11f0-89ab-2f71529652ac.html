<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Regression Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>Linear Regression Demo</h1>
    <canvas id="canvas" width="400" height="400"></canvas>
    <br><br>
    <button onclick="addRandomPoint()">Add Random Point</button>
    <button onclick="clearPoints()">Clear Points</button>
    <h3>Points:</h3>
    <ul id="pointsList"></ul>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let points = [];

        function drawPoint(x, y) {
            ctx.fillStyle = 'blue';
            ctx.beginPath();
            ctx.arc(x, y, 5, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawLine(m, b) {
            ctx.strokeStyle = 'red';
            ctx.beginPath();
            ctx.moveTo(0, b);
            ctx.lineTo(canvas.width, m * canvas.width + b);
            ctx.stroke();
        }

        function addRandomPoint() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            points.push({ x, y });
            updatePointsList();
            draw();
        }

        function clearPoints() {
            points = [];
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            updatePointsList();
        }

        function updatePointsList() {
            const pointsList = document.getElementById('pointsList');
            pointsList.innerHTML = '';
            points.forEach(point => {
                const li = document.createElement('li');
                li.textContent = `(${point.x.toFixed(2)}, ${point.y.toFixed(2)})`;
                pointsList.appendChild(li);
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            points.forEach(point => drawPoint(point.x, point.y));
            if (points.length >= 2) {
                const [x1, y1] = [points[0].x, points[0].y];
                const [x2, y2] = [points[1].x, points[1].y];
                const { m, b } = linearRegression();
                drawLine(m, b);
            }
        }

        function linearRegression() {
            const n = points.length;
            const sumX = points.reduce((sum, p) => sum + p.x, 0);
            const sumY = points.reduce((sum, p) => sum + p.y, 0);
            const sumXY = points.reduce((sum, p) => sum + p.x * p.y, 0);
            const sumX2 = points.reduce((sum, p) => sum + p.x * p.x, 0);

            const m = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const b = (sumY - m * sumX) / n;

            return { m, b };
        }
    </script>
</body>
</html>