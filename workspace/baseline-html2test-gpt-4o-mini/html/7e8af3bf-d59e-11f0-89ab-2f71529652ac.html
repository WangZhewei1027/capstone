<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Nearest Neighbors (KNN) Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        canvas {
            border: 1px solid #ccc;
        }
        #output {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>K-Nearest Neighbors (KNN) Demo</h1>
    <canvas id="canvas" width="500" height="500"></canvas><br><br>
    <button id="addPoint">Add Random Point</button>
    <button id="classifyPoint">Classify New Point</button>
    <div id="output"></div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let points = [];
        const k = 3; // number of neighbors to consider

        function drawPoints() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            points.forEach(point => {
                ctx.fillStyle = point.label === 'A' ? 'blue' : 'red';
                ctx.beginPath();
                ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function addRandomPoint() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            const label = Math.random() < 0.5 ? 'A' : 'B';
            points.push({ x, y, label });
            drawPoints();
        }

        function classifyPoint() {
            const newPoint = { x: Math.random() * canvas.width, y: Math.random() * canvas.height };
            const neighbors = findNeighbors(newPoint);
            const label = determineLabel(neighbors);
            drawNewPoint(newPoint, label);
            document.getElementById('output').innerText = `Classified point at (${newPoint.x.toFixed(2)}, ${newPoint.y.toFixed(2)}) as "${label}"`;
        }

        function findNeighbors(newPoint) {
            // Calculate distances and sort neighbors
            return points
                .map(point => ({
                    point,
                    distance: Math.sqrt(Math.pow(point.x - newPoint.x, 2) + Math.pow(point.y - newPoint.y, 2))
                }))
                .sort((a, b) => a.distance - b.distance)
                .slice(0, k);
        }

        function determineLabel(neighbors) {
            const count = { A: 0, B: 0 };
            neighbors.forEach(neighbor => count[neighbor.point.label]++);
            return count.A > count.B ? 'A' : 'B';
        }

        function drawNewPoint(point, label) {
            ctx.fillStyle = label === 'A' ? 'green' : 'orange';
            ctx.beginPath();
            ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
            ctx.fill();
        }

        document.getElementById('addPoint').addEventListener('click', addRandomPoint);
        document.getElementById('classifyPoint').addEventListener('click', classifyPoint);
    </script>
</body>
</html>