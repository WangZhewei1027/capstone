{
  "id": "92fe58b1-ca67-11f0-a3d6-179b5eb5e89b",
  "timestamp": "2025-11-26T01:32:20.719Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Heap Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Heap Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f0f0;\n  }\n  h1 {\n    text-align: center;\n  }\n  #controls {\n    text-align: center;\n    margin-bottom: 20px;\n  }\n  #arrayInput {\n    width: 300px;\n    font-size: 16px;\n    padding: 5px;\n  }\n  button {\n    font-size: 16px;\n    padding: 6px 12px;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n  #arrayContainer {\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 200px;\n    margin: 0 auto 20px;\n    max-width: 800px;\n  }\n  .bar {\n    margin: 0 2px;\n    background-color: #69b3a2;\n    width: 25px;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n    border-radius: 4px 4px 0 0;\n    user-select: none;\n    position: relative;\n  }\n  .bar.highlight {\n    background-color: #ff6f61;\n  }\n  .bar.swapped {\n    background-color: #f9a825;\n  }\n  #log {\n    max-width: 800px;\n    margin: 0 auto;\n    height: 150px;\n    background: #222;\n    color: #eee;\n    padding: 10px;\n    overflow-y: auto;\n    font-family: monospace;\n    border-radius: 5px;\n  }\n</style>\n</head>\n<body>\n<h1>Heap Sort Visualization</h1>\n\n<div id=\"controls\">\n  <input type=\"text\" id=\"arrayInput\" placeholder=\"Enter numbers separated by commas\" />\n  <button id=\"generateBtn\">Generate Random</button>\n  <button id=\"sortBtn\">Start Heap Sort</button>\n</div>\n\n<div id=\"arrayContainer\"></div>\n\n<div id=\"log\"></div>\n\n<script>\n  const arrayInput = document.getElementById('arrayInput');\n  const arrayContainer = document.getElementById('arrayContainer');\n  const log = document.getElementById('log');\n  const generateBtn = document.getElementById('generateBtn');\n  const sortBtn = document.getElementById('sortBtn');\n\n  let array = [];\n  let bars = [];\n\n  // Generate random array\n  function generateRandomArray(size = 20, min = 5, max = 100) {\n    let arr = [];\n    for (let i = 0; i < size; i++) {\n      arr.push(Math.floor(Math.random() * (max - min + 1)) + min);\n    }\n    return arr;\n  }\n\n  // Render bars based on the array values\n  function renderArray(arr) {\n    arrayContainer.innerHTML = '';\n    bars = [];\n    const maxVal = Math.max(...arr);\n    arr.forEach((val, i) => {\n      const bar = document.createElement('div');\n      bar.classList.add('bar');\n      bar.style.height = `${(val / maxVal) * 150 + 30}px`;\n      bar.textContent = val;\n      bar.dataset.index = i;\n      arrayContainer.appendChild(bar);\n      bars.push(bar);\n    });\n  }\n\n  // Log helper\n  function appendLog(message) {\n    const time = new Date().toLocaleTimeString();\n    log.innerText += `[${time}] ${message}\\n`;\n    log.scrollTop = log.scrollHeight;\n  }\n\n  // Sleep for animation delays\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  // Swap helper with animation\n  async function swap(i, j) {\n    appendLog(`Swapping index ${i} (${array[i]}) and index ${j} (${array[j]})`);\n    bars[i].classList.add('swapped');\n    bars[j].classList.add('swapped');\n\n    // Swap values in array\n    [array[i], array[j]] = [array[j], array[i]];\n\n    // Swap heights and text\n    bars[i].style.height = bars[j].style.height;\n    bars[j].style.height = bars[i].style.height;\n\n    // But since we swapped array values, let's re-render to avoid confusion:\n    renderArray(array);\n    await sleep(400);\n\n    bars.forEach(bar => bar.classList.remove('swapped'));\n  }\n\n  // Heap sort specific functions:\n  async function heapify(n, i) {\n    let largest = i;\n    let left = 2 * i + 1;\n    let right = 2 * i + 2;\n\n    bars[i].classList.add('highlight');\n    if (left < n) bars[left].classList.add('highlight');\n    if (right < n) bars[right].classList.add('highlight');\n\n    appendLog(`Heapifying at index ${i} with left=${left} and right=${right}`);\n\n    await sleep(700);\n\n    if (left < n && array[left] > array[largest]) {\n      appendLog(`Left child (${array[left]}) is greater than root (${array[largest]})`);\n      largest = left;\n    }\n    if (right < n && array[right] > array[largest]) {\n      appendLog(`Right child (${array[right]}) is greater than current largest (${array[largest]})`);\n      largest = right;\n    }\n\n    if (largest !== i) {\n      await swap(i, largest);\n      bars.forEach(bar => bar.classList.remove('highlight'));\n      await heapify(n, largest);\n    } else {\n      bars.forEach(bar => bar.classList.remove('highlight'));\n    }\n  }\n\n  async function heapSort() {\n    appendLog('Starting Heap Sort...');\n    let n = array.length;\n\n    // Build max heap\n    for (let i = Math.floor(n / 2) - 1; i >= 0; i--) {\n      appendLog(`Building max heap at index ${i}`);\n      await heapify(n, i);\n    }\n\n    appendLog('Max heap built');\n\n    // Extract elements from heap one by one\n    for (let i = n - 1; i > 0; i--) {\n      appendLog(`Moving max element ${array[0]} to index ${i}`);\n      await swap(0, i);\n\n      appendLog(`Heapify reduced heap of size ${i}`);\n      await heapify(i, 0);\n    }\n\n    appendLog('Heap Sort completed!');\n  }\n\n  // Event listeners\n  generateBtn.addEventListener('click', () => {\n    array = generateRandomArray(20, 10, 99);\n    renderArray(array);\n    log.innerText = '';\n  });\n\n  sortBtn.addEventListener('click', async () => {\n    // Parse input first\n    let inputStr = arrayInput.value.trim();\n    if (inputStr) {\n      let tempArray = inputStr.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n));\n      if (tempArray.length === 0) {\n        alert('Please enter valid numbers separated by commas.');\n        return;\n      }\n      array = tempArray;\n      renderArray(array);\n      log.innerText = '';\n    } else if (array.length === 0) {\n      alert('Please input an array or generate a random one first.');\n      return;\n    }\n\n    sortBtn.disabled = true;\n    generateBtn.disabled = true;\n    arrayInput.disabled = true;\n    await heapSort();\n    sortBtn.disabled = false;\n    generateBtn.disabled = false;\n    arrayInput.disabled = false;\n  });\n\n  // Initialize with random array on load\n  array = generateRandomArray(20, 10, 99);\n  renderArray(array);\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Heap Sort"
    }
  ],
  "topic": "Heap Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}