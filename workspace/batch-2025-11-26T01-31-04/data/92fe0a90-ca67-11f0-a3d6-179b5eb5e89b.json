{
  "id": "92fe0a90-ca67-11f0-a3d6-179b5eb5e89b",
  "timestamp": "2025-11-26T01:32:34.423Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Priority Queue",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Priority Queue Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2em;\n    background: #f4f6f8;\n  }\n  h1 {\n    text-align: center;\n    color: #333;\n  }\n  #container {\n    max-width: 600px;\n    margin: 0 auto;\n    background: #fff;\n    border-radius: 8px;\n    padding: 1.5em;\n    box-shadow: 0 4px 10px rgba(0,0,0,0.1);\n  }\n  label {\n    display: block;\n    margin-bottom: 0.25em;\n    font-weight: 600;\n  }\n  input[type=text], input[type=number] {\n    width: 100%;\n    padding: 0.5em 0.75em;\n    font-size: 1em;\n    margin-bottom: 1em;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n  }\n  button {\n    background-color: #3066be;\n    border: none;\n    color: white;\n    padding: 0.6em 1.2em;\n    font-size: 1em;\n    cursor: pointer;\n    border-radius: 4px;\n    margin-right: 0.5em;\n    transition: background-color 0.3s ease;\n  }\n  button:hover:not(:disabled) {\n    background-color: #204a86;\n  }\n  button:disabled {\n    background-color: #bbb;\n    cursor: not-allowed;\n  }\n  #output {\n    margin-top: 1em;\n    background: #eef2fb;\n    border: 1px solid #c3cde6;\n    border-radius: 6px;\n    padding: 1em;\n    min-height: 80px;\n    white-space: pre-wrap;\n    font-family: monospace;\n  }\n  #queueDisplay {\n    margin-top: 1em;\n    padding: 1em;\n    background: #fafafa;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n  }\n  .item {\n    display: flex;\n    justify-content: space-between;\n    padding: 0.3em 0.5em;\n    border-bottom: 1px solid #ddd;\n  }\n  .item:last-child {\n    border-bottom: none;\n  }\n  .priority {\n    font-weight: 700;\n    color: #3066be;\n  }\n</style>\n</head>\n<body>\n<div id=\"container\">\n  <h1>Priority Queue Demo</h1>\n\n  <label for=\"itemInput\">New Item:</label>\n  <input type=\"text\" id=\"itemInput\" placeholder=\"Enter item content\" />\n\n  <label for=\"priorityInput\">Priority (number, higher = higher priority):</label>\n  <input type=\"number\" id=\"priorityInput\" placeholder=\"e.g. 5\" />\n\n  <button id=\"enqueueBtn\">Enqueue</button>\n  <button id=\"dequeueBtn\" disabled>Dequeue</button>\n  <button id=\"peekBtn\" disabled>Peek</button>\n  <button id=\"clearBtn\" disabled>Clear Queue</button>\n\n  <div id=\"output\" aria-live=\"polite\"></div>\n\n  <h2>Current Queue State (front to back)</h2>\n  <div id=\"queueDisplay\" aria-live=\"polite\"></div>\n</div>\n\n<script>\n  // Priority Queue Implementation using a Min Heap on negative priority \n  // (so higher priority numbers come front)\n  class PriorityQueue {\n    constructor() {\n      this.heap = [];\n    }\n\n    _swap(i, j) {\n      [this.heap[i], this.heap[j]] = [this.heap[j], this.heap[i]];\n    }\n\n    _parent(i) {\n      return Math.floor((i -1)/2);\n    }\n\n    _left(i) {\n      return 2*i + 1;\n    }\n\n    _right(i) {\n      return 2*i + 2;\n    }\n\n    // Compare function: higher priority first; if same priority, enqueue order preserved\n    _compare(a, b) {\n      if (a.priority !== b.priority) {\n        return a.priority > b.priority;\n      } else {\n        // FIFO for same priority\n        return a.enqueueIndex < b.enqueueIndex;\n      }\n    }\n\n    _heapifyUp(i) {\n      let current = i;\n      while (current > 0) {\n        let p = this._parent(current);\n        if (this._compare(this.heap[current], this.heap[p])) {\n          this._swap(current, p);\n          current = p;\n        } else {\n          break;\n        }\n      }\n    }\n\n    _heapifyDown(i) {\n      let current = i;\n      const len = this.heap.length;\n      while (true) {\n        let left = this._left(current);\n        let right = this._right(current);\n        let candidate = current;\n        if (left < len && this._compare(this.heap[left], this.heap[candidate])) {\n          candidate = left;\n        }\n        if (right < len && this._compare(this.heap[right], this.heap[candidate])) {\n          candidate = right;\n        }\n        if (candidate === current) break;\n        this._swap(current, candidate);\n        current = candidate;\n      }\n    }\n\n    _enqueueCounter = 0;\n\n    enqueue(value, priority) {\n      // Assign an enqueue index to preserve order among equals\n      this._enqueueCounter++;\n      const element = {\n        value,\n        priority,\n        enqueueIndex: this._enqueueCounter\n      };\n      this.heap.push(element);\n      this._heapifyUp(this.heap.length -1);\n    }\n\n    dequeue() {\n      if (this.isEmpty()) return null;\n      const top = this.heap[0];\n      const last = this.heap.pop();\n      if (this.heap.length > 0) {\n        this.heap[0] = last;\n        this._heapifyDown(0);\n      }\n      return top;\n    }\n\n    peek() {\n      if (this.isEmpty()) return null;\n      return this.heap[0];\n    }\n\n    size() {\n      return this.heap.length;\n    }\n\n    isEmpty() {\n      return this.size() === 0;\n    }\n\n    clear() {\n      this.heap = [];\n      this._enqueueCounter = 0;\n    }\n\n    toSortedArray() {\n      // Returns a copy array sorted by priority and enqueue order without modifying heap\n      return this.heap.slice().sort((a,b) => {\n        if (b.priority !== a.priority) return b.priority - a.priority;\n        else return a.enqueueIndex - b.enqueueIndex;\n      });\n    }\n  }\n\n  // UI code\n  const pq = new PriorityQueue();\n\n  const itemInput = document.getElementById('itemInput');\n  const priorityInput = document.getElementById('priorityInput');\n  const enqueueBtn = document.getElementById('enqueueBtn');\n  const dequeueBtn = document.getElementById('dequeueBtn');\n  const peekBtn = document.getElementById('peekBtn');\n  const clearBtn = document.getElementById('clearBtn');\n  const output = document.getElementById('output');\n  const queueDisplay = document.getElementById('queueDisplay');\n\n  function updateButtons() {\n    const empty = pq.isEmpty();\n    dequeueBtn.disabled = empty;\n    peekBtn.disabled = empty;\n    clearBtn.disabled = empty;\n  }\n\n  function displayQueue() {\n    const arr = pq.toSortedArray();\n    if(arr.length === 0){\n      queueDisplay.textContent = \"(empty)\";\n      return;\n    }\n    queueDisplay.innerHTML = '';\n    arr.forEach((el, i) => {\n      const div = document.createElement('div');\n      div.classList.add('item');\n      div.innerHTML = `<span>${el.value}</span> <span class=\"priority\">Priority: ${el.priority}</span>`;\n      queueDisplay.appendChild(div);\n    });\n  }\n\n  function appendOutputLine(text) {\n    output.textContent += text + '\\n';\n    output.scrollTop = output.scrollHeight;\n  }\n\n  // Enqueue handler\n  enqueueBtn.addEventListener('click', () => {\n    const val = itemInput.value.trim();\n    const prio = priorityInput.value.trim();\n\n    if(val === '') {\n      alert('Please enter an item value.');\n      itemInput.focus();\n      return;\n    }\n    if(prio === '' || isNaN(prio)) {\n      alert('Please enter a valid numeric priority.');\n      priorityInput.focus();\n      return;\n    }\n    const priorityNum = Number(prio);\n    pq.enqueue(val, priorityNum);\n    appendOutputLine(`Enqueued: \"${val}\" with priority ${priorityNum}`);\n    itemInput.value = '';\n    priorityInput.value = '';\n    itemInput.focus();\n    updateButtons();\n    displayQueue();\n  });\n\n  // Dequeue handler\n  dequeueBtn.addEventListener('click', () => {\n    const item = pq.dequeue();\n    if(item){\n      appendOutputLine(`Dequeued: \"${item.value}\" with priority ${item.priority}`);\n      updateButtons();\n      displayQueue();\n    }\n  });\n\n  // Peek handler\n  peekBtn.addEventListener('click', () => {\n    const item = pq.peek();\n    if(item){\n      appendOutputLine(`Peek: \"${item.value}\" with priority ${item.priority}`);\n    }\n  });\n\n  // Clear handler\n  clearBtn.addEventListener('click', () => {\n    if(confirm('Clear entire queue?')) {\n      pq.clear();\n      appendOutputLine('Queue cleared.');\n      updateButtons();\n      displayQueue();\n    }\n  });\n\n  // Initialize\n  updateButtons();\n  displayQueue();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Priority Queue"
    }
  ],
  "topic": "Priority Queue",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}