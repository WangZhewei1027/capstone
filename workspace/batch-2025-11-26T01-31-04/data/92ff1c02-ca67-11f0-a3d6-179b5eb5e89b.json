{
  "id": "92ff1c02-ca67-11f0-a3d6-179b5eb5e89b",
  "timestamp": "2025-11-26T01:32:08.027Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Huffman Coding",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Huffman Coding Demonstration</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    max-width: 900px;\n    margin: 2rem auto;\n    padding: 0 1rem;\n    background: #f9f9f9;\n    color: #222;\n  }\n  h1 {\n    text-align: center;\n    margin-bottom: 1rem;\n  }\n  textarea {\n    width: 100%;\n    height: 100px;\n    font-family: monospace;\n    font-size: 1rem;\n    padding: 0.5rem;\n    box-sizing: border-box;\n    margin-bottom: 1rem;\n  }\n  button {\n    background: #007ACC;\n    color: white;\n    border: none;\n    padding: 0.6rem 1.2rem;\n    font-size: 1rem;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  button:hover {\n    background: #005fa3;\n  }\n  .section {\n    background: white;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    padding: 1rem;\n    margin-top: 1rem;\n    box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);\n  }\n  table {\n    border-collapse: collapse;\n    width: 100%;\n    margin-top: 0.5rem;\n  }\n  th, td {\n    border: 1px solid #ccc;\n    padding: 0.25rem 0.5rem;\n    text-align: center;\n  }\n  th {\n    background: #eee;\n  }\n  .code-tree {\n    margin-top: 1rem;\n    text-align: center;\n    overflow-x: auto;\n  }\n  svg {\n    max-width: 100%;\n  }\n  .code-output {\n    background: #272822;\n    color: #f8f8f2;\n    padding: 0.75rem 1rem;\n    border-radius: 4px;\n    font-family: monospace;\n    word-break: break-all;\n    margin-top: 0.5rem;\n    white-space: pre-wrap;\n  }\n  .footer {\n    margin-top: 3rem;\n    font-size: 0.9rem;\n    color: #666;\n    text-align: center;\n  }\n  .error {\n    color: red;\n    font-weight: 600;\n    margin-top: 0.5rem;\n  }\n</style>\n</head>\n<body>\n<h1>Huffman Coding Demonstration</h1>\n<p>Enter text below to generate Huffman codes, see the code assignments, and encode the input text.</p>\n\n<textarea id=\"inputText\" placeholder=\"Type or paste any text here...\">this is an example for huffman encoding</textarea>\n<button id=\"generateBtn\">Generate Huffman Codes</button>\n<div id=\"errorMsg\" class=\"error\"></div>\n\n<div id=\"output\" style=\"display:none;\">\n  <div class=\"section\" id=\"freqSection\">\n    <h2>Symbol Frequencies</h2>\n    <table id=\"freqTable\">\n      <thead>\n        <tr><th>Symbol</th><th>Frequency</th></tr>\n      </thead>\n      <tbody></tbody>\n    </table>\n  </div>\n  <div class=\"section\" id=\"codesSection\">\n    <h2>Huffman Codes</h2>\n    <table id=\"codesTable\">\n      <thead>\n        <tr><th>Symbol</th><th>Code</th><th>Code Length</th></tr>\n      </thead>\n      <tbody></tbody>\n    </table>\n  </div>\n  <div class=\"section\" id=\"encodedSection\">\n    <h2>Encoded Output (Binary String)</h2>\n    <div class=\"code-output\" id=\"encodedOutput\"></div>\n    <p><b>Original Length:</b> <span id=\"origBits\"></span> bits</p>\n    <p><b>Encoded Length:</b> <span id=\"encodedBits\"></span> bits</p>\n    <p><b>Compression Ratio:</b> <span id=\"compressionRatio\"></span></p>\n  </div>\n  <div class=\"section\" id=\"treeSection\">\n    <h2>Huffman Tree Visualization</h2>\n    <div class=\"code-tree\" id=\"treeSVGContainer\"></div>\n  </div>\n</div>\n\n<script>\n// Huffman coding implementation\n\n// Node class for Huffman tree\nclass Node {\n  constructor(symbol, freq, left=null, right=null) {\n    this.symbol = symbol; // character or null if internal node\n    this.freq = freq;\n    this.left = left;\n    this.right = right;\n  }\n}\n\n// Priority queue using array + simple sort (fine for demo)\nclass PriorityQueue {\n  constructor() {\n    this.data = [];\n  }\n  enqueue(node) {\n    this.data.push(node);\n    this.data.sort((a,b) => a.freq - b.freq);\n  }\n  dequeue() {\n    return this.data.shift();\n  }\n  size() {\n    return this.data.length;\n  }\n}\n\n// Build frequency table from text\nfunction buildFrequencyTable(text) {\n  const freqMap = new Map();\n  for (const ch of text) {\n    freqMap.set(ch, (freqMap.get(ch) || 0) + 1);\n  }\n  return freqMap;\n}\n\n// Build Huffman tree from frequency map\nfunction buildHuffmanTree(freqMap) {\n  const pq = new PriorityQueue();\n  for (const [symbol, freq] of freqMap.entries()) {\n    pq.enqueue(new Node(symbol, freq));\n  }\n  // Edge case: single symbol\n  if (pq.size() === 1) {\n    // Add dummy node to create 2-node tree\n    const single = pq.dequeue();\n    const dummy = new Node(null, 0);\n    const root = new Node(null, single.freq + dummy.freq, single, dummy);\n    return root;\n  }\n  while (pq.size() > 1) {\n    const left = pq.dequeue();\n    const right = pq.dequeue();\n    const newNode = new Node(null, left.freq + right.freq, left, right);\n    pq.enqueue(newNode);\n  }\n  return pq.dequeue();\n}\n\n// Generate codes from tree\nfunction generateCodes(node, prefix = '', codeMap = new Map()) {\n  if (!node) return;\n  if (node.symbol !== null) {\n    codeMap.set(node.symbol, prefix || '0'); // assign '0' if tree is only 1 node\n  }\n  generateCodes(node.left, prefix + '0', codeMap);\n  generateCodes(node.right, prefix + '1', codeMap);\n  return codeMap;\n}\n\n// Encode text using codes\nfunction encodeText(text, codeMap) {\n  let encoded = '';\n  for (const ch of text) {\n    encoded += codeMap.get(ch);\n  }\n  return encoded;\n}\n\n// Draw Huffman tree as SVG\nfunction drawTreeSvg(root) {\n  // We'll do a simple horizontal tree layout\n  // Traverse to calculate depth and position nodes\n\n  let nodes = [];\n  let edges = [];\n\n  // Assign positions using DFS; calculate subtree width for balanced spacing\n\n  function layout(node) {\n    if (!node) return {width: 0, height: 0};\n    if (!node.left && !node.right) {\n      // Leaf: width = 50 (for box), height = 60\n      nodes.push(node);\n      node.x = 0;\n      node.y = 0;\n      return {width: 50, height: 60};\n    }\n    const leftSize = layout(node.left);\n    const rightSize = layout(node.right);\n    const spacing = 20;\n    const width = leftSize.width + rightSize.width + spacing;\n    const height = Math.max(leftSize.height, rightSize.height) + 80;\n    nodes.push(node);\n    node.x = leftSize.width + spacing/2;\n    node.y = 0;\n\n    return {width, height};\n  }\n\n  layout(root);\n\n  // Assign absolute Y positions and X positions relative to root\n  // We do a top-down repositioning\n\n  function setPositions(node, x, y) {\n    if (!node) return;\n    node.cx = x + node.x;\n    node.cy = y;\n    if (node.left) setPositions(node.left, x, y + 80);\n    if (node.right) setPositions(node.right, x + (node.left ? 0 : 0), y + 80);\n  }\n  setPositions(root, 10, 20);\n\n  // Collect edges (lines) from parent to children\n  function collectEdges(node) {\n    if (!node) return;\n    if (node.left) {\n      edges.push({x1: node.cx + 25, y1: node.cy + 40, x2: node.left.cx + 25, y2: node.left.cy});\n      collectEdges(node.left);\n    }\n    if (node.right) {\n      edges.push({x1: node.cx + 25, y1: node.cy + 40, x2: node.right.cx + 25, y2: node.right.cy});\n      collectEdges(node.right);\n    }\n  }\n  collectEdges(root);\n\n  // Calculate SVG width and height\n  const allX = nodes.flatMap(n => [n.cx, n.cx + 50]);\n  const allY = nodes.flatMap(n => [n.cy, n.cy + 60]);\n  const width = Math.max(...allX) + 20;\n  const height = Math.max(...allY) + 20;\n\n  // Build SVG elements\n  let svg = `<svg width=\"${width}\" height=\"${height}\" role=\"img\" aria-label=\"Huffman tree visualization\">`;\n\n  // Draw edges\n  for (const e of edges) {\n    svg += `<line x1=\"${e.x1}\" y1=\"${e.y1}\" x2=\"${e.x2}\" y2=\"${e.y2}\" stroke=\"#666\" stroke-width=\"2\"/>`;\n  }\n\n  // Draw nodes (rect with symbol or blank)\n  for (const node of nodes) {\n    svg += `<rect x=\"${node.cx}\" y=\"${node.cy}\" width=\"50\" height=\"40\" fill=\"${node.symbol === null ? '#8ecae6' : '#219ebc'}\" stroke=\"#023047\" stroke-width=\"1.5\" rx=\"6\" ry=\"6\"/>`;\n    let text = node.symbol === null ? '' : escapeHtml(node.symbol);\n    if (text === ' ') text = '[space]';\n    svg += `<text x=\"${node.cx + 25}\" y=\"${node.cy + 25}\" fill=\"white\" font-size=\"20\" font-family=\"monospace\" text-anchor=\"middle\" alignment-baseline=\"middle\">${text}</text>`;\n    // show freq in smaller text below symbol\n    svg += `<text x=\"${node.cx + 25}\" y=\"${node.cy + 55}\" fill=\"#023047\" font-size=\"12\" font-family=\"sans-serif\" text-anchor=\"middle\" alignment-baseline=\"middle\">${node.freq}</text>`;\n  }\n  svg += '</svg>';\n  return svg;\n}\n\nfunction escapeHtml(text) {\n  const map = {\n    '&': \"&amp;\",\n    '<': \"&lt;\",\n    '>': \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#039;\"\n  };\n  return text.replace(/[&<>\"']/g, function(m) { return map[m]; });\n}\n\n// Main demo function\nfunction runHuffmanDemo() {\n  const text = document.getElementById('inputText').value;\n  const errorDiv = document.getElementById('errorMsg');\n  errorDiv.textContent = '';\n  if (!text || text.length === 0) {\n    errorDiv.textContent = 'Please enter some text to encode.';\n    return;\n  }\n\n  // Build frequency table\n  const freqMap = buildFrequencyTable(text);\n\n  // Build tree\n  const treeRoot = buildHuffmanTree(freqMap);\n\n  // Generate codes\n  const codeMap = generateCodes(treeRoot);\n\n  // Encode text\n  const encoded = encodeText(text, codeMap);\n\n  // Display results\n  // Frequencies table\n  const freqTableBody = document.querySelector('#freqTable tbody');\n  freqTableBody.innerHTML = '';\n  [...freqMap.entries()]\n    .sort((a,b) => b[1]-a[1])  // descending freq\n    .forEach(([symbol, freq]) => {\n      const tr = document.createElement('tr');\n      let displaySymbol = symbol === ' ' ? '[space]' : escapeHtml(symbol);\n      tr.innerHTML = `<td>${displaySymbol}</td><td>${freq}</td>`;\n      freqTableBody.appendChild(tr);\n    });\n\n  // Codes table\n  const codesTableBody = document.querySelector('#codesTable tbody');\n  codesTableBody.innerHTML = '';\n  // Sort by code length asc, then lex\n  const codesSorted = [...codeMap.entries()].sort((a,b)=> {\n    if (a[1].length != b[1].length) return a[1].length - b[1].length;\n    return a[0].localeCompare(b[0]);\n  });\n  codesSorted.forEach(([symbol, code]) => {\n    const tr = document.createElement('tr');\n    let displaySymbol = symbol === ' ' ? '[space]' : escapeHtml(symbol);\n    tr.innerHTML = `<td>${displaySymbol}</td><td><code>${code}</code></td><td>${code.length}</td>`;\n    codesTableBody.appendChild(tr);\n  });\n\n  // Encoded output\n  const encodedOutput = document.getElementById('encodedOutput');\n  let displayEncoded = encoded;\n  // show up to 120 chars, then ...\n  if (encoded.length > 120) {\n    displayEncoded = encoded.slice(0, 120) + '...';\n  }\n  encodedOutput.textContent = displayEncoded;\n\n  // Show original bits (assuming 8 bits per char)\n  const origBits = text.length * 8;\n  const encodedBits = encoded.length;\n\n  document.getElementById('origBits').textContent = origBits.toLocaleString();\n  document.getElementById('encodedBits').textContent = encodedBits.toLocaleString();\n\n  // Compression ratio\n  let ratio = (encodedBits / origBits);\n  const compressRatioElem = document.getElementById('compressionRatio');\n  compressRatioElem.textContent = ratio.toFixed(3) + ' (' + (100 * (1 - ratio)).toFixed(1) + '% size reduction)';\n\n  // Draw tree\n  const treeContainer = document.getElementById('treeSVGContainer');\n  treeContainer.innerHTML = drawTreeSvg(treeRoot);\n\n  // Show output container\n  document.getElementById('output').style.display = 'block';\n}\n\ndocument.getElementById('generateBtn').addEventListener('click', runHuffmanDemo);\n\n// Run default demo on load\nwindow.onload = () => {\n  runHuffmanDemo();\n};\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Huffman Coding"
    }
  ],
  "topic": "Huffman Coding",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}