<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Selection Sort Visualization</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: #f0f0f0;
    text-align: center;
  }
  h1 {
    margin-bottom: 10px;
  }
  #arrayContainer {
    display: flex;
    justify-content: center;
    margin: 20px 0;
    height: 200px;
    align-items: flex-end;
  }
  .bar {
    width: 30px;
    margin: 0 3px;
    background-color: #4a90e2;
    color: white;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    font-weight: bold;
    border-radius: 4px 4px 0 0;
    position: relative;
  }
  .bar span {
    margin-bottom: 5px;
    font-size: 14px;
  }
  .current {
    background-color: #f39c12;
  }
  .min {
    background-color: #e74c3c;
  }
  .sorted {
    background-color: #2ecc71;
  }
  button {
    font-size: 16px;
    padding: 10px 20px;
    margin: 15px 5px 0;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    color: white;
  }
  #startBtn {
    background-color: #27ae60;
  }
  #resetBtn {
    background-color: #c0392b;
  }
  #speedRange {
    margin-top: 15px;
  }
  label {
    font-weight: bold;
  }
</style>
</head>
<body>
<h1>Selection Sort Visualization</h1>
<div id="arrayContainer"></div>
<div>
  <button id="startBtn">Start Sorting</button>
  <button id="resetBtn">Reset Array</button>
</div>
<div>
  <label for="speedRange">Speed:</label>
  <input type="range" id="speedRange" min="100" max="2000" step="100" value="600" />
  <span id="speedValue">600 ms</span>
</div>

<script>
  const arrayContainer = document.getElementById("arrayContainer");
  const startBtn = document.getElementById("startBtn");
  const resetBtn = document.getElementById("resetBtn");
  const speedRange = document.getElementById("speedRange");
  const speedValue = document.getElementById("speedValue");

  let array = [];
  const arraySize = 15;
  let delay = 600;
  let sorting = false;

  // Generate random array
  function generateArray() {
    array = [];
    for (let i = 0; i < arraySize; i++) {
      array.push(Math.floor(Math.random() * 150) + 20);
    }
  }

  // Render array bars
  function renderArray(currentIndex = -1, minIndex = -1, sortedIndex = -1) {
    arrayContainer.innerHTML = "";
    for (let i = 0; i < array.length; i++) {
      const bar = document.createElement("div");
      bar.classList.add("bar");
      bar.style.height = array[i] + "px";
      bar.style.width = "30px";
      const valueSpan = document.createElement("span");
      valueSpan.textContent = array[i];
      bar.appendChild(valueSpan);

      if (i === currentIndex) {
        bar.classList.add("current");
      }
      if (i === minIndex) {
        bar.classList.add("min");
      }
      if (sortedIndex >= 0 && i <= sortedIndex) {
        bar.classList.add("sorted");
      }
      arrayContainer.appendChild(bar);
    }
  }

  // Sleep utility to create pauses
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // Selection Sort with visualization
  async function selectionSort() {
    sorting = true;
    startBtn.disabled = true;
    resetBtn.disabled = true;
    for (let i = 0; i < array.length - 1; i++) {
      let minIndex = i;
      renderArray(i, minIndex, i - 1);
      await sleep(delay);
      for (let j = i + 1; j < array.length; j++) {
        renderArray(j, minIndex, i - 1);
        await sleep(delay);
        if (array[j] < array[minIndex]) {
          minIndex = j;
          renderArray(j, minIndex, i - 1);
          await sleep(delay);
        }
      }
      if (minIndex !== i) {
        [array[i], array[minIndex]] = [array[minIndex], array[i]];
        renderArray(i, minIndex, i - 1);
        await sleep(delay);
      }
      renderArray(i, -1, i);
      await sleep(delay);
    }
    renderArray(-1, -1, array.length - 1);
    sorting = false;
    startBtn.disabled = false;
    resetBtn.disabled = false;
  }

  // Initialize page
  function init() {
    generateArray();
    renderArray();
  }

  startBtn.addEventListener("click", async () => {
    if (!sorting) {
      await selectionSort();
    }
  });

  resetBtn.addEventListener("click", () => {
    if (!sorting) {
      generateArray();
      renderArray();
    }
  });

  speedRange.addEventListener("input", () => {
    delay = parseInt(speedRange.value, 10);
    speedValue.textContent = `${delay} ms`;
  });

  init();
</script>
</body>
</html>