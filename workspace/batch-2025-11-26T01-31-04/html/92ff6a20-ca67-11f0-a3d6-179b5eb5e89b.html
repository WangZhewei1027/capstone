<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sliding Window Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f0f0;
  }
  h1 {
    text-align: center;
    margin-bottom: 1rem;
  }
  #container {
    max-width: 800px;
    margin: 0 auto;
  }
  .array-container {
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }
  .array-element {
    border: 2px solid #888;
    border-radius: 6px;
    padding: 1rem 1.5rem;
    margin: 0 5px;
    font-size: 1.2rem;
    background: white;
    transition: background-color 0.3s, border-color 0.3s;
    user-select: none;
    position: relative;
  }
  .window {
    border-color: #007bff;
    background-color: #d0e7ff;
    font-weight: bold;
    box-shadow: 0 0 10px rgba(0,123,255,0.4);
  }
  #controls {
    text-align: center;
    margin-bottom: 1rem;
  }
  input[type=number] {
    width: 60px;
    padding: 0.3rem 0.5rem;
    font-size: 1rem;
    margin-left: 0.5rem;
    margin-right: 1.5rem;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  button {
    padding: 0.5rem 1rem;
    font-size: 1rem;
    border-radius: 5px;
    border: none;
    background-color: #007bff;
    color: white;
    cursor: pointer;
    margin-right: 10px;
    transition: background-color 0.2s ease;
  }
  button:hover:not(:disabled) {
    background-color: #0056b3;
  }
  button:disabled {
    background-color: #b0c6f7;
    cursor: not-allowed;
  }
  #status {
    text-align: center;
    font-size: 1.2rem;
    margin-top: 1rem;
    font-weight: bold;
  }
  #description {
    max-width: 700px;
    margin: 0 auto 2rem;
    font-size: 1rem;
    color: #333;
    line-height: 1.4;
  }
  #sum-display {
    text-align: center;
    font-size: 1rem;
    margin-top: 0.5rem;
    color: #007bff;
    font-weight: 600;
  }
  #arrayInput {
    width: 300px;
    font-size: 1rem;
    padding: 0.4rem 0.5rem;
    border-radius: 4px;
    border: 1px solid #ccc;
    margin-right: 1rem;
  }
  #exampleArrays {
    margin-top: 0.5rem;
    text-align: center;
    font-size: 0.9rem;
    color: #555;
  }
  #exampleArrays button {
    background-color: #28a745;
    margin: 0 0.3rem 0.5rem 0.3rem;
    font-size: 0.85rem;
    padding: 0.3rem 0.7rem;
  }
  #exampleArrays button:hover:not(:disabled) {
    background-color: #1e7e34;
  }
</style>
</head>
<body>
  <h1>Sliding Window Technique Visualization</h1>
  <div id="container">
    <div id="description">
      <p>
        The Sliding Window technique is used for problems involving arrays or lists where you need to inspect or calculate something over a contiguous subset (window) of elements.
        This demo slides a window of fixed size over the array and shows the sum of elements inside the window at each step.
      </p>
      <p>
        Enter your own array of numbers (comma separated) and a window size, then click "Start". Use Next and Previous to slide the window.
      </p>
    </div>

    <div id="input-area" style="text-align:center; margin-bottom:1.5rem;">
      <input id="arrayInput" type="text" placeholder="e.g. 2,1,5,1,3,2" />
      <label for="windowSize">Window Size:</label>
      <input id="windowSize" type="number" min="1" value="3" />
      <button id="startBtn">Start</button>
      <div id="exampleArrays">
        <span>Try examples:</span>
        <button data-array="2,1,5,1,3,2" data-window="3">[2,1,5,1,3,2], k=3</button>
        <button data-array="1,3,2,6,2,7,8" data-window="4">[1,3,2,6,2,7,8], k=4</button>
        <button data-array="4,3,2,1" data-window="2">[4,3,2,1], k=2</button>
      </div>
    </div>

    <div class="array-container" id="arrayDisplay"></div>
    <div id="sum-display"></div>
    <div id="controls">
      <button id="prevBtn" disabled>Previous</button>
      <button id="nextBtn" disabled>Next</button>
    </div>
    <div id="status"></div>
  </div>

<script>
(() => {
  const arrayInput = document.getElementById('arrayInput');
  const windowInput = document.getElementById('windowSize');
  const startBtn = document.getElementById('startBtn');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const arrayDisplay = document.getElementById('arrayDisplay');
  const sumDisplay = document.getElementById('sum-display');
  const statusDisplay = document.getElementById('status');
  const exampleBtns = document.querySelectorAll('#exampleArrays button');

  let arr = [];
  let windowSize = 0;
  let currentWindowStart = 0;

  function parseArrayInput(input) {
    // Parse numbers with basic validation
    try {
      let parts = input.split(',').map(s => s.trim());
      let nums = parts.map(n => {
        if (n === '') throw new Error('Empty value');
        let num = Number(n);
        if (isNaN(num)) throw new Error('Not a number: ' + n);
        return num;
      });
      return nums;
    } catch (e) {
      return null;
    }
  }

  function renderArray() {
    arrayDisplay.innerHTML = '';
    arr.forEach((num, idx) => {
      let elem = document.createElement('div');
      elem.className = 'array-element';
      elem.textContent = num;
      arrayDisplay.appendChild(elem);
    });
  }

  function highlightWindow(start) {
    // Clear all highlights
    let elems = arrayDisplay.children;
    for(let i = 0; i < elems.length; i++) {
      elems[i].classList.remove('window');
    }
    // Highlight current window elements
    for(let i = start; i < start + windowSize; i++) {
      if (elems[i]) elems[i].classList.add('window');
    }
  }

  function calculateWindowSum(start) {
    let sum = 0;
    for(let i = start; i < start + windowSize; i++) {
      if (arr[i] !== undefined) sum += arr[i];
    }
    return sum;
  }

  function updateStatus() {
    statusDisplay.textContent = `Window position: [${currentWindowStart} .. ${currentWindowStart + windowSize - 1}]`;
    sumDisplay.textContent = `Sum in window: ${calculateWindowSum(currentWindowStart)}`;
  }

  function updateButtons() {
    prevBtn.disabled = currentWindowStart <= 0;
    nextBtn.disabled = currentWindowStart + windowSize >= arr.length;
  }

  function slideWindowTo(start) {
    currentWindowStart = start;
    highlightWindow(currentWindowStart);
    updateStatus();
    updateButtons();
  }

  startBtn.addEventListener('click', () => {
    const userInput = arrayInput.value;
    const size = parseInt(windowInput.value, 10);
    let parsed = parseArrayInput(userInput);
    if (!parsed || parsed.length === 0) {
      alert('Please enter a valid comma-separated list of numbers.');
      return;
    }
    if (isNaN(size) || size < 1) {
      alert('Please enter a valid window size greater than 0.');
      return;
    }
    if (size > parsed.length) {
      alert('Window size must be less than or equal to the array length.');
      return;
    }
    arr = parsed;
    windowSize = size;
    currentWindowStart = 0;
    renderArray();
    highlightWindow(currentWindowStart);
    updateStatus();
    updateButtons();
    prevBtn.disabled = true;
    nextBtn.disabled = arr.length <= windowSize;
  });

  prevBtn.addEventListener('click', () => {
    if (currentWindowStart > 0) {
      slideWindowTo(currentWindowStart - 1);
    }
  });

  nextBtn.addEventListener('click', () => {
    if (currentWindowStart + windowSize < arr.length) {
      slideWindowTo(currentWindowStart + 1);
    }
  });

  exampleBtns.forEach(button => {
    button.addEventListener('click', () => {
      arrayInput.value = button.dataset.array;
      windowInput.value = button.dataset.window;
      startBtn.click();
    });
  });

  // Initialize with first example
  exampleBtns[0].click();

})();
</script>

</body>
</html>