<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linear Search Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f9f9f9;
  }
  h1 {
    color: #333;
  }
  label, button {
    font-size: 1rem;
    margin-top: 0.5rem;
    display: block;
  }
  input[type="text"] {
    width: 100%;
    padding: 0.4rem;
    font-size: 1rem;
    margin-top: 0.25rem;
  }
  button {
    padding: 0.6rem 1rem;
    margin-top: 1rem;
    cursor: pointer;
    background-color: #005cbf;
    color: white;
    border: none;
    border-radius: 4px;
  }
  button:hover {
    background-color: #004999;
  }
  #result {
    margin-top: 1rem;
    font-weight: bold;
  }
  #array-display {
    margin-top: 0.5rem;
    font-family: monospace;
    background: #e2e2e2;
    padding: 0.5rem;
    border-radius: 5px;
  }
</style>
</head>
<body>
<h1>Linear Search Visualization</h1>

<label for="array-input">Enter array elements (comma separated):</label>
<input type="text" id="array-input" value="3,1,4,6,5,2,7" aria-describedby="array-help" />
<small id="array-help">Example: 3,1,4,6,5,2,7</small>

<label for="search-input">Enter value to search:</label>
<input type="text" id="search-input" />

<button id="search-btn">Perform Linear Search</button>

<div id="array-display" aria-live="polite"></div>
<div id="result" aria-live="polite"></div>

<script>
  const arrayInput = document.getElementById('array-input');
  const searchInput = document.getElementById('search-input');
  const searchBtn = document.getElementById('search-btn');
  const resultDiv = document.getElementById('result');
  const arrayDisplay = document.getElementById('array-display');

  function displayArray(arr, highlightIndex = -1) {
    arrayDisplay.innerHTML = arr
      .map((item, i) => {
        if (i === highlightIndex) {
          return `<mark style="background-color: #ffeb3b; padding: 0 0.2em;">${item}</mark>`;
        } else {
          return `${item}`;
        }
      }).join(', ');
  }

  function linearSearch(arr, target, callback) {
    for (let i = 0; i < arr.length; i++) {
      callback(i);
      if (arr[i] === target) {
        return i;
      }
    }
    return -1;
  }

  searchBtn.addEventListener('click', () => {
    const rawArray = arrayInput.value.trim();
    let arr = rawArray.split(',').map(s => s.trim()).filter(s => s !== '');
    if (arr.length === 0) {
      resultDiv.textContent = 'Please enter a valid array.';
      arrayDisplay.textContent = '';
      return;
    }

    // Try to convert to numbers if possible, else keep as strings
    arr = arr.map(item => {
      const n = Number(item);
      return isNaN(n) ? item : n;
    });

    let targetText = searchInput.value.trim();
    if (targetText === '') {
      resultDiv.textContent = 'Please enter a value to search.';
      arrayDisplay.textContent = '';
      return;
    }
    const targetNum = Number(targetText);
    const target = isNaN(targetNum) ? targetText : targetNum;

    resultDiv.textContent = '';
    arrayDisplay.textContent = '';

    let currentStep = 0;
    displayArray(arr);

    function stepSearch() {
      if (currentStep >= arr.length) {
        displayArray(arr, -1);
        resultDiv.textContent = `Value "${target}" not found in the array.`;
        searchBtn.disabled = false;
        return;
      }

      displayArray(arr, currentStep);
      if (arr[currentStep] === target) {
        resultDiv.textContent = `Value "${target}" found at index ${currentStep}.`;
        searchBtn.disabled = false;
        return;
      }

      currentStep++;
      setTimeout(stepSearch, 700);
    }

    searchBtn.disabled = true;
    stepSearch();
  });
</script>
</body>
</html>