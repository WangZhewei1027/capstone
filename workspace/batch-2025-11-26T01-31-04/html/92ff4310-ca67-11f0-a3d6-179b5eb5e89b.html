<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Recursion Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2em;
    background: #f0f4f8;
    color: #333;
  }
  h1 {
    color: #004a99;
  }
  input[type=number] {
    width: 80px;
    padding: 0.3em;
    font-size: 1.1em;
    margin-right: 1em;
  }
  button {
    padding: 0.4em 1em;
    font-size: 1em;
    cursor: pointer;
  }
  #result {
    margin-top: 1.5em;
    background: #e3f2fd;
    padding: 1em;
    border-radius: 6px;
    white-space: pre-wrap;
    font-family: "Courier New", Courier, monospace;
    max-width: 600px;
  }
</style>
</head>
<body>
<h1>Recursion Demonstration</h1>
<p>Enter a number to compute its factorial using recursion.</p>

<label for="numInput">Number (0 - 15): </label>
<input type="number" id="numInput" value="5" min="0" max="15" />
<button id="calcBtn">Calculate Factorial</button>

<div id="result"></div>

<script>
// Recursive factorial function with trace for demonstration
function factorial(n, depth=0) {
  const indent = "  ".repeat(depth);
  if (n === 0 || n === 1) {
    appendTrace(`${indent}factorial(${n}) = 1 (base case)`);
    return 1;
  } else {
    appendTrace(`${indent}factorial(${n}) = ${n} * factorial(${n-1})`);
    const result = n * factorial(n - 1, depth + 1);
    appendTrace(`${indent}Return ${result} for factorial(${n})`);
    return result;
  }
}

// Append message to the result div with indentation
function appendTrace(message) {
  const traceElement = document.getElementById('result');
  traceElement.textContent += message + '\n';
}

document.getElementById('calcBtn').addEventListener('click', () => {
  const input = document.getElementById('numInput');
  const val = Number(input.value);
  const resultElement = document.getElementById('result');

  // Clear previous results
  resultElement.textContent = '';

  if (!Number.isInteger(val) || val < 0 || val > 15) {
    resultElement.textContent = "Please enter an integer between 0 and 15 to prevent long calculations.";
    return;
  }

  appendTrace(`Calculating factorial(${val}) using recursion:\n`);
  const fact = factorial(val);
  appendTrace(`\nResult: factorial(${val}) = ${fact}`);
});
</script>
</body>
</html>