{
  "meta": {
    "concept": "Counting Sort Visualizer",
    "topic": "Sorting Algorithms",
    "educational_goal": "To visualize and interactively demonstrate the Counting Sort algorithm.",
    "expected_interactions": [
      "Set Array",
      "Random",
      "Play",
      "Pause",
      "Step Forward",
      "Step Backward",
      "Reset"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "stepTitle.textContent = 'Idle';",
        "stepDetail.textContent = 'No steps yet. Configure array and press Play.';"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Initialized",
      "label": "Initialized",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "phase:'init'"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Counting",
      "label": "Counting",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "phase:'counting'"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Cumulative",
      "label": "Cumulative",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "phase:'cumulative'"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Placing",
      "label": "Placing",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "phase:'placing'"
      ],
      "confidence": 1
    },
    {
      "id": "S5_PlacingLoop",
      "label": "Placing Loop",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "phase:'placing-loop'"
      ],
      "confidence": 1
    },
    {
      "id": "S6_Done",
      "label": "Done",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "phase:'done'"
      ],
      "confidence": 1
    },
    {
      "id": "S7_Error",
      "label": "Error",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "phase:'error'"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "SetArray",
      "event_type": "click",
      "description": "Set the input array based on user input.",
      "trigger_selectors": [
        "#setArr"
      ],
      "evidence": [
        "setArrBtn.addEventListener('click', ...);"
      ],
      "confidence": 1
    },
    {
      "id": "RandomArray",
      "event_type": "click",
      "description": "Generate a random input array.",
      "trigger_selectors": [
        "#randArr"
      ],
      "evidence": [
        "randArrBtn.addEventListener('click', ...);"
      ],
      "confidence": 1
    },
    {
      "id": "Play",
      "event_type": "click",
      "description": "Start the visualization of the sorting process.",
      "trigger_selectors": [
        "#playBtn"
      ],
      "evidence": [
        "playBtn.addEventListener('click', ...);"
      ],
      "confidence": 1
    },
    {
      "id": "Pause",
      "event_type": "click",
      "description": "Pause the visualization.",
      "trigger_selectors": [
        "#pauseBtn"
      ],
      "evidence": [
        "pauseBtn.addEventListener('click', ...);"
      ],
      "confidence": 1
    },
    {
      "id": "StepForward",
      "event_type": "click",
      "description": "Step forward in the visualization.",
      "trigger_selectors": [
        "#stepF"
      ],
      "evidence": [
        "stepF.addEventListener('click', stepForward);"
      ],
      "confidence": 1
    },
    {
      "id": "StepBackward",
      "event_type": "click",
      "description": "Step backward in the visualization.",
      "trigger_selectors": [
        "#stepB"
      ],
      "evidence": [
        "stepB.addEventListener('click', stepBackward);"
      ],
      "confidence": 1
    },
    {
      "id": "Reset",
      "event_type": "click",
      "description": "Reset the visualization and clear the input.",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ...);"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeMaxValue",
      "event_type": "change",
      "description": "Change the maximum value for the input array.",
      "trigger_selectors": [
        "#maxVal"
      ],
      "evidence": [
        "maxValInput.addEventListener('change', ...);"
      ],
      "confidence": 1
    },
    {
      "id": "ToggleStable",
      "event_type": "change",
      "description": "Toggle the stable sorting option.",
      "trigger_selectors": [
        "#stableChk"
      ],
      "evidence": [
        "stableChk.addEventListener('change', ...);"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeSpeed",
      "event_type": "input",
      "description": "Change the speed of the visualization.",
      "trigger_selectors": [
        "#speed"
      ],
      "evidence": [
        "speedInput.addEventListener('input', ...);"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Initialized",
      "event": "SetArray",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snapshots = buildSnapshots(A,k,stableChk.checked);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_Initialized",
      "event": "RandomArray",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snapshots = buildSnapshots(A,maxk,stableChk.checked);"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Initialized",
      "to": "S2_Counting",
      "event": "Play",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "play();"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Counting",
      "to": "S2_Counting",
      "event": "StepForward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "current++; renderArraysFromSnapshot(snapshots[current]);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Counting",
      "to": "S3_Cumulative",
      "event": "StepForward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snaps.push({ phase:'cumulative', ... });"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Cumulative",
      "to": "S4_Placing",
      "event": "StepForward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snaps.push({ phase:'placing', ... });"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Placing",
      "to": "S5_PlacingLoop",
      "event": "StepForward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snaps.push({ phase:'placing-loop', ... });"
      ],
      "confidence": 1
    },
    {
      "from": "S5_PlacingLoop",
      "to": "S4_Placing",
      "event": "StepForward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snaps.push({ phase:'placing', ... });"
      ],
      "confidence": 1
    },
    {
      "from": "S5_PlacingLoop",
      "to": "S6_Done",
      "event": "StepForward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snaps.push({ phase:'done', ... });"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Initialized",
      "to": "S7_Error",
      "event": "SetArray",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "snaps.push({ phase:'error', ... });"
      ],
      "confidence": 1
    },
    {
      "from": "S6_Done",
      "to": "S0_Idle",
      "event": "Reset",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "A = []; arrayInput.value = ''; snapshots = [];"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#arrayInput",
      "text": "Array (comma-separated integers)",
      "attributes": {
        "type": "text",
        "placeholder": "e.g. 3,6,4,1,3,4,1,4"
      },
      "evidence": [
        "<input id=\"arrayInput\" type=\"text\" placeholder=\"e.g. 3,6,4,1,3,4,1,4\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#setArr",
      "text": "Set Array",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"setArr\" class=\"small\">Set Array</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randArr",
      "text": "Random",
      "attributes": {
        "class": "small secondary"
      },
      "evidence": [
        "<button id=\"randArr\" class=\"small secondary\">Random</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#maxVal",
      "text": "Max value (domain 0..k)",
      "attributes": {
        "type": "number",
        "min": "0",
        "max": "200",
        "value": "6"
      },
      "evidence": [
        "<input id=\"maxVal\" type=\"number\" min=\"0\" max=\"200\" value=\"6\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#playBtn",
      "text": "Play",
      "attributes": {},
      "evidence": [
        "<button id=\"playBtn\">Play</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#pauseBtn",
      "text": "Pause",
      "attributes": {
        "class": "small secondary"
      },
      "evidence": [
        "<button id=\"pauseBtn\" class=\"small secondary\">Pause</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepF",
      "text": "Step →",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"stepF\" class=\"small\">Step →</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepB",
      "text": "← Back",
      "attributes": {
        "class": "small secondary"
      },
      "evidence": [
        "<button id=\"stepB\" class=\"small secondary\">← Back</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset",
      "attributes": {
        "class": "small danger"
      },
      "evidence": [
        "<button id=\"resetBtn\" class=\"small danger\">Reset</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "Speed",
      "attributes": {
        "type": "range",
        "min": "50",
        "max": "1200",
        "step": "50",
        "value": "500"
      },
      "evidence": [
        "<input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" step=\"50\" value=\"500\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#stableChk",
      "text": "Stable",
      "attributes": {
        "type": "checkbox",
        "checked": ""
      },
      "evidence": [
        "<input id=\"stableChk\" type=\"checkbox\" checked/>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 10,
    "detected_components": [
      {
        "type": "input",
        "selector": "#arrayInput"
      },
      {
        "type": "button",
        "selector": "#setArr"
      },
      {
        "type": "button",
        "selector": "#randArr"
      },
      {
        "type": "input",
        "selector": "#maxVal"
      },
      {
        "type": "button",
        "selector": "#playBtn"
      },
      {
        "type": "button",
        "selector": "#pauseBtn"
      },
      {
        "type": "button",
        "selector": "#stepF"
      },
      {
        "type": "button",
        "selector": "#stepB"
      },
      {
        "type": "button",
        "selector": "#resetBtn"
      },
      {
        "type": "input",
        "selector": "#speed"
      },
      {
        "type": "input",
        "selector": "#stableChk"
      }
    ],
    "detected_event_handlers_count": 9,
    "detected_event_handlers": [
      "setArrBtn.addEventListener('click', ...);",
      "randArrBtn.addEventListener('click', ...);",
      "playBtn.addEventListener('click', ...);",
      "pauseBtn.addEventListener('click', ...);",
      "stepF.addEventListener('click', stepForward);",
      "stepB.addEventListener('click', stepBackward);",
      "resetBtn.addEventListener('click', ...);",
      "maxValInput.addEventListener('change', ...);",
      "stableChk.addEventListener('change', ...);"
    ],
    "extracted_states_count": 8,
    "extracted_transitions_count": 10,
    "extraction_confidence": 1,
    "notes": []
  }
}