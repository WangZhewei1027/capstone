{
  "meta": {
    "concept": "Interactive Hash Table Demo",
    "topic": "Hash Table",
    "educational_goal": "Explore hashing with separate chaining and open addressing (linear/quadratic). Insert, search, delete and watch collisions/probes.",
    "expected_interactions": [
      "Insert",
      "Search",
      "Delete",
      "Change Table Size",
      "Change Collision Strategy",
      "Reset Table",
      "Fill Randomly"
    ]
  },
  "states": [
    {
      "id": "S0_Ready",
      "label": "Ready",
      "type": "normal",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--muted)\">Ready. Try inserting keys like \"a\", \"k\", \"u\" to create collisions on small tables.</span>';"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Insert",
      "label": "Inserting",
      "type": "normal",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--good)\">Inserted \"'+key+'\" at index '+res.index+' after '+res.probes+' probes.</span>';"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Search",
      "label": "Searching",
      "type": "normal",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--good)\">Found \"'+key+'\" at index '+res.index+' after '+res.probes+' probes. Value: '+res.node.value+'</span>';"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Delete",
      "label": "Deleting",
      "type": "normal",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--good)\">Deleted \"'+key+'\" from bucket '+res.index+'.</span>';"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Table_Full",
      "label": "Table Full",
      "type": "normal",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--bad)\">Table full — could not insert.</span>';"
      ],
      "confidence": 1
    },
    {
      "id": "S5_Not_Found",
      "label": "Not Found",
      "type": "normal",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--muted)\">Not found after '+res.probes+' probes.</span>';"
      ],
      "confidence": 1
    },
    {
      "id": "S6_Reset",
      "label": "Resetting",
      "type": "normal",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--muted)\">Table reset.</span>';"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "Insert",
      "event_type": "click",
      "description": "Inserts a key-value pair into the hash table.",
      "trigger_selectors": [
        "#insertBtn"
      ],
      "evidence": [
        "insertBtn.addEventListener('click', ()=>{",
        "const res = table.insert(key, value);"
      ],
      "confidence": 1
    },
    {
      "id": "Search",
      "event_type": "click",
      "description": "Searches for a key in the hash table.",
      "trigger_selectors": [
        "#searchBtn"
      ],
      "evidence": [
        "searchBtn.addEventListener('click', ()=>{",
        "const res = table.search(key);"
      ],
      "confidence": 1
    },
    {
      "id": "Delete",
      "event_type": "click",
      "description": "Deletes a key from the hash table.",
      "trigger_selectors": [
        "#deleteBtn"
      ],
      "evidence": [
        "deleteBtn.addEventListener('click', ()=>{",
        "const res = table.delete(key);"
      ],
      "confidence": 1
    },
    {
      "id": "Reset",
      "event_type": "click",
      "description": "Resets the hash table.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', ()=>{",
        "table.clear();"
      ],
      "confidence": 1
    },
    {
      "id": "FillRandomly",
      "event_type": "click",
      "description": "Fills the hash table with random items.",
      "trigger_selectors": [
        "#fillBtn"
      ],
      "evidence": [
        "fillBtn.addEventListener('click', ()=>{",
        "table.clear();"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeTableSize",
      "event_type": "change",
      "description": "Changes the size of the hash table.",
      "trigger_selectors": [
        "#sizeRange"
      ],
      "evidence": [
        "sizeRange.addEventListener('change', ()=>{",
        "tableSize = Number(sizeRange.value);"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeCollisionStrategy",
      "event_type": "change",
      "description": "Changes the collision strategy of the hash table.",
      "trigger_selectors": [
        "#strategy"
      ],
      "evidence": [
        "strategyEl.addEventListener('change', ()=>{",
        "mode = strategyEl.value;"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Ready",
      "to": "S1_Insert",
      "event": "Insert",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Inserted' or 'Updated'"
      ],
      "evidence": [
        "if (mode === 'chaining'){",
        "const res = table.insert(key, value);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Ready",
      "to": "S2_Search",
      "event": "Search",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Found' or 'Not found'"
      ],
      "evidence": [
        "const res = table.search(key);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Ready",
      "to": "S3_Delete",
      "event": "Delete",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Deleted' or 'Key not found'"
      ],
      "evidence": [
        "const res = table.delete(key);"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Insert",
      "to": "S4_Table_Full",
      "event": "Insert",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Table full'"
      ],
      "evidence": [
        "if (!res.placed){",
        "status.innerHTML = '<span style=\"color:var(--bad)\">Table full — could not insert.</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Search",
      "to": "S5_Not_Found",
      "event": "Search",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Not found'"
      ],
      "evidence": [
        "if (!res.found){",
        "status.innerHTML = '<span style=\"color:var(--muted)\">Not found after '+res.probes+' probes.</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Delete",
      "to": "S5_Not_Found",
      "event": "Delete",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Key not found'"
      ],
      "evidence": [
        "if (!res.removed){",
        "status.innerHTML = '<span style=\"color:var(--muted)\">Key not found in bucket '+res.index+'.</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Insert",
      "to": "S0_Ready",
      "event": "Insert",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Inserted' or 'Updated'"
      ],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--good)\">Inserted \"'+key+'\" at index '+res.index+' after '+res.probes+' probes.</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Search",
      "to": "S0_Ready",
      "event": "Search",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Found' or 'Not found'"
      ],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--good)\">Found \"'+key+'\" at index '+res.index+' after '+res.probes+' probes. Value: '+res.node.value+'</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Delete",
      "to": "S0_Ready",
      "event": "Delete",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Deleted'"
      ],
      "evidence": [
        "status.innerHTML = '<span style=\"color:var(--good)\">Deleted \"'+key+'\" from bucket '+res.index+'.</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Ready",
      "to": "S6_Reset",
      "event": "Reset",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Table reset'"
      ],
      "evidence": [
        "table.clear();",
        "status.innerHTML = '<span style=\"color:var(--muted)\">Table reset.</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Ready",
      "to": "S0_Ready",
      "event": "ChangeTableSize",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Table size changed'"
      ],
      "evidence": [
        "tableSize = Number(sizeRange.value);",
        "status.innerHTML = '<span style=\"color:var(--muted)\">Table size changed to '+tableSize+'.</span>';"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Ready",
      "to": "S0_Ready",
      "event": "ChangeCollisionStrategy",
      "actions": [],
      "expected_observables": [
        "status.innerHTML contains 'Switched strategy'"
      ],
      "evidence": [
        "mode = strategyEl.value;",
        "status.innerHTML = '<span style=\"color:var(--muted)\">Switched strategy to '+(mode==='chaining'?'Separate Chaining':(mode==='linear'?'Linear Probing':'Quadratic Probing'))+'</span>';"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#sizeRange",
      "text": "Table size",
      "attributes": {
        "type": "range",
        "min": "5",
        "max": "41",
        "step": "1",
        "value": "11"
      },
      "evidence": [
        "<input id=\"sizeRange\" type=\"range\" min=\"5\" max=\"41\" step=\"1\" value=\"11\">"
      ]
    },
    {
      "type": "select",
      "selector": "#strategy",
      "text": "Collision strategy",
      "attributes": {},
      "evidence": [
        "<select id=\"strategy\">"
      ]
    },
    {
      "type": "input",
      "selector": "#keyInput",
      "text": "Key (string or number)",
      "attributes": {
        "type": "text",
        "placeholder": "e.g. apple or 42"
      },
      "evidence": [
        "<input id=\"keyInput\" type=\"text\" placeholder=\"e.g. apple or 42\">"
      ]
    },
    {
      "type": "input",
      "selector": "#valueInput",
      "text": "Value (optional)",
      "attributes": {
        "type": "text",
        "placeholder": "any data"
      },
      "evidence": [
        "<input id=\"valueInput\" type=\"text\" placeholder=\"any data\">"
      ]
    },
    {
      "type": "button",
      "selector": "#insertBtn",
      "text": "Insert",
      "attributes": {},
      "evidence": [
        "<button id=\"insertBtn\">Insert</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#searchBtn",
      "text": "Search",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"searchBtn\" class=\"secondary\">Search</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#deleteBtn",
      "text": "Delete",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"deleteBtn\" class=\"secondary\">Delete</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#fillBtn",
      "text": "Fill Randomly",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"fillBtn\" class=\"secondary\">Fill Randomly</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Reset",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"secondary\">Reset</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#prevStep",
      "text": "◀ Prev Probe",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"prevStep\" class=\"secondary\">◀ Prev Probe</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#nextStep",
      "text": "Next Probe ▶",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"nextStep\" class=\"secondary\">Next Probe ▶</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepToggle",
      "text": "Step Mode: Off",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"stepToggle\" class=\"secondary\">Step Mode: Off</button>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 10,
    "detected_components": [
      {
        "type": "input",
        "selector": "#sizeRange"
      },
      {
        "type": "select",
        "selector": "#strategy"
      },
      {
        "type": "input",
        "selector": "#keyInput"
      },
      {
        "type": "input",
        "selector": "#valueInput"
      },
      {
        "type": "button",
        "selector": "#insertBtn"
      },
      {
        "type": "button",
        "selector": "#searchBtn"
      },
      {
        "type": "button",
        "selector": "#deleteBtn"
      },
      {
        "type": "button",
        "selector": "#fillBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#prevStep"
      },
      {
        "type": "button",
        "selector": "#nextStep"
      },
      {
        "type": "button",
        "selector": "#stepToggle"
      }
    ],
    "detected_event_handlers_count": 7,
    "detected_event_handlers": [
      "insertBtn.addEventListener('click', ()=>{",
      "searchBtn.addEventListener('click', ()=>{",
      "deleteBtn.addEventListener('click', ()=>{",
      "clearBtn.addEventListener('click', ()=>{",
      "fillBtn.addEventListener('click', ()=>{",
      "sizeRange.addEventListener('change', ()=>{",
      "strategyEl.addEventListener('change', ()=>{"
    ],
    "extracted_states_count": 7,
    "extracted_transitions_count": 12,
    "extraction_confidence": 1,
    "notes": []
  }
}