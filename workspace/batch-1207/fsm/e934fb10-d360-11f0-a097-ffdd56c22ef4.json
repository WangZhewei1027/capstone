{
  "meta": {
    "concept": "Interactive Linear Regression Demo",
    "topic": "Linear Regression",
    "educational_goal": "To demonstrate linear regression concepts interactively.",
    "expected_interactions": [
      "Add points",
      "Remove points",
      "Run Gradient Descent",
      "Generate random points",
      "Clear points"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "document.getElementById('count').textContent = points.length;"
      ],
      "confidence": 1
    },
    {
      "id": "S1_PointAdded",
      "label": "Point Added",
      "type": "default",
      "entry_actions": [
        "updateAfterChange()"
      ],
      "exit_actions": [],
      "evidence": [
        "points.push({ x: d.x, y: d.y });"
      ],
      "confidence": 1
    },
    {
      "id": "S2_PointDragged",
      "label": "Point Dragged",
      "type": "default",
      "entry_actions": [
        "updateAfterChange(false)"
      ],
      "exit_actions": [],
      "evidence": [
        "dragging = hit.p;"
      ],
      "confidence": 1
    },
    {
      "id": "S3_PointRemoved",
      "label": "Point Removed",
      "type": "default",
      "entry_actions": [
        "updateAfterChange()"
      ],
      "exit_actions": [],
      "evidence": [
        "points.splice(i, 1);"
      ],
      "confidence": 1
    },
    {
      "id": "S4_GDRunning",
      "label": "Gradient Descent Running",
      "type": "default",
      "entry_actions": [
        "runGD(iters, lr, () => { updateAfterChange(false); });"
      ],
      "exit_actions": [],
      "evidence": [
        "gdRunning = true;"
      ],
      "confidence": 1
    },
    {
      "id": "S5_GDStopped",
      "label": "Gradient Descent Stopped",
      "type": "default",
      "entry_actions": [
        "stopGD(); updateAfterChange();"
      ],
      "exit_actions": [],
      "evidence": [
        "gdRunning = false;"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "POINT_ADD",
      "event_type": "pointerdown",
      "description": "User clicks to add a point.",
      "trigger_selectors": [
        "canvas#chart"
      ],
      "evidence": [
        "canvas.addEventListener('pointerdown', (ev) => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "POINT_DRAG",
      "event_type": "pointermove",
      "description": "User drags a point.",
      "trigger_selectors": [
        "canvas#chart"
      ],
      "evidence": [
        "canvas.addEventListener('pointermove', (ev) => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "POINT_REMOVE",
      "event_type": "pointerdown",
      "description": "User double-clicks to remove a point.",
      "trigger_selectors": [
        "canvas#chart"
      ],
      "evidence": [
        "if (now - lastClickTime < 330) {...}"
      ],
      "confidence": 1
    },
    {
      "id": "RUN_GD",
      "event_type": "click",
      "description": "User clicks to run Gradient Descent.",
      "trigger_selectors": [
        "button#run-gd"
      ],
      "evidence": [
        "document.getElementById('run-gd').addEventListener('click', async () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "STOP_GD",
      "event_type": "click",
      "description": "User clicks to stop Gradient Descent.",
      "trigger_selectors": [
        "button#stop-gd"
      ],
      "evidence": [
        "document.getElementById('stop-gd').addEventListener('click', () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "CLEAR_POINTS",
      "event_type": "click",
      "description": "User clicks to clear all points.",
      "trigger_selectors": [
        "button#btn-reset"
      ],
      "evidence": [
        "document.getElementById('btn-reset').addEventListener('click', () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "GENERATE_RANDOM_POINTS",
      "event_type": "click",
      "description": "User clicks to generate random points.",
      "trigger_selectors": [
        "button#btn-gen"
      ],
      "evidence": [
        "document.getElementById('btn-gen').addEventListener('click', () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "ADD_POINTS_ON_LINE",
      "event_type": "click",
      "description": "User clicks to add points on a line.",
      "trigger_selectors": [
        "button#btn-add-slope"
      ],
      "evidence": [
        "document.getElementById('btn-add-slope').addEventListener('click', () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "ADD_ONE_RANDOM_POINT",
      "event_type": "click",
      "description": "User clicks to add one random point.",
      "trigger_selectors": [
        "button#btn-random"
      ],
      "evidence": [
        "document.getElementById('btn-random').addEventListener('click', addRandomPoint);"
      ],
      "confidence": 1
    },
    {
      "id": "CENTER_POINTS",
      "event_type": "click",
      "description": "User clicks to center points.",
      "trigger_selectors": [
        "button#btn-center"
      ],
      "evidence": [
        "document.getElementById('btn-center').addEventListener('click', () => {...});"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_PointAdded",
      "event": "POINT_ADD",
      "actions": [
        "updateAfterChange()"
      ],
      "expected_observables": [
        "points.length increases"
      ],
      "evidence": [
        "points.push({ x: d.x, y: d.y });"
      ],
      "confidence": 1
    },
    {
      "from": "S1_PointAdded",
      "to": "S2_PointDragged",
      "event": "POINT_DRAG",
      "actions": [
        "updateAfterChange(false)"
      ],
      "expected_observables": [
        "point position updates"
      ],
      "evidence": [
        "dragging = hit.p;"
      ],
      "confidence": 1
    },
    {
      "from": "S2_PointDragged",
      "to": "S3_PointRemoved",
      "event": "POINT_REMOVE",
      "actions": [
        "updateAfterChange()"
      ],
      "expected_observables": [
        "points.length decreases"
      ],
      "evidence": [
        "points.splice(i, 1);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_GDRunning",
      "event": "RUN_GD",
      "actions": [
        "runGD(iters, lr, () => { updateAfterChange(false); });"
      ],
      "expected_observables": [
        "GD process starts"
      ],
      "evidence": [
        "gdRunning = true;"
      ],
      "confidence": 1
    },
    {
      "from": "S4_GDRunning",
      "to": "S5_GDStopped",
      "event": "STOP_GD",
      "actions": [
        "stopGD(); updateAfterChange();"
      ],
      "expected_observables": [
        "GD process stops"
      ],
      "evidence": [
        "gdRunning = false;"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S0_Idle",
      "event": "CLEAR_POINTS",
      "actions": [
        "updateAfterChange()"
      ],
      "expected_observables": [
        "points.length resets to 0"
      ],
      "evidence": [
        "points = [];"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_PointAdded",
      "event": "GENERATE_RANDOM_POINTS",
      "actions": [
        "updateAfterChange()"
      ],
      "expected_observables": [
        "points.length increases"
      ],
      "evidence": [
        "for (let i=0;i<n;i++) addRandomPoint();"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_PointAdded",
      "event": "ADD_POINTS_ON_LINE",
      "actions": [
        "updateAfterChange()"
      ],
      "expected_observables": [
        "points.length increases"
      ],
      "evidence": [
        "for (let i=0;i<8;i++) {...}"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_PointAdded",
      "event": "ADD_ONE_RANDOM_POINT",
      "actions": [
        "updateAfterChange()"
      ],
      "expected_observables": [
        "points.length increases by 1"
      ],
      "evidence": [
        "points.push({x,y});"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_PointRemoved",
      "event": "CENTER_POINTS",
      "actions": [
        "updateAfterChange()"
      ],
      "expected_observables": [
        "points repositioned"
      ],
      "evidence": [
        "for (let p of points) {...}"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "button#btn-ols",
      "text": "Analytic (OLS)",
      "attributes": {},
      "evidence": [
        "<button id=\"btn-ols\" class=\"small-btn\">Analytic (OLS)</button>"
      ]
    },
    {
      "type": "button",
      "selector": "button#btn-gd",
      "text": "Gradient Descent",
      "attributes": {},
      "evidence": [
        "<button id=\"btn-gd\" class=\"small-btn\">Gradient Descent</button>"
      ]
    },
    {
      "type": "button",
      "selector": "button#btn-reset",
      "text": "Clear",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"btn-reset\" class=\"ghost\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "button#btn-gen",
      "text": "Generate",
      "attributes": {},
      "evidence": [
        "<button id=\"btn-gen\" class=\"small-btn\">Generate</button>"
      ]
    },
    {
      "type": "button",
      "selector": "button#btn-gen-noise",
      "text": "From underlying line",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"btn-gen-noise\" class=\"ghost\">From underlying line</button>"
      ]
    },
    {
      "type": "button",
      "selector": "button#btn-add-slope",
      "text": "Add points on a line",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"btn-add-slope\" class=\"ghost\">Add points on a line</button>"
      ]
    },
    {
      "type": "button",
      "selector": "button#btn-random",
      "text": "Add one random point",
      "attributes": {},
      "evidence": [
        "<button id=\"btn-random\" class=\"small-btn\">Add one random point</button>"
      ]
    },
    {
      "type": "button",
      "selector": "button#btn-center",
      "text": "Center points",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"btn-center\" class=\"ghost\">Center points</button>"
      ]
    },
    {
      "type": "input",
      "selector": "input#randN",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "1",
        "max": "200",
        "value": "10"
      },
      "evidence": [
        "<input id=\"randN\" type=\"number\" min=\"1\" max=\"200\" value=\"10\">"
      ]
    },
    {
      "type": "input",
      "selector": "input#noise",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "0",
        "max": "30",
        "value": "8"
      },
      "evidence": [
        "<input id=\"noise\" type=\"range\" min=\"0\" max=\"30\" value=\"8\">"
      ]
    },
    {
      "type": "input",
      "selector": "input#lr",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "0.0005",
        "max": "1",
        "step": "0.0005",
        "value": "0.01"
      },
      "evidence": [
        "<input id=\"lr\" type=\"range\" min=\"0.0005\" max=\"1\" step=\"0.0005\" value=\"0.01\">"
      ]
    },
    {
      "type": "input",
      "selector": "input#iters",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "1",
        "max": "100000",
        "value": "200"
      },
      "evidence": [
        "<input id=\"iters\" type=\"number\" min=\"1\" max=\"100000\" value=\"200\">"
      ]
    },
    {
      "type": "canvas",
      "selector": "canvas#chart",
      "text": "",
      "attributes": {},
      "evidence": [
        "<canvas id=\"chart\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-01T00:00:00Z",
    "detected_components_count": 15,
    "detected_components": [
      {
        "type": "button",
        "selector": "button#btn-ols"
      },
      {
        "type": "button",
        "selector": "button#btn-gd"
      },
      {
        "type": "button",
        "selector": "button#btn-reset"
      },
      {
        "type": "button",
        "selector": "button#btn-gen"
      },
      {
        "type": "button",
        "selector": "button#btn-gen-noise"
      },
      {
        "type": "button",
        "selector": "button#btn-add-slope"
      },
      {
        "type": "button",
        "selector": "button#btn-random"
      },
      {
        "type": "button",
        "selector": "button#btn-center"
      },
      {
        "type": "input",
        "selector": "input#randN"
      },
      {
        "type": "input",
        "selector": "input#noise"
      },
      {
        "type": "input",
        "selector": "input#lr"
      },
      {
        "type": "input",
        "selector": "input#iters"
      },
      {
        "type": "canvas",
        "selector": "canvas#chart"
      }
    ],
    "detected_event_handlers_count": 12,
    "detected_event_handlers": [
      "canvas.addEventListener('pointerdown', (ev) => {...});",
      "canvas.addEventListener('pointermove', (ev) => {...});",
      "canvas.addEventListener('pointerup', (ev) => {...});",
      "document.getElementById('btn-ols').addEventListener('click', () => {...});",
      "document.getElementById('btn-gd').addEventListener('click', () => {...});",
      "document.getElementById('btn-reset').addEventListener('click', () => {...});",
      "document.getElementById('btn-gen').addEventListener('click', () => {...});",
      "document.getElementById('btn-gen-noise').addEventListener('click', () => {...});",
      "document.getElementById('btn-random').addEventListener('click', addRandomPoint);",
      "document.getElementById('btn-add-slope').addEventListener('click', () => {...});",
      "document.getElementById('btn-center').addEventListener('click', () => {...});",
      "document.getElementById('run-gd').addEventListener('click', async () => {...});"
    ],
    "extracted_states_count": 6,
    "extracted_transitions_count": 10,
    "extraction_confidence": 1,
    "notes": []
  }
}