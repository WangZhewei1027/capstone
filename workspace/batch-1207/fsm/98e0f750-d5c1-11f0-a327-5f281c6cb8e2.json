{
  "meta": {
    "concept": "Hash Map Interactive Demo",
    "topic": "Hash Map",
    "educational_goal": "Understand how hash maps work through interactive demonstration.",
    "expected_interactions": [
      "Insert key-value pairs",
      "Retrieve values by key",
      "Delete key-value pairs",
      "Clear the hash map",
      "Change hash function",
      "Log activities"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderBuckets()",
        "updateStats()"
      ],
      "exit_actions": [],
      "evidence": [
        "log('Demo ready. Try inserting keys and toggling hash function.')"
      ],
      "confidence": 1
    },
    {
      "id": "S1_KeyInserted",
      "label": "Key Inserted",
      "type": "default",
      "entry_actions": [
        "renderBuckets()"
      ],
      "exit_actions": [],
      "evidence": [
        "log(`Inserted key=\"${res.key}\" at index ${res.index}`)"
      ],
      "confidence": 1
    },
    {
      "id": "S2_KeyReplaced",
      "label": "Key Replaced",
      "type": "default",
      "entry_actions": [
        "renderBuckets()"
      ],
      "exit_actions": [],
      "evidence": [
        "log(`Replaced key=\"${res.key}\" at index ${res.index}`)"
      ],
      "confidence": 1
    },
    {
      "id": "S3_KeyDeleted",
      "label": "Key Deleted",
      "type": "default",
      "entry_actions": [
        "renderBuckets()"
      ],
      "exit_actions": [],
      "evidence": [
        "log(`Deleted key=\"${k}\" from index ${res.index}`)"
      ],
      "confidence": 1
    },
    {
      "id": "S4_KeyNotFound",
      "label": "Key Not Found",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "log(`Get key=\"${k}\" -> not found (would go to index ${res.index})`)"
      ],
      "confidence": 1
    },
    {
      "id": "S5_MapCleared",
      "label": "Map Cleared",
      "type": "default",
      "entry_actions": [
        "renderBuckets()"
      ],
      "exit_actions": [],
      "evidence": [
        "log('Cleared map')"
      ],
      "confidence": 1
    },
    {
      "id": "S6_HashFunctionChanged",
      "label": "Hash Function Changed",
      "type": "default",
      "entry_actions": [
        "renderBuckets()"
      ],
      "exit_actions": [],
      "evidence": [
        "log('Hash function changed to: ' + v + ' and rehashed entries')"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "Put",
      "event_type": "click",
      "description": "Inserts a key-value pair into the hash map.",
      "trigger_selectors": [
        "#putBtn"
      ],
      "evidence": [
        "putBtn.addEventListener('click', ()=>{",
        "if(k === '') { flashStatus('Enter a key', 'danger'); return; }"
      ],
      "confidence": 1
    },
    {
      "id": "Get",
      "event_type": "click",
      "description": "Retrieves a value by key from the hash map.",
      "trigger_selectors": [
        "#getBtn"
      ],
      "evidence": [
        "getBtn.addEventListener('click', ()=>{",
        "if(k === '') { flashStatus('Enter a key', 'danger'); return; }"
      ],
      "confidence": 1
    },
    {
      "id": "Delete",
      "event_type": "click",
      "description": "Deletes a key-value pair from the hash map.",
      "trigger_selectors": [
        "#delBtn"
      ],
      "evidence": [
        "delBtn.addEventListener('click', ()=>{",
        "if(k === '') { flashStatus('Enter a key', 'danger'); return; }"
      ],
      "confidence": 1
    },
    {
      "id": "Clear",
      "event_type": "click",
      "description": "Clears all entries from the hash map.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', ()=>{",
        "map.clear();"
      ],
      "confidence": 1
    },
    {
      "id": "RandomKeyValue",
      "event_type": "click",
      "description": "Generates a random key-value pair.",
      "trigger_selectors": [
        "#randBtn"
      ],
      "evidence": [
        "randBtn.addEventListener('click', ()=>{",
        "const k = sampleKeys[Math.floor(Math.random()*sampleKeys.length)] + '-' + Math.floor(Math.random()*999);"
      ],
      "confidence": 1
    },
    {
      "id": "BulkInsert",
      "event_type": "click",
      "description": "Inserts a sample set of key-value pairs.",
      "trigger_selectors": [
        "#bulkBtn"
      ],
      "evidence": [
        "bulkBtn.addEventListener('click', ()=>{",
        "const demo = [\"apple\",\"banana\",\"orange\",\"pear\",\"grape\",\"cherry\",\"mango\",\"lemon\",\"lime\",\"kiwi\",\"melon\",\"berry\",\"apricot\"];"
      ],
      "confidence": 1
    },
    {
      "id": "ClearLog",
      "event_type": "click",
      "description": "Clears the activity log.",
      "trigger_selectors": [
        "#clearLog"
      ],
      "evidence": [
        "clearLogBtn.addEventListener('click', ()=>{",
        "logEl.innerHTML = '';"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeHashFunction",
      "event_type": "change",
      "description": "Changes the hash function used by the hash map.",
      "trigger_selectors": [
        "#hashSelect"
      ],
      "evidence": [
        "hashSelect.addEventListener('change', ()=>{",
        "const v = hashSelect.value;"
      ],
      "confidence": 1
    },
    {
      "id": "ClickBucketEntry",
      "event_type": "click",
      "description": "Deletes an entry when clicked.",
      "trigger_selectors": [
        "#bucketsContainer .entry"
      ],
      "evidence": [
        "e.addEventListener('click', (ev)=>{",
        "const res = map.delete(k);"
      ],
      "confidence": 1
    },
    {
      "id": "HoverBucketEntry",
      "event_type": "mouseenter",
      "description": "Displays information about the entry on hover.",
      "trigger_selectors": [
        "#bucketsContainer .entry"
      ],
      "evidence": [
        "e.addEventListener('mouseenter', ()=>{",
        "selectedInfo.textContent = `key=\"${k}\", value=\"${v}\", hash=${h >>> 0}, index=${h % map._capacity}`;"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_KeyInserted",
      "event": "Put",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log(`Inserted key=\"${res.key}\" at index ${res.index}`)"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_KeyNotFound",
      "event": "Get",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log(`Get key=\"${k}\" -> not found (would go to index ${res.index})`)"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_KeyDeleted",
      "event": "Delete",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log(`Deleted key=\"${k}\" from index ${res.index}`)"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S5_MapCleared",
      "event": "Clear",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log('Cleared map')"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_KeyInserted",
      "event": "RandomKeyValue",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "const k = sampleKeys[Math.floor(Math.random()*sampleKeys.length)] + '-' + Math.floor(Math.random()*999);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_KeyInserted",
      "event": "BulkInsert",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "const demo = [\"apple\",\"banana\",\"orange\",\"pear\",\"grape\",\"cherry\",\"mango\",\"lemon\",\"lime\",\"kiwi\",\"melon\",\"berry\",\"apricot\"];"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S6_HashFunctionChanged",
      "event": "ChangeHashFunction",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log('Hash function changed to: ' + v + ' and rehashed entries')"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S5_MapCleared",
      "event": "ClearLog",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "logEl.innerHTML = '';"
      ],
      "confidence": 1
    },
    {
      "from": "S1_KeyInserted",
      "to": "S2_KeyReplaced",
      "event": "Put",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log(`Replaced key=\"${res.key}\" at index ${res.index}`)"
      ],
      "confidence": 1
    },
    {
      "from": "S1_KeyInserted",
      "to": "S0_Idle",
      "event": "Get",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log(`Get key=\"${k}\" -> \"${res.value}\" (index ${res.index})`)"
      ],
      "confidence": 1
    },
    {
      "from": "S1_KeyInserted",
      "to": "S3_KeyDeleted",
      "event": "Delete",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log(`Deleted key=\"${k}\" from index ${res.index}`)"
      ],
      "confidence": 1
    },
    {
      "from": "S1_KeyInserted",
      "to": "S5_MapCleared",
      "event": "Clear",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "log('Cleared map')"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#putBtn",
      "text": "Put",
      "attributes": {},
      "evidence": [
        "<button id=\"putBtn\">Put</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#getBtn",
      "text": "Get",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"getBtn\" class=\"secondary\">Get</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#delBtn",
      "text": "Delete",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"delBtn\" class=\"secondary\">Delete</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {
        "class": "danger"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"danger\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randBtn",
      "text": "Random key/value",
      "attributes": {
        "class": "tiny secondary"
      },
      "evidence": [
        "<button id=\"randBtn\" class=\"tiny secondary\">Random key/value</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#bulkBtn",
      "text": "Insert sample set",
      "attributes": {
        "class": "tiny secondary"
      },
      "evidence": [
        "<button id=\"bulkBtn\" class=\"tiny secondary\">Insert sample set</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearLog",
      "text": "Clear",
      "attributes": {
        "class": "tiny secondary"
      },
      "evidence": [
        "<button id=\"clearLog\" class=\"tiny secondary\">Clear</button>"
      ]
    },
    {
      "type": "select",
      "selector": "#hashSelect",
      "text": "Hash function",
      "attributes": {},
      "evidence": [
        "<select id=\"hashSelect\">"
      ]
    },
    {
      "type": "input",
      "selector": "#keyInput",
      "text": "Key",
      "attributes": {
        "placeholder": "e.g. \"apple\" or 42"
      },
      "evidence": [
        "<input id=\"keyInput\" type=\"text\" placeholder='e.g. \"apple\" or 42'>"
      ]
    },
    {
      "type": "input",
      "selector": "#valueInput",
      "text": "Value",
      "attributes": {
        "placeholder": "e.g. \"red\""
      },
      "evidence": [
        "<input id=\"valueInput\" type=\"text\" placeholder='e.g. \"red\"'>"
      ]
    },
    {
      "type": "div",
      "selector": "#bucketsContainer",
      "text": "Buckets Visualization",
      "attributes": {},
      "evidence": [
        "<div id=\"bucketsContainer\" class=\"buckets\" aria-live=\"polite\"></div>"
      ]
    },
    {
      "type": "div",
      "selector": "#log",
      "text": "Activity Log",
      "attributes": {},
      "evidence": [
        "<div id=\"log\" class=\"log\" aria-live=\"polite\"></div>"
      ]
    },
    {
      "type": "div",
      "selector": "#selectedInfo",
      "text": "Selected Entry",
      "attributes": {},
      "evidence": [
        "<div id=\"selectedInfo\" class=\"small\" style=\"margin-top:8px;\">None</div>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 12,
    "detected_components": [
      {
        "type": "button",
        "selector": "#putBtn"
      },
      {
        "type": "button",
        "selector": "#getBtn"
      },
      {
        "type": "button",
        "selector": "#delBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#randBtn"
      },
      {
        "type": "button",
        "selector": "#bulkBtn"
      },
      {
        "type": "button",
        "selector": "#clearLog"
      },
      {
        "type": "select",
        "selector": "#hashSelect"
      },
      {
        "type": "input",
        "selector": "#keyInput"
      },
      {
        "type": "input",
        "selector": "#valueInput"
      },
      {
        "type": "div",
        "selector": "#bucketsContainer"
      },
      {
        "type": "div",
        "selector": "#log"
      },
      {
        "type": "div",
        "selector": "#selectedInfo"
      }
    ],
    "detected_event_handlers_count": 10,
    "detected_event_handlers": [
      "putBtn.addEventListener('click', ()=>{",
      "getBtn.addEventListener('click', ()=>{",
      "delBtn.addEventListener('click', ()=>{",
      "clearBtn.addEventListener('click', ()=>{",
      "randBtn.addEventListener('click', ()=>{",
      "bulkBtn.addEventListener('click', ()=>{",
      "clearLogBtn.addEventListener('click', ()=>{",
      "hashSelect.addEventListener('change', ()=>{",
      "e.addEventListener('click', (ev)=>{",
      "e.addEventListener('mouseenter', ()=>{"
    ],
    "extracted_states_count": 7,
    "extracted_transitions_count": 13,
    "extraction_confidence": 1,
    "notes": []
  }
}