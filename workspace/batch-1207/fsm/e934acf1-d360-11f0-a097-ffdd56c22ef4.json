{
  "meta": {
    "concept": "Recursion Explorer â€” Interactive Demonstrations",
    "topic": "Recursion",
    "educational_goal": "To demonstrate and visualize recursion through interactive examples.",
    "expected_interactions": [
      "Run factorial trace",
      "Compute factorial instantly",
      "Compare Fibonacci",
      "Redraw fractal tree"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "<body>",
        "<div class=\"wrap\">"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Factorial_Tracing",
      "label": "Factorial Tracing",
      "type": "active",
      "entry_actions": [
        "tracedFactorial(n, tracer)"
      ],
      "exit_actions": [
        "animateEvents(events, sp)"
      ],
      "evidence": [
        "runFact.addEventListener('click', async () => {",
        "tracedFactorial(n, tracer);"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Factorial_Instant",
      "label": "Factorial Instant Compute",
      "type": "active",
      "entry_actions": [
        "(function f(x){ if (x<=1) return 1; return x * f(x-1); })(n);"
      ],
      "exit_actions": [],
      "evidence": [
        "runFactInstant.addEventListener('click', () => {",
        "const res = (function f(x){ if (x<=1) return 1; return x * f(x-1); })(n);"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Fibonacci_Comparison",
      "label": "Fibonacci Comparison",
      "type": "active",
      "entry_actions": [
        "fibNaive(n)",
        "fibMemo(n)"
      ],
      "exit_actions": [],
      "evidence": [
        "byId('runFib').addEventListener('click', () => {",
        "const valNaive = fibNaive(n);",
        "const valMemo = fibMemo(n);"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Fractal_Tree_Draw",
      "label": "Fractal Tree Drawing",
      "type": "active",
      "entry_actions": [
        "drawTree(depth, angleDeg)"
      ],
      "exit_actions": [],
      "evidence": [
        "byId('drawTree').addEventListener('click', () => {",
        "drawTree(d, a);"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "RunFactorialTrace",
      "event_type": "click",
      "description": "Triggers the factorial tracing animation.",
      "trigger_selectors": [
        "#runFact"
      ],
      "evidence": [
        "runFact.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "RunFactorialInstant",
      "event_type": "click",
      "description": "Computes the factorial instantly without tracing.",
      "trigger_selectors": [
        "#runFactInstant"
      ],
      "evidence": [
        "runFactInstant.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "RunFibonacciComparison",
      "event_type": "click",
      "description": "Compares naive and memoized Fibonacci calculations.",
      "trigger_selectors": [
        "#runFib"
      ],
      "evidence": [
        "byId('runFib').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "DrawFractalTree",
      "event_type": "click",
      "description": "Redraws the fractal tree based on input parameters.",
      "trigger_selectors": [
        "#drawTree"
      ],
      "evidence": [
        "byId('drawTree').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "UpdateTreeLabels",
      "event_type": "input",
      "description": "Updates the labels for tree depth and angle.",
      "trigger_selectors": [
        "#treeDepth",
        "#angle"
      ],
      "evidence": [
        "byId('treeDepth').addEventListener('input', updateTreeLabels);",
        "byId('angle').addEventListener('input', updateTreeLabels);"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Factorial_Tracing",
      "event": "RunFactorialTrace",
      "actions": [],
      "expected_observables": [
        "Animation of factorial tracing starts"
      ],
      "evidence": [
        "runFact.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S2_Factorial_Instant",
      "event": "RunFactorialInstant",
      "actions": [],
      "expected_observables": [
        "Instant factorial result displayed"
      ],
      "evidence": [
        "runFactInstant.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_Fibonacci_Comparison",
      "event": "RunFibonacciComparison",
      "actions": [],
      "expected_observables": [
        "Fibonacci comparison results displayed"
      ],
      "evidence": [
        "byId('runFib').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_Fractal_Tree_Draw",
      "event": "DrawFractalTree",
      "actions": [],
      "expected_observables": [
        "Fractal tree is redrawn"
      ],
      "evidence": [
        "byId('drawTree').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Fractal_Tree_Draw",
      "to": "S0_Idle",
      "event": "UpdateTreeLabels",
      "actions": [],
      "expected_observables": [
        "Tree depth and angle labels updated"
      ],
      "evidence": [
        "byId('treeDepth').addEventListener('input', updateTreeLabels);",
        "byId('angle').addEventListener('input', updateTreeLabels);"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#factN",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "0",
        "max": "12",
        "value": "6"
      },
      "evidence": [
        "<input id=\"factN\" type=\"number\" min=\"0\" max=\"12\" value=\"6\">"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "50",
        "max": "1200",
        "value": "400"
      },
      "evidence": [
        "<input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" value=\"400\">"
      ]
    },
    {
      "type": "button",
      "selector": "#runFact",
      "text": "Run Trace",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"runFact\" class=\"small\">Run Trace</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runFactInstant",
      "text": "Compute Only",
      "attributes": {
        "class": "small secondary"
      },
      "evidence": [
        "<button id=\"runFactInstant\" class=\"small secondary\">Compute Only</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#fibN",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "0",
        "max": "35",
        "value": "10"
      },
      "evidence": [
        "<input id=\"fibN\" type=\"number\" min=\"0\" max=\"35\" value=\"10\">"
      ]
    },
    {
      "type": "button",
      "selector": "#runFib",
      "text": "Compare",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"runFib\" class=\"small\">Compare</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#treeDepth",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "0",
        "max": "12",
        "value": "9"
      },
      "evidence": [
        "<input id=\"treeDepth\" type=\"range\" min=\"0\" max=\"12\" value=\"9\">"
      ]
    },
    {
      "type": "input",
      "selector": "#angle",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "10",
        "max": "60",
        "value": "22"
      },
      "evidence": [
        "<input id=\"angle\" type=\"range\" min=\"10\" max=\"60\" value=\"22\">"
      ]
    },
    {
      "type": "button",
      "selector": "#drawTree",
      "text": "Redraw",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"drawTree\" class=\"small\">Redraw</button>"
      ]
    },
    {
      "type": "canvas",
      "selector": "#treeCanvas",
      "text": "",
      "attributes": {
        "width": "800",
        "height": "420"
      },
      "evidence": [
        "<canvas id=\"treeCanvas\" width=\"800\" height=\"420\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-03T00:00:00Z",
    "detected_components_count": 9,
    "detected_components": [
      {
        "type": "input",
        "selector": "#factN",
        "text": "",
        "attributes": {
          "type": "number",
          "min": "0",
          "max": "12",
          "value": "6"
        }
      },
      {
        "type": "input",
        "selector": "#speed",
        "text": "",
        "attributes": {
          "type": "range",
          "min": "50",
          "max": "1200",
          "value": "400"
        }
      },
      {
        "type": "button",
        "selector": "#runFact",
        "text": "Run Trace",
        "attributes": {
          "class": "small"
        }
      },
      {
        "type": "button",
        "selector": "#runFactInstant",
        "text": "Compute Only",
        "attributes": {
          "class": "small secondary"
        }
      },
      {
        "type": "input",
        "selector": "#fibN",
        "text": "",
        "attributes": {
          "type": "number",
          "min": "0",
          "max": "35",
          "value": "10"
        }
      },
      {
        "type": "button",
        "selector": "#runFib",
        "text": "Compare",
        "attributes": {
          "class": "small"
        }
      },
      {
        "type": "input",
        "selector": "#treeDepth",
        "text": "",
        "attributes": {
          "type": "range",
          "min": "0",
          "max": "12",
          "value": "9"
        }
      },
      {
        "type": "input",
        "selector": "#angle",
        "text": "",
        "attributes": {
          "type": "range",
          "min": "10",
          "max": "60",
          "value": "22"
        }
      },
      {
        "type": "button",
        "selector": "#drawTree",
        "text": "Redraw",
        "attributes": {
          "class": "small"
        }
      },
      {
        "type": "canvas",
        "selector": "#treeCanvas",
        "text": "",
        "attributes": {
          "width": "800",
          "height": "420"
        }
      }
    ],
    "detected_event_handlers_count": 5,
    "detected_event_handlers": [
      "runFact.addEventListener('click', async () => {",
      "runFactInstant.addEventListener('click', () => {",
      "byId('runFib').addEventListener('click', () => {",
      "byId('drawTree').addEventListener('click', () => {",
      "byId('treeDepth').addEventListener('input', updateTreeLabels);",
      "byId('angle').addEventListener('input', updateTreeLabels);"
    ],
    "extracted_states_count": 5,
    "extracted_transitions_count": 5,
    "extraction_confidence": 1,
    "notes": []
  }
}