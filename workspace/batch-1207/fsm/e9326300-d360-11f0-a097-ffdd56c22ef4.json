{
  "meta": {
    "concept": "Deque (Double-Ended Queue) â€” Interactive Demo",
    "topic": "Deque",
    "educational_goal": "Understand operations on a double-ended queue.",
    "expected_interactions": [
      "Push Front",
      "Push Back",
      "Pop Front",
      "Pop Back",
      "Peek Front",
      "Peek Back",
      "Clear",
      "Fill Random",
      "Rotate Left",
      "Rotate Right",
      "Run Example Sequence",
      "Show/Hide Code",
      "Copy State"
    ]
  },
  "states": [
    {
      "id": "S0_Initial",
      "label": "Initial State",
      "type": "active",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "Initialized with [10, 20]",
        "render()"
      ],
      "confidence": 1
    },
    {
      "id": "S1_ValueEntered",
      "label": "Value Entered",
      "type": "active",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "valueInput.value = String(arg)"
      ],
      "confidence": 1
    },
    {
      "id": "S2_DequeNotEmpty",
      "label": "Deque Not Empty",
      "type": "active",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "sizeBadge.textContent = dq.size()",
        "capBadge.textContent = dq.capacity()",
        "emptyBadge.textContent = dq.isEmpty() ? 'true' : 'false'"
      ],
      "confidence": 1
    },
    {
      "id": "S3_DequeEmpty",
      "label": "Deque Empty",
      "type": "active",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "const empty = document.createElement('div'); empty.className = 'slot empty';"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "PushFront",
      "event_type": "click",
      "description": "Push a value to the front of the deque.",
      "trigger_selectors": [
        "#pushFrontBtn"
      ],
      "evidence": [
        "document.getElementById('pushFrontBtn').onclick = () => performOp('pushFront');"
      ],
      "confidence": 1
    },
    {
      "id": "PushBack",
      "event_type": "click",
      "description": "Push a value to the back of the deque.",
      "trigger_selectors": [
        "#pushBackBtn"
      ],
      "evidence": [
        "document.getElementById('pushBackBtn').onclick = () => performOp('pushBack');"
      ],
      "confidence": 1
    },
    {
      "id": "PopFront",
      "event_type": "click",
      "description": "Pop a value from the front of the deque.",
      "trigger_selectors": [
        "#popFrontBtn"
      ],
      "evidence": [
        "document.getElementById('popFrontBtn').onclick = () => performOp('popFront');"
      ],
      "confidence": 1
    },
    {
      "id": "PopBack",
      "event_type": "click",
      "description": "Pop a value from the back of the deque.",
      "trigger_selectors": [
        "#popBackBtn"
      ],
      "evidence": [
        "document.getElementById('popBackBtn').onclick = () => performOp('popBack');"
      ],
      "confidence": 1
    },
    {
      "id": "PeekFront",
      "event_type": "click",
      "description": "Peek at the front value of the deque.",
      "trigger_selectors": [
        "#peekFrontBtn"
      ],
      "evidence": [
        "document.getElementById('peekFrontBtn').onclick = () => performOp('peekFront');"
      ],
      "confidence": 1
    },
    {
      "id": "PeekBack",
      "event_type": "click",
      "description": "Peek at the back value of the deque.",
      "trigger_selectors": [
        "#peekBackBtn"
      ],
      "evidence": [
        "document.getElementById('peekBackBtn').onclick = () => performOp('peekBack');"
      ],
      "confidence": 1
    },
    {
      "id": "Clear",
      "event_type": "click",
      "description": "Clear the deque.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "document.getElementById('clearBtn').onclick = () => performOp('clear');"
      ],
      "confidence": 1
    },
    {
      "id": "FillRandom",
      "event_type": "click",
      "description": "Fill the deque with random values.",
      "trigger_selectors": [
        "#fillRandomBtn"
      ],
      "evidence": [
        "document.getElementById('fillRandomBtn').onclick = () => performOp('fillRandom');"
      ],
      "confidence": 1
    },
    {
      "id": "RotateLeft",
      "event_type": "click",
      "description": "Rotate the deque to the left.",
      "trigger_selectors": [
        "#rotateLeftBtn"
      ],
      "evidence": [
        "document.getElementById('rotateLeftBtn').onclick = () => performOp('rotateLeft');"
      ],
      "confidence": 1
    },
    {
      "id": "RotateRight",
      "event_type": "click",
      "description": "Rotate the deque to the right.",
      "trigger_selectors": [
        "#rotateRightBtn"
      ],
      "evidence": [
        "document.getElementById('rotateRightBtn').onclick = () => performOp('rotateRight');"
      ],
      "confidence": 1
    },
    {
      "id": "RunExample",
      "event_type": "click",
      "description": "Run a predefined example sequence of operations.",
      "trigger_selectors": [
        "#runExampleBtn"
      ],
      "evidence": [
        "document.getElementById('runExampleBtn').onclick = runExample;"
      ],
      "confidence": 1
    },
    {
      "id": "ShowHideCode",
      "event_type": "click",
      "description": "Show or hide the source code.",
      "trigger_selectors": [
        "#showCodeBtn"
      ],
      "evidence": [
        "document.getElementById('showCodeBtn').onclick = () => { codeBlock.style.display = codeBlock.style.display === 'none' ? 'block' : 'none'; };"
      ],
      "confidence": 1
    },
    {
      "id": "CopyState",
      "event_type": "click",
      "description": "Copy the current state of the deque to the clipboard.",
      "trigger_selectors": [
        "#copyStateBtn"
      ],
      "evidence": [
        "document.getElementById('copyStateBtn').onclick = () => { navigator.clipboard?.writeText(JSON.stringify({arr: dq.toArray(), head: dq._head, len: dq._len, cap: dq._cap}, null, 2)); log('State copied to clipboard'); };"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Initial",
      "to": "S1_ValueEntered",
      "event": "PushFront",
      "actions": [
        "performOp('pushFront')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "dq.pushFront(parsed);",
        "log(`pushFront(${formatVal(parsed)})`);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Initial",
      "to": "S1_ValueEntered",
      "event": "PushBack",
      "actions": [
        "performOp('pushBack')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "dq.pushBack(parsed);",
        "log(`pushBack(${formatVal(parsed)})`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "PopFront",
      "actions": [
        "performOp('popFront')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "const r = dq.popFront();",
        "log(`popFront() -> ${formatVal(r)}`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "PopBack",
      "actions": [
        "performOp('popBack')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "const r = dq.popBack();",
        "log(`popBack() -> ${formatVal(r)}`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "PeekFront",
      "actions": [
        "performOp('peekFront')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "const r = dq.peekFront();",
        "log(`peekFront() -> ${formatVal(r)}`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "PeekBack",
      "actions": [
        "performOp('peekBack')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "const r = dq.peekBack();",
        "log(`peekBack() -> ${formatVal(r)}`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S3_DequeEmpty",
      "event": "Clear",
      "actions": [
        "performOp('clear')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "dq.clear();",
        "log('clear()');"
      ],
      "confidence": 1
    },
    {
      "from": "S3_DequeEmpty",
      "to": "S1_ValueEntered",
      "event": "FillRandom",
      "actions": [
        "performOp('fillRandom')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "dq.clear();",
        "const n = 6 + Math.floor(Math.random() * 6);",
        "for (let i = 0; i < n; i++) dq.pushBack(Math.floor(Math.random() * 100));",
        "log(`fillRandom(${n} items)`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "RotateLeft",
      "actions": [
        "performOp('rotateLeft')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "dq.rotateLeft(parseInt(document.getElementById('rotateAmount').value || '1', 10));",
        "log(`rotateLeft(${document.getElementById('rotateAmount').value})`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "RotateRight",
      "actions": [
        "performOp('rotateRight')"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "dq.rotateRight(parseInt(document.getElementById('rotateAmount').value || '1', 10));",
        "log(`rotateRight(${document.getElementById('rotateAmount').value})`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "RunExample",
      "actions": [
        "runExample()"
      ],
      "expected_observables": [
        "render()"
      ],
      "evidence": [
        "const seq = [...];",
        "await pause(spd);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "ShowHideCode",
      "actions": [],
      "expected_observables": [
        "codeBlock.style.display"
      ],
      "evidence": [
        "codeBlock.style.display = codeBlock.style.display === 'none' ? 'block' : 'none';"
      ],
      "confidence": 1
    },
    {
      "from": "S2_DequeNotEmpty",
      "to": "S2_DequeNotEmpty",
      "event": "CopyState",
      "actions": [],
      "expected_observables": [
        "navigator.clipboard.writeText"
      ],
      "evidence": [
        "navigator.clipboard?.writeText(JSON.stringify({arr: dq.toArray(), head: dq._head, len: dq._len, cap: dq._cap}, null, 2));"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#valueInput",
      "text": "Value input",
      "attributes": {
        "type": "text",
        "placeholder": "e.g. 42 or \"hello\""
      },
      "evidence": [
        "<input id=\"valueInput\" type=\"text\" placeholder='e.g. 42 or \"hello\"' />"
      ]
    },
    {
      "type": "button",
      "selector": "#pushFrontBtn",
      "text": "Push Front",
      "attributes": {},
      "evidence": [
        "<button id=\"pushFrontBtn\">Push Front</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#pushBackBtn",
      "text": "Push Back",
      "attributes": {},
      "evidence": [
        "<button id=\"pushBackBtn\">Push Back</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#popFrontBtn",
      "text": "Pop Front",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"popFrontBtn\" class=\"ghost\">Pop Front</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#popBackBtn",
      "text": "Pop Back",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"popBackBtn\" class=\"ghost\">Pop Back</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#peekFrontBtn",
      "text": "Peek Front",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"peekFrontBtn\" class=\"ghost\">Peek Front</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#peekBackBtn",
      "text": "Peek Back",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"peekBackBtn\" class=\"ghost\">Peek Back</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {
        "class": "warn"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"warn\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#fillRandomBtn",
      "text": "Fill Random",
      "attributes": {
        "class": "success"
      },
      "evidence": [
        "<button id=\"fillRandomBtn\" class=\"success\">Fill Random</button>"
      ]
    },
    {
      "type": "select",
      "selector": "#rotateAmount",
      "text": "Rotate Amount",
      "attributes": {},
      "evidence": [
        "<select id=\"rotateAmount\">"
      ]
    },
    {
      "type": "button",
      "selector": "#rotateLeftBtn",
      "text": "Rotate Left",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"rotateLeftBtn\" class=\"ghost\">Rotate Left</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#rotateRightBtn",
      "text": "Rotate Right",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"rotateRightBtn\" class=\"ghost\">Rotate Right</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runExampleBtn",
      "text": "Run Example Sequence",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"runExampleBtn\" class=\"ghost\">Run Example Sequence</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#showCodeBtn",
      "text": "Show/Hide Code",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"showCodeBtn\" class=\"ghost\">Show/Hide Code</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#copyStateBtn",
      "text": "Copy State (JSON)",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"copyStateBtn\" class=\"ghost\">Copy State (JSON)</button>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-04T12:00:00Z",
    "detected_components_count": 13,
    "detected_components": [
      {
        "type": "input",
        "selector": "#valueInput"
      },
      {
        "type": "button",
        "selector": "#pushFrontBtn"
      },
      {
        "type": "button",
        "selector": "#pushBackBtn"
      },
      {
        "type": "button",
        "selector": "#popFrontBtn"
      },
      {
        "type": "button",
        "selector": "#popBackBtn"
      },
      {
        "type": "button",
        "selector": "#peekFrontBtn"
      },
      {
        "type": "button",
        "selector": "#peekBackBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#fillRandomBtn"
      },
      {
        "type": "select",
        "selector": "#rotateAmount"
      },
      {
        "type": "button",
        "selector": "#rotateLeftBtn"
      },
      {
        "type": "button",
        "selector": "#rotateRightBtn"
      },
      {
        "type": "button",
        "selector": "#runExampleBtn"
      },
      {
        "type": "button",
        "selector": "#showCodeBtn"
      },
      {
        "type": "button",
        "selector": "#copyStateBtn"
      }
    ],
    "detected_event_handlers_count": 13,
    "detected_event_handlers": [
      "document.getElementById('pushFrontBtn').onclick = () => performOp('pushFront');",
      "document.getElementById('pushBackBtn').onclick = () => performOp('pushBack');",
      "document.getElementById('popFrontBtn').onclick = () => performOp('popFront');",
      "document.getElementById('popBackBtn').onclick = () => performOp('popBack');",
      "document.getElementById('peekFrontBtn').onclick = () => performOp('peekFront');",
      "document.getElementById('peekBackBtn').onclick = () => performOp('peekBack');",
      "document.getElementById('clearBtn').onclick = () => performOp('clear');",
      "document.getElementById('fillRandomBtn').onclick = () => performOp('fillRandom');",
      "document.getElementById('rotateLeftBtn').onclick = () => performOp('rotateLeft');",
      "document.getElementById('rotateRightBtn').onclick = () => performOp('rotateRight');",
      "document.getElementById('runExampleBtn').onclick = runExample;",
      "document.getElementById('showCodeBtn').onclick = () => { codeBlock.style.display = codeBlock.style.display === 'none' ? 'block' : 'none'; };",
      "document.getElementById('copyStateBtn').onclick = () => { navigator.clipboard?.writeText(JSON.stringify({arr: dq.toArray(), head: dq._head, len: dq._len, cap: dq._cap}, null, 2)); log('State copied to clipboard'); };"
    ],
    "extracted_states_count": 4,
    "extracted_transitions_count": 17,
    "extraction_confidence": 1,
    "notes": [
      "All interactive elements and their handlers have been identified.",
      "State transitions are based on user interactions with the deque.",
      "The FSM captures all operations available in the interactive demo."
    ]
  }
}