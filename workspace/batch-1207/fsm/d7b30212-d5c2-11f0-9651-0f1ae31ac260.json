{
  "meta": {
    "concept": "Directed and Undirected Graph Visualization",
    "topic": "Graph (Directed/Undirected)",
    "educational_goal": "To visualize and manipulate directed and undirected graphs interactively.",
    "expected_interactions": [
      "Add nodes",
      "Create edges",
      "Switch graph types",
      "Reset graph"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "drawGraph()"
      ],
      "exit_actions": [],
      "evidence": [
        "drawGraph()"
      ],
      "confidence": 1
    },
    {
      "id": "S1_AddingNode",
      "label": "Adding Node",
      "type": "default",
      "entry_actions": [
        "addNode(mousePos.x, mousePos.y)"
      ],
      "exit_actions": [
        "drawGraph()"
      ],
      "evidence": [
        "if(!getNodeAtPos(mousePos)){",
        "if(addNode(mousePos.x, mousePos.y)){"
      ],
      "confidence": 1
    },
    {
      "id": "S2_CreatingEdge",
      "label": "Creating Edge",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [
        "drawGraph()"
      ],
      "evidence": [
        "if(addEdge(dragNodeId, targetNode.id)){"
      ],
      "confidence": 1
    },
    {
      "id": "S3_DraggingEdge",
      "label": "Dragging Edge",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [
        "drawGraph()"
      ],
      "evidence": [
        "draggingEdge = true;"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "MouseDown",
      "event_type": "mousedown",
      "description": "Start dragging an edge or node.",
      "trigger_selectors": [
        "#graphCanvas"
      ],
      "evidence": [
        "canvas.addEventListener(\"mousedown\", e => {"
      ],
      "confidence": 1
    },
    {
      "id": "MouseMove",
      "event_type": "mousemove",
      "description": "Update position while dragging an edge.",
      "trigger_selectors": [
        "#graphCanvas"
      ],
      "evidence": [
        "canvas.addEventListener(\"mousemove\", e => {"
      ],
      "confidence": 1
    },
    {
      "id": "MouseUp",
      "event_type": "mouseup",
      "description": "Finish dragging and possibly create an edge.",
      "trigger_selectors": [
        "#graphCanvas"
      ],
      "evidence": [
        "canvas.addEventListener(\"mouseup\", e => {"
      ],
      "confidence": 1
    },
    {
      "id": "Click",
      "event_type": "click",
      "description": "Add a node by clicking on the canvas.",
      "trigger_selectors": [
        "#graphCanvas"
      ],
      "evidence": [
        "canvas.addEventListener(\"click\", e => {"
      ],
      "confidence": 1
    },
    {
      "id": "GraphTypeChange",
      "event_type": "change",
      "description": "Change the graph type between directed and undirected.",
      "trigger_selectors": [
        "input[name='graphType']"
      ],
      "evidence": [
        "graphTypeInputs.forEach(input => { input.addEventListener(\"change\", e => {"
      ],
      "confidence": 1
    },
    {
      "id": "ResetGraph",
      "event_type": "click",
      "description": "Reset the graph to its initial state.",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener(\"click\", () => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_AddingNode",
      "event": "Click",
      "actions": [
        "addNode(mousePos.x, mousePos.y)"
      ],
      "expected_observables": [
        "Node added"
      ],
      "evidence": [
        "if(!getNodeAtPos(mousePos)){",
        "if(addNode(mousePos.x, mousePos.y)){"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_DraggingEdge",
      "event": "MouseDown",
      "actions": [
        "dragNodeId = node.id; draggingEdge = true; dragPos = mousePos;"
      ],
      "expected_observables": [
        "Dragging edge started"
      ],
      "evidence": [
        "if(node){ dragNodeId = node.id; draggingEdge = true; dragPos = mousePos; }"
      ],
      "confidence": 1
    },
    {
      "from": "S3_DraggingEdge",
      "to": "S2_CreatingEdge",
      "event": "MouseUp",
      "actions": [
        "addEdge(dragNodeId, targetNode.id)"
      ],
      "expected_observables": [
        "Edge created"
      ],
      "evidence": [
        "if(addEdge(dragNodeId, targetNode.id)){"
      ],
      "confidence": 1
    },
    {
      "from": "S3_DraggingEdge",
      "to": "S3_DraggingEdge",
      "event": "MouseMove",
      "actions": [],
      "expected_observables": [
        "Edge being dragged"
      ],
      "evidence": [
        "if(draggingEdge && dragNodeId !== null){"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S0_Idle",
      "event": "GraphTypeChange",
      "actions": [
        "currentGraphType = e.target.value; drawGraph();"
      ],
      "expected_observables": [
        "Graph type changed"
      ],
      "evidence": [
        "input.addEventListener(\"change\", e => { currentGraphType = e.target.value; drawGraph(); }"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S0_Idle",
      "event": "ResetGraph",
      "actions": [
        "nodes = []; edges = []; nextNodeId = 1; drawGraph();"
      ],
      "expected_observables": [
        "Graph reset"
      ],
      "evidence": [
        "resetBtn.addEventListener(\"click\", () => { nodes = []; edges = []; nextNodeId = 1; drawGraph(); }"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset Graph",
      "attributes": {
        "title": "Clear all nodes and edges"
      },
      "evidence": [
        "<button id=\"resetBtn\" title=\"Clear all nodes and edges\">Reset Graph</button>"
      ]
    },
    {
      "type": "input",
      "selector": "input[type='radio'][value='undirected']",
      "text": "Undirected Graph",
      "attributes": {
        "name": "graphType",
        "value": "undirected"
      },
      "evidence": [
        "<input type=\"radio\" name=\"graphType\" value=\"undirected\" checked />"
      ]
    },
    {
      "type": "input",
      "selector": "input[type='radio'][value='directed']",
      "text": "Directed Graph",
      "attributes": {
        "name": "graphType",
        "value": "directed"
      },
      "evidence": [
        "<input type=\"radio\" name=\"graphType\" value=\"directed\" />"
      ]
    },
    {
      "type": "canvas",
      "selector": "#graphCanvas",
      "text": "",
      "attributes": {
        "width": "700",
        "height": "500",
        "title": "Click to add nodes, drag between nodes to create edges"
      },
      "evidence": [
        "<canvas id=\"graphCanvas\" width=\"700\" height=\"500\" title=\"Click to add nodes, drag between nodes to create edges\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 4,
    "detected_components": [
      {
        "type": "button",
        "selector": "#resetBtn",
        "text": "Reset Graph",
        "attributes": {
          "title": "Clear all nodes and edges"
        }
      },
      {
        "type": "input",
        "selector": "input[type='radio'][value='undirected']",
        "text": "Undirected Graph",
        "attributes": {
          "name": "graphType",
          "value": "undirected"
        }
      },
      {
        "type": "input",
        "selector": "input[type='radio'][value='directed']",
        "text": "Directed Graph",
        "attributes": {
          "name": "graphType",
          "value": "directed"
        }
      },
      {
        "type": "canvas",
        "selector": "#graphCanvas",
        "text": "",
        "attributes": {
          "width": "700",
          "height": "500",
          "title": "Click to add nodes, drag between nodes to create edges"
        }
      }
    ],
    "detected_event_handlers_count": 6,
    "detected_event_handlers": [
      "canvas.addEventListener(\"mousedown\", e => { ... })",
      "canvas.addEventListener(\"mousemove\", e => { ... })",
      "canvas.addEventListener(\"mouseup\", e => { ... })",
      "canvas.addEventListener(\"click\", e => { ... })",
      "input.addEventListener(\"change\", e => { ... })",
      "resetBtn.addEventListener(\"click\", () => { ... })"
    ],
    "extracted_states_count": 4,
    "extracted_transitions_count": 6,
    "extraction_confidence": 1,
    "notes": []
  }
}