{
  "meta": {
    "concept": "K-Means Clustering Demo",
    "topic": "K-Means Clustering",
    "educational_goal": "To demonstrate the K-Means clustering algorithm interactively.",
    "expected_interactions": [
      "Generate random points",
      "Add points by clicking on the canvas",
      "Perform K-Means iterations step by step",
      "Run K-Means to completion",
      "Reset clustering",
      "Clear all points and clusters"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "draw()"
      ],
      "confidence": 1
    },
    {
      "id": "S1_PointsGenerated",
      "label": "Points Generated",
      "type": "intermediate",
      "entry_actions": [
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "points = [];",
        "generateRandomPoints(n);"
      ],
      "confidence": 1
    },
    {
      "id": "S2_ClusteringInitialized",
      "label": "Clustering Initialized",
      "type": "intermediate",
      "entry_actions": [
        "initializeCenters()",
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "initializeCenters();",
        "points.forEach(pt => pt.cluster = null);"
      ],
      "confidence": 1
    },
    {
      "id": "S3_ClusteringConverged",
      "label": "Clustering Converged",
      "type": "final",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "info.textContent = 'Clustering has converged.';"
      ],
      "confidence": 1
    },
    {
      "id": "S4_ClusteringRunning",
      "label": "Clustering Running",
      "type": "intermediate",
      "entry_actions": [
        "runClustering()"
      ],
      "exit_actions": [],
      "evidence": [
        "running = true;",
        "info.textContent = 'Running clustering...';"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "GENERATE_POINTS",
      "event_type": "click",
      "description": "Generate random points based on user input.",
      "trigger_selectors": [
        "#generateBtn"
      ],
      "evidence": [
        "generateBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "STEP_CLUSTERS",
      "event_type": "click",
      "description": "Perform one iteration of K-Means clustering.",
      "trigger_selectors": [
        "#stepBtn"
      ],
      "evidence": [
        "stepBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "RUN_CLUSTERS",
      "event_type": "click",
      "description": "Run K-Means clustering to completion.",
      "trigger_selectors": [
        "#runBtn"
      ],
      "evidence": [
        "runBtn.addEventListener('click', runClustering);"
      ],
      "confidence": 1
    },
    {
      "id": "RESET_CLUSTERS",
      "event_type": "click",
      "description": "Reset the clustering process.",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "CLEAR_POINTS",
      "event_type": "click",
      "description": "Clear all generated points and clusters.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ADD_POINT",
      "event_type": "click",
      "description": "Add a point by clicking on the canvas.",
      "trigger_selectors": [
        "#canvas"
      ],
      "evidence": [
        "canvas.addEventListener('click', addPoint);"
      ],
      "confidence": 1
    },
    {
      "id": "CHANGE_K",
      "event_type": "change",
      "description": "Change the number of clusters.",
      "trigger_selectors": [
        "#kInput"
      ],
      "evidence": [
        "kInput.addEventListener('change', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "CHANGE_POINTS",
      "event_type": "change",
      "description": "Change the number of points to generate.",
      "trigger_selectors": [
        "#pointsInput"
      ],
      "evidence": [
        "pointsInput.addEventListener('change', () => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_PointsGenerated",
      "event": "GENERATE_POINTS",
      "actions": [
        "generateRandomPoints(n)",
        "initializeCenters()"
      ],
      "expected_observables": [
        "Random points generated on canvas."
      ],
      "evidence": [
        "points = [];",
        "generateRandomPoints(n);"
      ],
      "confidence": 1
    },
    {
      "from": "S1_PointsGenerated",
      "to": "S2_ClusteringInitialized",
      "event": "STEP_CLUSTERS",
      "actions": [
        "initializeCenters()",
        "draw()"
      ],
      "expected_observables": [
        "Clusters initialized."
      ],
      "evidence": [
        "initializeCenters();",
        "points.forEach(pt => pt.cluster = null);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_ClusteringInitialized",
      "to": "S4_ClusteringRunning",
      "event": "RUN_CLUSTERS",
      "actions": [
        "runClustering()"
      ],
      "expected_observables": [
        "Clustering running..."
      ],
      "evidence": [
        "running = true;",
        "info.textContent = 'Running clustering...';"
      ],
      "confidence": 1
    },
    {
      "from": "S4_ClusteringRunning",
      "to": "S3_ClusteringConverged",
      "event": "STEP_CLUSTERS",
      "actions": [
        "kMeansStep()"
      ],
      "expected_observables": [
        "Clustering has converged."
      ],
      "evidence": [
        "info.textContent = 'Clustering has converged.';"
      ],
      "confidence": 1
    },
    {
      "from": "S4_ClusteringRunning",
      "to": "S4_ClusteringRunning",
      "event": "STEP_CLUSTERS",
      "actions": [
        "kMeansStep()"
      ],
      "expected_observables": [
        "Performed one iteration of K-Means."
      ],
      "evidence": [
        "const changed = kMeansStep();"
      ],
      "confidence": 1
    },
    {
      "from": "S2_ClusteringInitialized",
      "to": "S2_ClusteringInitialized",
      "event": "RESET_CLUSTERS",
      "actions": [
        "resetClustering()"
      ],
      "expected_observables": [
        "Clustering reset."
      ],
      "evidence": [
        "resetClustering();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_PointsGenerated",
      "to": "S1_PointsGenerated",
      "event": "CLEAR_POINTS",
      "actions": [
        "clearPoints()"
      ],
      "expected_observables": [
        "Cleared all points and clusters."
      ],
      "evidence": [
        "points = []; centers = []; draw();"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S0_Idle",
      "event": "ADD_POINT",
      "actions": [
        "addPoint(e)"
      ],
      "expected_observables": [
        "Point added."
      ],
      "evidence": [
        "points.push({x, y, cluster: null});"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#kInput",
      "text": "Number of Clusters (k)",
      "attributes": {
        "min": "1",
        "max": "10",
        "value": "3"
      },
      "evidence": [
        "<input type=\"number\" id=\"kInput\" min=\"1\" max=\"10\" value=\"3\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#pointsInput",
      "text": "Number of Points",
      "attributes": {
        "min": "10",
        "max": "1000",
        "value": "150",
        "step": "10"
      },
      "evidence": [
        "<input type=\"number\" id=\"pointsInput\" min=\"10\" max=\"1000\" value=\"150\" step=\"10\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#generateBtn",
      "text": "Generate Points",
      "attributes": {
        "title": "Generate random points"
      },
      "evidence": [
        "<button id=\"generateBtn\" title=\"Generate random points\">Generate Points</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBtn",
      "text": "Step",
      "attributes": {
        "title": "Perform one iteration of K-Means"
      },
      "evidence": [
        "<button id=\"stepBtn\" title=\"Perform one iteration of K-Means\">Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runBtn",
      "text": "Run",
      "attributes": {
        "title": "Run K-Means to completion"
      },
      "evidence": [
        "<button id=\"runBtn\" title=\"Run K-Means to completion\">Run</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset",
      "attributes": {
        "title": "Reset clustering"
      },
      "evidence": [
        "<button id=\"resetBtn\" title=\"Reset clustering\">Reset</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {
        "title": "Clear all points and clusters"
      },
      "evidence": [
        "<button id=\"clearBtn\" title=\"Clear all points and clusters\">Clear</button>"
      ]
    },
    {
      "type": "canvas",
      "selector": "#canvas",
      "text": "K-means clustering visualization",
      "attributes": {
        "width": "700",
        "height": "500",
        "aria-label": "K-means clustering visualization"
      },
      "evidence": [
        "<canvas id=\"canvas\" width=\"700\" height=\"500\" aria-label=\"K-means clustering visualization\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 7,
    "detected_components": [
      {
        "type": "input",
        "selector": "#kInput",
        "text": "Number of Clusters (k)",
        "attributes": {
          "min": "1",
          "max": "10",
          "value": "3"
        }
      },
      {
        "type": "input",
        "selector": "#pointsInput",
        "text": "Number of Points",
        "attributes": {
          "min": "10",
          "max": "1000",
          "value": "150",
          "step": "10"
        }
      },
      {
        "type": "button",
        "selector": "#generateBtn",
        "text": "Generate Points",
        "attributes": {
          "title": "Generate random points"
        }
      },
      {
        "type": "button",
        "selector": "#stepBtn",
        "text": "Step",
        "attributes": {
          "title": "Perform one iteration of K-Means"
        }
      },
      {
        "type": "button",
        "selector": "#runBtn",
        "text": "Run",
        "attributes": {
          "title": "Run K-Means to completion"
        }
      },
      {
        "type": "button",
        "selector": "#resetBtn",
        "text": "Reset",
        "attributes": {
          "title": "Reset clustering"
        }
      },
      {
        "type": "button",
        "selector": "#clearBtn",
        "text": "Clear",
        "attributes": {
          "title": "Clear all points and clusters"
        }
      },
      {
        "type": "canvas",
        "selector": "#canvas",
        "text": "K-means clustering visualization",
        "attributes": {
          "width": "700",
          "height": "500",
          "aria-label": "K-means clustering visualization"
        }
      }
    ],
    "detected_event_handlers_count": 8,
    "detected_event_handlers": [
      "generateBtn.addEventListener('click', () => {",
      "stepBtn.addEventListener('click', () => {",
      "runBtn.addEventListener('click', runClustering);",
      "resetBtn.addEventListener('click', () => {",
      "clearBtn.addEventListener('click', () => {",
      "kInput.addEventListener('change', () => {",
      "pointsInput.addEventListener('change', () => {",
      "canvas.addEventListener('click', addPoint);"
    ],
    "extracted_states_count": 5,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}