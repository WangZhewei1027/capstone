{
  "meta": {
    "concept": "K-Nearest Neighbors (KNN) Interactive Demo",
    "topic": "K-Nearest Neighbors",
    "educational_goal": "To demonstrate the KNN classification algorithm interactively.",
    "expected_interactions": [
      "Add training points",
      "Place query points",
      "Adjust parameters (K, distance metric, weighting)",
      "Toggle decision boundary shading",
      "Generate random clusters",
      "Clear training points",
      "Clear queries",
      "Shuffle K"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "render()"
      ],
      "confidence": 1
    },
    {
      "id": "S1_AddingPoints",
      "label": "Adding Points",
      "type": "interactive",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "mode = 'add'"
      ],
      "confidence": 1
    },
    {
      "id": "S2_PlacingQuery",
      "label": "Placing Query",
      "type": "interactive",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "mode = 'query'"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "LeftClick_AddPoint",
      "event_type": "click",
      "description": "Left-click on canvas to add a training point.",
      "trigger_selectors": [
        "#plot"
      ],
      "evidence": [
        "canvas.addEventListener('mousedown', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "RightClick_AddQuery",
      "event_type": "click",
      "description": "Right-click on canvas to place a query point.",
      "trigger_selectors": [
        "#plot"
      ],
      "evidence": [
        "canvas.addEventListener('mousedown', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeMode",
      "event_type": "change",
      "description": "Change the mode of interaction (Add/Query).",
      "trigger_selectors": [
        "#mode"
      ],
      "evidence": [
        "modeSelect.addEventListener('change', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeKValue",
      "event_type": "input",
      "description": "Change the value of K using the slider.",
      "trigger_selectors": [
        "#k"
      ],
      "evidence": [
        "kSlider.addEventListener('input', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeMetric",
      "event_type": "change",
      "description": "Change the distance metric used for classification.",
      "trigger_selectors": [
        "#metric"
      ],
      "evidence": [
        "metricSelect.addEventListener('change', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeWeighting",
      "event_type": "change",
      "description": "Change the weighting method for neighbors.",
      "trigger_selectors": [
        "#weighting"
      ],
      "evidence": [
        "weightingSelect.addEventListener('change', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ToggleBoundary",
      "event_type": "change",
      "description": "Toggle the decision boundary shading.",
      "trigger_selectors": [
        "#drawBoundary"
      ],
      "evidence": [
        "drawBoundaryCheckbox.addEventListener('change', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "GenerateClusters",
      "event_type": "click",
      "description": "Generate random clusters of training points.",
      "trigger_selectors": [
        "#genBtn"
      ],
      "evidence": [
        "genBtn.addEventListener('click', () => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ClearPoints",
      "event_type": "click",
      "description": "Clear all training points.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ClearQueries",
      "event_type": "click",
      "description": "Clear all query points.",
      "trigger_selectors": [
        "#clearQueriesBtn"
      ],
      "evidence": [
        "clearQueriesBtn.addEventListener('click', () => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "ShuffleK",
      "event_type": "click",
      "description": "Shuffle the value of K based on the number of training points.",
      "trigger_selectors": [
        "#shuffleBtn"
      ],
      "evidence": [
        "shuffleBtn.addEventListener('click', () => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "AddClass",
      "event_type": "click",
      "description": "Add a new class for training points.",
      "trigger_selectors": [
        "#addClassBtn"
      ],
      "evidence": [
        "addClassBtn.addEventListener('click', () => {...})"
      ],
      "confidence": 1
    },
    {
      "id": "RemoveClass",
      "event_type": "click",
      "description": "Remove the last class from the training.",
      "trigger_selectors": [
        "#removeClassBtn"
      ],
      "evidence": [
        "removeClassBtn.addEventListener('click', () => {...})"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_AddingPoints",
      "event": "ChangeMode",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "modeSelect.addEventListener('change', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S2_PlacingQuery",
      "event": "ChangeMode",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "modeSelect.addEventListener('change', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "from": "S1_AddingPoints",
      "to": "S1_AddingPoints",
      "event": "LeftClick_AddPoint",
      "actions": [
        "addTrainingPoint(norm.x, norm.y, activeClass)",
        "render()"
      ],
      "expected_observables": [],
      "evidence": [
        "canvas.addEventListener('mousedown', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "from": "S2_PlacingQuery",
      "to": "S2_PlacingQuery",
      "event": "RightClick_AddQuery",
      "actions": [
        "addQuery(norm)",
        "render()"
      ],
      "expected_observables": [],
      "evidence": [
        "canvas.addEventListener('mousedown', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "from": "S1_AddingPoints",
      "to": "S2_PlacingQuery",
      "event": "RightClick_AddQuery",
      "actions": [
        "addQuery(norm)",
        "render()"
      ],
      "expected_observables": [],
      "evidence": [
        "canvas.addEventListener('mousedown', (e) => {...})"
      ],
      "confidence": 1
    },
    {
      "from": "S2_PlacingQuery",
      "to": "S1_AddingPoints",
      "event": "LeftClick_AddPoint",
      "actions": [
        "addTrainingPoint(norm.x, norm.y, activeClass)",
        "render()"
      ],
      "expected_observables": [],
      "evidence": [
        "canvas.addEventListener('mousedown', (e) => {...})"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "canvas",
      "selector": "#plot",
      "text": "",
      "attributes": {
        "width": "720",
        "height": "540"
      },
      "evidence": [
        "<canvas id=\"plot\" width=\"720\" height=\"540\"></canvas>"
      ]
    },
    {
      "type": "select",
      "selector": "#mode",
      "text": "Mode",
      "attributes": {},
      "evidence": [
        "<select id=\"mode\">"
      ]
    },
    {
      "type": "select",
      "selector": "#classSelect",
      "text": "Active class",
      "attributes": {},
      "evidence": [
        "<select id=\"classSelect\"></select>"
      ]
    },
    {
      "type": "input",
      "selector": "#k",
      "text": "K",
      "attributes": {
        "type": "range",
        "min": "1",
        "max": "25",
        "value": "3"
      },
      "evidence": [
        "<input id=\"k\" type=\"range\" min=\"1\" max=\"25\" value=\"3\"/>"
      ]
    },
    {
      "type": "select",
      "selector": "#metric",
      "text": "Distance",
      "attributes": {},
      "evidence": [
        "<select id=\"metric\">"
      ]
    },
    {
      "type": "select",
      "selector": "#weighting",
      "text": "Weighting",
      "attributes": {},
      "evidence": [
        "<select id=\"weighting\">"
      ]
    },
    {
      "type": "input",
      "selector": "#drawBoundary",
      "text": "Decision boundary",
      "attributes": {
        "type": "checkbox",
        "checked": "true"
      },
      "evidence": [
        "<input type=\"checkbox\" id=\"drawBoundary\" checked/>"
      ]
    },
    {
      "type": "button",
      "selector": "#genBtn",
      "text": "Generate random clusters",
      "attributes": {},
      "evidence": [
        "<button id=\"genBtn\" class=\"btn\">Generate random clusters</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear training points",
      "attributes": {},
      "evidence": [
        "<button id=\"clearBtn\" class=\"btn\">Clear training points</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearQueriesBtn",
      "text": "Clear queries",
      "attributes": {},
      "evidence": [
        "<button id=\"clearQueriesBtn\" class=\"btn\">Clear queries</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#shuffleBtn",
      "text": "Shuffle K (auto adjust)",
      "attributes": {},
      "evidence": [
        "<button id=\"shuffleBtn\" class=\"btn\">Shuffle K (auto adjust)</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#addClassBtn",
      "text": "Add class",
      "attributes": {},
      "evidence": [
        "<button id=\"addClassBtn\" class=\"btn\">Add class</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#removeClassBtn",
      "text": "Remove last",
      "attributes": {},
      "evidence": [
        "<button id=\"removeClassBtn\" class=\"btn\">Remove last</button>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-01T00:00:00Z",
    "detected_components_count": 12,
    "detected_components": [
      {
        "type": "canvas",
        "selector": "#plot"
      },
      {
        "type": "select",
        "selector": "#mode"
      },
      {
        "type": "select",
        "selector": "#classSelect"
      },
      {
        "type": "input",
        "selector": "#k"
      },
      {
        "type": "select",
        "selector": "#metric"
      },
      {
        "type": "select",
        "selector": "#weighting"
      },
      {
        "type": "input",
        "selector": "#drawBoundary"
      },
      {
        "type": "button",
        "selector": "#genBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#clearQueriesBtn"
      },
      {
        "type": "button",
        "selector": "#shuffleBtn"
      },
      {
        "type": "button",
        "selector": "#addClassBtn"
      },
      {
        "type": "button",
        "selector": "#removeClassBtn"
      }
    ],
    "detected_event_handlers_count": 15,
    "detected_event_handlers": [
      "canvas.addEventListener('contextmenu', (e) => { e.preventDefault(); });",
      "canvas.addEventListener('mousedown', (e) => {...});",
      "modeSelect.addEventListener('change', (e) => {...});",
      "kSlider.addEventListener('input', (e) => {...});",
      "kSlider.addEventListener('change', (e) => {...});",
      "metricSelect.addEventListener('change', (e) => {...});",
      "weightingSelect.addEventListener('change', (e) => {...});",
      "drawBoundaryCheckbox.addEventListener('change', (e) => {...});",
      "genBtn.addEventListener('click', () => {...});",
      "clearBtn.addEventListener('click', () => {...});",
      "clearQueriesBtn.addEventListener('click', () => {...});",
      "shuffleBtn.addEventListener('click', () => {...});",
      "addClassBtn.addEventListener('click', () => {...});",
      "removeClassBtn.addEventListener('click', () => {...});"
    ],
    "extracted_states_count": 3,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": [
      "All interactive elements and their behaviors are well defined.",
      "The FSM captures all possible states and transitions based on user interactions."
    ]
  }
}