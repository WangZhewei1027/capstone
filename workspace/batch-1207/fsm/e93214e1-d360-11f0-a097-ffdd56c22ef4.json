{
  "meta": {
    "concept": "Stack Visualization & Demo",
    "topic": "Stack",
    "educational_goal": "Demonstrate stack operations (push, pop, peek) and their visual representation.",
    "expected_interactions": [
      "Push values onto the stack",
      "Pop values from the stack",
      "Peek at the top value",
      "Clear the stack",
      "Check if the stack is empty",
      "Set stack capacity",
      "Fill the stack with random values",
      "Run a sequence of stack operations"
    ]
  },
  "states": [
    {
      "id": "S0_Initial",
      "label": "Initial State",
      "type": "default",
      "entry_actions": [
        "updateUI()"
      ],
      "exit_actions": [],
      "evidence": [
        "const stack = new Stack(0);",
        "updateUI();"
      ],
      "confidence": 1
    },
    {
      "id": "S1_StackNotEmpty",
      "label": "Stack Not Empty",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "this._arr.length > 0"
      ],
      "confidence": 1
    },
    {
      "id": "S2_StackEmpty",
      "label": "Stack Empty",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "this._arr.length === 0"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "Push",
      "event_type": "click",
      "description": "Push a value onto the stack",
      "trigger_selectors": [
        "#pushBtn"
      ],
      "evidence": [
        "pushBtn.addEventListener('click', () => {",
        "stack.push(v);"
      ],
      "confidence": 1
    },
    {
      "id": "Pop",
      "event_type": "click",
      "description": "Pop a value from the stack",
      "trigger_selectors": [
        "#popBtn"
      ],
      "evidence": [
        "popBtn.addEventListener('click', () => {",
        "stack.pop();"
      ],
      "confidence": 1
    },
    {
      "id": "Peek",
      "event_type": "click",
      "description": "Peek at the top value of the stack",
      "trigger_selectors": [
        "#peekBtn"
      ],
      "evidence": [
        "peekBtn.addEventListener('click', () => {",
        "stack.peek();"
      ],
      "confidence": 1
    },
    {
      "id": "Clear",
      "event_type": "click",
      "description": "Clear the stack",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => {",
        "stack.clear();"
      ],
      "confidence": 1
    },
    {
      "id": "IsEmpty",
      "event_type": "click",
      "description": "Check if the stack is empty",
      "trigger_selectors": [
        "#isEmptyBtn"
      ],
      "evidence": [
        "isEmptyBtn.addEventListener('click', () => {",
        "stack.isEmpty();"
      ],
      "confidence": 1
    },
    {
      "id": "SetCapacity",
      "event_type": "click",
      "description": "Set the capacity of the stack",
      "trigger_selectors": [
        "#setCapBtn"
      ],
      "evidence": [
        "setCapBtn.addEventListener('click', () => {",
        "stack.capacity = n;"
      ],
      "confidence": 1
    },
    {
      "id": "FillRandom",
      "event_type": "click",
      "description": "Fill the stack with random values",
      "trigger_selectors": [
        "#fillBtn"
      ],
      "evidence": [
        "fillBtn.addEventListener('click', () => {",
        "stack.push(it);"
      ],
      "confidence": 1
    },
    {
      "id": "LoadExampleSequence",
      "event_type": "click",
      "description": "Load an example sequence into the input",
      "trigger_selectors": [
        "#exampleSeqBtn"
      ],
      "evidence": [
        "exampleSeqBtn.addEventListener('click', () => {",
        "sequenceInput.value = ["
      ],
      "confidence": 1
    },
    {
      "id": "RunSequence",
      "event_type": "click",
      "description": "Run a sequence of stack operations",
      "trigger_selectors": [
        "#runSeqBtn"
      ],
      "evidence": [
        "runSeqBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Initial",
      "to": "S1_StackNotEmpty",
      "event": "Push",
      "actions": [
        "stack.push(v)",
        "log(`push(\"${v}\")`)",
        "updateUI('push')"
      ],
      "expected_observables": [
        "Stack size increases",
        "Top index updates"
      ],
      "evidence": [
        "stack.push(v);",
        "updateUI('push');"
      ],
      "confidence": 1
    },
    {
      "from": "S1_StackNotEmpty",
      "to": "S1_StackNotEmpty",
      "event": "Pop",
      "actions": [
        "stack.pop()",
        "log(`pop() -> \"${v}\"`)",
        "updateUI('pop')"
      ],
      "expected_observables": [
        "Stack size decreases",
        "Top index updates"
      ],
      "evidence": [
        "stack.pop();",
        "updateUI('pop');"
      ],
      "confidence": 1
    },
    {
      "from": "S1_StackNotEmpty",
      "to": "S2_StackEmpty",
      "event": "Pop",
      "actions": [
        "if (stack.isEmpty()) { log('Stack underflow: stack is empty', true); }"
      ],
      "expected_observables": [
        "Stack size remains the same"
      ],
      "evidence": [
        "if (this.isEmpty()) { throw new Error('Stack underflow: stack is empty'); }"
      ],
      "confidence": 1
    },
    {
      "from": "S1_StackNotEmpty",
      "to": "S1_StackNotEmpty",
      "event": "Peek",
      "actions": [
        "stack.peek()",
        "log(`peek() -> \"${v}\"`)"
      ],
      "expected_observables": [
        "Top value is displayed"
      ],
      "evidence": [
        "stack.peek();",
        "log(`peek() -> \"${v}\"`);"
      ],
      "confidence": 1
    },
    {
      "from": "S1_StackNotEmpty",
      "to": "S2_StackEmpty",
      "event": "Clear",
      "actions": [
        "stack.clear()",
        "log('clear() -> stack emptied')",
        "updateUI()"
      ],
      "expected_observables": [
        "Stack size becomes zero"
      ],
      "evidence": [
        "stack.clear();",
        "updateUI();"
      ],
      "confidence": 1
    },
    {
      "from": "S2_StackEmpty",
      "to": "S2_StackEmpty",
      "event": "IsEmpty",
      "actions": [
        "stack.isEmpty()",
        "log(`isEmpty() -> ${res}`)"
      ],
      "expected_observables": [
        "Confirmation that stack is empty"
      ],
      "evidence": [
        "const res = stack.isEmpty();",
        "log(`isEmpty() -> ${res}`);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_StackEmpty",
      "to": "S1_StackNotEmpty",
      "event": "Push",
      "actions": [
        "stack.push(v)",
        "log(`push(\"${v}\")`)",
        "updateUI('push')"
      ],
      "expected_observables": [
        "Stack size increases",
        "Top index updates"
      ],
      "evidence": [
        "stack.push(v);",
        "updateUI('push');"
      ],
      "confidence": 1
    },
    {
      "from": "S1_StackNotEmpty",
      "to": "S1_StackNotEmpty",
      "event": "SetCapacity",
      "actions": [
        "stack.capacity = n",
        "log(`capacity set to ${n > 0 ? n : '∞'}`)"
      ],
      "expected_observables": [
        "Capacity updates"
      ],
      "evidence": [
        "stack.capacity = n;",
        "log(`capacity set to ${n > 0 ? n : '∞'}`);"
      ],
      "confidence": 1
    },
    {
      "from": "S1_StackNotEmpty",
      "to": "S1_StackNotEmpty",
      "event": "FillRandom",
      "actions": [
        "for (const it of items) { stack.push(it); }",
        "log(`Filled ${n} random items`)"
      ],
      "expected_observables": [
        "Stack size increases by n"
      ],
      "evidence": [
        "stack.push(it);",
        "log(`Filled ${n} random items`);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Initial",
      "to": "S0_Initial",
      "event": "LoadExampleSequence",
      "actions": [
        "sequenceInput.value = [...]"
      ],
      "expected_observables": [
        "Example sequence loaded into input"
      ],
      "evidence": [
        "sequenceInput.value = [",
        "exampleSeqBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Initial",
      "to": "S0_Initial",
      "event": "RunSequence",
      "actions": [
        "for (const line of raw) {",
        "execute commands"
      ],
      "expected_observables": [
        "Commands executed in sequence"
      ],
      "evidence": [
        "runSeqBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#valueInput",
      "text": "Value to push (any text)",
      "attributes": {
        "type": "text",
        "placeholder": "Value to push (any text)"
      },
      "evidence": [
        "<input id=\"valueInput\" type=\"text\" placeholder=\"Value to push (any text)\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#pushBtn",
      "text": "Push",
      "attributes": {},
      "evidence": [
        "<button id=\"pushBtn\">Push</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#popBtn",
      "text": "Pop",
      "attributes": {
        "class": "alt"
      },
      "evidence": [
        "<button id=\"popBtn\" class=\"alt\">Pop</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#peekBtn",
      "text": "Peek",
      "attributes": {
        "class": "alt"
      },
      "evidence": [
        "<button id=\"peekBtn\" class=\"alt\">Peek</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {
        "class": "alt"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"alt\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#isEmptyBtn",
      "text": "Is Empty?",
      "attributes": {
        "class": "alt"
      },
      "evidence": [
        "<button id=\"isEmptyBtn\" class=\"alt\">Is Empty?</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#capacityInput",
      "text": "Optional capacity (0 = unlimited)",
      "attributes": {
        "type": "number",
        "min": "0",
        "placeholder": "Optional capacity (0 = unlimited)"
      },
      "evidence": [
        "<input id=\"capacityInput\" type=\"number\" min=\"0\" placeholder=\"Optional capacity (0 = unlimited)\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#setCapBtn",
      "text": "Set Capacity",
      "attributes": {
        "class": "alt"
      },
      "evidence": [
        "<button id=\"setCapBtn\" class=\"alt\">Set Capacity</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#fillCount",
      "text": "Random fill count",
      "attributes": {
        "type": "number",
        "min": "1",
        "placeholder": "Random fill count"
      },
      "evidence": [
        "<input id=\"fillCount\" type=\"number\" min=\"1\" placeholder=\"Random fill count\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#fillBtn",
      "text": "Fill Random",
      "attributes": {
        "class": "alt"
      },
      "evidence": [
        "<button id=\"fillBtn\" class=\"alt\">Fill Random</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#exampleSeqBtn",
      "text": "Load Example Sequence",
      "attributes": {
        "class": "alt"
      },
      "evidence": [
        "<button id=\"exampleSeqBtn\" class=\"alt\">Load Example Sequence</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runSeqBtn",
      "text": "Run Sequence",
      "attributes": {},
      "evidence": [
        "<button id=\"runSeqBtn\">Run Sequence</button>"
      ]
    },
    {
      "type": "textarea",
      "selector": "#sequenceInput",
      "text": "Sequence (one command per line). Commands: push <value>, pop, peek, clear, wait <ms>.",
      "attributes": {
        "class": "sequence-input",
        "placeholder": "Sequence (one command per line). Commands: push <value>, pop, peek, clear, wait <ms>."
      },
      "evidence": [
        "<textarea id=\"sequenceInput\" class=\"sequence-input\" placeholder=\"Sequence (one command per line). Commands: push <value>, pop, peek, clear, wait <ms>.\" ></textarea>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-12T12:00:00Z",
    "detected_components_count": 12,
    "detected_components": [
      {
        "type": "input",
        "selector": "#valueInput",
        "text": "Value to push (any text)",
        "attributes": {
          "type": "text",
          "placeholder": "Value to push (any text)"
        }
      },
      {
        "type": "button",
        "selector": "#pushBtn",
        "text": "Push",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#popBtn",
        "text": "Pop",
        "attributes": {
          "class": "alt"
        }
      },
      {
        "type": "button",
        "selector": "#peekBtn",
        "text": "Peek",
        "attributes": {
          "class": "alt"
        }
      },
      {
        "type": "button",
        "selector": "#clearBtn",
        "text": "Clear",
        "attributes": {
          "class": "alt"
        }
      },
      {
        "type": "button",
        "selector": "#isEmptyBtn",
        "text": "Is Empty?",
        "attributes": {
          "class": "alt"
        }
      },
      {
        "type": "input",
        "selector": "#capacityInput",
        "text": "Optional capacity (0 = unlimited)",
        "attributes": {
          "type": "number",
          "min": "0",
          "placeholder": "Optional capacity (0 = unlimited)"
        }
      },
      {
        "type": "button",
        "selector": "#setCapBtn",
        "text": "Set Capacity",
        "attributes": {
          "class": "alt"
        }
      },
      {
        "type": "input",
        "selector": "#fillCount",
        "text": "Random fill count",
        "attributes": {
          "type": "number",
          "min": "1",
          "placeholder": "Random fill count"
        }
      },
      {
        "type": "button",
        "selector": "#fillBtn",
        "text": "Fill Random",
        "attributes": {
          "class": "alt"
        }
      },
      {
        "type": "button",
        "selector": "#exampleSeqBtn",
        "text": "Load Example Sequence",
        "attributes": {
          "class": "alt"
        }
      },
      {
        "type": "button",
        "selector": "#runSeqBtn",
        "text": "Run Sequence",
        "attributes": {}
      }
    ],
    "detected_event_handlers_count": 9,
    "detected_event_handlers": [
      "pushBtn.addEventListener('click', () => {",
      "popBtn.addEventListener('click', () => {",
      "peekBtn.addEventListener('click', () => {",
      "clearBtn.addEventListener('click', () => {",
      "isEmptyBtn.addEventListener('click', () => {",
      "setCapBtn.addEventListener('click', () => {",
      "fillBtn.addEventListener('click', () => {",
      "exampleSeqBtn.addEventListener('click', () => {",
      "runSeqBtn.addEventListener('click', async () => {"
    ],
    "extracted_states_count": 3,
    "extracted_transitions_count": 12,
    "extraction_confidence": 1,
    "notes": []
  }
}