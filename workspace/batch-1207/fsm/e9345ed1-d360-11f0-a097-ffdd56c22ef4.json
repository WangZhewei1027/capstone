{
  "meta": {
    "concept": "Prim's Algorithm Interactive Demo",
    "topic": "Prim's Algorithm",
    "educational_goal": "Understand and visualize Prim's Algorithm for Minimum Spanning Tree",
    "expected_interactions": [
      "Add Node",
      "Add Edge",
      "Delete Mode",
      "Random Graph",
      "Clear Graph",
      "Initialize Prim",
      "Next Step",
      "Auto Play",
      "Pause",
      "Reset Steps"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "normal",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "<button id=\"addNodeBtn\">Add Node (click canvas)</button>",
        "<button id=\"addEdgeBtn\">Add Edge (click two nodes)</button>",
        "<button id=\"deleteBtn\">Delete Mode</button>",
        "<button id=\"randomBtn\">Random Graph</button>",
        "<button id=\"clearBtn\">Clear Graph</button>",
        "<button id=\"runBtn\" class=\"btn-primary\">Init Prim</button>",
        "<button id=\"stepBtn\">Next Step</button>",
        "<button id=\"autoBtn\">Auto Play</button>",
        "<button id=\"pauseBtn\">Pause</button>",
        "<button id=\"resetBtn\">Reset Steps</button>"
      ],
      "confidence": 1
    },
    {
      "id": "S1_AddNode",
      "label": "Adding Node",
      "type": "interactive",
      "entry_actions": [
        "log('Click on canvas to add a node.')"
      ],
      "exit_actions": [
        "draw()"
      ],
      "evidence": [
        "mode = 'addNode';",
        "addNodeBtn.addEventListener('click', ()=> { mode = 'addNode'; updateModeButtons(); log(\"Click on canvas to add a node.\"); });"
      ],
      "confidence": 1
    },
    {
      "id": "S2_AddEdge",
      "label": "Adding Edge",
      "type": "interactive",
      "entry_actions": [
        "log('Click two nodes to add an edge.')"
      ],
      "exit_actions": [
        "draw()"
      ],
      "evidence": [
        "mode = 'addEdge';",
        "addEdgeBtn.addEventListener('click', ()=> { mode = 'addEdge'; pendingEdgeFrom = null; updateModeButtons(); log(\"Click two nodes to add an edge.\"); });"
      ],
      "confidence": 1
    },
    {
      "id": "S3_DeleteMode",
      "label": "Delete Mode",
      "type": "interactive",
      "entry_actions": [
        "log('Delete mode: click node or edge to remove.')"
      ],
      "exit_actions": [
        "draw()"
      ],
      "evidence": [
        "mode = 'delete';",
        "deleteBtn.addEventListener('click', ()=> { mode = (mode==='delete') ? 'none' : 'delete'; updateModeButtons(); log(mode==='delete' ? \"Delete mode: click node or edge to remove.\" : \"Delete mode disabled.\"); });"
      ],
      "confidence": 1
    },
    {
      "id": "S4_PrimInitialized",
      "label": "Prim Initialized",
      "type": "algorithm",
      "entry_actions": [
        "log('Prim initialized. Start from node ' + start + '. Keys set. Ready to step.')"
      ],
      "exit_actions": [
        "updateNodeTable()",
        "draw()"
      ],
      "evidence": [
        "primState.initialized = true;",
        "runBtn.addEventListener('click', ()=> initPrim());"
      ],
      "confidence": 1
    },
    {
      "id": "S5_PrimStepping",
      "label": "Prim Stepping",
      "type": "algorithm",
      "entry_actions": [
        "log('Step ' + primState.stepCount + ': Select node ' + u + ' (key=' + primState.key[u] + ') and add edge ' + p + 'â€”' + u + ' to MST.')"
      ],
      "exit_actions": [
        "updateNodeTable()",
        "draw()"
      ],
      "evidence": [
        "primStep();",
        "stepBtn.addEventListener('click', ()=> primStep());"
      ],
      "confidence": 1
    },
    {
      "id": "S6_AutoPlaying",
      "label": "Auto Playing",
      "type": "algorithm",
      "entry_actions": [
        "log('Auto-play started.')"
      ],
      "exit_actions": [
        "stopAuto()"
      ],
      "evidence": [
        "autoTimer = setInterval(()=>{ if(primState.finished) stopAuto(); else primStep(); }, AUTO_DELAY);",
        "autoBtn.addEventListener('click', ()=> startAuto());"
      ],
      "confidence": 1
    },
    {
      "id": "S7_Paused",
      "label": "Paused",
      "type": "algorithm",
      "entry_actions": [
        "log('Auto-play paused.')"
      ],
      "exit_actions": [],
      "evidence": [
        "stopAuto();",
        "pauseBtn.addEventListener('click', ()=> stopAuto());"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "AddNode",
      "event_type": "click",
      "description": "Click to add a node on the canvas",
      "trigger_selectors": [
        "#addNodeBtn"
      ],
      "evidence": [
        "addNodeBtn.addEventListener('click', ()=> { mode = 'addNode'; updateModeButtons(); log(\"Click on canvas to add a node.\"); });"
      ],
      "confidence": 1
    },
    {
      "id": "AddEdge",
      "event_type": "click",
      "description": "Click to add an edge between two nodes",
      "trigger_selectors": [
        "#addEdgeBtn"
      ],
      "evidence": [
        "addEdgeBtn.addEventListener('click', ()=> { mode = 'addEdge'; pendingEdgeFrom = null; updateModeButtons(); log(\"Click two nodes to add an edge.\"); });"
      ],
      "confidence": 1
    },
    {
      "id": "DeleteMode",
      "event_type": "click",
      "description": "Click to enable delete mode",
      "trigger_selectors": [
        "#deleteBtn"
      ],
      "evidence": [
        "deleteBtn.addEventListener('click', ()=> { mode = (mode==='delete') ? 'none' : 'delete'; updateModeButtons(); log(mode==='delete' ? \"Delete mode: click node or edge to remove.\" : \"Delete mode disabled.\"); });"
      ],
      "confidence": 1
    },
    {
      "id": "RandomGraph",
      "event_type": "click",
      "description": "Click to create a random graph",
      "trigger_selectors": [
        "#randomBtn"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', ()=> createRandomGraph());"
      ],
      "confidence": 1
    },
    {
      "id": "ClearGraph",
      "event_type": "click",
      "description": "Click to clear the graph",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', ()=> { if(confirm(\"Clear entire graph?\")) clearGraph(); });"
      ],
      "confidence": 1
    },
    {
      "id": "InitPrim",
      "event_type": "click",
      "description": "Click to initialize Prim's algorithm",
      "trigger_selectors": [
        "#runBtn"
      ],
      "evidence": [
        "runBtn.addEventListener('click', ()=> initPrim());"
      ],
      "confidence": 1
    },
    {
      "id": "NextStep",
      "event_type": "click",
      "description": "Click to perform the next step of Prim's algorithm",
      "trigger_selectors": [
        "#stepBtn"
      ],
      "evidence": [
        "stepBtn.addEventListener('click', ()=> primStep());"
      ],
      "confidence": 1
    },
    {
      "id": "AutoPlay",
      "event_type": "click",
      "description": "Click to start auto playing Prim's algorithm",
      "trigger_selectors": [
        "#autoBtn"
      ],
      "evidence": [
        "autoBtn.addEventListener('click', ()=> startAuto());"
      ],
      "confidence": 1
    },
    {
      "id": "Pause",
      "event_type": "click",
      "description": "Click to pause auto play",
      "trigger_selectors": [
        "#pauseBtn"
      ],
      "evidence": [
        "pauseBtn.addEventListener('click', ()=> stopAuto());"
      ],
      "confidence": 1
    },
    {
      "id": "ResetSteps",
      "event_type": "click",
      "description": "Click to reset the steps of Prim's algorithm",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ()=> resetPrim());"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_AddNode",
      "event": "AddNode",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "mode = 'addNode';"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S2_AddEdge",
      "event": "AddEdge",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "mode = 'addEdge';"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_DeleteMode",
      "event": "DeleteMode",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "mode = 'delete';"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_PrimInitialized",
      "event": "InitPrim",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "primState.initialized = true;"
      ],
      "confidence": 1
    },
    {
      "from": "S4_PrimInitialized",
      "to": "S5_PrimStepping",
      "event": "NextStep",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "primStep();"
      ],
      "confidence": 1
    },
    {
      "from": "S4_PrimInitialized",
      "to": "S6_AutoPlaying",
      "event": "AutoPlay",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "autoTimer = setInterval(()=>{ if(primState.finished) stopAuto(); else primStep(); }, AUTO_DELAY);"
      ],
      "confidence": 1
    },
    {
      "from": "S6_AutoPlaying",
      "to": "S7_Paused",
      "event": "Pause",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "stopAuto();"
      ],
      "confidence": 1
    },
    {
      "from": "S7_Paused",
      "to": "S6_AutoPlaying",
      "event": "AutoPlay",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "autoTimer = setInterval(()=>{ if(primState.finished) stopAuto(); else primStep(); }, AUTO_DELAY);"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#addNodeBtn",
      "text": "Add Node (click canvas)",
      "attributes": {},
      "evidence": [
        "<button id=\"addNodeBtn\">Add Node (click canvas)</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#addEdgeBtn",
      "text": "Add Edge (click two nodes)",
      "attributes": {},
      "evidence": [
        "<button id=\"addEdgeBtn\">Add Edge (click two nodes)</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#deleteBtn",
      "text": "Delete Mode",
      "attributes": {},
      "evidence": [
        "<button id=\"deleteBtn\">Delete Mode</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randomBtn",
      "text": "Random Graph",
      "attributes": {},
      "evidence": [
        "<button id=\"randomBtn\">Random Graph</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear Graph",
      "attributes": {},
      "evidence": [
        "<button id=\"clearBtn\">Clear Graph</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runBtn",
      "text": "Init Prim",
      "attributes": {
        "class": "btn-primary"
      },
      "evidence": [
        "<button id=\"runBtn\" class=\"btn-primary\">Init Prim</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBtn",
      "text": "Next Step",
      "attributes": {},
      "evidence": [
        "<button id=\"stepBtn\">Next Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#autoBtn",
      "text": "Auto Play",
      "attributes": {},
      "evidence": [
        "<button id=\"autoBtn\">Auto Play</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#pauseBtn",
      "text": "Pause",
      "attributes": {},
      "evidence": [
        "<button id=\"pauseBtn\">Pause</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset Steps",
      "attributes": {},
      "evidence": [
        "<button id=\"resetBtn\">Reset Steps</button>"
      ]
    },
    {
      "type": "select",
      "selector": "#startSelect",
      "text": "Choose start node",
      "attributes": {
        "title": "Choose start node"
      },
      "evidence": [
        "<select id=\"startSelect\" title=\"Choose start node\"><option value=\"\">Start Node</option></select>"
      ]
    },
    {
      "type": "canvas",
      "selector": "#graphCanvas",
      "text": "",
      "attributes": {
        "width": "740",
        "height": "620"
      },
      "evidence": [
        "<canvas id=\"graphCanvas\" width=\"740\" height=\"620\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-10T00:00:00Z",
    "detected_components_count": 12,
    "detected_components": [
      {
        "type": "button",
        "selector": "#addNodeBtn",
        "text": "Add Node (click canvas)",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#addEdgeBtn",
        "text": "Add Edge (click two nodes)",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#deleteBtn",
        "text": "Delete Mode",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#randomBtn",
        "text": "Random Graph",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#clearBtn",
        "text": "Clear Graph",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#runBtn",
        "text": "Init Prim",
        "attributes": {
          "class": "btn-primary"
        }
      },
      {
        "type": "button",
        "selector": "#stepBtn",
        "text": "Next Step",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#autoBtn",
        "text": "Auto Play",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#pauseBtn",
        "text": "Pause",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#resetBtn",
        "text": "Reset Steps",
        "attributes": {}
      },
      {
        "type": "select",
        "selector": "#startSelect",
        "text": "Choose start node",
        "attributes": {
          "title": "Choose start node"
        }
      },
      {
        "type": "canvas",
        "selector": "#graphCanvas",
        "text": "",
        "attributes": {
          "width": "740",
          "height": "620"
        }
      }
    ],
    "detected_event_handlers_count": 12,
    "detected_event_handlers": [
      "addNodeBtn.addEventListener('click', ()=> { mode = 'addNode'; updateModeButtons(); log('Click on canvas to add a node.'); });",
      "addEdgeBtn.addEventListener('click', ()=> { mode = 'addEdge'; pendingEdgeFrom = null; updateModeButtons(); log('Click two nodes to add an edge.'); });",
      "deleteBtn.addEventListener('click', ()=> { mode = (mode==='delete') ? 'none' : 'delete'; updateModeButtons(); log(mode==='delete' ? 'Delete mode: click node or edge to remove.' : 'Delete mode disabled.'); });",
      "randomBtn.addEventListener('click', ()=> createRandomGraph());",
      "clearBtn.addEventListener('click', ()=> { if(confirm('Clear entire graph?')) clearGraph(); });",
      "runBtn.addEventListener('click', ()=> initPrim());",
      "stepBtn.addEventListener('click', ()=> primStep());",
      "autoBtn.addEventListener('click', ()=> startAuto());",
      "pauseBtn.addEventListener('click', ()=> stopAuto());",
      "resetBtn.addEventListener('click', ()=> resetPrim());",
      "startSelect.addEventListener('change', ()=> { const v = startSelect.value; if(v==='') return; setStartNode(Number(v)); });",
      "canvas.addEventListener('click', (evt)=>{ const p = canvasPos(evt); ... });"
    ],
    "extracted_states_count": 8,
    "extracted_transitions_count": 9,
    "extraction_confidence": 1,
    "notes": [
      "All interactive elements and their behaviors are captured.",
      "The FSM reflects the complete interactivity of the application.",
      "State transitions are clearly defined based on user actions.",
      "Event handlers are directly linked to their respective components.",
      "The algorithm's steps are represented as states and transitions."
    ]
  }
}