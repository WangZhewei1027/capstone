{
  "meta": {
    "concept": "Counting Sort - Interactive Demo",
    "topic": "Counting Sort",
    "educational_goal": "To visualize the counting sort algorithm step by step.",
    "expected_interactions": [
      "Input an array",
      "Generate random array",
      "Run sorting",
      "Step through sorting",
      "Pause sorting",
      "Reset sorting"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "prepareFromInput()"
      ],
      "exit_actions": [],
      "evidence": [
        "arrInput.value = '4, 2, -1, 3, 2, 4, 0, -1'"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Running",
      "label": "Running",
      "type": "active",
      "entry_actions": [
        "runAuto()"
      ],
      "exit_actions": [
        "updateButtons()"
      ],
      "evidence": [
        "running = true",
        "paused = false"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Paused",
      "label": "Paused",
      "type": "active",
      "entry_actions": [],
      "exit_actions": [
        "updateButtons()"
      ],
      "evidence": [
        "paused = true",
        "running = false"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Step",
      "label": "Stepping",
      "type": "active",
      "entry_actions": [
        "stepOnce()"
      ],
      "exit_actions": [],
      "evidence": [
        "applyStep(res.value)"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Done",
      "label": "Done",
      "type": "final",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "yield {phase:'done'}"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "GenerateRandomArray",
      "event_type": "click",
      "description": "Generate a random array of integers.",
      "trigger_selectors": [
        "#btnRandom"
      ],
      "evidence": [
        "btnRandom.addEventListener('click', () => {",
        "const len = Math.max(1, Math.min(60, parseInt(randLen.value) || 8));"
      ],
      "confidence": 1
    },
    {
      "id": "RunSorting",
      "event_type": "click",
      "description": "Start running the sorting algorithm.",
      "trigger_selectors": [
        "#btnStart"
      ],
      "evidence": [
        "btnStart.addEventListener('click', async () => {",
        "if (running) return;"
      ],
      "confidence": 1
    },
    {
      "id": "PauseSorting",
      "event_type": "click",
      "description": "Pause the sorting algorithm.",
      "trigger_selectors": [
        "#btnPause"
      ],
      "evidence": [
        "btnPause.addEventListener('click', () => {",
        "if (!running) return;"
      ],
      "confidence": 1
    },
    {
      "id": "StepSorting",
      "event_type": "click",
      "description": "Step through the sorting algorithm one step at a time.",
      "trigger_selectors": [
        "#btnStep"
      ],
      "evidence": [
        "btnStep.addEventListener('click', () => {",
        "if (running) return;"
      ],
      "confidence": 1
    },
    {
      "id": "ResetSorting",
      "event_type": "click",
      "description": "Reset the sorting algorithm and visuals.",
      "trigger_selectors": [
        "#btnReset"
      ],
      "evidence": [
        "btnReset.addEventListener('click', () => {",
        "running = false;"
      ],
      "confidence": 1
    },
    {
      "id": "InputArray",
      "event_type": "keydown",
      "description": "Reset visuals when Enter is pressed in the input.",
      "trigger_selectors": [
        "#arrInput"
      ],
      "evidence": [
        "arrInput.addEventListener('keydown', (e) => {",
        "if (e.key === 'Enter') {"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeSpeed",
      "event_type": "input",
      "description": "Change the animation speed of the sorting.",
      "trigger_selectors": [
        "#speed"
      ],
      "evidence": [
        "speed.addEventListener('input', () => {",
        "speedLabel.textContent = speed.value + ' ms';"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Running",
      "event": "RunSorting",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "await runAuto();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Running",
      "to": "S2_Paused",
      "event": "PauseSorting",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "paused = true;"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Paused",
      "to": "S1_Running",
      "event": "RunSorting",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "paused = false;"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Running",
      "to": "S3_Step",
      "event": "StepSorting",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "applyStep(res.value);"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Step",
      "to": "S1_Running",
      "event": "RunSorting",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "await runAuto();"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Step",
      "to": "S4_Done",
      "event": "StepSorting",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "yield {phase:'done'}"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Running",
      "to": "S4_Done",
      "event": "RunSorting",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "yield {phase:'done'}"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#arrInput",
      "text": "4, 2, -1, 3, 2, 4, 0, -1",
      "attributes": {
        "type": "text",
        "value": "4, 2, -1, 3, 2, 4, 0, -1"
      },
      "evidence": [
        "<input id=\"arrInput\" type=\"text\" value=\"4, 2, -1, 3, 2, 4, 0, -1\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#btnRandom",
      "text": "Generate",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"btnRandom\" class=\"secondary\">Generate</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnStart",
      "text": "Run",
      "attributes": {},
      "evidence": [
        "<button id=\"btnStart\">Run</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnPause",
      "text": "Pause",
      "attributes": {
        "disabled": "true",
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"btnPause\" class=\"secondary\" disabled>Pause</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnStep",
      "text": "Step",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"btnStep\" class=\"secondary\">Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnReset",
      "text": "Reset",
      "attributes": {
        "class": "warn"
      },
      "evidence": [
        "<button id=\"btnReset\" class=\"warn\">Reset</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "220",
      "attributes": {
        "type": "range",
        "min": "10",
        "max": "1000",
        "value": "220"
      },
      "evidence": [
        "<input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"220\" />"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-02T00:00:00Z",
    "detected_components_count": 7,
    "detected_components": [
      {
        "type": "input",
        "selector": "#arrInput",
        "text": "4, 2, -1, 3, 2, 4, 0, -1",
        "attributes": {
          "type": "text",
          "value": "4, 2, -1, 3, 2, 4, 0, -1"
        }
      },
      {
        "type": "button",
        "selector": "#btnRandom",
        "text": "Generate",
        "attributes": {
          "class": "secondary"
        }
      },
      {
        "type": "button",
        "selector": "#btnStart",
        "text": "Run",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#btnPause",
        "text": "Pause",
        "attributes": {
          "disabled": "true",
          "class": "secondary"
        }
      },
      {
        "type": "button",
        "selector": "#btnStep",
        "text": "Step",
        "attributes": {
          "class": "secondary"
        }
      },
      {
        "type": "button",
        "selector": "#btnReset",
        "text": "Reset",
        "attributes": {
          "class": "warn"
        }
      },
      {
        "type": "input",
        "selector": "#speed",
        "text": "220",
        "attributes": {
          "type": "range",
          "min": "10",
          "max": "1000",
          "value": "220"
        }
      }
    ],
    "detected_event_handlers_count": 6,
    "detected_event_handlers": [
      "btnRandom.addEventListener('click', () => {",
      "btnStart.addEventListener('click', async () => {",
      "btnPause.addEventListener('click', () => {",
      "btnStep.addEventListener('click', () => {",
      "btnReset.addEventListener('click', () => {",
      "arrInput.addEventListener('keydown', (e) => {"
    ],
    "extracted_states_count": 5,
    "extracted_transitions_count": 7,
    "extraction_confidence": 1,
    "notes": []
  }
}