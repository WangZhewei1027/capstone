{
  "meta": {
    "concept": "Fibonacci Sequence Explorer",
    "topic": "Fibonacci Sequence",
    "educational_goal": "Explore methods, see performance, visualize growth & ratios",
    "expected_interactions": [
      "Compute Fibonacci number",
      "Generate sequence",
      "Copy result",
      "Download result",
      "Clear result",
      "Draw chart"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "<button id=\"computeBtn\">Compute</button>",
        "<button id=\"stopBtn\" class=\"small-btn\" disabled>Stop</button>"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Computing",
      "label": "Computing",
      "type": "default",
      "entry_actions": [
        "compute()"
      ],
      "exit_actions": [
        "stopRequested = false"
      ],
      "evidence": [
        "computeBtn.addEventListener('click', () => compute());"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Stopped",
      "label": "Stopped",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "stopBtn.addEventListener('click', () => { stopRequested = true; stopBtn.disabled = true; });"
      ],
      "confidence": 1
    },
    {
      "id": "S3_ResultDisplayed",
      "label": "Result Displayed",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "resultArea.value = `F(${n}) =\n` + Fn.toString();"
      ],
      "confidence": 1
    },
    {
      "id": "S4_SequenceGenerated",
      "label": "Sequence Generated",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "resultArea.value = lines.join('\\n');"
      ],
      "confidence": 1
    },
    {
      "id": "S5_ChartDrawn",
      "label": "Chart Drawn",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "drawChart(arrDigits, 0, arrDigits.length-1);"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "ComputeClick",
      "event_type": "click",
      "description": "User clicks the compute button to calculate Fibonacci number",
      "trigger_selectors": [
        "#computeBtn"
      ],
      "evidence": [
        "computeBtn.addEventListener('click', () => compute());"
      ],
      "confidence": 1
    },
    {
      "id": "StopClick",
      "event_type": "click",
      "description": "User clicks the stop button to stop computation",
      "trigger_selectors": [
        "#stopBtn"
      ],
      "evidence": [
        "stopBtn.addEventListener('click', () => { stopRequested = true; stopBtn.disabled = true; });"
      ],
      "confidence": 1
    },
    {
      "id": "CopyClick",
      "event_type": "click",
      "description": "User clicks the copy button to copy result to clipboard",
      "trigger_selectors": [
        "#copyBtn"
      ],
      "evidence": [
        "copyBtn.addEventListener('click', async () => { await navigator.clipboard.writeText(resultArea.value); });"
      ],
      "confidence": 1
    },
    {
      "id": "DownloadClick",
      "event_type": "click",
      "description": "User clicks the download button to download result as a text file",
      "trigger_selectors": [
        "#downloadBtn"
      ],
      "evidence": [
        "downloadBtn.addEventListener('click', () => { const blob = new Blob([resultArea.value], {type:'text/plain;charset=utf-8'}); });"
      ],
      "confidence": 1
    },
    {
      "id": "ClearClick",
      "event_type": "click",
      "description": "User clicks the clear button to clear the result area",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => { resultArea.value=''; });"
      ],
      "confidence": 1
    },
    {
      "id": "DrawClick",
      "event_type": "click",
      "description": "User clicks the draw button to draw the chart",
      "trigger_selectors": [
        "#drawBtn"
      ],
      "evidence": [
        "drawBtn.addEventListener('click', async () => { const s = Math.max(0, Math.floor(Number(chartStart.value))); });"
      ],
      "confidence": 1
    },
    {
      "id": "QuickExampleClick",
      "event_type": "click",
      "description": "User clicks a quick example button to compute Fibonacci for a preset value",
      "trigger_selectors": [
        "[data-n]"
      ],
      "evidence": [
        "document.querySelectorAll('[data-n]').forEach(btn => { btn.addEventListener('click', () => { nInput.value = btn.getAttribute('data-n'); }); });"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Computing",
      "event": "ComputeClick",
      "actions": [],
      "expected_observables": [
        "Computing Fibonacci number"
      ],
      "evidence": [
        "computeBtn.addEventListener('click', () => compute());"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Computing",
      "to": "S2_Stopped",
      "event": "StopClick",
      "actions": [],
      "expected_observables": [
        "Computation stopped"
      ],
      "evidence": [
        "stopBtn.addEventListener('click', () => { stopRequested = true; stopBtn.disabled = true; });"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Computing",
      "to": "S3_ResultDisplayed",
      "event": "ComputeClick",
      "actions": [],
      "expected_observables": [
        "Result displayed"
      ],
      "evidence": [
        "resultArea.value = `F(${n}) =\\n` + Fn.toString();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Computing",
      "to": "S4_SequenceGenerated",
      "event": "ComputeClick",
      "actions": [],
      "expected_observables": [
        "Full sequence generated"
      ],
      "evidence": [
        "resultArea.value = lines.join('\\n');"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Computing",
      "to": "S5_ChartDrawn",
      "event": "DrawClick",
      "actions": [],
      "expected_observables": [
        "Chart drawn"
      ],
      "evidence": [
        "drawChart(arrDigits, 0, arrDigits.length-1);"
      ],
      "confidence": 1
    },
    {
      "from": "S3_ResultDisplayed",
      "to": "S0_Idle",
      "event": "ClearClick",
      "actions": [],
      "expected_observables": [
        "Result area cleared"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => { resultArea.value=''; });"
      ],
      "confidence": 1
    },
    {
      "from": "S3_ResultDisplayed",
      "to": "S0_Idle",
      "event": "CopyClick",
      "actions": [],
      "expected_observables": [
        "Result copied to clipboard"
      ],
      "evidence": [
        "copyBtn.addEventListener('click', async () => { await navigator.clipboard.writeText(resultArea.value); });"
      ],
      "confidence": 1
    },
    {
      "from": "S3_ResultDisplayed",
      "to": "S0_Idle",
      "event": "DownloadClick",
      "actions": [],
      "expected_observables": [
        "Result downloaded"
      ],
      "evidence": [
        "downloadBtn.addEventListener('click', () => { const blob = new Blob([resultArea.value], {type:'text/plain;charset=utf-8'}); });"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#nInput",
      "text": "",
      "attributes": {
        "type": "number",
        "value": "100",
        "min": "0",
        "max": "10000",
        "step": "1"
      },
      "evidence": [
        "<input id=\"nInput\" type=\"number\" value=\"100\" min=\"0\" max=\"10000\" step=\"1\"/>"
      ]
    },
    {
      "type": "select",
      "selector": "#methodSelect",
      "text": "",
      "attributes": {},
      "evidence": [
        "<select id=\"methodSelect\">"
      ]
    },
    {
      "type": "select",
      "selector": "#modeSelect",
      "text": "",
      "attributes": {},
      "evidence": [
        "<select id=\"modeSelect\">"
      ]
    },
    {
      "type": "button",
      "selector": "#computeBtn",
      "text": "Compute",
      "attributes": {},
      "evidence": [
        "<button id=\"computeBtn\">Compute</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stopBtn",
      "text": "Stop",
      "attributes": {
        "class": "small-btn",
        "disabled": "true"
      },
      "evidence": [
        "<button id=\"stopBtn\" class=\"small-btn\" disabled>Stop</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#copyBtn",
      "text": "Copy",
      "attributes": {
        "class": "small-btn"
      },
      "evidence": [
        "<button id=\"copyBtn\" class=\"small-btn\">Copy</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#downloadBtn",
      "text": "Download .txt",
      "attributes": {
        "class": "small-btn"
      },
      "evidence": [
        "<button id=\"downloadBtn\" class=\"small-btn\">Download .txt</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {
        "class": "small-btn"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"small-btn\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#drawBtn",
      "text": "Draw",
      "attributes": {
        "class": "small-btn"
      },
      "evidence": [
        "<button id=\"drawBtn\" class=\"small-btn\">Draw</button>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-04T00:00:00Z",
    "detected_components_count": 9,
    "detected_components": [
      {
        "type": "input",
        "selector": "#nInput"
      },
      {
        "type": "select",
        "selector": "#methodSelect"
      },
      {
        "type": "select",
        "selector": "#modeSelect"
      },
      {
        "type": "button",
        "selector": "#computeBtn"
      },
      {
        "type": "button",
        "selector": "#stopBtn"
      },
      {
        "type": "button",
        "selector": "#copyBtn"
      },
      {
        "type": "button",
        "selector": "#downloadBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#drawBtn"
      }
    ],
    "detected_event_handlers_count": 7,
    "detected_event_handlers": [
      "computeBtn.addEventListener('click', () => compute());",
      "stopBtn.addEventListener('click', () => { stopRequested = true; stopBtn.disabled = true; });",
      "copyBtn.addEventListener('click', async () => { await navigator.clipboard.writeText(resultArea.value); });",
      "downloadBtn.addEventListener('click', () => { const blob = new Blob([resultArea.value], {type:'text/plain;charset=utf-8'}); });",
      "clearBtn.addEventListener('click', () => { resultArea.value=''; });",
      "drawBtn.addEventListener('click', async () => { const s = Math.max(0, Math.floor(Number(chartStart.value))); });",
      "document.querySelectorAll('[data-n]').forEach(btn => { btn.addEventListener('click', () => { nInput.value = btn.getAttribute('data-n'); }); });"
    ],
    "extracted_states_count": 6,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}