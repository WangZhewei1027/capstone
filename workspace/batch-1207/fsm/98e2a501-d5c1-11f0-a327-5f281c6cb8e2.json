{
  "meta": {
    "concept": "Huffman Coding Visualizer",
    "topic": "Huffman Coding",
    "educational_goal": "To visualize the process of building a Huffman tree and encoding/decoding text.",
    "expected_interactions": [
      "Build Huffman Tree",
      "Step Through Tree Construction",
      "Encode Text",
      "Decode Bits"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "inputText.value = samples[0]",
        "buildFromInput()"
      ],
      "confidence": 1
    },
    {
      "id": "S1_TreeBuilt",
      "label": "Tree Built",
      "type": "normal",
      "entry_actions": [
        "renderStep()"
      ],
      "exit_actions": [],
      "evidence": [
        "steps.length > 0"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Encoding",
      "label": "Encoding",
      "type": "normal",
      "entry_actions": [
        "doEncode()"
      ],
      "exit_actions": [],
      "evidence": [
        "currentCodes"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Decoding",
      "label": "Decoding",
      "type": "normal",
      "entry_actions": [
        "doDecode()"
      ],
      "exit_actions": [],
      "evidence": [
        "nodes.length > 0"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "BuildTree",
      "event_type": "click",
      "description": "Builds the Huffman tree from input text or frequencies.",
      "trigger_selectors": [
        "#buildBtn"
      ],
      "evidence": [
        "buildBtn.addEventListener('click', buildFromInput)"
      ],
      "confidence": 1
    },
    {
      "id": "RandomSample",
      "event_type": "click",
      "description": "Fills the input text area with a random sample.",
      "trigger_selectors": [
        "#randomBtn"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', ()=>{ inputText.value = samples[Math.floor(Math.random()*samples.length)] })"
      ],
      "confidence": 1
    },
    {
      "id": "StepForward",
      "event_type": "click",
      "description": "Steps forward through the tree construction.",
      "trigger_selectors": [
        "#stepForward"
      ],
      "evidence": [
        "stepForward.addEventListener('click', ()=>{ stepIndex = Math.min(stepIndex+1, steps.length); renderStep() })"
      ],
      "confidence": 1
    },
    {
      "id": "StepBack",
      "event_type": "click",
      "description": "Steps back through the tree construction.",
      "trigger_selectors": [
        "#stepBack"
      ],
      "evidence": [
        "stepBack.addEventListener('click', ()=>{ stepIndex = Math.max(stepIndex-1, 0); renderStep() })"
      ],
      "confidence": 1
    },
    {
      "id": "Play",
      "event_type": "click",
      "description": "Plays through the tree construction steps.",
      "trigger_selectors": [
        "#playBtn"
      ],
      "evidence": [
        "playBtn.addEventListener('click', togglePlay)"
      ],
      "confidence": 1
    },
    {
      "id": "Reset",
      "event_type": "click",
      "description": "Resets the visualizer to the initial state.",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', resetAll)"
      ],
      "confidence": 1
    },
    {
      "id": "Encode",
      "event_type": "click",
      "description": "Encodes the input text using the current Huffman codes.",
      "trigger_selectors": [
        "#encodeBtn"
      ],
      "evidence": [
        "encodeBtn.addEventListener('click', doEncode)"
      ],
      "confidence": 1
    },
    {
      "id": "Decode",
      "event_type": "click",
      "description": "Decodes the input bits using the Huffman tree.",
      "trigger_selectors": [
        "#decodeBtn"
      ],
      "evidence": [
        "decodeBtn.addEventListener('click', doDecode)"
      ],
      "confidence": 1
    },
    {
      "id": "SpeedChange",
      "event_type": "input",
      "description": "Changes the speed of the animation.",
      "trigger_selectors": [
        "#speed"
      ],
      "evidence": [
        "speed.addEventListener('input', ...)"
      ],
      "confidence": 0.5
    },
    {
      "id": "KeyboardNavigation",
      "event_type": "keydown",
      "description": "Navigates through steps using keyboard arrows.",
      "trigger_selectors": [
        "document"
      ],
      "evidence": [
        "document.addEventListener('keydown', (e)=>{ if (e.key === 'ArrowRight') {...} })"
      ],
      "confidence": 0.5
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_TreeBuilt",
      "event": "BuildTree",
      "actions": [
        "buildFromInput()"
      ],
      "expected_observables": [
        "steps.length > 0"
      ],
      "evidence": [
        "buildFromInput()"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S0_Idle",
      "event": "RandomSample",
      "actions": [],
      "expected_observables": [
        "inputText.value contains sample text"
      ],
      "evidence": [
        "inputText.value = samples[Math.floor(Math.random()*samples.length)]"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S1_TreeBuilt",
      "event": "StepForward",
      "actions": [
        "renderStep()"
      ],
      "expected_observables": [
        "steps.length > 0"
      ],
      "evidence": [
        "stepIndex = Math.min(stepIndex+1, steps.length); renderStep()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S1_TreeBuilt",
      "event": "StepBack",
      "actions": [
        "renderStep()"
      ],
      "expected_observables": [
        "steps.length > 0"
      ],
      "evidence": [
        "stepIndex = Math.max(stepIndex-1, 0); renderStep()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S1_TreeBuilt",
      "event": "Play",
      "actions": [
        "togglePlay()"
      ],
      "expected_observables": [
        "playTimer is set or cleared"
      ],
      "evidence": [
        "playTimer = setInterval(()=>{ ... })"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S0_Idle",
      "event": "Reset",
      "actions": [
        "resetAll()"
      ],
      "expected_observables": [
        "steps.length = 0"
      ],
      "evidence": [
        "resetAll()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S2_Encoding",
      "event": "Encode",
      "actions": [
        "doEncode()"
      ],
      "expected_observables": [
        "bitbox.innerText is updated"
      ],
      "evidence": [
        "doEncode()"
      ],
      "confidence": 1
    },
    {
      "from": "S1_TreeBuilt",
      "to": "S3_Decoding",
      "event": "Decode",
      "actions": [
        "doDecode()"
      ],
      "expected_observables": [
        "decodeResult.innerText is updated"
      ],
      "evidence": [
        "doDecode()"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "textarea",
      "selector": "#inputText",
      "text": "Type text to analyze, e.g.: hello world",
      "attributes": {},
      "evidence": [
        "<textarea id=\"inputText\" placeholder=\"Type text to analyze, e.g.: hello world\"></textarea>"
      ]
    },
    {
      "type": "textarea",
      "selector": "#freqInput",
      "text": "Example:\na:5\nb:2\n :10",
      "attributes": {},
      "evidence": [
        "<textarea id=\"freqInput\" placeholder=\"Example:\na:5\nb:2\n :10\"></textarea>"
      ]
    },
    {
      "type": "button",
      "selector": "#buildBtn",
      "text": "Build Huffman Tree",
      "attributes": {},
      "evidence": [
        "<button id=\"buildBtn\">Build Huffman Tree</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randomBtn",
      "text": "Sample text",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"randomBtn\" class=\"ghost\">Sample text</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBack",
      "text": "◀ Step Back",
      "attributes": {
        "class": "ghost small"
      },
      "evidence": [
        "<button id=\"stepBack\" class=\"ghost small\">◀ Step Back</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepForward",
      "text": "Step ▶",
      "attributes": {
        "class": "ghost small"
      },
      "evidence": [
        "<button id=\"stepForward\" class=\"ghost small\">Step ▶</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#playBtn",
      "text": "Play ▶",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"playBtn\" class=\"small\">Play ▶</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "200",
        "max": "2000",
        "step": "100",
        "value": "800"
      },
      "evidence": [
        "<input type=\"range\" id=\"speed\" min=\"200\" max=\"2000\" step=\"100\" value=\"800\"/>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset",
      "attributes": {
        "class": "ghost small"
      },
      "evidence": [
        "<button id=\"resetBtn\" class=\"ghost small\">Reset</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#encodeInput",
      "text": "Text to encode (uses current mapping)",
      "attributes": {
        "type": "text"
      },
      "evidence": [
        "<input id=\"encodeInput\" type=\"text\" placeholder=\"Text to encode (uses current mapping)\"/>"
      ]
    },
    {
      "type": "button",
      "selector": "#encodeBtn",
      "text": "Encode",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"encodeBtn\" class=\"small\">Encode</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#bitInput",
      "text": "Bits to decode (e.g. 010011)",
      "attributes": {
        "type": "text"
      },
      "evidence": [
        "<input id=\"bitInput\" type=\"text\" placeholder=\"Bits to decode (e.g. 010011)\"/>"
      ]
    },
    {
      "type": "button",
      "selector": "#decodeBtn",
      "text": "Decode",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"decodeBtn\" class=\"small\">Decode</button>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-01T00:00:00Z",
    "detected_components_count": 12,
    "detected_components": [
      {
        "type": "textarea",
        "selector": "#inputText"
      },
      {
        "type": "textarea",
        "selector": "#freqInput"
      },
      {
        "type": "button",
        "selector": "#buildBtn"
      },
      {
        "type": "button",
        "selector": "#randomBtn"
      },
      {
        "type": "button",
        "selector": "#stepBack"
      },
      {
        "type": "button",
        "selector": "#stepForward"
      },
      {
        "type": "button",
        "selector": "#playBtn"
      },
      {
        "type": "input",
        "selector": "#speed"
      },
      {
        "type": "button",
        "selector": "#resetBtn"
      },
      {
        "type": "input",
        "selector": "#encodeInput"
      },
      {
        "type": "button",
        "selector": "#encodeBtn"
      },
      {
        "type": "input",
        "selector": "#bitInput"
      },
      {
        "type": "button",
        "selector": "#decodeBtn"
      }
    ],
    "detected_event_handlers_count": 9,
    "detected_event_handlers": [
      "buildBtn.addEventListener('click', buildFromInput)",
      "randomBtn.addEventListener('click', ()=>{ inputText.value = samples[Math.floor(Math.random()*samples.length)] })",
      "stepForward.addEventListener('click', ()=>{ stepIndex = Math.min(stepIndex+1, steps.length); renderStep() })",
      "stepBack.addEventListener('click', ()=>{ stepIndex = Math.max(stepIndex-1, 0); renderStep() })",
      "playBtn.addEventListener('click', togglePlay)",
      "resetBtn.addEventListener('click', resetAll)",
      "encodeBtn.addEventListener('click', doEncode)",
      "decodeBtn.addEventListener('click', doDecode)",
      "document.addEventListener('keydown', (e)=>{ if (e.key === 'ArrowRight') {...} })"
    ],
    "extracted_states_count": 4,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}