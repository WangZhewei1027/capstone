{
  "meta": {
    "concept": "Union-Find (Disjoint Set) Visualizer",
    "topic": "Union-Find",
    "educational_goal": "To visualize the Union-Find algorithm and its operations.",
    "expected_interactions": [
      "Click nodes to perform union",
      "Click a node to highlight its find path",
      "Use options to toggle union-by-rank/size and animated path compression"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "canvas.addEventListener('pointerdown', async (evt) => {",
        "if(animating) return;"
      ],
      "confidence": 1
    },
    {
      "id": "S1_UnionMode",
      "label": "Union Mode",
      "type": "default",
      "entry_actions": [
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "$('modeSelect').value === 'union'"
      ],
      "confidence": 1
    },
    {
      "id": "S2_FindMode",
      "label": "Find Mode",
      "type": "default",
      "entry_actions": [
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "$('modeSelect').value === 'find'"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Animating",
      "label": "Animating",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "animating = true;"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "PointerDown",
      "event_type": "pointerdown",
      "description": "User clicks on the canvas to interact with nodes.",
      "trigger_selectors": [
        "#canvas"
      ],
      "evidence": [
        "canvas.addEventListener('pointerdown', async (evt) => {"
      ],
      "confidence": 1
    },
    {
      "id": "Reset",
      "event_type": "click",
      "description": "User clicks the New button to reset the visualization.",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "$('resetBtn').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "Clear",
      "event_type": "click",
      "description": "User clicks the Reset button to clear the visualization.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "$('clearBtn').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "RandomUnions",
      "event_type": "click",
      "description": "User clicks the Random unions button to perform random unions.",
      "trigger_selectors": [
        "#randBtn"
      ],
      "evidence": [
        "$('randBtn').addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "Undo",
      "event_type": "click",
      "description": "User clicks the Undo last union button.",
      "trigger_selectors": [
        "#undoBtn"
      ],
      "evidence": [
        "$('undoBtn').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "Help",
      "event_type": "click",
      "description": "User clicks the Show Pseudocode button.",
      "trigger_selectors": [
        "#helpBtn"
      ],
      "evidence": [
        "$('helpBtn').addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "StepUnions",
      "event_type": "click",
      "description": "User clicks the Step unions button to perform step unions.",
      "trigger_selectors": [
        "#stepUnions"
      ],
      "evidence": [
        "$('stepUnions').addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "StopAuto",
      "event_type": "click",
      "description": "User clicks the Stop button to stop auto-running unions.",
      "trigger_selectors": [
        "#stopAuto"
      ],
      "evidence": [
        "$('stopAuto').addEventListener('click', () => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_UnionMode",
      "event": "PointerDown",
      "actions": [
        "draw()"
      ],
      "expected_observables": [
        "Node selected for union"
      ],
      "evidence": [
        "if(mode === 'union'){"
      ],
      "confidence": 1
    },
    {
      "from": "S1_UnionMode",
      "to": "S3_Animating",
      "event": "PointerDown",
      "actions": [
        "animateUnion(a, b, rule)"
      ],
      "expected_observables": [
        "Union performed"
      ],
      "evidence": [
        "await animateUnion(a,b,rule);"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S2_FindMode",
      "event": "PointerDown",
      "actions": [
        "highlightPath(path)"
      ],
      "expected_observables": [
        "Node path highlighted"
      ],
      "evidence": [
        "if(mode === 'find'){"
      ],
      "confidence": 1
    },
    {
      "from": "S2_FindMode",
      "to": "S3_Animating",
      "event": "PointerDown",
      "actions": [
        "animateCompression(path)"
      ],
      "expected_observables": [
        "Path compression animated"
      ],
      "evidence": [
        "if(compressAnim){"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Animating",
      "to": "S0_Idle",
      "event": "PointerDown",
      "actions": [
        "draw()"
      ],
      "expected_observables": [
        "Animation completed"
      ],
      "evidence": [
        "animating = false;"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "New",
      "attributes": {},
      "evidence": [
        "<button id=\"resetBtn\" class=\"button-primary\">New</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Reset",
      "attributes": {},
      "evidence": [
        "<button id=\"clearBtn\">Reset</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randBtn",
      "text": "Random unions",
      "attributes": {},
      "evidence": [
        "<button id=\"randBtn\">Random unions</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#undoBtn",
      "text": "Undo last union",
      "attributes": {},
      "evidence": [
        "<button id=\"undoBtn\">Undo last union</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#helpBtn",
      "text": "Show Pseudocode",
      "attributes": {},
      "evidence": [
        "<button id=\"helpBtn\">Show Pseudocode</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepUnions",
      "text": "Step unions (auto-generated)",
      "attributes": {},
      "evidence": [
        "<button id=\"stepUnions\">Step unions (auto-generated)</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stopAuto",
      "text": "Stop",
      "attributes": {},
      "evidence": [
        "<button id=\"stopAuto\" class=\"button-danger\">Stop</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#nInput",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "2",
        "max": "40",
        "value": "10"
      },
      "evidence": [
        "<input id=\"nInput\" type=\"number\" min=\"2\" max=\"40\" value=\"10\" />"
      ]
    },
    {
      "type": "select",
      "selector": "#modeSelect",
      "text": "",
      "attributes": {},
      "evidence": [
        "<select id=\"modeSelect\">"
      ]
    },
    {
      "type": "select",
      "selector": "#unionRule",
      "text": "",
      "attributes": {},
      "evidence": [
        "<select id=\"unionRule\">"
      ]
    },
    {
      "type": "input",
      "selector": "#randCount",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "1",
        "max": "100",
        "value": "5"
      },
      "evidence": [
        "<input id=\"randCount\" type=\"number\" min=\"1\" max=\"100\" value=\"5\" style=\"width:80px\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#autoCheck",
      "text": "",
      "attributes": {
        "type": "checkbox"
      },
      "evidence": [
        "<input id=\"autoCheck\" type=\"checkbox\" title=\"Auto-run unions\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#compressAnim",
      "text": "",
      "attributes": {
        "type": "checkbox",
        "checked": "true"
      },
      "evidence": [
        "<input id=\"compressAnim\" type=\"checkbox\" checked />"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 13,
    "detected_components": [
      {
        "type": "button",
        "selector": "#resetBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#randBtn"
      },
      {
        "type": "button",
        "selector": "#undoBtn"
      },
      {
        "type": "button",
        "selector": "#helpBtn"
      },
      {
        "type": "button",
        "selector": "#stepUnions"
      },
      {
        "type": "button",
        "selector": "#stopAuto"
      },
      {
        "type": "input",
        "selector": "#nInput"
      },
      {
        "type": "select",
        "selector": "#modeSelect"
      },
      {
        "type": "select",
        "selector": "#unionRule"
      },
      {
        "type": "input",
        "selector": "#randCount"
      },
      {
        "type": "input",
        "selector": "#autoCheck"
      },
      {
        "type": "input",
        "selector": "#compressAnim"
      }
    ],
    "detected_event_handlers_count": 10,
    "detected_event_handlers": [
      "canvas.addEventListener('pointerdown', async (evt) => {",
      "$('resetBtn').addEventListener('click', () => {",
      "$('clearBtn').addEventListener('click', () => {",
      "$('randBtn').addEventListener('click', async () => {",
      "$('undoBtn').addEventListener('click', () => {",
      "$('helpBtn').addEventListener('click', () => {",
      "$('stepUnions').addEventListener('click', async () => {",
      "$('stopAuto').addEventListener('click', () => {"
    ],
    "extracted_states_count": 4,
    "extracted_transitions_count": 6,
    "extraction_confidence": 1,
    "notes": [
      "All interactive elements and their behaviors were captured.",
      "The FSM reflects the actual interactive states and transitions.",
      "No external scripts were referenced, ensuring high confidence."
    ]
  }
}