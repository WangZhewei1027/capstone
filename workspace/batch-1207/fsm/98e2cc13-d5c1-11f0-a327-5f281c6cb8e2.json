{
  "meta": {
    "concept": "Interactive Linear Regression Demo",
    "topic": "Linear Regression",
    "educational_goal": "To demonstrate the concepts of linear regression through interactive data manipulation and model fitting.",
    "expected_interactions": [
      "Add data points",
      "Fit models using OLS or Gradient Descent",
      "Generate random data",
      "Make predictions"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "<canvas id=\"scatter\" width=\"800\" height=\"360\" title=\"Click to add points\"></canvas>"
      ],
      "confidence": 1
    },
    {
      "id": "S1_DataAdded",
      "label": "Data Added",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "dataCount.textContent = 'Points: ' + points.length;"
      ],
      "confidence": 1
    },
    {
      "id": "S2_ModelFitted",
      "label": "Model Fitted",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "fitOLS();",
        "model.a = a; model.b = b;"
      ],
      "confidence": 1
    },
    {
      "id": "S3_GDRunning",
      "label": "Gradient Descent Running",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "gdRunning = true;",
        "requestAnimationFrame(gdStep);"
      ],
      "confidence": 1
    },
    {
      "id": "S4_GDStopped",
      "label": "Gradient Descent Stopped",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "gdRunning = false;"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "MouseDown_AddPoint",
      "event_type": "mousedown",
      "description": "User clicks on the canvas to add a data point.",
      "trigger_selectors": [
        "#scatter"
      ],
      "evidence": [
        "scatter.addEventListener('mousedown', (ev) => {",
        "points.push(p);"
      ],
      "confidence": 1
    },
    {
      "id": "MouseDown_RemoveLastPoint",
      "event_type": "mousedown",
      "description": "User right-clicks on the canvas to remove the last data point.",
      "trigger_selectors": [
        "#scatter"
      ],
      "evidence": [
        "if (ev.button === 2 || ev.which === 3) {",
        "points.pop();"
      ],
      "confidence": 1
    },
    {
      "id": "Click_FitOLS",
      "event_type": "click",
      "description": "User clicks the button to fit the model using OLS.",
      "trigger_selectors": [
        "#btnOLS"
      ],
      "evidence": [
        "btnOLS.addEventListener('click', ()=> {",
        "fitOLS();"
      ],
      "confidence": 1
    },
    {
      "id": "Click_Reset",
      "event_type": "click",
      "description": "User clicks the button to reset the data points.",
      "trigger_selectors": [
        "#btnReset"
      ],
      "evidence": [
        "btnReset.addEventListener('click', ()=> {",
        "points = [];"
      ],
      "confidence": 1
    },
    {
      "id": "Click_StartGD",
      "event_type": "click",
      "description": "User clicks the button to start Gradient Descent.",
      "trigger_selectors": [
        "#btnStartGD"
      ],
      "evidence": [
        "btnStartGD.addEventListener('click', ()=> {",
        "startGD();"
      ],
      "confidence": 1
    },
    {
      "id": "Click_StopGD",
      "event_type": "click",
      "description": "User clicks the button to stop Gradient Descent.",
      "trigger_selectors": [
        "#btnStopGD"
      ],
      "evidence": [
        "btnStopGD.addEventListener('click', ()=> {",
        "stopGD();"
      ],
      "confidence": 1
    },
    {
      "id": "Click_Predict",
      "event_type": "click",
      "description": "User clicks the button to make a prediction.",
      "trigger_selectors": [
        "#predictBtn"
      ],
      "evidence": [
        "predBtn.addEventListener('click', ()=> {",
        "const yhat = model.a * x + model.b;"
      ],
      "confidence": 1
    },
    {
      "id": "Click_GenerateData",
      "event_type": "click",
      "description": "User clicks the button to generate random data.",
      "trigger_selectors": [
        "#btnGen"
      ],
      "evidence": [
        "btnGen.addEventListener('click', ()=> {",
        "points = [];"
      ],
      "confidence": 1
    },
    {
      "id": "Click_AddRandomPoint",
      "event_type": "click",
      "description": "User clicks the button to add a random point.",
      "trigger_selectors": [
        "#btnAddRand"
      ],
      "evidence": [
        "btnAddRand.addEventListener('click', ()=> {",
        "points.push({x,y});"
      ],
      "confidence": 1
    },
    {
      "id": "Click_RemoveLastPoint",
      "event_type": "click",
      "description": "User clicks the button to remove the last point.",
      "trigger_selectors": [
        "#btnRemove"
      ],
      "evidence": [
        "btnRemove.addEventListener('click', ()=> {",
        "points.pop();"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_DataAdded",
      "event": "MouseDown_AddPoint",
      "actions": [],
      "expected_observables": [
        "dataCount.textContent = 'Points: ' + points.length;"
      ],
      "evidence": [
        "scatter.addEventListener('mousedown', (ev) => {",
        "points.push(p);"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S1_DataAdded",
      "event": "MouseDown_RemoveLastPoint",
      "actions": [],
      "expected_observables": [
        "dataCount.textContent = 'Points: ' + points.length;"
      ],
      "evidence": [
        "if (ev.button === 2 || ev.which === 3) {",
        "points.pop();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S2_ModelFitted",
      "event": "Click_FitOLS",
      "actions": [],
      "expected_observables": [
        "paramA.textContent = model.a.toFixed(4);",
        "paramB.textContent = model.b.toFixed(4);"
      ],
      "evidence": [
        "btnOLS.addEventListener('click', ()=> {",
        "fitOLS();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S3_GDRunning",
      "event": "Click_StartGD",
      "actions": [],
      "expected_observables": [
        "gdRunning = true;"
      ],
      "evidence": [
        "btnStartGD.addEventListener('click', ()=> {",
        "startGD();"
      ],
      "confidence": 1
    },
    {
      "from": "S3_GDRunning",
      "to": "S4_GDStopped",
      "event": "Click_StopGD",
      "actions": [],
      "expected_observables": [
        "gdRunning = false;"
      ],
      "evidence": [
        "btnStopGD.addEventListener('click', ()=> {",
        "stopGD();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S1_DataAdded",
      "event": "Click_AddRandomPoint",
      "actions": [],
      "expected_observables": [
        "dataCount.textContent = 'Points: ' + points.length;"
      ],
      "evidence": [
        "btnAddRand.addEventListener('click', ()=> {",
        "points.push({x,y});"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S1_DataAdded",
      "event": "Click_RemoveLastPoint",
      "actions": [],
      "expected_observables": [
        "dataCount.textContent = 'Points: ' + points.length;"
      ],
      "evidence": [
        "btnRemove.addEventListener('click', ()=> {",
        "points.pop();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S1_DataAdded",
      "event": "Click_GenerateData",
      "actions": [],
      "expected_observables": [
        "dataCount.textContent = 'Points: ' + points.length;"
      ],
      "evidence": [
        "btnGen.addEventListener('click', ()=> {",
        "points = [];"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S1_DataAdded",
      "event": "Click_Reset",
      "actions": [],
      "expected_observables": [
        "dataCount.textContent = 'Points: ' + points.length;"
      ],
      "evidence": [
        "btnReset.addEventListener('click', ()=> {",
        "points = [];"
      ],
      "confidence": 1
    },
    {
      "from": "S1_DataAdded",
      "to": "S1_DataAdded",
      "event": "Click_Predict",
      "actions": [],
      "expected_observables": [
        "predY.textContent = yhat.toFixed(4);"
      ],
      "evidence": [
        "predBtn.addEventListener('click', ()=> {",
        "const yhat = model.a * x + model.b;"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#btnOLS",
      "text": "Fit OLS (closed form)",
      "attributes": {},
      "evidence": [
        "<button id=\"btnOLS\" class=\"btn-primary\" style=\"flex:1\">Fit OLS (closed form)</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnReset",
      "text": "Clear",
      "attributes": {
        "title": "Clear points"
      },
      "evidence": [
        "<button id=\"btnReset\" title=\"Clear points\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnStartGD",
      "text": "Start Gradient Descent",
      "attributes": {},
      "evidence": [
        "<button id=\"btnStartGD\" class=\"btn-primary\" style=\"flex:1\">Start Gradient Descent</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnStopGD",
      "text": "Stop GD",
      "attributes": {},
      "evidence": [
        "<button id=\"btnStopGD\">Stop GD</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnGen",
      "text": "Generate",
      "attributes": {},
      "evidence": [
        "<button id=\"btnGen\" style=\"flex:1\">Generate</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnAddRand",
      "text": "Add Random",
      "attributes": {},
      "evidence": [
        "<button id=\"btnAddRand\">Add Random</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#btnRemove",
      "text": "Remove Last",
      "attributes": {},
      "evidence": [
        "<button id=\"btnRemove\">Remove Last</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#predX",
      "text": "x value",
      "attributes": {
        "type": "number",
        "step": "any",
        "placeholder": "x value"
      },
      "evidence": [
        "<input id=\"predX\" type=\"number\" step=\"any\" placeholder=\"x value\" style=\"flex:1\">"
      ]
    },
    {
      "type": "input",
      "selector": "#lr",
      "text": "Learning rate (α)",
      "attributes": {
        "type": "number",
        "step": "any",
        "value": "0.01"
      },
      "evidence": [
        "<input id=\"lr\" type=\"number\" step=\"any\" value=\"0.01\" style=\"width:100px\">"
      ]
    },
    {
      "type": "input",
      "selector": "#itersPerSec",
      "text": "Iterations / second",
      "attributes": {
        "type": "number",
        "step": "1",
        "value": "60"
      },
      "evidence": [
        "<input id=\"itersPerSec\" type=\"number\" step=\"1\" value=\"60\" style=\"width:80px\">"
      ]
    },
    {
      "type": "input",
      "selector": "#genN",
      "text": "points",
      "attributes": {
        "type": "number",
        "value": "40"
      },
      "evidence": [
        "<input id=\"genN\" type=\"number\" value=\"40\" style=\"width:80px\">"
      ]
    },
    {
      "type": "input",
      "selector": "#genA",
      "text": "slope (a)",
      "attributes": {
        "type": "number",
        "step": "any",
        "value": "1.5"
      },
      "evidence": [
        "<input id=\"genA\" type=\"number\" step=\"any\" value=\"1.5\" style=\"width:100px\">"
      ]
    },
    {
      "type": "input",
      "selector": "#genB",
      "text": "intercept (b)",
      "attributes": {
        "type": "number",
        "step": "any",
        "value": "0.5"
      },
      "evidence": [
        "<input id=\"genB\" type=\"number\" step=\"any\" value=\"0.5\" style=\"width:100px\">"
      ]
    },
    {
      "type": "input",
      "selector": "#genNoise",
      "text": "noise σ",
      "attributes": {
        "type": "number",
        "step": "any",
        "value": "0.8"
      },
      "evidence": [
        "<input id=\"genNoise\" type=\"number\" step=\"any\" value=\"0.8\" style=\"width:100px\">"
      ]
    },
    {
      "type": "checkbox",
      "selector": "#initZero",
      "text": "init a=b=0",
      "attributes": {
        "type": "checkbox",
        "checked": "true"
      },
      "evidence": [
        "<label><input id=\"initZero\" type=\"checkbox\" checked> init a=b=0</label>"
      ]
    },
    {
      "type": "checkbox",
      "selector": "#showResiduals",
      "text": "show residuals",
      "attributes": {
        "type": "checkbox",
        "checked": "true"
      },
      "evidence": [
        "<label><input id=\"showResiduals\" type=\"checkbox\" checked> show residuals</label>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 15,
    "detected_components": [
      {
        "type": "button",
        "selector": "#btnOLS",
        "text": "Fit OLS (closed form)",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#btnReset",
        "text": "Clear",
        "attributes": {
          "title": "Clear points"
        }
      },
      {
        "type": "button",
        "selector": "#btnStartGD",
        "text": "Start Gradient Descent",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#btnStopGD",
        "text": "Stop GD",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#btnGen",
        "text": "Generate",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#btnAddRand",
        "text": "Add Random",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#btnRemove",
        "text": "Remove Last",
        "attributes": {}
      },
      {
        "type": "input",
        "selector": "#predX",
        "text": "x value",
        "attributes": {
          "type": "number",
          "step": "any",
          "placeholder": "x value"
        }
      },
      {
        "type": "input",
        "selector": "#lr",
        "text": "Learning rate (α)",
        "attributes": {
          "type": "number",
          "step": "any",
          "value": "0.01"
        }
      },
      {
        "type": "input",
        "selector": "#itersPerSec",
        "text": "Iterations / second",
        "attributes": {
          "type": "number",
          "step": "1",
          "value": "60"
        }
      },
      {
        "type": "input",
        "selector": "#genN",
        "text": "points",
        "attributes": {
          "type": "number",
          "value": "40"
        }
      },
      {
        "type": "input",
        "selector": "#genA",
        "text": "slope (a)",
        "attributes": {
          "type": "number",
          "step": "any",
          "value": "1.5"
        }
      },
      {
        "type": "input",
        "selector": "#genB",
        "text": "intercept (b)",
        "attributes": {
          "type": "number",
          "step": "any",
          "value": "0.5"
        }
      },
      {
        "type": "input",
        "selector": "#genNoise",
        "text": "noise σ",
        "attributes": {
          "type": "number",
          "step": "any",
          "value": "0.8"
        }
      },
      {
        "type": "checkbox",
        "selector": "#initZero",
        "text": "init a=b=0",
        "attributes": {
          "type": "checkbox",
          "checked": "true"
        }
      },
      {
        "type": "checkbox",
        "selector": "#showResiduals",
        "text": "show residuals",
        "attributes": {
          "type": "checkbox",
          "checked": "true"
        }
      }
    ],
    "detected_event_handlers_count": 10,
    "detected_event_handlers": [
      "scatter.addEventListener('mousedown', (ev) => {",
      "btnReset.addEventListener('click', ()=> {",
      "btnOLS.addEventListener('click', ()=> {",
      "btnStartGD.addEventListener('click', ()=> {",
      "btnStopGD.addEventListener('click', ()=> {",
      "predBtn.addEventListener('click', ()=> {",
      "btnGen.addEventListener('click', ()=> {",
      "btnAddRand.addEventListener('click', ()=> {",
      "btnRemove.addEventListener('click', ()=> {",
      "showResidualsCheckbox.addEventListener('change', ()=> {"
    ],
    "extracted_states_count": 5,
    "extracted_transitions_count": 10,
    "extraction_confidence": 1,
    "notes": [
      "All interactive elements and their behaviors are captured.",
      "No external scripts were referenced that could affect behavior.",
      "The FSM reflects all observed interactions.",
      "Confidence is high due to comprehensive inline event handlers."
    ]
  }
}