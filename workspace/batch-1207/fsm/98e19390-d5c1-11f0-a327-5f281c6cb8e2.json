{
  "meta": {
    "concept": "Adjacency Matrix Interactive Demo",
    "topic": "Graph Theory",
    "educational_goal": "To allow users to interactively create and manipulate an adjacency matrix representing a graph.",
    "expected_interactions": [
      "Add nodes",
      "Delete nodes",
      "Toggle edges",
      "Import and export adjacency matrices",
      "Rename nodes"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "<button id=\"addNodeBtn\">Add Node</button>",
        "<button class=\"secondary\" id=\"clearBtn\">Clear Graph</button>",
        "<button class=\"secondary\" id=\"exportBtn\">Export CSV</button>",
        "<button class=\"secondary\" id=\"importBtn\">Import CSV</button>",
        "<button id=\"copyBtn\" class=\"secondary\">Copy CSV</button>",
        "<button id=\"downloadBtn\" class=\"secondary\">Download CSV</button>",
        "<button id=\"renameBtn\" class=\"secondary\">Rename</button>",
        "<button id=\"deleteNodeBtn\" class=\"danger\">Delete</button>"
      ],
      "confidence": 1
    },
    {
      "id": "S1_NodeSelected",
      "label": "Node Selected",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "Click a node on the canvas to select it. Selection persists until you click empty space."
      ],
      "confidence": 1
    },
    {
      "id": "S2_NodeAdded",
      "label": "Node Added",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "Click empty space to add node"
      ],
      "confidence": 1
    },
    {
      "id": "S3_EdgeToggled",
      "label": "Edge Toggled",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "Click node then node to toggle edge"
      ],
      "confidence": 1
    },
    {
      "id": "S4_GraphCleared",
      "label": "Graph Cleared",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "if(!confirm('Clear entire graph?')) return;"
      ],
      "confidence": 1
    },
    {
      "id": "S5_NodeDeleted",
      "label": "Node Deleted",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "if(confirm('Delete node \"'+node.label+'\"?')) removeNodeById(node.id);"
      ],
      "confidence": 1
    },
    {
      "id": "S6_NodeRenamed",
      "label": "Node Renamed",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "const v = selectedLabelInput.value.trim();",
        "if(!v) { alert('Label cannot be empty'); return; }"
      ],
      "confidence": 1
    },
    {
      "id": "S7_CSVExported",
      "label": "CSV Exported",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "alert('CSV export:\\n\\n' + csv.slice(0,800) + (csv.length>800 ? '\\n\\n...truncated' : ''));"
      ],
      "confidence": 1
    },
    {
      "id": "S8_CSVImported",
      "label": "CSV Imported",
      "type": "default",
      "entry_actions": [
        "render()"
      ],
      "exit_actions": [],
      "evidence": [
        "const text = prompt('Paste CSV adjacency matrix. Can include header row of labels (optional).');"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "AddNode",
      "event_type": "click",
      "description": "Add a new node to the graph.",
      "trigger_selectors": [
        "#addNodeBtn",
        "#canvasWrap"
      ],
      "evidence": [
        "addNodeBtn.addEventListener('click', () => {",
        "wrap.addEventListener('pointerdown', e => {"
      ],
      "confidence": 1
    },
    {
      "id": "ClearGraph",
      "event_type": "click",
      "description": "Clear all nodes and edges from the graph.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ExportCSV",
      "event_type": "click",
      "description": "Export the adjacency matrix as CSV.",
      "trigger_selectors": [
        "#exportBtn"
      ],
      "evidence": [
        "exportBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ImportCSV",
      "event_type": "click",
      "description": "Import an adjacency matrix from CSV.",
      "trigger_selectors": [
        "#importBtn"
      ],
      "evidence": [
        "importBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "CopyCSV",
      "event_type": "click",
      "description": "Copy the adjacency matrix to clipboard.",
      "trigger_selectors": [
        "#copyBtn"
      ],
      "evidence": [
        "copyBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    },
    {
      "id": "DownloadCSV",
      "event_type": "click",
      "description": "Download the adjacency matrix as a CSV file.",
      "trigger_selectors": [
        "#downloadBtn"
      ],
      "evidence": [
        "downloadBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "RenameNode",
      "event_type": "click",
      "description": "Rename the selected node.",
      "trigger_selectors": [
        "#renameBtn"
      ],
      "evidence": [
        "renameBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "DeleteNode",
      "event_type": "click",
      "description": "Delete the selected node.",
      "trigger_selectors": [
        "#deleteNodeBtn"
      ],
      "evidence": [
        "deleteNodeBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ToggleEdge",
      "event_type": "click",
      "description": "Toggle an edge between two nodes.",
      "trigger_selectors": [
        "#matrixTable td"
      ],
      "evidence": [
        "cell.addEventListener('click', e => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S2_NodeAdded",
      "event": "AddNode",
      "actions": [
        "addNode(x, y)"
      ],
      "expected_observables": [
        "Node count increases"
      ],
      "evidence": [
        "Click empty space to add node"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_GraphCleared",
      "event": "ClearGraph",
      "actions": [
        "clearGraph()"
      ],
      "expected_observables": [
        "Node count resets to 0"
      ],
      "evidence": [
        "if(!confirm('Clear entire graph?')) return;"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S7_CSVExported",
      "event": "ExportCSV",
      "actions": [
        "exportCSV()"
      ],
      "expected_observables": [
        "CSV export alert"
      ],
      "evidence": [
        "alert('CSV export:\\n\\n' + csv.slice(0,800) + (csv.length>800 ? '\\n\\n...truncated' : ''));"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S8_CSVImported",
      "event": "ImportCSV",
      "actions": [
        "importCSV()"
      ],
      "expected_observables": [
        "Graph updates based on imported CSV"
      ],
      "evidence": [
        "const text = prompt('Paste CSV adjacency matrix. Can include header row of labels (optional).');"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_NodeSelected",
      "event": "ToggleEdge",
      "actions": [
        "toggleEdge(i,j)"
      ],
      "expected_observables": [
        "Edge toggled between nodes"
      ],
      "evidence": [
        "Click node then node to toggle edge"
      ],
      "confidence": 1
    },
    {
      "from": "S1_NodeSelected",
      "to": "S3_EdgeToggled",
      "event": "ToggleEdge",
      "actions": [
        "toggleEdge(i,j)"
      ],
      "expected_observables": [
        "Edge toggled between selected node and another"
      ],
      "evidence": [
        "Click node then node to toggle edge"
      ],
      "confidence": 1
    },
    {
      "from": "S1_NodeSelected",
      "to": "S5_NodeDeleted",
      "event": "DeleteNode",
      "actions": [
        "removeNodeById(selectedNodeId)"
      ],
      "expected_observables": [
        "Node removed from graph"
      ],
      "evidence": [
        "if(confirm('Delete selected node?')) removeNodeById(selectedNodeId);"
      ],
      "confidence": 1
    },
    {
      "from": "S1_NodeSelected",
      "to": "S6_NodeRenamed",
      "event": "RenameNode",
      "actions": [
        "renameNode(selectedNodeId, newLabel)"
      ],
      "expected_observables": [
        "Node label updated"
      ],
      "evidence": [
        "const v = selectedLabelInput.value.trim();"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#addNodeBtn",
      "text": "Add Node",
      "attributes": {},
      "evidence": [
        "<button id=\"addNodeBtn\">Add Node</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear Graph",
      "attributes": {},
      "evidence": [
        "<button class=\"secondary\" id=\"clearBtn\">Clear Graph</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#exportBtn",
      "text": "Export CSV",
      "attributes": {},
      "evidence": [
        "<button class=\"secondary\" id=\"exportBtn\">Export CSV</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#importBtn",
      "text": "Import CSV",
      "attributes": {},
      "evidence": [
        "<button class=\"secondary\" id=\"importBtn\">Import CSV</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#copyBtn",
      "text": "Copy CSV",
      "attributes": {},
      "evidence": [
        "<button id=\"copyBtn\" class=\"secondary\">Copy CSV</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#downloadBtn",
      "text": "Download CSV",
      "attributes": {},
      "evidence": [
        "<button id=\"downloadBtn\" class=\"secondary\">Download CSV</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#renameBtn",
      "text": "Rename",
      "attributes": {},
      "evidence": [
        "<button id=\"renameBtn\" class=\"secondary\">Rename</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#deleteNodeBtn",
      "text": "Delete",
      "attributes": {},
      "evidence": [
        "<button id=\"deleteNodeBtn\" class=\"danger\">Delete</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#selectedLabel",
      "text": "",
      "attributes": {
        "class": "node-label-input"
      },
      "evidence": [
        "<input id=\"selectedLabel\" class=\"node-label-input\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#directedChk",
      "text": "",
      "attributes": {
        "type": "checkbox"
      },
      "evidence": [
        "<input type=\"checkbox\" id=\"directedChk\"> Directed"
      ]
    },
    {
      "type": "input",
      "selector": "#weightedChk",
      "text": "",
      "attributes": {
        "type": "checkbox"
      },
      "evidence": [
        "<input type=\"checkbox\" id=\"weightedChk\"> Weighted"
      ]
    },
    {
      "type": "input",
      "selector": "#allowLoopsChk",
      "text": "",
      "attributes": {
        "type": "checkbox"
      },
      "evidence": [
        "<input type=\"checkbox\" id=\"allowLoopsChk\"> Allow loops"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-01T00:00:00Z",
    "detected_components_count": 10,
    "detected_components": [
      {
        "type": "button",
        "selector": "#addNodeBtn",
        "text": "Add Node",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#clearBtn",
        "text": "Clear Graph",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#exportBtn",
        "text": "Export CSV",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#importBtn",
        "text": "Import CSV",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#copyBtn",
        "text": "Copy CSV",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#downloadBtn",
        "text": "Download CSV",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#renameBtn",
        "text": "Rename",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#deleteNodeBtn",
        "text": "Delete",
        "attributes": {}
      },
      {
        "type": "input",
        "selector": "#selectedLabel",
        "text": "",
        "attributes": {
          "class": "node-label-input"
        }
      },
      {
        "type": "input",
        "selector": "#directedChk",
        "text": "",
        "attributes": {
          "type": "checkbox"
        }
      },
      {
        "type": "input",
        "selector": "#weightedChk",
        "text": "",
        "attributes": {
          "type": "checkbox"
        }
      },
      {
        "type": "input",
        "selector": "#allowLoopsChk",
        "text": "",
        "attributes": {
          "type": "checkbox"
        }
      }
    ],
    "detected_event_handlers_count": 12,
    "detected_event_handlers": [
      "addNodeBtn.addEventListener('click', () => {",
      "clearBtn.addEventListener('click', () => {",
      "exportBtn.addEventListener('click', () => {",
      "importBtn.addEventListener('click', () => {",
      "copyBtn.addEventListener('click', async () => {",
      "downloadBtn.addEventListener('click', () => {",
      "renameBtn.addEventListener('click', () => {",
      "deleteNodeBtn.addEventListener('click', () => {",
      "wrap.addEventListener('pointerdown', e => {",
      "wrap.addEventListener('pointermove', e => {",
      "wrap.addEventListener('pointerup', e => {",
      "matrixTable.addEventListener('click', e => {"
    ],
    "extracted_states_count": 9,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}