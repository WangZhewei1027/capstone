{
  "meta": {
    "concept": "Priority Queue (Binary Heap) Demo",
    "topic": "Priority Queue",
    "educational_goal": "Demonstrate the functionality of a priority queue using a binary heap.",
    "expected_interactions": [
      "Enqueue an item",
      "Dequeue an item",
      "Peek at the top item",
      "Change heap type",
      "Add random items",
      "Clear the heap",
      "Bulk add items"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "default",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "renderAll()"
      ],
      "confidence": 1
    },
    {
      "id": "S1_ItemEnqueued",
      "label": "Item Enqueued",
      "type": "default",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "enqueueBtn.addEventListener('click', () => {",
        "logTrace(`Enqueued ${node.value}:${node.priority}`);"
      ],
      "confidence": 1
    },
    {
      "id": "S2_ItemDequeued",
      "label": "Item Dequeued",
      "type": "default",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "dequeueBtn.addEventListener('click', () => {",
        "logTrace(`Dequeued ${node.value}:${node.priority}`, 'color:#9fe6c0');"
      ],
      "confidence": 1
    },
    {
      "id": "S3_ItemPeeked",
      "label": "Item Peeked",
      "type": "default",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "peekBtn.addEventListener('click', () => {",
        "logTrace(`Peek ${node.value}:${node.priority}`, 'color:#ffd580');"
      ],
      "confidence": 1
    },
    {
      "id": "S4_HeapTypeChanged",
      "label": "Heap Type Changed",
      "type": "default",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "heapType.addEventListener('change', (e) => {",
        "logTrace(`Heap type set to ${e.target.value}`, 'color:#c6baff');"
      ],
      "confidence": 1
    },
    {
      "id": "S5_RandomItemsAdded",
      "label": "Random Items Added",
      "type": "default",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "randomBtn.addEventListener('click', () => {",
        "logTrace('Added 10 random items');"
      ],
      "confidence": 1
    },
    {
      "id": "S6_HeapCleared",
      "label": "Heap Cleared",
      "type": "default",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "clearBtn.addEventListener('click', () => {",
        "logTrace('Cleared heap', 'color:#ef9a9a');"
      ],
      "confidence": 1
    },
    {
      "id": "S7_BulkItemsAdded",
      "label": "Bulk Items Added",
      "type": "default",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "bulkBtn.addEventListener('click', () => {",
        "logTrace(`Bulk added ${n} items in ${(t1 - t0).toFixed(3)} ms`, 'color:#b8f3c6');"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "Enqueue",
      "event_type": "click",
      "description": "Enqueue a new item with a specified value and priority.",
      "trigger_selectors": [
        "#enqueueBtn"
      ],
      "evidence": [
        "enqueueBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "Dequeue",
      "event_type": "click",
      "description": "Dequeue the highest-priority item from the queue.",
      "trigger_selectors": [
        "#dequeueBtn"
      ],
      "evidence": [
        "dequeueBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "Peek",
      "event_type": "click",
      "description": "Peek at the highest-priority item without removing it.",
      "trigger_selectors": [
        "#peekBtn"
      ],
      "evidence": [
        "peekBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeHeapType",
      "event_type": "change",
      "description": "Change the type of the heap (min or max).",
      "trigger_selectors": [
        "#heapType"
      ],
      "evidence": [
        "heapType.addEventListener('change', (e) => {"
      ],
      "confidence": 1
    },
    {
      "id": "AddRandomItems",
      "event_type": "click",
      "description": "Add 10 random items to the queue.",
      "trigger_selectors": [
        "#randomBtn"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "ClearHeap",
      "event_type": "click",
      "description": "Clear all items from the heap.",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "id": "BulkAddItems",
      "event_type": "click",
      "description": "Bulk add a specified number of items to the queue.",
      "trigger_selectors": [
        "#bulkBtn"
      ],
      "evidence": [
        "bulkBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_ItemEnqueued",
      "event": "Enqueue",
      "actions": [],
      "expected_observables": [
        "Size: 1",
        "Ops: 1"
      ],
      "evidence": [
        "enqueueBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S2_ItemDequeued",
      "event": "Dequeue",
      "actions": [],
      "expected_observables": [
        "Size: 0",
        "Ops: 1"
      ],
      "evidence": [
        "dequeueBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_ItemPeeked",
      "event": "Peek",
      "actions": [],
      "expected_observables": [
        "Top: —"
      ],
      "evidence": [
        "peekBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S4_HeapTypeChanged",
      "event": "ChangeHeapType",
      "actions": [],
      "expected_observables": [
        "Heap type set to min/max"
      ],
      "evidence": [
        "heapType.addEventListener('change', (e) => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S5_RandomItemsAdded",
      "event": "AddRandomItems",
      "actions": [],
      "expected_observables": [
        "Size: 10"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S6_HeapCleared",
      "event": "ClearHeap",
      "actions": [],
      "expected_observables": [
        "Size: 0"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S7_BulkItemsAdded",
      "event": "BulkAddItems",
      "actions": [],
      "expected_observables": [
        "Size: N"
      ],
      "evidence": [
        "bulkBtn.addEventListener('click', () => {"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "select",
      "selector": "#heapType",
      "text": "Heap Type",
      "attributes": {},
      "evidence": [
        "<select id=\"heapType\">"
      ]
    },
    {
      "type": "input",
      "selector": "#valInput",
      "text": "Value (string)",
      "attributes": {
        "placeholder": "example: task-A",
        "value": "task-A"
      },
      "evidence": [
        "<input id=\"valInput\" type=\"text\" placeholder=\"example: task-A\" value=\"task-A\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#prioInput",
      "text": "Priority (number)",
      "attributes": {
        "placeholder": "priority (e.g. 5)",
        "value": "5"
      },
      "evidence": [
        "<input id=\"prioInput\" type=\"number\" placeholder=\"priority (e.g. 5)\" value=\"5\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#enqueueBtn",
      "text": "Enqueue",
      "attributes": {},
      "evidence": [
        "<button id=\"enqueueBtn\">Enqueue</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#dequeueBtn",
      "text": "Dequeue",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button class=\"secondary\" id=\"dequeueBtn\">Dequeue</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#peekBtn",
      "text": "Peek",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button class=\"secondary\" id=\"peekBtn\">Peek</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randomBtn",
      "text": "Add 10 Random",
      "attributes": {},
      "evidence": [
        "<button id=\"randomBtn\">Add 10 Random</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"secondary\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#bulkBtn",
      "text": "Add N Items (fast)",
      "attributes": {
        "class": "secondary"
      },
      "evidence": [
        "<button id=\"bulkBtn\" class=\"secondary\">Add N Items (fast)</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#bulkCount",
      "text": "",
      "attributes": {
        "value": "10000",
        "style": "width:110px; margin-left:auto;"
      },
      "evidence": [
        "<input id=\"bulkCount\" type=\"number\" value=\"10000\" style=\"width:110px; margin-left:auto;\" />"
      ]
    },
    {
      "type": "div",
      "selector": "#arrayContainer",
      "text": "Array representation",
      "attributes": {
        "style": "margin-top:8px;"
      },
      "evidence": [
        "<div class=\"arrayView card\" id=\"arrayContainer\" style=\"margin-top:8px;\"></div>"
      ]
    },
    {
      "type": "div",
      "selector": "#sizePill",
      "text": "Size: 0",
      "attributes": {},
      "evidence": [
        "<div class=\"pill\" id=\"sizePill\">Size: 0</div>"
      ]
    },
    {
      "type": "div",
      "selector": "#topPill",
      "text": "Top: —",
      "attributes": {},
      "evidence": [
        "<div class=\"pill\" id=\"topPill\">Top: —</div>"
      ]
    },
    {
      "type": "div",
      "selector": "#opsPill",
      "text": "Ops: 0",
      "attributes": {},
      "evidence": [
        "<div class=\"pill\" id=\"opsPill\">Ops: 0</div>"
      ]
    },
    {
      "type": "div",
      "selector": "#heapSvg",
      "text": "Heap Visualization",
      "attributes": {},
      "evidence": [
        "<svg id=\"heapSvg\" width=\"1200\" height=\"420\"></svg>"
      ]
    },
    {
      "type": "div",
      "selector": "#trace",
      "text": "Console / trace",
      "attributes": {},
      "evidence": [
        "<div id=\"trace\" class=\"card\" style=\"margin-top:8px; font-size:13px; min-height:46px; max-height:160px; overflow:auto;\"></div>"
      ]
    },
    {
      "type": "div",
      "selector": "#timing",
      "text": "Last op time: — ms",
      "attributes": {},
      "evidence": [
        "<div id=\"timing\">Last op time: — ms</div>"
      ]
    },
    {
      "type": "div",
      "selector": "#lastAction",
      "text": "Last: —",
      "attributes": {},
      "evidence": [
        "<div id=\"lastAction\">Last: —</div>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 15,
    "detected_components": [
      {
        "type": "select",
        "selector": "#heapType"
      },
      {
        "type": "input",
        "selector": "#valInput"
      },
      {
        "type": "input",
        "selector": "#prioInput"
      },
      {
        "type": "button",
        "selector": "#enqueueBtn"
      },
      {
        "type": "button",
        "selector": "#dequeueBtn"
      },
      {
        "type": "button",
        "selector": "#peekBtn"
      },
      {
        "type": "button",
        "selector": "#randomBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#bulkBtn"
      },
      {
        "type": "input",
        "selector": "#bulkCount"
      },
      {
        "type": "div",
        "selector": "#arrayContainer"
      },
      {
        "type": "div",
        "selector": "#sizePill"
      },
      {
        "type": "div",
        "selector": "#topPill"
      },
      {
        "type": "div",
        "selector": "#opsPill"
      },
      {
        "type": "div",
        "selector": "#heapSvg"
      },
      {
        "type": "div",
        "selector": "#trace"
      },
      {
        "type": "div",
        "selector": "#timing"
      },
      {
        "type": "div",
        "selector": "#lastAction"
      }
    ],
    "detected_event_handlers_count": 7,
    "detected_event_handlers": [
      "enqueueBtn.addEventListener('click', () => {",
      "dequeueBtn.addEventListener('click', () => {",
      "peekBtn.addEventListener('click', () => {",
      "heapType.addEventListener('change', (e) => {",
      "randomBtn.addEventListener('click', () => {",
      "clearBtn.addEventListener('click', () => {",
      "bulkBtn.addEventListener('click', () => {"
    ],
    "extracted_states_count": 8,
    "extracted_transitions_count": 7,
    "extraction_confidence": 1,
    "notes": []
  }
}