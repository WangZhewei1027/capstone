{
  "meta": {
    "concept": "Knapsack Problem â€” Interactive Demo",
    "topic": "Knapsack Problem",
    "educational_goal": "Explore 0/1 knapsack (dynamic programming) and fractional knapsack (greedy). Add items, set capacity, animate the DP table and see the optimal selection.",
    "expected_interactions": [
      "Add item",
      "Remove item",
      "Run algorithm",
      "Step through algorithm",
      "Reset algorithm",
      "Generate random items",
      "Clear items",
      "Change capacity",
      "Change algorithm",
      "Change animation speed",
      "Toggle show table",
      "Toggle animate"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "renderPage()"
      ],
      "exit_actions": [],
      "evidence": [
        "<input id=\"capacityInput\" type=\"number\" min=\"1\" max=\"200\" value=\"20\">",
        "<button id=\"addItemBtn\" class=\"small\">Add item</button>"
      ],
      "confidence": 1
    },
    {
      "id": "S1_ItemAdded",
      "label": "Item Added",
      "type": "intermediate",
      "entry_actions": [
        "renderItemsList()"
      ],
      "exit_actions": [],
      "evidence": [
        "items.push({name,w,v});",
        "renderItemsList();"
      ],
      "confidence": 1
    },
    {
      "id": "S2_ItemRemoved",
      "label": "Item Removed",
      "type": "intermediate",
      "entry_actions": [
        "renderItemsList()"
      ],
      "exit_actions": [],
      "evidence": [
        "items.splice(idx,1); updateAll();"
      ],
      "confidence": 1
    },
    {
      "id": "S3_AlgorithmRunning",
      "label": "Algorithm Running",
      "type": "intermediate",
      "entry_actions": [
        "runDP()"
      ],
      "exit_actions": [
        "clearVisualization()"
      ],
      "evidence": [
        "if(algo === 'dp'){ runDP(); }"
      ],
      "confidence": 1
    },
    {
      "id": "S4_AlgorithmStepping",
      "label": "Algorithm Stepping",
      "type": "intermediate",
      "entry_actions": [
        "dpStep()"
      ],
      "exit_actions": [],
      "evidence": [
        "await dpStep();"
      ],
      "confidence": 1
    },
    {
      "id": "S5_AlgorithmReset",
      "label": "Algorithm Reset",
      "type": "intermediate",
      "entry_actions": [
        "clearVisualization()"
      ],
      "exit_actions": [],
      "evidence": [
        "resetBtn.addEventListener('click', ()=>{ clearVisualization(); });"
      ],
      "confidence": 1
    },
    {
      "id": "S6_RandomItemsGenerated",
      "label": "Random Items Generated",
      "type": "intermediate",
      "entry_actions": [
        "updateAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "randomBtn.addEventListener('click', ()=>{ items = []; const n = Math.floor(Math.random()*6)+3; for(let i=0;i<n;i++){ items.push({name: String.fromCharCode(65+i), w, v}); } updateAll(); });"
      ],
      "confidence": 1
    },
    {
      "id": "S7_ItemsCleared",
      "label": "Items Cleared",
      "type": "intermediate",
      "entry_actions": [
        "updateAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "clearBtn.addEventListener('click', ()=>{ items = []; updateAll(); });"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "AddItem",
      "event_type": "click",
      "description": "Add an item to the knapsack",
      "trigger_selectors": [
        "#addItemBtn"
      ],
      "evidence": [
        "addItemBtn.addEventListener('click', ()=>{ const name = nameInput.value.trim(); items.push({name,w,v}); });"
      ],
      "confidence": 1
    },
    {
      "id": "RemoveItem",
      "event_type": "click",
      "description": "Remove an item from the knapsack",
      "trigger_selectors": [
        "button.ghost.small"
      ],
      "evidence": [
        "del.onclick = () => { items.splice(idx,1); updateAll(); };"
      ],
      "confidence": 1
    },
    {
      "id": "RunAlgorithm",
      "event_type": "click",
      "description": "Run the selected algorithm",
      "trigger_selectors": [
        "#runBtn"
      ],
      "evidence": [
        "runBtn.addEventListener('click', async ()=>{ runDP(); });"
      ],
      "confidence": 1
    },
    {
      "id": "StepAlgorithm",
      "event_type": "click",
      "description": "Step through the algorithm",
      "trigger_selectors": [
        "#stepBtn"
      ],
      "evidence": [
        "stepBtn.addEventListener('click', async ()=>{ dpStep(); });"
      ],
      "confidence": 1
    },
    {
      "id": "ResetAlgorithm",
      "event_type": "click",
      "description": "Reset the algorithm",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ()=>{ clearVisualization(); });"
      ],
      "confidence": 1
    },
    {
      "id": "GenerateRandomItems",
      "event_type": "click",
      "description": "Generate random items for the knapsack",
      "trigger_selectors": [
        "#randomBtn"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', ()=>{ items = []; const n = Math.floor(Math.random()*6)+3; for(let i=0;i<n;i++){ items.push({name: String.fromCharCode(65+i), w, v}); } updateAll(); });"
      ],
      "confidence": 1
    },
    {
      "id": "ClearItems",
      "event_type": "click",
      "description": "Clear all items from the knapsack",
      "trigger_selectors": [
        "#clearBtn"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', ()=>{ items = []; updateAll(); });"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeCapacity",
      "event_type": "change",
      "description": "Change the capacity of the knapsack",
      "trigger_selectors": [
        "#capacityInput"
      ],
      "evidence": [
        "capInput.addEventListener('change', updateAll);"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeAlgorithm",
      "event_type": "change",
      "description": "Change the selected algorithm",
      "trigger_selectors": [
        "#algoSelect"
      ],
      "evidence": [
        "algoSelect.addEventListener('change', updateAll);"
      ],
      "confidence": 1
    },
    {
      "id": "ChangeAnimationSpeed",
      "event_type": "input",
      "description": "Change the speed of the animation",
      "trigger_selectors": [
        "#speed"
      ],
      "evidence": [
        "speedInput.addEventListener('input', ()=>{ speedLabel.textContent = `delay: ${speedInput.value} ms per cell`; });"
      ],
      "confidence": 1
    },
    {
      "id": "ToggleShowTable",
      "event_type": "change",
      "description": "Toggle visibility of the DP table",
      "trigger_selectors": [
        "#showTable"
      ],
      "evidence": [
        "showTableCheck.addEventListener('change', updateAll);"
      ],
      "confidence": 1
    },
    {
      "id": "ToggleAnimate",
      "event_type": "change",
      "description": "Toggle animation of the algorithm",
      "trigger_selectors": [
        "#animate"
      ],
      "evidence": [
        "animateCheck.addEventListener('change', updateAll);"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_ItemAdded",
      "event": "AddItem",
      "actions": [
        "renderItemsList()"
      ],
      "expected_observables": [
        "itemsListEl.innerHTML"
      ],
      "evidence": [
        "addItemBtn.addEventListener('click', ()=>{ const name = nameInput.value.trim(); items.push({name,w,v}); renderItemsList(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S1_ItemAdded",
      "to": "S2_ItemRemoved",
      "event": "RemoveItem",
      "actions": [
        "renderItemsList()"
      ],
      "expected_observables": [
        "itemsListEl.innerHTML"
      ],
      "evidence": [
        "del.onclick = () => { items.splice(idx,1); updateAll(); };"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S3_AlgorithmRunning",
      "event": "RunAlgorithm",
      "actions": [
        "runDP()"
      ],
      "expected_observables": [
        "dpTable"
      ],
      "evidence": [
        "runBtn.addEventListener('click', async ()=>{ runDP(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S3_AlgorithmRunning",
      "to": "S4_AlgorithmStepping",
      "event": "StepAlgorithm",
      "actions": [
        "dpStep()"
      ],
      "expected_observables": [
        "dpState"
      ],
      "evidence": [
        "stepBtn.addEventListener('click', async ()=>{ dpStep(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S3_AlgorithmRunning",
      "to": "S5_AlgorithmReset",
      "event": "ResetAlgorithm",
      "actions": [
        "clearVisualization()"
      ],
      "expected_observables": [
        "resultEl.style.display"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ()=>{ clearVisualization(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S6_RandomItemsGenerated",
      "event": "GenerateRandomItems",
      "actions": [
        "updateAll()"
      ],
      "expected_observables": [
        "itemsListEl.innerHTML"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', ()=>{ items = []; const n = Math.floor(Math.random()*6)+3; for(let i=0;i<n;i++){ items.push({name: String.fromCharCode(65+i), w, v}); } updateAll(); });"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S7_ItemsCleared",
      "event": "ClearItems",
      "actions": [
        "updateAll()"
      ],
      "expected_observables": [
        "itemsListEl.innerHTML"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', ()=>{ items = []; updateAll(); });"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#capacityInput",
      "text": "",
      "attributes": {
        "type": "number",
        "min": "1",
        "max": "200",
        "value": "20"
      },
      "evidence": [
        "<input id=\"capacityInput\" type=\"number\" min=\"1\" max=\"200\" value=\"20\">"
      ]
    },
    {
      "type": "input",
      "selector": "#nameInput",
      "text": "name",
      "attributes": {
        "type": "text",
        "placeholder": "name"
      },
      "evidence": [
        "<input id=\"nameInput\" type=\"text\" placeholder=\"name\">"
      ]
    },
    {
      "type": "input",
      "selector": "#weightInput",
      "text": "weight",
      "attributes": {
        "type": "number",
        "placeholder": "weight",
        "min": "1",
        "value": "5"
      },
      "evidence": [
        "<input id=\"weightInput\" type=\"number\" placeholder=\"weight\" min=\"1\" value=\"5\">"
      ]
    },
    {
      "type": "input",
      "selector": "#valueInput",
      "text": "value",
      "attributes": {
        "type": "number",
        "placeholder": "value",
        "min": "0",
        "value": "10"
      },
      "evidence": [
        "<input id=\"valueInput\" type=\"number\" placeholder=\"value\" min=\"0\" value=\"10\">"
      ]
    },
    {
      "type": "button",
      "selector": "#addItemBtn",
      "text": "Add item",
      "attributes": {
        "class": "small"
      },
      "evidence": [
        "<button id=\"addItemBtn\" class=\"small\">Add item</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#randomBtn",
      "text": "Random items",
      "attributes": {
        "class": "ghost small"
      },
      "evidence": [
        "<button id=\"randomBtn\" class=\"ghost small\">Random items</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clearBtn",
      "text": "Clear",
      "attributes": {
        "class": "ghost small"
      },
      "evidence": [
        "<button id=\"clearBtn\" class=\"ghost small\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runBtn",
      "text": "Run",
      "attributes": {},
      "evidence": [
        "<button id=\"runBtn\">Run</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBtn",
      "text": "Step",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"stepBtn\" class=\"ghost\">Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset",
      "attributes": {
        "class": "ghost"
      },
      "evidence": [
        "<button id=\"resetBtn\" class=\"ghost\">Reset</button>"
      ]
    },
    {
      "type": "select",
      "selector": "#algoSelect",
      "text": "",
      "attributes": {},
      "evidence": [
        "<select id=\"algoSelect\">"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "",
      "attributes": {
        "type": "range",
        "min": "10",
        "max": "1000",
        "value": "200"
      },
      "evidence": [
        "<input id=\"speed\" class=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"200\">"
      ]
    },
    {
      "type": "input",
      "selector": "#showTable",
      "text": "",
      "attributes": {
        "type": "checkbox",
        "checked": "true"
      },
      "evidence": [
        "<input type=\"checkbox\" id=\"showTable\" checked>"
      ]
    },
    {
      "type": "input",
      "selector": "#animate",
      "text": "",
      "attributes": {
        "type": "checkbox",
        "checked": "true"
      },
      "evidence": [
        "<input type=\"checkbox\" id=\"animate\" checked>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-05T12:00:00Z",
    "detected_components_count": 12,
    "detected_components": [
      {
        "type": "input",
        "selector": "#capacityInput"
      },
      {
        "type": "input",
        "selector": "#nameInput"
      },
      {
        "type": "input",
        "selector": "#weightInput"
      },
      {
        "type": "input",
        "selector": "#valueInput"
      },
      {
        "type": "button",
        "selector": "#addItemBtn"
      },
      {
        "type": "button",
        "selector": "#randomBtn"
      },
      {
        "type": "button",
        "selector": "#clearBtn"
      },
      {
        "type": "button",
        "selector": "#runBtn"
      },
      {
        "type": "button",
        "selector": "#stepBtn"
      },
      {
        "type": "button",
        "selector": "#resetBtn"
      },
      {
        "type": "select",
        "selector": "#algoSelect"
      },
      {
        "type": "input",
        "selector": "#speed"
      }
    ],
    "detected_event_handlers_count": 12,
    "detected_event_handlers": [
      "addItemBtn.addEventListener('click', ...)",
      "del.onclick = () => { ... }",
      "runBtn.addEventListener('click', ...)",
      "stepBtn.addEventListener('click', ...)",
      "resetBtn.addEventListener('click', ...)",
      "randomBtn.addEventListener('click', ...)",
      "clearBtn.addEventListener('click', ...)",
      "capInput.addEventListener('change', ...)",
      "algoSelect.addEventListener('change', ...)",
      "speedInput.addEventListener('input', ...)",
      "showTableCheck.addEventListener('change', ...)",
      "animateCheck.addEventListener('change', ...)"
    ],
    "extracted_states_count": 8,
    "extracted_transitions_count": 7,
    "extraction_confidence": 1,
    "notes": []
  }
}