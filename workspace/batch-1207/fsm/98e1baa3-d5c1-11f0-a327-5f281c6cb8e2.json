{
  "meta": {
    "concept": "Insertion Sort Visualizer",
    "topic": "Sorting Algorithms",
    "educational_goal": "To visualize the insertion sort algorithm step-by-step.",
    "expected_interactions": [
      "Generate random array",
      "Prepare steps for sorting",
      "Reset the visualization",
      "Play the sorting animation",
      "Pause the animation",
      "Step forward/backward through the sorting process",
      "Load a custom array"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "renderArray(array, {highlight: {}})"
      ],
      "exit_actions": [],
      "evidence": [
        "initial preparation"
      ],
      "confidence": 1
    },
    {
      "id": "S1_ArrayGenerated",
      "label": "Array Generated",
      "type": "intermediate",
      "entry_actions": [
        "renderArray(array, {highlight: {}})"
      ],
      "exit_actions": [],
      "evidence": [
        "Random array generated. Press \"Prepare Steps\" to compute frames."
      ],
      "confidence": 1
    },
    {
      "id": "S2_StepsPrepared",
      "label": "Steps Prepared",
      "type": "intermediate",
      "entry_actions": [
        "goToStep(0)"
      ],
      "exit_actions": [],
      "evidence": [
        "Prepared {steps.length} steps. Comparison total: {result.totals.comp}, writes total: {result.totals.writes}. Press Play."
      ],
      "confidence": 1
    },
    {
      "id": "S3_Playing",
      "label": "Playing",
      "type": "final",
      "entry_actions": [
        "play()"
      ],
      "exit_actions": [
        "pause()"
      ],
      "evidence": [
        "if(playing) return; playing = true;"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Paused",
      "label": "Paused",
      "type": "final",
      "entry_actions": [
        "pause()"
      ],
      "exit_actions": [],
      "evidence": [
        "playing = false; playBtn.disabled = false;"
      ],
      "confidence": 1
    },
    {
      "id": "S5_StepForward",
      "label": "Step Forward",
      "type": "intermediate",
      "entry_actions": [
        "goToStep(currentStep + 1)"
      ],
      "exit_actions": [],
      "evidence": [
        "if(currentStep < steps.length-1) goToStep(currentStep+1);"
      ],
      "confidence": 1
    },
    {
      "id": "S6_StepBackward",
      "label": "Step Backward",
      "type": "intermediate",
      "entry_actions": [
        "goToStep(currentStep - 1)"
      ],
      "exit_actions": [],
      "evidence": [
        "if(currentStep > 0) goToStep(currentStep-1);"
      ],
      "confidence": 1
    },
    {
      "id": "S7_CustomArrayLoaded",
      "label": "Custom Array Loaded",
      "type": "intermediate",
      "entry_actions": [
        "renderArray(array, {highlight: {}})"
      ],
      "exit_actions": [],
      "evidence": [
        "Custom array loaded. Press \"Prepare Steps\" to compute frames."
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "GenerateRandom",
      "event_type": "click",
      "description": "Generate a random array",
      "trigger_selectors": [
        "#generate"
      ],
      "evidence": [
        "generateBtn.addEventListener('click', ()=>{ array = genRandom(Number(sizeRange.value)); })"
      ],
      "confidence": 1
    },
    {
      "id": "PrepareSteps",
      "event_type": "click",
      "description": "Prepare sorting steps",
      "trigger_selectors": [
        "#prepare"
      ],
      "evidence": [
        "prepareBtn.addEventListener('click', ()=>{ const result = buildSteps(array, order); })"
      ],
      "confidence": 1
    },
    {
      "id": "Reset",
      "event_type": "click",
      "description": "Reset the visualization",
      "trigger_selectors": [
        "#reset"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', ()=>{ pause(); })"
      ],
      "confidence": 1
    },
    {
      "id": "Play",
      "event_type": "click",
      "description": "Start playing the sorting animation",
      "trigger_selectors": [
        "#play"
      ],
      "evidence": [
        "playBtn.addEventListener('click', ()=>{ play(); })"
      ],
      "confidence": 1
    },
    {
      "id": "Pause",
      "event_type": "click",
      "description": "Pause the sorting animation",
      "trigger_selectors": [
        "#pause"
      ],
      "evidence": [
        "pauseBtn.addEventListener('click', ()=>{ pause(); })"
      ],
      "confidence": 1
    },
    {
      "id": "StepForward",
      "event_type": "click",
      "description": "Step forward through the sorting process",
      "trigger_selectors": [
        "#stepForward"
      ],
      "evidence": [
        "stepFwdBtn.addEventListener('click', ()=>{ if(currentStep < steps.length-1) goToStep(currentStep+1); })"
      ],
      "confidence": 1
    },
    {
      "id": "StepBackward",
      "event_type": "click",
      "description": "Step backward through the sorting process",
      "trigger_selectors": [
        "#stepBack"
      ],
      "evidence": [
        "stepBackBtn.addEventListener('click', ()=>{ if(currentStep > 0) goToStep(currentStep-1); })"
      ],
      "confidence": 1
    },
    {
      "id": "LoadCustomArray",
      "event_type": "click",
      "description": "Load a custom array from input",
      "trigger_selectors": [
        "#load"
      ],
      "evidence": [
        "loadBtn.addEventListener('click', ()=>{ const parsed = raw.split(',').map(s=>Number(s.trim())).filter(v=>!Number.isNaN(v)); })"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_ArrayGenerated",
      "event": "GenerateRandom",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "generateBtn.addEventListener('click', ()=>{ array = genRandom(Number(sizeRange.value)); })"
      ],
      "confidence": 1
    },
    {
      "from": "S1_ArrayGenerated",
      "to": "S2_StepsPrepared",
      "event": "PrepareSteps",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "prepareBtn.addEventListener('click', ()=>{ const result = buildSteps(array, order); })"
      ],
      "confidence": 1
    },
    {
      "from": "S2_StepsPrepared",
      "to": "S3_Playing",
      "event": "Play",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "playBtn.addEventListener('click', ()=>{ play(); })"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Playing",
      "to": "S4_Paused",
      "event": "Pause",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "pauseBtn.addEventListener('click', ()=>{ pause(); })"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Paused",
      "to": "S3_Playing",
      "event": "Play",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "playBtn.addEventListener('click', ()=>{ play(); })"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Paused",
      "to": "S5_StepForward",
      "event": "StepForward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "stepFwdBtn.addEventListener('click', ()=>{ if(currentStep < steps.length-1) goToStep(currentStep+1); })"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Paused",
      "to": "S6_StepBackward",
      "event": "StepBackward",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "stepBackBtn.addEventListener('click', ()=>{ if(currentStep > 0) goToStep(currentStep-1); })"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Paused",
      "to": "S1_ArrayGenerated",
      "event": "Reset",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "resetBtn.addEventListener('click', ()=>{ pause(); })"
      ],
      "confidence": 1
    },
    {
      "from": "S1_ArrayGenerated",
      "to": "S7_CustomArrayLoaded",
      "event": "LoadCustomArray",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "loadBtn.addEventListener('click', ()=>{ const parsed = raw.split(',').map(s=>Number(s.trim())).filter(v=>!Number.isNaN(v)); })"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#generate",
      "text": "Generate Random",
      "attributes": {},
      "evidence": [
        "<button id=\"generate\" class=\"primary\">Generate Random</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#prepare",
      "text": "Prepare Steps",
      "attributes": {},
      "evidence": [
        "<button id=\"prepare\">Prepare Steps</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#reset",
      "text": "Reset",
      "attributes": {},
      "evidence": [
        "<button id=\"reset\">Reset</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#play",
      "text": "Play",
      "attributes": {},
      "evidence": [
        "<button id=\"play\" class=\"primary\">Play</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#pause",
      "text": "Pause",
      "attributes": {},
      "evidence": [
        "<button id=\"pause\">Pause</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepBack",
      "text": "Step Back",
      "attributes": {},
      "evidence": [
        "<button id=\"stepBack\">Step Back</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepForward",
      "text": "Step Forward",
      "attributes": {},
      "evidence": [
        "<button id=\"stepForward\">Step Forward</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#arrinput",
      "text": "Array (comma separated)",
      "attributes": {
        "placeholder": "e.g. 5,3,8,1,6"
      },
      "evidence": [
        "<input id=\"arrinput\" placeholder=\"e.g. 5,3,8,1,6\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#load",
      "text": "Load",
      "attributes": {},
      "evidence": [
        "<button id=\"load\">Load</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#size",
      "text": "Size",
      "attributes": {
        "type": "range",
        "min": "5",
        "max": "40",
        "value": "18"
      },
      "evidence": [
        "<input id=\"size\" type=\"range\" min=\"5\" max=\"40\" value=\"18\" />"
      ]
    },
    {
      "type": "select",
      "selector": "#order",
      "text": "Order",
      "attributes": {},
      "evidence": [
        "<select id=\"order\">"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "Speed",
      "attributes": {
        "type": "range",
        "min": "50",
        "max": "1200",
        "value": "360"
      },
      "evidence": [
        "<input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" value=\"360\" />"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-04T12:00:00Z",
    "detected_components_count": 12,
    "detected_components": [
      {
        "type": "button",
        "selector": "#generate",
        "text": "Generate Random",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#prepare",
        "text": "Prepare Steps",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#reset",
        "text": "Reset",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#play",
        "text": "Play",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#pause",
        "text": "Pause",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#stepBack",
        "text": "Step Back",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#stepForward",
        "text": "Step Forward",
        "attributes": {}
      },
      {
        "type": "input",
        "selector": "#arrinput",
        "text": "Array (comma separated)",
        "attributes": {
          "placeholder": "e.g. 5,3,8,1,6"
        }
      },
      {
        "type": "button",
        "selector": "#load",
        "text": "Load",
        "attributes": {}
      },
      {
        "type": "input",
        "selector": "#size",
        "text": "Size",
        "attributes": {
          "type": "range",
          "min": "5",
          "max": "40",
          "value": "18"
        }
      },
      {
        "type": "select",
        "selector": "#order",
        "text": "Order",
        "attributes": {}
      },
      {
        "type": "input",
        "selector": "#speed",
        "text": "Speed",
        "attributes": {
          "type": "range",
          "min": "50",
          "max": "1200",
          "value": "360"
        }
      }
    ],
    "detected_event_handlers_count": 8,
    "detected_event_handlers": [
      "sizeRange.addEventListener('input', ()=>{ sizeLabel.textContent = sizeRange.value; })",
      "generateBtn.addEventListener('click', ()=>{ array = genRandom(Number(sizeRange.value)); })",
      "prepareBtn.addEventListener('click', ()=>{ const result = buildSteps(array, order); })",
      "resetBtn.addEventListener('click', ()=>{ pause(); })",
      "playBtn.addEventListener('click', ()=>{ play(); })",
      "pauseBtn.addEventListener('click', ()=>{ pause(); })",
      "stepFwdBtn.addEventListener('click', ()=>{ if(currentStep < steps.length-1) goToStep(currentStep+1); })",
      "stepBackBtn.addEventListener('click', ()=>{ if(currentStep > 0) goToStep(currentStep-1); })"
    ],
    "extracted_states_count": 8,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}