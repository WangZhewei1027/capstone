{
  "meta": {
    "concept": "Topological Sort Visualization",
    "topic": "Topological Sort",
    "educational_goal": "To visualize the process of topological sorting of a directed graph.",
    "expected_interactions": [
      "Input nodes and edges",
      "Run topological sort",
      "View results and graph visualization"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "initialRender()"
      ],
      "exit_actions": [],
      "evidence": [
        "const parsed = parseInput();",
        "if (parsed) {",
        "graphRenderer.layoutNodes(nodes, edges);",
        "graphRenderer.drawGraph(nodes, edges);"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Error",
      "label": "Error",
      "type": "error",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "errorDiv.textContent = 'Please enter nodes.';",
        "errorDiv.textContent = 'Duplicate nodes detected.';",
        "errorDiv.textContent = 'Graph has at least one cycle. Topological sort not possible.';"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Sorting",
      "label": "Sorting",
      "type": "processing",
      "entry_actions": [
        "topologicalSort(nodes, edges)"
      ],
      "exit_actions": [],
      "evidence": [
        "const { order, hasCycle } = topologicalSort(nodes, edges);"
      ],
      "confidence": 1
    },
    {
      "id": "S3_Animating",
      "label": "Animating",
      "type": "processing",
      "entry_actions": [
        "animateTopoSort(nodes, edges, order)"
      ],
      "exit_actions": [],
      "evidence": [
        "await animateTopoSort(nodes, edges, order);"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Completed",
      "label": "Completed",
      "type": "final",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "resultDiv.textContent = `Topological order: ${order.join(' → ')}`;"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "RunTopologicalSort",
      "event_type": "click",
      "description": "User clicks the Run Topological Sort button.",
      "trigger_selectors": [
        "#run-btn"
      ],
      "evidence": [
        "runBtn.addEventListener('click', async () => {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_Error",
      "event": "RunTopologicalSort",
      "actions": [],
      "expected_observables": [
        "errorDiv.textContent = 'Please enter nodes.';",
        "errorDiv.textContent = 'Duplicate nodes detected.';"
      ],
      "evidence": [
        "if (!nodesRaw) {",
        "if (new Set(nodes).size !== nodes.length) {"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S2_Sorting",
      "event": "RunTopologicalSort",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "const parsed = parseInput();",
        "if (!parsed) return;",
        "const { order, hasCycle } = topologicalSort(nodes, edges);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Sorting",
      "to": "S1_Error",
      "event": "RunTopologicalSort",
      "guard": "hasCycle",
      "actions": [],
      "expected_observables": [
        "errorDiv.textContent = 'Graph has at least one cycle. Topological sort not possible.';"
      ],
      "evidence": [
        "if (hasCycle) {",
        "errorDiv.textContent = 'Graph has at least one cycle. Topological sort not possible.';"
      ],
      "confidence": 1
    },
    {
      "from": "S2_Sorting",
      "to": "S3_Animating",
      "event": "RunTopologicalSort",
      "guard": "!hasCycle",
      "actions": [],
      "expected_observables": [],
      "evidence": [
        "await animateTopoSort(nodes, edges, order);"
      ],
      "confidence": 1
    },
    {
      "from": "S3_Animating",
      "to": "S4_Completed",
      "event": "AnimationComplete",
      "actions": [],
      "expected_observables": [
        "resultDiv.textContent = `Topological order: ${order.join(' → ')}`;"
      ],
      "evidence": [
        "resultDiv.textContent = `Topological order: ${order.join(' → ')}`;"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "button",
      "selector": "#run-btn",
      "text": "Run Topological Sort",
      "attributes": {},
      "evidence": [
        "<button id=\"run-btn\">Run Topological Sort</button>"
      ]
    },
    {
      "type": "textarea",
      "selector": "#nodes",
      "text": "Nodes (one per line)",
      "attributes": {
        "placeholder": "e.g. A\nB\nC\nD"
      },
      "evidence": [
        "<textarea id=\"nodes\" placeholder=\"e.g. A&#10;B&#10;C&#10;D\"></textarea>"
      ]
    },
    {
      "type": "textarea",
      "selector": "#edges",
      "text": "Edges (format: from,to one per line)",
      "attributes": {
        "placeholder": "e.g.\nA,B\nB,C\nA,C\nC,D"
      },
      "evidence": [
        "<textarea id=\"edges\" placeholder=\"e.g.&#10;A,B&#10;B,C&#10;A,C&#10;C,D\"></textarea>"
      ]
    },
    {
      "type": "div",
      "selector": "#error",
      "text": "",
      "attributes": {},
      "evidence": [
        "<div id=\"error\"></div>"
      ]
    },
    {
      "type": "div",
      "selector": "#result",
      "text": "",
      "attributes": {},
      "evidence": [
        "<div id=\"result\"></div>"
      ]
    },
    {
      "type": "div",
      "selector": "#graph",
      "text": "",
      "attributes": {},
      "evidence": [
        "<div id=\"graph\"></div>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-04T12:00:00Z",
    "detected_components_count": 5,
    "detected_components": [
      {
        "type": "button",
        "selector": "#run-btn"
      },
      {
        "type": "textarea",
        "selector": "#nodes"
      },
      {
        "type": "textarea",
        "selector": "#edges"
      },
      {
        "type": "div",
        "selector": "#error"
      },
      {
        "type": "div",
        "selector": "#result"
      },
      {
        "type": "div",
        "selector": "#graph"
      }
    ],
    "detected_event_handlers_count": 1,
    "detected_event_handlers": [
      "runBtn.addEventListener('click', async () => {"
    ],
    "extracted_states_count": 5,
    "extracted_transitions_count": 5,
    "extraction_confidence": 1,
    "notes": [
      "All interactive elements and transitions are captured.",
      "Error handling states are included.",
      "Animation process is represented as a state.",
      "No external scripts were analyzed."
    ]
  }
}