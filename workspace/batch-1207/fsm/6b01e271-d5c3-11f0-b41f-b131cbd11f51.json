{
  "meta": {
    "concept": "K-Means Clustering Demo",
    "topic": "K-Means Clustering",
    "educational_goal": "Visualize the K-Means clustering algorithm step by step.",
    "expected_interactions": [
      "Adjust parameters",
      "Reset points",
      "Step through algorithm",
      "Play animation",
      "Reset algorithm"
    ]
  },
  "states": [
    {
      "id": "S0_Initial",
      "label": "Initial State",
      "type": "initial",
      "entry_actions": [
        "init()"
      ],
      "exit_actions": [],
      "evidence": [
        "function init() {",
        "resetAlgorithm();",
        "generatePoints();",
        "draw();"
      ],
      "confidence": 1
    },
    {
      "id": "S1_CentroidsInitialized",
      "label": "Centroids Initialized",
      "type": "intermediate",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "document.getElementById('stepInfo').textContent = 'Step: Centroids initialized';"
      ],
      "confidence": 1
    },
    {
      "id": "S2_PointsAssigned",
      "label": "Points Assigned to Clusters",
      "type": "intermediate",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "document.getElementById('stepInfo').textContent = 'Step: Points assigned to clusters';"
      ],
      "confidence": 1
    },
    {
      "id": "S3_CentroidsUpdated",
      "label": "Centroids Updated",
      "type": "intermediate",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "document.getElementById('stepInfo').textContent = 'Step: Centroids updated';"
      ],
      "confidence": 1
    },
    {
      "id": "S4_Converged",
      "label": "Algorithm Converged",
      "type": "final",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "document.getElementById('stepInfo').textContent = 'Step: Centroids updated (Converged!)';"
      ],
      "confidence": 1
    },
    {
      "id": "S5_AnimationPlaying",
      "label": "Animation Playing",
      "type": "intermediate",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "isPlaying = true;",
        "document.getElementById('playButton').textContent = 'Pause Animation';"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "K_VALUE_CHANGE",
      "event_type": "input",
      "description": "Change in number of clusters (K)",
      "trigger_selectors": [
        "#kValue"
      ],
      "evidence": [
        "document.getElementById('kValue').addEventListener('input', function() {",
        "k = parseInt(this.value);"
      ],
      "confidence": 1
    },
    {
      "id": "POINT_COUNT_CHANGE",
      "event_type": "input",
      "description": "Change in number of points",
      "trigger_selectors": [
        "#pointCount"
      ],
      "evidence": [
        "document.getElementById('pointCount').addEventListener('input', function() {",
        "pointCount = parseInt(this.value);"
      ],
      "confidence": 1
    },
    {
      "id": "ANIMATION_SPEED_CHANGE",
      "event_type": "input",
      "description": "Change in animation speed",
      "trigger_selectors": [
        "#animationSpeed"
      ],
      "evidence": [
        "document.getElementById('animationSpeed').addEventListener('input', function() {",
        "animationSpeed = parseInt(this.value);"
      ],
      "confidence": 1
    },
    {
      "id": "RESET_BUTTON_CLICK",
      "event_type": "click",
      "description": "Reset points button clicked",
      "trigger_selectors": [
        "#resetButton"
      ],
      "evidence": [
        "document.getElementById('resetButton').addEventListener('click', function() {"
      ],
      "confidence": 1
    },
    {
      "id": "STEP_BUTTON_CLICK",
      "event_type": "click",
      "description": "Next step button clicked",
      "trigger_selectors": [
        "#stepButton"
      ],
      "evidence": [
        "document.getElementById('stepButton').addEventListener('click', function() {"
      ],
      "confidence": 1
    },
    {
      "id": "PLAY_BUTTON_CLICK",
      "event_type": "click",
      "description": "Play animation button clicked",
      "trigger_selectors": [
        "#playButton"
      ],
      "evidence": [
        "document.getElementById('playButton').addEventListener('click', function() {"
      ],
      "confidence": 1
    },
    {
      "id": "RESET_ALGORITHM_CLICK",
      "event_type": "click",
      "description": "Reset algorithm button clicked",
      "trigger_selectors": [
        "#resetAlgorithm"
      ],
      "evidence": [
        "document.getElementById('resetAlgorithm').addEventListener('click', function() {"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Initial",
      "to": "S1_CentroidsInitialized",
      "event": "STEP_BUTTON_CLICK",
      "actions": [
        "algorithmStep()"
      ],
      "expected_observables": [
        "Step: Centroids initialized"
      ],
      "evidence": [
        "if (step === 0) {",
        "initCentroids();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_CentroidsInitialized",
      "to": "S2_PointsAssigned",
      "event": "STEP_BUTTON_CLICK",
      "actions": [
        "algorithmStep()"
      ],
      "expected_observables": [
        "Step: Points assigned to clusters"
      ],
      "evidence": [
        "else if (step === 1) {",
        "assignPointsToClusters();"
      ],
      "confidence": 1
    },
    {
      "from": "S2_PointsAssigned",
      "to": "S3_CentroidsUpdated",
      "event": "STEP_BUTTON_CLICK",
      "actions": [
        "algorithmStep()"
      ],
      "expected_observables": [
        "Step: Centroids updated"
      ],
      "evidence": [
        "else if (step === 2) {",
        "const converged = updateCentroids();"
      ],
      "confidence": 1
    },
    {
      "from": "S3_CentroidsUpdated",
      "to": "S4_Converged",
      "event": "STEP_BUTTON_CLICK",
      "guard": "converged",
      "actions": [
        "algorithmStep()"
      ],
      "expected_observables": [
        "Step: Centroids updated (Converged!)"
      ],
      "evidence": [
        "if (converged) {",
        "step = 3;"
      ],
      "confidence": 1
    },
    {
      "from": "S3_CentroidsUpdated",
      "to": "S2_PointsAssigned",
      "event": "STEP_BUTTON_CLICK",
      "guard": "!converged",
      "actions": [
        "algorithmStep()"
      ],
      "expected_observables": [
        "Step: Centroids updated"
      ],
      "evidence": [
        "if (!converged) {",
        "step = 1;"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Initial",
      "to": "S0_Initial",
      "event": "RESET_BUTTON_CLICK",
      "actions": [
        "generatePoints()",
        "resetAlgorithm()"
      ],
      "expected_observables": [
        "Step: Initial points generated"
      ],
      "evidence": [
        "document.getElementById('resetButton').addEventListener('click', function() {"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Converged",
      "to": "S0_Initial",
      "event": "PLAY_BUTTON_CLICK",
      "actions": [
        "resetAlgorithm()"
      ],
      "expected_observables": [
        "Step: Initial points generated"
      ],
      "evidence": [
        "if (step >= 3) {",
        "resetAlgorithm();"
      ],
      "confidence": 1
    },
    {
      "from": "S4_Converged",
      "to": "S5_AnimationPlaying",
      "event": "PLAY_BUTTON_CLICK",
      "actions": [
        "toggleAnimation()"
      ],
      "expected_observables": [
        "Play Animation"
      ],
      "evidence": [
        "toggleAnimation();"
      ],
      "confidence": 1
    },
    {
      "from": "S5_AnimationPlaying",
      "to": "S4_Converged",
      "event": "PLAY_BUTTON_CLICK",
      "actions": [
        "toggleAnimation()"
      ],
      "expected_observables": [
        "Pause Animation"
      ],
      "evidence": [
        "toggleAnimation();"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#kValue",
      "text": "Number of Clusters (K)",
      "attributes": {
        "min": "2",
        "max": "10",
        "value": "3"
      },
      "evidence": [
        "<input type=\"range\" id=\"kValue\" min=\"2\" max=\"10\" value=\"3\">"
      ]
    },
    {
      "type": "input",
      "selector": "#pointCount",
      "text": "Number of Points",
      "attributes": {
        "min": "20",
        "max": "200",
        "value": "100"
      },
      "evidence": [
        "<input type=\"range\" id=\"pointCount\" min=\"20\" max=\"200\" value=\"100\">"
      ]
    },
    {
      "type": "input",
      "selector": "#animationSpeed",
      "text": "Animation Speed",
      "attributes": {
        "min": "1",
        "max": "10",
        "value": "5"
      },
      "evidence": [
        "<input type=\"range\" id=\"animationSpeed\" min=\"1\" max=\"10\" value=\"5\">"
      ]
    },
    {
      "type": "button",
      "selector": "#resetButton",
      "text": "Reset Points",
      "attributes": {},
      "evidence": [
        "<button id=\"resetButton\">Reset Points</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#stepButton",
      "text": "Next Step",
      "attributes": {},
      "evidence": [
        "<button id=\"stepButton\">Next Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#playButton",
      "text": "Play Animation",
      "attributes": {},
      "evidence": [
        "<button id=\"playButton\">Play Animation</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetAlgorithm",
      "text": "Reset Algorithm",
      "attributes": {},
      "evidence": [
        "<button id=\"resetAlgorithm\">Reset Algorithm</button>"
      ]
    },
    {
      "type": "canvas",
      "selector": "#canvas",
      "text": "",
      "attributes": {
        "width": "800",
        "height": "500"
      },
      "evidence": [
        "<canvas id=\"canvas\" width=\"800\" height=\"500\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-01T00:00:00Z",
    "detected_components_count": 7,
    "detected_components": [
      {
        "type": "input",
        "selector": "#kValue",
        "text": "Number of Clusters (K)",
        "attributes": {
          "min": "2",
          "max": "10",
          "value": "3"
        }
      },
      {
        "type": "input",
        "selector": "#pointCount",
        "text": "Number of Points",
        "attributes": {
          "min": "20",
          "max": "200",
          "value": "100"
        }
      },
      {
        "type": "input",
        "selector": "#animationSpeed",
        "text": "Animation Speed",
        "attributes": {
          "min": "1",
          "max": "10",
          "value": "5"
        }
      },
      {
        "type": "button",
        "selector": "#resetButton",
        "text": "Reset Points",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#stepButton",
        "text": "Next Step",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#playButton",
        "text": "Play Animation",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#resetAlgorithm",
        "text": "Reset Algorithm",
        "attributes": {}
      }
    ],
    "detected_event_handlers_count": 7,
    "detected_event_handlers": [
      "document.getElementById('kValue').addEventListener('input', function() {",
      "document.getElementById('pointCount').addEventListener('input', function() {",
      "document.getElementById('animationSpeed').addEventListener('input', function() {",
      "document.getElementById('resetButton').addEventListener('click', function() {",
      "document.getElementById('stepButton').addEventListener('click', function() {",
      "document.getElementById('playButton').addEventListener('click', function() {",
      "document.getElementById('resetAlgorithm').addEventListener('click', function() {"
    ],
    "extracted_states_count": 6,
    "extracted_transitions_count": 8,
    "extraction_confidence": 1,
    "notes": []
  }
}