{
  "meta": {
    "concept": "Priority Queue (Binary Heap) Visualizer",
    "topic": "Data Structures",
    "educational_goal": "To visualize and understand the operations of a priority queue implemented as a binary heap.",
    "expected_interactions": [
      "Enqueue an item",
      "Dequeue an item",
      "Peek at the top item",
      "Change priority of an item",
      "Remove an item by value",
      "Clear the queue",
      "Insert random items",
      "Bulk insert items"
    ]
  },
  "states": [
    {
      "id": "S0_Initialized",
      "label": "Initialized",
      "type": "active",
      "entry_actions": [
        "initPQ()"
      ],
      "exit_actions": [],
      "evidence": [
        "log('Initialized ' + (modeEl.value === 'min' ? 'min-heap' : 'max-heap'));"
      ],
      "confidence": 1
    },
    {
      "id": "S1_Empty",
      "label": "Empty Queue",
      "type": "active",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "pq.isEmpty()"
      ],
      "confidence": 1
    },
    {
      "id": "S2_NonEmpty",
      "label": "Non-Empty Queue",
      "type": "active",
      "entry_actions": [
        "renderAll()"
      ],
      "exit_actions": [],
      "evidence": [
        "pq.size() > 0"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "Enqueue",
      "event_type": "click",
      "description": "Enqueue an item into the priority queue.",
      "trigger_selectors": [
        "#enqueue"
      ],
      "evidence": [
        "enqueueBtn.addEventListener('click', ()=>{",
        "const steps = pq.enqueue({value:v, priority:p});"
      ],
      "confidence": 1
    },
    {
      "id": "Dequeue",
      "event_type": "click",
      "description": "Dequeue the top item from the priority queue.",
      "trigger_selectors": [
        "#dequeue"
      ],
      "evidence": [
        "dequeueBtn.addEventListener('click', ()=>{",
        "const res = pq.dequeue();"
      ],
      "confidence": 1
    },
    {
      "id": "Peek",
      "event_type": "click",
      "description": "Peek at the top item of the priority queue.",
      "trigger_selectors": [
        "#peek"
      ],
      "evidence": [
        "peekBtn.addEventListener('click', ()=>{",
        "const top = pq.peek();"
      ],
      "confidence": 1
    },
    {
      "id": "Clear",
      "event_type": "click",
      "description": "Clear all items from the priority queue.",
      "trigger_selectors": [
        "#clear"
      ],
      "evidence": [
        "clearBtn.addEventListener('click', ()=>{",
        "pq.clear();"
      ],
      "confidence": 1
    },
    {
      "id": "InsertRandom",
      "event_type": "click",
      "description": "Insert a random item into the priority queue.",
      "trigger_selectors": [
        "#random"
      ],
      "evidence": [
        "randomBtn.addEventListener('click', ()=>{",
        "const steps = pq.enqueue({value:v, priority:p});"
      ],
      "confidence": 1
    },
    {
      "id": "BulkInsert",
      "event_type": "click",
      "description": "Insert multiple random items into the priority queue.",
      "trigger_selectors": [
        "#bulk"
      ],
      "evidence": [
        "bulkBtn.addEventListener('click', ()=>{",
        "for(let i=0;i<10;i++){",
        "const steps = pq.enqueue({value:v, priority:p});"
      ],
      "confidence": 1
    },
    {
      "id": "ChangePriority",
      "event_type": "click",
      "description": "Change the priority of an existing item.",
      "trigger_selectors": [
        "#changePri"
      ],
      "evidence": [
        "changeBtn.addEventListener('click', ()=>{",
        "const res = pq.changePriority(val, newPri);"
      ],
      "confidence": 1
    },
    {
      "id": "RemoveByValue",
      "event_type": "click",
      "description": "Remove an item from the queue by its value.",
      "trigger_selectors": [
        "#remove"
      ],
      "evidence": [
        "removeBtn.addEventListener('click', ()=>{",
        "const res = pq.removeByValue(val);"
      ],
      "confidence": 1
    },
    {
      "id": "ModeChange",
      "event_type": "change",
      "description": "Change the mode of the priority queue (min or max).",
      "trigger_selectors": [
        "#mode"
      ],
      "evidence": [
        "modeEl.addEventListener('change', ()=>{",
        "initPQ();"
      ],
      "confidence": 1
    },
    {
      "id": "SpeedChange",
      "event_type": "input",
      "description": "Change the animation speed.",
      "trigger_selectors": [
        "#speed"
      ],
      "evidence": [
        "speedEl.addEventListener('input', ()=>{",
        "speedVal.textContent = speedEl.value+'ms';"
      ],
      "confidence": 1
    },
    {
      "id": "ArrayItemClick",
      "event_type": "click",
      "description": "Click on an item in the array to prefill the find field.",
      "trigger_selectors": [
        "#arrayView"
      ],
      "evidence": [
        "arrayView.addEventListener('click', (e)=>{",
        "const cell = e.target.closest('.cell');"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Initialized",
      "to": "S1_Empty",
      "event": "Enqueue",
      "actions": [
        "log('Enqueued ...')"
      ],
      "expected_observables": [
        "Updated queue size",
        "Updated root"
      ],
      "evidence": [
        "if(pq.isEmpty()){ log('Cannot dequeue — queue is empty'); return; }"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Empty",
      "to": "S2_NonEmpty",
      "event": "Enqueue",
      "actions": [
        "log('Enqueued ...')"
      ],
      "expected_observables": [
        "Updated queue size",
        "Updated root"
      ],
      "evidence": [
        "if(pq.isEmpty()){ log('Cannot dequeue — queue is empty'); return; }"
      ],
      "confidence": 1
    },
    {
      "from": "S2_NonEmpty",
      "to": "S2_NonEmpty",
      "event": "Enqueue",
      "actions": [
        "log('Enqueued ...')"
      ],
      "expected_observables": [
        "Updated queue size",
        "Updated root"
      ],
      "evidence": [
        "const steps = pq.enqueue({value:v, priority:p});"
      ],
      "confidence": 1
    },
    {
      "from": "S2_NonEmpty",
      "to": "S2_NonEmpty",
      "event": "Dequeue",
      "actions": [
        "log('Dequeued ...')"
      ],
      "expected_observables": [
        "Updated queue size",
        "Updated root"
      ],
      "evidence": [
        "const res = pq.dequeue();"
      ],
      "confidence": 1
    },
    {
      "from": "S2_NonEmpty",
      "to": "S2_NonEmpty",
      "event": "ChangePriority",
      "actions": [
        "log('Changed priority ...')"
      ],
      "expected_observables": [
        "Updated queue structure"
      ],
      "evidence": [
        "const res = pq.changePriority(val, newPri);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_NonEmpty",
      "to": "S2_NonEmpty",
      "event": "RemoveByValue",
      "actions": [
        "log('Removed ...')"
      ],
      "expected_observables": [
        "Updated queue structure"
      ],
      "evidence": [
        "const res = pq.removeByValue(val);"
      ],
      "confidence": 1
    },
    {
      "from": "S2_NonEmpty",
      "to": "S1_Empty",
      "event": "Clear",
      "actions": [
        "log('Cleared heap')"
      ],
      "expected_observables": [
        "Queue size is 0",
        "Root is empty"
      ],
      "evidence": [
        "pq.clear();"
      ],
      "confidence": 1
    },
    {
      "from": "S2_NonEmpty",
      "to": "S2_NonEmpty",
      "event": "InsertRandom",
      "actions": [
        "log('Enqueued random ...')"
      ],
      "expected_observables": [
        "Updated queue size",
        "Updated root"
      ],
      "evidence": [
        "const steps = pq.enqueue({value:v, priority:p});"
      ],
      "confidence": 1
    },
    {
      "from": "S2_NonEmpty",
      "to": "S2_NonEmpty",
      "event": "BulkInsert",
      "actions": [
        "log('Bulk inserted 10 items')"
      ],
      "expected_observables": [
        "Updated queue size",
        "Updated root"
      ],
      "evidence": [
        "for(let i=0;i<10;i++){",
        "const steps = pq.enqueue({value:v, priority:p});"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Initialized",
      "to": "S1_Empty",
      "event": "ModeChange",
      "actions": [
        "initPQ()"
      ],
      "expected_observables": [
        "Updated queue size",
        "Updated root"
      ],
      "evidence": [
        "modeEl.addEventListener('change', ()=>{",
        "initPQ();"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "select",
      "selector": "#mode",
      "text": "Mode",
      "attributes": {
        "id": "mode"
      },
      "evidence": [
        "<select id=\"mode\">"
      ]
    },
    {
      "type": "input",
      "selector": "#val",
      "text": "Value (string)",
      "attributes": {
        "id": "val",
        "type": "text"
      },
      "evidence": [
        "<input id=\"val\" type=\"text\" placeholder=\"Value (string)\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#pri",
      "text": "Priority (number)",
      "attributes": {
        "id": "pri",
        "type": "number"
      },
      "evidence": [
        "<input id=\"pri\" type=\"number\" placeholder=\"Priority (number)\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#enqueue",
      "text": "Enqueue",
      "attributes": {
        "id": "enqueue",
        "class": "small"
      },
      "evidence": [
        "<button id=\"enqueue\" class=\"small\">Enqueue</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#dequeue",
      "text": "Dequeue",
      "attributes": {
        "id": "dequeue",
        "class": "small"
      },
      "evidence": [
        "<button id=\"dequeue\" class=\"small\">Dequeue</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#peek",
      "text": "Peek",
      "attributes": {
        "id": "peek",
        "class": "small ghost"
      },
      "evidence": [
        "<button id=\"peek\" class=\"small ghost\">Peek</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#clear",
      "text": "Clear",
      "attributes": {
        "id": "clear",
        "class": "small ghost"
      },
      "evidence": [
        "<button id=\"clear\" class=\"small ghost\">Clear</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#random",
      "text": "Insert Random",
      "attributes": {
        "id": "random",
        "class": "small"
      },
      "evidence": [
        "<button id=\"random\" class=\"small\">Insert Random</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#bulk",
      "text": "Bulk Random (10)",
      "attributes": {
        "id": "bulk",
        "class": "small"
      },
      "evidence": [
        "<button id=\"bulk\" class=\"small\">Bulk Random (10)</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#findVal",
      "text": "Value to find",
      "attributes": {
        "id": "findVal",
        "type": "text"
      },
      "evidence": [
        "<input id=\"findVal\" type=\"text\" placeholder=\"Value to find\" />"
      ]
    },
    {
      "type": "input",
      "selector": "#newPri",
      "text": "New priority",
      "attributes": {
        "id": "newPri",
        "type": "number"
      },
      "evidence": [
        "<input id=\"newPri\" type=\"number\" placeholder=\"New priority\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#changePri",
      "text": "Change Priority",
      "attributes": {
        "id": "changePri",
        "class": "small"
      },
      "evidence": [
        "<button id=\"changePri\" class=\"small\">Change Priority</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#remove",
      "text": "Remove by Value",
      "attributes": {
        "id": "remove",
        "class": "small ghost"
      },
      "evidence": [
        "<button id=\"remove\" class=\"small ghost\">Remove by Value</button>"
      ]
    },
    {
      "type": "input",
      "selector": "#speed",
      "text": "Animation speed",
      "attributes": {
        "id": "speed",
        "type": "range",
        "min": "50",
        "max": "1000",
        "value": "300"
      },
      "evidence": [
        "<input id=\"speed\" type=\"range\" min=\"50\" max=\"1000\" value=\"300\">"
      ]
    },
    {
      "type": "div",
      "selector": "#arrayView",
      "text": "Heap Array View",
      "attributes": {
        "id": "arrayView",
        "aria-live": "polite"
      },
      "evidence": [
        "<div class=\"array-view\" id=\"arrayView\" aria-live=\"polite\"></div>"
      ]
    },
    {
      "type": "div",
      "selector": "#log",
      "text": "Log",
      "attributes": {
        "id": "log"
      },
      "evidence": [
        "<div class=\"log\" id=\"log\"></div>"
      ]
    },
    {
      "type": "span",
      "selector": "#size",
      "text": "Size",
      "attributes": {
        "id": "size"
      },
      "evidence": [
        "<span id=\"size\">0</span>"
      ]
    },
    {
      "type": "span",
      "selector": "#root",
      "text": "Root",
      "attributes": {
        "id": "root"
      },
      "evidence": [
        "<span id=\"root\">—</span>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-01T00:00:00Z",
    "detected_components_count": 15,
    "detected_components": [
      {
        "type": "select",
        "selector": "#mode"
      },
      {
        "type": "input",
        "selector": "#val"
      },
      {
        "type": "input",
        "selector": "#pri"
      },
      {
        "type": "button",
        "selector": "#enqueue"
      },
      {
        "type": "button",
        "selector": "#dequeue"
      },
      {
        "type": "button",
        "selector": "#peek"
      },
      {
        "type": "button",
        "selector": "#clear"
      },
      {
        "type": "button",
        "selector": "#random"
      },
      {
        "type": "button",
        "selector": "#bulk"
      },
      {
        "type": "input",
        "selector": "#findVal"
      },
      {
        "type": "input",
        "selector": "#newPri"
      },
      {
        "type": "button",
        "selector": "#changePri"
      },
      {
        "type": "button",
        "selector": "#remove"
      },
      {
        "type": "input",
        "selector": "#speed"
      },
      {
        "type": "div",
        "selector": "#arrayView"
      },
      {
        "type": "div",
        "selector": "#log"
      },
      {
        "type": "span",
        "selector": "#size"
      },
      {
        "type": "span",
        "selector": "#root"
      }
    ],
    "detected_event_handlers_count": 12,
    "detected_event_handlers": [
      "enqueueBtn.addEventListener('click', ()=>{",
      "dequeueBtn.addEventListener('click', ()=>{",
      "peekBtn.addEventListener('click', ()=>{",
      "clearBtn.addEventListener('click', ()=>{",
      "randomBtn.addEventListener('click', ()=>{",
      "bulkBtn.addEventListener('click', ()=>{",
      "changeBtn.addEventListener('click', ()=>{",
      "removeBtn.addEventListener('click', ()=>{",
      "modeEl.addEventListener('change', ()=>{",
      "speedEl.addEventListener('input', ()=>{",
      "arrayView.addEventListener('click', (e)=>{",
      "document.addEventListener('keydown', (e)=>{"
    ],
    "extracted_states_count": 3,
    "extracted_transitions_count": 12,
    "extraction_confidence": 1,
    "notes": []
  }
}