{
  "meta": {
    "concept": "K-Means Clustering Visualization",
    "topic": "K-Means Clustering",
    "educational_goal": "To visualize the K-Means clustering algorithm and its iterations.",
    "expected_interactions": [
      "Add points by clicking on the canvas",
      "Start clustering",
      "Advance to the next step",
      "Run clustering to completion",
      "Reset the visualization"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "initial",
      "entry_actions": [
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "Initial state before any interaction."
      ],
      "confidence": 1
    },
    {
      "id": "S1_Clustering_Started",
      "label": "Clustering Started",
      "type": "active",
      "entry_actions": [
        "initializeCentroids()",
        "assignClusters()",
        "draw()"
      ],
      "exit_actions": [],
      "evidence": [
        "clusteringStarted = true;"
      ],
      "confidence": 1
    },
    {
      "id": "S2_Converged",
      "label": "Converged",
      "type": "final",
      "entry_actions": [],
      "exit_actions": [],
      "evidence": [
        "converged = true;"
      ],
      "confidence": 1
    }
  ],
  "events": [
    {
      "id": "ClickCanvas",
      "event_type": "click",
      "description": "User clicks on the canvas to add a point.",
      "trigger_selectors": [
        "#canvas"
      ],
      "evidence": [
        "canvas.addEventListener('click', e => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "StartClustering",
      "event_type": "click",
      "description": "User clicks 'Start Clustering' button.",
      "trigger_selectors": [
        "#startBtn"
      ],
      "evidence": [
        "startBtn.addEventListener('click', () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "NextStep",
      "event_type": "click",
      "description": "User clicks 'Next Step' button.",
      "trigger_selectors": [
        "#nextBtn"
      ],
      "evidence": [
        "nextBtn.addEventListener('click', () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "RunClustering",
      "event_type": "click",
      "description": "User clicks 'Run' button.",
      "trigger_selectors": [
        "#runBtn"
      ],
      "evidence": [
        "runBtn.addEventListener('click', () => {...});"
      ],
      "confidence": 1
    },
    {
      "id": "Reset",
      "event_type": "click",
      "description": "User clicks 'Reset' button.",
      "trigger_selectors": [
        "#resetBtn"
      ],
      "evidence": [
        "resetBtn.addEventListener('click', () => {...});"
      ],
      "confidence": 1
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S0_Idle",
      "event": "ClickCanvas",
      "actions": [
        "draw()"
      ],
      "expected_observables": [
        "New point added to canvas."
      ],
      "evidence": [
        "points.push({x, y, cluster: null});"
      ],
      "confidence": 1
    },
    {
      "from": "S0_Idle",
      "to": "S1_Clustering_Started",
      "event": "StartClustering",
      "actions": [
        "initializeCentroids()",
        "assignClusters()",
        "draw()"
      ],
      "expected_observables": [
        "Clustering started, points assigned to clusters."
      ],
      "evidence": [
        "clusteringStarted = true;"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Clustering_Started",
      "to": "S1_Clustering_Started",
      "event": "NextStep",
      "actions": [
        "kMeansStep()",
        "draw()"
      ],
      "expected_observables": [
        "Clusters updated."
      ],
      "evidence": [
        "const changed = kMeansStep();"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Clustering_Started",
      "to": "S2_Converged",
      "event": "NextStep",
      "actions": [
        "draw()"
      ],
      "expected_observables": [
        "Clustering converged."
      ],
      "evidence": [
        "if (!changed) { converged = true; }"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Clustering_Started",
      "to": "S2_Converged",
      "event": "RunClustering",
      "actions": [
        "kMeansStep()",
        "draw()"
      ],
      "expected_observables": [
        "Clustering run to completion."
      ],
      "evidence": [
        "while(iter < maxIter) { const changed = kMeansStep(); }"
      ],
      "confidence": 1
    },
    {
      "from": "S1_Clustering_Started",
      "to": "S0_Idle",
      "event": "Reset",
      "actions": [
        "draw()"
      ],
      "expected_observables": [
        "All points and clusters cleared."
      ],
      "evidence": [
        "points = []; centroids = []; clusteringStarted = false;"
      ],
      "confidence": 1
    }
  ],
  "components": [
    {
      "type": "input",
      "selector": "#kInput",
      "text": "Number of Clusters (K)",
      "attributes": {
        "min": "1",
        "max": "10",
        "value": "3"
      },
      "evidence": [
        "<input type=\"number\" id=\"kInput\" min=\"1\" max=\"10\" value=\"3\" />"
      ]
    },
    {
      "type": "button",
      "selector": "#startBtn",
      "text": "Start Clustering",
      "attributes": {},
      "evidence": [
        "<button id=\"startBtn\">Start Clustering</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#nextBtn",
      "text": "Next Step",
      "attributes": {
        "disabled": "true"
      },
      "evidence": [
        "<button id=\"nextBtn\" disabled>Next Step</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#runBtn",
      "text": "Run",
      "attributes": {
        "disabled": "true"
      },
      "evidence": [
        "<button id=\"runBtn\" disabled>Run</button>"
      ]
    },
    {
      "type": "button",
      "selector": "#resetBtn",
      "text": "Reset",
      "attributes": {},
      "evidence": [
        "<button id=\"resetBtn\">Reset</button>"
      ]
    },
    {
      "type": "visual",
      "selector": "#canvas",
      "text": "Click to add points",
      "attributes": {
        "width": "600",
        "height": "400"
      },
      "evidence": [
        "<canvas id=\"canvas\" width=\"600\" height=\"400\" title=\"Click to add points\"></canvas>"
      ]
    }
  ],
  "extraction_summary": {
    "timestamp": "2023-10-10T00:00:00Z",
    "detected_components_count": 6,
    "detected_components": [
      {
        "type": "input",
        "selector": "#kInput",
        "text": "Number of Clusters (K)",
        "attributes": {
          "min": "1",
          "max": "10",
          "value": "3"
        }
      },
      {
        "type": "button",
        "selector": "#startBtn",
        "text": "Start Clustering",
        "attributes": {}
      },
      {
        "type": "button",
        "selector": "#nextBtn",
        "text": "Next Step",
        "attributes": {
          "disabled": "true"
        }
      },
      {
        "type": "button",
        "selector": "#runBtn",
        "text": "Run",
        "attributes": {
          "disabled": "true"
        }
      },
      {
        "type": "button",
        "selector": "#resetBtn",
        "text": "Reset",
        "attributes": {}
      },
      {
        "type": "visual",
        "selector": "#canvas",
        "text": "Click to add points",
        "attributes": {
          "width": "600",
          "height": "400"
        }
      }
    ],
    "detected_event_handlers_count": 5,
    "detected_event_handlers": [
      "canvas.addEventListener('click', e => {...});",
      "startBtn.addEventListener('click', () => {...});",
      "nextBtn.addEventListener('click', () => {...});",
      "runBtn.addEventListener('click', () => {...});",
      "resetBtn.addEventListener('click', () => {...});"
    ],
    "extracted_states_count": 3,
    "extracted_transitions_count": 6,
    "extraction_confidence": 1,
    "notes": []
  }
}