{
  "id": "e9339b81-d360-11f0-a097-ffdd56c22ef4",
  "timestamp": "2025-12-07T11:38:04.278Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Insertion Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Insertion Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#38bdf8;\n      --muted:#94a3b8;\n      --bar:#60a5fa;\n      --bar-compare:#fb7185;\n      --bar-key:#f97316;\n      --bar-shift:#34d399;\n      --bar-sorted:#7c3aed;\n      --text:#e6eef8;\n    }\n    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial;}\n    body{margin:0;background:linear-gradient(180deg,#071029 0%, #071527 100%);color:var(--text);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;}\n    .container{width:100%;max-width:1100px;border-radius:12px;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow: 0 8px 30px rgba(2,6,23,0.6);}\n    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;}\n    header h1{font-size:20px;margin:0;color:var(--accent);}\n    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}\n    .controls > *{background:var(--panel);border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:var(--text);font-size:13px;}\n    .controls label{display:flex;gap:8px;align-items:center;}\n    input[type=range]{width:140px;}\n    button{cursor:pointer;border:none;background:linear-gradient(90deg,var(--accent),#7dd3fc);color:#021028;padding:8px 12px;border-radius:8px;font-weight:600;}\n    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);}\n    .main{display:grid;grid-template-columns: 1fr 380px;gap:18px;align-items:start;}\n    .visualizer{background:rgba(255,255,255,0.02);border-radius:10px;padding:12px;min-height:320px;display:flex;flex-direction:column;gap:12px;}\n    .bars-wrap{flex:1;display:flex;align-items:end;gap:6px;padding:6px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);position:relative;overflow:hidden;}\n    .bar{flex:1 1 auto;height:40px;border-radius:6px;background:var(--bar);display:flex;align-items:end;justify-content:center;color:rgba(0,0,0,0.6);font-size:12px;position:relative;transition:height 200ms, transform 200ms, background-color 160ms;}\n    .bar .val{position:absolute;bottom:6px;width:100%;text-align:center;font-weight:600;color:rgba(3,7,18,0.7);font-size:12px;}\n    .floating-key{position:absolute;pointer-events:none;z-index:10;padding:6px 8px;border-radius:6px;background:var(--bar-key);color:#021028;font-weight:700;transform:translate(-50%,-100%);box-shadow:0 8px 20px rgba(7,11,26,0.7);display:none;}\n    .legend{display:flex;gap:8px;flex-wrap:wrap;font-size:12px;color:var(--muted);}\n    .legend span{display:inline-flex;gap:6px;align-items:center;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);}\n    .legend .sw{width:12px;height:12px;border-radius:3px;display:inline-block;}\n    .panel{background:rgba(255,255,255,0.01);padding:12px;border-radius:10px;min-height:320px;overflow:auto;}\n    .panel h3{margin:0 0 8px 0;color:var(--accent);font-size:15px;}\n    .pseudo{background:linear-gradient(180deg, rgba(10,14,22,0.4), rgba(255,255,255,0.01));padding:10px;border-radius:8px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\",monospace;font-size:13px;color:var(--muted);line-height:1.5;}\n    .pseudo .line{padding:4px 6px;border-radius:6px;}\n    .pseudo .active{background:linear-gradient(90deg, rgba(56,189,248,0.12), rgba(124,58,237,0.06));color:var(--text);}\n    .stats{margin-top:10px;font-size:13px;color:var(--muted);display:flex;gap:10px;flex-wrap:wrap;}\n    .input-row{display:flex;gap:8px;align-items:center;margin-bottom:8px;}\n    textarea{width:100%;min-height:56px;background:transparent;border:1px dashed rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:var(--text);resize:vertical;font-size:13px;}\n    .small{font-size:12px;color:var(--muted);}\n    footer{margin-top:12px;font-size:12px;color:var(--muted);display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px;}\n    @media (max-width:900px){ .main{grid-template-columns:1fr; } .controls{justify-content:center;} }\n  </style>\n</head>\n<body>\n  <div class=\"container\" role=\"application\" aria-label=\"Insertion Sort Visualizer\">\n    <header>\n      <h1>Insertion Sort â€” Visualizer</h1>\n      <div class=\"controls\" aria-hidden=\"false\">\n        <label class=\"small\">Size\n          <input id=\"sizeRange\" type=\"range\" min=\"5\" max=\"60\" value=\"20\" />\n        </label>\n        <label class=\"small\">Speed\n          <input id=\"speedRange\" type=\"range\" min=\"50\" max=\"1200\" value=\"220\" />\n        </label>\n        <label class=\"small\">Order\n          <select id=\"orderSelect\">\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n        </label>\n        <button id=\"generateBtn\" class=\"secondary\">Generate</button>\n        <button id=\"startBtn\">Start</button>\n        <button id=\"pauseBtn\" class=\"secondary\">Pause</button>\n        <button id=\"stepBtn\" class=\"secondary\">Step</button>\n        <button id=\"resetBtn\" class=\"secondary\">Reset</button>\n      </div>\n    </header>\n\n    <div class=\"main\">\n      <div class=\"visualizer\" aria-live=\"polite\">\n        <div style=\"display:flex;justify-content:space-between;align-items:center;\">\n          <div class=\"legend\" role=\"list\" aria-label=\"Legend\">\n            <span><i class=\"sw\" style=\"background:var(--bar)\"></i> Unsorted</span>\n            <span><i class=\"sw\" style=\"background:var(--bar-key)\"></i> Key</span>\n            <span><i class=\"sw\" style=\"background:var(--bar-compare)\"></i> Comparing</span>\n            <span><i class=\"sw\" style=\"background:var(--bar-shift)\"></i> Shift</span>\n            <span><i class=\"sw\" style=\"background:var(--bar-sorted)\"></i> Sorted</span>\n          </span>\n          </div>\n          <div class=\"small\">Tip: use Step to progress one operation at a time.</div>\n        </div>\n\n        <div class=\"bars-wrap\" id=\"barsWrap\" aria-label=\"Array visualization\">\n          <!-- bars inserted here -->\n          <div id=\"floatingKey\" class=\"floating-key\" aria-hidden=\"true\"></div>\n        </div>\n\n        <div style=\"display:flex;justify-content:space-between;align-items:center;\">\n          <div class=\"small\" id=\"status\">Ready</div>\n          <div class=\"small\" id=\"opsCounter\">Operations: 0</div>\n        </div>\n      </div>\n\n      <div class=\"panel\">\n        <h3>Pseudocode</h3>\n        <div class=\"pseudo\" id=\"pseudo\">\n          <div class=\"line\" data-line=\"1\">for i = 1 to n-1</div>\n          <div class=\"line\" data-line=\"2\" style=\"padding-left:12px\">key = A[i]</div>\n          <div class=\"line\" data-line=\"3\" style=\"padding-left:12px\">j = i - 1</div>\n          <div class=\"line\" data-line=\"4\" style=\"padding-left:12px\">while j >= 0 and A[j] > key</div>\n          <div class=\"line\" data-line=\"5\" style=\"padding-left:24px\">A[j + 1] = A[j]</div>\n          <div class=\"line\" data-line=\"6\" style=\"padding-left:24px\">j = j - 1</div>\n          <div class=\"line\" data-line=\"7\" style=\"padding-left:12px\">A[j + 1] = key</div>\n        </div>\n\n        <h3 style=\"margin-top:12px\">Array Input (optional)</h3>\n        <div class=\"input-row\">\n          <textarea id=\"arrayInput\" placeholder=\"e.g., 5,3,8,1,2 (leave blank to use random)\"></textarea>\n        </div>\n        <div class=\"stats\">\n          <div id=\"complexity\">Time Complexity: Best O(n), Average O(n^2), Worst O(n^2)</div>\n          <div>Space Complexity: O(1)</div>\n        </div>\n\n        <footer>\n          <div class=\"small\">Insertion Sort: builds the sorted array one element at a time by inserting the current element into the correct position.</div>\n          <div class=\"small\">Highlights: key (orange), comparing (red), shifting (green), sorted (purple)</div>\n        </footer>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    // Insertion Sort Visualizer\n    (function(){\n      const barsWrap = document.getElementById('barsWrap');\n      const floatingKeyEl = document.getElementById('floatingKey');\n      const sizeRange = document.getElementById('sizeRange');\n      const speedRange = document.getElementById('speedRange');\n      const generateBtn = document.getElementById('generateBtn');\n      const startBtn = document.getElementById('startBtn');\n      const pauseBtn = document.getElementById('pauseBtn');\n      const stepBtn = document.getElementById('stepBtn');\n      const resetBtn = document.getElementById('resetBtn');\n      const orderSelect = document.getElementById('orderSelect');\n      const arrayInput = document.getElementById('arrayInput');\n      const statusEl = document.getElementById('status');\n      const opsCounter = document.getElementById('opsCounter');\n      const pseudo = document.getElementById('pseudo');\n      const lines = Array.from(pseudo.querySelectorAll('.line'));\n\n      let array = [];\n      let initialArray = [];\n      let bars = [];\n      let generator = null;\n      let running = false;\n      let paused = false;\n      let timer = null;\n      let ops = 0;\n      const colors = {\n        default: 'var(--bar)',\n        compare: 'var(--bar-compare)',\n        key: 'var(--bar-key)',\n        shift: 'var(--bar-shift)',\n        sorted: 'var(--bar-sorted)'\n      };\n\n      function logStatus(s){\n        statusEl.textContent = s;\n      }\n\n      function setOps(n){\n        ops = n;\n        opsCounter.textContent = 'Operations: ' + ops;\n      }\n\n      function clearHighlight(){\n        lines.forEach(l => l.classList.remove('active'));\n      }\n\n      function highlight(lineNum){\n        clearHighlight();\n        const el = pseudo.querySelector('[data-line=\"'+lineNum+'\"]');\n        if(el) el.classList.add('active');\n      }\n\n      function generateRandom(n){\n        const arr = [];\n        for(let i=0;i<n;i++){\n          arr.push(Math.floor(Math.random()*100)+5);\n        }\n        return arr;\n      }\n\n      function createBars(arr){\n        barsWrap.innerHTML = '';\n        bars = [];\n        const max = Math.max(...arr, 1);\n        arr.forEach((v,i)=>{\n          const bar = document.createElement('div');\n          bar.className = 'bar';\n          bar.style.height = (v/max*100) + '%';\n          bar.dataset.index = i;\n          const val = document.createElement('div');\n          val.className = 'val';\n          val.textContent = v;\n          bar.appendChild(val);\n          barsWrap.appendChild(bar);\n          bars.push(bar);\n        });\n        // re-add floating key element\n        barsWrap.appendChild(floatingKeyEl);\n        floatingKeyEl.style.display = 'none';\n      }\n\n      function updateBars(){\n        const max = Math.max(...array,1);\n        array.forEach((v,i)=>{\n          const b = bars[i];\n          b.style.height = (v/max*100) + '%';\n          b.querySelector('.val').textContent = v;\n          b.style.background = 'var(--bar)';\n          b.style.transform = 'translateY(0)';\n        });\n      }\n\n      function colorBar(idx, colorKey){\n        if(idx < 0 || idx >= bars.length) return;\n        bars[idx].style.background = colors[colorKey] || colorKey;\n      }\n\n      function markSorted(upto){\n        for(let k=0;k<=upto;k++){\n          if(bars[k]) bars[k].style.background = colors.sorted;\n        }\n      }\n\n      function showFloatingKey(value, fromBarIndex){\n        floatingKeyEl.textContent = value;\n        const bar = bars[fromBarIndex];\n        if(!bar) return;\n        const rect = barsWrap.getBoundingClientRect();\n        const bRect = bar.getBoundingClientRect();\n        floatingKeyEl.style.left = (bRect.left - rect.left + bRect.width/2) + 'px';\n        floatingKeyEl.style.top = (bRect.top - rect.top) + 'px';\n        floatingKeyEl.style.display = 'block';\n      }\n\n      function moveFloatingToIndex(idx){\n        const bar = bars[idx];\n        if(!bar) return;\n        const rect = barsWrap.getBoundingClientRect();\n        const bRect = bar.getBoundingClientRect();\n        floatingKeyEl.style.left = (bRect.left - rect.left + bRect.width/2) + 'px';\n      }\n\n      function hideFloating(){\n        floatingKeyEl.style.display = 'none';\n      }\n\n      // Generator that yields step objects describing operations\n      function* insertionSortGen(arr, order){\n        const n = arr.length;\n        for(let i=1;i<n;i++){\n          yield {type:'select', i}; // selecting i\n          let key = arr[i];\n          yield {type:'keyAssigned', i, key};\n          let j = i-1;\n          yield {type:'initWhile', i, j, key};\n          // condition check\n          while(j >= 0 && ((order==='asc' && arr[j] > key) || (order==='desc' && arr[j] < key))){\n            yield {type:'compare', i, j, key};\n            // shift arr[j] to arr[j+1]\n            arr[j+1] = arr[j];\n            yield {type:'shift', from:j, to:j+1, i};\n            j = j - 1;\n            yield {type:'decrement', j, i};\n          }\n          yield {type:'exitWhile', i, j, key};\n          arr[j+1] = key;\n          yield {type:'insert', pos:j+1, key, i};\n          // mark sorted prefix optionally; but not final mark of full sorted\n          yield {type:'mark', upto:i};\n        }\n        yield {type:'done'};\n      }\n\n      // Step executor: performs a single yielded operation and updates visualization\n      function handleStep(step){\n        if(!step) return;\n        const t = step.type;\n        switch(t){\n          case 'select':\n            logStatus('Selecting i = ' + step.i);\n            highlight(1);\n            // color current index\n            updateBars();\n            colorBar(step.i, 'key');\n            break;\n          case 'keyAssigned':\n            highlight(2);\n            showFloatingKey(step.key, step.i);\n            colorBar(step.i, 'key');\n            break;\n          case 'initWhile':\n            highlight(3);\n            // position floating key above the key bar\n            moveFloatingToIndex(step.i);\n            break;\n          case 'compare':\n            highlight(4);\n            logStatus(`Comparing A[${step.j}] and key (${array[step.j]} ? ${step.key})`);\n            // color comparing bar and key\n            colorBar(step.j, 'compare');\n            moveFloatingToIndex(step.i);\n            break;\n          case 'shift':\n            highlight(5);\n            logStatus(`Shifting A[${step.from}] -> position ${step.to}`);\n            // animate height change by updating bars (array already mutated in generator)\n            updateBars();\n            // color the shifted bar\n            colorBar(step.to, 'shift');\n            // small transform to show movement\n            bars[step.to].style.transform = 'translateY(-6px)';\n            break;\n          case 'decrement':\n            highlight(6);\n            logStatus(`j becomes ${step.j}`);\n            // clear transforms after short while\n            setTimeout(()=>{ bars.forEach(b=>b.style.transform='translateY(0)'); }, Math.min(180, speedRange.value));\n            break;\n          case 'exitWhile':\n            highlight(4);\n            logStatus('Exit while, will insert key at j+1');\n            moveFloatingToIndex(step.i); // still above original index until insert\n            break;\n          case 'insert':\n            highlight(7);\n            logStatus(`Inserting key (${step.key}) at position ${step.pos}`);\n            // place key into array (already mutated)\n            updateBars();\n            // animate by showing floating key move to insert position then hide\n            moveFloatingToIndex(step.pos);\n            setTimeout(()=>{ hideFloating(); }, Math.min(200, speedRange.value));\n            break;\n          case 'mark':\n            markSorted(step.upto);\n            break;\n          case 'done':\n            clearHighlight();\n            logStatus('Sorting complete');\n            // mark all as sorted\n            for(let k=0;k<bars.length;k++) bars[k].style.background = colors.sorted;\n            hideFloating();\n            break;\n        }\n      }\n\n      // Controls interactions\n      function prepareFromInputOrRandom(){\n        const txt = arrayInput.value.trim();\n        if(txt){\n          const parts = txt.split(',').map(s=>s.trim()).filter(s=>s.length>0);\n          const parsed = parts.map(s=>Number(s)).filter(n=>!Number.isNaN(n));\n          if(parsed.length > 0){\n            array = parsed.slice();\n            return;\n          }\n        }\n        const n = Number(sizeRange.value);\n        array = generateRandom(n);\n      }\n\n      function resetAll(){\n        running = false;\n        paused = false;\n        if(timer) { clearTimeout(timer); timer=null; }\n        setOps(0);\n        clearHighlight();\n        prepareFromInputOrRandom();\n        initialArray = array.slice();\n        createBars(array);\n        logStatus('Ready');\n        generator = null;\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stepBtn.disabled = false;\n        resetBtn.disabled = false;\n        generateBtn.disabled = false;\n      }\n\n      generateBtn.addEventListener('click', ()=>{\n        resetAll();\n      });\n\n      sizeRange.addEventListener('input', ()=>{\n        // generate new array when size changes\n        resetAll();\n      });\n\n      // Start running continuously\n      startBtn.addEventListener('click', ()=>{\n        if(!generator){\n          // start fresh\n          prepareFromInputOrRandom();\n          initialArray = array.slice();\n          createBars(array);\n          generator = insertionSortGen(array, orderSelect.value);\n        }\n        running = true;\n        paused = false;\n        startBtn.disabled = true;\n        pauseBtn.disabled = false;\n        generateBtn.disabled = true;\n        stepBtn.disabled = true;\n        resetBtn.disabled = true;\n        runLoop();\n      });\n\n      // Pause\n      pauseBtn.addEventListener('click', ()=>{\n        paused = true;\n        running = false;\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stepBtn.disabled = false;\n        resetBtn.disabled = false;\n        generateBtn.disabled = false;\n        logStatus('Paused');\n        if(timer){ clearTimeout(timer); timer = null; }\n      });\n\n      // Single step\n      stepBtn.addEventListener('click', ()=>{\n        if(!generator){\n          prepareFromInputOrRandom();\n          initialArray = array.slice();\n          createBars(array);\n          generator = insertionSortGen(array, orderSelect.value);\n        }\n        const res = generator.next();\n        if(!res.done){\n          handleStep(res.value);\n          setOps(ops+1);\n        } else {\n          handleStep(res.value);\n        }\n        if(res.done){\n          generator = null;\n          startBtn.disabled = false;\n          pauseBtn.disabled = true;\n          stepBtn.disabled = true;\n          resetBtn.disabled = false;\n          generateBtn.disabled = false;\n        }\n      });\n\n      // Reset to initial unsorted array\n      resetBtn.addEventListener('click', ()=>{\n        if(generator && !paused){\n          // if running, stop\n          paused = true;\n          running = false;\n          if(timer){ clearTimeout(timer); timer=null; }\n        }\n        array = initialArray.slice();\n        updateBars();\n        hideFloating();\n        generator = null;\n        setOps(0);\n        clearHighlight();\n        logStatus('Reset to initial array');\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stepBtn.disabled = false;\n        generateBtn.disabled = false;\n      });\n\n      orderSelect.addEventListener('change', ()=>{\n        // update pseudocode comparisons visually (we keep same pseudocode)\n      });\n\n      function runLoop(){\n        if(!running) return;\n        const stepDelay = Number(speedRange.value);\n        const res = generator.next();\n        if(res.done){\n          handleStep(res.value);\n          running = false;\n          generator = null;\n          startBtn.disabled = false;\n          pauseBtn.disabled = true;\n          stepBtn.disabled = true;\n          resetBtn.disabled = false;\n          generateBtn.disabled = false;\n          return;\n        } else {\n          handleStep(res.value);\n          setOps(ops+1);\n          // schedule next\n          timer = setTimeout(()=>{\n            runLoop();\n          }, stepDelay);\n        }\n      }\n\n      // initialize on load\n      resetAll();\n\n      // Accessibility: keyboard shortcuts\n      document.addEventListener('keydown', (e)=>{\n        if(e.key === ' '){\n          e.preventDefault();\n          if(running) { pauseBtn.click(); } else { startBtn.click(); }\n        } else if(e.key === 'ArrowRight'){\n          stepBtn.click();\n        } else if(e.key === 'r' && (e.ctrlKey || e.metaKey)){\n          e.preventDefault();\n          resetBtn.click();\n        }\n      });\n\n      // Small UX: disable pause button initially\n      pauseBtn.disabled = true;\n\n      // Provide ability to paste array then press generate to use it\n      generateBtn.addEventListener('click', ()=>{\n        resetAll();\n      });\n\n      // Update bars when window resizes to keep floating position correct\n      window.addEventListener('resize', ()=>{\n        // if floating visible, reposition it relative to current index if possible\n        // no-op for now\n      });\n\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Insertion Sort"
    }
  ],
  "topic": "Insertion Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}