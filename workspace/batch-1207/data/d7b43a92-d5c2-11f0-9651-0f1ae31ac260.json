{
  "id": "d7b43a92-d5c2-11f0-9651-0f1ae31ac260",
  "timestamp": "2025-12-10T12:24:15.756Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Knapsack Problem",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Knapsack Problem Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    max-width: 900px;\n  }\n  h1 {\n    text-align: center;\n  }\n  table {\n    border-collapse: collapse;\n    margin-bottom: 15px;\n    width: 100%;\n  }\n  th, td {\n    border: 1px solid #aaa;\n    padding: 8px;\n    text-align: center;\n  }\n  input[type=number] {\n    width: 80px;\n    padding: 4px;\n    margin-right: 10px;\n  }\n  button {\n    padding: 8px 16px;\n    font-size: 1em;\n    margin: 10px 0;\n    cursor: pointer;\n  }\n  #items-input {\n    margin-bottom: 20px;\n  }\n  #result {\n    margin-top: 20px;\n    background: #f9f9f9;\n    border: 1px solid #ddd;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n  .highlight {\n    background: #dff0d8;\n    font-weight: bold;\n  }\n  .warning {\n    color: red;\n    margin: 10px 0;\n  }\n  @media(max-width: 600px) {\n    input[type=number] {\n      width: 100%;\n      margin: 5px 0;\n    }\n    button {\n      width: 100%;\n    }\n  }\n</style>\n</head>\n<body>\n\n<h1>Knapsack Problem Solver Demo</h1>\n\n<p>\n  Enter the knapsack capacity (positive integer), then define items by their weight and value.\n  The goal is to maximize total value while not exceeding the capacity.\n</p>\n\n<div>\n  <label for=\"capacity\">Knapsack Capacity:&nbsp;</label>\n  <input type=\"number\" id=\"capacity\" min=\"1\" value=\"10\" />\n</div>\n\n<div id=\"items-input\">\n  <h3>Items (weight, value):</h3>\n  <table id=\"items-table\" aria-label=\"Items input table\">\n    <thead>\n      <tr><th>#</th><th>Weight</th><th>Value</th><th>Action</th></tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>1</td>\n        <td><input type=\"number\" min=\"1\" value=\"2\" /></td>\n        <td><input type=\"number\" min=\"0\" value=\"3\" /></td>\n        <td><button class=\"delete-item\" aria-label=\"Delete item 1\">✖</button></td>\n      </tr>\n      <tr>\n        <td>2</td>\n        <td><input type=\"number\" min=\"1\" value=\"3\" /></td>\n        <td><input type=\"number\" min=\"0\" value=\"4\" /></td>\n        <td><button class=\"delete-item\" aria-label=\"Delete item 2\">✖</button></td>\n      </tr>\n      <tr>\n        <td>3</td>\n        <td><input type=\"number\" min=\"1\" value=\"4\" /></td>\n        <td><input type=\"number\" min=\"0\" value=\"5\" /></td>\n        <td><button class=\"delete-item\" aria-label=\"Delete item 3\">✖</button></td>\n      </tr>\n      <tr>\n        <td>4</td>\n        <td><input type=\"number\" min=\"1\" value=\"5\" /></td>\n        <td><input type=\"number\" min=\"0\" value=\"8\" /></td>\n        <td><button class=\"delete-item\" aria-label=\"Delete item 4\">✖</button></td>\n      </tr>\n    </tbody>\n  </table>\n  <button id=\"add-item-btn\" aria-label=\"Add new item\">➕ Add Item</button>\n</div>\n\n<button id=\"solve-btn\" aria-label=\"Solve knapsack problem\">Solve Knapsack</button>\n\n<div id=\"warning-msg\" class=\"warning\" role=\"alert\" aria-live=\"assertive\"></div>\n\n<h3>Result:</h3>\n<pre id=\"result\" aria-live=\"polite\" aria-atomic=\"true\"></pre>\n\n<script>\n(() => {\n  const capacityInput = document.getElementById('capacity');\n  const itemsTableBody = document.querySelector('#items-table tbody');\n  const addItemBtn = document.getElementById('add-item-btn');\n  const solveBtn = document.getElementById('solve-btn');\n  const resultPre = document.getElementById('result');\n  const warningMsg = document.getElementById('warning-msg');\n\n  // Add new item row\n  function addItem(weight = '', value = '') {\n    const rowCount = itemsTableBody.rows.length;\n    const row = document.createElement('tr');\n    row.innerHTML = `\n      <td>${rowCount + 1}</td>\n      <td><input type=\"number\" min=\"1\" value=\"${weight}\" /></td>\n      <td><input type=\"number\" min=\"0\" value=\"${value}\" /></td>\n      <td><button class=\"delete-item\" aria-label=\"Delete item ${rowCount + 1}\">✖</button></td>\n    `;\n    itemsTableBody.appendChild(row);\n  }\n\n  // Delete item row\n  function deleteItem(event) {\n    if (!event.target.classList.contains('delete-item')) return;\n    const row = event.target.closest('tr');\n    row.remove();\n    updateRowNumbers();\n  }\n\n  // Update the item numbers in the first column and aria-label on delete buttons\n  function updateRowNumbers() {\n    Array.from(itemsTableBody.rows).forEach((row, i) => {\n      row.cells[0].textContent = i + 1;\n      const delBtn = row.querySelector('.delete-item');\n      delBtn.setAttribute('aria-label', `Delete item ${i + 1}`);\n    });\n  }\n\n  // Display warning messages\n  function warn(msg) {\n    warningMsg.textContent = msg;\n  }\n\n  // Clear warning\n  function clearWarn() {\n    warningMsg.textContent = '';\n  }\n\n  // Parse input items\n  function getItems() {\n    const items = [];\n    for (const row of itemsTableBody.rows) {\n      const weightInput = row.cells[1].querySelector('input');\n      const valueInput = row.cells[2].querySelector('input');\n      let w = parseInt(weightInput.value, 10);\n      let v = parseInt(valueInput.value, 10);\n      if (isNaN(w) || w < 1) return { error: 'Weights must be integers ≥ 1.' };\n      if (isNaN(v) || v < 0) return { error: 'Values must be integers ≥ 0.' };\n      items.push({ weight: w, value: v });\n    }\n    if (items.length === 0) return { error: 'Please add at least one item.' };\n    return { items };\n  }\n\n  // Knapsack solver - 0/1 Knapsack using DP (bottom-up)\n  // Returns { maxValue, selectedItemsIndices }\n  function knapsack(capacity, items) {\n    // dp[i][w] = maximum value for first i items with max weight w\n    const n = items.length;\n    const dp = Array(n + 1).fill(null).map(() => Array(capacity + 1).fill(0));\n\n    for (let i = 1; i <= n; i++) {\n      const { weight, value } = items[i-1];\n      for (let w = 0; w <= capacity; w++) {\n        if (weight > w) {\n          dp[i][w] = dp[i-1][w];\n        } else {\n          dp[i][w] = Math.max(dp[i-1][w], dp[i-1][w - weight] + value);\n        }\n      }\n    }\n\n    // Backtrack to find selected items\n    let w = capacity;\n    const selectedItemsIndices = [];\n    for (let i = n; i > 0; i--) {\n      if (dp[i][w] !== dp[i-1][w]) {\n        selectedItemsIndices.push(i-1);\n        w -= items[i-1].weight;\n      }\n    }\n    selectedItemsIndices.reverse();\n\n    return { maxValue: dp[n][capacity], selectedItemsIndices, dp };\n  }\n\n  // Display result including DP table summary\n  function displayResult(capacity, items, solution) {\n    const { maxValue, selectedItemsIndices, dp } = solution;\n    let output = '';\n    output += `Knapsack Capacity: ${capacity}\\n`;\n    output += `Number of Items: ${items.length}\\n\\n`;\n    output += `Items (index: weight, value):\\n`;\n    items.forEach(({weight, value}, i) => {\n      const selected = selectedItemsIndices.includes(i) ? '*' : ' ';\n      output += `${selected} [${i+1}]: (${weight}, ${value})\\n`;\n    });\n    output += '\\n';\n    output += `Max Total Value: ${maxValue}\\n`;\n    output += `Selected Items:\\n`;\n    if (selectedItemsIndices.length === 0) {\n      output += \"  None (knapsack cannot accommodate any item)\\n\";\n    } else {\n      selectedItemsIndices.forEach(i => {\n        const { weight, value } = items[i];\n        output += `  - Item ${i+1} (weight: ${weight}, value: ${value})\\n`;\n      });\n    }\n    output += '\\n';\n\n    // Show a snippet of the dp table:\n    output += \"DP Table (rows=items, cols=capacity):\\n\";\n    output += `  Capacity → 0 `;\n    for (let w = 1; w <= capacity; w++) {\n      output += w % 10 + ' ';\n    }\n    output += '\\n';\n\n    const maxRowsToShow = Math.min(items.length, 15);\n    for (let i = 0; i <= maxRowsToShow; i++) {\n      if (i === 0) {\n        output += \"i=0 (no items) \";\n      } else {\n        output += `i=${i} (item ${i}) `.padEnd(14, ' ');\n      }\n      for (let w = 0; w <= capacity; w++) {\n        output += dp[i][w].toString().padStart(2) + ' ';\n      }\n      output += '\\n';\n    }\n    if (items.length > 15) {\n      output += `... (DP table rows truncated, total items = ${items.length})\\n`;\n    }\n\n    resultPre.textContent = output;\n  }\n\n  // On Solve click\n  function solve() {\n    clearWarn();\n    resultPre.textContent = '';\n    const capacityVal = parseInt(capacityInput.value, 10);\n    if (isNaN(capacityVal) || capacityVal < 1) {\n      warn('Capacity must be an integer ≥ 1.');\n      return;\n    }\n    const { error, items } = getItems();\n    if (error) {\n      warn(error);\n      return;\n    }\n    // Check for large input sizes (heuristic limit)\n    if (capacityVal > 10000) {\n      warn('Capacity too large - computation might take a long time.');\n      return;\n    }\n    if (items.length > 1000) {\n      warn('Too many items - please limit to 1000 items or fewer.');\n      return;\n    }\n\n    try {\n      const solution = knapsack(capacityVal, items);\n      displayResult(capacityVal, items, solution);\n    } catch (ex) {\n      warn('Error during solving: ' + ex.message);\n    }\n  }\n\n  // Event listeners\n  addItemBtn.addEventListener('click', () => addItem());\n  itemsTableBody.addEventListener('click', deleteItem);\n  solveBtn.addEventListener('click', solve);\n})();\n</script>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Knapsack Problem"
    }
  ],
  "topic": "Knapsack Problem",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}