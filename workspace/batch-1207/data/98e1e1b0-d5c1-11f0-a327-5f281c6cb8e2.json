{
  "id": "98e1e1b0-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:17:00.134Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Merge Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<title>Merge Sort Visualizer</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#2dd4bf;\n    --muted:#94a3b8;\n    --bar:#60a5fa;\n    --compare:#ef4444;\n    --write:#10b981;\n    --merge:#f59e0b;\n    --sorted:#7c3aed;\n  }\n  html,body{\n    height:100%;\n    margin:0;\n    font-family: Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n    background: linear-gradient(180deg, #001219 0%, #031926 100%);\n    color:#e6eef6;\n  }\n  .wrap{\n    max-width:1100px;\n    margin:24px auto;\n    padding:18px;\n    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n    border-radius:12px;\n    box-shadow: 0 8px 30px rgba(2,6,23,0.7);\n  }\n  header{\n    display:flex;\n    align-items:center;\n    justify-content:space-between;\n    gap:12px;\n  }\n  h1{ margin:0; font-size:20px; letter-spacing:0.2px;}\n  .controls{\n    display:flex;\n    gap:12px;\n    align-items:center;\n    flex-wrap:wrap;\n  }\n  .controls > * { background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.04); padding:8px; border-radius:8px; color:var(--muted); }\n  button{\n    cursor:pointer;\n    color:#e6eef6;\n    border:none;\n    background:var(--panel);\n    padding:8px 12px;\n    border-radius:8px;\n    transition:transform .06s ease, box-shadow .06s;\n  }\n  button:active{ transform:translateY(1px); }\n  button[disabled]{ opacity:0.4; cursor:not-allowed; }\n  .row {\n    margin-top:18px;\n    display:flex;\n    gap:18px;\n    align-items:flex-start;\n  }\n  .left{\n    flex:1 1 65%;\n    min-height:260px;\n    background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);\n    border-radius:10px;\n    padding:12px;\n  }\n  .right{\n    flex:0 0 320px;\n    min-height:260px;\n    padding:12px;\n  }\n  #arrayCanvas{\n    width:100%;\n    height:360px;\n    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));\n    border-radius:8px;\n    display:flex;\n    align-items:flex-end;\n    padding:6px;\n    box-sizing:border-box;\n    overflow:hidden;\n  }\n  .bar{\n    margin:0 2px;\n    background:linear-gradient(180deg, var(--bar), #2b6cb0);\n    width:20px;\n    border-radius:6px 6px 2px 2px;\n    display:flex;\n    align-items:flex-end;\n    justify-content:center;\n    position:relative;\n    transition: height 200ms ease, background 120ms ease, transform 120ms ease;\n  }\n  .bar > span{\n    font-size:11px;\n    color:rgba(255,255,255,0.92);\n    transform:translateY(-6px);\n    user-select:none;\n  }\n  .bar.small > span{ transform:translateY(-6px) scale(0.86); opacity:0.85; }\n  .bar.compare{ background:linear-gradient(180deg,var(--compare), #b91c1c); transform:scale(1.03); z-index:2;}\n  .bar.write{ background:linear-gradient(180deg,var(--write), #059669); transform:scale(1.03); z-index:2;}\n  .bar.mergeRange{ background:linear-gradient(180deg,var(--merge), #b45309); opacity:0.95;}\n  .bar.sorted{ background:linear-gradient(180deg,var(--sorted), #4c1d95); }\n  .info{\n    color:var(--muted);\n    font-size:13px;\n    line-height:1.4;\n  }\n  .stat{\n    margin-top:8px;\n    font-size:13px;\n    color:var(--muted);\n  }\n  input[type=range]{ accent-color:var(--accent); width:140px; }\n  label{ font-size:13px; color:var(--muted); display:block; margin-bottom:6px;}\n  .small-muted{ font-size:12px; color:var(--muted); margin-top:6px;}\n  .footer{\n    margin-top:16px;\n    font-size:13px;\n    color:var(--muted);\n  }\n  .controlsGroup{ display:flex; gap:8px; align-items:center;}\n  @media (max-width:880px){\n    .row{ flex-direction:column; }\n    .right{ flex:1 1 auto; }\n  }\n</style>\n</head>\n<body>\n<div class=\"wrap\">\n  <header>\n    <h1>Merge Sort — Visualizer & Interactive Demo</h1>\n    <div class=\"controls\">\n      <div class=\"controlsGroup\">\n        <label style=\"margin:0 6px 0 0; font-size:13px; color:var(--muted)\">Array size</label>\n        <input id=\"sizeRange\" type=\"range\" min=\"5\" max=\"80\" value=\"28\">\n        <span id=\"sizeLabel\" style=\"min-width:34px; text-align:center; font-size:13px; color:var(--muted)\"></span>\n      </div>\n\n      <div class=\"controlsGroup\">\n        <label style=\"margin:0 6px 0 0; font-size:13px; color:var(--muted)\">Speed</label>\n        <input id=\"speedRange\" type=\"range\" min=\"10\" max=\"1000\" value=\"160\">\n        <span id=\"speedLabel\" style=\"min-width:50px; text-align:center; font-size:13px; color:var(--muted)\"></span>\n      </div>\n\n      <button id=\"shuffleBtn\" title=\"Generate a new random array\">Shuffle</button>\n      <button id=\"startBtn\">Start</button>\n      <button id=\"stepBtn\">Step</button>\n      <button id=\"pauseBtn\" disabled>Pause</button>\n    </div>\n  </header>\n\n  <div class=\"row\">\n    <div class=\"left\">\n      <div id=\"arrayCanvas\" aria-hidden=\"true\"></div>\n      <div class=\"stat\" id=\"actionStat\"></div>\n    </div>\n    <div class=\"right\">\n      <div class=\"info\">\n        <strong>How Merge Sort works (brief):</strong>\n        <p style=\"margin:6px 0 10px 0;\">Merge sort is a divide-and-conquer algorithm. It recursively splits the array until subarrays of size 1 are reached, then repeatedly merges pairs of subarrays back together in sorted order. This demo records the key operations (comparisons and overwrites) and replays them visually.</p>\n\n        <div>\n          <label>Controls</label>\n          <div class=\"small-muted\">\n            Shuffle: create a new random array.<br>\n            Start: run the full animation. Step: advance one recorded operation. Pause: pause playback.\n          </div>\n        </div>\n\n        <div style=\"margin-top:10px;\">\n          <label>Legend</label>\n          <div class=\"small-muted\">\n            Colored bars represent current action:\n            <div style=\"margin-top:6px;\">\n              <span style=\"display:inline-block;width:12px;height:12px;background:var(--compare);border-radius:2px;margin-right:8px;\"></span> comparing\n              <span style=\"display:inline-block;width:12px;height:12px;background:var(--write);border-radius:2px;margin:0 8px 0 18px;\"></span> writing/overwrite\n              <span style=\"display:inline-block;width:12px;height:12px;background:var(--merge);border-radius:2px;margin:0 8px 0 18px;\"></span> current merge range\n              <span style=\"display:inline-block;width:12px;height:12px;background:var(--sorted);border-radius:2px;margin:0 8px 0 18px;\"></span> merged/sorted range\n            </div>\n          </div>\n        </div>\n\n        <div class=\"footer\" style=\"margin-top:12px;\">\n          Implementation notes: This visualizer first records the merge sort operations (so stepping/pausing is consistent), then replays them. You may change the array size and speed anytime.\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<script>\n(() => {\n  // DOM elements\n  const canvas = document.getElementById('arrayCanvas');\n  const shuffleBtn = document.getElementById('shuffleBtn');\n  const startBtn = document.getElementById('startBtn');\n  const pauseBtn = document.getElementById('pauseBtn');\n  const stepBtn = document.getElementById('stepBtn');\n  const sizeRange = document.getElementById('sizeRange');\n  const sizeLabel = document.getElementById('sizeLabel');\n  const speedRange = document.getElementById('speedRange');\n  const speedLabel = document.getElementById('speedLabel');\n  const actionStat = document.getElementById('actionStat');\n\n  // State\n  let array = [];\n  let bars = [];\n  let actions = []; // recorded actions\n  let actionIndex = 0;\n  let playing = false;\n  let timer = null;\n  let msPerAction = 160;\n\n  // Initialize\n  function randInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }\n\n  function generateArray(n){\n    array = [];\n    for(let i=0;i<n;i++) array.push(randInt(10, 500));\n    renderArray();\n  }\n\n  function renderArray(){\n    // Clear\n    canvas.innerHTML = '';\n    bars = [];\n    const n = array.length;\n    const canvasHeight = canvas.clientHeight - 8;\n    const maxVal = Math.max(...array, 1);\n    const barWidth = Math.max(6, Math.floor((canvas.clientWidth - 12) / n) - 4);\n    for(let i=0;i<n;i++){\n      const val = array[i];\n      const bar = document.createElement('div');\n      bar.className = 'bar';\n      if (barWidth < 18) bar.classList.add('small');\n      bar.style.width = barWidth + 'px';\n      const height = Math.max(6, Math.round((val / maxVal) * (canvasHeight - 8)));\n      bar.style.height = height + 'px';\n      const span = document.createElement('span');\n      span.textContent = val;\n      bar.appendChild(span);\n      canvas.appendChild(bar);\n      bars.push(bar);\n    }\n  }\n\n  // Action types:\n  // {type:'merge', l, mid, r} - highlight range about to be merged\n  // {type:'compare', i, j} - compare indices i and j\n  // {type:'overwrite', index:k, value:val} - write value into index k\n  // {type:'merged', l, r} - mark range as merged/sorted\n  // We'll record a sequence of actions during a merge sort execution on a copy.\n\n  function recordMergeSort(arr){\n    actions = [];\n    const aCopy = arr.slice();\n    function mergeSortRec(a, l, r){\n      if (l>=r) return;\n      const mid = Math.floor((l+r)/2);\n      mergeSortRec(a, l, mid);\n      mergeSortRec(a, mid+1, r);\n      // record start of merge\n      actions.push({type:'merge', l, mid, r});\n      // merge process\n      let i = l, j = mid+1;\n      const temp = [];\n      while(i<=mid && j<=r){\n        actions.push({type:'compare', i, j});\n        if (a[i] <= a[j]){\n          temp.push(a[i]); i++;\n        } else {\n          temp.push(a[j]); j++;\n        }\n      }\n      while(i<=mid){\n        // no compare, but still push to record movement\n        temp.push(a[i]); i++;\n      }\n      while(j<=r){\n        temp.push(a[j]); j++;\n      }\n      // write back\n      for(let k=0;k<temp.length;k++){\n        const idx = l + k;\n        actions.push({type:'overwrite', index:idx, value:temp[k]});\n        a[idx] = temp[k];\n      }\n      actions.push({type:'merged', l, r});\n    }\n    mergeSortRec(aCopy, 0, aCopy.length-1);\n    return actions;\n  }\n\n  // Visualizer: play actions sequentially\n  function applyAction(act){\n    // reset previous highlights first\n    // We'll adjust classes per action.\n    // Clear compare/write classes from all bars, but keep merged class as it is.\n    bars.forEach(b => {\n      b.classList.remove('compare','write','mergeRange');\n      // 'sorted' class persists after merged\n    });\n\n    switch(act.type){\n      case 'merge':\n        // highlight merge range\n        for(let k=act.l;k<=act.r;k++){\n          bars[k].classList.add('mergeRange');\n        }\n        updateStat(`Merging range [${act.l} .. ${act.r}] (mid=${act.mid})`);\n        break;\n      case 'compare':\n        if (act.i < bars.length) bars[act.i].classList.add('compare');\n        if (act.j < bars.length) bars[act.j].classList.add('compare');\n        updateStat(`Compare indices ${act.i} and ${act.j}`);\n        break;\n      case 'overwrite':\n        // update visual array value and height\n        const idx = act.index;\n        const val = act.value;\n        array[idx] = val;\n        const maxVal = Math.max(...array, 1);\n        const canvasHeight = canvas.clientHeight - 8;\n        const height = Math.max(6, Math.round((val / maxVal) * (canvasHeight - 8)));\n        const bar = bars[idx];\n        if (bar){\n          bar.classList.add('write');\n          bar.style.height = height + 'px';\n          bar.firstChild.textContent = val;\n        }\n        updateStat(`Write value ${val} at index ${idx}`);\n        break;\n      case 'merged':\n        // mark range as sorted\n        for(let k=act.l;k<=act.r;k++){\n          bars[k].classList.remove('mergeRange');\n          bars[k].classList.remove('compare','write');\n          bars[k].classList.add('sorted');\n        }\n        updateStat(`Range [${act.l} .. ${act.r}] merged (sorted)`);\n        break;\n      default:\n        break;\n    }\n  }\n\n  function updateStat(text){\n    actionStat.textContent = `Action ${actionIndex+1}/${actions.length} — ${text}`;\n  }\n\n  function play(){\n    if (actions.length === 0) return;\n    playing = true;\n    startBtn.disabled = true;\n    shuffleBtn.disabled = true;\n    stepBtn.disabled = true;\n    pauseBtn.disabled = false;\n    sizeRange.disabled = true;\n    // schedule next action\n    function step(){\n      if (!playing) return;\n      if (actionIndex >= actions.length){\n        // finished\n        playing = false;\n        pauseBtn.disabled = true;\n        startBtn.disabled = false;\n        shuffleBtn.disabled = false;\n        stepBtn.disabled = false;\n        sizeRange.disabled = false;\n        updateStat('Done — array sorted');\n        return;\n      }\n      const act = actions[actionIndex];\n      applyAction(act);\n      actionIndex++;\n      // schedule next\n      timer = setTimeout(step, msPerAction);\n    }\n    step();\n  }\n\n  function pause(){\n    playing = false;\n    if (timer) clearTimeout(timer);\n    startBtn.disabled = false;\n    stepBtn.disabled = false;\n    shuffleBtn.disabled = false;\n    pauseBtn.disabled = true;\n    sizeRange.disabled = false;\n    updateStat('Paused');\n  }\n\n  function stepOnce(){\n    if (actions.length === 0) return;\n    if (actionIndex >= actions.length){\n      updateStat('Already finished');\n      return;\n    }\n    // apply one action and pause\n    const act = actions[actionIndex];\n    applyAction(act);\n    actionIndex++;\n    updateStat(`Stepped: ${actionIndex}/${actions.length}`);\n  }\n\n  // UI wiring\n  sizeRange.addEventListener('input', () => {\n    sizeLabel.textContent = sizeRange.value;\n  });\n\n  speedRange.addEventListener('input', () => {\n    const v = Number(speedRange.value);\n    // smaller value = faster; we want ms per action scale,\n    // invert and map to reasonable range\n    msPerAction = Math.max(6, Math.round(v));\n    speedLabel.textContent = `${msPerAction} ms`;\n  });\n\n  shuffleBtn.addEventListener('click', () => {\n    cancelPlaybackReset();\n    generateArray(Number(sizeRange.value));\n    // reset visuals\n    actions = [];\n    actionIndex = 0;\n    updateStat('New array generated — record actions to begin.');\n  });\n\n  startBtn.addEventListener('click', () => {\n    // If no actions recorded, record them now based on current array\n    if (playing) return;\n    actions = recordMergeSort(array);\n    actionIndex = 0;\n    // clear previous sorted markings\n    bars.forEach(b => b.classList.remove('sorted','mergeRange','compare','write'));\n    play();\n  });\n\n  pauseBtn.addEventListener('click', () => {\n    pause();\n  });\n\n  stepBtn.addEventListener('click', () => {\n    // if no actions recorded, record them now\n    if (actions.length === 0){\n      actions = recordMergeSort(array);\n      actionIndex = 0;\n      bars.forEach(b => b.classList.remove('sorted','mergeRange','compare','write'));\n    }\n    // if playing, pause first\n    if (playing) pause();\n    stepOnce();\n  });\n\n  function cancelPlaybackReset(){\n    if (timer) { clearTimeout(timer); timer = null; }\n    playing = false;\n    startBtn.disabled = false;\n    pauseBtn.disabled = true;\n    stepBtn.disabled = false;\n    shuffleBtn.disabled = false;\n    sizeRange.disabled = false;\n  }\n\n  // initial setup\n  sizeLabel.textContent = sizeRange.value;\n  speedLabel.textContent = speedRange.value + ' ms';\n  msPerAction = Number(speedRange.value);\n\n  // Generate an initial array\n  generateArray(Number(sizeRange.value));\n  updateStat('Ready — click Start to visualize Merge Sort.');\n\n  // Make responsive on resize: re-render bars to adjust width\n  let resizeTimer = null;\n  window.addEventListener('resize', () => {\n    clearTimeout(resizeTimer);\n    resizeTimer = setTimeout(() => {\n      renderArray();\n    }, 120);\n  });\n\n  // keyboard shortcuts\n  window.addEventListener('keydown', (e) => {\n    if (e.key === ' '){ // space to play/pause\n      e.preventDefault();\n      if (playing) pause();\n      else startBtn.click();\n    } else if (e.key === 'ArrowRight'){\n      stepBtn.click();\n    } else if (e.key === 'r' || e.key === 'R'){\n      shuffleBtn.click();\n    }\n  });\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Merge Sort"
    }
  ],
  "topic": "Merge Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}