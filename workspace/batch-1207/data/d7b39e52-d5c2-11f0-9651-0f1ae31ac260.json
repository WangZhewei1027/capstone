{
  "id": "d7b39e52-d5c2-11f0-9651-0f1ae31ac260",
  "timestamp": "2025-12-10T12:24:08.113Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Counting Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Counting Sort Visualization & Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2rem;\n    background: #f5f7fa;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  #input-section, #output-section {\n    max-width: 600px;\n    margin: 1rem auto;\n    background: white;\n    padding: 1rem 2rem 2rem 2rem;\n    border-radius: 8px;\n    box-shadow: 0 0 8px rgba(0,0,0,0.1);\n  }\n  label {\n    display: block;\n    margin-bottom: 0.5rem;\n    font-weight: bold;\n  }\n  input[type=text] {\n    width: 100%;\n    font-size: 1rem;\n    padding: 0.5rem;\n    box-sizing: border-box;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n  }\n  button {\n    margin-top: 1rem;\n    padding: 0.6rem 1.2rem;\n    font-size: 1rem;\n    border-radius: 4px;\n    border: none;\n    background-color: #3b82f6;\n    color: white;\n    cursor: pointer;\n  }\n  button:disabled {\n    background-color: #a5b4fc;\n    cursor: not-allowed;\n  }\n  #result {\n    margin-top: 1rem;\n    font-family: monospace;\n    white-space: pre-wrap;\n    background: #e0e7ff;\n    padding: 1rem;\n    border-radius: 6px;\n    min-height: 3rem;\n  }\n  #visualization {\n    margin-top: 1.5rem;\n  }\n  .count-bar {\n    display: inline-block;\n    margin: 0 2px;\n    background-color: #3b82f6;\n    color: white;\n    text-align: center;\n    border-radius: 3px;\n  }\n  .count-label {\n    font-size: 0.8rem;\n    margin-top: 0.2rem;\n  }\n  #steps {\n    margin-top: 1.5rem;\n    max-height: 200px;\n    overflow-y: auto;\n    background: #fff;\n    border: 1px solid #ddd;\n    padding: 1rem;\n    border-radius: 6px;\n    font-size: 0.9rem;\n    white-space: pre-wrap;\n  }\n  .error {\n    color: #dc2626;\n    font-weight: bold;\n    margin-top: 0.5rem;\n  }\n  footer {\n    margin-top: 3rem;\n    font-size: 0.9rem;\n    color: #555;\n    text-align: center;\n  }\n  @media (max-width: 640px) {\n    body {\n      margin: 1rem;\n    }\n    #input-section, #output-section {\n      padding: 1rem;\n    }\n  }\n</style>\n</head>\n<body>\n  <h1>Counting Sort Visualization & Demo</h1>\n\n  <section id=\"input-section\">\n    <label for=\"inputArray\">Enter non-negative integers (comma or space separated):</label>\n    <input type=\"text\" id=\"inputArray\" placeholder=\"e.g. 4, 2, 2, 8, 3, 3, 1\" />\n    <button id=\"sortBtn\">Sort using Counting Sort</button>\n    <div id=\"errorMsg\" class=\"error\" aria-live=\"polite\"></div>\n  </section>\n\n  <section id=\"output-section\" aria-live=\"polite\" aria-atomic=\"true\">\n    <h2>Sorted Output</h2>\n    <div id=\"result\"></div>\n\n    <h2>Counting Array Visualization (Frequency Table)</h2>\n    <div id=\"visualization\"></div>\n\n    <h2>Step-by-Step Explanation</h2>\n    <div id=\"steps\"></div>\n  </section>\n\n<script>\n  (() => {\n    const inputEl = document.getElementById(\"inputArray\");\n    const button = document.getElementById(\"sortBtn\");\n    const resultEl = document.getElementById(\"result\");\n    const visualizationEl = document.getElementById(\"visualization\");\n    const stepsEl = document.getElementById(\"steps\");\n    const errorEl = document.getElementById(\"errorMsg\");\n\n    // Counting Sort implementation with steps captured\n    function countingSort(array) {\n      const steps = [];\n      if (array.length === 0) {\n        steps.push(\"Input array is empty â€” nothing to sort.\");\n        return {sorted: [], steps};\n      }\n\n      const maxVal = Math.max(...array);\n      steps.push(`Maximum value found: ${maxVal}`);\n\n      // Initialize count array\n      let count = new Array(maxVal + 1).fill(0);\n      steps.push(`Initialized count array with size ${maxVal + 1}, all zeros.`);\n\n      // Count frequency\n      array.forEach((num, idx) => {\n        count[num]++;\n        steps.push(`Increment count[${num}] to ${count[num]} (processing element index ${idx})`);\n      });\n\n      // Visualization helper (after count)\n      steps.push(`Frequency count completed: [${count.join(\", \")}]`);\n\n      // Modify count array by adding previous counts (cumulative count)\n      for (let i = 1; i < count.length; i++) {\n        count[i] += count[i - 1];\n        steps.push(`Cumulative count at index ${i} updated to ${count[i]}`);\n      }\n\n      steps.push(`Cumulative count array: [${count.join(\", \")}]`);\n\n      // Output array same size as input\n      let output = new Array(array.length);\n\n      // Build output array (iterate backwards for stable sort)\n      for (let i = array.length - 1; i >= 0; i--) {\n        const num = array[i];\n        count[num]--;\n        const pos = count[num];\n        output[pos] = num;\n        steps.push(`Placed element ${num} from input index ${i} to output index ${pos}. Decremented count[${num}] to ${count[num]}`);\n      }\n\n      steps.push(\"Completed building the sorted output array.\");\n\n      return {sorted: output, steps, originalCountArray: count};\n    }\n\n    // Visualize frequency array (non-cumulative count for clarity)\n    function visualizeCount(array) {\n      if (array.length === 0) return;\n\n      let maxFrequency = Math.max(...array);\n      if (maxFrequency === 0) maxFrequency = 1; // avoid zero maxHeight\n\n      const bars = array\n        .map((freq, i) => {\n          const heightPercent = (freq / maxFrequency) * 100;\n          return `\n            <div style=\"display:flex; flex-direction: column; align-items:center; margin:0 3px;\">\n              <div class=\"count-bar\" style=\"height: ${heightPercent * 2}px; min-width: 20px;\" title=\"Value ${i}: ${freq}\">\n                ${freq > 0 ? freq : ''}\n              </div>\n              <div class=\"count-label\">${i}</div>\n            </div>\n          `;\n        })\n        .join(\"\");\n      visualizationEl.innerHTML = `<div style=\"display:flex; align-items:flex-end; justify-content:center;\">${bars}</div>`;\n    }\n\n    // Validate input and parse to array of non-negative integers\n    function parseInput(str) {\n      // Split by comma or space or both\n      const tokens = str.trim().split(/[\\s,]+/);\n      if (tokens.length === 1 && tokens[0] === \"\") return [];\n\n      let nums = [];\n      for (const t of tokens) {\n        if (!/^\\d+$/.test(t)) {\n          return null; // invalid token\n        }\n        nums.push(parseInt(t, 10));\n      }\n      return nums;\n    }\n\n    button.addEventListener(\"click\", () => {\n      errorEl.textContent = \"\";\n      resultEl.textContent = \"\";\n      visualizationEl.innerHTML = \"\";\n      stepsEl.textContent = \"\";\n\n      const userInput = inputEl.value;\n      const parsed = parseInput(userInput);\n\n      if (parsed === null) {\n        errorEl.textContent = \"Invalid input! Please enter only non-negative integers separated by spaces or commas.\";\n        return;\n      }\n\n      if (parsed.length === 0) {\n        resultEl.textContent = \"Input array is empty.\";\n        return;\n      }\n\n      // Limit max value for demo (performance & visualization)\n      const maxValueInInput = Math.max(...parsed);\n      if (maxValueInInput > 1000) {\n        errorEl.textContent = \"Please enter numbers less than or equal to 1000 for visualization purposes.\";\n        return;\n      }\n\n      // Perform counting sort\n      const {sorted, steps} = countingSort(parsed);\n\n      // Show sorted result\n      resultEl.textContent = `[ ${sorted.join(\", \")} ]`;\n\n      // Visualize frequency count before cumulative sum\n      // To get frequency count, we re-derive it for clear visualization:\n      let freq = new Array(maxValueInInput + 1).fill(0);\n      parsed.forEach(n => freq[n]++);\n      visualizeCount(freq);\n\n      // Show step-by-step explanation\n      stepsEl.textContent = steps.join(\"\\n\");\n    });\n\n    // Accessibility: allow pressing Enter when focus on input triggers sort\n    inputEl.addEventListener(\"keypress\", e => {\n      if(e.key === \"Enter\"){\n        button.click();\n      }\n    });\n  })();\n</script>\n<footer>\n  Counting Sort demo by ChatGPT\n</footer>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Counting Sort"
    }
  ],
  "topic": "Counting Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}