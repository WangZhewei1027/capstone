{
  "id": "98e1baa2-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:17:27.248Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Selection Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Selection Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#2dd4bf;\n      --muted:#94a3b8;\n      --bar:#60a5fa;\n      --min:#fb7185;\n      --comp:#fbbf24;\n      --sorted:#34d399;\n      --text:#e6eef8;\n    }\n    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;}\n    .container{max-width:1100px;margin:20px auto;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6);}\n    h1{margin:0 0 8px;font-size:20px;}\n    p.lead{margin:0 0 16px;color:var(--muted);font-size:13px;}\n    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:14px;}\n    .controls > *{background:var(--panel);padding:10px;border-radius:10px;color:var(--text);font-size:13px;border:1px solid rgba(255,255,255,0.03);}\n    label.inline{display:flex;gap:8px;align-items:center}\n    .buttons{display:flex;gap:8px;}\n    button{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);color:var(--text);padding:8px 12px;border-radius:8px;cursor:pointer;}\n    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);}\n    button:active{transform:translateY(1px);}\n    input[type=range]{width:140px;}\n    .visual-area{display:flex;gap:16px;align-items:flex-start;}\n    .bars-wrap{flex:1;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0));padding:12px;border-radius:10px;height:360px;display:flex;align-items:end;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.02);}\n    .bars{height:100%;width:100%;display:flex;align-items:end;gap:2px;padding:8px;box-sizing:border-box;}\n    .bar{flex:1 1 auto;background:var(--bar);border-radius:4px 4px 0 0;display:flex;align-items:flex-end;justify-content:center;color:#062037;font-weight:700;font-size:11px;transition:height 250ms ease, transform 200ms ease;}\n    .bar .val{padding:4px 2px;color:rgba(255,255,255,0.95);font-weight:600;font-size:11px;}\n    .bar.comp{background:var(--comp);transform:translateY(-6px) scale(1.02);box-shadow:0 6px 20px rgba(251,191,36,0.12);}\n    .bar.min{background:var(--min);transform:translateY(-8px) scale(1.04);box-shadow:0 8px 28px rgba(251,113,133,0.12);}\n    .bar.sorted{background:var(--sorted);transform:none;box-shadow:none;}\n    .side-panel{width:340px;min-width:260px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);}\n    .stats{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px;}\n    .stat{flex:1;background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;text-align:center;}\n    .stat b{display:block;font-size:18px;color:var(--accent);}\n    .pseudocode{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, \"Roboto Mono\", monospace;font-size:13px;color:var(--muted);line-height:1.5;}\n    .code-line{padding:6px;border-radius:6px;}\n    .code-line.active{background:linear-gradient(90deg, rgba(45,212,191,0.06), rgba(96,165,250,0.03));color:var(--text);box-shadow:inset 0 0 0 1px rgba(255,255,255,0.02);}\n    .footer{margin-top:12px;color:var(--muted);font-size:12px;}\n    .small{font-size:12px;color:var(--muted);}\n    .indices{display:flex;gap:10px;margin-top:8px;font-size:13px;}\n    .indices span{background:rgba(255,255,255,0.02);padding:6px;border-radius:8px;color:var(--muted);min-width:80px;text-align:center;}\n    .controls .input-group{display:flex;gap:8px;align-items:center;}\n    @media (max-width:900px){\n      .visual-area{flex-direction:column;}\n      .side-panel{width:100%;}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>Selection Sort Visualizer</h1>\n    <p class=\"lead\">Interactive demonstration of Selection Sort. Step through comparisons and swaps, change speed and size, and watch how the algorithm selects the minimum (or maximum) and swaps elements into position.</p>\n\n    <div class=\"controls\">\n      <div class=\"buttons\">\n        <button id=\"playBtn\">Play</button>\n        <button id=\"pauseBtn\" class=\"secondary\">Pause</button>\n        <button id=\"stepBtn\" class=\"secondary\">Step</button>\n        <button id=\"resetBtn\">Shuffle</button>\n      </div>\n\n      <div class=\"input-group\">\n        <label class=\"inline\">Size\n          <input id=\"sizeRange\" type=\"range\" min=\"5\" max=\"80\" value=\"30\">\n        </label>\n        <span id=\"sizeLabel\" class=\"small\">30</span>\n      </div>\n\n      <div class=\"input-group\">\n        <label class=\"inline\">Speed\n          <input id=\"speedRange\" type=\"range\" min=\"50\" max=\"1500\" value=\"350\">\n        </label>\n        <span id=\"speedLabel\" class=\"small\">350 ms</span>\n      </div>\n\n      <label class=\"inline\" title=\"Sort ascending (min first) or descending (max first)\">\n        <input id=\"orderToggle\" type=\"checkbox\" checked> Ascending\n      </label>\n\n      <button id=\"randomInputBtn\" class=\"secondary\">Custom Input</button>\n    </div>\n\n    <div class=\"visual-area\">\n      <div class=\"bars-wrap\" aria-hidden=\"false\">\n        <div id=\"bars\" class=\"bars\" role=\"list\" aria-label=\"Array bars\"></div>\n      </div>\n\n      <div class=\"side-panel\">\n        <div class=\"stats\">\n          <div class=\"stat\">\n            Comparisons\n            <b id=\"compCount\">0</b>\n          </div>\n          <div class=\"stat\">\n            Swaps\n            <b id=\"swapCount\">0</b>\n          </div>\n          <div class=\"stat\">\n            Steps\n            <b id=\"stepCount\">0</b>\n          </div>\n        </div>\n\n        <div class=\"indices\">\n          <span>i: <b id=\"idxI\">-</b></span>\n          <span>j: <b id=\"idxJ\">-</b></span>\n          <span>min: <b id=\"idxMin\">-</b></span>\n        </div>\n\n        <h3 style=\"margin-top:10px;margin-bottom:6px;font-size:14px;\">Pseudocode</h3>\n        <div class=\"pseudocode\" id=\"pseudocode\">\n          <div class=\"code-line\" data-line=\"1\">for i = 0 to n-2 do</div>\n          <div class=\"code-line\" data-line=\"2\">&nbsp;&nbsp;minIndex = i</div>\n          <div class=\"code-line\" data-line=\"3\">&nbsp;&nbsp;for j = i+1 to n-1 do</div>\n          <div class=\"code-line\" data-line=\"4\">&nbsp;&nbsp;&nbsp;&nbsp;if A[j] &lt; A[minIndex] then minIndex = j</div>\n          <div class=\"code-line\" data-line=\"5\">&nbsp;&nbsp;swap A[i] and A[minIndex]</div>\n          <div class=\"code-line\" data-line=\"6\">&nbsp;&nbsp;mark i as sorted</div>\n          <div class=\"code-line\" data-line=\"7\">end for</div>\n        </div>\n\n        <div class=\"footer\">\n          Tip: Use Step to move one action at a time. Play will animate with current speed. Toggle Ascending to switch behavior.\n        </div>\n      </div>\n    </div>\n  </div>\n\n<script>\n(function(){\n  // DOM elements\n  const barsEl = document.getElementById('bars');\n  const playBtn = document.getElementById('playBtn');\n  const pauseBtn = document.getElementById('pauseBtn');\n  const stepBtn = document.getElementById('stepBtn');\n  const resetBtn = document.getElementById('resetBtn');\n  const sizeRange = document.getElementById('sizeRange');\n  const sizeLabel = document.getElementById('sizeLabel');\n  const speedRange = document.getElementById('speedRange');\n  const speedLabel = document.getElementById('speedLabel');\n  const orderToggle = document.getElementById('orderToggle');\n  const compCountEl = document.getElementById('compCount');\n  const swapCountEl = document.getElementById('swapCount');\n  const stepCountEl = document.getElementById('stepCount');\n  const idxI = document.getElementById('idxI');\n  const idxJ = document.getElementById('idxJ');\n  const idxMin = document.getElementById('idxMin');\n  const pseudo = document.getElementById('pseudocode');\n\n  // state\n  let arr = [];\n  let maxVal = 100;\n  let timer = null;\n  let generator = null;\n  let running = false;\n  let comparisons = 0;\n  let swaps = 0;\n  let steps = 0;\n  let highlighted = {i:-1,j:-1,min:-1};\n  let sortedIndices = new Set();\n\n  // helpers\n  function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }\n\n  function generateArray(n){\n    arr = [];\n    maxVal = 1;\n    for(let i=0;i<n;i++){\n      const v = randInt(5,100);\n      arr.push(v);\n      if(v>maxVal) maxVal = v;\n    }\n    resetState();\n    renderBars();\n  }\n\n  function resetState(){\n    clearTimer();\n    generator = null;\n    running = false;\n    comparisons = 0;\n    swaps = 0;\n    steps = 0;\n    highlighted = {i:-1,j:-1,min:-1};\n    sortedIndices = new Set();\n    updateStats();\n    updateIndicesUI();\n    clearCodeHighlight();\n    playBtn.disabled = false;\n  }\n\n  function clearTimer(){\n    if(timer){ clearInterval(timer); timer = null; }\n  }\n\n  function renderBars(){\n    barsEl.innerHTML = '';\n    const n = arr.length;\n    const showValue = arr.length <= 40;\n    for(let i=0;i<n;i++){\n      const b = document.createElement('div');\n      b.className = 'bar';\n      b.style.height = (arr[i]/maxVal*100) + '%';\n      b.dataset.index = i;\n      b.setAttribute('role','listitem');\n      if(showValue){\n        const val = document.createElement('div');\n        val.className = 'val';\n        val.textContent = arr[i];\n        b.appendChild(val);\n      }\n      barsEl.appendChild(b);\n    }\n    updateBarStates();\n  }\n\n  function updateBarStates(){\n    const bars = barsEl.children;\n    for(let k=0;k<bars.length;k++){\n      const bar = bars[k];\n      bar.classList.remove('comp','min','sorted');\n      if(sortedIndices.has(k)) bar.classList.add('sorted');\n      if(k === highlighted.j) bar.classList.add('comp');\n      if(k === highlighted.min) bar.classList.add('min');\n      if(k === highlighted.i) {\n        // i is both current pivot and considered sorted once marked. When i hasn't been marked sorted yet, give light accent\n        if(!sortedIndices.has(k)) bar.style.boxShadow = 'inset 0 0 0 1px rgba(255,255,255,0.02)';\n      } else {\n        bar.style.boxShadow = '';\n      }\n      // update height numbers only when small arrays were used\n      const valDiv = bar.querySelector('.val');\n      if(valDiv) valDiv.textContent = arr[k];\n      bar.style.height = (arr[k]/maxVal*100) + '%';\n    }\n  }\n\n  // Pseudocode highlighting\n  function clearCodeHighlight(){\n    Array.from(pseudo.querySelectorAll('.code-line')).forEach(el => el.classList.remove('active'));\n  }\n  function highlightLine(num){\n    clearCodeHighlight();\n    const el = pseudo.querySelector('.code-line[data-line=\"'+num+'\"]');\n    if(el) el.classList.add('active');\n  }\n\n  // Generator implementing selection sort with yields for actions\n  function* selectionSortGen(a, ascending){\n    const n = a.length;\n    for(let i=0;i<n-1;i++){\n      yield {type:'line', line:1, i};\n      let minIdx = i;\n      yield {type:'setMin', i, minIdx, line:2};\n      for(let j=i+1;j<n;j++){\n        yield {type:'compare', i, j, minIdx, line:3};\n        if((ascending && a[j] < a[minIdx]) || (!ascending && a[j] > a[minIdx])){\n          minIdx = j;\n          yield {type:'setMin', i, minIdx, line:4};\n        }\n      }\n      // after inner loop\n      if(minIdx !== i){\n        yield {type:'swap', i, minIdx, line:5};\n        // do the swap on the internal array to keep generator consistent\n        const tmp = a[i]; a[i]=a[minIdx]; a[minIdx]=tmp;\n      } else {\n        // still yield a swap-none to mark step (optional)\n        yield {type:'swapNone', i, minIdx, line:5};\n      }\n      yield {type:'markSorted', i, line:6};\n    }\n    yield {type:'done', line:7};\n  }\n\n  // Process single action from generator\n  function processAction(act){\n    if(!act) return;\n    steps++;\n    stepCountEl.textContent = steps;\n    highlightLine(act.line || 0);\n    switch(act.type){\n      case 'line':\n        highlighted.i = act.i;\n        highlighted.j = -1;\n        highlighted.min = -1;\n        updateIndicesUI();\n        break;\n      case 'setMin':\n        highlighted.min = act.minIdx;\n        highlighted.i = act.i;\n        updateIndicesUI();\n        updateBarStates();\n        break;\n      case 'compare':\n        comparisons++;\n        compCountEl.textContent = comparisons;\n        highlighted.j = act.j;\n        highlighted.min = act.minIdx;\n        highlighted.i = act.i;\n        updateIndicesUI();\n        updateBarStates();\n        break;\n      case 'swap':\n        swaps++;\n        swapCountEl.textContent = swaps;\n        // animate swap visually by swapping heights & data then re-render heights\n        animateSwap(act.i, act.minIdx);\n        highlighted.j = -1;\n        highlighted.min = -1;\n        highlighted.i = act.i;\n        updateIndicesUI();\n        break;\n      case 'swapNone':\n        // no physical swap happened (minIdx === i), small pulse\n        highlighted.j = -1;\n        highlighted.min = -1;\n        highlighted.i = act.i;\n        updateIndicesUI();\n        pulseBar(act.i);\n        break;\n      case 'markSorted':\n        sortedIndices.add(act.i);\n        highlighted.j = -1;\n        highlighted.min = -1;\n        highlighted.i = -1;\n        updateBarStates();\n        updateIndicesUI();\n        break;\n      case 'done':\n        // mark all as sorted\n        for(let k=0;k<arr.length;k++) sortedIndices.add(k);\n        highlighted = {i:-1,j:-1,min:-1};\n        updateBarStates();\n        playBtn.disabled = false;\n        clearTimer();\n        running = false;\n        break;\n    }\n  }\n\n  function updateStats(){\n    compCountEl.textContent = comparisons;\n    swapCountEl.textContent = swaps;\n    stepCountEl.textContent = steps;\n  }\n\n  function updateIndicesUI(){\n    idxI.textContent = highlighted.i>=0 ? highlighted.i : '-';\n    idxJ.textContent = highlighted.j>=0 ? highlighted.j : '-';\n    idxMin.textContent = highlighted.min>=0 ? highlighted.min : '-';\n  }\n\n  // Animations\n  function animateSwap(i,j){\n    // swap DOM heights with animation\n    const bars = barsEl.children;\n    const bi = bars[i];\n    const bj = bars[j];\n    if(!bi || !bj){ // fallback\n      renderBars();\n      return;\n    }\n    const hi = bi.style.height;\n    const hj = bj.style.height;\n    // animate by temporarily scaling\n    bi.classList.add('comp');\n    bj.classList.add('min');\n    setTimeout(()=>{\n      bi.style.height = hj;\n      bj.style.height = hi;\n      // swap textual values if present\n      const vi = bi.querySelector('.val');\n      const vj = bj.querySelector('.val');\n      if(vi && vj){\n        const tmp = vi.textContent; vi.textContent = vj.textContent; vj.textContent = tmp;\n      }\n      setTimeout(()=>{\n        bi.classList.remove('comp');\n        bj.classList.remove('min');\n        updateBarStates();\n      }, Math.max(120, parseInt(speedRange.value)/3));\n    }, Math.max(80, parseInt(speedRange.value)/6));\n  }\n\n  function pulseBar(i){\n    const bar = barsEl.children[i];\n    if(!bar) return;\n    bar.classList.add('comp');\n    setTimeout(()=>bar.classList.remove('comp'), Math.max(160, parseInt(speedRange.value)/3));\n  }\n\n  // Controls actions\n  function startPlay(){\n    if(running) return;\n    // setup generator if needed\n    if(!generator){\n      // make a copy to allow generator internal swaps without altering original arr outside\n      const copy = arr.slice();\n      generator = selectionSortGen(copy, orderToggle.checked);\n    }\n    running = true;\n    playBtn.disabled = true;\n    const interval = Math.max(10, parseInt(speedRange.value));\n    timer = setInterval(()=>{\n      const res = generator.next();\n      if(res.done){\n        processAction(res.value); // might be undefined\n        clearTimer();\n        running = false;\n        playBtn.disabled = false;\n      } else {\n        processAction(res.value);\n      }\n    }, interval);\n  }\n\n  function pausePlay(){\n    running = false;\n    clearTimer();\n    playBtn.disabled = false;\n  }\n\n  function stepOnce(){\n    if(!generator){\n      const copy = arr.slice();\n      generator = selectionSortGen(copy, orderToggle.checked);\n    }\n    const res = generator.next();\n    if(res.done){\n      processAction(res.value); // final\n      playBtn.disabled = false;\n      running = false;\n      clearTimer();\n    } else {\n      processAction(res.value);\n    }\n  }\n\n  // UI events\n  playBtn.addEventListener('click', startPlay);\n  pauseBtn.addEventListener('click', pausePlay);\n  stepBtn.addEventListener('click', stepOnce);\n\n  resetBtn.addEventListener('click', ()=>{\n    generateArray(parseInt(sizeRange.value,10));\n  });\n\n  sizeRange.addEventListener('input', ()=>{\n    sizeLabel.textContent = sizeRange.value;\n  });\n\n  sizeRange.addEventListener('change', ()=>{\n    generateArray(parseInt(sizeRange.value,10));\n  });\n\n  speedRange.addEventListener('input', ()=>{\n    speedLabel.textContent = speedRange.value + ' ms';\n    if(running){\n      // restart interval with new speed\n      clearTimer();\n      const interval = Math.max(10, parseInt(speedRange.value));\n      timer = setInterval(()=>{\n        const res = generator.next();\n        if(res.done){ processAction(res.value); clearTimer(); running=false; playBtn.disabled=false; }\n        else processAction(res.value);\n      }, interval);\n    }\n  });\n\n  orderToggle.addEventListener('change', ()=>{\n    // order changed: need to reset to new generator\n    resetState();\n    // keep current array as is, but new runs will use chosen order\n  });\n\n  // Custom input modal (simple prompt)\n  document.getElementById('randomInputBtn').addEventListener('click', ()=>{\n    pausePlay();\n    const val = prompt('Enter comma-separated integers (e.g. 12,5,8,23). Leave empty to cancel.');\n    if(!val) return;\n    const parts = val.split(',').map(s=>s.trim()).filter(s=>s.length>0);\n    const nums = [];\n    for(const p of parts){\n      const num = Number(p);\n      if(Number.isFinite(num)) nums.push(Math.max(1, Math.round(num)));\n    }\n    if(nums.length === 0){ alert('No valid numbers parsed.'); return; }\n    arr = nums.slice();\n    maxVal = Math.max(...arr);\n    sizeRange.value = arr.length;\n    sizeLabel.textContent = arr.length;\n    resetState();\n    renderBars();\n  });\n\n  // initialize default array\n  generateArray(parseInt(sizeRange.value,10));\n\n  // keyboard shortcuts\n  window.addEventListener('keydown', (e)=>{\n    if(e.key === ' '){ e.preventDefault(); if(running) pausePlay(); else startPlay(); }\n    if(e.key === 'ArrowRight') stepOnce();\n    if(e.key === 'r') generateArray(parseInt(sizeRange.value,10));\n  });\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Selection Sort"
    }
  ],
  "topic": "Selection Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}