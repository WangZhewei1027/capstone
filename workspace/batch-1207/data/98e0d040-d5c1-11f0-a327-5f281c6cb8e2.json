{
  "id": "98e0d040-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:18:03.237Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Deque",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Deque (Double-Ended Queue) Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724; --card:#0b1220; --accent:#60a5fa; --muted:#94a3b8; --good:#10b981; --danger:#ef4444;\n      --cell:#071028; --cell-border:#18324a;\n    }\n    body{\n      margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;\n      background:linear-gradient(180deg, #071029 0%, #071120 100%); color:#e6eef8;\n      display:flex; min-height:100vh; align-items:center; justify-content:center; padding:28px;\n    }\n    .app{\n      width:100%; max-width:1100px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);\n      border:1px solid rgba(255,255,255,0.03); border-radius:12px; padding:18px; box-shadow: 0 10px 30px rgba(2,6,23,0.6);\n      display:grid; grid-template-columns: 420px 1fr; gap:18px;\n    }\n    h1{ margin:0 0 6px 0; font-size:20px; color:#eaf2ff; }\n    p.lead{ margin:0 0 12px 0; color:var(--muted); font-size:13px; }\n    .panel{\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:12px; border-radius:8px;\n      border:1px solid rgba(255,255,255,0.02);\n    }\n    .controls{ display:flex; flex-direction:column; gap:10px; }\n    .row{ display:flex; gap:8px; align-items:center; }\n    input[type=\"text\"]{ padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit; }\n    button{\n      padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); color:inherit;\n      cursor:pointer; font-weight:600;\n    }\n    button.primary{ background:linear-gradient(180deg, rgba(96,165,250,0.12), rgba(96,165,250,0.06)); border-color:rgba(96,165,250,0.18); color:var(--accent); }\n    button.warn{ background:linear-gradient(180deg, rgba(239,68,68,0.08), rgba(239,68,68,0.03)); border-color:rgba(239,68,68,0.12); color:var(--danger); }\n    button.ghost{ background:transparent; border:1px dashed rgba(255,255,255,0.03); color:var(--muted); font-weight:500; }\n    .info{ font-size:13px; color:var(--muted); }\n    .buffer-visual{ display:flex; gap:6px; flex-wrap:wrap; padding:8px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border-radius:8px; border:1px solid rgba(255,255,255,0.02); }\n    .cell{\n      width:64px; height:56px; background:linear-gradient(180deg, var(--cell), rgba(8,12,24,0.4)); border-radius:8px; display:flex; align-items:center; justify-content:center;\n      border:1px solid var(--cell-border); position:relative; color:#cfe8ff; font-weight:700; font-size:14px;\n    }\n    .cell.empty{ color:var(--muted); font-weight:600; opacity:0.6; }\n    .label{ position:absolute; top:6px; left:6px; font-size:11px; color:var(--muted); font-weight:600; }\n    .marker{ position:absolute; bottom:6px; right:6px; font-size:11px; padding:3px 6px; border-radius:999px; background:rgba(255,255,255,0.03); color:var(--muted); }\n    .marker.head{ background:linear-gradient(90deg, rgba(96,165,250,0.12), rgba(96,165,250,0.06)); color:var(--accent); font-weight:700; border:1px solid rgba(96,165,250,0.06);}\n    .marker.tail{ background:linear-gradient(90deg, rgba(16,185,129,0.08), rgba(16,185,129,0.03)); color:var(--good); font-weight:700; border:1px solid rgba(16,185,129,0.04);}\n    .controls-grid{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }\n    .log{ max-height:240px; overflow:auto; padding:8px; background:rgba(0,0,0,0.06); border-radius:8px; color:var(--muted); font-size:13px; border:1px solid rgba(255,255,255,0.02); }\n    .status{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; }\n    .badge{ padding:6px 8px; background:rgba(255,255,255,0.02); border-radius:8px; font-size:13px; color:var(--muted); border:1px solid rgba(255,255,255,0.02); }\n    .legend{ display:flex; gap:8px; align-items:center; color:var(--muted); font-size:13px; }\n    .legend .sw{ width:12px; height:12px; border-radius:2px; display:inline-block; margin-right:6px; }\n    .note{ font-size:12px; color:var(--muted); margin-top:8px; }\n    footer{ grid-column:1/-1; margin-top:12px; color:var(--muted); font-size:13px; display:flex; justify-content:space-between; align-items:center; }\n    @media(max-width:900px){\n      .app{ grid-template-columns: 1fr; }\n      .cell{ width:46px; height:48px; font-size:13px;}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\" role=\"application\" aria-label=\"Deque demonstration\">\n    <div class=\"panel\">\n      <h1>Deque (Double-Ended Queue)</h1>\n      <p class=\"lead\">A deque allows inserting and removing elements from both ends. This demo uses a circular buffer implementation that grows when needed.</p>\n\n      <div class=\"controls\">\n        <div class=\"row\">\n          <input id=\"valueInput\" type=\"text\" placeholder=\"value (e.g. 42 or text)\" />\n          <button id=\"pushFrontBtn\" class=\"primary\">Push Front</button>\n          <button id=\"pushBackBtn\" class=\"primary\">Push Back</button>\n        </div>\n\n        <div class=\"row\">\n          <button id=\"popFrontBtn\">Pop Front</button>\n          <button id=\"popBackBtn\">Pop Back</button>\n          <button id=\"peekFrontBtn\" class=\"ghost\">Peek Front</button>\n          <button id=\"peekBackBtn\" class=\"ghost\">Peek Back</button>\n        </div>\n\n        <div class=\"row\">\n          <button id=\"clearBtn\" class=\"warn\">Clear</button>\n          <button id=\"fillRandomBtn\">Fill Random (6)</button>\n          <button id=\"randomWalkBtn\">Random Walk (auto)</button>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"status\">\n            <div class=\"badge\">Size: <span id=\"sizeBadge\">0</span></div>\n            <div class=\"badge\">Capacity: <span id=\"capBadge\">8</span></div>\n            <div class=\"badge\">Head: <span id=\"headBadge\">0</span></div>\n            <div class=\"badge\">Tail: <span id=\"tailBadge\">0</span></div>\n          </div>\n        </div>\n\n        <div class=\"note\">Tip: Try pushing front/back and observe head/tail positions and how the circular buffer uses empty slots. Capacity doubles when full.</div>\n      </div>\n    </div>\n\n    <div class=\"panel\">\n      <div style=\"display:flex; gap:12px; align-items:center; margin-bottom:10px;\">\n        <div style=\"flex:1;\">\n          <div class=\"buffer-visual\" id=\"bufferVisual\" aria-live=\"polite\"></div>\n        </div>\n      </div>\n\n      <div style=\"display:flex; gap:12px;\">\n        <div style=\"flex:1;\">\n          <div class=\"info\" style=\"margin-bottom:8px;\">Logical contents (front ‚Üí back):</div>\n          <div class=\"panel\" id=\"logicalView\" style=\"min-height:44px; display:flex; align-items:center; gap:8px; flex-wrap:wrap;\"></div>\n        </div>\n\n        <div style=\"width:260px;\">\n          <div style=\"margin-bottom:8px;\" class=\"info\">Operation log</div>\n          <div class=\"log\" id=\"opLog\" aria-live=\"polite\"></div>\n        </div>\n      </div>\n\n      <footer>\n        <div class=\"legend\">\n          <div><span class=\"sw\" style=\"background:linear-gradient(90deg, rgba(96,165,250,0.12), rgba(96,165,250,0.06)); border:1px solid rgba(96,165,250,0.06)\"></span> head</div>\n          <div><span class=\"sw\" style=\"background:linear-gradient(90deg, rgba(16,185,129,0.08), rgba(16,185,129,0.03)); border:1px solid rgba(16,185,129,0.04)\"></span> tail</div>\n          <div style=\"margin-left:16px; color:var(--muted);\">Circular buffer with dynamic resize</div>\n        </div>\n        <div style=\"color:var(--muted)\">Implemented in JavaScript ‚Ä¢ Interactive</div>\n      </footer>\n    </div>\n  </div>\n\n  <script>\n    // Deque implemented with circular buffer + resizing\n    class Deque {\n      constructor(initialCapacity = 8) {\n        const cap = Math.max(4, Math.ceil(initialCapacity));\n        this._cap = this._nextPow2(cap);\n        this._buf = new Array(this._cap).fill(undefined);\n        this._head = 0; // index of first element\n        this._size = 0;\n      }\n\n      _nextPow2(n){\n        return 1 << Math.ceil(Math.log2(n));\n      }\n\n      size(){ return this._size; }\n      capacity(){ return this._cap; }\n      isEmpty(){ return this._size === 0; }\n\n      _idx(i){ // logical index -> physical index\n        return (this._head + i) & (this._cap - 1);\n      }\n\n      _growIfNeeded(){\n        if (this._size < this._cap) return;\n        const newCap = this._cap * 2;\n        const newBuf = new Array(newCap);\n        // copy in logical order\n        for (let i=0;i<this._size;i++){\n          newBuf[i] = this._buf[this._idx(i)];\n        }\n        this._buf = newBuf;\n        this._cap = newCap;\n        this._head = 0;\n      }\n\n      pushBack(value){\n        this._growIfNeeded();\n        const tailIdx = this._idx(this._size);\n        this._buf[tailIdx] = value;\n        this._size++;\n        return this._size;\n      }\n\n      pushFront(value){\n        this._growIfNeeded();\n        // move head backward\n        this._head = (this._head - 1) & (this._cap - 1);\n        this._buf[this._head] = value;\n        this._size++;\n        return this._size;\n      }\n\n      popBack(){\n        if (this._size === 0) return undefined;\n        const lastIdx = this._idx(this._size - 1);\n        const val = this._buf[lastIdx];\n        this._buf[lastIdx] = undefined;\n        this._size--;\n        return val;\n      }\n\n      popFront(){\n        if (this._size === 0) return undefined;\n        const val = this._buf[this._head];\n        this._buf[this._head] = undefined;\n        this._head = (this._head + 1) & (this._cap - 1);\n        this._size--;\n        return val;\n      }\n\n      peekFront(){\n        if (this._size===0) return undefined;\n        return this._buf[this._head];\n      }\n\n      peekBack(){\n        if (this._size===0) return undefined;\n        return this._buf[this._idx(this._size-1)];\n      }\n\n      clear(){\n        this._buf = new Array(this._cap).fill(undefined);\n        this._head = 0;\n        this._size = 0;\n      }\n\n      toArray(){\n        const arr = [];\n        for (let i=0;i<this._size;i++) arr.push(this._buf[this._idx(i)]);\n        return arr;\n      }\n\n      rawBuffer(){ // for visualization: returns copy of internal buffer\n        return this._buf.slice();\n      }\n\n      headIndex(){ return this._head; }\n      tailIndex(){ return this._idx(this._size); } // index of where next pushBack would write\n    }\n\n    // Simple UI wiring and visualization\n    const dq = new Deque(8);\n\n    const bufferVisual = document.getElementById('bufferVisual');\n    const logicalView = document.getElementById('logicalView');\n    const opLog = document.getElementById('opLog');\n    const sizeBadge = document.getElementById('sizeBadge');\n    const capBadge = document.getElementById('capBadge');\n    const headBadge = document.getElementById('headBadge');\n    const tailBadge = document.getElementById('tailBadge');\n\n    const valueInput = document.getElementById('valueInput');\n    const pushFrontBtn = document.getElementById('pushFrontBtn');\n    const pushBackBtn = document.getElementById('pushBackBtn');\n    const popFrontBtn = document.getElementById('popFrontBtn');\n    const popBackBtn = document.getElementById('popBackBtn');\n    const peekFrontBtn = document.getElementById('peekFrontBtn');\n    const peekBackBtn = document.getElementById('peekBackBtn');\n    const clearBtn = document.getElementById('clearBtn');\n    const fillRandomBtn = document.getElementById('fillRandomBtn');\n    const randomWalkBtn = document.getElementById('randomWalkBtn');\n\n    function log(msg, cls){\n      const time = new Date().toLocaleTimeString();\n      const el = document.createElement('div');\n      el.textContent = `[${time}] ${msg}`;\n      if (cls) el.style.color = cls;\n      opLog.prepend(el);\n    }\n\n    function render(highlight = {}) {\n      // highlight: {type:\"head\"|\"tail\"|\"idx\", idx: number}\n      bufferVisual.innerHTML = '';\n      logicalView.innerHTML = '';\n\n      const buf = dq.rawBuffer();\n      const cap = dq.capacity();\n      const head = dq.headIndex();\n      const tail = dq.tailIndex();\n      const size = dq.size();\n\n      capBadge.textContent = cap;\n      sizeBadge.textContent = size;\n      headBadge.textContent = head;\n      tailBadge.textContent = tail;\n\n      for (let i=0;i<cap;i++){\n        const cell = document.createElement('div');\n        cell.className = 'cell';\n        const val = buf[i];\n        if (val === undefined){\n          cell.classList.add('empty');\n          cell.textContent = '‚Äî';\n        } else {\n          cell.textContent = String(val);\n        }\n        const label = document.createElement('div');\n        label.className = 'label';\n        label.textContent = i;\n        cell.appendChild(label);\n\n        if (i === head) {\n          const m = document.createElement('div'); m.className = 'marker head'; m.textContent = 'head';\n          cell.appendChild(m);\n        }\n        // For tail marker, show the index where next pushBack would write.\n        if (i === tail) {\n          const m = document.createElement('div'); m.className = 'marker tail'; m.textContent = 'tail';\n          cell.appendChild(m);\n        }\n\n        // highlight if requested\n        if (highlight.type === 'idx' && highlight.idx === i) {\n          cell.style.boxShadow = 'inset 0 0 0 3px rgba(96,165,250,0.08)';\n          cell.style.borderColor = 'rgba(96,165,250,0.12)';\n        }\n        if (highlight.type === 'head' && i===head){\n          cell.style.border = '2px solid rgba(96,165,250,0.18)';\n        }\n        if (highlight.type === 'tail' && i===tail){\n          cell.style.border = '2px solid rgba(16,185,129,0.12)';\n        }\n\n        bufferVisual.appendChild(cell);\n      }\n\n      const logical = dq.toArray();\n      if (logical.length === 0){\n        const empty = document.createElement('div');\n        empty.className = 'info';\n        empty.textContent = '(empty)';\n        logicalView.appendChild(empty);\n      } else {\n        logical.forEach((v, idx) => {\n          const el = document.createElement('div');\n          el.style.padding = '8px 10px';\n          el.style.borderRadius = '8px';\n          el.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), transparent)';\n          el.style.border = '1px solid rgba(255,255,255,0.02)';\n          el.style.fontWeight = '700';\n          el.textContent = String(v);\n          if (idx === 0){\n            const s = document.createElement('span'); s.style.fontWeight=600; s.style.marginLeft='8px'; s.style.fontSize='12px'; s.style.color='var(--muted)'; s.textContent='(front)';\n            el.appendChild(s);\n          }\n          logicalView.appendChild(el);\n        });\n      }\n    }\n\n    // safe read value (string) - attempt to parse number if looks numeric\n    function readValue(){\n      const raw = valueInput.value.trim();\n      if (raw === '') return null;\n      // detect JSON-ish\n      if (/^-?\\d+(\\.\\d+)?$/.test(raw)) return Number(raw);\n      try {\n        return JSON.parse(raw);\n      } catch {\n        return raw;\n      }\n    }\n\n    // button handlers with light animation\n    function pushFront(){\n      const v = readValue();\n      if (v === null) { log('No value provided to pushFront', 'orange'); return; }\n      dq.pushFront(v);\n      log(`pushFront(${JSON.stringify(v)})`);\n      render({type:'head', idx:dq.headIndex()});\n    }\n    function pushBack(){\n      const v = readValue();\n      if (v === null) { log('No value provided to pushBack', 'orange'); return; }\n      dq.pushBack(v);\n      log(`pushBack(${JSON.stringify(v)})`);\n      render({type:'tail', idx:dq.tailIndex()});\n    }\n    function popFront(){\n      const v = dq.popFront();\n      log(`popFront() ‚Üí ${v === undefined ? 'undefined' : JSON.stringify(v)}`);\n      render({type:'head', idx:dq.headIndex()});\n    }\n    function popBack(){\n      const v = dq.popBack();\n      log(`popBack() ‚Üí ${v === undefined ? 'undefined' : JSON.stringify(v)}`);\n      render({type:'tail', idx:dq.tailIndex()});\n    }\n    function peekFront(){\n      const v = dq.peekFront();\n      log(`peekFront() ‚Üí ${v === undefined ? 'undefined' : JSON.stringify(v)}`);\n      render({type:'head', idx:dq.headIndex()});\n    }\n    function peekBack(){\n      const v = dq.peekBack();\n      log(`peekBack() ‚Üí ${v === undefined ? 'undefined' : JSON.stringify(v)}`);\n      render({type:'tail', idx:dq.tailIndex()});\n    }\n    function clear(){\n      dq.clear();\n      log('clear()');\n      render();\n    }\n    function fillRandom(n=6){\n      const sample = ['A','B','C','D','E','F','G','H','üçé','üçã','üåü'];\n      for (let i=0;i<n;i++){\n        const val = sample[Math.floor(Math.random()*sample.length)] + (Math.random()<0.4 ? Math.floor(Math.random()*99) : '');\n        if (Math.random() < 0.5) dq.pushBack(val); else dq.pushFront(val);\n      }\n      log(`fillRandom(${n})`);\n      render();\n    }\n\n    // Random walk: perform random ops for a while, animate\n    let randomWalkTimer = null;\n    function startRandomWalk(){\n      if (randomWalkTimer !== null) {\n        clearInterval(randomWalkTimer);\n        randomWalkTimer = null;\n        randomWalkBtn.textContent = 'Random Walk (auto)';\n        log('Random walk stopped');\n        return;\n      }\n      randomWalkBtn.textContent = 'Stop Random Walk';\n      log('Random walk started');\n      randomWalkTimer = setInterval(() => {\n        const r = Math.random();\n        if (r < 0.28){\n          // pushFront\n          const v = Math.random()<0.5 ? Math.floor(Math.random()*100) : String.fromCharCode(65 + Math.floor(Math.random()*26));\n          dq.pushFront(v);\n          log(`pushFront(${JSON.stringify(v)})`);\n        } else if (r < 0.56){\n          const v = Math.random()<0.5 ? Math.floor(Math.random()*100) : String.fromCharCode(65 + Math.floor(Math.random()*26));\n          dq.pushBack(v);\n          log(`pushBack(${JSON.stringify(v)})`);\n        } else if (r < 0.78){\n          const v = dq.popFront();\n          log(`popFront() ‚Üí ${v === undefined ? 'undefined' : JSON.stringify(v)}`);\n        } else {\n          const v = dq.popBack();\n          log(`popBack() ‚Üí ${v === undefined ? 'undefined' : JSON.stringify(v)}`);\n        }\n        render();\n      }, 450);\n    }\n\n    // wiring\n    pushFrontBtn.addEventListener('click', () => { pushFront(); });\n    pushBackBtn.addEventListener('click', () => { pushBack(); });\n    popFrontBtn.addEventListener('click', () => { popFront(); });\n    popBackBtn.addEventListener('click', () => { popBack(); });\n    peekFrontBtn.addEventListener('click', () => { peekFront(); });\n    peekBackBtn.addEventListener('click', () => { peekBack(); });\n    clearBtn.addEventListener('click', () => { clear(); });\n    fillRandomBtn.addEventListener('click', () => { fillRandom(6); });\n    randomWalkBtn.addEventListener('click', () => { startRandomWalk(); });\n\n    // allow Enter key to pushBack by default\n    valueInput.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter') pushBack();\n    });\n\n    // initial render and example\n    log('Deque demo ready. Try operations on the left.');\n    render();\n\n    // Accessibility: focus the input on load\n    window.requestAnimationFrame(() => valueInput.focus());\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Deque"
    }
  ],
  "topic": "Deque",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}