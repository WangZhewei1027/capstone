{
  "id": "d79ca0a0-d361-11f0-8438-11a56595a476",
  "timestamp": "2025-12-07T11:43:54.100Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title>Bubble Sort Demonstration</title>\n  <style>\n    body {\n      font-family: Arial, sans-serif;\n      padding: 20px;\n      background: #f0f0f0;\n      text-align: center;\n    }\n    h1 {\n      margin-bottom: 10px;\n    }\n    #array-container {\n      display: flex;\n      justify-content: center;\n      align-items: flex-end;\n      height: 200px;\n      margin: 20px 0;\n    }\n    .bar {\n      margin: 0 2px;\n      background-color: steelblue;\n      width: 30px;\n      display: flex;\n      justify-content: center;\n      align-items: flex-end;\n      color: white;\n      font-weight: bold;\n      border-radius: 4px 4px 0 0;\n      transition: background-color 0.3s ease;\n    }\n    .bar.comparing {\n      background-color: orange;\n    }\n    .bar.swapping {\n      background-color: crimson;\n    }\n    button {\n      padding: 10px 20px;\n      font-size: 16px;\n      margin: 5px;\n      cursor: pointer;\n    }\n    input[type=\"text\"] {\n      width: 300px;\n      padding: 8px;\n      font-size: 16px;\n      margin: 5px;\n    }\n    #message {\n      margin-top: 10px;\n      font-style: italic;\n      color: #555;\n      min-height: 24px;\n    }\n  </style>\n</head>\n<body>\n  <h1>Bubble Sort Visualization</h1>\n  <div>\n    <input type=\"text\" id=\"input-array\" placeholder=\"Enter numbers separated by commas\" value=\"5,1,4,2,8\" />\n  </div>\n  <div>\n    <button id=\"start-btn\">Start Sorting</button>\n    <button id=\"random-btn\">Generate Random Array</button>\n  </div>\n  <div id=\"array-container\"></div>\n  <div id=\"message\"></div>\n\n  <script>\n    const inputArrayEl = document.getElementById('input-array');\n    const startBtn = document.getElementById('start-btn');\n    const randomBtn = document.getElementById('random-btn');\n    const arrayContainer = document.getElementById('array-container');\n    const messageEl = document.getElementById('message');\n\n    let array = [];\n\n    // Generate bars for the array visualization\n    function renderArray(arr, highlight = {}) {\n      arrayContainer.innerHTML = '';\n      const maxVal = Math.max(...arr);\n      arr.forEach((value, index) => {\n        const bar = document.createElement('div');\n        bar.classList.add('bar');\n        bar.style.height = (value / maxVal) * 100 + '%';\n        bar.textContent = value;\n        if (highlight.comparing && highlight.comparing.includes(index)) {\n          bar.classList.add('comparing');\n        }\n        if (highlight.swapping && highlight.swapping.includes(index)) {\n          bar.classList.add('swapping');\n        }\n        arrayContainer.appendChild(bar);\n      });\n    }\n\n    // Sleep for given milliseconds\n    function sleep(ms) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    async function bubbleSort(arr) {\n      const n = arr.length;\n      let swapped;\n      for (let i = 0; i < n - 1; i++) {\n        swapped = false;\n        messageEl.textContent = `Pass ${i + 1} of ${n - 1}`;\n        for (let j = 0; j < n - 1 - i; j++) {\n          // Highlight current comparison\n          renderArray(arr, { comparing: [j, j + 1] });\n          await sleep(600);\n          if (arr[j] > arr[j + 1]) {\n            // Highlight swap\n            renderArray(arr, { swapping: [j, j + 1] });\n            await sleep(400);\n            // Swap elements\n            [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\n            swapped = true;\n            renderArray(arr, { swapping: [j, j + 1] });\n            await sleep(600);\n          }\n          renderArray(arr);\n          await sleep(300);\n        }\n        if (!swapped) {\n          messageEl.textContent = `Array is sorted after ${i + 1} passes.`;\n          break;\n        }\n      }\n      messageEl.textContent = 'Sorting completed.';\n      renderArray(arr);\n      startBtn.disabled = false;\n      randomBtn.disabled = false;\n      inputArrayEl.disabled = false;\n    }\n\n    function parseInput(input) {\n      return input.split(',')\n                  .map(s => s.trim())\n                  .filter(s => s !== '')\n                  .map(x => Number(x));\n    }\n\n    function validateArray(arr) {\n      if (arr.length === 0) {\n        messageEl.textContent = 'Please enter at least one number.';\n        return false;\n      }\n      if (arr.some(isNaN)) {\n        messageEl.textContent = 'Invalid input detected. Use only numbers separated by commas.';\n        return false;\n      }\n      return true;\n    }\n\n    function generateRandomArray(size = 10, max = 50) {\n      return Array.from({length: size}, () => Math.floor(Math.random() * max) + 1);\n    }\n\n    startBtn.addEventListener('click', () => {\n      const parsed = parseInput(inputArrayEl.value);\n      if (!validateArray(parsed)) {\n        return;\n      }\n      array = parsed;\n      startBtn.disabled = true;\n      randomBtn.disabled = true;\n      inputArrayEl.disabled = true;\n      messageEl.textContent = 'Starting bubble sort...';\n      bubbleSort(array);\n    });\n\n    randomBtn.addEventListener('click', () => {\n      const randomArr = generateRandomArray(10, 100);\n      array = randomArr;\n      inputArrayEl.value = randomArr.join(', ');\n      renderArray(array);\n      messageEl.textContent = 'Random array generated. Ready to sort.';\n    });\n\n    // Initial render with default input\n    window.onload = () => {\n      const initialArr = parseInput(inputArrayEl.value);\n      if (validateArray(initialArr)) {\n        array = initialArr;\n        renderArray(array);\n        messageEl.textContent = 'Enter numbers and press Start Sorting';\n      }\n    };\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}