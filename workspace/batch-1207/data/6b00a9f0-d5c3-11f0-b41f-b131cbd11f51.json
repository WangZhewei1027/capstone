{
  "id": "6b00a9f0-d5c3-11f0-b41f-b131cbd11f51",
  "timestamp": "2025-12-10T12:29:46.539Z",
  "model": "deepseek-chat",
  "status": "success",
  "question": "Quick Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Quick Sort Visualization</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .container {\n            background-color: white;\n            padding: 20px;\n            border-radius: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        h1 {\n            color: #333;\n            text-align: center;\n        }\n        .controls {\n            margin: 20px 0;\n            display: flex;\n            gap: 10px;\n            flex-wrap: wrap;\n        }\n        button {\n            padding: 10px 15px;\n            background-color: #4CAF50;\n            color: white;\n            border: none;\n            border-radius: 5px;\n            cursor: pointer;\n            transition: background-color 0.3s;\n        }\n        button:hover {\n            background-color: #45a049;\n        }\n        button:disabled {\n            background-color: #cccccc;\n            cursor: not-allowed;\n        }\n        input {\n            padding: 8px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n        }\n        .array-display {\n            margin: 20px 0;\n            padding: 15px;\n            background-color: #f9f9f9;\n            border-radius: 8px;\n            min-height: 60px;\n        }\n        .element {\n            display: inline-block;\n            width: 40px;\n            height: 40px;\n            line-height: 40px;\n            text-align: center;\n            margin: 5px;\n            border-radius: 5px;\n            color: white;\n            font-weight: bold;\n            transition: all 0.3s ease;\n        }\n        .pivot {\n            background-color: #ff5722 !important;\n            transform: scale(1.2);\n        }\n        .comparing {\n            background-color: #2196f3 !important;\n        }\n        .sorted {\n            background-color: #4CAF50 !important;\n        }\n        .partition {\n            background-color: #ffeb3b !important;\n            color: #333 !important;\n        }\n        .explanation {\n            margin-top: 20px;\n            padding: 15px;\n            background-color: #e8f4fd;\n            border-radius: 8px;\n            border-left: 4px solid #2196f3;\n        }\n        .step-info {\n            margin: 10px 0;\n            font-weight: bold;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Quick Sort Visualization</h1>\n        \n        <div class=\"controls\">\n            <input type=\"text\" id=\"arrayInput\" placeholder=\"Enter numbers (e.g., 5,3,8,1,2)\" value=\"5,3,8,1,2,7,6,4\">\n            <button onclick=\"generateArray()\">Generate Array</button>\n            <button onclick=\"startSorting()\">Start Quick Sort</button>\n            <button onclick=\"reset()\">Reset</button>\n            <button onclick=\"nextStep()\" id=\"nextStepBtn\" disabled>Next Step</button>\n        </div>\n\n        <div class=\"array-display\" id=\"arrayDisplay\"></div>\n        <div class=\"step-info\" id=\"stepInfo\"></div>\n        <div class=\"explanation\" id=\"explanation\">\n            <h3>How Quick Sort Works:</h3>\n            <p>Quick Sort is a divide-and-conquer algorithm that works by:</p>\n            <ol>\n                <li>Selecting a 'pivot' element from the array</li>\n                <li>Partitioning the array around the pivot (elements smaller than pivot go left, larger go right)</li>\n                <li>Recursively applying the same process to the left and right subarrays</li>\n            </ol>\n            <p>Time Complexity: O(n log n) average case, O(nÂ²) worst case</p>\n        </div>\n    </div>\n\n    <script>\n        let originalArray = [];\n        let currentArray = [];\n        let sortingSteps = [];\n        let currentStep = 0;\n        let isSorting = false;\n\n        function generateArray() {\n            const input = document.getElementById('arrayInput').value;\n            originalArray = input.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));\n            \n            if (originalArray.length === 0) {\n                originalArray = [5, 3, 8, 1, 2, 7, 6, 4];\n            }\n            \n            reset();\n        }\n\n        function reset() {\n            currentArray = [...originalArray];\n            sortingSteps = [];\n            currentStep = 0;\n            isSorting = false;\n            document.getElementById('nextStepBtn').disabled = true;\n            displayArray(currentArray);\n            document.getElementById('stepInfo').textContent = 'Click \"Start Quick Sort\" to begin';\n        }\n\n        function startSorting() {\n            if (originalArray.length === 0) {\n                generateArray();\n            }\n            \n            currentArray = [...originalArray];\n            sortingSteps = [];\n            currentStep = 0;\n            isSorting = true;\n            \n            // Generate all sorting steps\n            quickSortSteps([...currentArray], 0, currentArray.length - 1);\n            \n            document.getElementById('nextStepBtn').disabled = false;\n            document.getElementById('stepInfo').textContent = `Step ${currentStep + 1}/${sortingSteps.length}: Ready to begin`;\n        }\n\n        function quickSortSteps(arr, low, high, parentStep = null) {\n            if (low < high) {\n                // Save current state before partitioning\n                const step = {\n                    array: [...arr],\n                    low: low,\n                    high: high,\n                    pivotIndex: -1,\n                    comparing: [],\n                    partition: [],\n                    explanation: `Partitioning from index ${low} to ${high}`,\n                    parentStep: parentStep\n                };\n                sortingSteps.push(step);\n\n                const pivotIndex = partitionSteps(arr, low, high);\n                \n                // Save state after partitioning\n                const afterPartitionStep = {\n                    array: [...arr],\n                    low: low,\n                    high: high,\n                    pivotIndex: pivotIndex,\n                    comparing: [],\n                    partition: [],\n                    explanation: `Pivot ${arr[pivotIndex]} is now in correct position`,\n                    parentStep: parentStep\n                };\n                sortingSteps.push(afterPartitionStep);\n\n                // Recursively sort left and right partitions\n                quickSortSteps(arr, low, pivotIndex - 1, sortingSteps.length - 1);\n                quickSortSteps(arr, pivotIndex + 1, high, sortingSteps.length - 1);\n            }\n        }\n\n        function partitionSteps(arr, low, high) {\n            const pivot = arr[high];\n            let i = low - 1;\n\n            // Save initial partitioning state\n            const initialStep = {\n                array: [...arr],\n                low: low,\n                high: high,\n                pivotIndex: high,\n                comparing: [high],\n                partition: [],\n                explanation: `Selected pivot: ${pivot} (last element)`\n            };\n            sortingSteps.push(initialStep);\n\n            for (let j = low; j < high; j++) {\n                // Save comparison step\n                const compareStep = {\n                    array: [...arr],\n                    low: low,\n                    high: high,\n                    pivotIndex: high,\n                    comparing: [j, high],\n                    partition: Array.from({length: i - low + 1}, (_, idx) => low + idx),\n                    explanation: `Comparing ${arr[j]} with pivot ${pivot}`\n                };\n                sortingSteps.push(compareStep);\n\n                if (arr[j] <= pivot) {\n                    i++;\n                    \n                    if (i !== j) {\n                        // Swap elements\n                        [arr[i], arr[j]] = [arr[j], arr[i]];\n                        \n                        // Save swap step\n                        const swapStep = {\n                            array: [...arr],\n                            low: low,\n                            high: high,\n                            pivotIndex: high,\n                            comparing: [i, j],\n                            partition: Array.from({length: i - low + 1}, (_, idx) => low + idx),\n                            explanation: `Swapped ${arr[i]} and ${arr[j]}`\n                        };\n                        sortingSteps.push(swapStep);\n                    }\n                }\n            }\n\n            // Final swap with pivot\n            [arr[i + 1], arr[high]] = [arr[high], arr[i + 1]];\n            \n            const finalStep = {\n                array: [...arr],\n                low: low,\n                high: high,\n                pivotIndex: i + 1,\n                comparing: [i + 1, high],\n                partition: Array.from({length: i + 1 - low + 1}, (_, idx) => low + idx),\n                explanation: `Placed pivot ${pivot} in final position at index ${i + 1}`\n            };\n            sortingSteps.push(finalStep);\n\n            return i + 1;\n        }\n\n        function nextStep() {\n            if (currentStep < sortingSteps.length) {\n                const step = sortingSteps[currentStep];\n                displayArrayWithHighlights(step.array, step);\n                document.getElementById('stepInfo').textContent = \n                    `Step ${currentStep + 1}/${sortingSteps.length}: ${step.explanation}`;\n                currentStep++;\n                \n                if (currentStep === sortingSteps.length) {\n                    document.getElementById('nextStepBtn').disabled = true;\n                    document.getElementById('stepInfo').textContent += ' - Sorting Completed!';\n                }\n            }\n        }\n\n        function displayArray(arr) {\n            const display = document.getElementById('arrayDisplay');\n            display.innerHTML = '';\n            \n            arr.forEach((value, index) => {\n                const element = document.createElement('div');\n                element.className = 'element';\n                element.textContent = value;\n                element.style.backgroundColor = getColorForValue(value, Math.max(...arr), Math.min(...arr));\n                display.appendChild(element);\n            });\n        }\n\n        function displayArrayWithHighlights(arr, step) {\n            const display = document.getElementById('arrayDisplay');\n            display.innerHTML = '';\n            \n            arr.forEach((value, index) => {\n                const element = document.createElement('div');\n                element.className = 'element';\n                element.textContent = value;\n                \n                if (index === step.pivotIndex) {\n                    element.classList.add('pivot');\n                } else if (step.comparing.includes(index)) {\n                    element.classList.add('comparing');\n                } else if (step.partition.includes(index)) {\n                    element.classList.add('partition');\n                } else {\n                    element.style.backgroundColor = getColorForValue(value, Math.max(...arr), Math.min(...arr));\n                }\n                \n                display.appendChild(element);\n            });\n        }\n\n        function getColorForValue(value, max, min) {\n            const range = max - min;\n            if (range === 0) return '#666666';\n            \n            const ratio = (value - min) / range;\n            const hue = (1 - ratio) * 240; // Blue (240) to Red (0)\n            return `hsl(${hue}, 70%, 60%)`;\n        }\n\n        // Initialize with default array\n        window.onload = function() {\n            generateArray();\n        };\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Quick Sort"
    }
  ],
  "topic": "Quick Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}