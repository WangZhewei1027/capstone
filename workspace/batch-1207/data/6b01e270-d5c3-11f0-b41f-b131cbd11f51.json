{
  "id": "6b01e270-d5c3-11f0-b41f-b131cbd11f51",
  "timestamp": "2025-12-10T12:30:41.293Z",
  "model": "deepseek-chat",
  "status": "success",
  "question": "K-Nearest Neighbors (KNN)",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>K-Nearest Neighbors (KNN) Visualization</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .container {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 20px;\n            margin-top: 20px;\n        }\n        .panel {\n            background: white;\n            padding: 20px;\n            border-radius: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        canvas {\n            max-width: 100%;\n        }\n        .controls {\n            display: flex;\n            flex-direction: column;\n            gap: 15px;\n        }\n        input[type=\"range\"] {\n            width: 100%;\n        }\n        .results {\n            margin-top: 20px;\n            padding: 15px;\n            background: #e8f4fd;\n            border-radius: 5px;\n        }\n        .point-info {\n            margin-top: 10px;\n            font-size: 14px;\n        }\n    </style>\n</head>\n<body>\n    <h1>K-Nearest Neighbors (KNN) Algorithm Visualization</h1>\n    \n    <div class=\"container\">\n        <div class=\"panel\">\n            <h3>KNN Classification</h3>\n            <canvas id=\"knnChart\"></canvas>\n            <div class=\"controls\">\n                <label for=\"kValue\">K Value: <span id=\"kValueDisplay\">3</span></label>\n                <input type=\"range\" id=\"kValue\" min=\"1\" max=\"15\" value=\"3\">\n                \n                <label for=\"testX\">Test Point X: <span id=\"testXDisplay\">0.5</span></label>\n                <input type=\"range\" id=\"testX\" min=\"0\" max=\"1\" step=\"0.01\" value=\"0.5\">\n                \n                <label for=\"testY\">Test Point Y: <span id=\"testYDisplay\">0.5</span></label>\n                <input type=\"range\" id=\"testY\" min=\"0\" max=\"1\" step=\"0.01\" value=\"0.5\">\n            </div>\n            <button onclick=\"addRandomPoint()\">Add Random Training Point</button>\n            <button onclick=\"resetData()\">Reset Data</button>\n        </div>\n        \n        <div class=\"panel\">\n            <h3>Algorithm Explanation</h3>\n            <div id=\"explanation\">\n                <p><strong>K-Nearest Neighbors (KNN)</strong> is a simple, instance-based learning algorithm used for classification and regression.</p>\n                <p><strong>How it works:</strong></p>\n                <ol>\n                    <li>Store all training data points</li>\n                    <li>For a new test point, calculate distances to all training points</li>\n                    <li>Select the K nearest neighbors (smallest distances)</li>\n                    <li>For classification: take majority vote of neighbors' classes</li>\n                    <li>For regression: take average of neighbors' values</li>\n                </ol>\n                <div class=\"results\" id=\"predictionResult\">\n                    <!-- Prediction results will appear here -->\n                </div>\n                <div class=\"point-info\" id=\"neighborsInfo\">\n                    <!-- Neighbors information will appear here -->\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        // Sample training data - points with class labels\n        let trainingData = [\n            {x: 0.2, y: 0.3, class: 'A'},\n            {x: 0.3, y: 0.7, class: 'A'},\n            {x: 0.4, y: 0.2, class: 'A'},\n            {x: 0.6, y: 0.8, class: 'A'},\n            {x: 0.7, y: 0.3, class: 'B'},\n            {x: 0.8, y: 0.6, class: 'B'},\n            {x: 0.9, y: 0.4, class: 'B'},\n            {x: 0.85, y: 0.7, class: 'B'}\n        ];\n\n        let testPoint = {x: 0.5, y: 0.5};\n        let kValue = 3;\n        let chart;\n\n        // Initialize chart\n        function initChart() {\n            const ctx = document.getElementById('knnChart').getContext('2d');\n            \n            chart = new Chart(ctx, {\n                type: 'scatter',\n                data: {\n                    datasets: [\n                        {\n                            label: 'Class A',\n                            data: trainingData.filter(p => p.class === 'A').map(p => ({x: p.x, y: p.y})),\n                            backgroundColor: 'rgba(255, 99, 132, 0.8)',\n                            pointRadius: 8\n                        },\n                        {\n                            label: 'Class B',\n                            data: trainingData.filter(p => p.class === 'B').map(p => ({x: p.x, y: p.y})),\n                            backgroundColor: 'rgba(54, 162, 235, 0.8)',\n                            pointRadius: 8\n                        },\n                        {\n                            label: 'Test Point',\n                            data: [{x: testPoint.x, y: testPoint.y}],\n                            backgroundColor: 'rgba(255, 206, 86, 1)',\n                            pointRadius: 10,\n                            pointStyle: 'triangle'\n                        },\n                        {\n                            label: 'Nearest Neighbors',\n                            data: [],\n                            backgroundColor: 'rgba(75, 192, 192, 0.6)',\n                            pointRadius: 8,\n                            pointStyle: 'rect'\n                        }\n                    ]\n                },\n                options: {\n                    scales: {\n                        x: {\n                            type: 'linear',\n                            position: 'bottom',\n                            min: 0,\n                            max: 1\n                        },\n                        y: {\n                            min: 0,\n                            max: 1\n                        }\n                    },\n                    onClick: (e) => {\n                        const canvasPosition = Chart.helpers.getRelativePosition(e, chart);\n                        const dataX = chart.scales.x.getValueForPixel(canvasPosition.x);\n                        const dataY = chart.scales.y.getValueForPixel(canvasPosition.y);\n                        \n                        testPoint.x = Math.max(0, Math.min(1, dataX));\n                        testPoint.y = Math.max(0, Math.min(1, dataY));\n                        \n                        document.getElementById('testX').value = testPoint.x;\n                        document.getElementById('testY').value = testPoint.y;\n                        document.getElementById('testXDisplay').textContent = testPoint.x.toFixed(2);\n                        document.getElementById('testYDisplay').textContent = testPoint.y.toFixed(2);\n                        \n                        updateChart();\n                    }\n                }\n            });\n        }\n\n        // Calculate Euclidean distance between two points\n        function calculateDistance(point1, point2) {\n            return Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2));\n        }\n\n        // Find K nearest neighbors\n        function findKNearestNeighbors() {\n            // Calculate distances to all training points\n            const distances = trainingData.map(point => ({\n                ...point,\n                distance: calculateDistance(point, testPoint)\n            }));\n            \n            // Sort by distance and take K nearest\n            return distances.sort((a, b) => a.distance - b.distance).slice(0, kValue);\n        }\n\n        // Make prediction based on KNN\n        function predict() {\n            const neighbors = findKNearestNeighbors();\n            const classCount = {};\n            \n            neighbors.forEach(neighbor => {\n                classCount[neighbor.class] = (classCount[neighbor.class] || 0) + 1;\n            });\n            \n            // Return class with highest count\n            return Object.keys(classCount).reduce((a, b) => \n                classCount[a] > classCount[b] ? a : b\n            );\n        }\n\n        // Update chart with current data\n        function updateChart() {\n            const neighbors = findKNearestNeighbors();\n            const prediction = predict();\n            \n            // Update neighbors dataset\n            chart.data.datasets[3].data = neighbors.map(p => ({x: p.x, y: p.y}));\n            \n            // Update test point\n            chart.data.datasets[2].data = [{x: testPoint.x, y: testPoint.y}];\n            \n            chart.update();\n            \n            // Update results display\n            document.getElementById('predictionResult').innerHTML = `\n                <strong>Prediction:</strong> Class ${prediction}<br>\n                <strong>K value:</strong> ${kValue}<br>\n                <strong>Test point:</strong> (${testPoint.x.toFixed(2)}, ${testPoint.y.toFixed(2)})\n            `;\n            \n            // Update neighbors information\n            let neighborsHtml = '<strong>Nearest Neighbors:</strong><br>';\n            neighbors.forEach((neighbor, index) => {\n                neighborsHtml += `${index + 1}. Class ${neighbor.class} - Distance: ${neighbor.distance.toFixed(3)}<br>`;\n            });\n            document.getElementById('neighborsInfo').innerHTML = neighborsHtml;\n        }\n\n        // Add random training point\n        function addRandomPoint() {\n            const newClass = Math.random() > 0.5 ? 'A' : 'B';\n            const newPoint = {\n                x: Math.random(),\n                y: Math.random(),\n                class: newClass\n            };\n            \n            trainingData.push(newPoint);\n            updateChartData();\n        }\n\n        // Reset data to initial state\n        function resetData() {\n            trainingData = [\n                {x: 0.2, y: 0.3, class: 'A'},\n                {x: 0.3, y: 0.7, class: 'A'},\n                {x: 0.4, y: 0.2, class: 'A'},\n                {x: 0.6, y: 0.8, class: 'A'},\n                {x: 0.7, y: 0.3, class: 'B'},\n                {x: 0.8, y: 0.6, class: 'B'},\n                {x: 0.9, y: 0.4, class: 'B'},\n                {x: 0.85, y: 0.7, class: 'B'}\n            ];\n            testPoint = {x: 0.5, y: 0.5};\n            kValue = 3;\n            \n            document.getElementById('kValue').value = kValue;\n            document.getElementById('testX').value = testPoint.x;\n            document.getElementById('testY').value = testPoint.y;\n            document.getElementById('kValueDisplay').textContent = kValue;\n            document.getElementById('testXDisplay').textContent = testPoint.x.toFixed(2);\n            document.getElementById('testYDisplay').textContent = testPoint.y.toFixed(2);\n            \n            updateChartData();\n        }\n\n        // Update chart datasets\n        function updateChartData() {\n            chart.data.datasets[0].data = trainingData.filter(p => p.class === 'A').map(p => ({x: p.x, y: p.y}));\n            chart.data.datasets[1].data = trainingData.filter(p => p.class === 'B').map(p => ({x: p.x, y: p.y}));\n            updateChart();\n        }\n\n        // Initialize event listeners\n        document.getElementById('kValue').addEventListener('input', function() {\n            kValue = parseInt(this.value);\n            document.getElementById('kValueDisplay').textContent = kValue;\n            updateChart();\n        });\n\n        document.getElementById('testX').addEventListener('input', function() {\n            testPoint.x = parseFloat(this.value);\n            document.getElementById('testXDisplay').textContent = testPoint.x.toFixed(2);\n            updateChart();\n        });\n\n        document.getElementById('testY').addEventListener('input', function() {\n            testPoint.y = parseFloat(this.value);\n            document.getElementById('testYDisplay').textContent = testPoint.y.toFixed(2);\n            updateChart();\n        });\n\n        // Initialize application\n        window.onload = function() {\n            initChart();\n            updateChart();\n        };\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "K-Nearest Neighbors (KNN)"
    }
  ],
  "topic": "K-Nearest Neighbors (KNN)",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}