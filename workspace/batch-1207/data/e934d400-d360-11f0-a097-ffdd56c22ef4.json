{
  "id": "e934d400-d360-11f0-a097-ffdd56c22ef4",
  "timestamp": "2025-12-07T11:39:10.201Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Sliding Window",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Sliding Window Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    body { font-family: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial; margin: 18px; color: #111; }\n    h1 { margin: 0 0 8px 0; font-size: 20px; }\n    p { margin: 6px 0 12px 0; color: #333; }\n    .controls { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; margin-bottom: 12px; }\n    label { font-size: 13px; }\n    select, input[type=\"text\"], input[type=\"number\"], button { padding: 6px 8px; font-size: 13px; }\n    .panel { border: 1px solid #ddd; padding: 12px; border-radius: 8px; background:#fafafa; margin-bottom: 12px; }\n    .array-row { display:flex; gap:6px; align-items:flex-end; margin: 12px 0; flex-wrap:wrap; }\n    .cell { width:46px; height:46px; display:flex; align-items:center; justify-content:center; border-radius:6px; background:white; border:1px solid #ddd; font-weight:600; box-shadow: 0 1px 0 rgba(0,0,0,0.02); position:relative; }\n    .cell.index { font-size:12px; color:#555; font-weight:500; height:auto; padding:6px 8px; }\n    .cell.window { border-color:#2b8aef; background: linear-gradient(180deg, #e9f3ff, #f6fbff); }\n    .pointer { position:absolute; top:-20px; left:50%; transform:translateX(-50%); font-size:12px; color:#2b8aef; }\n    .pointer.left { top:-22px; color:#ef6b6b; }\n    .pointer.right { top:-22px; color:#2b8aef; }\n    .summary { margin-top:8px; font-size:14px; }\n    .code { background:#111; color:#fff; padding:12px; border-radius:6px; font-family: Menlo, Monaco, monospace; font-size:13px; white-space:pre; overflow:auto; max-height:220px; }\n    .status { margin-top:8px; font-size:13px; color:#333; line-height:1.4; }\n    .play-controls { display:flex; gap:8px; align-items:center; margin-top:8px; }\n    .steps { display:flex; gap:6px; align-items:center; margin-top:10px; flex-wrap:wrap; }\n    .btn { padding:6px 10px; border-radius:6px; border:1px solid #ccc; background:white; cursor:pointer; }\n    .btn.primary { background:#2b8aef; color:white; border-color:#0f6cd7; }\n    .small { padding:4px 8px; font-size:13px; }\n    .muted { color:#666; font-size:13px; }\n    .legend { margin-top:8px; display:flex; gap:12px; align-items:center; flex-wrap:wrap; }\n    .legend .box { width:18px; height:18px; border-radius:4px; display:inline-block; border:1px solid #ccc; vertical-align:middle; margin-right:6px;}\n    .box.window { background: linear-gradient(180deg,#e9f3ff,#f6fbff); border-color:#2b8aef; }\n    .box.max { background:#ffe9a6; border-color:#f0c040; }\n    .footer { margin-top:14px; font-size:13px; color:#444; }\n    @media (max-width:520px) {\n      .cell { width:36px; height:36px; font-size:14px; }\n    }\n  </style>\n</head>\n<body>\n  <h1>Sliding Window Visualizer</h1>\n  <p>Interactive demonstration of the \"Sliding Window\" technique. Pick an example, provide input, and step through the algorithm.</p>\n\n  <div class=\"panel controls\" id=\"controls\">\n    <label>\n      Example:\n      <select id=\"exampleSelect\">\n        <option value=\"fixed\">Max Sum Subarray of Size K (Fixed-size)</option>\n        <option value=\"variable\">Longest Substring with ≤ K Distinct Characters (Variable-size)</option>\n      </select>\n    </label>\n\n    <div id=\"fixedControls\">\n      <label>Array (comma separated):\n        <input id=\"arrayInput\" type=\"text\" value=\"2,1,5,1,3,2\" style=\"width:200px\" />\n      </label>\n      <label>K:\n        <input id=\"kInput\" type=\"number\" value=\"3\" min=\"1\" style=\"width:70px\" />\n      </label>\n      <button id=\"randomArray\" class=\"btn small\">Random</button>\n    </div>\n\n    <div id=\"variableControls\" style=\"display:none;\">\n      <label>String:\n        <input id=\"strInput\" type=\"text\" value=\"araaci\" style=\"width:180px\" />\n      </label>\n      <label>K:\n        <input id=\"kVarInput\" type=\"number\" value=\"2\" min=\"1\" style=\"width:70px\" />\n      </label>\n      <button id=\"randomStr\" class=\"btn small\">Random</button>\n    </div>\n\n    <button id=\"buildBtn\" class=\"btn primary\">Build Steps</button>\n  </div>\n\n  <div class=\"panel\">\n    <div style=\"display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;\">\n      <div style=\"font-weight:700\" id=\"titleArea\">Max Sum Subarray of Size K</div>\n      <div style=\"display:flex; gap:8px; align-items:center;\">\n        Speed:\n        <input id=\"speedRange\" type=\"range\" min=\"200\" max=\"2000\" value=\"700\" />\n        <span id=\"speedLabel\" class=\"muted\">700ms</span>\n      </div>\n    </div>\n\n    <div id=\"visualArea\">\n      <!-- Array / string visualization -->\n      <div id=\"arrayVisual\" class=\"array-row\" aria-hidden=\"true\"></div>\n      <div class=\"summary\" id=\"summaryArea\"></div>\n      <div class=\"status\" id=\"statusArea\"></div>\n    </div>\n\n    <div class=\"play-controls\">\n      <button id=\"stepBack\" class=\"btn small\">⟵ Step</button>\n      <button id=\"playPause\" class=\"btn small\">Play</button>\n      <button id=\"stepForward\" class=\"btn small\">Step ⟶</button>\n      <div style=\"margin-left:12px\">\n        Step <span id=\"stepIndex\">0</span> / <span id=\"stepTotal\">0</span>\n      </div>\n      <div style=\"margin-left:auto; display:flex; gap:8px\">\n        <button id=\"resetBtn\" class=\"btn small\">Reset</button>\n      </div>\n    </div>\n\n    <div class=\"legend\">\n      <div><span class=\"box window\"></span>Current window</div>\n      <div><span class=\"box max\" style=\"display:inline-block\"></span>Best (max / longest) found</div>\n    </div>\n\n    <div style=\"margin-top:10px;\">\n      <div class=\"code\" id=\"codeArea\"></div>\n    </div>\n\n  </div>\n\n  <div class=\"panel\">\n    <div style=\"font-weight:700\">How to use</div>\n    <ul style=\"margin-top:8px\">\n      <li>Select the example type.</li>\n      <li>Provide array or string and K, or hit Random to get a sample.</li>\n      <li>Click \"Build Steps\" to prepare the algorithm trace, then Step/Play to visualize.</li>\n    </ul>\n    <div class=\"footer\">\n      Note: This visualizer generates step snapshots of the algorithms to make it easy to inspect intermediate states. The fixed-size demo shows how a window of size K slides across an array to compute sums. The variable-size demo shows expanding and shrinking a window while tracking character counts to find the longest substring with at most K distinct characters.\n    </div>\n  </div>\n\n<script>\n(function(){\n  const exampleSelect = document.getElementById('exampleSelect');\n  const fixedControls = document.getElementById('fixedControls');\n  const variableControls = document.getElementById('variableControls');\n  const arrayInput = document.getElementById('arrayInput');\n  const kInput = document.getElementById('kInput');\n  const randomArrayBtn = document.getElementById('randomArray');\n  const strInput = document.getElementById('strInput');\n  const kVarInput = document.getElementById('kVarInput');\n  const randomStrBtn = document.getElementById('randomStr');\n  const buildBtn = document.getElementById('buildBtn');\n  const arrayVisual = document.getElementById('arrayVisual');\n  const summaryArea = document.getElementById('summaryArea');\n  const statusArea = document.getElementById('statusArea');\n  const codeArea = document.getElementById('codeArea');\n  const titleArea = document.getElementById('titleArea');\n  const stepBack = document.getElementById('stepBack');\n  const stepForward = document.getElementById('stepForward');\n  const playPause = document.getElementById('playPause');\n  const stepIndexLabel = document.getElementById('stepIndex');\n  const stepTotalLabel = document.getElementById('stepTotal');\n  const resetBtn = document.getElementById('resetBtn');\n  const speedRange = document.getElementById('speedRange');\n  const speedLabel = document.getElementById('speedLabel');\n\n  let steps = [];\n  let cur = 0;\n  let timer = null;\n\n  exampleSelect.addEventListener('change', () => {\n    const v = exampleSelect.value;\n    if (v === 'fixed') {\n      fixedControls.style.display = '';\n      variableControls.style.display = 'none';\n      titleArea.textContent = 'Max Sum Subarray of Size K';\n      showCode(fixedCode());\n    } else {\n      fixedControls.style.display = 'none';\n      variableControls.style.display = '';\n      titleArea.textContent = 'Longest Substring with ≤ K Distinct Characters';\n      showCode(variableCode());\n    }\n  });\n\n  randomArrayBtn.addEventListener('click', () => {\n    const n = 6 + Math.floor(Math.random()*6);\n    const arr = Array.from({length:n}, ()=> Math.floor(Math.random()*9)-2); // include negatives\n    arrayInput.value = arr.join(',');\n  });\n\n  randomStrBtn.addEventListener('click', () => {\n    const samples = ['araaci','cbbebi','aabacbebebe','abcabcbb','bbaaac','xyzzzaa'];\n    strInput.value = samples[Math.floor(Math.random()*samples.length)];\n  });\n\n  speedRange.addEventListener('input', ()=> {\n    speedLabel.textContent = speedRange.value + 'ms';\n  });\n\n  buildBtn.addEventListener('click', ()=> {\n    stopPlay();\n    buildSteps();\n    renderStep(0);\n  });\n\n  stepBack.addEventListener('click', ()=> {\n    stopPlay();\n    if (cur>0) { cur--; renderStep(cur); }\n  });\n  stepForward.addEventListener('click', ()=> {\n    stopPlay();\n    if (cur < steps.length-1) { cur++; renderStep(cur); }\n  });\n  playPause.addEventListener('click', ()=> {\n    if (!steps.length) return;\n    if (timer) { stopPlay(); }\n    else { startPlay(); }\n  });\n\n  resetBtn.addEventListener('click', ()=> {\n    stopPlay();\n    steps = []; cur = 0;\n    arrayVisual.innerHTML = '';\n    summaryArea.innerHTML = '';\n    statusArea.innerHTML = '';\n    codeArea.innerHTML = '';\n    stepIndexLabel.textContent = 0; stepTotalLabel.textContent = 0;\n  });\n\n  function startPlay(){\n    if (!steps.length) return;\n    playPause.textContent = 'Pause';\n    timer = setInterval(()=> {\n      if (cur < steps.length-1) {\n        cur++; renderStep(cur);\n      } else {\n        stopPlay();\n      }\n    }, Number(speedRange.value));\n  }\n  function stopPlay(){\n    if (timer) { clearInterval(timer); timer = null; }\n    playPause.textContent = 'Play';\n  }\n\n  function buildSteps(){\n    const ex = exampleSelect.value;\n    if (ex === 'fixed') {\n      const raw = arrayInput.value.trim();\n      if (!raw) { alert('Enter an array or generate Random.'); return; }\n      const arr = raw.split(',').map(s=>Number(s.trim())).filter(s=>!Number.isNaN(s));\n      const k = Number(kInput.value);\n      if (!Number.isInteger(k) || k < 1) { alert('K must be an integer >=1'); return; }\n      steps = buildFixedSteps(arr, k);\n      showCode(fixedCode());\n      titleArea.textContent = 'Max Sum Subarray of Size K';\n    } else {\n      const s = strInput.value;\n      if (typeof s !== 'string' || s.length===0) { alert('Enter a string or generate Random.'); return; }\n      const k = Number(kVarInput.value);\n      if (!Number.isInteger(k) || k < 1) { alert('K must be an integer >=1'); return; }\n      steps = buildVariableSteps(s, k);\n      showCode(variableCode());\n      titleArea.textContent = 'Longest Substring with ≤ K Distinct Characters';\n    }\n    if (!steps.length) {\n      statusArea.textContent = 'No steps generated.';\n    }\n    cur = 0;\n    stepIndexLabel.textContent = 0;\n    stepTotalLabel.textContent = Math.max(0, steps.length-1);\n  }\n\n  function renderStep(i){\n    if (!steps || !steps.length) return;\n    const st = steps[i];\n    stepIndexLabel.textContent = i;\n    // build visualization for either array or string\n    arrayVisual.innerHTML = '';\n    // create cells\n    for (let idx=0; idx<st.items.length; idx++){\n      const val = st.items[idx];\n      const c = document.createElement('div');\n      c.className = 'cell';\n      c.textContent = val.display;\n      c.title = val.title || '';\n      // mark indices below\n      const idxBadge = document.createElement('div');\n      idxBadge.className = 'cell index';\n      idxBadge.style.position = 'absolute';\n      idxBadge.style.bottom = '-22px';\n      idxBadge.style.left = '50%';\n      idxBadge.style.transform = 'translateX(-50%)';\n      idxBadge.style.fontSize = '11px';\n      idxBadge.style.border = 'none';\n      idxBadge.style.background = 'transparent';\n      idxBadge.textContent = idx;\n      if (idx === st.left || idx === st.right) {\n        const pointer = document.createElement('div');\n        pointer.className = 'pointer ' + (idx===st.left ? 'left':'right');\n        pointer.textContent = idx===st.left ? 'L' : 'R';\n        c.appendChild(pointer);\n      }\n      if (idx >= st.left && idx <= st.right) {\n        c.classList.add('window');\n      }\n      if (st.bestRange && idx >= st.bestRange[0] && idx <= st.bestRange[1]) {\n        c.style.background = '#fff6e1';\n        c.style.borderColor = '#f0c040';\n      }\n      arrayVisual.appendChild(c);\n      c.appendChild(idxBadge);\n    }\n\n    // summary and status\n    summaryArea.innerHTML = st.summaryHTML || '';\n    statusArea.innerHTML = st.status || '';\n\n    // highlight code with current step description\n    codeArea.textContent = (st.commentBlock || '') + \"\\n\\n\" + (st.pseudocode || '');\n  }\n\n  // ---------- Algorithms producing steps ----------\n\n  function buildFixedSteps(arr, k){\n    const n = arr.length;\n    const steps = [];\n    // helper to push snapshot\n    function snap(left, right, currSum, maxSum, maxLeft, maxRight, stage){\n      const items = arr.map(v=>({display:String(v)}));\n      const st = {\n        items,\n        left: Math.max(0, left),\n        right: Math.max(-1, right),\n        currentSum: currSum,\n        maxSum: maxSum,\n        bestRange: (maxLeft===null ? null : [maxLeft, maxRight]),\n        status: `Stage: ${stage}\\nCurrent window [${left}, ${right}] sum = ${currSum}\\nBest sum = ${maxSum}`.replace(/\\n/g,'<br>'),\n        summaryHTML: `<strong>Current Sum:</strong> ${currSum} &nbsp;&nbsp; <strong>Best Sum:</strong> ${maxSum}` ,\n        pseudocode: fixedCode(),\n        commentBlock: `Array: [${arr.join(', ')}], K = ${k}`\n      };\n      steps.push(st);\n    }\n\n    if (k > n) {\n      // immediate snapshot showing invalid\n      const items = arr.map(v=>({display:String(v)}));\n      steps.push({\n        items,\n        left: 0,\n        right: n-1,\n        currentSum: 0,\n        maxSum: 0,\n        bestRange: null,\n        status: `K (${k}) > array length (${n}). No valid window.`,\n        summaryHTML: '',\n        pseudocode: fixedCode(),\n        commentBlock: `Array: [${arr.join(', ')}], K = ${k}`\n      });\n      return steps;\n    }\n\n    // initial window\n    let windowSum = 0, maxSum = -Infinity, maxLeft = null, maxRight = null;\n    for (let i=0;i<k;i++){\n      windowSum += arr[i];\n      snap(0, i, windowSum, maxSum, maxLeft, maxRight, `Filling window (add index ${i})`);\n    }\n    maxSum = windowSum; maxLeft = 0; maxRight = k-1;\n    snap(0, k-1, windowSum, maxSum, maxLeft, maxRight, 'Initial full window ready');\n\n    // slide\n    for (let right=k; right<n; right++){\n      const leavingIndex = right-k;\n      const leavingVal = arr[leavingIndex];\n      windowSum -= leavingVal;\n      snap(leavingIndex+1, right-1, windowSum, maxSum, maxLeft, maxRight, `After removing arr[${leavingIndex}] = ${leavingVal}`);\n      windowSum += arr[right];\n      snap(leavingIndex+1, right, windowSum, maxSum, maxLeft, maxRight, `After adding arr[${right}] = ${arr[right]}`);\n      if (windowSum > maxSum) {\n        maxSum = windowSum; maxLeft = leavingIndex+1; maxRight = right;\n        snap(leavingIndex+1, right, windowSum, maxSum, maxLeft, maxRight, 'New max found');\n      } else {\n        snap(leavingIndex+1, right, windowSum, maxSum, maxLeft, maxRight, 'No new max');\n      }\n    }\n\n    // final snapshot\n    snap(maxLeft, maxRight, maxSum, maxSum, maxLeft, maxRight, 'Finished: best window');\n    return steps;\n  }\n\n  function buildVariableSteps(s, K){\n    const n = s.length;\n    const steps = [];\n    function snap(left, right, counts, bestLen, bestLeft, stage, action){\n      const items = s.split('').map(ch=>({display:ch}));\n      const st = {\n        items,\n        left: Math.max(0, left),\n        right: Math.max(-1, right),\n        counts: {...counts},\n        currentWindow: s.substring(left, right+1 || 0),\n        bestRange: (bestLeft===null ? null : [bestLeft, bestLeft+bestLen-1]),\n        status: `Stage: ${stage}<br>${action || ''}`,\n        summaryHTML: `<strong>Window:</strong> [${left}, ${right}] = \"${s.substring(left, right+1||0)}\" &nbsp;&nbsp; <strong>Distinct:</strong> ${Object.keys(counts).length} &nbsp;&nbsp; <strong>Best length:</strong> ${bestLen}`,\n        pseudocode: variableCode(),\n        commentBlock: `String: \"${s}\", K = ${K}`\n      };\n      steps.push(st);\n    }\n\n    let left = 0, right = -1;\n    let counts = {};\n    let distinct = 0;\n    let bestLen = 0, bestLeft = null;\n    snap(left, right, counts, bestLen, bestLeft, 'Start', 'Empty window');\n\n    for (right = 0; right < n; right++){\n      const ch = s[right];\n      counts[ch] = (counts[ch]||0)+1;\n      if (counts[ch] === 1) distinct++;\n      snap(left, right, counts, bestLen, bestLeft, 'Expand right', `Added '${ch}', counts: ${JSON.stringify(counts)}`);\n\n      // shrink while more than K distinct\n      while (distinct > K && left <= right){\n        const rem = s[left];\n        counts[rem]--;\n        if (counts[rem] === 0) { delete counts[rem]; distinct--; }\n        snap(left+1, right, counts, bestLen, bestLeft, 'Shrink left', `Removed '${rem}', counts: ${JSON.stringify(counts)}`);\n        left++;\n      }\n\n      // now window [left, right] has <=K distinct\n      const len = right - left + 1;\n      if (len > bestLen) {\n        bestLen = len; bestLeft = left;\n        snap(left, right, counts, bestLen, bestLeft, 'Update best', `Found longer window len=${len} at [${left},${right}]`);\n      } else {\n        snap(left, right, counts, bestLen, bestLeft, 'No update', `Window len=${len}`);\n      }\n    }\n\n    // final snapshot\n    snap(bestLeft || 0, (bestLeft===null? -1: bestLeft+bestLen-1), counts, bestLen, bestLeft, 'Finished', `Best length = ${bestLen}` );\n    return steps;\n  }\n\n  // ---------- Pseudocode content ----------\n\n  function fixedCode(){\n    return [\n      \"Fixed-size sliding window (max sum of subarray of size K):\",\n      \"\",\n      \"1. Compute sum of first K elements (windowSum).\",\n      \"2. Set maxSum = windowSum, bestRange = [0, K-1].\",\n      \"3. For right = K to n-1:\",\n      \"     - subtract arr[right-K] from windowSum (element leaving)\",\n      \"     - add arr[right] to windowSum (element entering)\",\n      \"     - if windowSum > maxSum: update maxSum and bestRange\",\n      \"\",\n      \"This runs in O(n) time and O(1) extra space.\"\n    ].join('\\\\n');\n  }\n\n  function variableCode(){\n    return [\n      \"Variable-size sliding window (longest substring with ≤ K distinct chars):\",\n      \"\",\n      \"1. left = 0, iterate right from 0 to n-1:\",\n      \"     - add s[right] to counts map\",\n      \"     - while number of distinct chars > K:\",\n      \"         - remove s[left] from counts, left++\",\n      \"     - update best length if (right - left + 1) is larger\",\n      \"\",\n      \"We expand right to grow window, and shrink left to enforce constraint.\",\n      \"Time: O(n) (each char enters/exits at most once).\"\n    ].join('\\\\n');\n  }\n\n  function showCode(txt){\n    codeArea.textContent = txt;\n  }\n\n  // initialize with default example\n  showCode(fixedCode());\n\n  // Build sample on load\n  buildSteps();\n  renderStep(0);\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Sliding Window"
    }
  ],
  "topic": "Sliding Window",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}