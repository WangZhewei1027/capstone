{
  "id": "98e19391-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:17:18.950Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Adjacency List",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\"/>\n<title>Adjacency List — Interactive Demo</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n<style>\n  :root{--bg:#f7f9fc;--panel:#ffffff;--muted:#6b7280;--accent:#2563eb;--accent-2:#1f2937}\n  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--accent-2)}\n  .app{display:grid;grid-template-columns:320px 1fr;gap:18px;padding:18px;height:100%}\n  .panel{background:var(--panel);border-radius:10px;padding:14px;box-shadow:0 2px 8px rgba(16,24,40,0.06)}\n  h2{margin:0 0 12px 0;font-size:16px}\n  label{display:block;font-size:13px;color:var(--muted);margin-top:8px}\n  input,select,button{font-size:13px;padding:8px;border-radius:8px;border:1px solid #e6e9ef;outline:none}\n  .row{display:flex;gap:8px;margin-top:8px}\n  .row input{flex:1}\n  button{background:var(--accent);color:#fff;border:none;cursor:pointer}\n  button.secondary{background:#fff;color:var(--accent);border:1px solid #dbeafe}\n  button.ghost{background:transparent;color:var(--accent-2);border:1px dashed #e6e9ef}\n  .small{padding:6px 8px;font-size:12px;border-radius:6px}\n  #svgWrap{width:100%;height:100%;display:flex;align-items:center;justify-content:center}\n  svg{width:100%;height:100%}\n  .adjList{margin-top:10px;max-height:220px;overflow:auto;font-family:monospace;background:#0f1724;color:#f8fafc;padding:10px;border-radius:8px}\n  .controls-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}\n  .legend{display:flex;gap:8px;align-items:center;margin-top:10px;color:var(--muted);font-size:13px}\n  .node-legend{width:12px;height:12px;border-radius:50%;background:var(--accent)}\n  footer{margin-top:12px;color:var(--muted);font-size:12px}\n  .nodeLabel{pointer-events:none;font-size:12px;fill:#fff;font-weight:600}\n  .edgeWeight{pointer-events:none;font-size:12px;fill:var(--accent-2)}\n  .highlight{stroke:#f59e0b;stroke-width:3px}\n</style>\n</head>\n<body>\n<div class=\"app\">\n  <div class=\"panel\" style=\"display:flex;flex-direction:column;min-height:200px\">\n    <h2>Adjacency List — Controls</h2>\n\n    <label>Graph type</label>\n    <div class=\"row\">\n      <button id=\"toggleDir\" class=\"small\">Directed: OFF</button>\n      <button id=\"clearBtn\" class=\"small ghost\">Clear</button>\n    </div>\n\n    <label style=\"margin-top:12px\">Nodes</label>\n    <div class=\"row\">\n      <input id=\"nodeName\" placeholder=\"Label (auto if empty)\" />\n      <button id=\"addNodeBtn\" class=\"small\">Add Node</button>\n    </div>\n\n    <label>Edges</label>\n    <div class=\"row\">\n      <select id=\"fromSelect\"><option value=\"\">--from--</option></select>\n      <select id=\"toSelect\"><option value=\"\">--to--</option></select>\n    </div>\n    <div class=\"row\">\n      <input id=\"edgeWeight\" placeholder=\"Weight (optional)\" />\n      <button id=\"addEdgeBtn\" class=\"small\">Add Edge</button>\n    </div>\n\n    <div class=\"controls-grid\">\n      <button id=\"randomBtn\" class=\"small secondary\">Random Graph</button>\n      <button id=\"removeEdgeBtn\" class=\"small secondary\">Remove Edge</button>\n      <button id=\"removeNodeBtn\" class=\"small secondary\">Remove Node</button>\n      <button id=\"autoLayoutBtn\" class=\"small secondary\">Re-layout</button>\n    </div>\n\n    <label style=\"margin-top:12px\">Traversals</label>\n    <div class=\"row\">\n      <select id=\"startSelect\"><option value=\"\">--start--</option></select>\n      <button id=\"bfsBtn\" class=\"small\">BFS</button>\n      <button id=\"dfsBtn\" class=\"small\">DFS</button>\n    </div>\n\n    <div class=\"legend\">\n      <div class=\"node-legend\"></div> Nodes &nbsp; • &nbsp; Edges drawn as lines (arrows show direction) &nbsp; • &nbsp; Click a node to highlight its adjacency\n    </div>\n\n    <div style=\"margin-top:auto\">\n      <h2 style=\"margin-top:12px\">Adjacency List</h2>\n      <pre id=\"adjList\" class=\"adjList\">(graph is empty)</pre>\n      <footer>Representation: node → [ {to, weight} , ... ]</footer>\n    </div>\n  </div>\n\n  <div class=\"panel\" style=\"display:flex;flex-direction:column;min-height:200px\">\n    <h2>Graph Visualization</h2>\n    <div id=\"svgWrap\">\n      <svg id=\"svg\" viewBox=\"0 0 800 600\" preserveAspectRatio=\"xMidYMid meet\">\n        <defs>\n          <marker id=\"arrow\" markerWidth=\"10\" markerHeight=\"10\" refX=\"8\" refY=\"5\" orient=\"auto\" markerUnits=\"strokeWidth\">\n            <path d=\"M0,0 L10,5 L0,10 z\" fill=\"#94a3b8\" />\n          </marker>\n          <marker id=\"arrow-highlight\" markerWidth=\"12\" markerHeight=\"12\" refX=\"10\" refY=\"6\" orient=\"auto\" markerUnits=\"strokeWidth\">\n            <path d=\"M0,0 L12,6 L0,12 z\" fill=\"#1d4ed8\" />\n          </marker>\n        </defs>\n      </svg>\n    </div>\n  </div>\n</div>\n\n<script>\n/* Adjacency List Interactive Demo\n   - Add/Remove nodes & edges\n   - Directed / Undirected toggle\n   - Visualize graph & adjacency list\n   - BFS / DFS animations\n*/\n\nconst svg = document.getElementById('svg');\nconst adjListEl = document.getElementById('adjList');\nconst fromSelect = document.getElementById('fromSelect');\nconst toSelect = document.getElementById('toSelect');\nconst startSelect = document.getElementById('startSelect');\nconst nodeNameInput = document.getElementById('nodeName');\nconst edgeWeightInput = document.getElementById('edgeWeight');\n\nlet directed = false;\nlet nodeCounter = 0;\nconst nodes = []; // {id,label,x,y}\nconst edges = []; // {from,to,weight}\nconst adj = new Map(); // id -> [{to,weight},...]\n\n// Utility\nfunction uid() { return 'n' + (++nodeCounter); }\n\nfunction addNode(label) {\n  const id = uid();\n  const nodeLabel = label && label.trim() ? label.trim() : id;\n  nodes.push({id,label:nodeLabel,x:0,y:0});\n  adj.set(id, []);\n  layoutNodes();\n  refreshUI();\n  return id;\n}\n\nfunction removeNode(id){\n  // remove from nodes array\n  const idx = nodes.findIndex(n=>n.id===id);\n  if(idx===-1) return;\n  nodes.splice(idx,1);\n  adj.delete(id);\n  // remove edges referencing id\n  for(let i=edges.length-1;i>=0;i--){\n    if(edges[i].from===id || edges[i].to===id) edges.splice(i,1);\n  }\n  // also remove adjacency entries pointing to id\n  for(const [k,list] of adj.entries()){\n    adj.set(k, list.filter(e=>e.to!==id));\n  }\n  refreshUI();\n}\n\nfunction addEdge(from,to,weight){\n  if(!from||!to) return;\n  if(!adj.has(from) || !adj.has(to)) return;\n  // prevent duplicate edges\n  if(edges.some(e=>e.from===from && e.to===to && String(e.weight)===String(weight))) return;\n  edges.push({from,to,weight});\n  adj.get(from).push({to,weight});\n  if(!directed){\n    // undirected add symmetric\n    if(!adj.get(to).some(e=>e.to===from && String(e.weight)===String(weight))){\n      edges.push({from:to,to:from,weight});\n      adj.get(to).push({to:from,weight});\n    }\n  }\n  refreshUI();\n}\n\nfunction removeEdge(from,to){\n  for(let i=edges.length-1;i>=0;i--){\n    if(edges[i].from===from && edges[i].to===to) edges.splice(i,1);\n  }\n  if(adj.has(from)){\n    adj.set(from, adj.get(from).filter(e=>e.to!==to));\n  }\n  if(!directed){\n    for(let i=edges.length-1;i>=0;i--){\n      if(edges[i].from===to && edges[i].to===from) edges.splice(i,1);\n    }\n    if(adj.has(to)){\n      adj.set(to, adj.get(to).filter(e=>e.to!==from));\n    }\n  }\n  refreshUI();\n}\n\nfunction clearGraph(){\n  nodes.length = 0;\n  edges.length = 0;\n  adj.clear();\n  nodeCounter = 0;\n  refreshUI();\n}\n\nfunction layoutNodes(){\n  // simple circular layout\n  const R = 220;\n  const cx = 400, cy = 280;\n  const n = nodes.length;\n  for(let i=0;i<n;i++){\n    const a = (i/n) * Math.PI * 2 - Math.PI/2;\n    nodes[i].x = cx + Math.cos(a) * R;\n    nodes[i].y = cy + Math.sin(a) * R;\n  }\n}\n\nfunction refreshUI(){\n  // update selects\n  [fromSelect,toSelect,startSelect].forEach(sel=>{\n    const cur = sel.value;\n    sel.innerHTML = '<option value=\"\">--</option>';\n    for(const node of nodes){\n      const opt = document.createElement('option');\n      opt.value = node.id; opt.textContent = node.label + ' ('+node.id+')';\n      sel.appendChild(opt);\n    }\n    if(cur) sel.value = cur;\n  });\n  // adjacency map might be missing symmetric edges if toggle changed; recreate from edges\n  // Rebuild adj from nodes & edges (preferred)\n  adj.clear();\n  for(const node of nodes) adj.set(node.id,[]);\n  for(const e of edges){\n    if(adj.has(e.from)) adj.get(e.from).push({to:e.to,weight:e.weight});\n  }\n  drawGraph();\n  renderAdjList();\n}\n\nfunction drawGraph(highlightNodes = [], highlightEdges = []) {\n  // highlightNodes: array of node ids, highlightEdges: [{from,to}]\n  while(svg.lastChild) svg.removeChild(svg.lastChild);\n  // re-add defs\n  const defs = document.createElementNS('http://www.w3.org/2000/svg','defs');\n  defs.innerHTML = `\n    <marker id=\"arrow\" markerWidth=\"10\" markerHeight=\"10\" refX=\"8\" refY=\"5\" orient=\"auto\" markerUnits=\"strokeWidth\">\n      <path d=\"M0,0 L10,5 L0,10 z\" fill=\"#94a3b8\" />\n    </marker>\n    <marker id=\"arrow-highlight\" markerWidth=\"12\" markerHeight=\"12\" refX=\"10\" refY=\"6\" orient=\"auto\" markerUnits=\"strokeWidth\">\n      <path d=\"M0,0 L12,6 L0,12 z\" fill=\"#1d4ed8\" />\n    </marker>\n  `;\n  svg.appendChild(defs);\n\n  // draw edges (z-order below nodes)\n  const drawn = new Set();\n  for(const e of edges){\n    const key = e.from+'->'+e.to;\n    // For undirected graphs we have symmetric edges; avoid drawing duplicate (draw only when from id < to id)\n    if(!directed){\n      const mirrorKey = e.to+'->'+e.from;\n      if(drawn.has(mirrorKey)) continue;\n      drawn.add(key);\n    }\n\n    const from = nodes.find(n=>n.id===e.from);\n    const to = nodes.find(n=>n.id===e.to);\n    if(!from || !to) continue;\n\n    // if self-loop\n    if(from.id === to.id){\n      const g = document.createElementNS('http://www.w3.org/2000/svg','g');\n      const loop = document.createElementNS('http://www.w3.org/2000/svg','path');\n      const r = 26;\n      const x = from.x, y=from.y;\n      loop.setAttribute('d', `M ${x} ${y-r} C ${x-60} ${y-r-60} ${x+60} ${y-r-60} ${x} ${y-r}`);\n      loop.setAttribute('stroke', highlightEdges.some(h=>h.from===from.id && h.to===to.id) ? '#1d4ed8' : '#94a3b8');\n      loop.setAttribute('fill','none');\n      loop.setAttribute('stroke-width','2');\n      loop.setAttribute('marker-end', directed ? 'url(#arrow)' : '');\n      g.appendChild(loop);\n      // label\n      if(e.weight !== undefined && e.weight !== null && e.weight!==''){\n        const text = document.createElementNS('http://www.w3.org/2000/svg','text');\n        text.setAttribute('x', x+6);\n        text.setAttribute('y', y - r - 8);\n        text.setAttribute('class','edgeWeight');\n        text.textContent = e.weight;\n        g.appendChild(text);\n      }\n      svg.appendChild(g);\n      continue;\n    }\n\n    // draw a straight line; for aesthetics offset for parallel edges in undirected (small offset)\n    const dx = to.x - from.x, dy = to.y - from.y;\n    const len = Math.hypot(dx,dy);\n    const nx = dx/len, ny = dy/len;\n    const pad = 22; // node radius\n    const sx = from.x + nx*pad, sy = from.y + ny*pad;\n    const tx = to.x - nx*pad, ty = to.y - ny*pad;\n\n    const line = document.createElementNS('http://www.w3.org/2000/svg','line');\n    line.setAttribute('x1',sx); line.setAttribute('y1',sy);\n    line.setAttribute('x2',tx); line.setAttribute('y2',ty);\n    const isHighlighted = highlightEdges.some(h=>h.from===e.from && h.to===e.to)\n                         || (!directed && (highlightEdges.some(h=>h.from===e.to && h.to===e.from)));\n    line.setAttribute('stroke', isHighlighted ? '#1d4ed8' : '#94a3b8');\n    line.setAttribute('stroke-width', isHighlighted ? 3 : 2);\n    if(directed){\n      line.setAttribute('marker-end', isHighlighted ? 'url(#arrow-highlight)' : 'url(#arrow)');\n    }\n    svg.appendChild(line);\n\n    // edge weight label at midpoint\n    if(e.weight !== undefined && e.weight !== null && e.weight!==''){\n      const mx = (sx+tx)/2, my = (sy+ty)/2;\n      const text = document.createElementNS('http://www.w3.org/2000/svg','text');\n      text.setAttribute('x', mx + (-ny)*10);\n      text.setAttribute('y', my + (nx)*10);\n      text.setAttribute('class','edgeWeight');\n      text.textContent = e.weight;\n      svg.appendChild(text);\n    }\n  }\n\n  // draw nodes\n  for(const node of nodes){\n    const g = document.createElementNS('http://www.w3.org/2000/svg','g');\n    g.setAttribute('transform', `translate(${node.x},${node.y})`);\n    g.style.cursor = 'pointer';\n\n    const circ = document.createElementNS('http://www.w3.org/2000/svg','circle');\n    circ.setAttribute('r',22);\n    const isNodeHighlighted = highlightNodes.includes(node.id);\n    circ.setAttribute('fill', isNodeHighlighted ? '#1d4ed8' : '#2563eb');\n    circ.setAttribute('stroke', isNodeHighlighted ? '#f59e0b' : '#0b1220');\n    circ.setAttribute('stroke-width', isNodeHighlighted ? 3 : 0);\n    circ.setAttribute('data-id', node.id);\n    g.appendChild(circ);\n\n    const text = document.createElementNS('http://www.w3.org/2000/svg','text');\n    text.setAttribute('class','nodeLabel');\n    text.setAttribute('x',0); text.setAttribute('y',6);\n    text.setAttribute('text-anchor','middle');\n    text.textContent = node.label;\n    g.appendChild(text);\n\n    // interaction\n    g.addEventListener('click',(ev)=>{\n      ev.stopPropagation();\n      onNodeClick(node.id);\n    });\n    svg.appendChild(g);\n  }\n}\n\nfunction renderAdjList(){\n  if(nodes.length===0){\n    adjListEl.textContent = '(graph is empty)';\n    return;\n  }\n  let out = '';\n  for(const node of nodes){\n    const list = adj.get(node.id) || [];\n    const entries = list.map(e=> `{to:${e.to}${e.weight!=='' && e.weight!==undefined && e.weight!==null ? ', w:'+JSON.stringify(e.weight):''}}`);\n    out += `${node.id} (${node.label}) -> [ ${entries.join(', ')} ]\\n`;\n  }\n  adjListEl.textContent = out;\n}\n\n// node click -> highlight adjacency\nfunction onNodeClick(id){\n  const list = adj.get(id) || [];\n  const outs = list.map(e=>e.to);\n  const highlightsEdges = list.map(e=>({from:id,to:e.to}));\n  drawGraph([id, ...outs], highlightsEdges);\n}\n\n// Traversals\nasync function animateSequence(seq){\n  for(const id of seq){\n    drawGraph([id], []);\n    await new Promise(r=>setTimeout(r,650));\n  }\n  // flash all\n  drawGraph([],[]);\n}\n\nfunction bfs(start){\n  if(!start) return [];\n  const q = [start];\n  const seen = new Set([start]);\n  const order = [];\n  while(q.length){\n    const u = q.shift(); order.push(u);\n    for(const e of (adj.get(u)||[])){\n      if(!seen.has(e.to)){\n        seen.add(e.to);\n        q.push(e.to);\n      }\n    }\n  }\n  return order;\n}\n\nfunction dfs(start){\n  if(!start) return [];\n  const seen = new Set();\n  const order = [];\n  function visit(u){\n    seen.add(u); order.push(u);\n    for(const e of (adj.get(u)||[])){\n      if(!seen.has(e.to)) visit(e.to);\n    }\n  }\n  visit(start);\n  return order;\n}\n\n// UI wiring\ndocument.getElementById('addNodeBtn').addEventListener('click', ()=>{\n  addNode(nodeNameInput.value);\n  nodeNameInput.value='';\n});\n\ndocument.getElementById('addEdgeBtn').addEventListener('click', ()=>{\n  const f = fromSelect.value, t = toSelect.value;\n  if(!f || !t){ alert('Choose both endpoints'); return; }\n  addEdge(f,t,edgeWeightInput.value.trim());\n  edgeWeightInput.value='';\n});\n\ndocument.getElementById('removeEdgeBtn').addEventListener('click', ()=>{\n  const f = fromSelect.value, t = toSelect.value;\n  if(!f || !t){ alert('Choose both endpoints'); return; }\n  removeEdge(f,t);\n});\n\ndocument.getElementById('removeNodeBtn').addEventListener('click', ()=>{\n  const id = fromSelect.value || toSelect.value || startSelect.value;\n  if(!id){ alert('Choose a node to remove'); return; }\n  if(!confirm('Remove node ' + id + ' and all incident edges?')) return;\n  removeNode(id);\n});\n\ndocument.getElementById('clearBtn').addEventListener('click', ()=>{\n  if(!confirm('Clear the entire graph?')) return;\n  clearGraph();\n});\n\ndocument.getElementById('toggleDir').addEventListener('click', ()=>{\n  directed = !directed;\n  document.getElementById('toggleDir').textContent = 'Directed: ' + (directed ? 'ON' : 'OFF');\n  // When switching from directed to undirected, ensure symmetric edges exist\n  if(!directed){\n    // create symmetric pairs\n    const newEdges = [];\n    for(const e of edges){\n      newEdges.push({...e});\n      const existsMirror = edges.some(x=>x.from===e.to && x.to===e.from && String(x.weight)===String(e.weight));\n      if(!existsMirror){\n        newEdges.push({from:e.to,to:e.from,weight:e.weight});\n      }\n    }\n    edges.length = 0;\n    for(const e of newEdges) edges.push(e);\n  } else {\n    // if switching to directed, we keep existing edges as-is (may include both directions)\n  }\n  refreshUI();\n});\n\ndocument.getElementById('randomBtn').addEventListener('click', ()=>{\n  // small random graph\n  clearGraph();\n  const N = Math.floor(Math.random()*5)+4;\n  const ids = [];\n  for(let i=0;i<N;i++) ids.push(addNode(('v'+(i+1))));\n  const M = Math.floor(Math.random()*(N*(N-1)/2))+N;\n  for(let i=0;i<M;i++){\n    const a = ids[Math.floor(Math.random()*ids.length)];\n    const b = ids[Math.floor(Math.random()*ids.length)];\n    if(a===b) continue;\n    addEdge(a,b, Math.random()<0.6 ? Math.floor(Math.random()*10) : '');\n  }\n  layoutNodes();\n  refreshUI();\n});\n\ndocument.getElementById('autoLayoutBtn').addEventListener('click', ()=>{\n  layoutNodes();\n  refreshUI();\n});\n\ndocument.getElementById('bfsBtn').addEventListener('click', async ()=>{\n  const s = startSelect.value;\n  if(!s){ alert('Choose a start node'); return; }\n  const order = bfs(s);\n  await animateSequence(order);\n});\n\ndocument.getElementById('dfsBtn').addEventListener('click', async ()=>{\n  const s = startSelect.value;\n  if(!s){ alert('Choose a start node'); return; }\n  const order = dfs(s);\n  await animateSequence(order);\n});\n\n// click background to reset drawing\nsvg.addEventListener('click', ()=>drawGraph([],[]));\n\n// initialize with example graph\n(function seed(){\n  addNode('A'); addNode('B'); addNode('C'); addNode('D'); addNode('E');\n  const ids = nodes.map(n=>n.id);\n  addEdge(ids[0], ids[1], 5);\n  addEdge(ids[0], ids[2], '');\n  addEdge(ids[1], ids[2], 3);\n  addEdge(ids[2], ids[3], 1);\n  addEdge(ids[3], ids[4], '');\n  addEdge(ids[4], ids[0], 2);\n  layoutNodes();\n  refreshUI();\n  drawGraph([],[]);\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Adjacency List"
    }
  ],
  "topic": "Adjacency List",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}