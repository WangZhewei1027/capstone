{
  "id": "d7b461a0-d5c2-11f0-9651-0f1ae31ac260",
  "timestamp": "2025-12-10T12:24:17.176Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Huffman Coding",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Huffman Coding Demonstration</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 30px;\n    max-width: 900px;\n  }\n  h1 {\n    text-align: center;\n  }\n  textarea {\n    width: 100%;\n    height: 80px;\n    font-family: monospace;\n    font-size: 16px;\n  }\n  button {\n    margin-top: 10px;\n    font-size: 16px;\n    padding: 8px 15px;\n    cursor: pointer;\n  }\n  .section {\n    margin-top: 25px;\n    border: 1px solid #ddd;\n    padding: 15px;\n    border-radius: 6px;\n  }\n  table {\n    border-collapse: collapse;\n    width: 100%;\n    max-width: 400px;\n  }\n  th, td {\n    border: 1px solid #aaa;\n    padding: 6px 8px;\n    text-align: center;\n  }\n  th {\n    background-color: #f0f0f0;\n  }\n  .tree-node {\n    border: 1px solid #666;\n    border-radius: 6px;\n    padding: 6px 10px;\n    display: inline-block;\n    margin: 6px;\n    position: relative;\n    background: #eef6fc;\n    font-weight: bold;\n  }\n  .tree-children {\n    display: flex;\n    justify-content: center;\n    margin-top: 20px;\n  }\n  .tree-children > div {\n    flex: 1;\n  }\n  .line-down {\n    position: absolute;\n    left: 50%;\n    bottom: -20px;\n    width: 2px;\n    height: 20px;\n    background: #666;\n  }\n  .line-right {\n    position: absolute;\n    top: 20px;\n    left: 50%;\n    height: 2px;\n    width: 50%;\n    background: #666;\n  }\n  .line-left {\n    position: absolute;\n    top: 20px;\n    left: 0;\n    height: 2px;\n    width: 50%;\n    background: #666;\n  }\n  .code-text {\n    font-family: monospace;\n    background: #f8f8f8;\n    padding: 6px 10px;\n    border-radius: 4px;\n    white-space: nowrap;\n    margin-top: 6px;\n    display: inline-block;\n  }\n  .highlight {\n    background-color: #ffffcc;\n  }\n  .error {\n    color: red;\n    font-weight: bold;\n    margin-top: 5px;\n  }\n  .footer {\n    margin-top: 40px;\n    font-size: 0.9em;\n    color: #666;\n    text-align: center;\n  }\n</style>\n</head>\n<body>\n<h1>Huffman Coding Demonstration</h1>\n<p>Enter text below to see Huffman coding compression steps including frequency, tree, codes, encoded string, and decoded result.</p>\n\n<textarea id=\"inputText\" placeholder=\"Type your text here... (e.g. hello huffman)\"></textarea>\n<br />\n<button id=\"compressBtn\">Encode and Decode</button>\n<div id=\"errorMsg\" class=\"error\" role=\"alert\" aria-live=\"assertive\"></div>\n\n<div id=\"output\" class=\"section\" aria-live=\"polite\" aria-atomic=\"true\" style=\"display:none;\">\n  <h2>Frequencies</h2>\n  <table aria-describedby=\"freqDesc\">\n    <caption id=\"freqDesc\">Frequency of each character in the input.</caption>\n    <thead><tr><th>Character</th><th>Frequency</th></tr></thead>\n    <tbody id=\"freqTableBody\"></tbody>\n  </table>\n\n  <h2>Huffman Tree Visualization</h2>\n  <div id=\"treeContainer\" aria-label=\"Huffman Tree visualization\"></div>\n\n  <h2>Huffman Codes</h2>\n  <table aria-describedby=\"codeDesc\">\n    <caption id=\"codeDesc\">Codeword assigned to each character</caption>\n    <thead><tr><th>Character</th><th>Code</th></tr></thead>\n    <tbody id=\"codesTableBody\"></tbody>\n  </table>\n\n  <h2>Encoded Binary String</h2>\n  <pre id=\"encodedString\" style=\"max-height: 160px; overflow-x: auto; background:#f0f0f0; padding:10px; border-radius:4px;\"></pre>\n\n  <h2>Decoded Text</h2>\n  <pre id=\"decodedString\" style=\"background:#f0f0f0; padding:10px; border-radius:4px;\"></pre>\n</div>\n\n<script>\n(() => {\n  const inputTextElem = document.getElementById('inputText');\n  const compressBtn = document.getElementById('compressBtn');\n  const freqTableBody = document.getElementById('freqTableBody');\n  const codesTableBody = document.getElementById('codesTableBody');\n  const encodedStringElem = document.getElementById('encodedString');\n  const decodedStringElem = document.getElementById('decodedString');\n  const treeContainer = document.getElementById('treeContainer');\n  const outputSection = document.getElementById('output');\n  const errorMsg = document.getElementById('errorMsg');\n\n  /**\n   * Build frequency map from input string.\n   * @param {string} str \n   * @returns {Map<string, number>}\n   */\n  function buildFrequency(str) {\n    const freq = new Map();\n    for (const char of str) {\n      freq.set(char, (freq.get(char) || 0) + 1);\n    }\n    return freq;\n  }\n\n  /**\n   * Huffman Tree Node class\n   */\n  class Node {\n    constructor(char, freq, left = null, right = null) {\n      this.char = char;\n      this.freq = freq;\n      this.left = left;\n      this.right = right;\n    }\n  }\n\n  /**\n   * Build Huffman tree given frequency map\n   * @param {Map<string, number>} freqMap\n   * @returns {Node} root of Huffman tree\n   */\n  function buildHuffmanTree(freqMap) {\n    const nodes = [];\n    for (const [char, freq] of freqMap) {\n      nodes.push(new Node(char, freq));\n    }\n\n    // Edge case: if only one character, create a dummy node\n    if (nodes.length === 1) {\n      const onlyNode = nodes[0];\n      return new Node(null, onlyNode.freq, onlyNode, null);\n    }\n\n    // Build the tree by always merging two smallest nodes\n    while (nodes.length > 1) {\n      nodes.sort((a,b) => a.freq - b.freq);\n      const left = nodes.shift();\n      const right = nodes.shift();\n      const merged = new Node(null, left.freq + right.freq, left, right);\n      nodes.push(merged);\n    }\n    return nodes[0];\n  }\n\n  /**\n   * Traverse tree to generate code map char=>code\n   * @param {Node} root \n   * @returns {Map<string,string>}\n   */\n  function generateCodes(root) {\n    const codes = new Map();\n    function traverse(node, prefix) {\n      if (!node) return;\n      if (node.char !== null) {\n        codes.set(node.char, prefix || '0'); // if only one char, assign '0'\n        return;\n      }\n      traverse(node.left, prefix + '0');\n      traverse(node.right, prefix + '1');\n    }\n    traverse(root, '');\n    return codes;\n  }\n\n  /**\n   * Encode input string using codes map\n   * @param {string} input \n   * @param {Map<string,string>} codes \n   * @returns {string}\n   */\n  function encode(input, codes) {\n    let result = '';\n    for (const ch of input) {\n      result += codes.get(ch);\n    }\n    return result;\n  }\n\n  /**\n   * Decode bit string using Huffman tree\n   * @param {string} bitStr \n   * @param {Node} root \n   * @returns {string}\n   */\n  function decode(bitStr, root) {\n    let result = '';\n    let curr = root;\n    for (const bit of bitStr) {\n      curr = bit === '0' ? curr.left : curr.right;\n      if (!curr.left && !curr.right) { // leaf node\n        result += curr.char;\n        curr = root;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Utility to escape special HTML characters for table display\n   * @param {string} s \n   * @returns {string}\n   */\n  function escapeHtml(s) {\n    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\\s/g, c => {\n      if(c === ' ') return '&nbsp;';\n      if(c === '\\n') return '<br>';\n      return c;\n    });\n  }\n\n  /**\n   * Render frequency table\n   * @param {Map<string, number>} freqMap \n   */\n  function renderFrequencies(freqMap) {\n    freqTableBody.innerHTML = '';\n    // Sort by frequency descending, then char ascending\n    const entries = Array.from(freqMap.entries()).sort((a,b) => b[1] - a[1] || a[0].localeCompare(b[0]));\n    for (const [char, freq] of entries) {\n      const tr = document.createElement('tr');\n      const charTd = document.createElement('td');\n      charTd.innerHTML = char === ' ' ? '<i>space</i>': escapeHtml(char);\n      const freqTd = document.createElement('td');\n      freqTd.textContent = freq;\n      tr.appendChild(charTd);\n      tr.appendChild(freqTd);\n      freqTableBody.appendChild(tr);\n    }\n  }\n\n  /**\n   * Render codes table\n   * @param {Map<string,string>} codes \n   */\n  function renderCodes(codes) {\n    codesTableBody.innerHTML = '';\n    // Sort by char utf16 code for consistency\n    const entries = Array.from(codes.entries()).sort((a,b) => a[0].localeCompare(b[0]));\n    for (const [char, code] of entries) {\n      const tr = document.createElement('tr');\n      const charTd = document.createElement('td');\n      charTd.innerHTML = char === ' ' ? '<i>space</i>' : escapeHtml(char);\n      const codeTd = document.createElement('td');\n      codeTd.textContent = code;\n      tr.appendChild(charTd);\n      tr.appendChild(codeTd);\n      codesTableBody.appendChild(tr);\n    }\n  }\n\n  /**\n   * Visualize the Huffman tree in the container\n   * @param {Node} root\n   */\n  function renderTree(root) {\n    treeContainer.innerHTML = '';\n\n    /**\n     * Recursive function to create node elements\n     * @param {Node} node \n     * @returns {HTMLElement}\n     */\n    function createNodeElement(node) {\n      const nodeDiv = document.createElement('div');\n      nodeDiv.classList.add('tree-node');\n      let label;\n      if (node.char === null) {\n        label = `* (${node.freq})`;\n      } else {\n        const displayChar = node.char === ' ' ? 'space' : node.char;\n        label = `'${displayChar}' (${node.freq})`;\n      }\n      nodeDiv.textContent = label;\n\n      // If leaf, no children\n      if (!node.left && !node.right) return nodeDiv;\n\n      const childrenCont = document.createElement('div');\n      childrenCont.classList.add('tree-children');\n\n      if (node.left) {\n        const leftChild = createNodeElement(node.left);\n        // Line connectors\n        leftChild.style.position = 'relative';\n        const lineDownLeft = document.createElement('div');\n        lineDownLeft.classList.add('line-down');\n        leftChild.appendChild(lineDownLeft);\n        childrenCont.appendChild(leftChild);\n      } else {\n        const emptyDiv = document.createElement('div');\n        childrenCont.appendChild(emptyDiv);\n      }\n      if (node.right) {\n        const rightChild = createNodeElement(node.right);\n        rightChild.style.position = 'relative';\n        const lineDownRight = document.createElement('div');\n        lineDownRight.classList.add('line-down');\n        rightChild.appendChild(lineDownRight);\n        childrenCont.appendChild(rightChild);\n      } else {\n        const emptyDiv = document.createElement('div');\n        childrenCont.appendChild(emptyDiv);\n      }\n\n      nodeDiv.appendChild(childrenCont);\n\n      return nodeDiv;\n    }\n\n    treeContainer.appendChild(createNodeElement(root));\n  }\n\n  compressBtn.addEventListener('click', () => {\n    errorMsg.textContent = '';\n    outputSection.style.display = 'none';\n\n    const input = inputTextElem.value;\n    if (!input) {\n      errorMsg.textContent = 'Please input some text to encode.';\n      return;\n    }\n\n    const freqMap = buildFrequency(input);\n    if (freqMap.size === 0) {\n      errorMsg.textContent = 'Input text does not contain valid characters.';\n      return;\n    }\n\n    // Build tree\n    const treeRoot = buildHuffmanTree(freqMap);\n    // Generate codes\n    const codeMap = generateCodes(treeRoot);\n\n    // Encode\n    const encoded = encode(input, codeMap);\n\n    // Decode\n    const decoded = decode(encoded, treeRoot);\n\n    // Show frequencies\n    renderFrequencies(freqMap);\n\n    // Show codes\n    renderCodes(codeMap);\n\n    // Show tree\n    renderTree(treeRoot);\n\n    // Show encoded string (break lines for easier reading)\n    // Group bits in blocks of 8 for readability\n    let presentedEncoded = '';\n    for(let i=0; i<encoded.length; i++) {\n      presentedEncoded += encoded[i];\n      if ((i+1) % 8 === 0) presentedEncoded += ' ';\n      if ((i+1) % 64 === 0) presentedEncoded += '\\n';\n    }\n    encodedStringElem.textContent = presentedEncoded.trim();\n\n    // Show decoded string\n    decodedStringElem.textContent = decoded;\n\n    outputSection.style.display = 'block';\n  });\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Huffman Coding"
    }
  ],
  "topic": "Huffman Coding",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}