{
  "id": "d79ceec0-d361-11f0-8438-11a56595a476",
  "timestamp": "2025-12-07T11:44:06.493Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Counting Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Counting Sort Demonstration</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 2rem;\n    background: #f9f9f9;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  label, button {\n    font-weight: bold;\n  }\n  input[type=\"text\"] {\n    width: 80%;\n    font-size: 1.1rem;\n    padding: 0.5rem;\n    margin: 0.5rem 0 1rem 0;\n  }\n  button {\n    padding: 0.6rem 1rem;\n    margin-bottom: 1.5rem;\n    cursor: pointer;\n    background-color: #0078d7;\n    color: white;\n    border: none;\n    border-radius: 4px;\n  }\n  button:hover {\n    background-color: #005a9e;\n  }\n  .result-section {\n    background: white;\n    border-radius: 8px;\n    padding: 1rem;\n    box-shadow: 0 0 10px #ccc;\n    max-width: 1000px;\n    margin: 0 auto;\n  }\n  pre {\n    background: #eee;\n    padding: 0.5rem;\n    border-radius: 4px;\n    overflow-x: auto;\n  }\n  .array-display {\n    font-family: 'Courier New', Courier, monospace;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    margin-bottom: 1rem;\n  }\n  .step {\n    margin-bottom: 1rem;\n    border-left: 4px solid #0078d7;\n    padding-left: 1rem;\n    background: #f0f8ff;\n    border-radius: 4px;\n  }\n  footer {\n    margin-top: 3rem;\n    text-align: center;\n    font-size: 0.9rem;\n    color: #666;\n  }\n  .error {\n    color: red;\n    margin-bottom: 1rem;\n    font-weight: bold;\n  }\n</style>\n</head>\n<body>\n<h1>Counting Sort Visualization</h1>\n<div class=\"result-section\">\n  <label for=\"inputArray\">Enter integers separated by commas or spaces:</label><br />\n  <input type=\"text\" id=\"inputArray\" placeholder=\"e.g. 4, 2, 2, 8, 3, 3, 1\" />\n  <br />\n  <button id=\"sortButton\">Sort using Counting Sort</button>\n  <div id=\"errorMsg\" class=\"error\" aria-live=\"assertive\"></div>\n  <div id=\"output\"></div>\n</div>\n\n<script>\n  function parseInput(input) {\n    // Split by comma or whitespace, remove empty entries\n    return input.split(/[\\s,]+/)\n      .map(s => s.trim())\n      .filter(s => s.length > 0)\n      .map(n => Number(n));\n  }\n\n  function validateArray(arr) {\n    // Check all are finite integers\n    for (let n of arr) {\n      if (!Number.isInteger(n) || !isFinite(n)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  function countingSort(arr, outputCallback) {\n    if (arr.length === 0) return [];\n\n    const min = Math.min(...arr);\n    const max = Math.max(...arr);\n\n    outputCallback(`Input array: [${arr.join(', ')}]`);\n    outputCallback(`Range of values: min = ${min}, max = ${max}`);\n\n    // Initialize count array\n    const range = max - min + 1;\n    let count = new Array(range).fill(0);\n    outputCallback(`Initialized count array with size ${range} (all zeros):`);\n    outputCallback(count);\n\n    // Store the count of each element\n    for (let i = 0; i < arr.length; i++) {\n      count[arr[i] - min]++;\n      outputCallback(`Increment count for value ${arr[i]}: count[${arr[i] - min}] = ${count[arr[i] - min]}`);\n    }\n    outputCallback(`Count array after counting elements:`);\n    outputCallback(count);\n\n    // Change count[i] so that count[i] now contains actual position of this element in output array\n    for (let i = 1; i < count.length; i++) {\n      count[i] += count[i - 1];\n      outputCallback(`Prefix sum step ${i}: count[${i}] = count[${i}] + count[${i-1}] -> ${count[i]}`);\n    }\n    outputCallback(`Count array after prefix sums:`);\n    outputCallback(count);\n\n    // Build the output array\n    let output = new Array(arr.length);\n    // We go backwards to make the sort stable\n    for (let i = arr.length - 1; i >= 0; i--) {\n      let current = arr[i];\n      count[current - min]--;\n      let pos = count[current - min];\n      output[pos] = current;\n      outputCallback(`Place element ${current} at output[${pos}]`);\n    }\n\n    outputCallback(`Sorted array: [${output.join(', ')}]`);\n    return output;\n  }\n\n  // To nicely print arrays and messages in output div\n  function appendMessage(msg) {\n    const outDiv = document.getElementById('output');\n    let el = document.createElement('div');\n    el.classList.add('step');\n    if (Array.isArray(msg)) {\n      el.textContent = `[${msg.join(', ')}]`;\n    } else {\n      el.textContent = msg;\n    }\n    outDiv.appendChild(el);\n    // Scroll to bottom\n    outDiv.scrollTop = outDiv.scrollHeight;\n  }\n\n  document.getElementById('sortButton').addEventListener('click', () => {\n    const input = document.getElementById('inputArray').value;\n    const errorMsg = document.getElementById('errorMsg');\n    errorMsg.textContent = '';\n    const outputDiv = document.getElementById('output');\n    outputDiv.innerHTML = '';\n\n    if (!input.trim()) {\n      errorMsg.textContent = 'Please enter some integers.';\n      return;\n    }\n\n    let arr = parseInput(input);\n\n    if (!validateArray(arr)) {\n      errorMsg.textContent = 'Input must be integers only.';\n      return;\n    }\n\n    // If large range, warn user\n    const min = Math.min(...arr);\n    const max = Math.max(...arr);\n    if (max - min > 100000) {\n      if (!confirm(`Warning: Large range (${max - min}) may cause performance issues. Continue?`)) {\n        return;\n      }\n    }\n\n    countingSort(arr, appendMessage);\n  });\n</script>\n<footer>\n  &copy; 2024 Counting Sort Demo\n</footer>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Counting Sort"
    }
  ],
  "topic": "Counting Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}