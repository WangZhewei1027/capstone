{
  "id": "d79dd922-d361-11f0-8438-11a56595a476",
  "timestamp": "2025-12-07T11:44:14.895Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Sliding Window",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Sliding Window Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f0f2f5;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  #arrayContainer {\n    display: flex;\n    justify-content: center;\n    margin: 30px 0;\n    flex-wrap: wrap;\n    max-width: 600px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  .array-element {\n    width: 40px;\n    height: 40px;\n    border: 2px solid #888;\n    margin: 2px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-weight: 600;\n    font-size: 18px;\n    border-radius: 6px;\n    transition: background-color 0.3s ease, border-color 0.3s ease;\n    user-select: none;\n  }\n  .in-window {\n    background-color: #4a90e2;\n    color: white;\n    border-color: #2a5cad;\n  }\n  .current-max {\n    background-color: #ff9500;\n    border-color: #cc7a00;\n    color: white;\n  }\n  #controls {\n    text-align: center;\n    margin: 20px 0;\n  }\n  label {\n    margin-right: 10px;\n    font-weight: 600;\n  }\n  input[type=\"text\"], input[type=\"number\"] {\n    padding: 5px 8px;\n    font-size: 16px;\n    width: 200px;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n    margin-right: 20px;\n  }\n  button {\n    font-size: 16px;\n    padding: 8px 15px;\n    border-radius: 5px;\n    border: none;\n    background-color: #4a90e2;\n    color: white;\n    cursor: pointer;\n    transition: background-color 0.25s ease;\n  }\n  button:disabled {\n    background-color: #a0b9db;\n    cursor: not-allowed;\n  }\n  button:hover:not(:disabled) {\n    background-color: #3a78c2;\n  }\n  #result {\n    max-width: 600px;\n    margin: 20px auto;\n    background: white;\n    border-radius: 8px;\n    padding: 15px 20px;\n    box-shadow: 0 2px 7px rgba(0,0,0,0.1);\n  }\n  #explanation {\n    max-width: 600px;\n    margin: 30px auto 0;\n    font-style: italic;\n    color: #555;\n  }\n</style>\n</head>\n<body>\n<h1>Sliding Window Maximum Visualization</h1>\n<div id=\"controls\">\n  <label for=\"arrayInput\">Array (comma-separated integers):</label>\n  <input type=\"text\" id=\"arrayInput\" value=\"2,1,3,4,6,3,8,9,10,12,56\" />\n  <label for=\"windowSize\">Window size (k):</label>\n  <input type=\"number\" id=\"windowSize\" min=\"1\" value=\"4\" />\n  <button id=\"startBtn\">Start Visualization</button>\n</div>\n\n<div id=\"arrayContainer\" aria-live=\"polite\" aria-label=\"Array visualization\"></div>\n\n<div id=\"result\" aria-live=\"polite\" aria-atomic=\"true\"></div>\n\n<div id=\"explanation\">\n  <strong>What is Sliding Window Maximum?</strong><br/>\n  Given an array and a window size k, for each contiguous subarray of length k, find the maximum value. This visualization slides a window across the array, showing the current window elements and the maximum inside it.\n</div>\n\n<script>\n  (() => {\n    const arrayInput = document.getElementById('arrayInput');\n    const windowInput = document.getElementById('windowSize');\n    const startBtn = document.getElementById('startBtn');\n    const container = document.getElementById('arrayContainer');\n    const result = document.getElementById('result');\n\n    let array = [];\n    let k = 0;\n    let currentIndex = 0;\n    let intervalId = null;\n\n    // Helper to clear container and redraw array elements with highlighting\n    function drawArrayHighlightWindow(arr, windowStart, windowEnd, maxIndices=[]) {\n      container.innerHTML = '';\n      for(let i=0; i<arr.length; i++) {\n        const el = document.createElement('div');\n        el.className = 'array-element';\n        el.textContent = arr[i];\n        if(i >= windowStart && i <= windowEnd) {\n          el.classList.add('in-window');\n        }\n        if(maxIndices.includes(i)) {\n          el.classList.add('current-max');\n          // Put aria label for screen readers\n          el.setAttribute('aria-label', `${arr[i]} (maximum in current window)`);\n        } else {\n          el.removeAttribute('aria-label');\n        }\n        container.appendChild(el);\n      }\n    }\n\n    // Sliding window maximum algorithm with deque to demonstrate logic step-by-step\n    function slidingWindowMax(arr, k) {\n      const n = arr.length;\n      if (k > n) return [];\n\n      let dq = []; // will store indices\n      let maxValues = [];\n      let steps = [];\n\n      for(let i=0; i<n; i++){\n        // Remove indices out of window range\n        while(dq.length && dq[0] <= i - k) {\n          dq.shift();\n        }\n        // Remove smaller elements indices\n        while(dq.length && arr[dq[dq.length - 1]] <= arr[i]) {\n          dq.pop();\n        }\n        dq.push(i);\n\n        if(i >= k - 1) {\n          maxValues.push(arr[dq[0]]);\n          // Capture snapshot info for visualization\n          steps.push({\n            windowStart: i - k + 1,\n            windowEnd: i,\n            maxIndices: [dq[0]],\n            dq: [...dq],\n            maxValue: arr[dq[0]],\n            currentIndex: i\n          });\n        }\n      }\n      return {maxValues, steps};\n    }\n\n    function disableInputs(disabled) {\n      arrayInput.disabled = disabled;\n      windowInput.disabled = disabled;\n      startBtn.disabled = disabled;\n    }\n\n    function clearVisualization() {\n      container.innerHTML = '';\n      result.textContent = '';\n    }\n\n\n    function runVisualization(arr, k) {\n      const { maxValues, steps } = slidingWindowMax(arr, k);\n      let currentStep = 0;\n\n      disableInputs(true);\n      clearVisualization();\n\n      function showStep(step) {\n        drawArrayHighlightWindow(arr, step.windowStart, step.windowEnd, step.maxIndices);\n        result.textContent = `Window [${step.windowStart} .. ${step.windowEnd}]: Max = ${step.maxValue}`;\n      }\n\n      showStep(steps[0]);\n\n      intervalId = setInterval(() => {\n        currentStep++;\n        if(currentStep >= steps.length) {\n          clearInterval(intervalId);\n          result.textContent += ' â€” Finished sliding all windows.';\n          disableInputs(false);\n          return;\n        }\n        showStep(steps[currentStep]);\n      }, 1300);\n    }\n\n    startBtn.addEventListener('click', () => {\n      let inputStr = arrayInput.value.trim();\n      if(!inputStr.length) {\n        alert('Please enter a valid array of integers.');\n        return;\n      }\n      let parsedArray = inputStr.split(',').map(s => Number(s.trim()));\n      if(parsedArray.some(isNaN)) {\n        alert('Array must contain only integers, separated by commas.');\n        return;\n      }\n      let windowSize = Number(windowInput.value);\n\n      if(isNaN(windowSize) || windowSize < 1 || windowSize > parsedArray.length) {\n        alert(`Window size k must be an integer between 1 and array length (${parsedArray.length}).`);\n        return;\n      }\n\n      array = parsedArray;\n      k = windowSize;\n\n      runVisualization(array, k);\n    });\n\n  })();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Sliding Window"
    }
  ],
  "topic": "Sliding Window",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}