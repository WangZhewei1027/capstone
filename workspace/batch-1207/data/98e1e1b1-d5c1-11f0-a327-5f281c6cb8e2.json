{
  "id": "98e1e1b1-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:17:09.320Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Quick Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<title>Quick Sort Visualizer</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#3b82f6;\n    --muted:#94a3b8;\n    --card:#071028;\n    --ok:#16a34a;\n    --danger:#ef4444;\n    --yellow:#f59e0b;\n    --pivot:#fb923c;\n    --compare:#ef4444;\n    --swap:#facc15;\n    font-family: Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n    color: #dbeafe;\n  }\n  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071025);}\n  .app{max-width:1100px;margin:20px auto;padding:20px;border-radius:12px;background:linear-gradient(180deg,var(--panel),#051226);box-shadow:0 10px 30px rgba(2,6,23,.6);}\n  header{display:flex;align-items:center;gap:16px;margin-bottom:12px;}\n  header h1{font-size:20px;margin:0;}\n  .controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:12px;}\n  .control{background:var(--card);padding:10px;border-radius:8px;display:flex;gap:8px;align-items:center;}\n  label{font-size:13px;color:var(--muted);}\n  input[type=range]{width:140px;}\n  select,button,input[type=number]{background:#07132a;border:1px solid rgba(255,255,255,0.04);color:inherit;padding:6px 8px;border-radius:6px;}\n  button{cursor:pointer;}\n  button.primary{background:var(--accent);border:none;color:#032042;padding:8px 12px;border-radius:8px;}\n  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:6px 10px;}\n  .viz{height:360px;background:linear-gradient(180deg,#02132a00,#02243a11);border-radius:8px;padding:12px;display:flex;align-items:flex-end;gap:4px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);}\n  .bar{flex:1 1 auto;margin:0 2px;background:linear-gradient(180deg,#7dd3fc,#0284c7);height:40%;border-radius:6px;display:flex;align-items:end;justify-content:center;color:#001;position:relative;transition:height .12s,transform .12s;}\n  .bar .label{position:absolute;bottom:4px;font-size:11px;color:rgba(0,0,0,0.6);padding:1px 6px;border-radius:4px;}\n  .bar.pivot{background:linear-gradient(180deg,var(--pivot),#fb7a2b);transform:scale(1.05);z-index:2;box-shadow:0 6px 24px rgba(251,146,60,0.12);}\n  .bar.compare{background:linear-gradient(180deg,var(--compare),#ef4444);transform:translateY(-6px);}\n  .bar.swap{background:linear-gradient(180deg,var(--swap),#facc15);transform:translateY(-6px);}\n  .bar.sorted{background:linear-gradient(180deg,var(--ok),#3ad06a);color:#022;}\n  .bar.range{background:linear-gradient(180deg,#60a5fa33,#0284c733);}\n  .stats{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;}\n  .stat{background:#071830;padding:8px 10px;border-radius:8px;color:var(--muted);font-size:13px;}\n  .bottom{display:flex;gap:12px;margin-top:12px;}\n  .panel{flex:1;background:#051428;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);}\n  pre{background:transparent;color:var(--muted);font-size:13px;line-height:1.5;margin:0;white-space:pre-wrap;}\n  .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}\n  .key{display:flex;align-items:center;gap:8px;background:#021428;padding:6px 8px;border-radius:8px;font-size:13px;color:var(--muted);}\n  .swatch{width:18px;height:12px;border-radius:4px;}\n  footer{margin-top:12px;color:var(--muted);font-size:12px;}\n  @media (max-width:720px){\n    .controls{flex-direction:column;align-items:stretch;}\n    .viz{height:260px;}\n  }\n</style>\n</head>\n<body>\n<div class=\"app\">\n  <header>\n    <h1>Quick Sort Visualizer</h1>\n    <div style=\"color:var(--muted);font-size:13px;\">Interactive demonstration of in-place Quick Sort (Lomuto partition)</div>\n  </header>\n\n  <div class=\"controls\">\n    <div class=\"control\">\n      <label for=\"size\">Size</label>\n      <input id=\"size\" type=\"range\" min=\"6\" max=\"80\" value=\"30\" />\n      <span id=\"sizeLabel\" style=\"min-width:34px;text-align:center;font-weight:600;color:var(--muted)\">30</span>\n    </div>\n\n    <div class=\"control\">\n      <label for=\"pivot\">Pivot</label>\n      <select id=\"pivot\">\n        <option value=\"last\">Last (Lomuto)</option>\n        <option value=\"first\">First</option>\n        <option value=\"random\">Random</option>\n        <option value=\"median\">Median of Three</option>\n      </select>\n    </div>\n\n    <div class=\"control\">\n      <label for=\"speed\">Speed</label>\n      <input id=\"speed\" type=\"range\" min=\"10\" max=\"1000\" value=\"120\" />\n      <span id=\"speedLabel\" style=\"min-width:40px;text-align:center;font-weight:600;color:var(--muted)\">120ms</span>\n    </div>\n\n    <div class=\"control\">\n      <button id=\"generate\" class=\"ghost\">Generate</button>\n      <button id=\"shuffle\" class=\"ghost\">Shuffle</button>\n      <button id=\"run\" class=\"primary\">Play</button>\n      <button id=\"step\" class=\"ghost\">Step</button>\n      <button id=\"reset\" class=\"ghost\">Reset</button>\n    </div>\n  </div>\n\n  <div id=\"viz\" class=\"viz\" aria-hidden=\"false\"></div>\n\n  <div class=\"stats\" id=\"stats\">\n    <div class=\"stat\">Comparisons: <strong id=\"comp\">0</strong></div>\n    <div class=\"stat\">Swaps: <strong id=\"swaps\">0</strong></div>\n    <div class=\"stat\">Recursive calls: <strong id=\"rcalls\">0</strong></div>\n    <div class=\"stat\">Actions queued: <strong id=\"queued\">0</strong></div>\n  </div>\n\n  <div class=\"legend\">\n    <div class=\"key\"><div class=\"swatch\" style=\"background:linear-gradient(180deg,var(--pivot),#fb7a2b)\"></div> Pivot</div>\n    <div class=\"key\"><div class=\"swatch\" style=\"background:linear-gradient(180deg,var(--compare),#ef4444)\"></div> Comparing</div>\n    <div class=\"key\"><div class=\"swatch\" style=\"background:linear-gradient(180deg,var(--swap),#facc15)\"></div> Swapping</div>\n    <div class=\"key\"><div class=\"swatch\" style=\"background:linear-gradient(180deg,var(--ok),#3ad06a)\"></div> Sorted</div>\n    <div class=\"key\"><div class=\"swatch\" style=\"background:linear-gradient(180deg,#60a5fa33,#0284c733)\"></div> Active range</div>\n  </div>\n\n  <div class=\"bottom\">\n    <div class=\"panel\" style=\"flex:0.6\">\n      <strong style=\"display:block;margin-bottom:6px\">Pseudocode (Lomuto)</strong>\n      <pre id=\"code\">\nquicksort(A, low, high):\n  if low < high:\n    pivotIndex = choosePivot(low, high)\n    swap(A[pivotIndex], A[high])\n    p = partition(A, low, high)        // p is final pivot position\n    quicksort(A, low, p - 1)\n    quicksort(A, p + 1, high)\n\npartition(A, low, high):\n  pivot = A[high]\n  i = low\n  for j = low to high-1:\n    if A[j] < pivot:\n      swap A[i] and A[j]\n      i = i + 1\n  swap A[i] and A[high]\n  return i\n      </pre>\n    </div>\n\n    <div class=\"panel\" style=\"flex:0.4\">\n      <strong style=\"display:block;margin-bottom:6px\">Info</strong>\n      <p style=\"margin:0;color:var(--muted);font-size:13px\">\n        Quick Sort is a divide-and-conquer in-place sorting algorithm.\n        Average time: O(n log n), Worst-case: O(n^2) (bad pivot choices).\n      </p>\n      <div style=\"margin-top:8px;font-size:13px;color:var(--muted)\">\n        Use different pivot strategies to see how they affect behavior. Step through or play the algorithm.\n      </div>\n    </div>\n  </div>\n\n  <footer>Built-in visualization: bars show values. Controls let you generate, shuffle, step, and play. This demo uses an in-place Lomuto partitioning quick sort.</footer>\n</div>\n\n<script>\n(function(){\n  // Utility\n  const $ = id => document.getElementById(id);\n\n  // DOM\n  const viz = $('viz');\n  const sizeRange = $('size');\n  const sizeLabel = $('sizeLabel');\n  const generateBtn = $('generate');\n  const shuffleBtn = $('shuffle');\n  const runBtn = $('run');\n  const stepBtn = $('step');\n  const resetBtn = $('reset');\n  const pivotSelect = $('pivot');\n  const speedRange = $('speed');\n  const speedLabel = $('speedLabel');\n  const compEl = $('comp');\n  const swapsEl = $('swaps');\n  const rcallsEl = $('rcalls');\n  const queuedEl = $('queued');\n\n  // State\n  let array = [];\n  let bars = [];\n  let actions = []; // queued actions\n  let playing = false;\n  let timer = null;\n  let actionIndex = 0;\n  let comparisons = 0, swaps = 0, rCalls = 0;\n  let initialArray = [];\n  let sortedFlags = [];\n  let maxValue = 100;\n\n  function createArray(n){\n    array = [];\n    for(let i=0;i<n;i++){\n      array.push(Math.floor(10 + Math.random() * (maxValue-10)));\n    }\n    initialArray = array.slice();\n    sortedFlags = new Array(n).fill(false);\n    comparisons = swaps = rCalls = 0;\n    updateStats();\n  }\n\n  function renderBars(){\n    viz.innerHTML = '';\n    bars = [];\n    const n = array.length;\n    const maxv = Math.max(...array, 1);\n    for(let i=0;i<n;i++){\n      const b = document.createElement('div');\n      b.className = 'bar';\n      const h = Math.max(4, Math.round((array[i]/maxv) * 100));\n      b.style.height = h + '%';\n      const label = document.createElement('div');\n      label.className = 'label';\n      label.textContent = array[i];\n      b.appendChild(label);\n      viz.appendChild(b);\n      bars.push(b);\n      if(sortedFlags[i]){\n        b.classList.add('sorted');\n      }\n    }\n  }\n\n  function updateStats(){\n    compEl.textContent = comparisons;\n    swapsEl.textContent = swaps;\n    rcallsEl.textContent = rCalls;\n    queuedEl.textContent = Math.max(0, actions.length - actionIndex);\n  }\n\n  // Action types: 'range', 'pivot', 'compare', 'swap', 'mark', 'done'\n  function enqueueActions(actList){\n    actions = actList;\n    actionIndex = 0;\n    updateStats();\n  }\n\n  // QuickSort generator producing action objects for visualization\n  function* quickSortGen(A, low, high, pivotStrategy){\n    if(low < 0) low = 0;\n    if(high >= A.length) high = A.length - 1;\n    rCalls++;\n    yield {type:'range', low, high};\n    if(low < high){\n      // choose pivot\n      let pivotIndex = choosePivot(A, low, high, pivotStrategy);\n      yield {type:'pivot', index: pivotIndex};\n      if(pivotIndex !== high){\n        // swap pivot to end\n        [A[pivotIndex], A[high]] = [A[high], A[pivotIndex]];\n        yield {type:'swap', i: pivotIndex, j: high};\n        pivotIndex = high;\n      }\n      // partition\n      const p = yield* partitionGen(A, low, high);\n      // p is pivot final position\n      yield {type:'mark', index: p};\n      // recursive calls\n      yield* quickSortGen(A, low, p-1, pivotStrategy);\n      yield* quickSortGen(A, p+1, high, pivotStrategy);\n    }\n    yield {type:'range', low:-1, high:-1};\n  }\n\n  function* partitionGen(A, low, high){\n    const pivotVal = A[high];\n    let i = low;\n    for(let j = low; j <= high-1; j++){\n      yield {type:'compare', i:j, j:high};\n      if(A[j] < pivotVal){\n        // swap A[i], A[j]\n        [A[i], A[j]] = [A[j], A[i]];\n        yield {type:'swap', i:i, j:j};\n        i++;\n      }\n    }\n    [A[i], A[high]] = [A[high], A[i]];\n    yield {type:'swap', i:i, j:high};\n    return i;\n  }\n\n  function choosePivot(A, low, high, strat){\n    if(strat === 'last') return high;\n    if(strat === 'first') return low;\n    if(strat === 'random') return Math.floor(low + Math.random() * (high - low + 1));\n    if(strat === 'median'){\n      const mid = Math.floor((low + high)/2);\n      const trio = [[A[low],low],[A[mid],mid],[A[high],high]];\n      trio.sort((x,y)=>x[0]-y[0]);\n      return trio[1][1];\n    }\n    return high;\n  }\n\n  // Apply single action\n  function applyAction(act){\n    switch(act.type){\n      case 'range':\n        // clear range markers then mark new range\n        bars.forEach(b => {\n          b.classList.remove('range');\n          b.classList.remove('compare');\n          b.classList.remove('pivot');\n          b.classList.remove('swap');\n        });\n        if(act.low >= 0 && act.high >= 0){\n          for(let k=act.low;k<=act.high;k++){\n            if(bars[k]) bars[k].classList.add('range');\n          }\n        }\n        break;\n      case 'pivot':\n        // highlight pivot\n        bars.forEach(b => b.classList.remove('pivot'));\n        if(bars[act.index]) bars[act.index].classList.add('pivot');\n        break;\n      case 'compare':\n        comparisons++;\n        // highlight compare between i and j (j is pivot typically)\n        bars.forEach(b => b.classList.remove('compare'));\n        if(bars[act.i]) bars[act.i].classList.add('compare');\n        if(bars[act.j]) bars[act.j].classList.add('compare');\n        break;\n      case 'swap':\n        swaps++;\n        // animate swap: swap heights and labels\n        const bi = bars[act.i];\n        const bj = bars[act.j];\n        if(!bi || !bj) break;\n        bi.classList.add('swap');\n        bj.classList.add('swap');\n        // swap values in model\n        const t = array[act.i]; array[act.i] = array[act.j]; array[act.j] = t;\n        // update visuals\n        updateBar(bi, array[act.i]);\n        updateBar(bj, array[act.j]);\n        break;\n      case 'mark':\n        // mark pivot at index as sorted\n        sortedFlags[act.index] = true;\n        if(bars[act.index]) bars[act.index].classList.add('sorted');\n        break;\n      case 'done':\n        // mark all sorted\n        bars.forEach((b,i)=> b.classList.add('sorted'));\n        break;\n    }\n    updateStats();\n  }\n\n  function updateBar(bar, value){\n    const maxv = Math.max(...array, 1);\n    const h = Math.max(4, Math.round((value / maxv) * 100));\n    bar.style.height = h + '%';\n    const lbl = bar.querySelector('.label');\n    if(lbl) lbl.textContent = value;\n  }\n\n  // Playback control\n  function stepForward(){\n    if(actionIndex >= actions.length){\n      playing = false;\n      runBtn.textContent = 'Play';\n      return;\n    }\n    const act = actions[actionIndex++];\n    applyAction(act);\n    updateStats();\n  }\n\n  function play(){\n    if(playing) return;\n    playing = true;\n    runBtn.textContent = 'Pause';\n    const tick = () => {\n      if(!playing) return;\n      if(actionIndex >= actions.length){\n        playing = false;\n        runBtn.textContent = 'Play';\n        return;\n      }\n      stepForward();\n      const delay = Math.max(8, parseInt(speedRange.value,10));\n      timer = setTimeout(tick, delay);\n    };\n    tick();\n  }\n\n  function pause(){\n    playing = false;\n    runBtn.textContent = 'Play';\n    if(timer) clearTimeout(timer);\n  }\n\n  // Build action list from generator by copying array to avoid destructive changes interfering with visualization\n  function buildActions(){\n    // copy array for generator to mutate safely\n    const A = array.slice();\n    comparisons = swaps = rCalls = 0;\n    const gen = quickSortGen(A, 0, A.length - 1, pivotSelect.value);\n    const list = [];\n    for(const act of gen){\n      list.push(act);\n    }\n    list.push({type:'done'});\n    enqueueActions(list);\n  }\n\n  // UI events\n  sizeRange.addEventListener('input', e=>{\n    sizeLabel.textContent = e.target.value;\n  });\n\n  speedRange.addEventListener('input', e=>{\n    speedLabel.textContent = e.target.value + 'ms';\n  });\n\n  generateBtn.addEventListener('click', ()=>{\n    createArray(parseInt(sizeRange.value,10));\n    renderBars();\n    buildActions();\n  });\n\n  shuffleBtn.addEventListener('click', ()=>{\n    // Shuffle current array\n    for(let i=array.length-1;i>0;i--){\n      const j = Math.floor(Math.random() * (i+1));\n      [array[i], array[j]] = [array[j], array[i]];\n      sortedFlags[i]=false; sortedFlags[j]=false;\n    }\n    sortedFlags.fill(false);\n    renderBars();\n    buildActions();\n  });\n\n  runBtn.addEventListener('click', ()=>{\n    if(playing){\n      pause();\n    } else {\n      // if finished, rebuild actions from current array state\n      if(actionIndex >= actions.length){\n        buildActions();\n      }\n      play();\n    }\n  });\n\n  stepBtn.addEventListener('click', ()=>{\n    pause();\n    // if finished, rebuild actions\n    if(actionIndex >= actions.length){\n      buildActions();\n    }\n    stepForward();\n  });\n\n  resetBtn.addEventListener('click', ()=>{\n    pause();\n    array = initialArray.slice();\n    sortedFlags = new Array(array.length).fill(false);\n    renderBars();\n    comparisons = swaps = rCalls = 0;\n    buildActions();\n  });\n\n  pivotSelect.addEventListener('change', ()=>{\n    pause();\n    buildActions();\n  });\n\n  // Initialize\n  createArray(parseInt(sizeRange.value,10));\n  renderBars();\n  buildActions();\n\n  // Expose double-click to run full immediate sort (no visualization), for fast test\n  viz.addEventListener('dblclick', ()=>{\n    pause();\n    array.sort((a,b)=>a-b);\n    sortedFlags = new Array(array.length).fill(true);\n    renderBars();\n    comparisons = swaps = rCalls = 0;\n    updateStats();\n  });\n\n  // Keyboard shortcuts\n  window.addEventListener('keydown', e=>{\n    if(e.key === ' ') { e.preventDefault(); runBtn.click(); }\n    if(e.key === 'ArrowRight') { stepBtn.click(); }\n  });\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Quick Sort"
    }
  ],
  "topic": "Quick Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}