{
  "id": "d7b39e50-d5c2-11f0-9651-0f1ae31ac260",
  "timestamp": "2025-12-10T12:24:15.738Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Quick Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Quick Sort Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f4f4f9;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  #arrayInput {\n    width: 100%;\n    padding: 8px;\n    font-size: 1rem;\n    margin-bottom: 10px;\n    box-sizing: border-box;\n  }\n  #buttons {\n    text-align: center;\n    margin-bottom: 20px;\n  }\n  button {\n    background-color: #007bff;\n    border: none;\n    color: white;\n    padding: 10px 18px;\n    margin: 5px;\n    font-size: 1rem;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  button:hover:not(:disabled) {\n    background-color: #0056b3;\n  }\n  button:disabled {\n    background-color: #999;\n    cursor: not-allowed;\n  }\n  #arrayContainer {\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 300px;\n    max-width: 100%;\n    margin: 0 auto 30px auto;\n    gap: 4px;\n  }\n  .bar {\n    background-color: #6c757d;\n    width: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    color: white;\n    font-size: 0.75rem;\n    border-radius: 3px 3px 0 0;\n    position: relative;\n  }\n  .bar.pivot {\n    background-color: #dc3545;\n  }\n  .bar.current {\n    background-color: #ffc107;\n    color: #222;\n  }\n  .bar.swap {\n    background-color: #28a745;\n  }\n  #log {\n    font-family: monospace;\n    background: #222;\n    color: #0f0;\n    padding: 10px;\n    height: 150px;\n    overflow-y: auto;\n    white-space: pre-wrap;\n    border-radius: 5px;\n  }\n  label {\n    display: block;\n    font-weight: bold;\n    margin-bottom: 5px;\n  }\n</style>\n</head>\n<body>\n<h1>Quick Sort Visualization</h1>\n\n<label for=\"arrayInput\">Enter numbers separated by commas:</label>\n<input id=\"arrayInput\" type=\"text\" value=\"50,23,9,18,61,32\" aria-label=\"Array input\" />\n\n<div id=\"buttons\">\n  <button id=\"startBtn\">Start Sort</button>\n  <button id=\"resetBtn\" disabled>Reset</button>\n</div>\n\n<div id=\"arrayContainer\" aria-live=\"polite\" aria-label=\"Array visualization\"></div>\n\n<h2>Logs</h2>\n<div id=\"log\" aria-live=\"polite\" aria-atomic=\"false\"></div>\n\n<script>\n(() => {\n  const input = document.getElementById('arrayInput');\n  const startBtn = document.getElementById('startBtn');\n  const resetBtn = document.getElementById('resetBtn');\n  const arrayContainer = document.getElementById('arrayContainer');\n  const log = document.getElementById('log');\n\n  let arr = [];\n  let bars = [];\n  let isSorting = false;\n\n  // Utility to log messages with timestamp\n  function logMessage(msg) {\n    const time = new Date().toLocaleTimeString();\n    log.textContent += `[${time}] ${msg}\\n`;\n    log.scrollTop = log.scrollHeight;\n  }\n\n  // Generate bars from arr\n  function renderArray() {\n    arrayContainer.innerHTML = '';\n    bars = [];\n    const max = Math.max(...arr, 1);\n    arr.forEach((val, i) => {\n      const bar = document.createElement('div');\n      bar.className = 'bar';\n      bar.style.height = `${(val / max) * 100}%`;\n      bar.textContent = val;\n      bar.setAttribute('aria-label', `Value: ${val}. Index: ${i}.`);\n      bars.push(bar);\n      arrayContainer.appendChild(bar);\n    });\n  }\n\n  // Sleep for ms milliseconds\n  function sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  // Swap two indices in the array and update the bars visually\n  async function swap(i, j) {\n    logMessage(`Swapping indices ${i} (${arr[i]}) and ${j} (${arr[j]})`);\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n\n    bars[i].textContent = arr[i];\n    bars[j].textContent = arr[j];\n    // Heights\n    const max = Math.max(...arr, 1);\n    bars[i].style.height = `${(arr[i] / max) * 100}%`;\n    bars[j].style.height = `${(arr[j] / max) * 100}%`;\n\n    // Animate bars\n    bars[i].classList.add('swap');\n    bars[j].classList.add('swap');\n    await sleep(350);\n    bars[i].classList.remove('swap');\n    bars[j].classList.remove('swap');\n  }\n\n  // The quicksort partition function with visualization\n  async function partition(low, high) {\n    // Clear previous highlights\n    bars.forEach(bar => bar.classList.remove('pivot', 'current'));\n\n    let pivotValue = arr[high];\n    bars[high].classList.add('pivot');\n    logMessage(`Pivot chosen: index ${high} (value ${pivotValue})`);\n\n    let i = low - 1;\n\n    for (let j = low; j < high; j++) {\n      bars[j].classList.add('current');\n      logMessage(`Comparing index ${j} (value ${arr[j]}) with pivot value ${pivotValue}`);\n      await sleep(600);\n\n      if (arr[j] <= pivotValue) {\n        i++;\n        await swap(i, j);\n      }\n      bars[j].classList.remove('current');\n    }\n    await swap(i + 1, high);\n    bars.forEach(bar => bar.classList.remove('pivot', 'current'));\n    return i + 1;\n  }\n\n  // The main quicksort recursive function with visualization\n  async function quickSort(low, high) {\n    if (low < high) {\n      let pi = await partition(low, high);\n      logMessage(`Partition done, pivot is now at index ${pi}`);\n      await quickSort(low, pi - 1);\n      await quickSort(pi + 1, high);\n    } else if(low >= 0 && high >= 0 && low === high){\n      // highlight single element\n      bars[low].classList.add('swap');\n      await sleep(350);\n      bars[low].classList.remove('swap');\n    }\n  }\n\n  // Start the sorting visualization\n  async function startSort() {\n    isSorting = true;\n    startBtn.disabled = true;\n    input.disabled = true;\n    resetBtn.disabled = false;\n    log.textContent = \"\";\n    logMessage(\"Starting quick sort...\");\n\n    await quickSort(0, arr.length - 1);\n\n    // Final highlight of sorted array\n    bars.forEach(bar => bar.classList.add('swap'));\n    logMessage(\"Array sorted!\");\n    isSorting = false;\n  }\n\n  // Parse input and render\n  function initializeArray() {\n    const values = input.value.split(',').map(v => v.trim()).filter(v => v !== '').map(Number);\n    if (values.some(isNaN)) {\n      alert(\"Please enter a valid list of numbers separated by commas.\");\n      return false;\n    }\n    if (values.length === 0) {\n      alert(\"Please enter at least one number.\");\n      return false;\n    }\n    arr = values;\n    renderArray();\n    return true;\n  }\n\n  // Reset the interface to initial state\n  function reset() {\n    if(isSorting) return;\n    startBtn.disabled = false;\n    input.disabled = false;\n    resetBtn.disabled = true;\n    log.textContent = \"\";\n    initializeArray();\n  }\n\n  startBtn.addEventListener('click', async () => {\n    if(!initializeArray()) return;\n    await startSort();\n  });\n\n  resetBtn.addEventListener('click', () => {\n    reset();\n  });\n\n  // initialize on page load\n  initializeArray();\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Quick Sort"
    }
  ],
  "topic": "Quick Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}