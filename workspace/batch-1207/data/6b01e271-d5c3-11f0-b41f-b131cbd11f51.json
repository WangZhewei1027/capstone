{
  "id": "6b01e271-d5c3-11f0-b41f-b131cbd11f51",
  "timestamp": "2025-12-10T12:30:57.818Z",
  "model": "deepseek-chat",
  "status": "success",
  "question": "K-Means Clustering",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>K-Means Clustering Demo</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 1000px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n            color: #333;\n        }\n        h1 {\n            color: #2c3e50;\n            text-align: center;\n        }\n        .container {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n        .controls {\n            background-color: white;\n            padding: 15px;\n            border-radius: 8px;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n        }\n        .control-group {\n            margin-bottom: 15px;\n        }\n        label {\n            display: inline-block;\n            width: 150px;\n            font-weight: bold;\n        }\n        input[type=\"range\"] {\n            width: 200px;\n            margin-right: 10px;\n        }\n        .value-display {\n            display: inline-block;\n            width: 40px;\n            text-align: center;\n        }\n        button {\n            background-color: #3498db;\n            color: white;\n            border: none;\n            padding: 8px 15px;\n            border-radius: 4px;\n            cursor: pointer;\n            margin-right: 10px;\n            font-size: 14px;\n        }\n        button:hover {\n            background-color: #2980b9;\n        }\n        button:disabled {\n            background-color: #bdc3c7;\n            cursor: not-allowed;\n        }\n        canvas {\n            background-color: white;\n            border: 1px solid #ddd;\n            border-radius: 8px;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n        }\n        .explanation {\n            background-color: white;\n            padding: 15px;\n            border-radius: 8px;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n        }\n        .step-info {\n            font-weight: bold;\n            color: #27ae60;\n            margin-top: 10px;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>K-Means Clustering Algorithm Visualization</h1>\n        \n        <div class=\"controls\">\n            <div class=\"control-group\">\n                <label for=\"kValue\">Number of Clusters (K):</label>\n                <input type=\"range\" id=\"kValue\" min=\"2\" max=\"10\" value=\"3\">\n                <span class=\"value-display\" id=\"kValueDisplay\">3</span>\n            </div>\n            <div class=\"control-group\">\n                <label for=\"pointCount\">Number of Points:</label>\n                <input type=\"range\" id=\"pointCount\" min=\"20\" max=\"200\" value=\"100\">\n                <span class=\"value-display\" id=\"pointCountDisplay\">100</span>\n            </div>\n            <div class=\"control-group\">\n                <label for=\"animationSpeed\">Animation Speed:</label>\n                <input type=\"range\" id=\"animationSpeed\" min=\"1\" max=\"10\" value=\"5\">\n                <span class=\"value-display\" id=\"animationSpeedDisplay\">5</span>\n            </div>\n            <div class=\"control-group\">\n                <button id=\"resetButton\">Reset Points</button>\n                <button id=\"stepButton\">Next Step</button>\n                <button id=\"playButton\">Play Animation</button>\n                <button id=\"resetAlgorithm\">Reset Algorithm</button>\n            </div>\n        </div>\n        \n        <div>\n            <canvas id=\"canvas\" width=\"800\" height=\"500\"></canvas>\n            <div class=\"step-info\" id=\"stepInfo\">Step: Initial points generated</div>\n        </div>\n        \n        <div class=\"explanation\">\n            <h3>How K-Means Clustering Works:</h3>\n            <p>K-Means is an unsupervised machine learning algorithm used to partition data points into K clusters.</p>\n            <ol>\n                <li><strong>Initialization:</strong> Randomly select K points as initial centroids (shown as larger circles).</li>\n                <li><strong>Assignment:</strong> Assign each data point to the nearest centroid, forming K clusters.</li>\n                <li><strong>Update:</strong> Recalculate the centroids as the mean of all points in each cluster.</li>\n                <li><strong>Repeat:</strong> Continue steps 2 and 3 until convergence (centroids stabilize).</li>\n            </ol>\n            <p>Use the controls above to modify the parameters and observe how the algorithm works step by step.</p>\n        </div>\n    </div>\n\n    <script>\n        // Canvas setup\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n        \n        // Color palette for clusters\n        const colors = [\n            '#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6',\n            '#1abc9c', '#d35400', '#c0392b', '#16a085', '#8e44ad'\n        ];\n        \n        // Algorithm state\n        let points = [];\n        let centroids = [];\n        let clusters = [];\n        let step = 0;\n        let animationId = null;\n        let isPlaying = false;\n        \n        // Parameters\n        let k = parseInt(document.getElementById('kValue').value);\n        let pointCount = parseInt(document.getElementById('pointCount').value);\n        let animationSpeed = parseInt(document.getElementById('animationSpeed').value);\n        \n        // Initialize the visualization\n        function init() {\n            resetAlgorithm();\n            generatePoints();\n            draw();\n        }\n        \n        // Generate random points\n        function generatePoints() {\n            points = [];\n            const margin = 50;\n            \n            for (let i = 0; i < pointCount; i++) {\n                points.push({\n                    x: margin + Math.random() * (canvas.width - 2 * margin),\n                    y: margin + Math.random() * (canvas.height - 2 * margin),\n                    cluster: -1\n                });\n            }\n        }\n        \n        // Initialize centroids randomly\n        function initCentroids() {\n            centroids = [];\n            for (let i = 0; i < k; i++) {\n                // Select a random point as initial centroid\n                const randomIndex = Math.floor(Math.random() * points.length);\n                centroids.push({\n                    x: points[randomIndex].x,\n                    y: points[randomIndex].y,\n                    cluster: i\n                });\n            }\n        }\n        \n        // Assign points to the nearest centroid\n        function assignPointsToClusters() {\n            clusters = Array(k).fill().map(() => []);\n            \n            points.forEach(point => {\n                let minDistance = Infinity;\n                let closestCentroid = -1;\n                \n                centroids.forEach((centroid, index) => {\n                    const distance = Math.sqrt(\n                        Math.pow(point.x - centroid.x, 2) + \n                        Math.pow(point.y - centroid.y, 2)\n                    );\n                    \n                    if (distance < minDistance) {\n                        minDistance = distance;\n                        closestCentroid = index;\n                    }\n                });\n                \n                point.cluster = closestCentroid;\n                clusters[closestCentroid].push(point);\n            });\n        }\n        \n        // Update centroid positions to the mean of their cluster\n        function updateCentroids() {\n            let converged = true;\n            \n            centroids.forEach((centroid, index) => {\n                if (clusters[index].length === 0) return;\n                \n                const sumX = clusters[index].reduce((sum, point) => sum + point.x, 0);\n                const sumY = clusters[index].reduce((sum, point) => sum + point.y, 0);\n                \n                const newX = sumX / clusters[index].length;\n                const newY = sumY / clusters[index].length;\n                \n                // Check if centroid has moved significantly\n                if (Math.abs(centroid.x - newX) > 0.1 || Math.abs(centroid.y - newY) > 0.1) {\n                    converged = false;\n                }\n                \n                centroid.x = newX;\n                centroid.y = newY;\n            });\n            \n            return converged;\n        }\n        \n        // Draw the current state\n        function draw() {\n            // Clear canvas\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            \n            // Draw points\n            points.forEach(point => {\n                ctx.beginPath();\n                ctx.arc(point.x, point.y, 4, 0, Math.PI * 2);\n                ctx.fillStyle = point.cluster === -1 ? '#777' : colors[point.cluster % colors.length];\n                ctx.fill();\n            });\n            \n            // Draw centroids\n            centroids.forEach((centroid, index) => {\n                ctx.beginPath();\n                ctx.arc(centroid.x, centroid.y, 8, 0, Math.PI * 2);\n                ctx.fillStyle = colors[index % colors.length];\n                ctx.fill();\n                ctx.strokeStyle = '#000';\n                ctx.lineWidth = 2;\n                ctx.stroke();\n            });\n            \n            // Draw lines from points to centroids if clusters are assigned\n            if (step > 0) {\n                points.forEach(point => {\n                    if (point.cluster !== -1) {\n                        ctx.beginPath();\n                        ctx.moveTo(point.x, point.y);\n                        ctx.lineTo(centroids[point.cluster].x, centroids[point.cluster].y);\n                        ctx.strokeStyle = colors[point.cluster % colors.length] + '40'; // Semi-transparent\n                        ctx.lineWidth = 1;\n                        ctx.stroke();\n                    }\n                });\n            }\n        }\n        \n        // Perform one algorithm step\n        function algorithmStep() {\n            if (step === 0) {\n                // Initialization step\n                initCentroids();\n                document.getElementById('stepInfo').textContent = 'Step: Centroids initialized';\n                step = 1;\n            } else if (step === 1) {\n                // Assignment step\n                assignPointsToClusters();\n                document.getElementById('stepInfo').textContent = 'Step: Points assigned to clusters';\n                step = 2;\n            } else if (step === 2) {\n                // Update step\n                const converged = updateCentroids();\n                document.getElementById('stepInfo').textContent = 'Step: Centroids updated' + \n                    (converged ? ' (Converged!)' : '');\n                \n                if (converged) {\n                    step = 3; // Algorithm finished\n                    if (isPlaying) toggleAnimation();\n                } else {\n                    step = 1; // Go back to assignment step\n                }\n            }\n            \n            draw();\n        }\n        \n        // Reset algorithm state\n        function resetAlgorithm() {\n            step = 0;\n            centroids = [];\n            clusters = [];\n            points.forEach(point => point.cluster = -1);\n            document.getElementById('stepInfo').textContent = 'Step: Initial points generated';\n            draw();\n        }\n        \n        // Toggle animation\n        function toggleAnimation() {\n            if (isPlaying) {\n                cancelAnimationFrame(animationId);\n                isPlaying = false;\n                document.getElementById('playButton').textContent = 'Play Animation';\n            } else {\n                isPlaying = true;\n                document.getElementById('playButton').textContent = 'Pause Animation';\n                animate();\n            }\n        }\n        \n        // Animation loop\n        function animate() {\n            if (!isPlaying) return;\n            \n            algorithmStep();\n            \n            // Schedule next frame with speed control\n            const timeout = 1100 - (animationSpeed * 100);\n            setTimeout(() => {\n                animationId = requestAnimationFrame(animate);\n            }, timeout);\n        }\n        \n        // Event listeners for controls\n        document.getElementById('kValue').addEventListener('input', function() {\n            k = parseInt(this.value);\n            document.getElementById('kValueDisplay').textContent = k;\n            resetAlgorithm();\n        });\n        \n        document.getElementById('pointCount').addEventListener('input', function() {\n            pointCount = parseInt(this.value);\n            document.getElementById('pointCountDisplay').textContent = pointCount;\n            generatePoints();\n            resetAlgorithm();\n        });\n        \n        document.getElementById('animationSpeed').addEventListener('input', function() {\n            animationSpeed = parseInt(this.value);\n            document.getElementById('animationSpeedDisplay').textContent = animationSpeed;\n        });\n        \n        document.getElementById('resetButton').addEventListener('click', function() {\n            generatePoints();\n            resetAlgorithm();\n        });\n        \n        document.getElementById('stepButton').addEventListener('click', function() {\n            if (step < 3) {\n                algorithmStep();\n            }\n        });\n        \n        document.getElementById('playButton').addEventListener('click', function() {\n            if (step >= 3) {\n                resetAlgorithm();\n                step = 0;\n            }\n            toggleAnimation();\n        });\n        \n        document.getElementById('resetAlgorithm').addEventListener('click', function() {\n            resetAlgorithm();\n            if (isPlaying) toggleAnimation();\n        });\n        \n        // Initialize the visualization\n        init();\n    </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "K-Means Clustering"
    }
  ],
  "topic": "K-Means Clustering",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}