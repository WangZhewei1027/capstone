{
  "id": "d79db210-d361-11f0-8438-11a56595a476",
  "timestamp": "2025-12-07T11:44:12.124Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Knapsack Problem",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Knapsack Problem Demo</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 1em;\n    background: #f0f0f0;\n  }\n  h1 {\n    text-align: center;\n  }\n  #input-area, #output-area {\n    background: white;\n    padding: 15px;\n    border-radius: 8px;\n    max-width: 700px;\n    margin: auto;\n    box-shadow: 0 0 10px #ccc;\n  }\n  label {\n    display: block;\n    margin-top: 0.75em;\n  }\n  textarea {\n    width: 100%;\n    height: 100px;\n    font-family: monospace;\n  }\n  input[type=number] {\n    width: 6em;\n    margin-left: 1em;\n  }\n  button {\n    margin-top: 1em;\n    padding: 0.5em 1.2em;\n    font-size: 1em;\n    cursor: pointer;\n  }\n  #result {\n    margin-top: 1em;\n  }\n  table {\n    border-collapse: collapse;\n    margin-top: 0.5em;\n    width: 100%;\n  }\n  th, td {\n    border: 1px solid #aaa;\n    padding: 0.3em 0.6em;\n    text-align: center;\n  }\n  th {\n    background-color:#ddd;\n  }\n  .item-list {\n    margin-top: 0.5em;\n  }\n  .item-list span {\n    display: inline-block;\n    margin-right: 1em;\n    background: #eaeaea;\n    padding: 0.3em 0.6em;\n    border-radius: 4px;\n  }\n  .footer {\n    margin-top: 2em;\n    font-size: 0.85em;\n    text-align: center;\n    color: #555;\n  }\n</style>\n</head>\n<body>\n\n<h1>0/1 Knapsack Problem Solver</h1>\n\n<div id=\"input-area\" role=\"main\">\n  <label for=\"items-input\">\n    Enter items (one per line) as: <code>value weight</code><br />\n    Example:<br />\n    60 10<br />\n    100 20<br />\n    120 30\n  </label>\n  <textarea id=\"items-input\" aria-describedby=\"items-desc\" placeholder=\"60 10&#10;100 20&#10;120 30\"></textarea>\n  <label for=\"capacity-input\">\n    Enter knapsack capacity: \n    <input type=\"number\" id=\"capacity-input\" min=\"1\" value=\"50\" />\n  </label>\n  <button id=\"solve-btn\">Solve Knapsack</button>\n\n  <div id=\"error-msg\" role=\"alert\" style=\"color: darkred; margin-top: 1em;\"></div>\n</div>\n\n<div id=\"output-area\" aria-live=\"polite\" aria-atomic=\"true\" style=\"display:none;\">\n  <h2>Result:</h2>\n  <div id=\"result\"></div>\n</div>\n\n<script>\n(() => {\n  const itemsInput = document.getElementById('items-input');\n  const capacityInput = document.getElementById('capacity-input');\n  const solveBtn = document.getElementById('solve-btn');\n  const resultDiv = document.getElementById('result');\n  const outputArea = document.getElementById('output-area');\n  const errorMsg = document.getElementById('error-msg');\n\n  // Parse input string into array of {value, weight}\n  function parseItems(input) {\n    const lines = input.trim().split('\\n');\n    const items = [];\n    for(let i=0; i<lines.length; i++){\n      let line = lines[i].trim();\n      if(line === \"\") continue;\n      const parts = line.split(/\\s+/);\n      if(parts.length !== 2) return {error: `Line ${i+1} invalid format; expect: value weight`};\n      let value = Number(parts[0]);\n      let weight = Number(parts[1]);\n      if(isNaN(value) || isNaN(weight) || value < 0 || weight <= 0) {\n        return {error: `Line ${i+1} has invalid value or weight (value >= 0, weight > 0 required)` };\n      }\n      items.push({value, weight});\n    }\n    if(items.length === 0) return {error: \"No valid items found.\"};\n    return {items};\n  }\n\n  // Solve 0/1 knapsack with DP - returns {maxValue, takenIndices}\n  function knapsack(items, capacity) {\n    const n = items.length;\n    // dp[i][w] = max value using first i items with capacity w\n    let dp = Array(n+1).fill(null).map(_=>Array(capacity+1).fill(0));\n\n    for(let i=1; i<=n; i++) {\n      const {value, weight} = items[i-1];\n      for(let w=0; w<=capacity; w++) {\n        if(weight <= w) {\n          dp[i][w] = Math.max(dp[i-1][w], dp[i-1][w-weight] + value);\n        } else {\n          dp[i][w] = dp[i-1][w];\n        }\n      }\n    }\n\n    // Backtrack to find taken items\n    let w = capacity;\n    const takenIndices = [];\n    for(let i=n; i>0; i--) {\n      if(dp[i][w] !== dp[i-1][w]) {\n        takenIndices.push(i-1);\n        w -= items[i-1].weight;\n      }\n    }\n    takenIndices.reverse();\n    return {maxValue: dp[n][capacity], takenIndices, dpTable: dp};\n  }\n\n  // Render result nicely\n  function renderResult(items, capacity, solution) {\n    const {maxValue, takenIndices, dpTable} = solution;\n    let html = `<p><strong>Knapsack capacity:</strong> ${capacity}</p>`;\n    html += `<p><strong>Number of items:</strong> ${items.length}</p>`;\n    html += `<p><strong>Maximum total value achievable:</strong> ${maxValue}</p>`;\n\n    if(takenIndices.length === 0){\n      html += `<p><em>No items can be taken with the given capacity.</em></p>`;\n    } else {\n      html += `<p><strong>Items taken (index starting at 1):</strong></p>`;\n      html += `<div class=\"item-list\">`;\n      for(let idx of takenIndices) {\n        html += `<span>Item ${idx+1} &mdash; value: ${items[idx].value}, weight: ${items[idx].weight}</span>`;\n      }\n      html += `</div>`;\n    }\n\n    // Show dynamic programming table for educational purposes (optional)\n    html += `<h3>DP Table (rows = items, columns = capacity from 0 to ${capacity})</h3>`;\n    html += `<div style=\"overflow:auto; max-height:300px; border:1px solid #ccc; background:#fff;\">`;\n    html += `<table aria-label=\"Dynamic programming table for knapsack\">`;\n    // Header row: capacity capacities\n    html += `<thead><tr><th>i \\\\ w</th>`;\n    for(let w=0; w<=capacity; w++) {\n      html += `<th>${w}</th>`;\n    }\n    html += `</tr></thead>`;\n    // Rows with item index\n    html += `<tbody>`;\n    for(let i=0; i<=items.length; i++){\n      html += `<tr>`;\n      if(i===0) {\n        html += `<th>0 (no items)</th>`;\n      } else {\n        html += `<th>${i}</th>`;\n      }\n      for(let w=0; w<=capacity; w++){\n        let val = dpTable[i][w];\n        // Highlight the max value at last row\n        let highlight = (i === items.length && w === capacity) ? 'style=\"background:#d4edda; font-weight:bold;\"' : '';\n        html += `<td ${highlight}>${val}</td>`;\n      }\n      html += `</tr>`;\n    }\n    html += `</tbody></table></div>`;\n\n    return html;\n  }\n\n  solveBtn.addEventListener('click', () => {\n    errorMsg.textContent = '';\n    outputArea.style.display = 'none';\n    resultDiv.innerHTML = '';\n    const capacityVal = Number(capacityInput.value);\n    if(!Number.isInteger(capacityVal) || capacityVal <= 0) {\n      errorMsg.textContent = \"Capacity must be a positive integer.\";\n      return;\n    }\n    const parseResult = parseItems(itemsInput.value);\n    if(parseResult.error) {\n      errorMsg.textContent = parseResult.error;\n      return;\n    }\n    const items = parseResult.items;\n\n    // Use DP knapsack solver\n    const solution = knapsack(items, capacityVal);\n\n    resultDiv.innerHTML = renderResult(items, capacityVal, solution);\n    outputArea.style.display = 'block';\n  });\n\n  // Pre-fill example items\n  itemsInput.value = `60 10\n100 20\n120 30`;\n})();\n</script>\n\n<div class=\"footer\">\n  Knapsack problem solver - 0/1 knapsack with dynamic programming<br />\n  Enter items as \"<em>value weight</em>\", one per line, and specify knapsack capacity, then click Solve.\n</div>\n\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Knapsack Problem"
    }
  ],
  "topic": "Knapsack Problem",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}