{
  "id": "e9326300-d360-11f0-a097-ffdd56c22ef4",
  "timestamp": "2025-12-07T11:39:06.650Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Deque",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Deque (Double-Ended Queue) — Interactive Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1320;\n      --accent:#60a5fa;\n      --muted:#94a3b8;\n      --success:#34d399;\n      --danger:#fb7185;\n      --card:#111827;\n      --glass: rgba(255,255,255,0.03);\n      font-family: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n      color-scheme: dark;\n    }\n    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071024 0%, #071634 100%); color:#e6eef8}\n    .wrap{max-width:1100px;margin:24px auto;padding:20px;}\n    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}\n    header h1{font-size:20px;margin:0}\n    header p{margin:0;color:var(--muted);font-size:13px}\n    .grid{display:grid;grid-template-columns:360px 1fr;gap:18px}\n    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:10px;box-shadow:0 6px 20px rgba(2,6,23,0.6);}\n    .controls{display:flex;flex-direction:column;gap:10px;}\n    label{font-size:13px;color:var(--muted)}\n    input[type=\"text\"]{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:var(--glass);color:inherit;width:100%;box-sizing:border-box}\n    .btn-row{display:flex;gap:8px;flex-wrap:wrap}\n    button{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.05));border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:inherit;cursor:pointer;font-weight:600}\n    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.03)}\n    button.warn{border-color: rgba(251,113,133,0.18);background: rgba(251,113,133,0.06)}\n    button.success{border-color: rgba(52,211,153,0.12);background: rgba(52,211,153,0.04)}\n    .visual{display:flex;flex-direction:column;gap:14px;}\n    .deque-viewport{min-height:120px;padding:18px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center;overflow:auto}\n    .deque{display:flex;gap:8px;align-items:center;transition:all .25s ease}\n    .slot{min-width:64px;height:64px;border-radius:8px;background:var(--card);display:flex;align-items:center;justify-content:center;font-weight:700;color:#e6eef8;border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 14px rgba(2,6,23,0.5);}\n    .slot.empty{opacity:0.14;font-weight:500;color:var(--muted);background:transparent;border:1px dashed rgba(255,255,255,0.03)}\n    .pointer-row{display:flex;gap:8px;justify-content:center;margin-top:8px;font-size:13px;color:var(--muted)}\n    .info{font-size:13px;color:var(--muted);display:flex;gap:12px;flex-wrap:wrap}\n    pre{white-space:pre-wrap;word-break:break-word;background:rgba(255,255,255,0.02);padding:12px;border-radius:8px;color:#cfe8ff;overflow:auto;font-size:12px}\n    .log{height:120px;overflow:auto;background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;font-size:13px;color:var(--muted)}\n    .small{font-size:12px;color:var(--muted)}\n    .badge{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-weight:700}\n    footer{margin-top:18px;color:var(--muted);font-size:12px}\n    .row{display:flex;gap:8px;align-items:center}\n    .muted{color:var(--muted)}\n    .code-title{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px}\n    .demo-controls{display:flex;gap:8px;flex-wrap:wrap}\n  </style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <header>\n      <div style=\"width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:900\">DQ</div>\n      <div>\n        <h1>Deque (Double-Ended Queue) — Interactive Demo</h1>\n        <p>Push/pop from both ends. Underlying implementation: circular buffer (resizing). Try operations below and watch the state change.</p>\n      </div>\n    </header>\n\n    <div class=\"grid\">\n      <!-- Controls -->\n      <div class=\"panel controls\">\n        <label>Value\n          <input id=\"valueInput\" type=\"text\" placeholder='e.g. 42 or \"hello\"' />\n        </label>\n\n        <div class=\"btn-row\">\n          <button id=\"pushFrontBtn\">Push Front</button>\n          <button id=\"pushBackBtn\">Push Back</button>\n          <button id=\"popFrontBtn\" class=\"ghost\">Pop Front</button>\n          <button id=\"popBackBtn\" class=\"ghost\">Pop Back</button>\n        </div>\n\n        <div class=\"btn-row\">\n          <button id=\"peekFrontBtn\" class=\"ghost\">Peek Front</button>\n          <button id=\"peekBackBtn\" class=\"ghost\">Peek Back</button>\n          <button id=\"clearBtn\" class=\"warn\">Clear</button>\n          <button id=\"fillRandomBtn\" class=\"success\">Fill Random</button>\n        </div>\n\n        <div style=\"display:flex;gap:8px;align-items:center;\">\n          <label style=\"margin:0\">Rotate\n            <select id=\"rotateAmount\" style=\"margin-left:8px;padding:6px;border-radius:6px;background:transparent;color:inherit;border:1px solid rgba(255,255,255,0.03)\">\n              <option value=\"1\">1</option>\n              <option value=\"2\">2</option>\n              <option value=\"3\">3</option>\n            </select>\n          </label>\n          <div class=\"demo-controls\">\n            <button id=\"rotateLeftBtn\" class=\"ghost\">Rotate Left</button>\n            <button id=\"rotateRightBtn\" class=\"ghost\">Rotate Right</button>\n          </div>\n        </div>\n\n        <div style=\"margin-top:6px\" class=\"row\">\n          <button id=\"runExampleBtn\" class=\"ghost\">Run Example Sequence</button>\n          <button id=\"showCodeBtn\" class=\"ghost\">Show/Hide Code</button>\n        </div>\n\n        <hr style=\"border:none;height:1px;background:rgba(255,255,255,0.02);margin:12px 0\" />\n\n        <div class=\"info\">\n          <div class=\"small\">Size: <span id=\"sizeBadge\" class=\"badge\">0</span></div>\n          <div class=\"small\">Capacity: <span id=\"capBadge\" class=\"badge\">8</span></div>\n          <div class=\"small\">Empty: <span id=\"emptyBadge\" class=\"badge\">true</span></div>\n        </div>\n\n        <hr style=\"border:none;height:1px;background:rgba(255,255,255,0.02);margin:12px 0\" />\n\n        <div>\n          <div class=\"small\" style=\"margin-bottom:6px\">Operation Log</div>\n          <div id=\"opLog\" class=\"log\"></div>\n        </div>\n\n      </div>\n\n      <!-- Visualization + Code -->\n      <div class=\"panel visual\">\n        <div class=\"deque-viewport\">\n          <div>\n            <div class=\"deque\" id=\"dequeVisual\" aria-live=\"polite\"></div>\n            <div class=\"pointer-row\" id=\"pointerRow\"></div>\n          </div>\n        </div>\n\n        <div style=\"display:flex;gap:12px;align-items:center;justify-content:space-between;\">\n          <div class=\"small muted\">Implementation: circular buffer with resize (amortized O(1) for push/pop)</div>\n          <div style=\"display:flex;gap:10px;align-items:center\">\n            <div class=\"small\">Animation: </div>\n            <label style=\"display:flex;align-items:center;gap:6px\">\n              <input type=\"range\" id=\"speed\" min=\"50\" max=\"800\" value=\"200\" />\n            </label>\n          </div>\n        </div>\n\n        <div id=\"codeBlock\" style=\"display:none;\">\n          <div class=\"code-title\"><strong>Deque.js (source)</strong><span class=\"small muted\">Click \"Show/Hide Code\" to toggle</span></div>\n          <pre id=\"sourceCode\"></pre>\n        </div>\n\n        <div style=\"display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:6px\">\n          <div class=\"small muted\">Try inputs like: numbers, words, or JSON (will be parsed if valid)</div>\n          <div><button id=\"copyStateBtn\" class=\"ghost\">Copy State (JSON)</button></div>\n        </div>\n      </div>\n    </div>\n\n    <footer>\n      Tip: A deque supports push/pop at both ends. This demo uses a circular array and doubles capacity when full.\n    </footer>\n  </div>\n\n  <script>\n    // Deque implementation (circular buffer with resizing)\n    class Deque {\n      constructor(initialCapacity = 8) {\n        this._cap = Math.max(8, initialCapacity | 0);\n        this._buf = new Array(this._cap);\n        this._head = 0; // index of front element\n        this._len = 0;  // number of elements\n      }\n\n      _idx(i) {\n        // convert logical index i (0..len-1) to buffer index\n        return (this._head + i) % this._cap;\n      }\n\n      size() { return this._len; }\n      capacity() { return this._cap; }\n      isEmpty() { return this._len === 0; }\n\n      // internal grow: double capacity\n      _grow() {\n        const newCap = this._cap * 2;\n        const newBuf = new Array(newCap);\n        for (let i = 0; i < this._len; i++) {\n          newBuf[i] = this._buf[this._idx(i)];\n        }\n        this._buf = newBuf;\n        this._cap = newCap;\n        this._head = 0;\n      }\n\n      pushBack(value) {\n        if (this._len === this._cap) this._grow();\n        this._buf[this._idx(this._len)] = value;\n        this._len++;\n      }\n\n      pushFront(value) {\n        if (this._len === this._cap) this._grow();\n        // move head backwards (circularly)\n        this._head = (this._head - 1 + this._cap) % this._cap;\n        this._buf[this._head] = value;\n        this._len++;\n      }\n\n      popBack() {\n        if (this._len === 0) return undefined;\n        const i = this._idx(this._len - 1);\n        const val = this._buf[i];\n        this._buf[i] = undefined;\n        this._len--;\n        return val;\n      }\n\n      popFront() {\n        if (this._len === 0) return undefined;\n        const val = this._buf[this._head];\n        this._buf[this._head] = undefined;\n        this._head = (this._head + 1) % this._cap;\n        this._len--;\n        return val;\n      }\n\n      peekFront() {\n        if (this._len === 0) return undefined;\n        return this._buf[this._head];\n      }\n\n      peekBack() {\n        if (this._len === 0) return undefined;\n        return this._buf[this._idx(this._len - 1)];\n      }\n\n      clear() {\n        this._buf = new Array(this._cap);\n        this._head = 0;\n        this._len = 0;\n      }\n\n      toArray() {\n        const res = [];\n        for (let i = 0; i < this._len; i++) res.push(this._buf[this._idx(i)]);\n        return res;\n      }\n\n      // rotate left by k (front element moves to back), k >= 0\n      rotateLeft(k = 1) {\n        if (this._len === 0) return;\n        k = ((k % this._len) + this._len) % this._len;\n        this._head = (this._head + k) % this._cap;\n      }\n\n      // rotate right by k (back element moves to front)\n      rotateRight(k = 1) {\n        this.rotateLeft(-k);\n      }\n\n      // for debugging: show internal buffer and head/len\n      debugBuffer() {\n        return { head: this._head, len: this._len, cap: this._cap, buf: this._buf.slice() };\n      }\n    }\n\n    // UI wiring\n    const dq = new Deque(8);\n    const valueInput = document.getElementById('valueInput');\n    const dequeVisual = document.getElementById('dequeVisual');\n    const pointerRow = document.getElementById('pointerRow');\n    const sizeBadge = document.getElementById('sizeBadge');\n    const capBadge = document.getElementById('capBadge');\n    const emptyBadge = document.getElementById('emptyBadge');\n    const opLog = document.getElementById('opLog');\n    const speedRange = document.getElementById('speed');\n    const codeBlock = document.getElementById('codeBlock');\n    const sourceCode = document.getElementById('sourceCode');\n\n    // Buttons\n    document.getElementById('pushFrontBtn').onclick = () => performOp('pushFront');\n    document.getElementById('pushBackBtn').onclick = () => performOp('pushBack');\n    document.getElementById('popFrontBtn').onclick = () => performOp('popFront');\n    document.getElementById('popBackBtn').onclick = () => performOp('popBack');\n    document.getElementById('peekFrontBtn').onclick = () => performOp('peekFront');\n    document.getElementById('peekBackBtn').onclick = () => performOp('peekBack');\n    document.getElementById('clearBtn').onclick = () => performOp('clear');\n    document.getElementById('fillRandomBtn').onclick = () => performOp('fillRandom');\n    document.getElementById('rotateLeftBtn').onclick = () => performOp('rotateLeft');\n    document.getElementById('rotateRightBtn').onclick = () => performOp('rotateRight');\n    document.getElementById('runExampleBtn').onclick = runExample;\n    document.getElementById('showCodeBtn').onclick = () => {\n      codeBlock.style.display = codeBlock.style.display === 'none' ? 'block' : 'none';\n    };\n    document.getElementById('copyStateBtn').onclick = () => {\n      navigator.clipboard?.writeText(JSON.stringify({arr: dq.toArray(), head: dq._head, len: dq._len, cap: dq._cap}, null, 2));\n      log('State copied to clipboard');\n    };\n\n    // show source code\n    sourceCode.textContent = Deque.toString();\n\n    function parseInputValue(text) {\n      text = (text ?? '').trim();\n      if (text === '') return undefined;\n      // Try to parse JSON number/string/array/object/true/false/null\n      try {\n        return JSON.parse(text);\n      } catch (e) {\n        return text;\n      }\n    }\n\n    function log(...parts) {\n      const time = new Date().toLocaleTimeString();\n      const line = `[${time}] ${parts.join(' ')}`;\n      const el = document.createElement('div');\n      el.textContent = line;\n      opLog.prepend(el);\n    }\n\n    function render() {\n      // animate based on speed: not heavy animation, but we can transition style\n      const arr = dq.toArray();\n      dequeVisual.innerHTML = '';\n      pointerRow.innerHTML = '';\n\n      if (arr.length === 0) {\n        const empty = document.createElement('div');\n        empty.className = 'slot empty';\n        empty.style.minWidth = '160px';\n        empty.textContent = 'Deque is empty';\n        dequeVisual.appendChild(empty);\n      } else {\n        arr.forEach((v, i) => {\n          const s = document.createElement('div');\n          s.className = 'slot';\n          s.style.transitionDuration = (speedRange.value / 1000) + 's';\n          s.title = `index ${i}`;\n          s.textContent = formatVal(v);\n          dequeVisual.appendChild(s);\n        });\n      }\n\n      // pointers: show head (=front index) and back index relative to logical array\n      const headBadge = document.createElement('div');\n      headBadge.textContent = 'front';\n      headBadge.style.opacity = '0.9';\n      const backBadge = document.createElement('div');\n      backBadge.textContent = 'back';\n      backBadge.style.opacity = '0.9';\n\n      if (arr.length === 0) {\n        pointerRow.appendChild(headBadge);\n      } else if (arr.length === 1) {\n        pointerRow.appendChild(headBadge);\n      } else {\n        // align labels: create placeholders to position them under elements\n        for (let i = 0; i < arr.length; i++) {\n          const spot = document.createElement('div');\n          spot.style.minWidth = '64px';\n          spot.style.textAlign = 'center';\n          spot.style.fontSize = '12px';\n          spot.style.opacity = '0.9';\n          if (i === 0) spot.textContent = 'front';\n          else if (i === arr.length - 1) spot.textContent = 'back';\n          pointerRow.appendChild(spot);\n        }\n      }\n\n      sizeBadge.textContent = dq.size();\n      capBadge.textContent = dq.capacity();\n      emptyBadge.textContent = dq.isEmpty() ? 'true' : 'false';\n    }\n\n    function formatVal(v) {\n      if (v === undefined) return 'undefined';\n      if (v === null) return 'null';\n      if (typeof v === 'object') return JSON.stringify(v);\n      return String(v);\n    }\n\n    function performOp(op) {\n      const valRaw = valueInput.value;\n      const parsed = parseInputValue(valRaw);\n\n      switch (op) {\n        case 'pushFront':\n          if (valRaw.trim() === '') { log('pushFront: no value provided'); return; }\n          dq.pushFront(parsed);\n          log(`pushFront(${formatVal(parsed)})`);\n          break;\n        case 'pushBack':\n          if (valRaw.trim() === '') { log('pushBack: no value provided'); return; }\n          dq.pushBack(parsed);\n          log(`pushBack(${formatVal(parsed)})`);\n          break;\n        case 'popFront':\n          {\n            const r = dq.popFront();\n            log(`popFront() -> ${formatVal(r)}`);\n          }\n          break;\n        case 'popBack':\n          {\n            const r = dq.popBack();\n            log(`popBack() -> ${formatVal(r)}`);\n          }\n          break;\n        case 'peekFront':\n          {\n            const r = dq.peekFront();\n            log(`peekFront() -> ${formatVal(r)}`);\n          }\n          break;\n        case 'peekBack':\n          {\n            const r = dq.peekBack();\n            log(`peekBack() -> ${formatVal(r)}`);\n          }\n          break;\n        case 'clear':\n          dq.clear();\n          log('clear()');\n          break;\n        case 'fillRandom':\n          dq.clear();\n          const n = 6 + Math.floor(Math.random() * 6);\n          for (let i = 0; i < n; i++) dq.pushBack(Math.floor(Math.random() * 100));\n          log(`fillRandom(${n} items)`);\n          break;\n        case 'rotateLeft':\n          dq.rotateLeft(parseInt(document.getElementById('rotateAmount').value || '1', 10));\n          log(`rotateLeft(${document.getElementById('rotateAmount').value})`);\n          break;\n        case 'rotateRight':\n          dq.rotateRight(parseInt(document.getElementById('rotateAmount').value || '1', 10));\n          log(`rotateRight(${document.getElementById('rotateAmount').value})`);\n          break;\n      }\n      render();\n    }\n\n    // Example sequence to illustrate behavior and resizing\n    async function runExample() {\n      // We'll perform a sequence with pauses\n      const seq = [\n        ['pushBack', 'A'],\n        ['pushBack', 'B'],\n        ['pushFront', '0'],\n        ['pushBack', 'C'],\n        ['pushBack', 'D'],\n        ['pushBack', 'E'],\n        ['pushBack', 'F'],\n        ['pushBack', 'G'],\n        ['pushBack', 'H'],\n        ['popFront'],\n        ['popBack'],\n        ['pushFront', 'Z'],\n        ['rotateLeft', 2],\n        ['rotateRight', 1],\n      ];\n      const pause = t => new Promise(r => setTimeout(r, t));\n      const spd = Math.max(80, 900 - speedRange.value); // shorter wait for faster slider\n      for (const step of seq) {\n        const [op, arg] = step;\n        if (op === 'pushBack') {\n          valueInput.value = String(arg);\n          performOp('pushBack');\n        } else if (op === 'pushFront') {\n          valueInput.value = String(arg);\n          performOp('pushFront');\n        } else if (op === 'popFront') performOp('popFront');\n        else if (op === 'popBack') performOp('popBack');\n        else if (op === 'rotateLeft') {\n          document.getElementById('rotateAmount').value = String(arg || 1);\n          performOp('rotateLeft');\n        } else if (op === 'rotateRight') {\n          document.getElementById('rotateAmount').value = String(arg || 1);\n          performOp('rotateRight');\n        }\n        await pause(spd);\n      }\n      log('Example sequence finished');\n    }\n\n    // Initial render\n    render();\n\n    // simple keyboard shortcuts\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter') performOp('pushBack');\n      if (e.key === 'F2') performOp('pushFront');\n      if (e.key === 'Delete') performOp('popBack');\n    });\n\n    // Accessibility helpers: announce changes\n    const observer = new MutationObserver(() => {\n      // Could do ARIA live updates if needed\n    });\n    observer.observe(dequeVisual, { childList: true, subtree: true });\n\n    // Show the Deque class source nicely\n    // Already put Deque.toString() earlier.\n\n    // Small helper: show internal debug on double-click visual\n    dequeVisual.addEventListener('dblclick', () => {\n      const dbg = dq.debugBuffer();\n      log('debugBuffer ->', JSON.stringify(dbg));\n      alert('Internal buffer snapshot (see log):\\n' + JSON.stringify(dbg, null, 2));\n    });\n\n    // seed with a couple values for convenience\n    dq.pushBack(10);\n    dq.pushBack(20);\n    log('Initialized with [10, 20]');\n    render();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Deque"
    }
  ],
  "topic": "Deque",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}