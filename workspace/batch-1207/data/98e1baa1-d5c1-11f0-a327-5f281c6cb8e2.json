{
  "id": "98e1baa1-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:16:57.374Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Bubble Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\"/>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n<title>Bubble Sort Visualizer</title>\n<style>\n  :root{\n    --bg:#0f1724;\n    --panel:#0b1220;\n    --accent:#3b82f6;\n    --accent-2:#06b6d4;\n    --muted:#94a3b8;\n    --good:#10b981;\n    --danger:#ef4444;\n    --bar:#60a5fa;\n    --bar-2:#93c5fd;\n    --text:#e6eef8;\n  }\n  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#081024);color:var(--text);font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",\"Noto Sans\",Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}\n  .container{max-width:1100px;margin:28px auto;padding:20px;box-sizing:border-box;}\n  header{display:flex;align-items:center;gap:16px;margin-bottom:16px;}\n  h1{font-size:20px;margin:0;}\n  .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:18px;}\n  .controls > *{background:var(--panel);padding:10px;border-radius:8px;box-shadow:inset 0 -2px 0 rgba(255,255,255,0.02);}\n  label{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:13px;}\n  input[type=range]{width:180px;}\n  .btn{background:linear-gradient(180deg,var(--accent),#2563eb);border:0;color:white;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;}\n  .btn.secondary{background:linear-gradient(180deg,var(--panel),#0b1220);border:1px solid rgba(255,255,255,0.03);color:var(--text);}\n  .btn.warn{background:linear-gradient(180deg,var(--danger),#b91c1c);}\n  .btn:disabled{opacity:0.5;cursor:not-allowed;}\n  .layout{display:grid;grid-template-columns:1fr 340px;gap:18px;align-items:start;}\n  .visual{background:linear-gradient(180deg,#071022,#02101a);padding:12px;border-radius:10px;min-height:320px;display:flex;flex-direction:column;gap:8px;}\n  .bars{flex:1;display:flex;align-items:flex-end;gap:4px;padding:6px;height:360px;border-radius:6px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);overflow:hidden;}\n  .bar{flex:1 1 auto;display:flex;align-items:flex-end;justify-content:center;position:relative;background:linear-gradient(180deg,var(--bar),var(--bar-2));border-radius:4px;transition:height 200ms ease, background-color 120ms ease, transform 200ms ease;box-shadow:0 1px 0 rgba(255,255,255,0.02) inset;}\n  .bar.small{margin:0 2px;}\n  .bar-value{position:absolute;top:6px;left:6px;font-size:11px;color:rgba(255,255,255,0.85);font-weight:700}\n  .bar.compare{background:linear-gradient(180deg,#f59e0b,#f97316);transform:scaleX(1.02);z-index:2;}\n  .bar.swap{background:linear-gradient(180deg,#ef4444,#fb7185);transform:scaleX(1.05) translateY(-4px);z-index:3;}\n  .bar.sorted{background:linear-gradient(180deg,#10b981,#34d399);box-shadow:0 2px 8px rgba(16,185,129,0.08);z-index:1;}\n  .sidebar{background:linear-gradient(180deg,#041022,#071428);padding:12px;border-radius:10px;min-height:360px;display:flex;flex-direction:column;gap:12px;}\n  .row{display:flex;justify-content:space-between;gap:8px;align-items:center;}\n  .stats{display:flex;gap:10px;flex-wrap:wrap;}\n  .stat{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;min-width:78px;text-align:center;}\n  .stat .label{font-size:12px;color:var(--muted);} .stat .value{font-weight:700;font-size:16px;margin-top:4px;}\n  .pseudocode{background:linear-gradient(180deg,#061227,#02101a);padding:10px;border-radius:8px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;font-size:13px;color:var(--muted);line-height:1.5;max-height:220px;overflow:auto;}\n  .pc-line{padding:4px 6px;border-radius:6px;}\n  .pc-line.current{background:linear-gradient(90deg,rgba(59,130,246,0.12),transparent);color:var(--text);font-weight:600;}\n  .footer{margin-top:10px;font-size:13px;color:var(--muted);display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;}\n  .small{font-size:12px;color:var(--muted);}\n  .toggle{display:inline-flex;align-items:center;gap:8px;}\n  .info{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;font-size:13px;}\n  .controls .input-group{display:flex;flex-direction:column;}\n  @media (max-width:880px){\n    .layout{grid-template-columns:1fr; }\n    .sidebar{order:2}\n  }\n</style>\n</head>\n<body>\n  <div class=\"container\">\n    <header>\n      <h1>Bubble Sort Visualizer</h1>\n      <div class=\"small\">Interactive demonstration of Bubble Sort — compare, swap, and watch the array get sorted step by step.</div>\n    </header>\n\n    <div class=\"controls\">\n      <div style=\"display:flex;gap:8px;align-items:center;\">\n        <button id=\"startBtn\" class=\"btn\">Start</button>\n        <button id=\"pauseBtn\" class=\"btn secondary\" disabled>Pause</button>\n        <button id=\"stepBtn\" class=\"btn secondary\">Step</button>\n        <button id=\"shuffleBtn\" class=\"btn secondary\">Shuffle</button>\n        <button id=\"resetBtn\" class=\"btn secondary\">Reset</button>\n      </div>\n\n      <div class=\"input-group\" title=\"Number of elements\">\n        <label><span style=\"min-width:80px;display:inline-block;color:var(--muted)\">Size</span>\n          <input id=\"sizeRange\" type=\"range\" min=\"6\" max=\"80\" value=\"30\">\n          <span id=\"sizeVal\" style=\"min-width:36px;display:inline-block;text-align:right;color:var(--muted);padding-left:6px\">30</span>\n        </label>\n      </div>\n\n      <div class=\"input-group\" title=\"Delay between steps in milliseconds (lower is faster)\">\n        <label><span style=\"min-width:80px;display:inline-block;color:var(--muted)\">Speed (ms)</span>\n          <input id=\"speedRange\" type=\"range\" min=\"10\" max=\"1000\" value=\"120\">\n          <span id=\"speedVal\" style=\"min-width:46px;display:inline-block;text-align:right;color:var(--muted);padding-left:6px\">120</span>\n        </label>\n      </div>\n\n      <div style=\"display:flex;gap:8px;align-items:center;\">\n        <label style=\"cursor:pointer\"><input id=\"orderToggle\" type=\"checkbox\"> Descending</label>\n        <label style=\"cursor:pointer\"><input id=\"showValues\" type=\"checkbox\" checked> Show values</label>\n      </div>\n    </div>\n\n    <div class=\"layout\">\n      <div class=\"visual\">\n        <div style=\"display:flex;justify-content:space-between;align-items:center;\">\n          <div class=\"small\">Array Visualization</div>\n          <div class=\"small\" id=\"statusText\">Idle</div>\n        </div>\n\n        <div id=\"bars\" class=\"bars\" aria-hidden=\"true\"></div>\n\n        <div style=\"display:flex;justify-content:space-between;align-items:center;\">\n          <div class=\"small\">Blue = normal • Orange = comparing • Red = swapping • Green = sorted</div>\n          <div class=\"small\" id=\"progressText\">0%</div>\n        </div>\n      </div>\n\n      <aside class=\"sidebar\">\n        <div class=\"row\">\n          <div class=\"small\">Statistics</div>\n          <div class=\"small\" id=\"modeLabel\">Mode: Bubble Sort</div>\n        </div>\n\n        <div class=\"stats\">\n          <div class=\"stat\"><div class=\"label\">Comparisons</div><div id=\"compVal\" class=\"value\">0</div></div>\n          <div class=\"stat\"><div class=\"label\">Swaps</div><div id=\"swapVal\" class=\"value\">0</div></div>\n          <div class=\"stat\"><div class=\"label\">Steps</div><div id=\"stepVal\" class=\"value\">0</div></div>\n          <div class=\"stat\"><div class=\"label\">Size</div><div id=\"sizeShow\" class=\"value\">30</div></div>\n        </div>\n\n        <div>\n          <div style=\"margin-bottom:6px;\" class=\"small\">Pseudocode</div>\n          <div id=\"pseudocode\" class=\"pseudocode\">\n            <div id=\"pc0\" class=\"pc-line\">function bubbleSort(A)</div>\n            <div id=\"pc1\" class=\"pc-line\">  n = A.length</div>\n            <div id=\"pc2\" class=\"pc-line\">  for i from 0 to n-1</div>\n            <div id=\"pc3\" class=\"pc-line\">    for j from 0 to n-i-2</div>\n            <div id=\"pc4\" class=\"pc-line\">      if A[j] > A[j+1]</div>\n            <div id=\"pc5\" class=\"pc-line\">        swap A[j] and A[j+1]</div>\n            <div id=\"pc6\" class=\"pc-line\">      end if</div>\n            <div id=\"pc7\" class=\"pc-line\">    end for</div>\n            <div id=\"pc8\" class=\"pc-line\">  end for</div>\n            <div id=\"pc9\" class=\"pc-line\">end function</div>\n          </div>\n        </div>\n\n        <div>\n          <div class=\"small\">Notes</div>\n          <div class=\"info\" style=\"margin-top:6px;\">\n            Bubble Sort repeatedly steps through the list, compares adjacent elements and swaps them if they are in the wrong order. Best: O(n), Average/Worst: O(n^2). Stable. In-place.\n          </div>\n        </div>\n\n      </aside>\n    </div>\n\n    <div class=\"footer\">\n      <div class=\"small\">Try Step to move one comparison at a time, or Start to animate continuously. Toggle Descending to reverse the comparison.</div>\n      <div class=\"small\">Built for demonstration — values and speed adjustable.</div>\n    </div>\n  </div>\n\n<script>\n(function(){\n  // DOM elements\n  const barsEl = document.getElementById('bars');\n  const startBtn = document.getElementById('startBtn');\n  const pauseBtn = document.getElementById('pauseBtn');\n  const stepBtn = document.getElementById('stepBtn');\n  const shuffleBtn = document.getElementById('shuffleBtn');\n  const resetBtn = document.getElementById('resetBtn');\n  const sizeRange = document.getElementById('sizeRange');\n  const sizeVal = document.getElementById('sizeVal');\n  const sizeShow = document.getElementById('sizeShow');\n  const speedRange = document.getElementById('speedRange');\n  const speedVal = document.getElementById('speedVal');\n  const orderToggle = document.getElementById('orderToggle');\n  const showValues = document.getElementById('showValues');\n  const compVal = document.getElementById('compVal');\n  const swapVal = document.getElementById('swapVal');\n  const stepVal = document.getElementById('stepVal');\n  const statusText = document.getElementById('statusText');\n  const progressText = document.getElementById('progressText');\n  const pseudocode = {};\n  for(let i=0;i<10;i++) pseudocode[i]=document.getElementById('pc'+i);\n\n  // State\n  let arr = [];\n  let n = parseInt(sizeRange.value,10);\n  let running = false;\n  let comparisons = 0;\n  let swaps = 0;\n  let steps = 0;\n  let iIndex = 0, jIndex = 0; // bubble indices\n  let sorted = false;\n  let descending = false;\n  let automaticLoopId = null;\n  let speed = parseInt(speedRange.value,10); // ms\n  let showVals = showValues.checked;\n\n  // Helpers\n  function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }\n\n  function createArray(size){\n    // create random array 10..100\n    const a = [];\n    for(let i=0;i<size;i++){\n      a.push(randInt(5,100));\n    }\n    return a;\n  }\n\n  function renderBars(){\n    barsEl.innerHTML = '';\n    const max = Math.max(...arr);\n    const minHeight = 6;\n    const gap = Math.max(1, Math.floor(180/arr.length));\n    arr.forEach((v,idx)=>{\n      const bar = document.createElement('div');\n      bar.className = 'bar';\n      if(arr.length>50) bar.classList.add('small');\n      bar.style.height = (v/max*100) + '%';\n      bar.dataset.index = idx;\n      if(showVals){\n        const label = document.createElement('div');\n        label.className = 'bar-value';\n        label.style.display = 'block';\n        label.textContent = v;\n        bar.appendChild(label);\n      }\n      barsEl.appendChild(bar);\n    });\n    sizeShow.textContent = arr.length;\n    sizeVal.textContent = arr.length;\n    sizeVal.title = arr.length;\n  }\n\n  function updateStats(){\n    compVal.textContent = comparisons;\n    swapVal.textContent = swaps;\n    stepVal.textContent = steps;\n  }\n\n  function resetStats(){\n    comparisons=swaps=steps=0;\n    updateStats();\n  }\n\n  function highlightPC(line){\n    for(let k in pseudocode) pseudocode[k].classList.remove('current');\n    if(pseudocode[line]) pseudocode[line].classList.add('current');\n  }\n\n  function setStatus(text){\n    statusText.textContent = text;\n  }\n\n  function setProgress(){\n    if(arr.length<=1) return progressText.textContent='100%';\n    const totalPasses = arr.length;\n    const prog = Math.min(100, Math.floor((iIndex/totalPasses)*100));\n    progressText.textContent = prog + '%';\n  }\n\n  function swapArray(a,b){\n    const tmp = arr[a]; arr[a]=arr[b]; arr[b]=tmp;\n  }\n\n  function colorReset(){\n    const bars = barsEl.children;\n    for(let b of bars){\n      b.classList.remove('compare','swap','sorted');\n    }\n  }\n\n  function markSorted(final=true){\n    const bars = barsEl.children;\n    for(let idx=0; idx<bars.length; idx++){\n      bars[idx].classList.remove('compare','swap');\n      bars[idx].classList.add('sorted');\n    }\n    if(final){ setStatus('Sorted'); highlightPC(8); }\n  }\n\n  // Step execution: executes one comparison (and potential swap), advances indices\n  async function doOneStep(){\n    if(sorted) return;\n    steps++;\n    updateStats();\n\n    const n = arr.length;\n    // If starting new run:\n    if(iIndex >= n-1){\n      // finished\n      sorted = true;\n      colorReset();\n      markSorted(true);\n      running=false;\n      startBtn.disabled = false;\n      pauseBtn.disabled = true;\n      stepBtn.disabled = true;\n      return;\n    }\n\n    // If inner loop finished, advance outer\n    if(jIndex >= n - iIndex - 1){\n      // end inner loop\n      highlightPC(7); // end for inner\n      jIndex = 0;\n      iIndex++;\n      highlightPC(2); // outer loop\n      setStatus(`Pass ${iIndex}/${n-1}`);\n      setProgress();\n      // small pause to show pass boundary\n      await sleep(Math.max(30, speed/3));\n      if(iIndex >= n-1){\n        // finished\n        sorted = true;\n        colorReset();\n        markSorted(true);\n        running=false;\n        startBtn.disabled = false;\n        pauseBtn.disabled = true;\n        stepBtn.disabled = true;\n        return;\n      }\n    }\n\n    // Now perform inner comparison at jIndex\n    const a = jIndex;\n    const b = jIndex+1;\n\n    // highlight comparison\n    colorReset();\n    const bars = barsEl.children;\n    if(bars[a]) bars[a].classList.add('compare');\n    if(bars[b]) bars[b].classList.add('compare');\n\n    highlightPC(4); // if A[j] > A[j+1]\n    setStatus(`Comparing indices ${a} and ${b}`);\n    await sleep(Math.max(20, speed/4));\n\n    comparisons++;\n    updateStats();\n\n    const shouldSwap = descending ? (arr[a] < arr[b]) : (arr[a] > arr[b]);\n    if(shouldSwap){\n      highlightPC(5); // swap line\n      setStatus(`Swapping ${arr[a]} ↔ ${arr[b]}`);\n      // visually mark swap\n      if(bars[a]) bars[a].classList.remove('compare');\n      if(bars[b]) bars[b].classList.remove('compare');\n      if(bars[a]) bars[a].classList.add('swap');\n      if(bars[b]) bars[b].classList.add('swap');\n\n      await animateSwap(a,b);\n      swaps++;\n      updateStats();\n    } else {\n      // no swap\n      setStatus(`No swap needed`);\n      await sleep(Math.max(20, speed/4));\n    }\n\n    // move to next j\n    jIndex++;\n    highlightPC(3); // inner for\n    setProgress();\n\n    // if at end of inner loop (jIndex now equals n-iIndex-1) we will handle next call\n  }\n\n  function sleep(ms){ return new Promise(res=>setTimeout(res,ms)); }\n\n  // animate swap by swapping heights and value labels\n  async function animateSwap(a,b){\n    const bars = barsEl.children;\n    const barA = bars[a];\n    const barB = bars[b];\n    if(!barA || !barB) return;\n    // swap heights and values\n    const hA = barA.style.height;\n    const hB = barB.style.height;\n\n    // swap dataset text if exists\n    const labelA = barA.querySelector('.bar-value');\n    const labelB = barB.querySelector('.bar-value');\n\n    // animate: briefly translate to emphasize\n    barA.style.transition = `height ${Math.max(80, speed)}ms ease, transform ${Math.max(80, speed/6)}ms`;\n    barB.style.transition = `height ${Math.max(80, speed)}ms ease, transform ${Math.max(80, speed/6)}ms`;\n    // perform height swap\n    barA.style.height = hB;\n    barB.style.height = hA;\n\n    if(labelA && labelB){\n      // update text after animation to match underlying arr values\n      await sleep(Math.max(80, speed));\n      labelA.textContent = arr[b];\n      labelB.textContent = arr[a];\n    } else {\n      await sleep(Math.max(80, speed));\n    }\n\n    // swap in array\n    swapArray(a,b);\n\n    // cleanup\n    if(barA) barA.classList.remove('swap');\n    if(barB) barB.classList.remove('swap');\n    barA.style.transition = '';\n    barB.style.transition = '';\n  }\n\n  // Control loop when running\n  async function runLoop(){\n    startBtn.disabled = true;\n    pauseBtn.disabled = false;\n    stepBtn.disabled = false;\n    running = true;\n    setStatus('Running');\n    while(running){\n      await doOneStep();\n      // if finished inside doOneStep it will set running=false\n      if(!running) break;\n      // wait according to speed\n      await sleep(speed);\n    }\n    startBtn.disabled = false;\n    pauseBtn.disabled = true;\n    if(sorted) setStatus('Sorted');\n  }\n\n  // Public control functions\n  function start(){\n    if(sorted) return;\n    if(running) return;\n    runLoop();\n  }\n\n  function pause(){\n    running=false;\n    pauseBtn.disabled=true;\n    startBtn.disabled=false;\n    setStatus('Paused');\n  }\n\n  function step(){\n    if(sorted) return;\n    if(running) return;\n    // perform a single step\n    doOneStep();\n  }\n\n  function shuffle(){\n    // create new array and reset indices\n    n = parseInt(sizeRange.value,10);\n    arr = createArray(n);\n    iIndex = 0; jIndex = 0; sorted=false;\n    resetStats();\n    renderBars();\n    colorReset();\n    highlightPC(1);\n    setStatus('Shuffled');\n    setProgress();\n    stepBtn.disabled=false;\n    startBtn.disabled=false;\n    pauseBtn.disabled=true;\n  }\n\n  function reset(){\n    // reset to nearly sorted array (optional)\n    n = parseInt(sizeRange.value,10);\n    arr = [];\n    // create sorted array to demonstrate bubble performance optionally\n    for(let t=0;t<n;t++) arr.push(Math.round( (t+1)/n * 100));\n    // slightly shuffle a few elements to make interesting\n    for(let k=0;k<Math.min(10,n);k++){\n      const a=randInt(0,n-1), b=randInt(0,n-1);\n      const tmp=arr[a]; arr[a]=arr[b]; arr[b]=tmp;\n    }\n    iIndex=0; jIndex=0; sorted=false;\n    resetStats();\n    renderBars();\n    colorReset();\n    highlightPC(1);\n    setStatus('Reset to near-sorted');\n    setProgress();\n    stepBtn.disabled=false;\n    startBtn.disabled=false;\n    pauseBtn.disabled=true;\n  }\n\n  // Event bindings\n  startBtn.addEventListener('click', ()=>{\n    start();\n  });\n  pauseBtn.addEventListener('click', ()=>{\n    pause();\n  });\n  stepBtn.addEventListener('click', ()=>{\n    step();\n  });\n  shuffleBtn.addEventListener('click', ()=>{\n    shuffle();\n  });\n  resetBtn.addEventListener('click', ()=>{\n    reset();\n  });\n\n  sizeRange.addEventListener('input', (e)=>{\n    sizeVal.textContent = e.target.value;\n  });\n  sizeRange.addEventListener('change', (e)=>{\n    sizeVal.textContent = e.target.value;\n    sizeShow.textContent = e.target.value;\n    // regenerate new array\n    n = parseInt(e.target.value,10);\n    arr = createArray(n);\n    iIndex=0; jIndex=0; sorted=false;\n    resetStats();\n    renderBars();\n    colorReset();\n    highlightPC(1);\n    setStatus('Size changed');\n  });\n\n  speedRange.addEventListener('input', (e)=>{\n    speedVal.textContent = e.target.value;\n    speed = parseInt(e.target.value,10);\n  });\n\n  orderToggle.addEventListener('change', (e)=>{\n    descending = e.target.checked;\n    setStatus(descending ? 'Descending order' : 'Ascending order');\n  });\n\n  showValues.addEventListener('change', (e)=>{\n    showVals = e.target.checked;\n    renderBars();\n  });\n\n  // Initialize\n  function init(){\n    n = parseInt(sizeRange.value,10);\n    speed = parseInt(speedRange.value,10);\n    arr = createArray(n);\n    iIndex = 0; jIndex = 0; sorted=false;\n    resetStats();\n    renderBars();\n    highlightPC(1);\n    setStatus('Idle');\n    setProgress();\n  }\n  init();\n\n  // Expose nothing; all internal\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Bubble Sort"
    }
  ],
  "topic": "Bubble Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}