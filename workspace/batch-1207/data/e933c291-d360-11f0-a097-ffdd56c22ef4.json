{
  "id": "e933c291-d360-11f0-a097-ffdd56c22ef4",
  "timestamp": "2025-12-07T11:38:44.936Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Quick Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Quick Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --accent:#1fb6ff;\n      --muted:#94a3b8;\n      --good:#16a34a;\n      --bad:#ef4444;\n      --card:#0b1220;\n    }\n    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;}\n    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071027 0%,var(--bg) 100%);color:#e6eef8}\n    .app {\n      max-width:1100px;margin:24px auto;padding:20px;display:grid;grid-template-columns: 360px 1fr;gap:20px;\n    }\n\n    .panel{\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      border:1px solid rgba(255,255,255,0.03);\n      padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.6);\n    }\n\n    h1{font-size:20px;margin:6px 0 12px;color:#eaf6ff}\n    .controls{display:grid;gap:10px}\n    .row{display:flex;gap:8px;align-items:center}\n    label{font-size:13px;color:var(--muted);min-width:110px}\n    select,input[type=range],input[type=number]{width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:#e6eef8}\n    button{padding:8px 12px;background:linear-gradient(180deg,var(--accent),#0ea5e9);border:none;color:#022;cursor:pointer;border-radius:8px;font-weight:600}\n    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e6eef8}\n    .small{padding:6px 8px;font-size:13px;border-radius:6px}\n    .controls .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}\n    .visual {\n      display:flex;flex-direction:column;gap:12px;\n    }\n    .canvas {\n      height:420px;background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(0,0,0,0.02));border-radius:10px;padding:12px;display:flex;align-items:end;gap:6px;border:1px solid rgba(255,255,255,0.03);\n    }\n    .bar{\n      flex:1 1 auto;background:linear-gradient(180deg,#2b78a6,#1a536f);height:40px;border-radius:4px;display:flex;align-items:flex-end;justify-content:center;color:#022;font-weight:700;transition:all 250ms ease;\n      position:relative;\n    }\n    .bar span{transform:translateY(6px);font-size:12px;color:#e6eef8}\n    .bar.pivot{background:linear-gradient(180deg,#ffd166,#ffb86b);box-shadow:0 4px 10px rgba(255,160,60,0.12)}\n    .bar.compare{background:linear-gradient(180deg,#fb7185,#f43f5e);box-shadow:0 4px 10px rgba(244,63,94,0.12)}\n    .bar.swapping{background:linear-gradient(180deg,#7dd3fc,#38bdf8);box-shadow:0 4px 10px rgba(59,130,246,0.10)}\n    .bar.sorted{background:linear-gradient(180deg,#86efac,#5eead4);box-shadow:0 4px 12px rgba(34,197,94,0.10)}\n    .bar.index{position:absolute;top:-18px;font-size:11px;color:var(--muted)}\n    .info{display:flex;gap:10px;align-items:center;flex-wrap:wrap}\n    .stat {background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;font-size:13px;color:var(--muted)}\n    pre.code {background:#07172a;padding:10px;border-radius:8px;overflow:auto;color:#dbeafe;font-size:12px;line-height:1.4;margin:0;border:1px solid rgba(255,255,255,0.03)}\n    .code-line{padding:3px 8px;border-radius:4px}\n    .code-line.active{background:linear-gradient(90deg,rgba(31,182,255,0.07),rgba(31,182,255,0.03));border-left:3px solid var(--accent)}\n    .stack {background:linear-gradient(90deg,rgba(255,255,255,0.02),transparent);padding:8px;border-radius:8px;min-height:60px;color:var(--muted);font-size:13px}\n    .stack-item{padding:6px 8px;border-radius:6px;background:rgba(255,255,255,0.01);margin-bottom:6px;border:1px solid rgba(255,255,255,0.02);display:flex;justify-content:space-between;align-items:center}\n    .legend{display:flex;gap:8px;flex-wrap:wrap}\n    .legend-item{display:flex;gap:6px;align-items:center;padding:6px 8px;border-radius:6px;background:rgba(255,255,255,0.02);font-size:13px}\n    .color-box{width:14px;height:14px;border-radius:3px}\n    footer{grid-column:1/-1;margin-top:12px;color:var(--muted);font-size:13px}\n    .inputs{display:flex;gap:8px;align-items:center}\n    textarea{width:100%;height:64px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);color:#e6eef8;resize:vertical}\n    .top-row{display:flex;align-items:center;gap:10px;justify-content:space-between}\n    .muted{color:var(--muted);font-size:13px}\n    @media (max-width:980px){\n      .app{grid-template-columns:1fr; padding:12px}\n      .panel{margin-bottom:12px}\n    }\n  </style>\n</head>\n<body>\n  <div class=\"app\">\n    <div class=\"panel\">\n      <div class=\"top-row\">\n        <h1>Quick Sort Visualizer</h1>\n        <div class=\"muted\">Interactive step-by-step demo</div>\n      </div>\n\n      <div style=\"height:10px\"></div>\n\n      <div class=\"controls\">\n        <div class=\"row\">\n          <label>Array size</label>\n          <input id=\"size\" type=\"number\" min=\"5\" max=\"100\" value=\"30\">\n        </div>\n\n        <div class=\"row\">\n          <label>Value range</label>\n          <div style=\"display:flex;gap:6px;width:100%\">\n            <input id=\"minVal\" type=\"number\" value=\"10\" style=\"width:70px\">\n            <input id=\"maxVal\" type=\"number\" value=\"100\" style=\"width:70px\">\n            <div style=\"flex:1\"></div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <label>Pivot strategy</label>\n          <select id=\"pivot\">\n            <option value=\"last\">Last element (Lomuto)</option>\n            <option value=\"first\">First element (Lomuto variant)</option>\n            <option value=\"median\">Median-of-three</option>\n            <option value=\"random\">Random pivot</option>\n          </select>\n        </div>\n\n        <div class=\"row\">\n          <label>Order</label>\n          <select id=\"order\">\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n        </div>\n\n        <div class=\"row\">\n          <label>Speed</label>\n          <input id=\"speed\" type=\"range\" min=\"0\" max=\"1000\" value=\"250\">\n        </div>\n\n        <div class=\"grid\">\n          <button id=\"generate\">Generate Array</button>\n          <button id=\"shuffle\" class=\"secondary\">Shuffle</button>\n          <button id=\"randomPreset\" class=\"secondary\">Few/Many Presets</button>\n        </div>\n\n        <div class=\"grid\">\n          <button id=\"start\" class=\"small\">Start</button>\n          <button id=\"step\" class=\"small secondary\">Step</button>\n          <button id=\"pause\" class=\"small secondary\">Pause</button>\n        </div>\n\n        <div class=\"grid\">\n          <button id=\"reset\" class=\"secondary\">Reset</button>\n          <button id=\"showCode\" class=\"secondary\">Toggle Pseudocode</button>\n        </div>\n\n        <div style=\"height:6px\"></div>\n\n        <div class=\"info\">\n          <div class=\"stat\">Comparisons: <strong id=\"comp\">0</strong></div>\n          <div class=\"stat\">Swaps: <strong id=\"swap\">0</strong></div>\n          <div class=\"stat\">Steps: <strong id=\"steps\">0</strong></div>\n        </div>\n\n        <div style=\"height:10px\"></div>\n\n        <div class=\"legend\">\n          <div class=\"legend-item\"><div class=\"color-box\" style=\"background:linear-gradient(180deg,#ffd166,#ffb86b)\"></div>Pivot</div>\n          <div class=\"legend-item\"><div class=\"color-box\" style=\"background:linear-gradient(180deg,#fb7185,#f43f5e)\"></div>Comparing</div>\n          <div class=\"legend-item\"><div class=\"color-box\" style=\"background:linear-gradient(180deg,#7dd3fc,#38bdf8)\"></div>Swapping</div>\n          <div class=\"legend-item\"><div class=\"color-box\" style=\"background:linear-gradient(180deg,#86efac,#5eead4)\"></div>Sorted</div>\n        </div>\n\n        <div style=\"height:8px\"></div>\n\n        <label>Manual array (comma separated)</label>\n        <textarea id=\"manual\" placeholder=\"e.g., 5,3,8,1,2\"></textarea>\n        <div class=\"row\">\n          <button id=\"loadManual\">Load Manual Array</button>\n          <button id=\"explain\" class=\"secondary\">Explain Steps</button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"panel visual\">\n      <div style=\"display:flex;justify-content:space-between;align-items:center\">\n        <div style=\"display:flex;gap:10px;align-items:center\">\n          <div class=\"muted\">Array</div>\n          <div id=\"rangeLabel\" class=\"muted\"></div>\n        </div>\n        <div style=\"display:flex;gap:8px;align-items:center\">\n          <div class=\"muted\">Recursion stack:</div>\n          <div id=\"stack\" class=\"stack\" style=\"min-width:220px\"></div>\n        </div>\n      </div>\n\n      <div id=\"canvas\" class=\"canvas\"></div>\n\n      <div style=\"display:flex;gap:12px;align-items:center;justify-content:space-between\">\n        <div style=\"width:64%\">\n          <pre id=\"pseudocode\" class=\"code\" style=\"display:block\"></pre>\n        </div>\n        <div style=\"width:34%;display:flex;flex-direction:column;gap:10px\">\n          <div style=\"display:flex;gap:8px;align-items:center\">\n            <div class=\"muted\">Current action:</div>\n            <div id=\"action\" class=\"stat\">Idle</div>\n          </div>\n          <div style=\"display:flex;gap:8px;align-items:center\">\n            <div class=\"muted\">Low / High</div>\n            <div class=\"stat\" id=\"rangeDisplay\">-</div>\n          </div>\n          <div style=\"display:flex;gap:8px;align-items:center\">\n            <div class=\"muted\">Pivot index</div>\n            <div class=\"stat\" id=\"pivotDisplay\">-</div>\n          </div>\n          <div style=\"display:flex;gap:8px;align-items:center\">\n            <div class=\"muted\">Notes</div>\n            <div class=\"stat\" id=\"notes\">-</div>\n          </div>\n        </div>\n      </div>\n\n      <footer>\n        Quick Sort (Lomuto partition by default). Use Step to walk through each action. Median-of-three and random pivot strategies are available.\n      </footer>\n    </div>\n  </div>\n\n<script>\n(function(){\n  // Utility\n  const el = id => document.getElementById(id);\n  let arr = [];\n  let bars = [];\n  let generator = null;\n  let running = false;\n  let paused = false;\n  let lastAction = null;\n  let comps = 0, swaps = 0, steps = 0;\n  let speed = 250;\n  let order = 'asc';\n  let pivotStrategy = 'last';\n  let stackState = [];\n\n  // Pseudocode lines (Lomuto)\n  const codeLines = [\n    \"function quickSort(A, low, high):\",\n    \"  if low < high:\",\n    \"    p = partition(A, low, high)\",\n    \"    quickSort(A, low, p - 1)\",\n    \"    quickSort(A, p + 1, high)\",\n    \"\",\n    \"function partition(A, low, high):\",\n    \"  pivot = choosePivot(A, low, high)\",\n    \"  swap(A[pivotIndex], A[high])  // move pivot to end\",\n    \"  i = low\",\n    \"  for j = low to high - 1:\",\n    \"    if compare(A[j], pivot):\",\n    \"      swap(A[i], A[j])\",\n    \"      i = i + 1\",\n    \"  swap(A[i], A[high])\",\n    \"  return i\"\n  ];\n\n  // Initialize UI\n  function init(){\n    el('pseudocode').innerHTML = codeLines.map((s,i) => `<div class=\"code-line\" data-line=\"${i}\"><code>${s}</code></div>`).join('');\n    el('generate').addEventListener('click', generateArray);\n    el('shuffle').addEventListener('click', () => { shuffleArray(); drawArray(); });\n    el('start').addEventListener('click', start);\n    el('step').addEventListener('click', stepOnce);\n    el('pause').addEventListener('click', pause);\n    el('reset').addEventListener('click', resetAll);\n    el('speed').addEventListener('input', (e)=>speed = 1000 - Number(e.target.value));\n    el('pivot').addEventListener('change', (e)=>pivotStrategy=e.target.value);\n    el('order').addEventListener('change', (e)=>order=e.target.value);\n    el('size').addEventListener('change', ()=>generateArray());\n    el('minVal').addEventListener('change', ()=>generateArray());\n    el('maxVal').addEventListener('change', ()=>generateArray());\n    el('loadManual').addEventListener('click', loadManual);\n    el('showCode').addEventListener('click', ()=>{ const p=el('pseudocode'); p.style.display = p.style.display === 'none' ? 'block' : 'none';});\n    el('randomPreset').addEventListener('click', randomPreset);\n    el('explain').addEventListener('click', explainNotes);\n    generateArray();\n  }\n\n  function explainNotes(){\n    alert(\"This visualization uses a Lomuto-style partition: pivot is chosen and moved to the end; elements less (for ascending) than pivot are moved to left. Median-of-three selects the median of A[low], A[mid], A[high] as pivot. Random picks a random index.\");\n  }\n\n  function randomPreset(){\n    const presets = [\n      \"few large: 5,5,4,4,6,6,20,20,20,18,17,3\",\n      \"reversed: 20,19,18,17,16,15,14,13,12,11\",\n      \"duplicates: 5,3,5,3,5,2,2,8,8,1\",\n      \"random small: 3,7,2,9,1,5,8,6,4\",\n      \"random large: 62,10,44,73,15,99,31,81,57\"\n    ];\n    const r = presets[Math.floor(Math.random()*presets.length)];\n    el('manual').value = r;\n    loadManual();\n  }\n\n  function loadManual(){\n    const text = el('manual').value.trim();\n    if(!text){ alert(\"Enter comma separated numbers.\"); return; }\n    const parts = text.split(',').map(s=>Number(s.trim())).filter(n=>!isNaN(n));\n    if(parts.length===0){ alert(\"No valid numbers found.\"); return; }\n    arr = parts.slice();\n    resetStats();\n    drawArray();\n  }\n\n  function generateArray(){\n    const size = Math.max(5, Math.min(200, Number(el('size').value) || 30));\n    const min = Number(el('minVal').value) || 1;\n    const max = Number(el('maxVal').value) || 100;\n    arr = [];\n    for(let i=0;i<size;i++){\n      arr.push(Math.floor(Math.random()*(max-min+1))+min);\n    }\n    resetStats();\n    drawArray();\n  }\n\n  function shuffleArray(){\n    for(let i=arr.length-1;i>0;i--){\n      const j = Math.floor(Math.random()*(i+1));\n      [arr[i], arr[j]] = [arr[j], arr[i]];\n    }\n    resetStats();\n  }\n\n  function resetStats(){\n    comps=swaps=steps=0;\n    updateStats();\n    stackState = [];\n    el('stack').innerHTML = \"\";\n    el('action').innerText = 'Idle';\n    el('pivotDisplay').innerText = '-';\n    el('rangeDisplay').innerText = '-';\n    el('notes').innerText = '-';\n    generator = null;\n    running = false;\n    paused = false;\n    clearHighlights();\n  }\n\n  function updateStats(){\n    el('comp').innerText = comps;\n    el('swap').innerText = swaps;\n    el('steps').innerText = steps;\n  }\n\n  function drawArray(highlights = {}){\n    // highlights: {pivot: index, compare: idx, swap: [i,j], sorted: set}\n    const container = el('canvas');\n    container.innerHTML = '';\n    if(arr.length === 0) return;\n    const maxVal = Math.max(...arr);\n    const minVal = Math.min(...arr);\n    const range = `${minVal}–${maxVal}`;\n    el('rangeLabel').innerText = range;\n    bars = [];\n    const sortedSet = highlights.sorted || new Set();\n    for(let i=0;i<arr.length;i++){\n      const b = document.createElement('div');\n      b.className = 'bar';\n      const hPct = (arr[i] - minVal) / (maxVal - minVal + 0.0001);\n      const height = Math.max(6, Math.round(hPct * 100) + 10);\n      b.style.height = (height*3) + 'px';\n      b.style.flexBasis = (100 / arr.length) + '%';\n      b.dataset.index = i;\n      let label = document.createElement('span');\n      label.textContent = arr[i];\n      b.appendChild(label);\n      let indexLabel = document.createElement('div');\n      indexLabel.className = 'bar index';\n      indexLabel.innerText = i;\n      b.appendChild(indexLabel);\n\n      if(highlights.pivot === i) b.classList.add('pivot');\n      if(highlights.compare === i) b.classList.add('compare');\n      if(highlights.swap && (highlights.swap[0]===i || highlights.swap[1]===i)) b.classList.add('swapping');\n      if(sortedSet.has(i)) b.classList.add('sorted');\n\n      container.appendChild(b);\n      bars.push(b);\n    }\n  }\n\n  function clearHighlights(){\n    for(const b of bars){\n      b.classList.remove('pivot','compare','swapping','sorted');\n    }\n    highlightCode(-1);\n  }\n\n  function highlightCode(line){\n    const nodes = el('pseudocode').querySelectorAll('.code-line');\n    nodes.forEach(n => {\n      if(Number(n.dataset.line) === line) n.classList.add('active');\n      else n.classList.remove('active');\n    });\n  }\n\n  // Generator-based QuickSort with yields for visualization\n  function* quickSortGen(A, low, high){\n    // push stack frame\n    stackPush([low, high]);\n    yield action('pushStack', {low,high});\n    if(low < high){\n      yield action('check', {low,high});\n      // Partition\n      const pRes = yield* partitionGen(A, low, high);\n      const p = pRes.index;\n      // after partition\n      yield action('partitionDone', {index:p});\n      // left\n      yield* quickSortGen(A, low, p - 1);\n      // right\n      yield* quickSortGen(A, p + 1, high);\n    } else {\n      // base case: mark as sorted single element or empty\n      if(low === high){\n        yield action('markSorted', {index:low});\n      }\n    }\n    // pop stack frame\n    stackPop();\n    yield action('popStack', {low,high});\n  }\n\n  function* partitionGen(A, low, high){\n    // choose pivot index according to strategy\n    let pivotIndex = choosePivotIndex(A, low, high);\n    yield action('choosePivot', {pivotIndex,low,high});\n    // move pivot to end (swap pivotIndex, high)\n    if(pivotIndex !== high){\n      yield action('swapStart', {i:pivotIndex,j:high});\n      swap(A, pivotIndex, high);\n      yield action('swapDone', {i:pivotIndex,j:high});\n    }\n    const pivot = A[high];\n    yield action('setPivotValue', {pivot, index:high});\n    let i = low;\n    yield action('setI', {i});\n    for(let j = low; j <= high -1; j++){\n      yield action('compare', {j, pivotIndex:high});\n      if(compare(A[j], pivot)){\n        yield action('swapStart', {i,j});\n        swap(A, i, j);\n        yield action('swapDone', {i,j});\n        i++;\n        yield action('increaseI', {i});\n      }\n    }\n    // final pivot placement\n    yield action('swapStart', {i, j:high});\n    swap(A, i, high);\n    yield action('swapDone', {i, j:high});\n    yield action('pivotPlaced', {i});\n    return {index: i};\n  }\n\n  function choosePivotIndex(A, low, high){\n    if(pivotStrategy === 'last') return high;\n    if(pivotStrategy === 'first') return low;\n    if(pivotStrategy === 'random') return Math.floor(Math.random()*(high-low+1))+low;\n    if(pivotStrategy === 'median'){\n      const mid = Math.floor((low+high)/2);\n      const trio = [[A[low],low],[A[mid],mid],[A[high],high]];\n      trio.sort((a,b)=>a[0]-b[0]);\n      // median element's index\n      return trio[1][1];\n    }\n    return high;\n  }\n\n  function compare(a,b){\n    comps++;\n    updateStats();\n    if(order === 'asc') return a < b;\n    else return a > b;\n  }\n\n  function swap(A,i,j){\n    swaps++;\n    steps++;\n    updateStats();\n    const temp = A[i];\n    A[i] = A[j];\n    A[j] = temp;\n  }\n\n  // Action helper to yield objects to visualizer\n  function action(type, payload){\n    return {type, payload};\n  }\n\n  // Visualizer runner: consumes generator yields and animates\n  async function runGenerator(gen){\n    if(!gen) return;\n    running = true;\n    paused = false;\n    while(true){\n      if(paused) { await sleep(50); continue; }\n      const next = gen.next();\n      if(next.done) break;\n      const act = next.value;\n      steps++;\n      updateStats();\n      await handleAction(act);\n      // Wait according to speed\n      await sleep(speed);\n    }\n    running = false;\n    el('action').innerText = 'Finished';\n    // mark all as sorted\n    const sorted = new Set(arr.map((_,i)=>i));\n    drawArray({sorted});\n    highlightCode(-1);\n  }\n\n  // Step through a single action\n  function stepOnce(){\n    if(!generator){\n      generator = quickSortGen(arr, 0, arr.length-1);\n      // ensure stack display initial push\n    }\n    if(paused) paused = false;\n    const next = generator.next();\n    if(next.done){\n      el('action').innerText = 'Finished';\n      running = false;\n      return;\n    }\n    const act = next.value;\n    steps++;\n    updateStats();\n    handleAction(act);\n    paused = true;\n  }\n\n  function start(){\n    if(running) return;\n    if(!generator){\n      generator = quickSortGen(arr, 0, arr.length-1);\n    }\n    runGenerator(generator);\n  }\n\n  function pause(){\n    paused = true;\n    running = false;\n    el('action').innerText = 'Paused';\n  }\n\n  function resetAll(){\n    generator = null;\n    running = false;\n    paused = false;\n    resetStats();\n    drawArray();\n  }\n\n  // Manage stack visual\n  function stackPush(frame){\n    stackState.push(frame);\n    renderStack();\n  }\n  function stackPop(){\n    stackState.pop();\n    renderStack();\n  }\n\n  function renderStack(){\n    const s = el('stack');\n    s.innerHTML = '';\n    for(let i = stackState.length-1; i>=0; i--){\n      const f = stackState[i];\n      const item = document.createElement('div');\n      item.className = 'stack-item';\n      item.innerHTML = `<div>low: ${f[0]}</div><div>high: ${f[1]}</div>`;\n      s.appendChild(item);\n    }\n  }\n\n  // Handle different action types and update visualization\n  async function handleAction(act){\n    if(!act) return;\n    const t = act.type;\n    const p = act.payload || {};\n    el('action').innerText = t;\n    // default code highlight mapping\n    switch(t){\n      case 'pushStack':\n        renderStack();\n        el('notes').innerText = `Pushed [${p.low}, ${p.high}]`;\n        highlightCode(1);\n        break;\n      case 'popStack':\n        renderStack();\n        el('notes').innerText = `Popped [${p.low}, ${p.high}]`;\n        highlightCode(-1);\n        break;\n      case 'check':\n        el('rangeDisplay').innerText = `[${p.low}, ${p.high}]`;\n        el('notes').innerText = `Checking low < high`;\n        highlightCode(1);\n        break;\n      case 'choosePivot':\n        el('pivotDisplay').innerText = p.pivotIndex;\n        el('notes').innerText = `Chosen pivot index ${p.pivotIndex}`;\n        drawArray({pivot:p.pivotIndex});\n        highlightCode(7);\n        break;\n      case 'swapStart':\n        el('notes').innerText = `Swapping ${p.i} ↔ ${p.j}`;\n        drawArray({swap:[p.i,p.j]});\n        highlightCode(8);\n        break;\n      case 'swapDone':\n        el('notes').innerText = `Swapped ${p.i} ↔ ${p.j}`;\n        drawArray({swap:[p.i,p.j]});\n        highlightCode(13);\n        break;\n      case 'setPivotValue':\n        el('notes').innerText = `Pivot value = ${p.pivot}`;\n        drawArray({pivot:p.index});\n        highlightCode(7);\n        break;\n      case 'setI':\n        el('notes').innerText = `i = ${p.i}`;\n        drawArray();\n        highlightCode(-1);\n        break;\n      case 'compare':\n        el('notes').innerText = `Comparing A[${p.j}] with pivot`;\n        comps++; updateStats();\n        drawArray({compare:p.j, pivot:p.pivotIndex});\n        highlightCode(11);\n        break;\n      case 'increaseI':\n        el('notes').innerText = `i increased to ${p.i}`;\n        drawArray();\n        highlightCode(12);\n        break;\n      case 'pivotPlaced':\n        el('notes').innerText = `Pivot placed at index ${p.i}`;\n        // mark pivot position as sorted for now\n        const sorted = new Set();\n        sorted.add(p.i);\n        drawArray({sorted, pivot:p.i});\n        highlightCode(15);\n        break;\n      case 'partitionDone':\n        el('notes').innerText = `Partition finished, pivot at ${p.index}`;\n        el('pivotDisplay').innerText = p.index;\n        // mark pivot index as sorted\n        const sorted2 = new Set();\n        sorted2.add(p.index);\n        drawArray({sorted:sorted2});\n        highlightCode(2);\n        break;\n      case 'markSorted':\n        el('notes').innerText = `Index ${p.index} is sorted`;\n        const sset = new Set([p.index]);\n        drawArray({sorted:sset});\n        highlightCode(15);\n        break;\n      default:\n        drawArray();\n        highlightCode(-1);\n    }\n    updateStats();\n  }\n\n  // Sleep helper\n  function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }\n\n  // Initialization\n  init();\n\n  // Expose small debug to window\n  window.__qs = {\n    arr: ()=>arr,\n    reset: resetAll\n  };\n\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Quick Sort"
    }
  ],
  "topic": "Quick Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}