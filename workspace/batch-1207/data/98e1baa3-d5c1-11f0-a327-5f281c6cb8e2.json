{
  "id": "98e1baa3-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:17:12.690Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Insertion Sort",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Insertion Sort Visualizer</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  <style>\n    :root{\n      --bg:#0f1724;\n      --panel:#0b1220;\n      --muted:#9aa7c7;\n      --accent:#38bdf8;\n      --success:#34d399;\n      --danger:#fb7185;\n      --glass: rgba(255,255,255,0.03);\n    }\n    html,body{height:100%; margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial;}\n    body{\n      background: linear-gradient(180deg,#071026 0%, #071229 40%, #041423 100%);\n      color:#e6eef8;\n      display:flex;\n      align-items:flex-start;\n      justify-content:center;\n      padding:20px;\n      box-sizing:border-box;\n    }\n    .container{\n      width:1100px;\n      max-width:100%;\n      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));\n      border-radius:12px;\n      padding:16px;\n      box-shadow: 0 6px 30px rgba(2,6,23,0.7);\n      display:grid;\n      grid-template-columns: 1fr 420px;\n      gap:16px;\n    }\n    .left, .right{ background:var(--panel); border-radius:10px; padding:12px; box-sizing:border-box;}\n    .header{display:flex; gap:12px; align-items:center; margin-bottom:12px;}\n    h1{font-size:18px; margin:0 6px 0 0;}\n    .controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}\n    button, input[type=button]{\n      background:var(--glass);\n      color:var(--muted);\n      border:1px solid rgba(255,255,255,0.04);\n      padding:8px 10px;\n      border-radius:8px;\n      cursor:pointer;\n      font-size:13px;\n    }\n    button.primary{ background: linear-gradient(90deg, rgba(56,189,248,0.14), rgba(52,211,153,0.06)); color:var(--accent); border:1px solid rgba(56,189,248,0.14);}\n    button.danger{ background:linear-gradient(90deg, rgba(251,113,133,0.06), transparent); color:var(--danger); }\n    .controls label{ font-size:13px; color:var(--muted); display:flex; gap:6px; align-items:center;}\n    .canvas{\n      height:320px;\n      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));\n      border-radius:8px;\n      display:flex;\n      align-items:end;\n      padding:10px;\n      gap:6px;\n      margin-bottom:12px;\n      overflow:hidden;\n    }\n    .bar{\n      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));\n      width:100%;\n      border-radius:6px 6px 2px 2px;\n      transition:height 200ms ease, transform 120ms ease;\n      box-shadow: 0 4px 10px rgba(2,6,23,0.6) inset;\n      display:flex;\n      align-items:flex-end;\n      justify-content:center;\n      color:rgba(255,255,255,0.9);\n      font-size:12px;\n      font-weight:600;\n      user-select:none;\n      position:relative;\n    }\n    .bar .label{ transform: translateY(-6px); font-size:11px; opacity:0.95;}\n    .legend{display:flex; gap:8px; margin-bottom:10px; align-items:center; flex-wrap:wrap;}\n    .legend .item{display:flex; gap:6px; align-items:center; color:var(--muted); font-size:13px;}\n    .col{width:14px; height:14px; border-radius:4px;}\n    .col.sorted{background:linear-gradient(180deg,var(--success), #1f9b78);}\n    .col.key{background:linear-gradient(180deg,#fb923c,#f97316);}\n    .col.compare{background:linear-gradient(180deg,#facc15,#f59e0b);}\n    .col.shift{background:linear-gradient(180deg,#60a5fa,#3b82f6);}\n    .info{display:flex; gap:12px; margin-top:6px; flex-wrap:wrap;}\n    .stat{background:rgba(255,255,255,0.02); padding:8px 10px; border-radius:8px; color:var(--muted); font-size:13px;}\n    .right h2{margin-top:0; font-size:15px;}\n    .pseudocode{background:rgba(255,255,255,0.01); padding:10px; border-radius:8px; font-family:monospace; color:var(--muted); font-size:13px; line-height:1.6;}\n    .pseudocode .line{padding:6px; border-radius:6px;}\n    .pseudocode .active{ background:linear-gradient(90deg, rgba(56,189,248,0.06), rgba(52,211,153,0.02)); color:var(--accent); font-weight:600;}\n    .desc{background:rgba(255,255,255,0.02); padding:10px; border-radius:8px; color:var(--muted); font-size:13px; margin-top:10px;}\n    .bottom-controls{display:flex; gap:8px; align-items:center; margin-top:8px; flex-wrap:wrap;}\n    input[type=\"range\"]{accent-color: #38bdf8;}\n    .small{font-size:12px; color:var(--muted);}\n    .custom-input{display:flex; gap:8px; margin-top:8px;}\n    .custom-input input{flex:1; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:inherit;}\n    .footer{font-size:12px; color:var(--muted); margin-top:8px;}\n    @media (max-width:1000px){\n      .container{ grid-template-columns: 1fr; }\n      .right{ order:2; }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"left\">\n      <div class=\"header\">\n        <h1>Insertion Sort Visualizer</h1>\n        <div class=\"small\">Step-by-step animation and pseudocode</div>\n      </div>\n\n      <div class=\"controls\">\n        <label class=\"small\">Size:\n          <input id=\"size\" type=\"range\" min=\"5\" max=\"40\" value=\"18\" />\n          <span id=\"sizeLabel\" class=\"small\">18</span>\n        </label>\n\n        <label class=\"small\">Order:\n          <select id=\"order\" style=\"padding:6px; border-radius:8px; background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--muted);\">\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n        </label>\n\n        <button id=\"generate\" class=\"primary\">Generate Random</button>\n        <button id=\"prepare\">Prepare Steps</button>\n        <button id=\"reset\">Reset</button>\n      </div>\n\n      <div style=\"display:flex; gap:10px; margin-top:10px; align-items:center;\">\n        <div class=\"legend\" style=\"margin:0;\">\n          <div class=\"item\"><div class=\"col sorted\"></div> Sorted</div>\n          <div class=\"item\"><div class=\"col key\"></div> Key</div>\n          <div class=\"item\"><div class=\"col compare\"></div> Comparing</div>\n          <div class=\"item\"><div class=\"col shift\"></div> Shifting</div>\n        </div>\n\n        <div style=\"flex:1;\"></div>\n\n        <div class=\"small\">Speed:\n          <input id=\"speed\" type=\"range\" min=\"50\" max=\"1200\" value=\"360\" />\n        </div>\n      </div>\n\n      <div id=\"canvas\" class=\"canvas\" aria-hidden=\"false\"></div>\n\n      <div class=\"info\" aria-hidden=\"false\">\n        <div class=\"stat\">Comparisons: <strong id=\"comp\">0</strong></div>\n        <div class=\"stat\">Writes (moves): <strong id=\"writes\">0</strong></div>\n        <div class=\"stat\">Steps: <strong id=\"stepsCount\">0</strong></div>\n        <div style=\"flex:1\"></div>\n        <div class=\"small\">Tip: Click \"Prepare Steps\" after changing array or order to recompute the animation frames.</div>\n      </div>\n\n      <div class=\"bottom-controls\">\n        <button id=\"play\" class=\"primary\">Play</button>\n        <button id=\"pause\">Pause</button>\n        <button id=\"stepBack\">Step Back</button>\n        <button id=\"stepForward\">Step Forward</button>\n        <div style=\"width:8px;\"></div>\n        <label class=\"small\">Array (comma separated):\n          <input id=\"arrinput\" placeholder=\"e.g. 5,3,8,1,6\" />\n        </label>\n        <button id=\"load\">Load</button>\n      </div>\n\n      <div class=\"footer\">\n        Insertion sort iterates through the array, inserting each element into its correct position in the already-sorted left portion by shifting larger elements right.\n      </div>\n    </div>\n\n    <div class=\"right\">\n      <h2>Pseudocode</h2>\n      <div class=\"pseudocode\" id=\"pseudocode\">\n        <div class=\"line\" data-line=\"1\">1. for i = 1 to n - 1 do</div>\n        <div class=\"line\" data-line=\"2\">2. &nbsp;&nbsp; key = A[i]</div>\n        <div class=\"line\" data-line=\"3\">3. &nbsp;&nbsp; j = i - 1</div>\n        <div class=\"line\" data-line=\"4\">4. &nbsp;&nbsp; while j >= 0 and A[j] &gt; key do</div>\n        <div class=\"line\" data-line=\"5\">5. &nbsp;&nbsp;&nbsp;&nbsp; A[j+1] = A[j]   // shift right</div>\n        <div class=\"line\" data-line=\"6\">6. &nbsp;&nbsp;&nbsp;&nbsp; j = j - 1</div>\n        <div class=\"line\" data-line=\"7\">7. &nbsp;&nbsp; A[j+1] = key   // insert</div>\n      </div>\n\n      <div class=\"desc\" id=\"description\">\n        Press \"Prepare Steps\" to compute the frames, then Play to animate. Use Step Forward/Back to move manually.\n      </div>\n\n      <div style=\"margin-top:10px;\">\n        <h2>Complexity</h2>\n        <div class=\"small\" style=\"margin-bottom:6px;\">Time Complexity: Best O(n), Average O(n^2), Worst O(n^2)</div>\n        <div class=\"small\">Space Complexity: O(1) (in-place)</div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    // Insertion Sort Visualizer\n    (function(){\n      // DOM references\n      const canvas = document.getElementById('canvas');\n      const sizeRange = document.getElementById('size');\n      const sizeLabel = document.getElementById('sizeLabel');\n      const generateBtn = document.getElementById('generate');\n      const prepareBtn = document.getElementById('prepare');\n      const resetBtn = document.getElementById('reset');\n      const playBtn = document.getElementById('play');\n      const pauseBtn = document.getElementById('pause');\n      const stepFwdBtn = document.getElementById('stepForward');\n      const stepBackBtn = document.getElementById('stepBack');\n      const speedRange = document.getElementById('speed');\n      const orderSelect = document.getElementById('order');\n      const arrInput = document.getElementById('arrinput');\n      const loadBtn = document.getElementById('load');\n      const compEl = document.getElementById('comp');\n      const writesEl = document.getElementById('writes');\n      const stepsCountEl = document.getElementById('stepsCount');\n      const pseudocode = document.getElementById('pseudocode');\n      const descEl = document.getElementById('description');\n\n      let array = [];\n      let bars = [];\n      let steps = []; // recorded snapshots\n      let currentStep = 0;\n      let timer = null;\n      let playing = false;\n\n      let counts = {comp:0, writes:0};\n\n      // Utility to create random array\n      function genRandom(n){\n        const arr=[];\n        for(let i=0;i<n;i++){\n          arr.push(Math.floor(Math.random()*90)+5);\n        }\n        return arr;\n      }\n\n      function renderArray(arr, meta){\n        // Clear canvas\n        canvas.innerHTML = '';\n        const n = arr.length;\n        // compute bar width\n        const gap = 6;\n        const totalGap = gap*(n-1);\n        const width = canvas.clientWidth;\n        const barWidth = Math.max(10, Math.floor((width - totalGap)/n));\n        const maxVal = Math.max(...arr.concat([1]));\n        for(let i=0;i<n;i++){\n          const val = arr[i];\n          const bar = document.createElement('div');\n          bar.className = 'bar';\n          bar.style.width = barWidth + 'px';\n          const heightPercent = Math.max(6, Math.round((val/maxVal)*100));\n          bar.style.height = (Math.max(18, Math.round((heightPercent/100)*(canvas.clientHeight-20)))) + 'px';\n\n          const label = document.createElement('div');\n          label.className = 'label';\n          label.textContent = val;\n          bar.appendChild(label);\n\n          // color based on meta\n          const state = (meta && meta.highlight && meta.highlight[i]) ? meta.highlight[i] : null;\n          if(state === 'sorted') bar.style.background = 'linear-gradient(180deg,#34d399,#1f9b78)';\n          else if(state === 'key') bar.style.background = 'linear-gradient(180deg,#fb923c,#f97316)';\n          else if(state === 'compare') bar.style.background = 'linear-gradient(180deg,#facc15,#f59e0b)';\n          else if(state === 'shift') bar.style.background = 'linear-gradient(180deg,#60a5fa,#3b82f6)';\n          else bar.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01))';\n\n          // subtle transform for compared\n          if(state === 'compare') bar.style.transform = 'translateY(-6px)';\n          if(state === 'key') bar.style.transform = 'translateY(-8px) scale(1.02)';\n          if(state === 'shift') bar.style.transform = 'translateY(-4px)';\n\n          canvas.appendChild(bar);\n          bars.push(bar);\n        }\n      }\n\n      function clearHighlights(){\n        Array.from(pseudocode.querySelectorAll('.line')).forEach(l=>l.classList.remove('active'));\n      }\n\n      function highlightPseudocode(line){\n        clearHighlights();\n        const el = pseudocode.querySelector('.line[data-line=\"'+line+'\"]');\n        if(el) el.classList.add('active');\n      }\n\n      // Build steps by simulating insertion sort on a copy of the array.\n      // Each step: record arr copy, highlight mapping, action description, pseudocode line, counters at that moment.\n      function buildSteps(initialArr, order='asc'){\n        const arr = initialArr.slice();\n        const n = arr.length;\n        const cmp = (a,b)=> order === 'asc' ? a > b : a < b;\n\n        const s = [];\n        let comps = 0, writes = 0;\n\n        function pushState(action, highlight, description, line){\n          s.push({\n            arr: arr.slice(),\n            highlight: Object.assign({}, highlight || {}),\n            action: action || '',\n            description: description || '',\n            line: line || 1,\n            compsSoFar: comps,\n            writesSoFar: writes\n          });\n        }\n\n        // initial\n        pushState('start', {}, 'Initial array', 1);\n\n        for(let i=1;i<n;i++){\n          // set key\n          const key = arr[i];\n          pushState('setKey', {[i]:'key'}, `Set key = A[${i}] (${key})`, 2);\n\n          let j = i-1;\n          pushState('setJ', {[j]:'compare', [i]:'key'}, `Set j = ${j}`, 3);\n\n          // while j >=0 and A[j] > key\n          while(j >= 0){\n            comps++;\n            pushState('compare', {[j]:'compare', [i]:'key'}, `Compare A[${j}] (${arr[j]}) with key (${key})`, 4);\n            if(cmp(arr[j], key)){\n              // shift\n              arr[j+1] = arr[j];\n              writes++;\n              pushState('shift', {[j+1]:'shift', [j]:'compare', [i]:'key'}, `Shift A[${j}] -> A[${j+1}]`, 5);\n              j = j-1;\n              pushState('decJ', (function(){\n                const h={};\n                if(j>=0) h[j]='compare';\n                // note: key remains at original i position visually for steps until inserted\n                h[i]='key';\n                return h;\n              })(), `Decrement j to ${j}`, 6);\n            } else {\n              // comparison false, don't shift\n              pushState('compareFalse', {[j]:'compare', [i]:'key'}, `A[${j}] (${arr[j]}) <= key (${key}) â€” break`, 4);\n              break;\n            }\n          }\n          // insert key\n          arr[j+1] = key;\n          writes++;\n          pushState('insert', {[j+1]:'key'}, `Insert key at position ${j+1}`, 7);\n\n          // mark sorted portion (0..i)\n          const highlight = {};\n          for(let k=0;k<=i;k++) highlight[k]='sorted';\n          pushState('sorted', highlight, `After inserting, first ${i+1} elements are sorted`, 1);\n        }\n\n        // finished\n        pushState('done', (function(){\n          const h={};\n          for(let k=0;k<n;k++) h[k]='sorted';\n          return h;\n        })(), 'Array sorted', 1);\n\n        // update counters on final step info\n        // but each step already has counters so we'll use the last snapshot's counts.\n        return {steps: s, totals: {comp: comps, writes: writes}};\n      }\n\n      // Controls and state management\n      function updateStatsFromStep(step){\n        compEl.textContent = step ? step.compsSoFar : 0;\n        writesEl.textContent = step ? step.writesSoFar : 0;\n        stepsCountEl.textContent = steps.length;\n      }\n\n      function goToStep(index){\n        if(index < 0) index = 0;\n        if(index >= steps.length) index = steps.length-1;\n        currentStep = index;\n        const step = steps[currentStep];\n        renderArray(step.arr, {highlight: step.highlight});\n        highlightPseudocode(step.line);\n        descEl.textContent = `Step ${currentStep}/${steps.length-1}: ${step.description}`;\n        updateStatsFromStep(step);\n      }\n\n      function play(){\n        if(playing) return;\n        playing = true;\n        playBtn.disabled = true;\n        pauseBtn.disabled = false;\n        const interval = Math.max(40, Number(speedRange.value));\n        timer = setInterval(()=>{\n          if(currentStep < steps.length-1){\n            goToStep(currentStep+1);\n          } else {\n            pause();\n          }\n        }, interval);\n      }\n\n      function pause(){\n        playing = false;\n        playBtn.disabled = false;\n        pauseBtn.disabled = true;\n        if(timer) clearInterval(timer);\n        timer = null;\n      }\n\n      // UI events\n      sizeRange.addEventListener('input', ()=>{\n        sizeLabel.textContent = sizeRange.value;\n      });\n\n      generateBtn.addEventListener('click', ()=>{\n        array = genRandom(Number(sizeRange.value));\n        arrInput.value = array.join(',');\n        steps = [];\n        currentStep = 0;\n        renderArray(array, {highlight:{}});\n        compEl.textContent = 0;\n        writesEl.textContent = 0;\n        stepsCountEl.textContent = 0;\n        descEl.textContent = 'Random array generated. Press \"Prepare Steps\" to compute frames.';\n        pause();\n      });\n\n      prepareBtn.addEventListener('click', ()=>{\n        // parse existing array from arrInput if provided; else use current\n        const raw = arrInput.value.trim();\n        if(raw){\n          const parsed = raw.split(',').map(s=>Number(s.trim())).filter(v=>!Number.isNaN(v));\n          if(parsed.length>0) array = parsed;\n        }\n        if(!array || array.length===0){\n          array = genRandom(Number(sizeRange.value));\n          arrInput.value = array.join(',');\n        }\n        const order = orderSelect.value;\n        const result = buildSteps(array, order);\n        steps = result.steps;\n        // after building, attach total counts to final step(s) by recalculating not necessary since step snapshots have counters\n        currentStep = 0;\n        goToStep(0);\n        stepsCountEl.textContent = steps.length;\n        descEl.textContent = `Prepared ${steps.length} steps. Comparison total: ${result.totals.comp}, writes total: ${result.totals.writes}. Press Play.`;\n        pause();\n      });\n\n      resetBtn.addEventListener('click', ()=>{\n        pause();\n        if(steps && steps.length>0){\n          currentStep = 0;\n          goToStep(0);\n        } else {\n          renderArray(array, {highlight:{}});\n        }\n      });\n\n      playBtn.addEventListener('click', ()=>{ play(); });\n      pauseBtn.addEventListener('click', ()=>{ pause(); });\n      stepFwdBtn.addEventListener('click', ()=>{\n        pause();\n        if(steps.length===0){\n          descEl.textContent = 'No prepared steps. Press \"Prepare Steps\" first.';\n          return;\n        }\n        if(currentStep < steps.length-1) goToStep(currentStep+1);\n      });\n      stepBackBtn.addEventListener('click', ()=>{\n        pause();\n        if(steps.length===0){\n          descEl.textContent = 'No prepared steps. Press \"Prepare Steps\" first.';\n          return;\n        }\n        if(currentStep > 0) goToStep(currentStep-1);\n      });\n\n      loadBtn.addEventListener('click', ()=>{\n        const raw = arrInput.value.trim();\n        if(!raw){ descEl.textContent = 'Please type a comma-separated array in the input.'; return; }\n        const parsed = raw.split(',').map(s=>Number(s.trim())).filter(v=>!Number.isNaN(v));\n        if(parsed.length===0){ descEl.textContent = 'No valid numbers found in input.'; return; }\n        array = parsed;\n        sizeRange.value = Math.max(5, Math.min(40, array.length));\n        sizeLabel.textContent = sizeRange.value;\n        steps = [];\n        currentStep = 0;\n        renderArray(array, {highlight:{}});\n        descEl.textContent = 'Custom array loaded. Press \"Prepare Steps\" to compute frames.';\n        pause();\n      });\n\n      // initial preparation\n      (function init(){\n        array = genRandom(Number(sizeRange.value));\n        arrInput.value = array.join(',');\n        renderArray(array, {highlight:{}});\n        pauseBtn.disabled = true;\n      })();\n\n      // accessibility: keyboard shortcuts\n      document.addEventListener('keydown', (e)=>{\n        if(e.key === ' ') { // space: toggle play/pause\n          e.preventDefault();\n          if(playing) pause(); else play();\n        } else if(e.key === 'ArrowRight'){ stepFwdBtn.click(); }\n        else if(e.key === 'ArrowLeft'){ stepBackBtn.click(); }\n      });\n\n      // Resize observer to re-render bars responsively\n      let resizeObserver = new ResizeObserver(()=>{\n        if(steps.length>0) goToStep(currentStep);\n        else renderArray(array, {highlight:{}});\n      });\n      resizeObserver.observe(canvas);\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Insertion Sort"
    }
  ],
  "topic": "Insertion Sort",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}