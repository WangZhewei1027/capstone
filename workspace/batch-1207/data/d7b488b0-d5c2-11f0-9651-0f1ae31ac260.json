{
  "id": "d7b488b0-d5c2-11f0-9651-0f1ae31ac260",
  "timestamp": "2025-12-10T12:23:57.292Z",
  "model": "gpt-3.5-turbo",
  "status": "success",
  "question": "Sliding Window",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Sliding Window Visualization</title>\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    background: #f4f4f4;\n    color: #333;\n  }\n  h1 {\n    text-align: center;\n  }\n  #input-section {\n    max-width: 600px;\n    margin: 0 auto 20px auto;\n    background: #fff;\n    border-radius: 8px;\n    padding: 15px 20px;\n    box-shadow: 0 0 8px rgba(0,0,0,0.1);\n  }\n  label {\n    display: block;\n    margin: 10px 0 5px 0;\n  }\n  input[type=text], input[type=number] {\n    width: 100%;\n    padding: 8px 10px;\n    font-size: 16px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n  }\n  button {\n    margin-top: 15px;\n    padding: 10px 20px;\n    font-size: 16px;\n    background: #007bff;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  button:disabled {\n    background: #a0c5ff;\n    cursor: not-allowed;\n  }\n  #array-container {\n    margin-top: 30px;\n    text-align: center;\n    user-select: none;\n  }\n  .array-element {\n    display: inline-block;\n    width: 50px;\n    height: 50px;\n    line-height: 50px;\n    margin: 0 5px;\n    border-radius: 6px;\n    background: #d1d1d1;\n    font-weight: bold;\n    font-size: 18px;\n    color: #333;\n    position: relative;\n    transition: background-color 0.3s ease;\n  }\n  .array-element.window {\n    background: #4a90e2;\n    color: white;\n    box-shadow: 0 0 8px #2f77d9;\n  }\n  .array-element.current-max {\n    background: #e94e77;\n    color: white;\n    box-shadow: 0 0 8px #d4305a;\n  }\n  #result {\n    margin-top: 25px;\n    max-width: 600px;\n    margin-left: auto;\n    margin-right: auto;\n    background: #fff;\n    border-radius: 8px;\n    padding: 15px 20px;\n    box-shadow: 0 0 8px rgba(0,0,0,0.1);\n    font-size: 18px;\n    white-space: pre-wrap;\n  }\n  #controls {\n    text-align: center;\n    margin-top: 10px;\n  }\n  #speed-label {\n    margin-left: 10px;\n    font-weight: normal;\n    font-size: 14px;\n  }\n  input[type=range] {\n    vertical-align: middle;\n  }\n  footer {\n    margin-top: 40px;\n    font-size: 14px;\n    color: #666;\n    text-align: center;\n  }\n</style>\n</head>\n<body>\n<h1>Sliding Window Maximum Visualization</h1>\n\n<div id=\"input-section\">\n  <label for=\"array-input\">Array (comma separated numbers):</label>\n  <input type=\"text\" id=\"array-input\" placeholder=\"e.g. 1,3,-1,-3,5,3,6,7\" value=\"1,3,-1,-3,5,3,6,7\" />\n  \n  <label for=\"window-size\">Window size (k):</label>\n  <input type=\"number\" id=\"window-size\" min=\"1\" max=\"100\" value=\"3\" />\n  \n  <button id=\"start-btn\">Start Visualization</button>\n  \n  <div id=\"controls\" style=\"margin-top:15px;\">\n    <label for=\"speed-range\">Animation speed:</label>\n    <input type=\"range\" id=\"speed-range\" min=\"200\" max=\"2000\" value=\"800\" step=\"100\" />\n    <span id=\"speed-label\">800 ms per step</span>\n  </div>\n</div>\n\n<div id=\"array-container\"></div>\n\n<div id=\"result\"></div>\n\n<script>\n(() => {\n  const arrayInput = document.getElementById('array-input');\n  const windowSizeInput = document.getElementById('window-size');\n  const startBtn = document.getElementById('start-btn');\n  const speedRange = document.getElementById('speed-range');\n  const speedLabel = document.getElementById('speed-label');\n  const arrayContainer = document.getElementById('array-container');\n  const resultContainer = document.getElementById('result');\n\n  let array = [];\n  let k = 0;\n  let animationSpeed = parseInt(speedRange.value);\n\n  speedRange.addEventListener('input', () => {\n    animationSpeed = parseInt(speedRange.value);\n    speedLabel.textContent = `${animationSpeed} ms per step`;\n  });\n\n  function parseArrayInput(input) {\n    return input.split(',')\n      .map(s => s.trim())\n      .filter(s => s.length > 0)\n      .map(Number)\n      .filter(n => !isNaN(n));\n  }\n\n  // Create array element divs\n  function renderArray(array) {\n    arrayContainer.innerHTML = '';\n    array.forEach((num, idx) => {\n      const el = document.createElement('div');\n      el.className = 'array-element';\n      el.textContent = num;\n      el.dataset.index = idx;\n      arrayContainer.appendChild(el);\n    });\n  }\n\n  // Clear styles\n  function resetArrayStyles() {\n    const children = arrayContainer.children;\n    for (let i=0; i<children.length; i++) {\n      children[i].classList.remove('window', 'current-max');\n    }\n  }\n\n  // Highlight current window and max\n  function highlightWindow(left, right, maxIdx) {\n    resetArrayStyles();\n    for(let i=left; i<=right; i++) {\n      arrayContainer.children[i].classList.add('window');\n    }\n    if (maxIdx !== null && maxIdx >= 0) {\n      arrayContainer.children[maxIdx].classList.add('current-max');\n    }\n  }\n\n  // Sliding window max with visualization using deque\n  async function slidingWindowMaxWithVisual(array, k) {\n    const n = array.length;\n    if (n === 0 || k<=0 || k > n) {\n      resultContainer.textContent = 'Invalid input. Ensure array is not empty and 1 ≤ k ≤ array length.';\n      return;\n    }\n\n    resultContainer.textContent = 'Running sliding window maximum...\\n\\n';\n    let result = [];\n    let deque = []; // Will store indices\n\n    for (let i = 0; i < n; i++) {\n      // Remove indices out of this window\n      while (deque.length > 0 && deque[0] <= i - k) {\n        deque.shift();\n      }\n      // Remove smaller elements from the back\n      while (deque.length > 0 && array[deque[deque.length -1]] < array[i]) {\n        deque.pop();\n      }\n\n      deque.push(i);\n\n      if (i >= k-1) {\n        result.push(array[deque[0]]);\n        highlightWindow(i-k+1, i, deque[0]);\n        resultContainer.textContent += `Window [${i-k+1}..${i}]: max = ${array[deque[0]]}\\n`;\n        await sleep(animationSpeed);\n      }\n    }\n\n    highlightWindow(-1, -1, -1);\n    resultContainer.textContent += '\\nFinal sliding window maximums:\\n[' + result.join(', ') + ']';\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  startBtn.addEventListener('click', async () => {\n    array = parseArrayInput(arrayInput.value);\n    k = Number(windowSizeInput.value);\n\n    if (array.length === 0) {\n      alert('Please enter a valid array of numbers.');\n      return;\n    }\n    if (!(k >= 1 && k <= array.length)) {\n      alert('Window size k must be between 1 and the length of the array.');\n      return;\n    }\n    startBtn.disabled = true;\n    speedRange.disabled = true;\n    arrayInput.disabled = true;\n    windowSizeInput.disabled = true;\n    renderArray(array);\n    resultContainer.textContent = '';\n    try {\n      await slidingWindowMaxWithVisual(array, k);\n    } catch (e) {\n      resultContainer.textContent = 'Error during visualization: ' + e.message;\n    }\n    startBtn.disabled = false;\n    speedRange.disabled = false;\n    arrayInput.disabled = false;\n    windowSizeInput.disabled = false;\n  });\n})();\n</script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Sliding Window"
    }
  ],
  "topic": "Sliding Window",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}