{
  "id": "98e0f750-d5c1-11f0-a327-5f281c6cb8e2",
  "timestamp": "2025-12-10T12:18:33.297Z",
  "model": "gpt-5-mini",
  "status": "success",
  "question": "Hash Map",
  "answer": {
    "role": "assistant",
    "content": "<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <title>Hash Map Interactive Demo</title>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <style>\n    :root{\n      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#39a0ed;\n      --good:#28c76f; --warn:#ffb020; --danger:#ff6b6b; --panel:#071023;\n      font-family: Inter, ui-sans-serif, system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n    }\n    *{box-sizing:border-box}\n    body{\n      margin:0; background:linear-gradient(180deg,#071021 0%, #071226 60%); color:#e6eef6;\n      padding:20px; min-height:100vh;\n    }\n    header{display:flex; gap:16px; align-items:center; margin-bottom:16px;}\n    h1{font-size:20px; margin:0}\n    .layout{display:grid; grid-template-columns:360px 1fr 320px; gap:16px; align-items:start;}\n    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); padding:14px; border-radius:10px;}\n    label{display:block; font-size:12px; color:var(--muted); margin-bottom:6px;}\n    input[type=\"text\"], select{width:100%; padding:8px 10px; border-radius:6px; border:1px solid rgba(255,255,255,0.05); background:transparent; color:inherit; margin-bottom:10px;}\n    .row{display:flex; gap:8px;}\n    button{appearance:none; border:0; padding:8px 10px; border-radius:8px; cursor:pointer; background:var(--accent); color:#042034; font-weight:600;}\n    button.secondary{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted); font-weight:600;}\n    button.danger{background:var(--danger); color:white;}\n    .controls{margin-bottom:12px;}\n    .buckets{display:grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap:10px;}\n    .bucket{background:var(--panel); padding:8px; border-radius:8px; min-height:60px; position:relative; border:1px solid rgba(255,255,255,0.02);}\n    .bucketIndex{position:absolute; top:6px; right:8px; font-size:11px; color:var(--muted);}\n    .entry{background:rgba(255,255,255,0.03); margin:6px 0; padding:6px 8px; border-radius:6px; font-size:13px; display:flex; justify-content:space-between; gap:6px; align-items:center; border-left:4px solid transparent;}\n    .entry .k{font-weight:700; color:#dff1ff;}\n    .entry .v{color:var(--muted); font-size:12px;}\n    .hashSmall{font-size:11px; color:var(--muted); margin-left:8px;}\n    .stats{font-size:13px; color:var(--muted); display:flex; flex-direction:column; gap:6px;}\n    .log{height:240px; overflow:auto; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.02); font-family:monospace; font-size:13px; color:#cfefff;}\n    .highlight{box-shadow:0 0 0 3px rgba(57,160,237,0.12); border-color:rgba(57,160,237,0.25)!important;}\n    .collision{border-left-color:var(--warn)!important;}\n    .success{border-left-color:var(--good)!important;}\n    .info{border-left-color:var(--accent)!important;}\n    .small{font-size:12px; color:var(--muted);}\n    footer{margin-top:14px; font-size:12px; color:var(--muted);}\n    .titleBar{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;}\n    .explain{font-size:13px; color:var(--muted); line-height:1.35; margin-bottom:10px;}\n    .controls-grid{display:grid; grid-template-columns:1fr 1fr; gap:8px;}\n    .btnGroup{display:flex; gap:8px; flex-wrap:wrap;}\n    .tiny{padding:6px 8px; font-size:13px;}\n    .badge{display:inline-block; padding:3px 6px; border-radius:6px; background:rgba(255,255,255,0.03); color:var(--muted); font-size:12px;}\n    @media (max-width:1000px){\n      .layout{grid-template-columns: 1fr; }\n    }\n  </style>\n</head>\n<body>\n  <header>\n    <h1>Hash Map Interactive Demo</h1>\n    <div class=\"small\">Separate chaining • automatic resize • selectable hash</div>\n  </header>\n\n  <div class=\"layout\">\n    <!-- LEFT: Controls -->\n    <div class=\"card\">\n      <div class=\"titleBar\">\n        <strong>Controls</strong>\n        <span class=\"badge\" id=\"statusBadge\">Ready</span>\n      </div>\n\n      <div class=\"explain\">\n        A hash map stores key → value pairs. Keys are hashed to numeric values and placed into bucket indices (hash mod capacity). Collisions occur when multiple keys map to the same bucket — this demo uses separate chaining (arrays in buckets).\n      </div>\n\n      <div>\n        <label>Hash function</label>\n        <select id=\"hashSelect\">\n          <option value=\"djb2\">djb2 (common)</option>\n          <option value=\"sum\">Simple char code sum</option>\n          <option value=\"constant\">Constant (force collisions)</option>\n        </select>\n      </div>\n\n      <div style=\"margin-top:8px;\">\n        <label>Key</label>\n        <input id=\"keyInput\" type=\"text\" placeholder='e.g. \"apple\" or 42'>\n        <label>Value</label>\n        <input id=\"valueInput\" type=\"text\" placeholder='e.g. \"red\"'>\n      </div>\n\n      <div class=\"controls\" style=\"margin-top:6px;\">\n        <div class=\"btnGroup\">\n          <button id=\"putBtn\">Put</button>\n          <button id=\"getBtn\" class=\"secondary\">Get</button>\n          <button id=\"delBtn\" class=\"secondary\">Delete</button>\n          <button id=\"clearBtn\" class=\"danger\">Clear</button>\n        </div>\n      </div>\n\n      <div style=\"margin-top:8px;\">\n        <div class=\"controls-grid\">\n          <button id=\"randBtn\" class=\"tiny secondary\">Random key/value</button>\n          <button id=\"bulkBtn\" class=\"tiny secondary\">Insert sample set</button>\n        </div>\n      </div>\n\n      <hr style=\"border:none; height:1px; background:rgba(255,255,255,0.02); margin:12px 0;\">\n\n      <div class=\"stats\">\n        <div>Capacity: <strong id=\"capDisplay\">--</strong></div>\n        <div>Size (entries): <strong id=\"sizeDisplay\">--</strong></div>\n        <div>Load factor: <strong id=\"loadDisplay\">--</strong></div>\n        <div>Collisions (buckets with >1): <strong id=\"collisionsDisplay\">--</strong></div>\n        <div>Resize threshold: <strong id=\"thresholdDisplay\">--</strong></div>\n      </div>\n\n    </div>\n\n    <!-- CENTER: Buckets Visualization -->\n    <div class=\"card\">\n      <div class=\"titleBar\">\n        <strong>Buckets</strong>\n        <div class=\"small\">Click an entry to remove it; hover to see its hash</div>\n      </div>\n\n      <div id=\"bucketsContainer\" class=\"buckets\" aria-live=\"polite\"></div>\n\n      <footer class=\"small\">\n        Hash shown is a 32-bit integer. Index = (hash mod capacity + capacity) % capacity.\n      </footer>\n    </div>\n\n    <!-- RIGHT: Logs & Info -->\n    <div class=\"card\">\n      <div class=\"titleBar\">\n        <strong>Activity Log</strong>\n        <button id=\"clearLog\" class=\"tiny secondary\">Clear</button>\n      </div>\n\n      <div id=\"log\" class=\"log\" aria-live=\"polite\"></div>\n\n      <hr style=\"border:none; height:1px; background:rgba(255,255,255,0.02); margin:12px 0;\">\n\n      <div><strong>Selected Entry</strong></div>\n      <div id=\"selectedInfo\" class=\"small\" style=\"margin-top:8px;\">None</div>\n    </div>\n  </div>\n\n  <script>\n    (function(){\n      // Utility functions\n      function hashDjb2(str){\n        // djb2 algorithm -> 32-bit signed\n        let h = 5381;\n        for(let i=0;i<str.length;i++){\n          h = ((h << 5) + h) + str.charCodeAt(i);\n          h |= 0;\n        }\n        return h | 0;\n      }\n      function hashSum(str){\n        let s = 0;\n        for(let i=0;i<str.length;i++) s = (s + str.charCodeAt(i)) | 0;\n        return s | 0;\n      }\n      function hashConst(str){ return 42; }\n\n      function normalizeKey(k){\n        if(k === null) return \"null\";\n        if(k === undefined) return \"undefined\";\n        if(typeof k === \"object\") {\n          try { return JSON.stringify(k); } catch(e) { return String(k); }\n        }\n        return String(k);\n      }\n\n      // HashMap implementation (separate chaining)\n      class HashMap {\n        constructor({capacity=8, loadFactor=0.75, hashFn=hashDjb2, onResize=null} = {}){\n          this._capacity = capacity;\n          this._buckets = Array.from({length:capacity}, () => []);\n          this._size = 0;\n          this._threshold = loadFactor;\n          this._hashFn = hashFn;\n          this._onResize = onResize;\n        }\n        _hash(keyStr){\n          // produce unsigned 32-bit integer\n          let raw = this._hashFn(keyStr) | 0;\n          // convert to unsigned 32-bit\n          return raw >>> 0;\n        }\n        _index(hash){\n          return hash % this._capacity;\n        }\n        get size(){ return this._size; }\n        capacity(){ return this._capacity; }\n        threshold(){ return this._threshold; }\n        setHashFn(fn){ this._hashFn = fn; }\n        entries(){\n          const arr = [];\n          for(let i=0;i<this._buckets.length;i++){\n            for(const e of this._buckets[i]) arr.push({index:i, key:e[0], value:e[1], hash:e[2]});\n          }\n          return arr;\n        }\n        put(key, value, animate=false){\n          const keyStr = normalizeKey(key);\n          const hash = this._hash(keyStr);\n          const idx = this._index(hash);\n          const bucket = this._buckets[idx];\n\n          // Check if key exists -> replace\n          for(let i=0;i<bucket.length;i++){\n            if(bucket[i][0] === keyStr){\n              bucket[i][1] = value;\n              return {action:'replace', index:idx, hash, key:keyStr, value};\n            }\n          }\n          // Insert\n          bucket.push([keyStr, value, hash]);\n          this._size++;\n          // Resize if necessary\n          if(this._size / this._capacity > this._threshold){\n            this._resize(this._capacity * 2);\n            return {action:'insert-resize', index:idx, hash, key:keyStr, value};\n          }\n          return {action:'insert', index:idx, hash, key:keyStr, value};\n        }\n        get(key){\n          const keyStr = normalizeKey(key);\n          const hash = this._hash(keyStr);\n          const idx = this._index(hash);\n          const bucket = this._buckets[idx];\n          for(const e of bucket){\n            if(e[0] === keyStr) return {found:true, value:e[1], index:idx, hash};\n          }\n          return {found:false, index:idx, hash};\n        }\n        delete(key){\n          const keyStr = normalizeKey(key);\n          const hash = this._hash(keyStr);\n          const idx = this._index(hash);\n          const bucket = this._buckets[idx];\n          for(let i=0;i<bucket.length;i++){\n            if(bucket[i][0] === keyStr){\n              bucket.splice(i,1);\n              this._size--;\n              return {deleted:true, index:idx, hash, key:keyStr};\n            }\n          }\n          return {deleted:false, index:idx, hash, key:keyStr};\n        }\n        clear(){\n          this._buckets = Array.from({length:this._capacity}, () => []);\n          this._size = 0;\n        }\n        _resize(newCap){\n          if(typeof this._onResize === 'function'){\n            this._onResize(this._capacity, newCap);\n          }\n          const oldEntries = this.entries();\n          this._capacity = newCap;\n          this._buckets = Array.from({length:newCap}, () => []);\n          this._size = 0;\n          // Reinsert all\n          for(const e of oldEntries){\n            const bucket = this._buckets[e.index % newCap]; // not accurate for new hash; recalc\n            // recompute proper index using hash\n            const idx = this._index(e.hash);\n            this._buckets[idx].push([e.key, e.value, e.hash]);\n            this._size++;\n          }\n        }\n        bucketInfo(){\n          let collisions=0, maxChain=0;\n          for(const b of this._buckets){\n            if(b.length > 1) collisions++;\n            maxChain = Math.max(maxChain, b.length);\n          }\n          return {collisions, maxChain, buckets:this._buckets.length};\n        }\n      }\n\n      // DOM references\n      const bucketsContainer = document.getElementById('bucketsContainer');\n      const logEl = document.getElementById('log');\n      const capDisplay = document.getElementById('capDisplay');\n      const sizeDisplay = document.getElementById('sizeDisplay');\n      const loadDisplay = document.getElementById('loadDisplay');\n      const collisionsDisplay = document.getElementById('collisionsDisplay');\n      const thresholdDisplay = document.getElementById('thresholdDisplay');\n      const statusBadge = document.getElementById('statusBadge');\n      const selectedInfo = document.getElementById('selectedInfo');\n\n      const keyInput = document.getElementById('keyInput');\n      const valueInput = document.getElementById('valueInput');\n      const putBtn = document.getElementById('putBtn');\n      const getBtn = document.getElementById('getBtn');\n      const delBtn = document.getElementById('delBtn');\n      const clearBtn = document.getElementById('clearBtn');\n      const randBtn = document.getElementById('randBtn');\n      const bulkBtn = document.getElementById('bulkBtn');\n      const clearLogBtn = document.getElementById('clearLog');\n      const hashSelect = document.getElementById('hashSelect');\n\n      // Initialize map\n      let currentHashFn = hashDjb2;\n      const map = new HashMap({capacity:8, loadFactor:0.75, hashFn:currentHashFn, onResize:handleResize});\n\n      function handleResize(oldCap, newCap){\n        log(`Resizing from ${oldCap} -> ${newCap}`);\n        flashStatus(`Resized to ${newCap}`, 'info');\n      }\n\n      // Render buckets\n      function renderBuckets(highlights = {}){ // highlights: {idx, keyHash}\n        bucketsContainer.innerHTML = '';\n        const buckets = map._buckets;\n        for(let i=0;i<buckets.length;i++){\n          const b = buckets[i];\n          const bucketEl = document.createElement('div');\n          bucketEl.className = 'bucket';\n          if(highlights.index === i) bucketEl.classList.add('highlight');\n\n          const idxEl = document.createElement('div');\n          idxEl.className = 'bucketIndex';\n          idxEl.textContent = '#' + i;\n          bucketEl.appendChild(idxEl);\n\n          if(b.length === 0){\n            const empty = document.createElement('div');\n            empty.className = 'small';\n            empty.style.opacity = 0.6;\n            empty.style.marginTop = '10px';\n            empty.textContent = '(empty)';\n            bucketEl.appendChild(empty);\n          } else {\n            for(const [k,v,h] of b){\n              const e = document.createElement('div');\n              e.className = 'entry';\n              // mark collision if >1 in bucket\n              if(b.length > 1) e.classList.add('collision');\n              const left = document.createElement('div');\n              const keySpan = document.createElement('div');\n              keySpan.className = 'k';\n              keySpan.textContent = k;\n              const valSpan = document.createElement('div');\n              valSpan.className = 'v';\n              valSpan.textContent = String(v);\n              left.appendChild(keySpan);\n              left.appendChild(valSpan);\n\n              const right = document.createElement('div');\n              right.style.display='flex';\n              right.style.flexDirection='column';\n              right.style.alignItems='flex-end';\n              const hashSmall = document.createElement('div');\n              hashSmall.className='hashSmall';\n              hashSmall.textContent = 'h:' + (h >>> 0);\n              const idxSmall = document.createElement('div');\n              idxSmall.className='hashSmall';\n              idxSmall.textContent = 'i:' + (h % map._capacity);\n              right.appendChild(hashSmall);\n              right.appendChild(idxSmall);\n\n              e.appendChild(left);\n              e.appendChild(right);\n\n              // click to delete single entry\n              e.addEventListener('click', (ev)=>{\n                ev.stopPropagation();\n                const res = map.delete(k);\n                if(res.deleted){\n                  renderBuckets();\n                  log(`Deleted key=\"${k}\" from index ${res.index}`);\n                  flashStatus('Deleted', 'danger');\n                  updateStats();\n                }\n              });\n              // hover to show selected info\n              e.addEventListener('mouseenter', ()=>{\n                selectedInfo.textContent = `key=\"${k}\", value=\"${v}\", hash=${h >>> 0}, index=${h % map._capacity}`;\n              });\n              e.addEventListener('mouseleave', ()=>{\n                selectedInfo.textContent = 'None';\n              });\n\n              bucketEl.appendChild(e);\n            }\n          }\n          bucketsContainer.appendChild(bucketEl);\n        }\n        updateStats();\n      }\n\n      function updateStats(){\n        capDisplay.textContent = map.capacity();\n        sizeDisplay.textContent = map.size();\n        const lf = (map.size() / map.capacity()).toFixed(3);\n        loadDisplay.textContent = lf;\n        thresholdDisplay.textContent = map.threshold();\n        const info = map.bucketInfo();\n        collisionsDisplay.textContent = info.collisions + ' (max chain ' + info.maxChain + ')';\n      }\n\n      function log(msg){\n        const line = document.createElement('div');\n        const now = new Date().toLocaleTimeString();\n        line.textContent = `[${now}] ${msg}`;\n        logEl.appendChild(line);\n        logEl.scrollTop = logEl.scrollHeight;\n      }\n\n      function flashStatus(text, kind='info'){\n        statusBadge.textContent = text;\n        if(kind === 'info') statusBadge.style.background = 'linear-gradient(90deg, rgba(57,160,237,0.12), rgba(57,160,237,0.06))';\n        if(kind === 'good') statusBadge.style.background = 'linear-gradient(90deg, rgba(40,199,111,0.08), rgba(40,199,111,0.04))';\n        if(kind === 'danger') statusBadge.style.background = 'linear-gradient(90deg, rgba(255,107,107,0.08), rgba(255,107,107,0.04))';\n        setTimeout(()=>{ statusBadge.textContent = 'Ready'; statusBadge.style.background = ''; }, 1400);\n      }\n\n      // Controls\n      putBtn.addEventListener('click', ()=>{\n        const k = keyInput.value.trim();\n        if(k === '') { flashStatus('Enter a key', 'danger'); return; }\n        const v = valueInput.value;\n        const res = map.put(k, v);\n        if(res.action === 'replace'){\n          log(`Replaced key=\"${res.key}\" at index ${res.index}`);\n          flashStatus('Replaced', 'info');\n        } else if(res.action === 'insert-resize'){\n          log(`Inserted key=\"${res.key}\" at index ${res.index} (triggered resize)`);\n          flashStatus('Inserted + resized', 'info');\n        } else {\n          log(`Inserted key=\"${res.key}\" at index ${res.index}`);\n          flashStatus('Inserted', 'good');\n        }\n        renderBuckets({index:res.index});\n      });\n\n      getBtn.addEventListener('click', ()=>{\n        const k = keyInput.value.trim();\n        if(k === '') { flashStatus('Enter a key', 'danger'); return; }\n        const res = map.get(k);\n        if(res.found){\n          log(`Get key=\"${k}\" -> \"${res.value}\" (index ${res.index})`);\n          flashStatus('Found', 'good');\n        } else {\n          log(`Get key=\"${k}\" -> not found (would go to index ${res.index})`);\n          flashStatus('Not found', 'danger');\n        }\n        // highlight target bucket briefly\n        renderBuckets({index:res.index});\n        setTimeout(()=> renderBuckets(), 650);\n      });\n\n      delBtn.addEventListener('click', ()=>{\n        const k = keyInput.value.trim();\n        if(k === '') { flashStatus('Enter a key', 'danger'); return; }\n        const res = map.delete(k);\n        if(res.deleted){\n          log(`Deleted key=\"${k}\" from index ${res.index}`);\n          flashStatus('Deleted', 'danger');\n        } else {\n          log(`Delete key=\"${k}\" -> not found (would go to index ${res.index})`);\n          flashStatus('Not found', 'info');\n        }\n        renderBuckets();\n      });\n\n      clearBtn.addEventListener('click', ()=>{\n        map.clear();\n        log('Cleared map');\n        flashStatus('Cleared', 'danger');\n        renderBuckets();\n      });\n\n      randBtn.addEventListener('click', ()=>{\n        const sampleKeys = ['alpha','beta','gamma','delta','epsilon','apple','banana','carrot','42','100','same','same2'];\n        const k = sampleKeys[Math.floor(Math.random()*sampleKeys.length)] + '-' + Math.floor(Math.random()*999);\n        const v = 'v' + Math.floor(Math.random()*9999);\n        keyInput.value = k;\n        valueInput.value = v;\n      });\n\n      bulkBtn.addEventListener('click', ()=>{\n        const demo = [\"apple\",\"banana\",\"orange\",\"pear\",\"grape\",\"cherry\",\"mango\",\"lemon\",\"lime\",\"kiwi\",\"melon\",\"berry\",\"apricot\"];\n        for(const s of demo){\n          map.put(s, 'color-'+Math.floor(Math.random()*100));\n        }\n        log('Inserted sample set ('+demo.length+' items)');\n        renderBuckets();\n        flashStatus('Bulk inserted', 'info');\n      });\n\n      clearLogBtn.addEventListener('click', ()=>{\n        logEl.innerHTML = '';\n      });\n\n      hashSelect.addEventListener('change', ()=>{\n        const v = hashSelect.value;\n        if(v === 'djb2') currentHashFn = hashDjb2;\n        if(v === 'sum') currentHashFn = hashSum;\n        if(v === 'constant') currentHashFn = hashConst;\n        map.setHashFn(currentHashFn);\n        // Rebuild underlying buckets with new hash function by re-inserting existing entries:\n        const existing = map.entries().map(e => ({key:e.key, value:e.value}));\n        map._buckets = Array.from({length:map._capacity}, () => []);\n        map._size = 0;\n        for(const e of existing){\n          map.put(e.key, e.value);\n        }\n        log('Hash function changed to: ' + v + ' and rehashed entries');\n        renderBuckets();\n        flashStatus('Hash changed', 'info');\n      });\n\n      // Initial render\n      renderBuckets();\n      updateStats();\n      log('Demo ready. Try inserting keys and toggling hash function.');\n\n      // Keyboard shortcuts\n      document.addEventListener('keydown', (e)=>{\n        if(e.key === 'Enter') putBtn.click();\n        if(e.key === 'g' && e.ctrlKey) { e.preventDefault(); getBtn.click(); }\n      });\n\n      // Accessibility: click empty container to deselect\n      bucketsContainer.addEventListener('click', ()=>{ selectedInfo.textContent='None'; });\n\n    })();\n  </script>\n</body>\n</html>"
  },
  "messages": [
    {
      "role": "system",
      "content": "Generate a single HTML file with JavaScript demonstrating the user-given concept. Only respond in a single HTML file."
    },
    {
      "role": "user",
      "content": "Hash Map"
    }
  ],
  "topic": "Hash Map",
  "hasFSM": true,
  "hasTest": true,
  "evaluation": {
    "score": null,
    "notes": ""
  }
}