<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Nearest Neighbors (KNN) Demo</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .point { width: 10px; height: 10px; border-radius: 50%; position: absolute; }
        .blue { background: blue; }
        .red { background: red; }
        .green { background: green; }
        #canvas { border: 1px solid #000; position: relative; width: 500px; height: 500px; }
    </style>
</head>
<body>

<h1>K-Nearest Neighbors (KNN) Visualization</h1>
<div id="canvas"></div>
<button id="addPoint">Add Blue Point</button>
<button id="startKNN">Classify Red Point</button>
<p id="result"></p>

<script>
    const canvas = document.getElementById('canvas');
    const points = [];
    
    // Function to create a point and add to canvas
    function createPoint(x, y, color) {
        const point = document.createElement('div');
        point.className = `point ${color}`;
        point.style.left = `${x}px`;
        point.style.top = `${y}px`;
        canvas.appendChild(point);
        points.push({ x, y, color });
    }

    // Function to calculate distance between two points
    function calculateDistance(p1, p2) {
        return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));
    }

    // KNN algorithm to classify a new point
    function knn(newPoint, k) {
        const distances = points.map(point => ({
            point,
            distance: calculateDistance(newPoint, point)
        })).sort((a, b) => a.distance - b.distance);

        const neighbors = distances.slice(0, k);
        const colorCounts = { blue: 0, red: 0 };

        neighbors.forEach(neighbor => {
            colorCounts[neighbor.point.color] += 1;
        });

        return colorCounts.blue > colorCounts.red ? 'blue' : 'red';
    }

    // Add event listener to add blue point
    document.getElementById('addPoint').addEventListener('click', () => {
        const x = Math.random() * 480;
        const y = Math.random() * 480;
        createPoint(x, y, 'blue');
    });

    // Add event listener to classify a new red point
    document.getElementById('startKNN').addEventListener('click', () => {
        const x = Math.random() * 480;
        const y = Math.random() * 480;
        createPoint(x, y, 'red');

        const result = knn({ x, y, color: 'red' }, 3);
        document.getElementById('result').textContent = `The red point is classified as: ${result}`;
    });
</script>

</body>
</html>