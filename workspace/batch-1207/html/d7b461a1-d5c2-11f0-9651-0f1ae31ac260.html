<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Recursion Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f9f9f9;
    color: #333;
  }
  h1 {
    color: #007acc;
  }
  input[type="number"] {
    width: 100px;
    padding: 0.3rem;
    font-size: 1rem;
  }
  button {
    padding: 0.4rem 1rem;
    font-size: 1rem;
    margin-left: 0.5rem;
    cursor: pointer;
  }
  #result {
    margin-top: 1rem;
    font-family: monospace;
    white-space: pre-wrap;
    background: #eef6fb;
    border: 1px solid #a6c8e0;
    padding: 1rem;
    border-radius: 5px;
  }
</style>
</head>
<body>
<h1>Recursion Demo: Factorial Calculator</h1>
<p>Enter a non-negative integer to see how factorial is calculated recursively:</p>
<input type="number" id="numberInput" min="0" max="15" value="5" />
<button id="calcBtn">Calculate Factorial</button>

<div id="result"></div>

<script>
  /**
   * Recursive factorial function with logging.
   * @param {number} n
   * @param {number} depth - Used for indentation to visualize recursion depth.
   * @param {Array} callStack - Accumulates log strings.
   * @returns {number}
   */
  function factorial(n, depth = 0, callStack = []) {
    const indent = '  '.repeat(depth);
    callStack.push(`${indent}factorial(${n}) called`);

    if (n === 0 || n === 1) {
      callStack.push(`${indent}Base case reached: factorial(${n}) = 1`);
      return 1;
    } else {
      callStack.push(`${indent}Calculating factorial(${n}) = ${n} * factorial(${n - 1})`);
      const result = n * factorial(n - 1, depth + 1, callStack);
      callStack.push(`${indent}Result of factorial(${n}): ${result}`);
      return result;
    }
  }

  document.getElementById('calcBtn').addEventListener('click', () => {
    const input = document.getElementById('numberInput').value;
    const n = parseInt(input);
    const resultDiv = document.getElementById('result');

    if (isNaN(n) || n < 0 || n > 15) {
      resultDiv.textContent = 'Please enter a valid non-negative integer (0 to 15).';
      return;
    }

    const callStack = [];
    const factValue = factorial(n, 0, callStack);
    callStack.push(`\nFactorial(${n}) = ${factValue}`);

    resultDiv.textContent = callStack.join('\n');
  });
</script>
</body>
</html>