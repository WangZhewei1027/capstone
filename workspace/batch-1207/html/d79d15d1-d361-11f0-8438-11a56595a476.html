<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Binary Search Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    max-width: 700px;
  }
  h1 {
    text-align: center;
  }
  #array {
    display: flex;
    justify-content: center;
    margin: 1rem 0 2rem 0;
    gap: 0.5rem;
    flex-wrap: wrap;
  }
  .element {
    width: 35px;
    height: 35px;
    line-height: 35px;
    text-align: center;
    border: 2px solid #ccc;
    border-radius: 5px;
    user-select: none;
    font-weight: bold;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .low {
    background-color: #d0e7ff;
    border-color: #3a99ff;
  }
  .high {
    background-color: #ffd5d5;
    border-color: #ff3a3a;
  }
  .mid {
    background-color: #ffeb99;
    border-color: #e6c300;
  }
  .found {
    background-color: #9aea6a;
    border-color: #4caf50;
    color: #0b3a0b;
  }
  .notfound {
    color: #d33;
    font-weight: bold;
  }
  button {
    cursor: pointer;
    padding: 0.5rem 1rem;
    margin-left: 0.5rem;
    font-weight: bold;
    border-radius: 5px;
    border: 2px solid #3a99ff;
    background-color: #e1f0ff;
    color: #0c3d7f;
    transition: background-color 0.3s, color 0.3s;
  }
  button:hover:not(:disabled) {
    background-color: #3a99ff;
    color: white;
  }
  button:disabled {
    border-color: #ccc;
    background-color: #f5f5f5;
    color: #aaa;
    cursor: not-allowed;
  }
  input[type="number"] {
    width: 80px;
    font-weight: bold;
    padding: 0.3rem;
    font-size: 1rem;
  }
  #log {
    white-space: pre-wrap;
    background-color: #f8f8f8;
    border: 1px solid #ddd;
    padding: 1rem;
    margin-top: 1rem;
    max-height: 180px;
    overflow-y: auto;
    font-family: Consolas, monospace;
    font-size: 0.9rem;
  }
  #controls {
    text-align: center;
    margin-bottom: 1rem;
  }
  #info {
    font-size: 0.9rem;
    color: #666;
    margin-top: 1rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
</style>
</head>
<body>

<h1>Binary Search Visualization</h1>

<div id="controls">
  <label for="targetInput">Enter target number:</label>
  <input type="number" id="targetInput" value="23" />
  <button id="startBtn">Start Search</button>
  <button id="resetBtn" disabled>Reset</button>
</div>

<div id="array"></div>

<div id="log"></div>

<div id="info">
  <p><strong>How Binary Search Works:</strong></p>
  <p>Binary search finds the position of a target value within a sorted array by repeatedly dividing the search interval in half.
  It compares the target value to the middle element of the array; if they are unequal, the half in which the target cannot lie is eliminated and the search continues on the remaining half until it is successful or the remaining half is empty.</p>
</div>

<script>
  const array = [3, 7, 12, 19, 23, 27, 31, 39, 45, 50, 56, 63, 68, 72, 79];
  // Sorted array is required for binary search

  const arrayContainer = document.getElementById('array');
  const logContainer = document.getElementById('log');
  const startBtn = document.getElementById('startBtn');
  const resetBtn = document.getElementById('resetBtn');
  const targetInput = document.getElementById('targetInput');

  // Create element divs for each array value
  function createArrayElements() {
    arrayContainer.innerHTML = '';
    for (let i = 0; i < array.length; i++) {
      const el = document.createElement('div');
      el.className = 'element';
      el.textContent = array[i];
      el.dataset.index = i;
      arrayContainer.appendChild(el);
    }
  }

  // Reset styles and log
  function reset() {
    createArrayElements();
    logContainer.textContent = '';
    startBtn.disabled = false;
    resetBtn.disabled = true;
    targetInput.disabled = false;
  }

  // Update the color classes of elements based on indices
  function updateColors(low, high, mid, foundIndex = null) {
    const elements = arrayContainer.children;
    for (let i = 0; i < elements.length; i++) {
      elements[i].className = 'element';
      if (i < low) {
        elements[i].classList.add('low');
      } 
      if (i > high) {
        elements[i].classList.add('high');
      }
      if (i === mid) {
        elements[i].classList.add('mid');
      }
      if (foundIndex !== null && i === foundIndex) {
        elements[i].className = 'element found';
      }
    }
  }

  // Async sleep helper for visualization delay
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // Binary search visualization function
  async function binarySearchVisual(arr, target) {
    let low = 0;
    let high = arr.length - 1;
    logContainer.textContent = '';
    startBtn.disabled = true;
    resetBtn.disabled = true;
    targetInput.disabled = true;

    while (low <= high) {
      const mid = Math.floor((low + high) / 2);
      updateColors(low, high, mid);
      logContainer.textContent += `Checking middle index ${mid} (value: ${arr[mid]})...\n`;
      await sleep(1000);

      if (arr[mid] === target) {
        logContainer.textContent += `Found target ${target} at index ${mid}.\n`;
        updateColors(low, high, mid, mid);
        break;
      } else if (arr[mid] < target) {
        logContainer.textContent += `Target is greater than ${arr[mid]}, adjusting low from ${low} to ${mid + 1}.\n\n`;
        low = mid + 1;
      } else {
        logContainer.textContent += `Target is less than ${arr[mid]}, adjusting high from ${high} to ${mid - 1}.\n\n`;
        high = mid - 1;
      }
      await sleep(800);
    }

    if (low > high) {
      logContainer.textContent += `Target ${target} not found in the array.\n`;
      updateColors(-1, -1, -1, null);
      logContainer.innerHTML += '\n<span class="notfound">Result: Not found.</span>';
    }

    startBtn.disabled = true;
    resetBtn.disabled = false;
    targetInput.disabled = false;
  }

  startBtn.addEventListener('click', () => {
    let target = parseInt(targetInput.value, 10);
    if (isNaN(target)) {
      alert('Please enter a valid number.');
      return;
    }
    binarySearchVisual(array, target);
  });

  resetBtn.addEventListener('click', () => {
    reset();
  });

  // Initialize on page load
  createArrayElements();
</script>

</body>
</html>