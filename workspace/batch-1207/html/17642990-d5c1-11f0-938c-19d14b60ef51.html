<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floyd-Warshall Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            border-collapse: collapse;
            margin-top: 20px;
        }
        td, th {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }
        .highlight {
            background-color: yellow;
        }
    </style>
</head>
<body>
    <h1>Floyd-Warshall Algorithm Visualization</h1>
    <p>This demonstration allows you to visualize the Floyd-Warshall algorithm for finding the shortest paths in a weighted graph.</p>
    
    <h3>Initial Graph Weight Matrix</h3>
    <table id="graphTable"></table>
    
    <button id="runAlgorithmBtn">Run Floyd-Warshall Algorithm</button>
    <h3>Resulting Distance Matrix</h3>
    <table id="resultTable"></table>

    <script>
        const graph = [
            [0, 3, Infinity, 5],
            [2, 0, Infinity, 4],
            [Infinity, 1, 0, Infinity],
            [Infinity, Infinity, 2, 0]
        ];

        function createTable(tableId, data) {
            const table = document.getElementById(tableId);
            table.innerHTML = ""; // Clear the table before filling it
            
            // Create the header
            let headerRow = '<tr><th></th>';
            for (let i = 0; i < data.length; i++) {
                headerRow += `<th>${i}</th>`;
            }
            headerRow += '</tr>';
            table.insertAdjacentHTML('beforeend', headerRow);
            
            // Create the rows
            for (let i = 0; i < data.length; i++) {
                let row = `<tr><th>${i}</th>`;
                for (let j = 0; j < data[i].length; j++) {
                    row += `<td>${data[i][j] === Infinity ? 'âˆž' : data[i][j]}</td>`;
                }
                row += '</tr>';
                table.insertAdjacentHTML('beforeend', row);
            }
        }

        function floydWarshall(graph) {
            const dist = graph.map(arr => arr.slice()); // Create a copy of the graph
            
            const n = dist.length;

            for (let k = 0; k < n; k++) {
                for (let i = 0; i < n; i++) {
                    for (let j = 0; j < n; j++) {
                        // Update the distance if a shorter path is found
                        if (dist[i][k] + dist[k][j] < dist[i][j]) {
                            dist[i][j] = dist[i][k] + dist[k][j];
                        }
                    }
                }
                // Highlight the intermediate nodes in each iteration
                highlightIntermediateNodes(k);
            }
            return dist;
        }

        function highlightIntermediateNodes(k) {
            const cells = document.querySelectorAll('td');
            cells.forEach(cell => cell.classList.remove('highlight'));
            const rows = document.querySelectorAll('#resultTable tr');
            for (let i = 1; i < rows.length; i++) {
                const cellToHighlight = rows[i].children[k + 1];
                if (cellToHighlight) {
                    cellToHighlight.classList.add('highlight');
                }
            }
        }

        document.getElementById('runAlgorithmBtn').addEventListener('click', () => {
            createTable('graphTable', graph);
            const result = floydWarshall(graph);
            createTable('resultTable', result);
        });

        // Create the initial table display
        createTable('graphTable', graph);
    </script>
</body>
</html>