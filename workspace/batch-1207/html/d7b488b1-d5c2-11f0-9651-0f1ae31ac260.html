<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Two Pointers Technique Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f0f8;
  }
  h1 {
    text-align: center;
    color: #333;
  }
  #arrayInput {
    width: 100%;
    max-width: 400px;
    margin: 0.5rem 0 1rem 0;
    padding: 0.5rem;
    font-size: 1rem;
  }
  #targetInput {
    width: 100px;
    padding: 0.4rem;
    font-size: 1rem;
  }
  #runBtn {
    padding: 0.5rem 1rem;
    font-size: 1rem;
    margin-left: 1rem;
    cursor: pointer;
  }
  #output {
    margin-top: 1rem;
    background: white;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
    max-width: 420px;
  }
  .array-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 1rem;
  }
  .elem {
    width: 40px;
    height: 40px;
    line-height: 40px;
    margin: 0 5px;
    text-align: center;
    background: #ddd;
    border-radius: 5px;
    user-select:none;
    font-weight: bold;
    position: relative;
    transition: background 0.3s;
  }
  .pointer-left {
    background: #61dafb;
    color: #000;
  }
  .pointer-right {
    background: #f96363;
    color: #000;
  }
  .pointer-both {
    background: #ffcc00;
    color: #000;
  }
  #explanation {
    margin-top: 1rem;
    font-size: 0.95rem;
    max-width: 420px;
    line-height: 1.4;
    color: #555;
  }
</style>
</head>
<body>
<h1>Two Pointers Technique Visualization</h1>
<div>
  <label for="arrayInput">Enter a sorted array (comma separated):</label><br />
  <input type="text" id="arrayInput" value="1,2,3,4,6,8,10,12" />
</div>
<div>
  <label for="targetInput">Target sum:</label>
  <input type="number" id="targetInput" value="14" />
  <button id="runBtn">Run Two Pointers</button>
</div>

<div id="output" aria-live="polite" aria-atomic="true">
  <div class="array-container" id="arrayContainer"></div>
  <div id="explanation"></div>
</div>

<script>
  const arrayInput = document.getElementById('arrayInput');
  const targetInput = document.getElementById('targetInput');
  const runBtn = document.getElementById('runBtn');
  const arrayContainer = document.getElementById('arrayContainer');
  const explanation = document.getElementById('explanation');

  function createArrayElements(arr) {
    arrayContainer.innerHTML = '';
    for(let i = 0; i < arr.length; i++) {
      const elem = document.createElement('div');
      elem.classList.add('elem');
      elem.textContent = arr[i];
      elem.dataset.index = i;
      arrayContainer.appendChild(elem);
    }
  }

  function highlightPointers(left, right, arr) {
    // Remove old highlights
    const elems = arrayContainer.querySelectorAll('.elem');
    elems.forEach(e => e.classList.remove('pointer-left', 'pointer-right', 'pointer-both'));
    if(left >= 0 && right >= 0) {
      if(left === right) {
        elems[left].classList.add('pointer-both');
      } else {
        elems[left].classList.add('pointer-left');
        elems[right].classList.add('pointer-right');
      }
    }
  }

  async function visualizeTwoPointers(arr, target) {
    explanation.textContent = '';
    if(arr.length < 2) {
      explanation.textContent = 'Array needs at least two elements.';
      return;
    }

    let left = 0;
    let right = arr.length -1;
    let step = 1;

    while(left < right) {
      highlightPointers(left, right, arr);
      explanation.textContent = `Step ${step}: Checking elements at indices ${left} and ${right} (values: ${arr[left]} + ${arr[right]} = ${arr[left] + arr[right]})`;

      await new Promise(r => setTimeout(r, 1500));

      let sum = arr[left] + arr[right];
      if(sum === target) {
        highlightPointers(left, right, arr);
        explanation.textContent = `Found! Elements at indices ${left} and ${right} sum to ${target}. (${arr[left]} + ${arr[right]})`;
        return;
      } else if(sum < target) {
        explanation.textContent += ` — Sum is less than target, moving left pointer right.`;
        left++;
      } else {
        explanation.textContent += ` — Sum is greater than target, moving right pointer left.`;
        right--;
      }
      step++;
      await new Promise(r => setTimeout(r, 1000));
    }
    highlightPointers(-1, -1, arr);
    explanation.textContent = `No pair found in the array that sums to ${target}.`;
  }

  runBtn.addEventListener('click', () => {
    // Parse input array - only numbers, sorted
    let rawArr = arrayInput.value.split(',').map(x => x.trim()).filter(x => x !== '');
    let arr = rawArr.map(x => Number(x)).filter(x => !isNaN(x));
    // Sort to ensure sorted input for two pointers
    arr.sort((a,b) => a - b);
    arrayInput.value = arr.join(', ');
    createArrayElements(arr);

    let target = Number(targetInput.value);
    if(isNaN(target)) {
      explanation.textContent = 'Please enter a valid target number.';
      return;
    }

    visualizeTwoPointers(arr, target);
  });

  // On load, show array elements
  window.onload = () => {
    let rawArr = arrayInput.value.split(',').map(x => x.trim()).filter(x => x !== '');
    let arr = rawArr.map(x => Number(x)).filter(x => !isNaN(x));
    arr.sort((a,b) => a - b);
    arrayInput.value = arr.join(', ');
    createArrayElements(arr);
  };
</script>
</body>
</html>