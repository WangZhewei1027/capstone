<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Means Clustering Demo</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        canvas { border: 1px solid black; margin-top: 20px; }
        .controls { margin: 20px 0; }
        .input-group { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>K-Means Clustering Demo</h1>
    <div class="controls">
        <div class="input-group">
            <label for="numClusters">Number of Clusters:</label>
            <input type="number" id="numClusters" value="3" min="1" max="10">
        </div>
        <button onclick="runKMeans()">Run K-Means</button>
    </div>
    <canvas id="canvas" width="600" height="400"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        const points = [];
        const colors = ["#FF6347", "#4682B4", "#3CB371", "#FFD700", "#FF69B4", "#8A2BE2", "#FF4500", "#2E8B57", "#B22222", "#20B2AA"];
        const clusters = [];

        function generateRandomPoints(num = 100) {
            for (let i = 0; i < num; i++) {
                points.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height
                });
            }
        }

        function initializeClusters(k) {
            clusters.length = 0;
            for (let i = 0; i < k; i++) {
                const point = {
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    points: []
                };
                clusters.push(point);
            }
        }

        function calculateDistance(p1, p2) {
            return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));
        }

        function assignPointsToClusters() {
            clusters.forEach(cluster => cluster.points = []);
            points.forEach(point => {
                let closestCluster = 0;
                let closestDistance = calculateDistance(point, clusters[0]);
                for (let i = 1; i < clusters.length; i++) {
                    const distance = calculateDistance(point, clusters[i]);
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestCluster = i;
                    }
                }
                clusters[closestCluster].points.push(point);
            });
        }

        function updateClusterCentroids() {
            clusters.forEach(cluster => {
                if (cluster.points.length > 0) {
                    let sumX = 0, sumY = 0;
                    cluster.points.forEach(p => {
                        sumX += p.x;
                        sumY += p.y;
                    });
                    cluster.x = sumX / cluster.points.length;
                    cluster.y = sumY / cluster.points.length;
                }
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            points.forEach(point => {
                ctx.fillStyle = "#000";
                ctx.fillRect(point.x, point.y, 3, 3);
            });
            clusters.forEach((cluster, index) => {
                ctx.fillStyle = colors[index % colors.length];
                ctx.beginPath();
                ctx.arc(cluster.x, cluster.y, 8, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function runKMeans() {
            const k = parseInt(document.getElementById('numClusters').value);
            points.length = 0;
            generateRandomPoints(100);
            initializeClusters(k);
            let iterations = 10;
            while (iterations-- > 0) {
                assignPointsToClusters();
                updateClusterCentroids();
            }
            draw();
        }

        // Initialize and draw initial state
        generateRandomPoints();
        draw();
    </script>
</body>
</html>