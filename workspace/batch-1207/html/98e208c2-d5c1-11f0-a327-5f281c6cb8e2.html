<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Linear Search Visualizer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#38bdf8;
      --muted:#94a3b8;
      --good:#34d399;
      --bad:#fb7185;
      --visited:#64748b;
      --box:#102233;
      --glass: rgba(255,255,255,0.03);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,#071029 0%, #081728 100%);
      color:#e6eef8;
      padding:20px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .container{
      max-width:1100px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:20px;
      align-items:start;
    }
    header{
      grid-column:1/-1;
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:8px;
    }
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      padding:16px;
      border-radius:10px;
      box-shadow: 0 6px 20px rgba(2,6,23,0.6);
    }
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    input[type="text"], .small, .select{
      background:var(--box);
      border:1px solid rgba(255,255,255,0.04);
      color:inherit;
      padding:8px 10px;
      border-radius:8px;
      font-size:14px;
      min-width:0;
    }
    button.btn{
      background:linear-gradient(180deg,var(--accent), #0ea5e9);
      border:0;color:#042028;padding:8px 12px;border-radius:8px;font-weight:600;cursor:pointer;
      box-shadow:0 6px 18px rgba(2,6,23,0.45);
    }
    button.ghost{
      background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer;
    }
    .row{display:flex;gap:8px;align-items:center;margin-bottom:10px;flex-wrap:wrap}
    .array-row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .box{
      width:56px;height:56px;border-radius:10px;background:var(--box);display:flex;align-items:center;justify-content:center;
      font-weight:700;font-size:16px;color:var(--muted);position:relative;border:1px solid rgba(255,255,255,0.02);
      transition:transform .18s ease, background .18s ease, border-color .18s ease, color .18s ease;
    }
    .box.current{background:linear-gradient(180deg, rgba(56,189,248,0.12), rgba(56,189,248,0.06)); border-color: rgba(56,189,248,0.25); color:var(--accent); transform:translateY(-6px)}
    .box.compared{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-color: rgba(255,255,255,0.04); color:var(--muted)}
    .box.found{background:linear-gradient(180deg, rgba(52,211,153,0.12), rgba(52,211,153,0.06)); border-color: rgba(52,211,153,0.25); color:var(--good)}
    .box.not{background:linear-gradient(180deg, rgba(251,113,133,0.08), rgba(251,113,133,0.04)); border-color: rgba(251,113,133,0.25); color:var(--bad)}
    .box.visited{background:linear-gradient(180deg, rgba(100,116,139,0.06), rgba(100,116,139,0.03)); border-color: rgba(100,116,139,0.06); color:var(--visited)}
    .indicator{position:absolute;bottom:-18px;left:50%;transform:translateX(-50%);font-size:12px;color:var(--muted)}
    .status{display:flex;gap:12px;align-items:center;color:var(--muted);font-size:13px}
    .legend{display:flex;gap:8px;align-items:center}
    .legend .pill{display:flex;gap:6px;align-items:center;padding:6px 8px;border-radius:8px;background:var(--glass);font-size:13px}
    .pill .dot{width:12px;height:12px;border-radius:4px}
    .pseudo{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:12px;border-radius:8px; color:var(--muted); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size:13px}
    .pseudo .line{padding:4px 6px;border-radius:6px}
    .pseudo .line.current{background:rgba(56,189,248,0.06); color:var(--accent)}
    .meta{font-size:13px;color:var(--muted);display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .small{font-size:13px;padding:6px 8px;border-radius:8px}
    .slider{width:160px}
    .footer{grid-column:1/-1;margin-top:8px;color:var(--muted);font-size:13px}
    @media (max-width:980px){
      .container{grid-template-columns:1fr; padding-bottom:60px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div style="flex:1">
        <h1>Linear Search Visualizer</h1>
        <p class="lead">Step through the linear search algorithm. Observe comparisons, steps, and complexity.</p>
      </div>
      <div class="status">
        <div class="legend">
          <div class="pill"><div class="dot" style="background:var(--accent)"></div> current</div>
          <div class="pill"><div class="dot" style="background:var(--good)"></div> found</div>
          <div class="pill"><div class="dot" style="background:var(--bad)"></div> mismatch</div>
          <div class="pill"><div class="dot" style="background:var(--visited)"></div> visited</div>
        </div>
      </div>
    </header>

    <section class="card" id="main-card">
      <div class="row" style="justify-content:space-between;align-items:center">
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <label style="font-weight:600">Array</label>
          <input id="array-input" class="small" type="text" value="7,3,9,1,4,6,8,2" aria-label="Array input" title="Comma separated values">
          <button id="apply-array" class="ghost">Apply</button>
          <button id="random-array" class="ghost">Random</button>
          <label style="display:flex;align-items:center;gap:6px;color:var(--muted)"><input id="numeric" type="checkbox" checked> numbers</label>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <label style="font-weight:600">Target</label>
          <input id="target-input" class="small" type="text" value="4" aria-label="Target">
        </div>
      </div>

      <div style="margin-top:12px">
        <div class="array-row" id="array-row" aria-live="polite" aria-label="Array visualization">
          <!-- boxes rendered here -->
        </div>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px;flex-wrap:wrap;gap:10px">
        <div class="controls">
          <button id="start" class="btn">Start</button>
          <button id="step" class="ghost">Step</button>
          <button id="play" class="ghost">Play</button>
          <button id="pause" class="ghost" disabled>Pause</button>
          <button id="reset" class="ghost">Reset</button>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <label style="font-size:13px;color:var(--muted)">Speed</label>
          <input type="range" id="speed" class="slider" min="0.1" max="2" step="0.1" value="1">
          <span id="speed-label" style="min-width:38px;text-align:center;color:var(--muted)">1.0x</span>
        </div>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px;flex-wrap:wrap;gap:8px">
        <div class="meta">
          <div>Comparisons: <strong id="comparisons">0</strong></div>
          <div>Index: <strong id="index">—</strong></div>
          <div>Result: <strong id="result" style="color:var(--muted)">—</strong></div>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <button id="explain-btn" class="ghost">Toggle explanation</button>
        </div>
      </div>

      <div id="explain" style="margin-top:12px;display:none">
        <div style="display:flex;gap:12px;align-items:flex-start">
          <div style="flex:1">
            <div class="pseudo" aria-hidden="true">
              <div class="line current" id="p-line-1">function linearSearch(arr, target):</div>
              <div class="line" id="p-line-2" style="padding-left:12px">for i from 0 to arr.length - 1:</div>
              <div class="line" id="p-line-3" style="padding-left:24px">if arr[i] == target:</div>
              <div class="line" id="p-line-4" style="padding-left:36px">return i  // found</div>
              <div class="line" id="p-line-5" style="padding-left:12px">return -1 // not found</div>
            </div>
          </div>
          <div style="width:220px">
            <div class="card" style="padding:12px">
              <div style="font-weight:600;margin-bottom:8px">Complexity</div>
              <div style="color:var(--muted);font-size:13px">
                Best case: O(1) — target at first position<br>
                Average/Worst: O(n) — target in middle or not present<br>
                Space: O(1)
              </div>
            </div>
            <div style="height:8px"></div>
            <div class="card" style="padding:12px">
              <div style="font-weight:600;margin-bottom:8px">Notes</div>
              <div style="color:var(--muted);font-size:13px">
                Linear search checks each element in order until it finds the target. It's simple but not efficient for large sorted lists (use binary search instead).
              </div>
            </div>
          </div>
        </div>
      </div>

    </section>

    <aside class="card" id="side-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div style="font-weight:700">Trace</div>
        <div style="color:var(--muted);font-size:13px" id="trace-count">0 steps</div>
      </div>
      <div id="trace" style="max-height:520px;overflow:auto;padding-right:6px"></div>
    </aside>

    <div class="footer">
      Tip: You can edit the array (comma separated), set whether values are treated as numbers, then Start or Step through the algorithm.
    </div>
  </div>

  <script>
    // Linear Search Visualizer JavaScript
    (function(){
      const arrayInput = document.getElementById('array-input');
      const applyBtn = document.getElementById('apply-array');
      const randomBtn = document.getElementById('random-array');
      const numericChk = document.getElementById('numeric');
      const arrayRow = document.getElementById('array-row');
      const targetInput = document.getElementById('target-input');
      const startBtn = document.getElementById('start');
      const stepBtn = document.getElementById('step');
      const playBtn = document.getElementById('play');
      const pauseBtn = document.getElementById('pause');
      const resetBtn = document.getElementById('reset');
      const speedSlider = document.getElementById('speed');
      const speedLabel = document.getElementById('speed-label');
      const comparisonsEl = document.getElementById('comparisons');
      const indexEl = document.getElementById('index');
      const resultEl = document.getElementById('result');
      const explainBtn = document.getElementById('explain-btn');
      const explain = document.getElementById('explain');
      const traceEl = document.getElementById('trace');
      const traceCount = document.getElementById('trace-count');

      let arr = [];
      let nodes = [];
      let steps = [];
      let playing = false;
      let playTimer = null;
      let stepIndex = 0;
      let comparisons = 0;
      let foundIndex = null;
      let treatNumbers = true;

      function parseArrayInput(){
        const raw = arrayInput.value.trim();
        if(!raw) return [];
        const parts = raw.split(',').map(s=>s.trim()).filter(s=>s.length);
        if(treatNumbers){
          return parts.map(p => {
            const n = Number(p);
            return Number.isFinite(n)? n : p;
          });
        } else {
          return parts;
        }
      }

      function renderArray(){
        arrayRow.innerHTML = '';
        nodes = [];
        arr.forEach((v,i)=>{
          const el = document.createElement('div');
          el.className = 'box';
          el.setAttribute('data-index', i);
          el.setAttribute('role','button');
          el.setAttribute('tabindex','0');
          el.innerHTML = `<div>${String(v)}</div><div class="indicator" aria-hidden="true">i=${i}</div>`;
          arrayRow.appendChild(el);
          nodes.push(el);
        });
      }

      function clearState(){
        steps = [];
        playing = false;
        if(playTimer) { clearInterval(playTimer); playTimer = null; }
        stepIndex = 0;
        comparisons = 0;
        foundIndex = null;
        nodes.forEach(n => {
          n.className = 'box';
        });
        comparisonsEl.textContent = '0';
        indexEl.textContent = '—';
        resultEl.textContent = '—';
        pauseBtn.disabled = true;
        playBtn.disabled = false;
        traceEl.innerHTML = '';
        traceCount.textContent = '0 steps';
        highlightPseudo(null);
      }

      function prepareSteps(){
        steps = [];
        // Linear search steps: for each i: mark current, compare, then either found or mark visited
        for(let i=0;i<arr.length;i++){
          steps.push({ type:'current', index:i, info:`Inspect arr[${i}] = ${String(arr[i])}` });
          steps.push({ type:'compare', index:i, info:`Compare arr[${i}] with target` });
          if(equals(arr[i], targetInput.value)) {
            steps.push({ type:'found', index:i, info:`Found at index ${i}` });
            break;
          } else {
            steps.push({ type:'mismatch', index:i, info:`Not equal` });
          }
        }
        if(steps.length===0 || steps[steps.length-1].type !== 'found'){
          steps.push({ type:'done', index:-1, info:'Target not found' });
        }
        traceCount.textContent = steps.length + ' steps';
      }

      function equals(a, bStr){
        if(treatNumbers){
          const b = Number(bStr);
          if(Number.isFinite(b) && typeof a === 'number') return a === b;
          // fallback to string compare
          return String(a) === String(bStr);
        } else {
          return String(a) === String(bStr);
        }
      }

      function addTrace(step){
        const d = document.createElement('div');
        d.style.padding = '8px';
        d.style.borderBottom = '1px solid rgba(255,255,255,0.02)';
        d.style.fontSize = '13px';
        d.style.color = 'var(--muted)';
        d.innerHTML = `<strong style="color:var(--accent)">${step.type.toUpperCase()}</strong> — ${step.info}`;
        traceEl.appendChild(d);
        traceEl.scrollTop = traceEl.scrollHeight;
      }

      function highlightPseudo(line){
        const lines = [1,2,3,4,5];
        lines.forEach(n=>{
          const el = document.getElementById('p-line-' + n);
          if(!el) return;
          el.classList.toggle('current', n === line);
        });
      }

      function applyStep(step){
        // apply visual changes for a single step
        if(step.type === 'current'){
          nodes.forEach(n=> n.classList.remove('current'));
          const el = nodes[step.index];
          if(el) el.classList.add('current');
          indexEl.textContent = step.index;
          highlightPseudo(2);
          addTrace(step);
        } else if(step.type === 'compare'){
          const el = nodes[step.index];
          if(el){
            el.classList.add('compared');
          }
          comparisons++;
          comparisonsEl.textContent = comparisons;
          highlightPseudo(3);
          addTrace(step);
        } else if(step.type === 'found'){
          const el = nodes[step.index];
          if(el){
            el.classList.remove('compared');
            el.classList.add('found');
          }
          foundIndex = step.index;
          indexEl.textContent = step.index;
          resultEl.textContent = 'Found at index ' + step.index;
          resultEl.style.color = 'var(--good)';
          highlightPseudo(4);
          addTrace(step);
        } else if(step.type === 'mismatch'){
          const el = nodes[step.index];
          if(el){
            el.classList.remove('compared');
            el.classList.add('visited');
          }
          highlightPseudo(2);
          addTrace(step);
        } else if(step.type === 'done'){
          // mark result not found if not already found
          if(foundIndex === null){
            resultEl.textContent = 'Not found';
            resultEl.style.color = 'var(--muted)';
            indexEl.textContent = '—';
          }
          highlightPseudo(5);
          addTrace(step);
        }
      }

      function runStep(){
        if(stepIndex >= steps.length) {
          stopPlaying();
          return;
        }
        const step = steps[stepIndex];
        applyStep(step);
        stepIndex++;
        if(step.type === 'found' || step.type === 'done'){
          stopPlaying();
        }
      }

      function startPlaying(){
        if(playing) return;
        playing = true;
        playBtn.disabled = true;
        pauseBtn.disabled = false;
        const speed = Number(speedSlider.value);
        const interval = 700 / speed; // base 700ms
        playTimer = setInterval(()=>{
          runStep();
        }, interval);
      }

      function stopPlaying(){
        playing = false;
        playBtn.disabled = false;
        pauseBtn.disabled = true;
        if(playTimer){ clearInterval(playTimer); playTimer = null; }
      }

      // event handlers
      applyBtn.addEventListener('click', () => {
        treatNumbers = numericChk.checked;
        arr = parseArrayInput();
        renderArray();
        clearState();
      });

      randomBtn.addEventListener('click', () => {
        treatNumbers = numericChk.checked;
        const len = Math.max(3, Math.min(12, Math.floor(Math.random()*8)+3));
        const R = [];
        for(let i=0;i<len;i++){
          if(treatNumbers) R.push(Math.floor(Math.random()*20)+1);
          else R.push(String.fromCharCode(97 + Math.floor(Math.random()*26)));
        }
        arrayInput.value = R.join(', ');
        arr = R;
        renderArray();
        clearState();
      });

      startBtn.addEventListener('click', () => {
        // initialize and prepare steps
        treatNumbers = numericChk.checked;
        arr = parseArrayInput();
        renderArray();
        clearState();
        prepareSteps();
        // move to first step
        if(steps.length>0) {
          runStep();
        }
      });

      stepBtn.addEventListener('click', () => {
        if(steps.length===0){
          // prepare if not
          treatNumbers = numericChk.checked;
          arr = parseArrayInput();
          renderArray();
          clearState();
          prepareSteps();
        }
        runStep();
      });

      playBtn.addEventListener('click', () => {
        if(steps.length===0){
          treatNumbers = numericChk.checked;
          arr = parseArrayInput();
          renderArray();
          clearState();
          prepareSteps();
        }
        startPlaying();
      });

      pauseBtn.addEventListener('click', () => {
        stopPlaying();
      });

      resetBtn.addEventListener('click', () => {
        clearState();
      });

      speedSlider.addEventListener('input', () => {
        speedLabel.textContent = Number(speedSlider.value).toFixed(1) + 'x';
        if(playing){
          // restart timer with new speed
          stopPlaying();
          startPlaying();
        }
      });

      explainBtn.addEventListener('click', () => {
        explain.style.display = explain.style.display === 'none' ? 'block' : 'none';
      });

      // keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        if(e.key === ' '){ e.preventDefault(); if(playing) pauseBtn.click(); else playBtn.click(); }
        if(e.key === 'ArrowRight'){ stepBtn.click(); }
        if(e.key === 'r' && (e.ctrlKey || e.metaKey)){ e.preventDefault(); resetBtn.click(); }
      });

      // initialize
      (function init(){
        treatNumbers = numericChk.checked;
        arr = parseArrayInput();
        renderArray();
        clearState();
      })();

      // Accessibility: focus styling for boxes
      arrayRow.addEventListener('click', (ev)=>{
        const box = ev.target.closest('.box');
        if(box){
          const i = Number(box.getAttribute('data-index'));
          targetInput.value = String(arr[i]);
        }
      });

    })();
  </script>
</body>
</html>