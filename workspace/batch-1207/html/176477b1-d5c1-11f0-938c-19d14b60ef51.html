<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huffman Coding Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #output {
            margin-top: 20px;
        }
        .tree {
            display: flex;
            justify-content: center;
        }
        .node {
            border: 1px solid #333;
            padding: 5px;
            margin: 5px;
            text-align: center;
            position: relative;
        }
    </style>
</head>
<body>

<h1>Huffman Coding Visualization</h1>
<p>Enter string to visualize Huffman Coding:</p>
<input type="text" id="inputString" placeholder="Enter a string here">
<button onclick="generateHuffmanTree()">Generate Huffman Tree</button>

<div id="output"></div>

<script>
    class Node {
        constructor(char, freq) {
            this.char = char;
            this.freq = freq;
            this.left = null;
            this.right = null;
        }
    }

    function buildHuffmanTree(charFreq) {
        const nodes = Object.entries(charFreq).map(([char, freq]) => new Node(char, freq));

        while (nodes.length > 1) {
            nodes.sort((a, b) => a.freq - b.freq);
            const left = nodes.shift();
            const right = nodes.shift();
            const merged = new Node(null, left.freq + right.freq);
            merged.left = left;
            merged.right = right;
            nodes.push(merged);
        }

        return nodes[0]; // Root of the Huffman Tree
    }

    function generateCodes(node, prefix = '', codeMap = {}) {
        if (node) {
            if (node.char) {
                codeMap[node.char] = prefix;
            }
            generateCodes(node.left, prefix + '0', codeMap);
            generateCodes(node.right, prefix + '1', codeMap);
        }
        return codeMap;
    }

    function generateHuffmanTree() {
        const input = document.getElementById('inputString').value;
        const charFreq = {};

        for (const char of input) {
            charFreq[char] = (charFreq[char] || 0) + 1;
        }

        const root = buildHuffmanTree(charFreq);
        const codes = generateCodes(root);
        displayHuffmanTree(root);
        displayCodes(codes);
    }

    function displayHuffmanTree(node, depth = 0) {
        if (!node) return;

        if (node.char) {
            return `<div class="node">${node.char} (${node.freq})</div>`;
        }

        const leftTree = displayHuffmanTree(node.left, depth + 1);
        const rightTree = displayHuffmanTree(node.right, depth + 1);

        return `
            <div class="node">(${node.freq})
                <div class="tree">
                    <div>${leftTree}</div>
                    <div>${rightTree}</div>
                </div>
            </div>`;
    }

    function displayCodes(codes) {
        const codesDiv = document.createElement('div');
        codesDiv.innerHTML = '<h2>Character Codes:</h2>';
        Object.entries(codes).forEach(([char, code]) => {
            const codeElement = document.createElement('p');
            codeElement.textContent = `${char}: ${code}`;
            codesDiv.appendChild(codeElement);
        });
        document.getElementById('output').innerHTML = '';
        document.getElementById('output').appendChild(codesDiv);

        const treeDiv = document.createElement('div');
        treeDiv.innerHTML = displayHuffmanTree(buildHuffmanTree(Object.entries(codes).map(([char, code]) => ({ [char]: code.length }))));
        document.getElementById('output').appendChild(treeDiv);
    }
</script>

</body>
</html>