<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huffman Coding</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            width: 80%;
            margin: 40px auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .footer {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Huffman Coding Example</h1>
        </div>
        <div class="footer">
            <p>&copy; 2023 Huffman Coding Example</p>
        </div>
        <h2>Given Text:</h2>
        <textarea id="text" rows="10" cols="40"></textarea>

        <h2>Output:</h2>
        <div id="output"></div>

        <h2>Huffman Code:</h2>
        <textarea id="huffman-code" rows="10" cols="40"></textarea>

        <h2>Dictionary:</h2>
        <textarea id="dictionary" rows="10" cols="40"></textarea>

        <button id="encode-button">Encode</button>
        <button id="decode-button">Decode</button>

        <script>
            const text = document.getElementById('text');
            const output = document.getElementById('output');
            const huffmanCode = document.getElementById('huffman-code');
            const dictionary = document.getElementById('dictionary');

            let frequencyMap = {};
            let maxFrequency = 0;
            let codes = [];

            function calculateFrequency(text) {
                text = text.toLowerCase().split(' ');
                for (let char of text) {
                    if (char in frequencyMap) {
                        frequencyMap[char] += 1;
                    } else {
                        frequencyMap[char] = 1;
                    }
                }
                for (let char in frequencyMap) {
                    if (frequencyMap[char] > maxFrequency) {
                        maxFrequency = frequencyMap[char];
                    }
                }
            }

            function buildHuffmanTree(frequencyMap) {
                let nodes = [];
                for (let char in frequencyMap) {
                    let node = {
                        char: char,
                        frequency: frequencyMap[char],
                        left: null,
                        right: null
                    };
                    nodes.push(node);
                }

                while (nodes.length > 1) {
                    let maxNode = null;
                    for (let node of nodes) {
                        if (maxNode === null || node.frequency > maxNode.frequency) {
                            maxNode = node;
                        }
                    }

                    let newNode = {
                        char: maxNode.char,
                        frequency: maxNode.frequency,
                        left: nodes[0],
                        right: nodes[1]
                    };
                    nodes.splice(0, 2, newNode);
                }

                return nodes[0];
            }

            function buildHuffmanCodes(node, currentCode) {
                if (node === null) {
                    codes.push(currentCode);
                    return;
                }

                buildHuffmanCodes(node.left, currentCode + '0');
                buildHuffmanCodes(node.right, currentCode + '1');
            }

            function generateHuffmanCode() {
                let root = buildHuffmanTree(frequencyMap);
                let huffmanCodes = {};
                buildHuffmanCodes(root, '');

                for (let code of huffmanCodes) {
                    huffmanCode.value += code + ' ';
                }

                huffmanCode.value = huffmanCode.value.trim();
            }

            function encodeText(text) {
                let encodedText = '';
                for (let char of text) {
                    let code = huffmanCode.value.charAt(text.indexOf(char));
                    encodedText += char + code;
                }

                output.value += encodedText + '\n';
            }

            function decodeText(encodedText) {
                let decodedText = '';
                for (let code of encodedText.split(' ')) {
                    let char = charCodeAt(code) - 97;
                    decodedText += String.fromCharCode(char);
                }

                output.value += decodedText + '\n';
            }

            function generateDictionary() {
                let dictionary = {};
                for (let char in frequencyMap) {
                    dictionary[char] = char;
                }

                huffmanCode.value = '';
                generateHuffmanCode();
                dictionary.value = dictionary;
            }

            calculateFrequency(text);

            generateDictionary();

            let encodeButton = document.getElementById('encode-button');
            let decodeButton = document.getElementById('decode-button');

            encodeButton.addEventListener('click', () => {
                let text = text.value;
                encodeText(text);
                output.value = '';
            });

            decodeButton.addEventListener('click', () => {
                let encodedText = output.value.trim();
                let decodedText = decodeText(encodedText);
                output.value = decodedText;
            });
        </script>
    </div>
</body>
</html>