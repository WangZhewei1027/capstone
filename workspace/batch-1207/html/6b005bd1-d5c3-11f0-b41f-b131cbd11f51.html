<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort Visualization</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        
        .array-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 250px;
            margin: 30px 0;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .array-bar {
            width: 30px;
            margin: 0 2px;
            background-color: #3498db;
            border-radius: 3px 3px 0 0;
            transition: all 0.3s ease;
        }
        
        .comparing {
            background-color: #e74c3c;
        }
        
        .sorted {
            background-color: #2ecc71;
        }
        
        .info {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .step-info {
            margin-top: 15px;
            font-style: italic;
            color: #7f8c8d;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .algorithm-explanation {
            margin-top: 30px;
            line-height: 1.6;
        }
        
        .code-block {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: monospace;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
    </style>
</head>
<body>
    <h1>Bubble Sort Visualization</h1>
    
    <div class="controls">
        <button id="generateArray">Generate New Array</button>
        <button id="startSort">Start Sorting</button>
        <button id="pauseResume">Pause</button>
        <button id="stepForward">Step Forward</button>
        <button id="reset">Reset</button>
    </div>
    
    <div class="array-container" id="arrayContainer"></div>
    
    <div class="info">
        <p>Comparisons: <span id="comparisonCount">0</span></p>
        <p>Swaps: <span id="swapCount">0</span></p>
        <p>Passes: <span id="passCount">0</span></p>
        <div class="step-info" id="stepInfo">Ready to begin sorting</div>
    </div>
    
    <div class="algorithm-explanation">
        <h2>How Bubble Sort Works</h2>
        <p>Bubble Sort is a simple sorting algorithm that repeatedly steps through the list, compares adjacent elements and swaps them if they are in the wrong order. The pass through the list is repeated until the list is sorted.</p>
        
        <div class="code-block">
function bubbleSort(arr) {
    let n = arr.length;
    for (let i = 0; i < n-1; i++) {
        for (let j = 0; j < n-i-1; j++) {
            if (arr[j] > arr[j+1]) {
                // Swap elements
                [arr[j], arr[j+1]] = [arr[j+1], arr[j]];
            }
        }
    }
    return arr;
}
        </div>
        
        <p><strong>Step-by-step process:</strong></p>
        <ol>
            <li>Start from the first element, compare it with the next element</li>
            <li>If the first element is greater than the second, swap them</li>
            <li>Continue this process for each pair of adjacent elements to the end of the array</li>
            <li>Repeat the process for the array, but ignore the last element which is already in place</li>
            <li>Continue until no swaps are needed, meaning the array is sorted</li>
        </ol>
        
        <p><strong>Time Complexity:</strong> O(nÂ²) in worst and average cases, O(n) in best case (when array is already sorted)</p>
        <p><strong>Space Complexity:</strong> O(1) as it sorts in-place</p>
    </div>

    <script>
        // DOM elements
        const arrayContainer = document.getElementById('arrayContainer');
        const generateArrayBtn = document.getElementById('generateArray');
        const startSortBtn = document.getElementById('startSort');
        const pauseResumeBtn = document.getElementById('pauseResume');
        const stepForwardBtn = document.getElementById('stepForward');
        const resetBtn = document.getElementById('reset');
        const comparisonCount = document.getElementById('comparisonCount');
        const swapCount = document.getElementById('swapCount');
        const passCount = document.getElementById('passCount');
        const stepInfo = document.getElementById('stepInfo');
        
        // Variables
        let array = [];
        let isSorting = false;
        let isPaused = false;
        let animationSpeed = 500; // milliseconds
        let animationId = null;
        let comparisons = 0;
        let swaps = 0;
        let passes = 0;
        
        // Initialize the array
        function generateRandomArray() {
            array = [];
            arrayContainer.innerHTML = '';
            
            // Generate 15 random numbers between 10 and 250
            for (let i = 0; i < 15; i++) {
                array.push(Math.floor(Math.random() * 240) + 10);
            }
            
            // Visualize the array
            visualizeArray();
            
            // Reset counters
            comparisons = 0;
            swaps = 0;
            passes = 0;
            updateCounters();
            stepInfo.textContent = 'New array generated. Ready to sort.';
        }
        
        // Visualize the array as bars
        function visualizeArray(comparingIndices = [], sortedIndices = []) {
            arrayContainer.innerHTML = '';
            
            array.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'array-bar';
                bar.style.height = `${value}px`;
                
                if (comparingIndices.includes(index)) {
                    bar.classList.add('comparing');
                }
                
                if (sortedIndices.includes(index)) {
                    bar.classList.add('sorted');
                }
                
                // Add value label
                const label = document.createElement('div');
                label.textContent = value;
                label.style.textAlign = 'center';
                label.style.marginTop = '5px';
                label.style.fontSize = '12px';
                
                bar.appendChild(label);
                arrayContainer.appendChild(bar);
            });
        }
        
        // Update counter displays
        function updateCounters() {
            comparisonCount.textContent = comparisons;
            swapCount.textContent = swaps;
            passCount.textContent = passes;
        }
        
        // Bubble sort algorithm with visualization
        function* bubbleSortGenerator() {
            let n = array.length;
            let swapped;
            let sortedIndices = [];
            
            do {
                swapped = false;
                passes++;
                stepInfo.textContent = `Pass ${passes}: Comparing adjacent elements`;
                
                for (let i = 0; i < n - 1; i++) {
                    // Highlight the comparing elements
                    const comparingIndices = [i, i+1];
                    
                    // Wait for next step
                    yield { comparingIndices, sortedIndices };
                    
                    comparisons++;
                    updateCounters();
                    
                    if (array[i] > array[i + 1]) {
                        // Swap elements
                        [array[i], array[i + 1]] = [array[i + 1], array[i]];
                        swapped = true;
                        swaps++;
                        updateCounters();
                        stepInfo.textContent = `Pass ${passes}: Swapped ${array[i+1]} and ${array[i]}`;
                        
                        // Wait for next step
                        yield { comparingIndices, sortedIndices };
                    }
                }
                
                // Mark the last element as sorted
                sortedIndices.push(n - 1);
                n--;
                
                // Wait for next step
                yield { comparingIndices: [], sortedIndices };
                
            } while (swapped);
            
            // Mark all remaining elements as sorted
            for (let i = 0; i < n; i++) {
                sortedIndices.push(i);
            }
            
            stepInfo.textContent = 'Sorting complete! The array is now sorted.';
            visualizeArray([], sortedIndices);
            isSorting = false;
            updateButtons();
        }
        
        // Control sorting animation
        let sortGenerator;
        
        function startSorting() {
            if (!isSorting) {
                isSorting = true;
                isPaused = false;
                sortGenerator = bubbleSortGenerator();
                updateButtons();
                stepForward();
            }
        }
        
        function pauseResume() {
            if (isSorting) {
                if (isPaused) {
                    isPaused = false;
                    pauseResumeBtn.textContent = 'Pause';
                    stepForward();
                } else {
                    isPaused = true;
                    pauseResumeBtn.textContent = 'Resume';
                    if (animationId) {
                        clearTimeout(animationId);
                        animationId = null;
                    }
                }
            }
            updateButtons();
        }
        
        function stepForward() {
            if (!isSorting || isPaused) return;
            
            const result = sortGenerator.next();
            
            if (!result.done) {
                const { comparingIndices, sortedIndices } = result.value;
                visualizeArray(comparingIndices, sortedIndices);
                animationId = setTimeout(stepForward, animationSpeed);
            } else {
                isSorting = false;
                updateButtons();
            }
        }
        
        function reset() {
            if (animationId) {
                clearTimeout(animationId);
                animationId = null;
            }
            isSorting = false;
            isPaused = false;
            generateRandomArray();
            updateButtons();
            pauseResumeBtn.textContent = 'Pause';
            stepInfo.textContent = 'Reset. Ready to begin sorting.';
        }
        
        function updateButtons() {
            startSortBtn.disabled = isSorting;
            pauseResumeBtn.disabled = !isSorting;
            stepForwardBtn.disabled = !isSorting || !isPaused;
            generateArrayBtn.disabled = isSorting;
        }
        
        // Event listeners
        generateArrayBtn.addEventListener('click', generateRandomArray);
        startSortBtn.addEventListener('click', startSorting);
        pauseResumeBtn.addEventListener('click', pauseResume);
        stepForwardBtn.addEventListener('click', stepForward);
        resetBtn.addEventListener('click', reset);
        
        // Initialize
        generateRandomArray();
        updateButtons();
    </script>
</body>
</html>