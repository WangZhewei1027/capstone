<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two Pointers Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .array-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .array-element {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 5px;
            border: 2px solid #333;
            border-radius: 5px;
            font-size: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .pointer {
            position: relative;
            text-align: center;
            margin: 10px 15px;
            font-weight: bold;
        }
        .pointer::after {
            content: 'â†‘';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
        }
        .left-pointer { color: #e74c3c; }
        .right-pointer { color: #3498db; }
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #3498db;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #2980b9;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .explanation {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            line-height: 1.6;
        }
        .step-info {
            text-align: center;
            font-weight: bold;
            margin: 15px 0;
            font-size: 18px;
        }
        .algorithm-select {
            text-align: center;
            margin: 20px 0;
        }
        select {
            padding: 8px 15px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .target-input {
            text-align: center;
            margin: 15px 0;
        }
        input {
            padding: 8px;
            font-size: 16px;
            width: 100px;
            text-align: center;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .match-found {
            background-color: #2ecc71 !important;
            color: white;
        }
        .current {
            background-color: #f39c12;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Two Pointers Algorithm Visualization</h1>
        
        <div class="algorithm-select">
            <label for="algorithm">Select Algorithm: </label>
            <select id="algorithm">
                <option value="twoSum">Two Sum (Sorted Array)</option>
                <option value="palindrome">Check Palindrome</option>
                <option value="container">Container With Most Water</option>
            </select>
        </div>
        
        <div class="target-input" id="targetContainer" style="display: none;">
            <label for="target">Target Sum: </label>
            <input type="number" id="target" value="9" min="1" max="30">
        </div>
        
        <div class="array-container" id="arrayContainer">
            <!-- Array elements will be generated here -->
        </div>
        
        <div class="pointers-container">
            <div class="pointer-container" style="display: flex; justify-content: center;">
                <div class="pointer left-pointer">Left Pointer</div>
                <div class="pointer right-pointer">Right Pointer</div>
            </div>
        </div>
        
        <div class="step-info" id="stepInfo">Click "Next Step" to start</div>
        
        <div class="explanation" id="explanation">
            The Two Pointers technique is an efficient algorithm pattern that uses two pointers 
            to traverse data structures (usually arrays or strings) from different positions. 
            It's commonly used to solve problems with O(n) time complexity.
        </div>
        
        <div class="controls">
            <button id="prevBtn" disabled>Previous Step</button>
            <button id="nextBtn">Next Step</button>
            <button id="resetBtn">Reset</button>
        </div>
    </div>

    <script>
        // Algorithm implementations
        const algorithms = {
            twoSum: {
                name: "Two Sum in Sorted Array",
                array: [1, 3, 4, 5, 7, 9, 11],
                init: function() {
                    this.left = 0;
                    this.right = this.array.length - 1;
                    this.target = parseInt(document.getElementById('target').value) || 9;
                    document.getElementById('targetContainer').style.display = 'block';
                    return this.array;
                },
                step: function() {
                    const sum = this.array[this.left] + this.array[this.right];
                    
                    if (this.left >= this.right) {
                        return {done: true, message: `No two numbers found that sum to ${this.target}`};
                    }
                    
                    if (sum === this.target) {
                        return {done: true, message: `Found: ${this.array[this.left]} + ${this.array[this.right]} = ${this.target}`};
                    } else if (sum < this.target) {
                        this.left++;
                        return {done: false, message: `Sum ${sum} < ${this.target}, moving left pointer right`};
                    } else {
                        this.right--;
                        return {done: false, message: `Sum ${sum} > ${this.target}, moving right pointer left`};
                    }
                },
                explanation: "Two pointers start at opposite ends and move toward each other based on whether the sum is less than or greater than the target."
            },
            
            palindrome: {
                name: "Check Palindrome",
                array: ['r', 'a', 'c', 'e', 'c', 'a', 'r'],
                init: function() {
                    this.left = 0;
                    this.right = this.array.length - 1;
                    document.getElementById('targetContainer').style.display = 'none';
                    return this.array;
                },
                step: function() {
                    if (this.left >= this.right) {
                        return {done: true, message: "String is a palindrome!"};
                    }
                    
                    if (this.array[this.left] !== this.array[this.right]) {
                        return {done: true, message: "Not a palindrome - characters don't match"};
                    }
                    
                    this.left++;
                    this.right--;
                    return {done: false, message: `Characters at positions ${this.left-1} and ${this.right+1} match`};
                },
                explanation: "Two pointers start at opposite ends and move toward the center, checking if characters match."
            },
            
            container: {
                name: "Container With Most Water",
                array: [1, 8, 6, 2, 5, 4, 8, 3, 7],
                init: function() {
                    this.left = 0;
                    this.right = this.array.length - 1;
                    this.maxArea = 0;
                    document.getElementById('targetContainer').style.display = 'none';
                    return this.array;
                },
                step: function() {
                    if (this.left >= this.right) {
                        return {done: true, message: `Maximum water area is ${this.maxArea}`};
                    }
                    
                    const height = Math.min(this.array[this.left], this.array[this.right]);
                    const width = this.right - this.left;
                    const area = height * width;
                    this.maxArea = Math.max(this.maxArea, area);
                    
                    let message = `Area with heights ${this.array[this.left]} and ${this.array[this.right]}: ${area}. Max so far: ${this.maxArea}. `;
                    
                    if (this.array[this.left] < this.array[this.right]) {
                        this.left++;
                        message += "Moving left pointer right (shorter height)";
                    } else {
                        this.right--;
                        message += "Moving right pointer left (shorter height)";
                    }
                    
                    return {done: false, message: message};
                },
                explanation: "Two pointers start at opposite ends. The pointer with the smaller height moves inward to potentially find a taller line."
            }
        };

        // DOM elements
        const arrayContainer = document.getElementById('arrayContainer');
        const stepInfo = document.getElementById('stepInfo');
        const explanationEl = document.getElementById('explanation');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const resetBtn = document.getElementById('resetBtn');
        const algorithmSelect = document.getElementById('algorithm');
        const targetInput = document.getElementById('target');

        // State
        let currentAlgorithm = algorithms.twoSum;
        let currentStep = 0;
        let stepsHistory = [];

        // Initialize visualization
        function initializeVisualization() {
            currentStep = 0;
            stepsHistory = [];
            const array = currentAlgorithm.init();
            
            // Create array elements
            arrayContainer.innerHTML = '';
            array.forEach((value, index) => {
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = value;
                element.id = `element-${index}`;
                arrayContainer.appendChild(element);
            });
            
            explanationEl.textContent = currentAlgorithm.explanation;
            stepInfo.textContent = `Algorithm: ${currentAlgorithm.name}. Click "Next Step" to start.`;
            updateButtons();
        }

        // Update visualization based on current step
        function updateVisualization() {
            // Reset all elements
            document.querySelectorAll('.array-element').forEach(el => {
                el.classList.remove('current', 'match-found');
            });
            
            if (stepsHistory.length === 0) return;
            
            const step = stepsHistory[currentStep - 1];
            
            // Highlight current pointers
            if (step.left !== undefined) {
                document.getElementById(`element-${step.left}`).classList.add('current');
            }
            if (step.right !== undefined) {
                document.getElementById(`element-${step.right}`).classList.add('current');
            }
            
            stepInfo.textContent = step.message;
        }

        // Update button states
        function updateButtons() {
            prevBtn.disabled = currentStep <= 0;
            nextBtn.disabled = currentStep > 0 && stepsHistory[currentStep - 1]?.done;
        }

        // Next step button handler
        nextBtn.addEventListener('click', () => {
            if (currentStep === 0) {
                // First step - initialize
                const result = currentAlgorithm.step();
                stepsHistory.push({
                    left: currentAlgorithm.left,
                    right: currentAlgorithm.right,
                    message: result.message,
                    done: result.done
                });
                currentStep = 1;
            } else if (!stepsHistory[currentStep - 1].done) {
                // Continue algorithm
                const result = currentAlgorithm.step();
                stepsHistory.push({
                    left: currentAlgorithm.left,
                    right: currentAlgorithm.right,
                    message: result.message,
                    done: result.done
                });
                currentStep++;
            }
            
            updateVisualization();
            updateButtons();
        });

        // Previous step button handler
        prevBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                // Reset algorithm state to previous step
                if (currentStep > 0) {
                    const prevStep = stepsHistory[currentStep - 1];
                    currentAlgorithm.left = prevStep.left;
                    currentAlgorithm.right = prevStep.right;
                } else {
                    currentAlgorithm.init();
                }
                updateVisualization();
                updateButtons();
            }
        });

        // Reset button handler
        resetBtn.addEventListener('click', () => {
            initializeVisualization();
        });

        // Algorithm selection handler
        algorithmSelect.addEventListener('change', (e) => {
            currentAlgorithm = algorithms[e.target.value];
            initializeVisualization();
        });

        // Target input handler
        targetInput.addEventListener('change', () => {
            if (currentAlgorithm === algorithms.twoSum) {
                initializeVisualization();
            }
        });

        // Initialize on load
        window.addEventListener('load', initializeVisualization);
    </script>
</body>
</html>