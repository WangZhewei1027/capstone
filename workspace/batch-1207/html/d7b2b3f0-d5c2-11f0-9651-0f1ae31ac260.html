<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JavaScript Set Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background-color: #f9f9f9;
  }
  h1 {
    color: #333;
  }
  .container {
    max-width: 600px;
    background: white;
    padding: 1rem 2rem;
    border-radius: 8px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-top: 1rem;
    font-weight: bold;
  }
  input[type="text"], select {
    width: 100%;
    padding: 0.5rem;
    margin-top: 0.3rem;
    font-size: 1rem;
  }
  button {
    margin-top: 1rem;
    padding: 0.7rem 1.2rem;
    font-size: 1rem;
    cursor: pointer;
    background-color: #0078d4;
    color: white;
    border: none;
    border-radius: 4px;
  }
  button:hover {
    background-color: #005a9e;
  }
  .output {
    margin-top: 1.5rem;
    background: #eef6fc;
    padding: 1rem;
    border-radius: 6px;
    min-height: 2rem;
    white-space: pre-wrap;
    font-family: monospace;
    color: #333;
  }
  .inline-btn {
    margin-top: 0.5rem;
    margin-right: 0.5rem;
    background-color: #28a745;
  }
  .inline-btn.delete {
    background-color: #dc3545;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>JavaScript Set Demonstration</h1>
    <p>
      This demo shows the usage of a <code>Set</code> object in JavaScript, which is a collection of unique values.
    </p>

    <label for="elementInput">Enter element to add:</label>
    <input type="text" id="elementInput" placeholder='e.g. "apple", 5, true' />

    <button id="addBtn">Add Element to Set</button>
    <button id="clearBtn" style="background-color:#ff8c00;">Clear Set</button>

    <label for="checkInput">Check if element is in the Set:</label>
    <input type="text" id="checkInput" placeholder='e.g. "apple", 5, true' />
    <button id="checkBtn">Check Membership</button>

    <label for="deleteInput">Delete element from the Set:</label>
    <input type="text" id="deleteInput" placeholder='e.g. "apple", 5, true' />
    <button id="deleteBtn" class="inline-btn delete">Delete Element</button>

    <h3>Current Set Elements:</h3>
    <div class="output" id="setOutput">(Set is empty)</div>

    <h3>Demo Actions:</h3>
    <button id="demoBtn" class="inline-btn">Run Demo Operations</button>

    <h3>Messages:</h3>
    <div class="output" id="messageOutput"></div>
  </div>

<script>
  (function() {
    const set = new Set();

    // Utility function to parse input string into JS values:
    // Tries JSON parse first, then fallback to string
    function parseValue(str) {
      str = str.trim();
      if (str === '') return undefined;
      // Try boolean and null special cases
      if (str.toLowerCase() === 'true') return true;
      if (str.toLowerCase() === 'false') return false;
      if (str.toLowerCase() === 'null') return null;
      if (str.toLowerCase() === 'undefined') return undefined;

      // Try to parse as number
      if (!isNaN(str) && str !== '') return Number(str);

      // Try JSON parse for arrays/objects
      try {
        return JSON.parse(str);
      } catch(e) {
        // Return as string if JSON.parse fails
        return str;
      }
    }

    const elementInput = document.getElementById('elementInput');
    const addBtn = document.getElementById('addBtn');
    const setOutput = document.getElementById('setOutput');
    const messageOutput = document.getElementById('messageOutput');
    const clearBtn = document.getElementById('clearBtn');
    const checkInput = document.getElementById('checkInput');
    const checkBtn = document.getElementById('checkBtn');
    const deleteInput = document.getElementById('deleteInput');
    const deleteBtn = document.getElementById('deleteBtn');
    const demoBtn = document.getElementById('demoBtn');

    function updateSetOutput() {
      if (set.size === 0) {
        setOutput.textContent = '(Set is empty)';
      } else {
        // show each item JSON.stringified for clarity
        const vals = [];
        set.forEach(v => {
          try {
            vals.push(JSON.stringify(v));
          } catch {
            vals.push(String(v));
          }
        });
        setOutput.textContent = vals.join(', ');
      }
    }

    function showMessage(msg, isError = false) {
      messageOutput.textContent = msg;
      if (isError) {
        messageOutput.style.color = 'red';
      } else {
        messageOutput.style.color = 'green';
      }
    }

    addBtn.addEventListener('click', () => {
      const val = parseValue(elementInput.value);
      if (val === undefined || val === '') {
        showMessage('Please enter a valid element to add.', true);
        return;
      }
      const sizeBefore = set.size;
      set.add(val);
      const sizeAfter = set.size;
      if (sizeAfter > sizeBefore) {
        showMessage(`Added element: ${JSON.stringify(val)}`);
      } else {
        showMessage(`Element already exists in the Set: ${JSON.stringify(val)}`, true);
      }
      updateSetOutput();
      elementInput.value = '';
    });

    clearBtn.addEventListener('click', () => {
      set.clear();
      updateSetOutput();
      showMessage('Set cleared.');
    });

    checkBtn.addEventListener('click', () => {
      const val = parseValue(checkInput.value);
      if (val === undefined || val === '') {
        showMessage('Please enter a valid element to check.', true);
        return;
      }
      if (set.has(val)) {
        showMessage(`Set HAS element: ${JSON.stringify(val)}`);
      } else {
        showMessage(`Set DOES NOT have element: ${JSON.stringify(val)}`, true);
      }
      checkInput.value = '';
    });

    deleteBtn.addEventListener('click', () => {
      const val = parseValue(deleteInput.value);
      if (val === undefined || val === '') {
        showMessage('Please enter a valid element to delete.', true);
        return;
      }
      if (set.delete(val)) {
        showMessage(`Deleted element: ${JSON.stringify(val)}`);
      } else {
        showMessage(`Element not found in Set: ${JSON.stringify(val)}`, true);
      }
      updateSetOutput();
      deleteInput.value = '';
    });

    demoBtn.addEventListener('click', () => {
      set.clear();
      const demoValues = ['apple', 'banana', 42, true, null, {a:1}, [1,2], '42'];
      demoValues.forEach(v => set.add(v));

      let output = '';
      output += 'Initial elements added to Set:\n';
      output += demoValues.map(v => JSON.stringify(v)).join(', ') + '\n\n';

      output += 'Try adding duplicate "apple":\n';
      const sizeBefore = set.size;
      set.add('apple');
      output += `Size before: ${sizeBefore}, after adding duplicate: ${set.size}\n\n`;

      output += 'Check membership for "banana": ' + (set.has('banana') ? 'Found' : 'Not found') + '\n';
      output += 'Check membership for "grape": ' + (set.has('grape') ? 'Found' : 'Not found') + '\n\n';

      output += 'Delete element 42: ' + (set.delete(42) ? 'Deleted' : 'Not found') + '\n';
      output += 'Delete element "pear": ' + (set.delete('pear') ? 'Deleted' : 'Not found') + '\n\n';

      output += 'Final Set elements:\n';
      const vals = [];
      set.forEach(v => {
        try {
          vals.push(JSON.stringify(v));
        } catch {
          vals.push(String(v));
        }
      });
      output += vals.join(', ') + '\n';

      updateSetOutput();
      showMessage('Demo completed. See messages below.');
      messageOutput.textContent = output;
      messageOutput.style.color = '#333';
    });

    // Initialize
    updateSetOutput();
  })();
</script>
</body>
</html>