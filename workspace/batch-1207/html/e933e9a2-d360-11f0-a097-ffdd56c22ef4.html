<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Linear Search Visualizer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0f1724;
      --panel:#0b1220;
      --accent:#06b6d4;
      --muted:#94a3b8;
      --good:#16a34a;
      --bad:#ef4444;
      --visited:#64748b;
      --cell-bg:#0b1220;
      --cell-border:#23303f;
      --glass: rgba(255,255,255,0.03);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color-scheme: dark;
    }
    html,body{
      height:100%;
      margin:0;
      background:linear-gradient(180deg,#071026 0%, #081226 40%, #071326 100%);
      color:#e6eef6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .app{
      max-width:1100px;
      margin:28px auto;
      padding:20px;
    }
    header{
      display:flex;
      gap:20px;
      align-items:center;
      margin-bottom:18px;
    }
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .layout{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:18px;
    }
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      padding:14px;
      border-radius:10px;
      box-shadow: 0 6px 18px rgba(2,6,23,0.6);
    }
    .controls{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    button, input[type=number], input[type=text], textarea, select{
      font:inherit;
      color:inherit;
    }
    button{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.04);
      padding:8px 10px;
      border-radius:8px;
      cursor:pointer;
      color:var(--muted);
    }
    button.primary{
      background:linear-gradient(180deg,var(--accent), #0490a7);
      color:black;
      border:none;
      font-weight:600;
    }
    button.warn{
      background:linear-gradient(180deg,#f97316,#fb923c);
      color:black;border:none;
    }
    .controls input[type=number]{
      width:72px;
      padding:8px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.03);
      background:transparent;
      color:var(--muted);
    }
    .row{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:12px;
      flex-wrap:wrap;
    }
    .array-visual{
      display:flex;
      gap:8px;
      align-items:flex-end;
      justify-content:center;
      padding:18px;
      min-height:120px;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      border:1px solid rgba(255,255,255,0.02);
    }
    .cell{
      width:52px;
      height:52px;
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      font-weight:700;
      background:var(--cell-bg);
      border:1px solid var(--cell-border);
      user-select:none;
      position:relative;
      transition:all 220ms ease;
      cursor:pointer;
    }
    .cell .idx{position:absolute;left:6px;top:6px;font-size:11px;color:var(--muted);font-weight:600}
    .cell .val{font-size:18px}
    .cell.visited{opacity:0.6;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); border-color:rgba(255,255,255,0.02)}
    .cell.current{background:linear-gradient(180deg,#facc15,#f59e0b); color:black; box-shadow:0 6px 22px rgba(250,204,21,0.12); transform:translateY(-6px)}
    .cell.found{background:linear-gradient(180deg,var(--good), #059669); color:black; transform:translateY(-8px); box-shadow:0 8px 24px rgba(16,185,129,0.16)}
    .cell.notfound{background:linear-gradient(180deg,var(--bad), #ef4444); color:black; transform:translateY(-6px)}
    .status{
      display:flex;
      gap:12px;
      align-items:center;
      flex-wrap:wrap;
      margin-top:10px;
      color:var(--muted);
    }
    .badge{
      background:var(--glass);
      padding:6px 10px;
      border-radius:999px;
      font-weight:600;
      font-size:13px;
      color:var(--muted);
    }
    .panel-right{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    textarea{width:100%;min-height:80px;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}
    .pseudocode{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
      background:rgba(255,255,255,0.02);
      padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);
      color:var(--muted); font-size:13px;
    }
    .line{padding:6px;border-left:3px solid transparent;display:flex;gap:8px;align-items:center}
    .line.active{background:rgba(255,255,255,0.01);border-left-color:var(--accent);color: white}
    .footer{
      margin-top:14px;color:var(--muted);font-size:13px;
    }
    .controls .speed{display:flex;align-items:center;gap:8px}
    input[type=range]{accent-color:var(--accent);width:140px}
    .result{
      margin-top:8px;font-weight:700;font-size:15px;
    }
    .hint{font-size:13px;color:var(--muted)}
    @media (max-width:880px){
      .layout{grid-template-columns:1fr; }
      .array-visual{overflow:auto;padding-bottom:12px;}
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Linear Search Visualizer">
    <header>
      <div>
        <h1>Linear Search Visualizer</h1>
        <p class="lead">Step through linear search to find a target value in an array. Click cells to set the target quickly.</p>
      </div>
    </header>

    <div class="layout">
      <div class="panel">
        <div class="controls" aria-hidden="false">
          <button id="stepBtn">Step</button>
          <button id="playBtn" class="primary">Play</button>
          <button id="resetBtn">Reset</button>
          <button id="shuffleBtn">Shuffle</button>
          <label class="small" style="margin-left:8px">Speed</label>
          <div class="speed">
            <input id="speedRange" type="range" min="150" max="1200" value="500" />
            <span id="speedLabel" class="small">500ms</span>
          </div>
          <div style="margin-left:auto;display:flex;gap:8px;">
            <button id="randTargetBtn">Random Target</button>
          </div>
        </div>

        <div class="row">
          <div style="flex:1">
            <label for="arrayInput">Array (comma separated)</label>
            <textarea id="arrayInput" placeholder="e.g. 23, 5, 78, 12..."></textarea>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button id="setArrayBtn">Set Array</button>
              <input id="sizeInput" type="number" min="1" max="30" value="10" aria-label="array size" />
              <button id="genBtn">Generate Random</button>
              <input id="minVal" type="number" value="1" style="width:70px" aria-label="min value" />
              <input id="maxVal" type="number" value="99" style="width:70px" aria-label="max value" />
            </div>
          </div>

          <div style="width:220px">
            <label for="targetInput">Target Value</label>
            <input id="targetInput" type="number" style="width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)" />
            <div style="display:flex;gap:8px;margin-top:8px">
              <button id="setTargetBtn">Set Target</button>
              <button id="clearTargetBtn">Clear</button>
            </div>
            <div class="status" style="margin-top:10px">
              <div class="badge">Comparisons: <span id="comp">0</span></div>
              <div class="badge">Index: <span id="idx">—</span></div>
            </div>
            <div class="result" id="resultText"></div>
          </div>
        </div>

        <div class="array-visual" id="arrayVisual" aria-live="polite" role="list"></div>
        <div class="footer">
          <div class="hint">Tip: click any box to set the target to that value and then step to observe comparisons.</div>
        </div>
      </div>

      <div class="panel panel-right" aria-hidden="false">
        <div>
          <label>Pseudocode</label>
          <div class="pseudocode" id="pseudocode">
            <div class="line" data-line="1"><strong>1</strong> for i = 0 to n - 1:</div>
            <div class="line" data-line="2"><strong>2</strong> &nbsp;&nbsp;if arr[i] == target: </div>
            <div class="line" data-line="3"><strong>3</strong> &nbsp;&nbsp;&nbsp;&nbsp;return i</div>
            <div class="line" data-line="4"><strong>4</strong> return -1</div>
          </div>
        </div>

        <div>
          <label>Complexity</label>
          <div style="display:flex;gap:8px;flex-direction:column">
            <div class="small"><strong>Best case:</strong> O(1) — target is at index 0</div>
            <div class="small"><strong>Average case:</strong> O(n) — target roughly in middle</div>
            <div class="small"><strong>Worst case:</strong> O(n) — target not present or at last index</div>
          </div>
        </div>

        <div>
          <label>Explanation</label>
          <div class="small">Linear search scans each element from left to right, comparing with the target until it's found or the array ends. It's simple and works on unsorted arrays but isn't efficient for large arrays.</div>
        </div>

      </div>
    </div>
  </div>

  <script>
    (function(){
      // Elements
      const arrayVisual = document.getElementById('arrayVisual');
      const stepBtn = document.getElementById('stepBtn');
      const playBtn = document.getElementById('playBtn');
      const resetBtn = document.getElementById('resetBtn');
      const shuffleBtn = document.getElementById('shuffleBtn');
      const speedRange = document.getElementById('speedRange');
      const speedLabel = document.getElementById('speedLabel');
      const compSpan = document.getElementById('comp');
      const idxSpan = document.getElementById('idx');
      const resultText = document.getElementById('resultText');
      const arrayInput = document.getElementById('arrayInput');
      const setArrayBtn = document.getElementById('setArrayBtn');
      const genBtn = document.getElementById('genBtn');
      const sizeInput = document.getElementById('sizeInput');
      const minVal = document.getElementById('minVal');
      const maxVal = document.getElementById('maxVal');
      const targetInput = document.getElementById('targetInput');
      const setTargetBtn = document.getElementById('setTargetBtn');
      const clearTargetBtn = document.getElementById('clearTargetBtn');
      const randTargetBtn = document.getElementById('randTargetBtn');
      const pseudocode = document.getElementById('pseudocode');

      // State
      let arr = [];
      let target = null;
      let i = 0;
      let comparisons = 0;
      let playing = false;
      let timer = null;

      function randomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

      function generateArray(n, min, max){
        const a = [];
        for(let k=0;k<n;k++) a.push(randomInt(min,max));
        return a;
      }

      function renderArray(){
        arrayVisual.innerHTML = '';
        arr.forEach((v, idx)=>{
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.setAttribute('role','listitem');
          cell.dataset.index = idx;
          cell.innerHTML = `<div class="idx">${idx}</div><div class="val">${v}</div>`;
          cell.title = 'Click to set target → ' + v;
          cell.addEventListener('click',()=>{
            setTarget(v);
            flashCell(idx);
          });
          arrayVisual.appendChild(cell);
        });
        updateStatus();
      }

      function flashCell(idx){
        const el = arrayVisual.children[idx];
        if(!el) return;
        el.animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:320});
      }

      function updateStatus(){
        compSpan.textContent = comparisons;
        idxSpan.textContent = (i < arr.length && i>=0) ? i : '—';
        // update cells classes
        for(let k=0;k<arr.length;k++){
          const el = arrayVisual.children[k];
          el.classList.remove('current','visited','found','notfound');
          if(k < i) el.classList.add('visited');
        }
        if(i < arr.length && i>=0){
          arrayVisual.children[i].classList.add('current');
        }
        if(typeof target === 'number') targetInput.value = target;
      }

      function highlightPseudocode(line){
        const lines = pseudocode.querySelectorAll('.line');
        lines.forEach(l => l.classList.remove('active'));
        const el = pseudocode.querySelector(`[data-line="${line}"]`);
        if(el) el.classList.add('active');
      }

      function step(){
        if(i >= arr.length){
          // already finished, nothing to do
          finishNotFound();
          return;
        }
        highlightPseudocode(1);
        // check arr[i]
        highlightPseudocode(2);
        comparisons++;
        updateStatus();
        // small visual delay handled by animation from play/step
        if(arr[i] === target){
          // found
          highlightPseudocode(3);
          arrayVisual.children[i].classList.remove('current');
          arrayVisual.children[i].classList.add('found');
          resultText.textContent = `Found target ${target} at index ${i} (comparisons: ${comparisons})`;
          playing = false;
          stopTimer();
        } else {
          // not equal: mark visited and move on
          arrayVisual.children[i].classList.remove('current');
          arrayVisual.children[i].classList.add('visited');
          i++;
          if(i < arr.length){
            arrayVisual.children[i].classList.add('current');
            highlightPseudocode(1);
          } else {
            // finished, not found
            finishNotFound();
            return;
          }
        }
        updateStatus();
      }

      function finishNotFound(){
        highlightPseudocode(4);
        resultText.textContent = `Target ${target} not found (comparisons: ${comparisons})`;
        playing = false;
        stopTimer();
        // mark all visited (already visited), and optionally mark array with notfound for last step
        for(let k=0;k<arr.length;k++){
          const el = arrayVisual.children[k];
          el.classList.add('visited');
        }
      }

      function resetState(keepArray=false){
        stopTimer();
        playing = false;
        if(!keepArray){
          // leave arr as-is
        }
        i = 0;
        comparisons = 0;
        resultText.textContent = '';
        highlightPseudocode(1);
        updateStatus();
      }

      function playToggle(){
        if(playing){
          playing = false;
          stopTimer();
        } else {
          // don't start if target not set
          if(target === null || target === undefined || target === ''){
            alert('Set a target value first (use the Target input or click a cell).');
            return;
          }
          playing = true;
          playBtn.textContent = 'Pause';
          step(); // immediate step
          startTimer();
        }
        playBtn.classList.toggle('primary', playing);
        playBtn.textContent = playing ? 'Pause' : 'Play';
      }

      function startTimer(){
        stopTimer();
        const interval = Number(speedRange.value);
        timer = setInterval(()=>{
          if(!playing) { stopTimer(); return; }
          if(i >= arr.length) { stopTimer(); playing=false; playBtn.classList.remove('primary'); playBtn.textContent='Play'; return; }
          step();
        }, interval);
      }
      function stopTimer(){ if(timer){ clearInterval(timer); timer=null; } }

      // UI Actions
      stepBtn.addEventListener('click', ()=>{
        if(target === null || target === undefined || target === ''){
          alert('Set a target value first (use the Target input or click a cell).');
          return;
        }
        // if playing, stop and allow manual step
        playing = false;
        stopTimer();
        playBtn.classList.remove('primary');
        playBtn.textContent = 'Play';
        step();
      });

      playBtn.addEventListener('click', playToggle);

      resetBtn.addEventListener('click', ()=>{
        // clear target?
        // we keep array but reset indices
        resetState(true);
      });

      shuffleBtn.addEventListener('click', ()=>{
        // shuffle array
        for(let j=arr.length-1;j>0;j--){
          const r = Math.floor(Math.random()*(j+1));
          [arr[j],arr[r]] = [arr[r],arr[j]];
        }
        resetState(true);
        renderArray();
      });

      speedRange.addEventListener('input', ()=>{
        speedLabel.textContent = speedRange.value + 'ms';
        if(playing) startTimer();
      });

      setArrayBtn.addEventListener('click', ()=>{
        const text = arrayInput.value.trim();
        if(!text){ alert('Enter comma-separated numbers or use Generate Random.'); return; }
        const parts = text.split(',').map(s=>s.trim()).filter(s=>s!=='');
        const parsed = [];
        for(const p of parts){
          const n = Number(p);
          if(Number.isNaN(n)){ alert('Invalid number in array: ' + p); return; }
          parsed.push(n);
        }
        arr = parsed.slice();
        resetState(true);
        renderArray();
      });

      genBtn.addEventListener('click', ()=>{
        const n = Number(sizeInput.value) || 10;
        const min = Number(minVal.value);
        const max = Number(maxVal.value);
        if(min > max){ alert('Min should be <= Max'); return; }
        arr = generateArray(Math.max(1,Math.min(30,n)), min, max);
        arrayInput.value = arr.join(', ');
        resetState(true);
        renderArray();
      });

      setTargetBtn.addEventListener('click', ()=>{
        const t = targetInput.value.trim();
        if(t === ''){ alert('Enter a numeric target.'); return; }
        const num = Number(t);
        if(Number.isNaN(num)){ alert('Target must be a number.'); return; }
        setTarget(num);
      });

      clearTargetBtn.addEventListener('click', ()=>{
        target = null;
        targetInput.value = '';
        resultText.textContent = '';
        resetState(true);
      });

      randTargetBtn.addEventListener('click', ()=>{
        if(arr.length===0){ alert('Generate an array first.'); return; }
        setTarget(arr[randomInt(0,arr.length-1)]);
      });

      function setTarget(val){
        target = Number(val);
        targetInput.value = target;
        resultText.textContent = `Target set to ${target}.`;
        // reset search to start
        resetState(true);
      }

      // initialize
      (function init(){
        arr = generateArray(10,1,99);
        arrayInput.value = arr.join(', ');
        target = arr[randomInt(0,arr.length-1)];
        targetInput.value = target;
        renderArray();
        highlightPseudocode(1);
        speedLabel.textContent = speedRange.value + 'ms';
      })();

      // expose a little keyboard shortcuts
      window.addEventListener('keydown',(e)=>{
        if(e.key===' '){ e.preventDefault(); playToggle(); }
        if(e.key==='ArrowRight') stepBtn.click();
        if(e.key==='r') resetBtn.click();
        if(e.key==='g') genBtn.click();
      });

    })();
  </script>
</body>
</html>