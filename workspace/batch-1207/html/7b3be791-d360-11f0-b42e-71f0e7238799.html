<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dijkstra's Algorithm Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }

        canvas {
            border: 1px solid #000;
        }

        #controls {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="controls">
        <button id="startButton">Start Dijkstra's Algorithm</button>
    </div>
    <canvas id="canvas" width="600" height="600"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        const nodes = [
            { id: 'A', x: 50, y: 50 },
            { id: 'B', x: 200, y: 150 },
            { id: 'C', x: 400, y: 100 },
            { id: 'D', x: 300, y: 300 },
            { id: 'E', x: 100, y: 400 }
        ];

        const edges = [
            { from: 'A', to: 'B', weight: 1 },
            { from: 'A', to: 'C', weight: 4 },
            { from: 'B', to: 'C', weight: 2 },
            { from: 'B', to: 'D', weight: 5 },
            { from: 'C', to: 'D', weight: 1 },
            { from: 'D', to: 'E', weight: 3 },
            { from: 'B', to: 'E', weight: 8 }
        ];

        const startNodeId = 'A';
        const endNodeId = 'E';
        const distances = {};
        const prev = {};
        const visited = new Set();

        function drawGraph() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Draw nodes
            nodes.forEach(node => {
                ctx.fillStyle = visited.has(node.id) ? 'lightgreen' : 'lightblue';
                ctx.beginPath();
                ctx.arc(node.x, node.y, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                ctx.fillStyle = 'black';
                ctx.fillText(node.id, node.x - 5, node.y + 5);
            });

            // Draw edges
            edges.forEach(edge => {
                const fromNode = nodes.find(node => node.id === edge.from);
                const toNode = nodes.find(node => node.id === edge.to);
                ctx.beginPath();
                ctx.moveTo(fromNode.x, fromNode.y);
                ctx.lineTo(toNode.x, toNode.y);
                ctx.stroke();
                ctx.fillText(edge.weight, (fromNode.x + toNode.x) / 2, (fromNode.y + toNode.y) / 2);
            });
        }

        function initialize() {
            nodes.forEach(node => {
                distances[node.id] = Infinity;
                prev[node.id] = null;
            });
            distances[startNodeId] = 0;
        }

        function getMinNode() {
            return nodes.reduce((acc, node) => {
                if (!visited.has(node.id) && distances[node.id] < distances[acc.id]) {
                    return node;
                }
                return acc;
            }, { id: null, distance: Infinity });
        }

        function dijkstra() {
            initialize();
            let currentNode = getMinNode();

            while (currentNode.id) {
                visited.add(currentNode.id);
                edges.forEach(edge => {
                    if (edge.from === currentNode.id && !visited.has(edge.to)) {
                        const newDist = distances[currentNode.id] + edge.weight;
                        if (newDist < distances[edge.to]) {
                            distances[edge.to] = newDist;
                            prev[edge.to] = currentNode.id;
                        }
                    }
                });
                drawGraph();
                currentNode = getMinNode();
            }
        }

        document.getElementById('startButton').addEventListener('click', () => {
            visited.clear();
            dijkstra();
        });

        drawGraph();
    </script>
</body>
</html>