<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Search Visualization</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }
        input, button {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #3498db;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .array-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 30px 0;
            justify-content: center;
        }
        .array-element {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .low {
            background-color: #3498db;
            color: white;
        }
        .high {
            background-color: #e74c3c;
            color: white;
        }
        .mid {
            background-color: #2ecc71;
            color: white;
            transform: scale(1.1);
        }
        .found {
            background-color: #f39c12;
            color: white;
            animation: pulse 0.5s infinite alternate;
        }
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 14px;
        }
        .explanation {
            margin-top: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        .step-info {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Binary Search Visualization</h1>
        
        <div class="controls">
            <input type="number" id="searchValue" placeholder="Enter target value" min="1" max="100">
            <button id="searchBtn">Search</button>
            <button id="resetBtn">Reset</button>
            <button id="stepBtn">Step</button>
            <button id="autoBtn">Auto Search</button>
        </div>
        
        <div class="array-container" id="arrayContainer"></div>
        
        <div class="log" id="log"></div>
        
        <div class="explanation">
            <h3>How Binary Search Works:</h3>
            <p>Binary search is an efficient algorithm for finding an item from a sorted list of items. It works by repeatedly dividing in half the portion of the list that could contain the item, until you've narrowed down the possible locations to just one.</p>
            <p><strong>Steps:</strong></p>
            <ol>
                <li>Start with the entire sorted array</li>
                <li>Calculate the middle index</li>
                <li>If the target value equals the middle element, the search is complete</li>
                <li>If the target value is less than the middle element, search the left half</li>
                <li>If the target value is greater than the middle element, search the right half</li>
                <li>Repeat until the value is found or the search space is empty</li>
            </ol>
            <p><strong>Time Complexity:</strong> O(log n)</p>
            <p><strong>Space Complexity:</strong> O(1) for iterative implementation</p>
        </div>
    </div>

    <script>
        // Initialize the sorted array
        const arraySize = 20;
        let array = [];
        let low = 0;
        let high = arraySize - 1;
        let mid = -1;
        let target = null;
        let isSearching = false;
        let autoSearchInterval = null;
        
        // DOM elements
        const arrayContainer = document.getElementById('arrayContainer');
        const searchValueInput = document.getElementById('searchValue');
        const searchBtn = document.getElementById('searchBtn');
        const resetBtn = document.getElementById('resetBtn');
        const stepBtn = document.getElementById('stepBtn');
        const autoBtn = document.getElementById('autoBtn');
        const log = document.getElementById('log');
        
        // Initialize the array with random sorted values
        function initializeArray() {
            array = [];
            for (let i = 0; i < arraySize; i++) {
                // Generate increasing values with some gaps for variety
                array.push(i * 5 + Math.floor(Math.random() * 3));
            }
            renderArray();
        }
        
        // Render the array with visual indicators
        function renderArray() {
            arrayContainer.innerHTML = '';
            for (let i = 0; i < array.length; i++) {
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = array[i];
                
                if (isSearching) {
                    if (i === low) element.classList.add('low');
                    if (i === high) element.classList.add('high');
                    if (i === mid) element.classList.add('mid');
                    if (i === mid && array[i] === target) element.classList.add('found');
                }
                
                arrayContainer.appendChild(element);
            }
        }
        
        // Log a message to the log container
        function logMessage(message) {
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `<div><strong>[${timestamp}]</strong> ${message}</div>`;
            log.scrollTop = log.scrollHeight;
        }
        
        // Reset the search
        function resetSearch() {
            low = 0;
            high = arraySize - 1;
            mid = -1;
            target = null;
            isSearching = false;
            searchValueInput.value = '';
            searchValueInput.disabled = false;
            searchBtn.disabled = false;
            stepBtn.disabled = true;
            autoBtn.disabled = true;
            
            if (autoSearchInterval) {
                clearInterval(autoSearchInterval);
                autoSearchInterval = null;
            }
            
            log.innerHTML = '';
            renderArray();
            logMessage('Search reset. Ready for new search.');
        }
        
        // Start a new search
        function startSearch() {
            const value = parseInt(searchValueInput.value);
            
            if (isNaN(value)) {
                alert('Please enter a valid number');
                return;
            }
            
            if (value < array[0] || value > array[arraySize - 1]) {
                alert('Value is out of range. The array contains values from ' + array[0] + ' to ' + array[arraySize - 1]);
                return;
            }
            
            target = value;
            low = 0;
            high = arraySize - 1;
            isSearching = true;
            searchValueInput.disabled = true;
            searchBtn.disabled = true;
            stepBtn.disabled = false;
            autoBtn.disabled = false;
            
            logMessage(`Starting binary search for value: ${target}`);
            logMessage(`Search range: index ${low} (${array[low]}) to index ${high} (${array[high]})`);
            
            performStep();
        }
        
        // Perform one step of the binary search
        function performStep() {
            if (!isSearching || low > high) return;
            
            mid = Math.floor((low + high) / 2);
            renderArray();
            
            logMessage(`Calculating mid: (${low} + ${high}) / 2 = ${mid}`);
            logMessage(`Comparing target ${target} with array[${mid}] = ${array[mid]}`);
            
            if (array[mid] === target) {
                logMessage(`<strong>Found target ${target} at index ${mid}!</strong>`);
                isSearching = false;
                stepBtn.disabled = true;
                autoBtn.disabled = true;
            } else if (array[mid] < target) {
                logMessage(`${array[mid]} < ${target}, searching right half`);
                low = mid + 1;
                
                if (low <= high) {
                    logMessage(`New search range: index ${low} (${array[low]}) to index ${high} (${array[high]})`);
                }
            } else {
                logMessage(`${array[mid]} > ${target}, searching left half`);
                high = mid - 1;
                
                if (low <= high) {
                    logMessage(`New search range: index ${low} (${array[low]}) to index ${high} (${array[high]})`);
                }
            }
            
            if (low > high && isSearching) {
                logMessage(`<strong>Target ${target} not found in the array</strong>`);
                isSearching = false;
                stepBtn.disabled = true;
                autoBtn.disabled = true;
            }
        }
        
        // Start automatic search with steps
        function startAutoSearch() {
            if (autoSearchInterval) {
                clearInterval(autoSearchInterval);
                autoSearchInterval = null;
                autoBtn.textContent = 'Auto Search';
                stepBtn.disabled = false;
            } else {
                autoSearchInterval = setInterval(() => {
                    if (isSearching) {
                        performStep();
                    } else {
                        clearInterval(autoSearchInterval);
                        autoSearchInterval = null;
                        autoBtn.textContent = 'Auto Search';
                        stepBtn.disabled = false;
                    }
                }, 1000);
                autoBtn.textContent = 'Stop Auto';
                stepBtn.disabled = true;
            }
        }
        
        // Event listeners
        searchBtn.addEventListener('click', startSearch);
        resetBtn.addEventListener('click', resetSearch);
        stepBtn.addEventListener('click', performStep);
        autoBtn.addEventListener('click', startAutoSearch);
        
        searchValueInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startSearch();
            }
        });
        
        // Initialize the application
        initializeArray();
        resetSearch();
    </script>
</body>
</html>