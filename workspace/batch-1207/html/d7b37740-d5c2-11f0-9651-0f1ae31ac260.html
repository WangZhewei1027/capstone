<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Selection Sort Visualization</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f0f0;
  }
  h1 {
    text-align: center;
  }
  #array {
    display: flex;
    justify-content: center;
    margin: 2rem 0;
    gap: 5px;
  }
  .bar {
    width: 30px;
    background-color: #3498db;
    color: white;
    text-align: center;
    line-height: 30px;
    border-radius: 4px 4px 0 0;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  .bar.current {
    background-color: #e67e22;
  }
  .bar.min {
    background-color: #e74c3c;
  }
  .bar.sorted {
    background-color: #2ecc71;
  }
  #controls {
    text-align: center;
    margin-bottom: 1rem;
  }
  input[type=number] {
    width: 60px;
    padding: 5px;
  }
  button {
    padding: 7px 15px;
    margin: 0 5px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    background-color: #3498db;
    color: white;
    border-radius: 4px;
  }
  button:disabled {
    background-color: #95a5a6;
    cursor: not-allowed;
  }
  #code {
    max-width: 600px;
    margin: 2rem auto;
    background: #2d2d2d;
    color: #ccc;
    padding: 1rem;
    border-radius: 8px;
    font-family: Consolas, monospace;
    white-space: pre-wrap;
  }
  footer {
    text-align: center;
    margin-top: 3rem;
    font-size: 0.9rem;
    color: #888;
  }
</style>
</head>
<body>
<h1>Selection Sort Visualization</h1>

<div id="controls">
  <label for="arraySize">Array Size (5-20): </label>
  <input type="number" id="arraySize" min="5" max="20" value="10" />
  <button id="generate">Generate Array</button>
  <button id="sort">Start Sorting</button>
</div>

<div id="array"></div>

<div id="code">
<code>
function selectionSort(arr) {
  let n = arr.length;
  for(let i = 0; i < n - 1; i++) {
    let minIndex = i;
    for(let j = i + 1; j &lt; n; j++) {
      if(arr[j] &lt; arr[minIndex]) {
        minIndex = j;
      }
    }
    if(minIndex !== i) {
      let temp = arr[i];
      arr[i] = arr[minIndex];
      arr[minIndex] = temp;
    }
  }
  return arr;
}
</code>
</div>

<footer>
  Created as a demonstration of the Selection Sort algorithm.
</footer>

<script>
  const arrayContainer = document.getElementById('array');
  const generateBtn = document.getElementById('generate');
  const sortBtn = document.getElementById('sort');
  const arraySizeInput = document.getElementById('arraySize');

  let array = [];
  let sorting = false;

  // Generate random array
  function generateArray(size) {
    const arr = [];
    for (let i = 0; i < size; i++) {
      arr.push(Math.floor(Math.random() * 90) + 10); // values 10-99 for good bar height
    }
    return arr;
  }

  // Render the array bars
  function renderArray(arr, current = -1, minIndex = -1, sortedIndex = -1) {
    arrayContainer.innerHTML = '';
    for(let i = 0; i < arr.length; i++) {
      const bar = document.createElement('div');
      bar.classList.add('bar');
      bar.style.height = arr[i] * 3 + 'px'; // scale height
      bar.textContent = arr[i];
      
      if (i === sortedIndex) {
        bar.classList.add('sorted');
      } else if (i === minIndex) {
        bar.classList.add('min');
      } else if (i === current) {
        bar.classList.add('current');
      }

      arrayContainer.appendChild(bar);
    }
  }

  // Sleep helper to delay
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // Selection sort visualization
  async function selectionSortVisual(arr) {
    let n = arr.length;
    for(let i = 0; i < n - 1; i++) {
      let minIndex = i;
      renderArray(arr, i, minIndex, i - 1);
      await sleep(500);

      for(let j = i + 1; j < n; j++) {
        renderArray(arr, j, minIndex, i - 1);
        await sleep(300);

        if(arr[j] < arr[minIndex]) {
          minIndex = j;
          renderArray(arr, j, minIndex, i - 1);
          await sleep(300);
        }
      }

      if(minIndex !== i) {
        // Swap
        [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];
        renderArray(arr, i, minIndex, i - 1);
        await sleep(500);
      }
      renderArray(arr, -1, -1, i);
      await sleep(300);
    }
    renderArray(arr, -1, -1, n - 1);
  }

  // Initial setup
  function init() {
    const size = Math.min(Math.max(parseInt(arraySizeInput.value), 5), 20);
    array = generateArray(size);
    renderArray(array);
  }

  generateBtn.addEventListener('click', () => {
    if(sorting) return;
    init();
  });

  sortBtn.addEventListener('click', async () => {
    if(sorting) return;
    sorting = true;
    generateBtn.disabled = true;
    sortBtn.disabled = true;
    arraySizeInput.disabled = true;
    await selectionSortVisual(array);
    generateBtn.disabled = false;
    sortBtn.disabled = false;
    arraySizeInput.disabled = false;
    sorting = false;
  });

  // Generate initial array on load
  init();
</script>
</body>
</html>