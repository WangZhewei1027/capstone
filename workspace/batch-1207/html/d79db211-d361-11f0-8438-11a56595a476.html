<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Longest Common Subsequence (LCS) Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2em;
    max-width: 700px;
  }
  input[type="text"] {
    width: 100%;
    padding: 8px;
    font-size: 1.1em;
    margin-bottom: 0.5em;
  }
  button {
    font-size: 1em;
    padding: 0.6em 1.2em;
    margin-bottom: 1em;
  }
  .result {
    background: #f7f7f7;
    padding: 1em;
    border-radius: 5px;
    white-space: pre-wrap;
    font-family: 'Courier New', Courier, monospace;
  }
  .highlight {
    background-color: #d1e7dd;
    font-weight: bold;
    color: #0f5132;
    padding: 0 2px;
    border-radius: 2px;
  }
  table {
    border-collapse: collapse;
    margin-top: 1em;
    width: 100%;
    max-width: 600px;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 0.4em 0.6em;
    text-align: center;
    font-family: monospace;
  }
  th {
    background: #eee;
  }
  .lcs-cell {
    background-color: #b6d7a8;
    font-weight: bold;
  }
  h2 {
    margin-top: 2em;
  }
  .footer {
    margin-top: 3em;
    font-size: 0.9em;
    color: #666;
  }
</style>
</head>
<body>
<h1>Longest Common Subsequence (LCS) Demonstration</h1>

<label for="string1">First String:</label>
<input type="text" id="string1" placeholder="Enter the first string" value="AGGTAB" />

<label for="string2">Second String:</label>
<input type="text" id="string2" placeholder="Enter the second string" value="GXTXAYB" />

<button onclick="computeLCS()">Find LCS</button>

<div id="output"></div>

<script>
function computeLCS() {
  const s1 = document.getElementById('string1').value;
  const s2 = document.getElementById('string2').value;
  const m = s1.length;
  const n = s2.length;

  if (m === 0 || n === 0) {
    document.getElementById('output').innerHTML = '<p>Please enter both strings.</p>';
    return;
  }

  // Initialize the DP table
  // dp[i][j] = length of LCS of s1[0..i-1], s2[0..j-1]
  let dp = Array.from({ length: m + 1 }, () => Array(n + 1).fill(0));

  // Fill dp table
  for (let i = 1; i <= m; i++) {
    for (let j = 1; j <= n; j++) {
      if (s1[i - 1] === s2[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1;
      } else {
        dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
      }
    }
  }

  // Backtrack to find one LCS sequence
  let lcsSeq = [];
  let i = m, j = n;
  while (i > 0 && j > 0) {
    if (s1[i - 1] === s2[j - 1]) {
      lcsSeq.push(s1[i - 1]);
      i--;
      j--;
    } else if (dp[i - 1][j] > dp[i][j - 1]) {
      i--;
    } else {
      j--;
    }
  }
  lcsSeq = lcsSeq.reverse().join('');

  // Highlight LCS characters in both strings
  function highlightLCS(str, lcs) {
    let result = '';
    let lcsIndex = 0;
    for (let ch of str) {
      if (lcsIndex < lcs.length && ch === lcs[lcsIndex]) {
        result += `<span class="highlight">${ch}</span>`;
        lcsIndex++;
      } else {
        result += ch;
      }
    }
    return result;
  }

  // Generate DP table HTML
  function generateDPTable() {
    let html = '<table><thead><tr><th></th><th></th>';
    for (let j = 0; j < n; j++) {
      html += `<th>${s2[j]}</th>`;
    }
    html += '</tr></thead><tbody>';

    for (let i = 0; i <= m; i++) {
      html += '<tr>';
      if (i === 0) {
        html += '<th></th>';
      } else {
        html += `<th>${s1[i - 1]}</th>`;
      }
      for (let j = 0; j <= n; j++) {
        let className = '';
        if (i > 0 && j > 0 && s1[i - 1] === s2[j - 1] && dp[i][j] === dp[i-1][j-1] + 1) {
          className = 'lcs-cell';
        }
        html += `<td class="${className}">${dp[i][j]}</td>`;
      }
      html += '</tr>';
    }
    html += '</tbody></table>';
    return html;
  }

  let outputHTML = `<h2>Results</h2>`;
  outputHTML += `<p><strong>First String with LCS highlighted:</strong><br>${highlightLCS(s1, lcsSeq)}</p>`;
  outputHTML += `<p><strong>Second String with LCS highlighted:</strong><br>${highlightLCS(s2, lcsSeq)}</p>`;
  outputHTML += `<p><strong>Longest Common Subsequence:</strong> ${lcsSeq || '(No common subsequence)'}</p>`;
  outputHTML += `<p><strong>Length of LCS:</strong> ${dp[m][n]}</p>`;
  outputHTML += `<h2>DP Table (Lengths of LCS for substrings)</h2>`;
  outputHTML += generateDPTable();

  document.getElementById('output').innerHTML = outputHTML;
}
window.onload = computeLCS;
</script>

<div class="footer">
  <p>Longest Common Subsequence demonstrates how to find the longest subsequence common to two sequences.</p>
</div>
</body>
</html>