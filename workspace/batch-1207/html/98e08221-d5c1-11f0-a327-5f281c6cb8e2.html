<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Stack Data Structure — Interactive Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#6ee7b7;
      --muted:#94a3b8;
      --danger:#ff6b6b;
      --glass: rgba(255,255,255,0.03);
      --panel:#071024;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color-scheme: dark;
    }
    html,body{height:100%; margin:0; background:linear-gradient(180deg,#071428 0%, #081025 50%); color:#dbeafe;}
    .wrap{
      max-width:1100px; margin:28px auto; padding:20px; display:grid; grid-template-columns: 420px 1fr; gap:20px;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));
      border:1px solid rgba(255,255,255,0.04); padding:18px; border-radius:12px; box-shadow: 0 6px 30px rgba(2,6,23,0.6);
    }
    h1{margin:0 0 8px 0; font-size:20px; color:#e6f2ff;}
    p.lead{margin:4px 0 16px 0; color:var(--muted); font-size:13px;}
    .controls{display:flex; gap:8px; margin-bottom:12px; align-items:center; flex-wrap:wrap;}
    input[type="text"]{
      background:var(--glass); border:1px solid rgba(255,255,255,0.04); color:inherit; padding:10px 12px; border-radius:8px; outline:none; min-width:160px;
    }
    button{
      background:linear-gradient(180deg,#0ea5a3,#066b5a);
      border:none; color:#022; padding:10px 12px; border-radius:9px; cursor:pointer; font-weight:600;
      box-shadow: 0 6px 18px rgba(4,20,30,0.6);
    }
    button.ghost{background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted); padding:8px 10px;}
    button.warn{background:linear-gradient(180deg,#f97316,#c2410c); color:white;}
    button.danger{background:linear-gradient(180deg,#ef4444,#b91c1c); color:white;}
    label.small{font-size:12px;color:var(--muted); display:flex; gap:8px; align-items:center;}
    .stack-visual-wrap{display:flex; gap:20px; align-items:flex-start;}
    .stack-area{
      width:220px; min-height:360px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.015));
      border-radius:10px; padding:12px; border:1px solid rgba(255,255,255,0.04);
      display:flex; flex-direction:column-reverse; align-items:center; position:relative;
    }
    .stack-slot{
      width:88%; height:44px; margin:8px 0; border-radius:8px; background:linear-gradient(180deg,#061122,#07243b);
      display:flex; align-items:center; justify-content:center; color:#e6f2ff; font-weight:700; letter-spacing:0.6px;
      border:1px solid rgba(255,255,255,0.03); box-shadow: 0 8px 18px rgba(2,6,23,0.6);
      transform-origin:center; transition: transform 300ms cubic-bezier(.2,.9,.3,1), opacity 250ms;
    }
    .slot-new { transform: translateY(-24px) scale(0.98); opacity:0; animation:slideIn 260ms forwards; }
    @keyframes slideIn { to { transform:none; opacity:1; } }
    .slot-pop { animation:popAway 280ms forwards; }
    @keyframes popAway { to { transform: translateY(16px) scale(.96); opacity:0; } }
    .top-label{ position:absolute; top:8px; left:12px; color:var(--muted); font-size:12px;}
    .info { margin-top:8px; color:var(--muted); font-size:13px; }
    .meta { display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
    .pill{ background: rgba(255,255,255,0.02); padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,0.02); color:var(--muted); font-size:13px;}
    .right{
      display:flex; flex-direction:column; gap:14px;
    }
    .panel{ padding:12px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.015)); border:1px solid rgba(255,255,255,0.04); }
    .log{ max-height:180px; overflow:auto; padding:10px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border-radius:8px; border:1px dashed rgba(255,255,255,0.02); }
    .log-entry{ font-size:13px; color:var(--muted); padding:6px 6px; border-radius:6px; display:flex; gap:8px; align-items:center; }
    .log-entry .op{ min-width:58px; font-weight:700; color:#e6f2ff;}
    .details{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; margin-top:8px; }
    pre{ overflow:auto; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; background:rgba(255,255,255,0.02); padding:10px; border-radius:8px; font-size:13px; color:#e6f2ff; border:1px solid rgba(255,255,255,0.03); }
    .controls-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .muted{ color:var(--muted); font-size:13px;}
    .small-btn{ padding:6px 8px; border-radius:8px; background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--muted); cursor:pointer; }
    .status{ margin-top:8px; font-size:13px; min-height:20px; color:var(--muted); }
    .highlight{ color:var(--accent); font-weight:700; }
    footer{ text-align:center; margin-top:18px; color:var(--muted); font-size:13px; }
    @media (max-width:880px){ .wrap{ grid-template-columns: 1fr; padding:12px } .stack-area{ width:100% } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Stack — LIFO (Last In, First Out)</h1>
      <p class="lead">A stack stores values with push/pop operations. This interactive demo visualizes a stack, shows the underlying array, and logs each operation.</p>

      <div class="stack-visual-wrap">
        <div style="flex:0 0 420px;">
          <div class="controls">
            <input id="valueInput" type="text" placeholder="Value to push (string or number)">
            <button id="pushBtn">Push</button>
            <button id="popBtn" class="ghost">Pop</button>
            <button id="peekBtn" class="small-btn">Peek</button>
            <button id="clearBtn" class="danger">Clear</button>
          </div>

          <div class="controls" style="margin-top:6px;">
            <label class="small">Max size:
              <input id="maxSizeInput" type="number" min="0" placeholder="no limit" style="width:86px; margin-left:8px; padding:8px; border-radius:6px; background:transparent; border:1px solid rgba(255,255,255,0.04);">
            </label>
            <button id="fillRandom" class="ghost">Fill 6 random</button>
            <button id="stepPush" class="ghost">Step Push</button>
            <button id="stepPop" class="ghost">Step Pop</button>
          </div>

          <div style="display:flex; gap:12px; margin-top:12px; align-items:center;">
            <div class="panel" style="flex:1;">
              <div class="meta">
                <div class="pill">size: <span id="sizeBadge" class="highlight">0</span></div>
                <div class="pill">top: <span id="topBadge" class="muted">—</span></div>
                <div class="pill">capacity: <span id="capBadge" class="muted">∞</span></div>
              </div>
              <div class="status" id="statusMsg">Ready.</div>
            </div>
          </div>

          <div style="margin-top:16px;">
            <div class="panel">
              <div class="muted" style="font-size:13px; margin-bottom:8px;">Operations log</div>
              <div class="log" id="opLog" aria-live="polite"></div>
            </div>

            <div class="panel" style="margin-top:12px;">
              <div class="muted" style="font-size:13px; margin-bottom:8px;">Complexities</div>
              <div style="display:flex; gap:8px;">
                <div class="pill">push O(1)</div><div class="pill">pop O(1)</div><div class="pill">peek O(1)</div>
              </div>
              <div class="muted" style="margin-top:8px; font-size:13px;">This stack is implemented with an array under the hood — push/pop operate at the array end.</div>
            </div>
          </div>
        </div>

        <div style="flex:1;">
          <div class="card panel">
            <div style="display:flex; gap:12px; align-items:center; justify-content:space-between;">
              <div>
                <div class="muted">Visual Stack</div>
                <div class="top-label">TOP</div>
              </div>
              <div class="muted">Drag values visually — click element to highlight its index</div>
            </div>

            <div style="display:flex; gap:16px; margin-top:12px;">
              <div class="stack-area" id="stackArea" aria-label="Stack visualization" role="list"></div>

              <div style="flex:1;">
                <div class="muted">Underlying array (snapshot)</div>
                <pre id="arrayView">[]</pre>

                <div class="muted" style="margin-top:8px;">Select an index to inspect</div>
                <div class="details" style="margin-top:8px;">
                  <div class="panel">
                    <div class="muted">peek() result</div>
                    <div id="peekResult" style="font-weight:700; color:var(--accent); margin-top:6px;">—</div>
                  </div>
                  <div class="panel">
                    <div class="muted">last operation</div>
                    <div id="lastOp" style="font-weight:700; margin-top:6px;">—</div>
                  </div>
                </div>

                <div style="margin-top:12px;">
                  <div class="muted">Quick hints</div>
                  <ul style="margin:8px 0 0 18px; color:var(--muted); font-size:13px;">
                    <li>Type value and press Push or Enter.</li>
                    <li>Pop removes and returns the top item.</li>
                    <li>Max size blocks push when reached (overflow).</li>
                  </ul>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>

      <footer>Interactive stack demo • LIFO behavior • Built with plain JS</footer>

    </div>
  </div>

  <script>
    // Simple Stack Demo Implementation with visualization and logging
    (function(){
      const valueInput = document.getElementById('valueInput');
      const pushBtn = document.getElementById('pushBtn');
      const popBtn = document.getElementById('popBtn');
      const peekBtn = document.getElementById('peekBtn');
      const clearBtn = document.getElementById('clearBtn');
      const fillRandom = document.getElementById('fillRandom');
      const stepPush = document.getElementById('stepPush');
      const stepPop = document.getElementById('stepPop');
      const maxSizeInput = document.getElementById('maxSizeInput');

      const stackArea = document.getElementById('stackArea');
      const arrayView = document.getElementById('arrayView');
      const opLog = document.getElementById('opLog');
      const sizeBadge = document.getElementById('sizeBadge');
      const topBadge = document.getElementById('topBadge');
      const capBadge = document.getElementById('capBadge');
      const statusMsg = document.getElementById('statusMsg');
      const peekResult = document.getElementById('peekResult');
      const lastOp = document.getElementById('lastOp');

      // Underlying stack array
      let stack = [];
      let lastOperation = null;

      // Utility: update UI
      function render(){
        // visual stack (top at top)
        stackArea.innerHTML = '';
        const maxShow = Math.max(6, stack.length);
        for(let i = stack.length - 1; i >= 0; i--){
          const slot = document.createElement('div');
          slot.className = 'stack-slot';
          slot.textContent = String(stack[i]);
          slot.dataset.index = i;
          slot.title = 'index ' + i;
          slot.addEventListener('click', () => {
            flashSlot(slot);
            status('Clicked index ' + i);
          });
          stackArea.appendChild(slot);
        }
        if(stack.length === 0){
          const ghost = document.createElement('div');
          ghost.style.opacity = 0.6;
          ghost.style.color = 'var(--muted)';
          ghost.textContent = 'stack empty';
          ghost.style.marginTop = '18px';
          stackArea.appendChild(ghost);
        }

        // array view
        arrayView.textContent = JSON.stringify(stack, null, 2);

        // badges
        sizeBadge.textContent = stack.length;
        topBadge.textContent = stack.length ? String(stack[stack.length-1]) : '—';
        const cap = parseInt(maxSizeInput.value);
        capBadge.textContent = (cap > 0) ? cap : '∞';

        lastOp.textContent = lastOperation ? lastOperation : '—';
        peekResult.textContent = stack.length ? String(stack[stack.length-1]) : '—';

        // enable/disable buttons based on state
        popBtn.disabled = stack.length === 0;
        popBtn.style.opacity = popBtn.disabled ? 0.5 : 1;
      }

      function flashSlot(slot){
        slot.style.boxShadow = '0 10px 40px rgba(110,231,183,0.12)';
        slot.style.transform = 'scale(1.02)';
        setTimeout(()=>{ slot.style.boxShadow=''; slot.style.transform=''; }, 350);
      }

      function log(op, detail){
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        const now = new Date();
        const ts = now.toLocaleTimeString();
        const opSpan = document.createElement('div'); opSpan.className='op'; opSpan.textContent = op;
        const msg = document.createElement('div'); msg.style.whiteSpace='pre-wrap';
        msg.innerHTML = detail + ' <span style="color:var(--muted); font-size:12px; margin-left:8px;">' + ts + '</span>';
        entry.appendChild(opSpan);
        entry.appendChild(msg);
        opLog.insertBefore(entry, opLog.firstChild);

        // keep log to reasonable length
        while(opLog.children.length > 150) opLog.removeChild(opLog.lastChild);
      }

      function status(text, isError){
        statusMsg.textContent = text;
        statusMsg.style.color = isError ? 'var(--danger)' : 'var(--muted)';
      }

      // Stack operations
      function push(value, animate=true){
        const cap = parseInt(maxSizeInput.value);
        if (cap > 0 && stack.length >= cap){
          status('Push blocked: stack overflow (max size reached)', true);
          log('push', 'overflow — value: ' + JSON.stringify(value));
          return false;
        }
        stack.push(value);
        lastOperation = 'push ' + JSON.stringify(value);
        log('push', 'pushed: ' + JSON.stringify(value));
        render();
        if(animate){
          const slot = stackArea.querySelector('.stack-slot');
          if(slot) {
            slot.classList.add('slot-new');
            setTimeout(()=>slot.classList.remove('slot-new'), 300);
          }
        }
        status('Pushed ' + JSON.stringify(value));
        return true;
      }

      function pop(animate=true){
        if(stack.length === 0){
          status('Pop failed: stack is empty', true);
          log('pop', 'underflow — nothing to pop');
          return undefined;
        }
        const val = stack.pop();
        lastOperation = 'pop -> ' + JSON.stringify(val);
        log('pop', 'popped: ' + JSON.stringify(val));
        // animate the top slot pop by creating a temporary element that floats away
        if(animate){
          // create temp visual of the popped item
          const temp = document.createElement('div');
          temp.className = 'stack-slot slot-pop';
          temp.textContent = String(val);
          temp.style.position = 'absolute';
          temp.style.left = '50%';
          temp.style.transform = 'translateX(-50%)';
          temp.style.top = '24px';
          temp.style.zIndex = 9999;
          stackArea.appendChild(temp);
          // remove after animation
          setTimeout(()=>{ if(temp.parentNode) temp.parentNode.removeChild(temp); }, 320);
        }
        render();
        status('Popped ' + JSON.stringify(val));
        return val;
      }

      function peek(){
        if(stack.length === 0){
          status('Peek: stack is empty', true);
          log('peek', 'empty');
          return undefined;
        }
        const v = stack[stack.length-1];
        lastOperation = 'peek -> ' + JSON.stringify(v);
        log('peek', 'top: ' + JSON.stringify(v));
        status('Peeked ' + JSON.stringify(v));
        render();
        return v;
      }

      function clearStack(){
        if(stack.length === 0){ status('Stack already empty'); return; }
        stack = [];
        lastOperation = 'clear';
        log('clear', 'stack cleared');
        render();
        status('Stack cleared');
      }

      // Helpers for demo actions
      function randomValue(){
        const samples = ['apple','42','true','null','7.5','hello','{obj}','[1,2]','⚡','A'];
        return samples[Math.floor(Math.random()*samples.length)];
      }

      // event wiring
      pushBtn.addEventListener('click', () => {
        const v = valueInput.value.trim();
        const val = v === '' ? '(empty)' : parseTypedValue(v);
        if(push(val)) valueInput.value = '';
        valueInput.focus();
      });

      popBtn.addEventListener('click', () => pop());

      peekBtn.addEventListener('click', () => {
        const v = peek();
        if(v !== undefined){
          // visually flash top slot
          const top = stackArea.querySelector('.stack-slot');
          if(top) flashSlot(top);
        }
      });

      clearBtn.addEventListener('click', () => {
        clearStack();
      });

      fillRandom.addEventListener('click', () => {
        // fill 6 random values (respect max)
        const cap = parseInt(maxSizeInput.value) || Infinity;
        const toAdd = Math.min(6, cap - stack.length);
        for(let i=0;i<toAdd;i++) push(randomValue(), false);
        render();
        status('Filled ' + toAdd + ' random values');
      });

      stepPush.addEventListener('click', () => {
        const val = randomValue();
        push(val, true);
      });

      stepPop.addEventListener('click', () => {
        pop(true);
      });

      maxSizeInput.addEventListener('change', () => {
        const val = parseInt(maxSizeInput.value);
        if(val > 0) capBadge.textContent = val;
        else capBadge.textContent = '∞';
        status('Max size set to ' + (val > 0 ? val : '∞'));
      });

      valueInput.addEventListener('keydown', (e) => {
        if(e.key === 'Enter'){
          pushBtn.click();
        }
      });

      // parse basic typed values: numbers, booleans, null, JSON if possible, else string
      function parseTypedValue(s){
        // try JSON parse for objects/arrays/numbers/booleans/null
        try {
          // but treat bare words like "hello" as string, so only parse if looks like JSON or primitive:
          if (/^(true|false|null|\-?\d+(\.\d+)?(\s*)$)/i.test(s) || /^[\[\{].*[\]\}]$/.test(s) ) {
            return JSON.parse(s);
          }
        } catch(e){}
        // otherwise return raw string
        return s;
      }

      // init: small demo sequence
      render();
      status('Ready — type a value and press Push, or use the buttons.');

      // Expose some functions to console for experimentation
      window.demoStack = {
        push: (v) => { push(v); },
        pop: () => pop(),
        peek: () => peek(),
        get stack(){ return stack.slice(); },
        clear: clearStack
      };

      // small accessibility: keyboard shortcuts
      window.addEventListener('keydown', (e) => {
        if(e.ctrlKey && e.key === 'p') { e.preventDefault(); pushBtn.click(); }
        if(e.ctrlKey && e.key === 'o') { e.preventDefault(); popBtn.click(); }
      });

      // simple drag-to-reorder visual cue (not changing stack) — demonstrate UI capability
      let dragging = null;
      stackArea.addEventListener('mousedown', (ev) => {
        const slot = ev.target.closest('.stack-slot');
        if(!slot) return;
        dragging = slot;
        slot.style.cursor = 'grabbing';
        slot.style.opacity = 0.9;
        slot.style.transform = 'scale(1.02)';
      });
      window.addEventListener('mouseup', () => {
        if(dragging){
          dragging.style.cursor = '';
          dragging.style.opacity = '';
          dragging.style.transform = '';
          dragging = null;
        }
      });

    })();
  </script>
</body>
</html>