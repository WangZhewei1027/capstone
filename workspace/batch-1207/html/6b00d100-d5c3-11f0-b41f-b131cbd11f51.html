<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radix Sort Visualization</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 1000px;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-top: 20px;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        h2 {
            margin: 20px 0 10px;
            color: #fdbb2d;
        }
        p {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        button {
            background-color: #1a2a6c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        button:hover {
            background-color: #2a3a9c;
            transform: translateY(-2px);
        }
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
            transform: none;
        }
        input[type="range"] {
            width: 200px;
        }
        .array-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 200px;
            margin: 30px 0;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
        }
        .array-bar {
            width: 30px;
            margin: 0 2px;
            background-color: #4CAF50;
            transition: height 0.3s ease, background-color 0.3s ease;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            color: white;
            font-weight: bold;
            border-radius: 5px 5px 0 0;
        }
        .comparison {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        .stats {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .step-info {
            margin-top: 20px;
            font-size: 1.1rem;
            min-height: 60px;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        .buckets-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        .bucket {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
            min-width: 80px;
        }
        .bucket-title {
            text-align: center;
            margin-bottom: 5px;
            font-weight: bold;
            color: #fdbb2d;
        }
        .bucket-items {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        .bucket-item {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 5px;
            border-radius: 3px;
            text-align: center;
        }
        .highlight {
            background-color: #fdbb2d !important;
            color: black;
        }
        .sorted {
            background-color: #4CAF50 !important;
        }
        .algorithm-explanation {
            margin-top: 30px;
            line-height: 1.8;
        }
        .complexity-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .complexity-table th, .complexity-table td {
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px;
            text-align: center;
        }
        .complexity-table th {
            background-color: rgba(255, 255, 255, 0.1);
        }
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 2rem;
            }
            .controls {
                flex-direction: column;
                align-items: center;
            }
            .comparison {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <h1>Radix Sort Visualization</h1>
    
    <div class="container">
        <div class="algorithm-explanation">
            <h2>What is Radix Sort?</h2>
            <p>Radix Sort is a non-comparative sorting algorithm that sorts data by processing individual digits. It works by:</p>
            <ol>
                <li>Finding the maximum number to determine the number of digits</li>
                <li>Sorting the numbers digit by digit, starting from the least significant digit (LSD)</li>
                <li>Using a stable sorting algorithm (like counting sort) for each digit position</li>
            </ol>
            
            <h2>Time Complexity</h2>
            <table class="complexity-table">
                <tr>
                    <th>Case</th>
                    <th>Time Complexity</th>
                </tr>
                <tr>
                    <td>Best</td>
                    <td>O(d × (n + k))</td>
                </tr>
                <tr>
                    <td>Average</td>
                    <td>O(d × (n + k))</td>
                </tr>
                <tr>
                    <td>Worst</td>
                    <td>O(d × (n + k))</td>
                </tr>
            </table>
            <p>Where:
                <br>- d is the number of digits in the maximum number
                <br>- n is the number of elements
                <br>- k is the range of each digit (0-9 for decimal)
            </p>
        </div>
        
        <div class="controls">
            <button id="generate-btn">Generate New Array</button>
            <button id="sort-btn">Start Radix Sort</button>
            <button id="reset-btn">Reset</button>
            <div>
                <label for="size-slider">Array Size: </label>
                <input type="range" id="size-slider" min="5" max="30" value="15">
                <span id="size-value">15</span>
            </div>
            <div>
                <label for="speed-slider">Speed: </label>
                <input type="range" id="speed-slider" min="1" max="10" value="5">
                <span id="speed-value">5</span>
            </div>
        </div>
        
        <div class="array-container" id="array-container"></div>
        
        <div class="step-info" id="step-info">Click "Start Radix Sort" to begin the visualization.</div>
        
        <div class="buckets-container" id="buckets-container"></div>
        
        <div class="stats">
            <h2>Sorting Statistics</h2>
            <p>Passes: <span id="passes">0</span></p>
            <p>Current Digit Place: <span id="digit-place">-</span></p>
        </div>
        
        <div class="comparison">
            <div>
                <h2>Advantages of Radix Sort</h2>
                <ul>
                    <li>Fast for numbers with small digit counts</li>
                    <li>Stable sorting algorithm</li>
                    <li>Predictable performance O(d×n)</li>
                    <li>Works well for sorting integers and strings</li>
                </ul>
            </div>
            <div>
                <h2>Disadvantages of Radix Sort</h2>
                <ul>
                    <li>Not a comparison sort, so limited to specific data types</li>
                    <li>Requires additional memory for buckets</li>
                    <li>Performance depends on the digit length</li>
                    <li>Not efficient for floating-point numbers</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // DOM elements
        const arrayContainer = document.getElementById('array-container');
        const stepInfo = document.getElementById('step-info');
        const bucketsContainer = document.getElementById('buckets-container');
        const generateBtn = document.getElementById('generate-btn');
        const sortBtn = document.getElementById('sort-btn');
        const resetBtn = document.getElementById('reset-btn');
        const sizeSlider = document.getElementById('size-slider');
        const speedSlider = document.getElementById('speed-slider');
        const sizeValue = document.getElementById('size-value');
        const speedValue = document.getElementById('speed-value');
        const passesElement = document.getElementById('passes');
        const digitPlaceElement = document.getElementById('digit-place');
        
        // Global variables
        let array = [];
        let isSorting = false;
        let animationSpeed = 600 - (speedSlider.value * 50); // Reverse scale: higher value = faster
        let passes = 0;
        
        // Initialize
        updateSizeValue();
        updateSpeedValue();
        generateNewArray();
        
        // Event listeners
        generateBtn.addEventListener('click', generateNewArray);
        sortBtn.addEventListener('click', startSorting);
        resetBtn.addEventListener('click', resetArray);
        sizeSlider.addEventListener('input', updateSizeValue);
        speedSlider.addEventListener('input', updateSpeedValue);
        
        function updateSizeValue() {
            sizeValue.textContent = sizeSlider.value;
            generateNewArray();
        }
        
        function updateSpeedValue() {
            speedValue.textContent = speedSlider.value;
            animationSpeed = 600 - (speedSlider.value * 50);
        }
        
        function generateNewArray() {
            if (isSorting) return;
            
            const size = parseInt(sizeSlider.value);
            array = [];
            
            // Generate random numbers between 1 and 999
            for (let i = 0; i < size; i++) {
                array.push(Math.floor(Math.random() * 999) + 1);
            }
            
            renderArray();
            resetStats();
            stepInfo.textContent = "New array generated. Click 'Start Radix Sort' to begin.";
            bucketsContainer.innerHTML = '';
        }
        
        function resetArray() {
            if (isSorting) return;
            generateNewArray();
        }
        
        function resetStats() {
            passes = 0;
            passesElement.textContent = passes;
            digitPlaceElement.textContent = '-';
        }
        
        function renderArray() {
            arrayContainer.innerHTML = '';
            const maxValue = Math.max(...array);
            
            array.forEach(value => {
                const bar = document.createElement('div');
                bar.classList.add('array-bar');
                bar.style.height = `${(value / maxValue) * 100}%`;
                bar.textContent = value;
                arrayContainer.appendChild(bar);
            });
        }
        
        function updateBar(index, value, isHighlighted = false, isSorted = false) {
            const bars = document.querySelectorAll('.array-bar');
            const maxValue = Math.max(...array);
            
            if (index < bars.length) {
                bars[index].style.height = `${(value / maxValue) * 100}%`;
                bars[index].textContent = value;
                
                if (isHighlighted) {
                    bars[index].classList.add('highlight');
                } else {
                    bars[index].classList.remove('highlight');
                }
                
                if (isSorted) {
                    bars[index].classList.add('sorted');
                } else {
                    bars[index].classList.remove('sorted');
                }
            }
        }
        
        function renderBuckets(buckets) {
            bucketsContainer.innerHTML = '';
            
            for (let i = 0; i < 10; i++) {
                const bucketDiv = document.createElement('div');
                bucketDiv.classList.add('bucket');
                
                const title = document.createElement('div');
                title.classList.add('bucket-title');
                title.textContent = `Digit ${i}`;
                bucketDiv.appendChild(title);
                
                const itemsDiv = document.createElement('div');
                itemsDiv.classList.add('bucket-items');
                
                if (buckets[i] && buckets[i].length > 0) {
                    buckets[i].forEach(item => {
                        const itemDiv = document.createElement('div');
                        itemDiv.classList.add('bucket-item');
                        itemDiv.textContent = item.value;
                        itemsDiv.appendChild(itemDiv);
                    });
                }
                
                bucketDiv.appendChild(itemsDiv);
                bucketsContainer.appendChild(bucketDiv);
            }
        }
        
        async function startSorting() {
            if (isSorting) return;
            
            isSorting = true;
            sortBtn.disabled = true;
            generateBtn.disabled = true;
            resetBtn.disabled = true;
            
            await radixSort();
            
            isSorting = false;
            sortBtn.disabled = false;
            generateBtn.disabled = false;
            resetBtn.disabled = false;
            
            stepInfo.textContent = "Sorting completed! The array is now sorted.";
            
            // Highlight all bars as sorted
            const bars = document.querySelectorAll('.array-bar');
            bars.forEach(bar => {
                bar.classList.add('sorted');
            });
        }
        
        async function radixSort() {
            // Find the maximum number to know the number of digits
            const maxNum = Math.max(...array);
            const maxDigits = Math.floor(Math.log10(maxNum)) + 1;
            
            // Perform counting sort for every digit
            for (let digit = 0; digit < maxDigits; digit++) {
                passes++;
                passesElement.textContent = passes;
                digitPlaceElement.textContent = Math.pow(10, digit);
                
                stepInfo.textContent = `Pass ${passes}: Sorting based on the ${digit === 0 ? '1st' : digit === 1 ? '2nd' : digit === 2 ? '3rd' : (digit+1)+'th'} digit (${Math.pow(10, digit)}'s place)`;
                
                // Create buckets for each digit (0-9)
                const buckets = Array.from({ length: 10 }, () => []);
                
                // Place numbers in buckets based on current digit
                for (let i = 0; i < array.length; i++) {
                    const digitValue = Math.floor(array[i] / Math.pow(10, digit)) % 10;
                    buckets[digitValue].push({ value: array[i], originalIndex: i });
                    
                    // Update visualization
                    updateBar(i, array[i], true);
                    await sleep(animationSpeed / 2);
                    updateBar(i, array[i], false);
                }
                
                // Render buckets
                renderBuckets(buckets);
                await sleep(animationSpeed);
                
                // Collect numbers from buckets in order
                let index = 0;
                for (let i = 0; i < 10; i++) {
                    for (let j = 0; j < buckets[i].length; j++) {
                        array[index] = buckets[i][j].value;
                        updateBar(index, array[index], true);
                        await sleep(animationSpeed);
                        updateBar(index, array[index], false);
                        index++;
                    }
                }
                
                await sleep(animationSpeed);
            }
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>