<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Adjacency Matrix Demonstration</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f0f4f8;
  }
  h1 {
    text-align: center;
    color: #333;
  }
  #graph-input {
    max-width: 500px;
    margin: 0 auto 1rem auto;
    padding: 1rem;
    background: white;
    border-radius: 5px;
    box-shadow: 0 0 10px rgb(0 0 0 / 0.1);
  }
  label {
    font-weight: bold;
  }
  textarea {
    width: 100%;
    min-height: 100px;
    font-family: monospace;
    font-size: 14px;
    margin-bottom: 0.5rem;
    resize: vertical;
    padding: 0.5rem;
  }
  button {
    display: block;
    width: 100%;
    padding: 0.5rem;
    font-size: 16px;
    background: #007bff;
    border: none;
    color: white;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background: #0056b3;
  }
  #output {
    max-width: 700px;
    margin: 2rem auto;
    text-align: center;
  }
  table {
    margin: 0 auto;
    border-collapse: collapse;
    background: white;
    box-shadow: 0 0 10px rgb(0 0 0 / 0.1);
  }
  th, td {
    border: 1px solid #888;
    padding: 6px 10px;
    text-align: center;
    min-width: 30px;
  }
  th {
    background-color: #1976d2;
    color: white;
  }
  caption {
    caption-side: bottom;
    margin-top: 0.5rem;
    font-style: italic;
    color: #555;
  }
  #error-message {
    color: red;
    font-weight: bold;
    margin-top: 1rem;
  }
</style>
</head>
<body>
<h1>Adjacency Matrix Visualization</h1>

<div id="graph-input">
  <label for="edges">Enter edges of the graph:</label>
  <p style="font-size: 0.9rem; color: #555; margin-top: 0;">Input format: One edge per line with nodes separated by a space or comma.<br>
  Example:<br>
  A B<br>
  A C<br>
  B C<br>
  C D</p>
  <textarea id="edges" placeholder="Example edges:&#10A B&#10A C&#10B C&#10C D"></textarea>
  <button id="generate-btn">Generate Adjacency Matrix</button>
  <div id="error-message"></div>
</div>

<div id="output"></div>

<script>
(() => {
  const edgesInput = document.getElementById("edges");
  const generateBtn = document.getElementById("generate-btn");
  const outputDiv = document.getElementById("output");
  const errorDiv = document.getElementById("error-message");

  /**
   * Parses text input to extract edges.
   * Accepts lines like: "A B" or "A,B" or "A   B"
   * Returns list of edges as pairs of nodes (strings).
   */
  function parseEdges(text) {
    const lines = text.split("\n");
    const edges = [];
    for (let line of lines) {
      line = line.trim();
      if (line === "") continue;
      // split by space or comma, filter empty parts
      const parts = line.split(/[\s,]+/).filter(p => p !== "");
      if (parts.length !== 2) {
        throw new Error(`Invalid edge format: "${line}". Each line must contain exactly two nodes.`);
      }
      edges.push([parts[0], parts[1]]);
    }
    return edges;
  }

  /**
   * Creates an adjacency matrix from edges.
   * Returns object: { matrix: 2D array, nodes: array of node labels }
   * Assumes undirected graph.
   */
  function createAdjacencyMatrix(edges) {
    // Collect unique nodes
    const nodeSet = new Set();
    for (const [a,b] of edges) {
      nodeSet.add(a);
      nodeSet.add(b);
    }
    const nodes = Array.from(nodeSet).sort((a,b) =>
      a.toString().localeCompare(b.toString(), undefined, {numeric: true})
    );
    const n = nodes.length;
    // Create index map for nodes
    const nodeIndex = {};
    nodes.forEach((node, i) => nodeIndex[node] = i);
    // Initialize matrix with zeros
    const matrix = Array.from({length: n}, () => Array(n).fill(0));
    // Fill matrix
    for (const [a,b] of edges) {
      const i = nodeIndex[a];
      const j = nodeIndex[b];
      matrix[i][j] = 1;
      matrix[j][i] = 1; // undirected
    }
    return {matrix, nodes};
  }

  /**
   * Render adjacency matrix as an HTML table.
   */
  function renderMatrix(matrix, nodes) {
    const n = nodes.length;
    const table = document.createElement("table");

    // Header row
    const headerRow = document.createElement("tr");
    const topLeftCell = document.createElement("th");
    topLeftCell.textContent = "";
    headerRow.appendChild(topLeftCell);
    for (let node of nodes) {
      const th = document.createElement("th");
      th.textContent = node;
      headerRow.appendChild(th);
    }
    table.appendChild(headerRow);

    // Rows
    for (let i = 0; i < n; i++) {
      const row = document.createElement("tr");
      const rowHeader = document.createElement("th");
      rowHeader.textContent = nodes[i];
      row.appendChild(rowHeader);

      for (let j = 0; j < n; j++) {
        const td = document.createElement("td");
        td.textContent = matrix[i][j];
        row.appendChild(td);
      }
      table.appendChild(row);
    }
    return table;
  }

  /**
   * Main function to handle generation.
   */
  function generate() {
    errorDiv.textContent = "";
    outputDiv.innerHTML = "";
    const input = edgesInput.value.trim();
    if (input === "") {
      errorDiv.textContent = "Please enter at least one edge.";
      return;
    }

    try {
      const edges = parseEdges(input);
      const {matrix, nodes} = createAdjacencyMatrix(edges);
      const table = renderMatrix(matrix, nodes);
      outputDiv.appendChild(table);

      // Additional info caption
      const caption = document.createElement("caption");
      caption.textContent = "Adjacency Matrix (1 indicates an edge between nodes, 0 otherwise)";
      table.appendChild(caption);

    } catch (err) {
      errorDiv.textContent = err.message;
    }
  }

  generateBtn.addEventListener("click", generate);

  // Pre-fill example edges for demonstration
  edgesInput.value = `A B
A C
B C
C D`;
})();
</script>
</body>
</html>