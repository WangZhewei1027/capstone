<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Longest Common Subsequence Visualizer</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .content {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .input-section {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .input-section h2 {
            color: #4b6cb7;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus {
            border-color: #4b6cb7;
            outline: none;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-random {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .btn-reset {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
        }
        
        .result-section {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .result-section h2 {
            color: #4b6cb7;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
        }
        
        .result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: 600;
        }
        
        .visualization {
            margin-top: 20px;
            overflow-x: auto;
        }
        
        .matrix-grid {
            display: inline-block;
            border-collapse: collapse;
            margin: 10px 0;
        }
        
        .matrix-cell {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            text-align: center;
            vertical-align: middle;
            font-weight: 500;
            position: relative;
        }
        
        .matrix-row-label, .matrix-col-label {
            background-color: #f0f0f0;
            font-weight: 600;
        }
        
        .matrix-cell.highlight {
            background-color: #ffdd59;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { background-color: #ffdd59; }
            50% { background-color: #ffcd3c; }
            100% { background-color: #ffdd59; }
        }
        
        .explanation {
            margin-top: 20px;
            background-color: #eef5ff;
            border-left: 4px solid #4b6cb7;
            padding: 15px;
            border-radius: 0 6px 6px 0;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background-color: #f0f0f0;
            color: #666;
            font-size: 0.9rem;
        }
        
        footer a {
            color: #4b6cb7;
            text-decoration: none;
        }
        
        @media (max-width: 900px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .lcs-path {
            background-color: #d5f5e3;
        }
        
        .algorithm-steps {
            margin-top: 30px;
        }
        
        .step {
            padding: 15px;
            margin-bottom: 10px;
            background-color: #f9f9f9;
            border-radius: 6px;
            border-left: 4px solid #4b6cb7;
        }
        
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-color: #4b6cb7;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .error {
            color: #e74c3c;
            margin-top: 10px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Longest Common Subsequence</h1>
            <p class="subtitle">Visualize how dynamic programming finds the longest common subsequence between two strings</p>
        </header>
        
        <div class="content">
            <div class="input-section">
                <h2>Input Strings</h2>
                <div class="input-group">
                    <label for="string1">String 1</label>
                    <input type="text" id="string1" value="ABCDGH">
                </div>
                <div class="input-group">
                    <label for="string2">String 2</label>
                    <input type="text" id="string2" value="AEDFHR">
                </div>
                
                <div class="input-group">
                    <button class="btn" id="calculate-btn">Calculate LCS</button>
                    <button class="btn btn-random" id="random-btn">Random Example</button>
                    <button class="btn btn-reset" id="reset-btn">Reset</button>
                </div>
                
                <div class="algorithm-steps">
                    <h3>Algorithm Steps</h3>
                    <div class="step">
                        <span class="step-number">1</span>
                        Create a 2D matrix with dimensions (m+1) x (n+1), where m and n are the lengths of the strings.
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        Initialize the first row and column with zeros.
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        For each cell (i, j), if characters match (str1[i-1] == str2[j-1]), set matrix[i][j] = matrix[i-1][j-1] + 1.
                    </div>
                    <div class="step">
                        <span class="step-number">4</span>
                        If characters don't match, set matrix[i][j] = max(matrix[i-1][j], matrix[i][j-1]).
                    </div>
                    <div class="step">
                        <span class="step-number">5</span>
                        The value at matrix[m][n] gives the length of LCS.
                    </div>
                    <div class="step">
                        <span class="step-number">6</span>
                        Trace back through the matrix to find the actual LCS string.
                    </div>
                </div>
            </div>
            
            <div class="result-section">
                <h2>Result</h2>
                <div id="lcs-result">Enter strings and click "Calculate LCS"</div>
                <div class="error" id="error-message"></div>
                
                <div class="visualization">
                    <h3>DP Matrix Visualization</h3>
                    <div id="matrix-container"></div>
                </div>
                
                <div class="explanation" id="explanation">
                    The Longest Common Subsequence (LCS) algorithm finds the longest sequence that appears in the same order in both strings, but not necessarily contiguously.
                </div>
            </div>
        </div>
        
        <footer>
            <p>Longest Common Subsequence Visualizer &copy; 2023 | Algorithm visualization tool</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const string1Input = document.getElementById('string1');
            const string2Input = document.getElementById('string2');
            const calculateBtn = document.getElementById('calculate-btn');
            const randomBtn = document.getElementById('random-btn');
            const resetBtn = document.getElementById('reset-btn');
            const lcsResult = document.getElementById('lcs-result');
            const matrixContainer = document.getElementById('matrix-container');
            const explanation = document.getElementById('explanation');
            const errorMessage = document.getElementById('error-message');
            
            // Examples for random button
            const examples = [
                { str1: "ABCDGH", str2: "AEDFHR" },
                { str1: "AGGTAB", str2: "GXTXAYB" },
                { str1: "XMJYAUZ", str2: "MZJAWXU" },
                { str1: "ABCD", str2: "ACDF" },
                { str1: "INTENTION", str2: "EXECUTION" }
            ];
            
            // Initialize with default example
            calculateLCS();
            
            // Event listeners
            calculateBtn.addEventListener('click', calculateLCS);
            
            randomBtn.addEventListener('click', function() {
                const randomExample = examples[Math.floor(Math.random() * examples.length)];
                string1Input.value = randomExample.str1;
                string2Input.value = randomExample.str2;
                calculateLCS();
            });
            
            resetBtn.addEventListener('click', function() {
                string1Input.value = "ABCDGH";
                string2Input.value = "AEDFHR";
                calculateLCS();
            });
            
            function calculateLCS() {
                errorMessage.textContent = "";
                
                const str1 = string1Input.value;
                const str2 = string2Input.value;
                
                if (!str1 || !str2) {
                    errorMessage.textContent = "Please enter both strings.";
                    return;
                }
                
                // Clear previous results
                lcsResult.innerHTML = "";
                matrixContainer.innerHTML = "";
                
                // Calculate LCS
                const result = findLCS(str1, str2);
                
                // Display results
                lcsResult.innerHTML = `
                    <p>String 1: <strong>${str1}</strong></p>
                    <p>String 2: <strong>${str2}</strong></p>
                    <p>LCS Length: <strong>${result.length}</strong></p>
                    <p>LCS: <strong>${result.sequence}</strong></p>
                `;
                
                // Create visualization
                createMatrixVisualization(str1, str2, result.matrix, result.path);
                
                // Update explanation
                explanation.innerHTML = result.explanation;
            }
            
            function findLCS(str1, str2) {
                const m = str1.length;
                const n = str2.length;
                
                // Create DP matrix
                const dp = Array(m + 1).fill().map(() => Array(n + 1).fill(0));
                const path = Array(m + 1).fill().map(() => Array(n + 1).fill(null));
                
                // Fill DP matrix
                for (let i = 1; i <= m; i++) {
                    for (let j = 1; j <= n; j++) {
                        if (str1[i - 1] === str2[j - 1]) {
                            dp[i][j] = dp[i - 1][j - 1] + 1;
                            path[i][j] = 'diagonal';
                        } else {
                            if (dp[i - 1][j] >= dp[i][j - 1]) {
                                dp[i][j] = dp[i - 1][j];
                                path[i][j] = 'up';
                            } else {
                                dp[i][j] = dp[i][j - 1];
                                path[i][j] = 'left';
                            }
                        }
                    }
                }
                
                // Find LCS sequence by backtracking
                let sequence = '';
                let i = m, j = n;
                
                while (i > 0 && j > 0) {
                    if (path[i][j] === 'diagonal') {
                        sequence = str1[i - 1] + sequence;
                        i--;
                        j--;
                    } else if (path[i][j] === 'up') {
                        i--;
                    } else {
                        j--;
                    }
                }
                
                // Generate explanation
                const explanation = `
                    The DP matrix shows how we calculate the LCS length step by step.
                    When characters match (highlighted cells), we add 1 to the value from the diagonal cell.
                    When they don't match, we take the maximum value from the cell above or to the left.
                    The final LCS sequence is found by tracing back through the matrix following the diagonal moves.
                `;
                
                return {
                    length: dp[m][n],
                    sequence: sequence,
                    matrix: dp,
                    path: path,
                    explanation: explanation
                };
            }
            
            function createMatrixVisualization(str1, str2, matrix, path) {
                const m = str1.length;
                const n = str2.length;
                
                // Create table element
                const table = document.createElement('table');
                table.className = 'matrix-grid';
                
                // Create header row with string2 characters
                let headerRow = document.createElement('tr');
                headerRow.appendChild(createCell('', 'matrix-col-label')); // Empty top-left cell
                headerRow.appendChild(createCell('', 'matrix-col-label')); // Empty cell for index 0
                
                for (let j = 0; j < n; j++) {
                    headerRow.appendChild(createCell(str2[j], 'matrix-col-label'));
                }
                table.appendChild(headerRow);
                
                // Create rows with string1 characters and matrix values
                for (let i = 0; i <= m; i++) {
                    let row = document.createElement('tr');
                    
                    // First column: string1 character or empty for index 0
                    if (i === 0) {
                        row.appendChild(createCell('', 'matrix-row-label')); // Empty cell
                    } else {
                        row.appendChild(createCell(str1[i-1], 'matrix-row-label'));
                    }
                    
                    // Second column: row index
                    row.appendChild(createCell(i.toString(), 'matrix-row-label'));
                    
                    // Matrix values
                    for (let j = 0; j <= n; j++) {
                        let cell = createCell(matrix[i][j].toString(), 'matrix-cell');
                        
                        // Highlight cells that are part of the LCS path
                        if (i > 0 && j > 0 && path[i][j] === 'diagonal' && str1[i-1] === str2[j-1]) {
                            cell.classList.add('lcs-path');
                        }
                        
                        row.appendChild(cell);
                    }
                    
                    table.appendChild(row);
                }
                
                matrixContainer.appendChild(table);
            }
            
            function createCell(content, className) {
                const cell = document.createElement('td');
                cell.textContent = content;
                cell.className = className;
                return cell;
            }
        });
    </script>
</body>
</html>