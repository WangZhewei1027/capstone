<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Binary Search Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background: #f0f4f8;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }
    input[type="text"] {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 4px;
      border: 1px solid #aaa;
      margin-bottom: 1rem;
      box-sizing: border-box;
    }
    button {
      padding: 0.7rem 1.3rem;
      font-size: 1rem;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      margin-bottom: 1rem;
    }
    button:hover {
      background: #0056b3;
    }
    #output {
      background: #eef6ff;
      border: 1px solid #a3c4ff;
      padding: 1rem;
      border-radius: 4px;
      min-height: 120px;
      font-family: monospace;
      white-space: pre-wrap;
      overflow-x: auto;
    }
    small {
      color: #555;
      display: block;
      margin-top: -0.8rem;
      margin-bottom: 1rem;
      font-size: 0.85rem;
    }
  </style>
</head>
<body>
  <h1>Binary Search Demonstration</h1>
  <div class="container">
    <label for="arrayInput">Enter a sorted array (comma separated):</label>
    <input type="text" id="arrayInput" placeholder="e.g. 1,3,5,7,9,12,15" aria-describedby="arrayHelp" />
    <small id="arrayHelp">Array must be sorted ascendingly for binary search to work correctly.</small>

    <label for="targetInput">Enter the target value to search:</label>
    <input type="text" id="targetInput" placeholder="e.g. 7" />

    <button id="searchBtn">Perform Binary Search</button>

    <div id="output" aria-live="polite" aria-atomic="true"></div>
  </div>

  <script>
    function binarySearch(arr, target, outputCallback) {
      let low = 0, high = arr.length - 1;
      let steps = 0;

      outputCallback(`Starting binary search for target: ${target}\n`);

      while (low <= high) {
        steps++;
        let mid = Math.floor((low + high) / 2);

        outputCallback(
          `[Step ${steps}] low=${low} (value=${arr[low]}), ` +
          `mid=${mid} (value=${arr[mid]}), high=${high} (value=${arr[high]})`
        );

        if (arr[mid] === target) {
          outputCallback(`\nTarget found at index ${mid}.\nTotal steps: ${steps}`);
          return mid;
        } else if (arr[mid] < target) {
          outputCallback(`Target is greater than value at mid (${arr[mid]}). Moving low up.\n`);
          low = mid + 1;
        } else {
          outputCallback(`Target is less than value at mid (${arr[mid]}). Moving high down.\n`);
          high = mid - 1;
        }
      }

      outputCallback(`\nTarget not found in array.\nTotal steps: ${steps}`);
      return -1;
    }

    document.getElementById("searchBtn").addEventListener("click", () => {
      const arrayInput = document.getElementById("arrayInput").value.trim();
      const targetInput = document.getElementById("targetInput").value.trim();
      const outputElem = document.getElementById("output");
      outputElem.textContent = "";

      if (!arrayInput) {
        outputElem.textContent = "Please enter a sorted array.";
        return;
      }
      if (!targetInput) {
        outputElem.textContent = "Please enter the target value.";
        return;
      }

      // Parse the input array to numbers
      let arr = arrayInput.split(",").map(x => x.trim()).filter(x => x !== "").map(Number);
      if (arr.some(isNaN)) {
        outputElem.textContent = "Array contains invalid numbers. Please enter a valid numeric array.";
        return;
      }

      // Check if array is sorted ascending
      for (let i = 1; i < arr.length; i++) {
        if (arr[i] < arr[i-1]) {
          outputElem.textContent = "Array is not sorted ascendingly. Please enter a sorted array.";
          return;
        }
      }

      // Parse target as number
      let target = Number(targetInput);
      if (isNaN(target)) {
        outputElem.textContent = "Target value is not a valid number.";
        return;
      }

      // Output callback appends messages line by line
      function outputCallback(message) {
        outputElem.textContent += message + "\n";
      }

      binarySearch(arr, target, outputCallback);
    });
  </script>
</body>
</html>