<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Means Clustering</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            width: 80%;
            margin: 40px auto;
            text-align: center;
        }
        .input-container {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="number"] {
            width: 50px;
        }
        button {
            width: 100px;
            height: 30px;
            font-size: 16px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: #fff;
            cursor: pointer;
        }
        button:hover {
            background-color: #3e8e41;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>K-Means Clustering</h2>
        <label for="num_clusters">Number of clusters:</label>
        <input type="number" id="num_clusters" value="3">
        <br>
        <button id="generate_clusters">Generate Clusters</button>
        <button id="view_clusters">View Clusters</button>
        <div id="clusters"></div>
    </div>

    <script>
        let num_clusters = 3;
        let clusters = new Array(num_clusters).fill(0).map(() => []);
        let centroids = new Array(num_clusters).fill(0).map(() => new Array());

        const generateClusters = async () => {
            const clustersInput = document.getElementById('num_clusters');
            const num_clusters_value = parseInt(clustersInput.value);
            if (isNaN(num_clusters_value) || num_clusters_value <= 0) {
                alert('Please enter a positive integer');
                return;
            }

            const clusters = await new Promise((resolve) => {
                const generateCluster = async () => {
                    const cluster = new Array(num_clusters).fill(0);
                    for (let i = 0; i < num_clusters; i++) {
                        const randomIndex = Math.floor(Math.random() * clusters.length);
                        cluster[i] = clusters[randomIndex];
                    }
                    resolve(cluster);
                };
                generateCluster().then((cluster) => {
                    clusters.push(cluster);
                });
            });

            const viewClusters = async () => {
                const clustersDiv = document.getElementById('clusters');
                clustersDiv.innerHTML = '';
                for (let i = 0; i < num_clusters; i++) {
                    for (let j = 0; j < clusters[i].length; j++) {
                        const div = document.createElement('div');
                        div.classList.add('cluster');
                        div.innerHTML = `${i + 1}. ${j + 1}: ${centroids[i][j]}`;
                        clustersDiv.appendChild(div);
                    }
                }
            };

            viewClusters();
        };

        const viewCentroids = async () => {
            const centroidsDiv = document.getElementById('centroids');
            centroidsDiv.innerHTML = '';
            for (let i = 0; i < num_clusters; i++) {
                const div = document.createElement('div');
                div.classList.add('centroid');
                div.innerHTML = `${i + 1}: ${centroids[i].join(', ')}`;
                centroidsDiv.appendChild(div);
            }
        };

        const generateCentroids = async () => {
            const centroids = await new Promise((resolve) => {
                const generateCentroids = async () => {
                    for (let i = 0; i < num_clusters; i++) {
                        centroids[i] = new Array(clusters[i].length).fill(0);
                    }
                    for (let i = 0; i < num_clusters; i++) {
                        for (let j = 0; j < clusters[i].length; j++) {
                            const randomIndex = Math.floor(Math.random() * clusters[i].length);
                            centroids[i][j] = clusters[randomIndex][j];
                        }
                    }
                    resolve(centroids);
                };
                generateCentroids().then((centroids) => {
                    resolve(centroids);
                });
            });
            viewCentroids();
        };

        const updateCentroids = async () => {
            const centroidsDiv = document.getElementById('centroids');
            centroidsDiv.innerHTML = '';
            for (let i = 0; i < num_clusters; i++) {
                const div = document.createElement('div');
                div.classList.add('centroid');
                div.innerHTML = `${i + 1}: ${centroids[i].join(', ')}`;
                centroidsDiv.appendChild(div);
            }
        };

        const updateClusters = async () => {
            const clustersDiv = document.getElementById('clusters');
            clustersDiv.innerHTML = '';
            for (let i = 0; i < num_clusters; i++) {
                for (let j = 0; j < clusters[i].length; j++) {
                    const div = document.createElement('div');
                    div.classList.add('cluster');
                    div.innerHTML = `${i + 1}. ${j + 1}: ${centroids[i][j]}`;
                    clustersDiv.appendChild(div);
                }
            }
        };

        const handleButton = document.getElementById('generate_clusters');
        const viewButton = document.getElementById('view_clusters');
        const updateButton = document.getElementById('update_clusters');

        handleButton.addEventListener('click', generateClusters);
        viewButton.addEventListener('click', viewClusters);
        updateButton.addEventListener('click', updateCentroids);
    </script>
</body>
</html>