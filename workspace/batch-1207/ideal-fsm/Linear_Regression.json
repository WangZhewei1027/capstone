{
  "meta": {
    "concept": "LinearRegression",
    "topic": "Linear Regression Visualization",
    "educational_goal": "Demonstrate linear regression fitting and prediction",
    "expected_interactions": [
      "add_data_point",
      "fit_line",
      "predict",
      "reset"
    ]
  },
  "states": [
    {
      "id": "S0_Idle",
      "label": "Idle",
      "type": "idle",
      "entry_actions": [
        "renderPlot()",
        "enableControls()"
      ],
      "exit_actions": []
    },
    {
      "id": "S1_AddingDataPoint",
      "label": "AddingDataPoint",
      "type": "atomic",
      "entry_actions": [
        "captureDataPoint()",
        "highlightPlotArea()"
      ],
      "exit_actions": [
        "clearHighlight()"
      ]
    },
    {
      "id": "S2_FittingLine",
      "label": "FittingLine",
      "type": "atomic",
      "entry_actions": [
        "computeRegressionLine()",
        "showFittingProgress()"
      ],
      "exit_actions": []
    },
    {
      "id": "S3_Predicting",
      "label": "Predicting",
      "type": "atomic",
      "entry_actions": [
        "calculatePrediction()",
        "displayPrediction()"
      ],
      "exit_actions": []
    },
    {
      "id": "S4_Resetting",
      "label": "Resetting",
      "type": "atomic",
      "entry_actions": [
        "clearAllDataPoints()",
        "resetPlot()"
      ],
      "exit_actions": [
        "returnToIdle()"
      ]
    }
  ],
  "events": [
    {
      "id": "UserClicksAddDataPoint",
      "event_type": "user_action",
      "description": "User clicks to add a data point"
    },
    {
      "id": "UserClicksFitLine",
      "event_type": "user_action",
      "description": "User clicks the Fit Line button"
    },
    {
      "id": "UserClicksPredict",
      "event_type": "user_action",
      "description": "User clicks the Predict button"
    },
    {
      "id": "UserClicksReset",
      "event_type": "user_action",
      "description": "User clicks the Reset button"
    },
    {
      "id": "DataPointAdded",
      "event_type": "system_event",
      "description": "Data point successfully added"
    },
    {
      "id": "LineFittingComplete",
      "event_type": "system_event",
      "description": "Line fitting operation complete"
    },
    {
      "id": "PredictionComplete",
      "event_type": "system_event",
      "description": "Prediction operation complete"
    },
    {
      "id": "ResetComplete",
      "event_type": "system_event",
      "description": "Reset operation complete"
    }
  ],
  "transitions": [
    {
      "from": "S0_Idle",
      "to": "S1_AddingDataPoint",
      "event": "UserClicksAddDataPoint",
      "guard": "plotAreaSelected",
      "actions": [
        "addDataPoint()",
        "disableControls()"
      ],
      "expected_observables": [
        "dom:dataPointAdded"
      ],
      "timeout": 1000
    },
    {
      "from": "S1_AddingDataPoint",
      "to": "S0_Idle",
      "event": "DataPointAdded",
      "guard": "true",
      "actions": [
        "enableControls()"
      ],
      "expected_observables": [
        "dom:plotUpdated"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S2_FittingLine",
      "event": "UserClicksFitLine",
      "guard": "sufficientDataPoints",
      "actions": [
        "fitRegressionLine()",
        "disableControls()"
      ],
      "expected_observables": [
        "dom:fittingStarted"
      ],
      "timeout": 2000
    },
    {
      "from": "S2_FittingLine",
      "to": "S0_Idle",
      "event": "LineFittingComplete",
      "guard": "true",
      "actions": [
        "enableControls()",
        "updatePlotWithLine()"
      ],
      "expected_observables": [
        "dom:lineDrawn"
      ],
      "timeout": 1500
    },
    {
      "from": "S0_Idle",
      "to": "S3_Predicting",
      "event": "UserClicksPredict",
      "guard": "lineFitted",
      "actions": [
        "performPrediction()",
        "disableControls()"
      ],
      "expected_observables": [
        "dom:predictionDisplayed"
      ],
      "timeout": 1000
    },
    {
      "from": "S3_Predicting",
      "to": "S0_Idle",
      "event": "PredictionComplete",
      "guard": "true",
      "actions": [
        "enableControls()"
      ],
      "expected_observables": [
        "dom:predictionComplete"
      ],
      "timeout": 500
    },
    {
      "from": "S0_Idle",
      "to": "S4_Resetting",
      "event": "UserClicksReset",
      "guard": "dataPointsExist",
      "actions": [
        "confirmReset()",
        "beginResetOperation()"
      ],
      "expected_observables": [
        "dom:resetInitiated"
      ],
      "timeout": 500
    },
    {
      "from": "S4_Resetting",
      "to": "S0_Idle",
      "event": "ResetComplete",
      "guard": "true",
      "actions": [
        "enableControls()",
        "clearPlot()"
      ],
      "expected_observables": [
        "dom:plotCleared"
      ],
      "timeout": 1000
    }
  ],
  "components": [
    "plot_area",
    "add_data_point",
    "fit_line",
    "predict",
    "reset"
  ]
}