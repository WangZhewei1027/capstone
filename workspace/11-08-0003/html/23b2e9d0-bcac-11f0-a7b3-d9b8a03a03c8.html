<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Means Clustering Interactive Module</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            overflow: hidden;
        }
        h1 {
            margin: 24px 0;
        }
        #canvas {
            width: 80vw;
            height: 60vh;
            border: 2px solid #333;
            background-color: #fff;
            position: relative;
            margin-bottom: 16px;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        p {
            max-width: 600px;
            text-align: left;
            margin: 0 24px;
        }
    </style>
</head>
<body>

<h1>Understanding K-Means Clustering</h1>

<div id="canvas"></div>

<div class="controls">
    <input type="range" id="k-slider" min="1" max="5" value="2">
    <button id="run-button">Run K-Means</button>
</div>

<p>
    K-Means Clustering is an unsupervised machine learning algorithm that partitions data into K distinct clusters based on feature similarity. Click on the canvas to add points, select the number of clusters, and run the K-Means algorithm!
</p>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const kSlider = document.getElementById('k-slider');
    const runButton = document.getElementById('run-button');
    let points = [];
    let centroids = [];

    canvas.addEventListener('click', (event) => {
        const rect = canvas.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        points.push({x: x, y: y});
        drawPoints();
    });

    kSlider.addEventListener('input', () => {
        drawCentroids(parseInt(kSlider.value));
    });

    runButton.addEventListener('click', () => {
        const k = parseInt(kSlider.value);
        centroids = initializeCentroids(k);
        drawCentroids(k);
        runKMeans(k);
    });

    function drawPoints() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        points.forEach(point => {
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
            ctx.fill();
        });
    }

    function drawCentroids(k) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawPoints();
        centroids.forEach((centroid, index) => {
            ctx.fillStyle = `hsl(${(index * 360) / k}, 100%, 50%)`;
            ctx.fillRect(centroid.x - 5, centroid.y - 5, 10, 10);
        });
    }

    function initializeCentroids(k) {
        return Array.from({length: k}).map(() => ({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height
        }));
    }

    function assignPointsToClusters() {
        // Function for assigning points to the respective centroids
    }

    function updateCentroids() {
        // Function for updating centroid positions based on assigned points
    }

    async function runKMeans(k) {
        // Function that animates the K-means clustering steps
        // Placeholder for the animation
    }

</script>
</body>
</html>