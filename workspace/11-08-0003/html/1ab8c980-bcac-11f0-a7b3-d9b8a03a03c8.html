<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Linear Regression Exploration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 24px;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            color: #333;
            margin-bottom: 16px;
        }
        p {
            color: #666;
            margin-bottom: 24px;
            max-width: 600px;
            text-align: center;
        }
        #plot-area {
            width: 100%;
            max-width: 600px;
            height: 400px;
            border: 1px solid #bbb;
            position: relative;
            margin-bottom: 24px;
            background-color: white;
        }
        #input-controls {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
        }
        .control {
            margin-right: 16px;
        }
        .point {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: steelblue;
            position: absolute;
        }
        .line {
            position: absolute;
            background-color: orange;
            height: 2px;
            transition: all 0.2s ease;
        }
        button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 12px;
        }
    </style>
</head>
<body>

    <h1>Interactive Linear Regression</h1>
    <p>Learn how Linear Regression works by adding points and observing the regression line adjust in real-time. Click to add data points!</p>
    
    <div id="plot-area"></div>

    <div id="input-controls">
        <div class="control">
            <label for="x-value">X Value:</label>
            <input type="number" id="x-value" step="0.1">
        </div>
        <div class="control">
            <label for="y-value">Y Value:</label>
            <input type="number" id="y-value" step="0.1">
        </div>
        <button id="add-point">Add Point</button>
    </div>
    
    <script>
        const plotArea = document.getElementById('plot-area');
        const xInput = document.getElementById('x-value');
        const yInput = document.getElementById('y-value');
        const addPointButton = document.getElementById('add-point');
        const points = [];

        addPointButton.addEventListener('click', function() {
            const x = parseFloat(xInput.value);
            const y = parseFloat(yInput.value);
            if (!isNaN(x) && !isNaN(y)) {
                addDataPoint(x, y);
                updateRegressionLine();
                xInput.value = '';
                yInput.value = '';
            }
        });

        function addDataPoint(x, y) {
            const point = document.createElement('div');
            point.classList.add('point');
            point.style.left = `${(x + 10) * 30}px`; // Scaling factor 
            point.style.bottom = `${(y + 10) * 30}px`; // Scaling factor
            plotArea.appendChild(point);
            points.push({ x, y });
        }

        function updateRegressionLine() {
            if (points.length < 2) return; // Need at least 2 points to calculate a line
            const { slope, intercept } = calculateRegressionLine(points);
            
            // Create a line from (0, intercept) to (width, slope * width + intercept)
            const line = document.querySelector('.line') || document.createElement('div');
            line.classList.add('line');
            const plotWidth = plotArea.clientWidth;
            const plotHeight = plotArea.clientHeight;
            const yStart = slope * -10 + intercept; 
            const yEnd = slope * 10 + intercept;
            line.style.left = '0';
            line.style.top = `${((yStart + 10) * 30)}px`;
            line.style.width = `${plotWidth}px`;
            line.style.transform = `translateY(${plotHeight - (yEnd + 10) * 30}px)`;
            plotArea.appendChild(line);
        }

        function calculateRegressionLine(points) {
            let n = points.length;
            let sumX = 0;
            let sumY = 0;
            let sumXY = 0;
            let sumXX = 0;

            points.forEach(point => {
                sumX += point.x;
                sumY += point.y;
                sumXY += point.x * point.y;
                sumXX += point.x * point.x;
            });

            const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);
            const intercept = (sumY - slope * sumX) / n;
            return { slope, intercept };
        }
    </script>
</body>
</html>