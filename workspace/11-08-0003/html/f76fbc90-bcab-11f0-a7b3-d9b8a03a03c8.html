<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Adjacency Matrices</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f4;
        }
        h1 {
            margin-bottom: 16px;
        }
        #graph {
            width: 80%;
            height: 300px;
            position: relative;
            border: 2px solid #333;
            background-color: #fff;
            border-radius: 8px;
        }
        .node {
            width: 30px;
            height: 30px;
            background: #008cba;
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
        }
        .edge {
            position: absolute;
            width: 2px;
            background-color: green;
            transform-origin: 0 0;
        }
        #matrix {
            display: inline-block;
            margin-top: 16px;
            border-collapse: collapse;
        }
        #matrix td {
            width: 30px;
            height: 30px;
            border: 1px solid #333;
            text-align: center;
            vertical-align: middle;
            background: white;
        }
        .filled {
            background: green;
        }
        #reset-button {
            margin-top: 16px;
            padding: 10px 20px;
            border: none;
            background-color: #f44336;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>Understanding Adjacency Matrices</h1>
    <div id="graph"></div>

    <table id="matrix"></table>
    
    <button id="reset-button">Reset Graph</button>

    <script>
        const graphDiv = document.getElementById('graph');
        const matrixDiv = document.getElementById('matrix');
        const resetButton = document.getElementById('reset-button');

        let nodes = [];
        let adjacencyMatrix = [];

        graphDiv.addEventListener('click', (e) => {
            const rect = graphDiv.getBoundingClientRect();
            let x = e.clientX - rect.left;
            let y = e.clientY - rect.top;
            if (nodes.length < 10) {
                addNode(x, y);
            } else {
                connectNodes();
            }
        });

        function addNode(x, y) {
            const nodeIndex = nodes.length;
            nodes.push({ x, y });

            const node = document.createElement('div');
            node.className = 'node';
            node.style.left = `${x - 15}px`;
            node.style.top = `${y - 15}px`;
            node.dataset.index = nodeIndex;
            graphDiv.appendChild(node);

            if (adjacencyMatrix.length === 0) {
                adjacencyMatrix.push(new Array(1).fill(0));
            } else {
                adjacencyMatrix.forEach(row => row.push(0));
                adjacencyMatrix.push(new Array(nodes.length).fill(0));
            }

            updateMatrix();
        }

        function connectNodes() {
            const selectedNode = event.target.dataset.index;
            if (selectedNode === undefined) return;

            const firstNode = nodes[selectedNode];

            if (lastSelectedNode !== null) {
                const secondNodeIndex = nodes.length - 1;
                if (!adjacencyMatrix[lastSelectedNode][secondNodeIndex]) {
                    adjacencyMatrix[lastSelectedNode][secondNodeIndex] = 1;
                    adjacencyMatrix[secondNodeIndex][lastSelectedNode] = 1;
                    drawEdge(lastSelectedNode, secondNodeIndex);
                }
                lastSelectedNode = null;
            } else {
                lastSelectedNode = selectedNode;
            }
            
            updateMatrix();
        }
        
        function drawEdge(start, end) {
            const edge = document.createElement('div');
            edge.className = 'edge';
            const startX = nodes[start].x;
            const startY = nodes[start].y;
            const endX = nodes[end].x;
            const endY = nodes[end].y;

            const length = Math.sqrt((endX - startX) ** 2 + (endY - startY) ** 2);
            const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;

            edge.style.height = `${length}px`;
            edge.style.transform = `rotate(${angle}deg)`;
            edge.style.left = `${startX}px`;
            edge.style.top = `${startY}px`;
            graphDiv.appendChild(edge);
        }

        function updateMatrix() {
            matrixDiv.innerHTML = ""; // Clear previous matrix
            adjacencyMatrix.forEach(row => {
                const tr = document.createElement('tr');
                row.forEach(cell => {
                    const td = document.createElement('td');
                    td.className = cell ? 'filled' : '';
                    td.textContent = cell;
                    tr.appendChild(td);
                });
                matrixDiv.appendChild(tr);
            });
        }

        resetButton.addEventListener('click', () => {
            nodes = [];
            adjacencyMatrix = [];
            while (graphDiv.firstChild) {
                graphDiv.removeChild(graphDiv.lastChild);
            }
            matrixDiv.innerHTML = ""; 
        });

    </script>
</body>
</html>