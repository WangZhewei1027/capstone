<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bellman-Ford Algorithm Interactive Module</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 24px;
            background-color: #f4f4f4;
        }
        h1, h2, p {
            text-align: center;
        }
        .graph {
            border: 1px solid #ddd;
            width: 400px; 
            height: 400px; 
            margin: 0 auto 16px; 
            position: relative;
            background-color: #fff;
        }
        .node {
            width: 30px;
            height: 30px;
            border-radius: 15px;
            background-color: #007bff;
            position: absolute;
            text-align: center;
            line-height: 30px;
            color: white;
            cursor: pointer;
        }
        .edge {
            position: absolute;
            height: 2px; 
            background: black;
            transition: background-color 0.3s;
        }
        .edge.relaxed {
            background-color: green;
        }
        .controls {
            text-align: center;
            margin: 16px 0;
        }
        #output {
            text-align: center;
            margin-top: 16px;
        }
    </style>
</head>
<body>

<h1>Understanding the Bellman-Ford Algorithm</h1>
<p>Interact with the graph to visualize how the Bellman-Ford algorithm finds the shortest path.</p>

<div class="graph" id="graph"></div>

<div class="controls">
    <label for="edge-weight">Edge Weight (e.g., 5): </label>
    <input type="number" id="edge-weight" value="1" min="1">
    <button id="run-btn">Run Algorithm</button>
</div>

<div id="output"></div>

<script>
    const graphElement = document.getElementById('graph');
    const outputElement = document.getElementById('output');
    const edgeWeightInput = document.getElementById('edge-weight');
    const runButton = document.getElementById('run-btn');

    let nodes = [];
    let edges = [];

    function addNode(x, y) {
        const node = document.createElement('div');
        node.className = 'node';
        node.style.left = `${x}px`;
        node.style.top = `${y}px`;
        node.textContent = nodes.length + 1;
        node.addEventListener('click', selectNode);
        graphElement.appendChild(node);
        nodes.push({ x, y });
    }

    function addEdge(from, to, weight) {
        const edge = document.createElement('div');
        edge.className = 'edge';
        const startX = nodes[from].x + 15;
        const startY = nodes[from].y + 15;
        const endX = nodes[to].x + 15;
        const endY = nodes[to].y + 15;

        edge.style.left = Math.min(startX, endX) + 'px';
        edge.style.top = Math.min(startY, endY) + 'px';
        edge.style.width = `${Math.abs(startX - endX)}px`;
        edge.style.transform = `rotate(${Math.atan2(endY - startY, endX - startX)}rad)`;
        graphElement.appendChild(edge);
        edges.push({ from, to, weight, element: edge });
    }

    function selectNode(event) {
        const selectedNode = event.target;
        const { x, y } = selectedNode.getBoundingClientRect();
        
        const fromIndex = parseInt(selectedNode.textContent) - 1;
        const toIndex = prompt("Connect to which node? (number):") - 1;

        if (toIndex >= 0 && toIndex < nodes.length && fromIndex !== toIndex) {
            const weight = parseInt(edgeWeightInput.value) || 1;
            addEdge(fromIndex, toIndex, weight);
            alert(`Edge added from Node ${fromIndex + 1} to Node ${toIndex + 1} with weight ${weight}`);
        }
    }

    runButton.addEventListener('click', () => {
        outputElement.innerHTML = "Running the Bellman-Ford Algorithm...";
        setTimeout(runBellmanFord, 1000); 
    });

    function runBellmanFord() {
        const startNode = 0; 
        const distances = Array(nodes.length).fill(Infinity);
        distances[startNode] = 0;

        for (let i = 0; i < nodes.length - 1; i++) {
            edges.forEach(({ from, to, weight }) => {
                if (distances[from] + weight < distances[to]) {
                    distances[to] = distances[from] + weight;
                    edges[from].element.classList.add('relaxed'); 
                }
            });
        }

        outputElement.innerHTML = `Shortest paths from Node 1: ${distances.join(', ')}`;
    }

    graphElement.addEventListener('click', (event) => {
        const rect = graphElement.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        addNode(x, y);
    });
</script>
</body>
</html>