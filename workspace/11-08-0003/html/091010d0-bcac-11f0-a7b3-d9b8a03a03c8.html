<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Search Interactive Module</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 24px;
            background-color: #f9f9f9;
        }
        h1 {
            text-align: center;
        }
        .input-section, .control-section {
            margin: 16px 0;
            text-align: center;
        }
        input {
            margin: 0 8px;
            padding: 8px;
            width: 130px;
        }
        button {
            padding: 8px 12px;
            margin: 0 8px;
            cursor: pointer;
        }
        .visualization {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin: 16px 0;
        }
        .bar {
            width: 30px;
            margin: 4px;
            background-color: #6c757d;
            transition: height 0.3s, background-color 0.3s;
        }
        .highlight {
            background-color: #007bff !important;
        }
        .result {
            text-align: center;
            margin-top: 16px;
        }
    </style>
</head>
<body>

    <h1>Binary Search: Efficient Searching in Sorted Arrays</h1>
    <div class="input-section">
        <input type="text" id="arrayInput" placeholder="Enter sorted array (e.g. 1,2,3,4,5)">
        <input type="number" id="targetInput" placeholder="Enter target number">
    </div>
    <div class="control-section">
        <button id="searchBtn">Search</button>
        <button id="nextStepBtn" disabled>Next Step</button>
        <button id="restartBtn" disabled>Restart</button>
    </div>
    <div class="visualization" id="visualization"></div>
    <div class="result" id="resultSection"></div>

    <script>
        let steps = [];
        let currentStep = 0;

        function createBars(array) {
            const visualization = document.getElementById('visualization');
            visualization.innerHTML = '';
            array.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${value * 10}px`;
                bar.dataset.index = index;
                visualization.appendChild(bar);
            });
        }

        function binarySearch(array, target) {
            let left = 0;
            let right = array.length - 1;
            steps = [];

            while (left <= right) {
                let mid = Math.floor((left + right) / 2);
                steps.push({ left, right, mid, value: array[mid] });

                if (array[mid] === target) {
                    return mid;
                } else if (array[mid] < target) {
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }
            return -1; // target not found
        }

        function visualizeStep(step) {
            const bars = document.querySelectorAll('.bar');
            bars.forEach(bar => bar.classList.remove('highlight'));

            if (step) {
                bars[step.left].classList.add('highlight');
                bars[step.right].classList.add('highlight');
                bars[step.mid].classList.add('highlight');
            }
        }

        document.getElementById('searchBtn').addEventListener('click', () => {
            const arrayInput = document.getElementById('arrayInput').value.split(',').map(num => parseInt(num));
            const target = parseInt(document.getElementById('targetInput').value);
            if (arrayInput.length && !arrayInput.includes(NaN) && Number.isInteger(target)) {
                createBars(arrayInput);
                currentStep = 0;
                const index = binarySearch(arrayInput, target);

                document.getElementById('resultSection').textContent = index !== -1 
                    ? `Target found at index: ${index}` 
                    : 'Target not found';
                visualizeStep(steps[currentStep]);

                document.getElementById('nextStepBtn').disabled = false;
                document.getElementById('restartBtn').disabled = false;
            } else {
                alert('Please enter a valid sorted array and a target number!');
            }
        });

        document.getElementById('nextStepBtn').addEventListener('click', () => {
            if (currentStep < steps.length) {
                visualizeStep(steps[currentStep]);
                currentStep++;
            }
            if (currentStep === steps.length) {
                document.getElementById('nextStepBtn').disabled = true;
            }
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
            steps = [];
            currentStep = 0;
            document.getElementById('arrayInput').value = '';
            document.getElementById('targetInput').value = '';
            document.getElementById('visualization').innerHTML = '';
            document.getElementById('resultSection').textContent = '';
            document.getElementById('nextStepBtn').disabled = true; 
            document.getElementById('restartBtn').disabled = true; 
        });
    </script>

</body>
</html>