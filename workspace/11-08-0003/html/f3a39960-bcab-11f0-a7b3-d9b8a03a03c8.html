<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Weighted Graphs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        #title {
            font-size: 2em;
            margin-bottom: 8px;
        }
        #objective {
            font-size: 1.2em;
            margin-bottom: 16px;
            text-align: center;
        }
        #graph {
            border: 2px solid #ccc;
            background-color: #fff;
            width: 80vw;
            height: 60vh;
            position: relative;
            overflow: hidden;
            display: flex;
        }
        .node {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: lightblue;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .edge {
            position: absolute;
            background-color: transparent;
            width: 2px;
            border: 1px solid black;
        }
        #controls {
            margin-top: 16px;
        }
        button {
            margin-right: 16px;
            padding: 10px 15px;
            border: none;
            background-color: #008CBA;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #005f6b;
        }
    </style>
</head>
<body>
    <div id="title">Understanding Weighted Graphs</div>
    <div id="objective">Create nodes, connect them with edges, and assign weights to understand weighted graphs.</div>
    <div id="graph"></div>
    <div id="controls">
        <button onclick="resetGraph()">Reset Graph</button>
    </div>
    <script>
        const graph = document.getElementById('graph');
        const nodes = [];
        const edges = [];

        graph.addEventListener("click", function(e) {
            if (e.target === graph) {
                const node = document.createElement('div');
                node.className = 'node';
                const nodeId = nodes.length;
                nodes.push({ id: nodeId, x: e.clientX - 40, y: e.clientY - 15 });

                node.style.left = nodes[nodeId].x + 'px';
                node.style.top = nodes[nodeId].y + 'px';
                node.innerHTML = nodeId;
                graph.appendChild(node);

                node.addEventListener('click', function(event) {
                    event.stopPropagation();  // Prevent the graph click event
                });

                node.addEventListener('mousedown', startConnecting(nodeId));
            }
        });

        function startConnecting(nodeId) {
            return function(e) {
                e.stopPropagation();
                const startX = nodes[nodeId].x + 15;
                const startY = nodes[nodeId].y + 15;

                const line = document.createElement('div');
                line.className = 'edge';
                graph.appendChild(line);

                const onMouseMove = (event) => {
                    const endX = event.clientX;
                    const endY = event.clientY;
                    line.style.width = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2)) + 'px';
                    line.style.transform = `rotate(${Math.atan2(endY - startY, endX - startX)}rad)`;
                    line.style.left = startX + 'px';
                    line.style.top = startY + 'px';
                };

                const onMouseUp = (event) => {
                    const endId = getNodeAt(event.clientX, event.clientY);
                    if (endId !== -1 && endId !== nodeId) {
                        const weight = prompt("Enter weight for the edge:");
                        if (weight !== null) {
                            edges.push({ from: nodeId, to: endId, weight: weight });
                            drawEdge(nodeId, endId, weight);
                        }
                    }
                    graph.removeEventListener('mousemove', onMouseMove);
                    graph.removeEventListener('mouseup', onMouseUp);
                    graph.removeChild(line);
                };

                graph.addEventListener('mousemove', onMouseMove);
                graph.addEventListener('mouseup', onMouseUp);
            };
        }

        function getNodeAt(x, y) {
            return nodes.findIndex(node => 
                x >= node.x && x <= node.x + 30 && 
                y >= node.y && y <= node.y + 30
            );
        }

        function drawEdge(from, to, weight) {
            const fromNode = nodes[from];
            const toNode = nodes[to];
            const edge = document.createElement('div');
            edge.className = 'edge';
            edge.style.width = Math.sqrt(Math.pow(fromNode.x - toNode.x, 2) + Math.pow(fromNode.y - toNode.y, 2)) + 'px';
            edge.style.transform = `rotate(${Math.atan2(toNode.y - fromNode.y, toNode.x - fromNode.x)}rad)`;
            edge.style.left = fromNode.x + 15 + 'px';
            edge.style.top = fromNode.y + 15 + 'px';
            graph.appendChild(edge);

            const weightLabel = document.createElement('span');
            weightLabel.innerText = weight;
            const midX = (fromNode.x + toNode.x) / 2 + 10;
            const midY = (fromNode.y + toNode.y) / 2 + 10;
            weightLabel.style.position = 'absolute';
            weightLabel.style.left = midX + 'px';
            weightLabel.style.top = midY + 'px';
            graph.appendChild(weightLabel);
        }

        function resetGraph() {
            while (graph.firstChild) {
                graph.removeChild(graph.firstChild);
            }
            nodes.length = 0;
            edges.length = 0;
        }
    </script>
</body>
</html>