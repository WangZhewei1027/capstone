<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exploring Graphs: Directed vs Undirected</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 24px;
            background-color: #f4f4f4;
        }
        #container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 16px;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #graph-area {
            width: 60%;
            height: 400px;
            position: relative;
            border: 2px dashed #007bff;
            border-radius: 8px;
            margin-right: 16px;
        }
        #controls {
            width: 35%;
        }
        #controls h2, #graph-area h2 {
            margin-top: 0;
        }
        #btn-add {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        #btn-add:hover {
            background-color: #218838;
        }
        .node {
            width: 30px;
            height: 30px;
            background-color: #007bff;
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
        }
        .edge {
            position: absolute;
            background-color: #007bff;
            height: 2px;
        }
        .label {
            position: absolute;
            color: #333;
        }
        #info {
            margin-top: 20px;
            font-size: 14px;
            color: #333;
        }
    </style>
</head>
<body>

<div id="container">
    <div id="graph-area">
        <h2>Graph Area</h2>
        <div id="nodes" style="position: relative;"></div>
    </div>
    <div id="controls">
        <h2>Control Panel</h2>
        <label for="graph-type">Select graph type:</label>
        <select id="graph-type">
            <option value="undirected">Undirected</option>
            <option value="directed">Directed</option>
        </select>
        <br/><br/>
        <button id="btn-add">Add Node</button>
        <p id="info">Add nodes to the graph and connect them by dragging between them.</p>
    </div>
</div>

<script>
    let nodes = [];
    let edges = [];
    let graphType = 'undirected';
    const graphArea = document.getElementById('graph-area');
    const nodesDiv = document.getElementById('nodes');
    const btnAdd = document.getElementById('btn-add');
    const graphTypeSelect = document.getElementById('graph-type');
    
    graphTypeSelect.addEventListener('change', function () {
        graphType = this.value;
        resetGraphDisplay();
    });

    btnAdd.addEventListener('click', function () {
        addNode();
    });

    function addNode() {
        const node = document.createElement('div');
        node.className = 'node';
        const id = nodes.length;
        node.textContent = id;
        node.style.left = Math.random() * (graphArea.clientWidth - 30) + 'px';
        node.style.top = Math.random() * (graphArea.clientHeight - 30) + 'px';
        nodes.push(node);

        // Add drag feature
        node.draggable = true;
        node.addEventListener('dragstart', function (e) {
            node.dragging = true;
            e.dataTransfer.setData('text/plain', id);
        });
        node.addEventListener('dragend', function () {
            node.dragging = false;
        });
        nodesDiv.appendChild(node);
        updateNodes();
    }

    function resetGraphDisplay() {
        nodesDiv.innerHTML = '';
        edges.forEach(edge => edge.remove());
        nodes = [];
        edges = [];
    }
    
    function updateNodes() {
        const nodeElements = document.querySelectorAll('.node');
        nodeElements.forEach(node => {
            node.addEventListener('dragover', function (e) {
                e.preventDefault();
            });
            node.addEventListener('drop', function (e) {
                const sourceID = e.dataTransfer.getData('text/plain');
                const targetID = node.textContent;

                if (sourceID !== targetID) {
                    createEdge(sourceID, targetID);
                    if (graphType === 'undirected') {
                        createEdge(targetID, sourceID);
                    }
                }
            });
        });
    }

    function createEdge(sourceID, targetID) {
        const sourceNode = nodes[sourceID];
        const targetNode = nodes[targetID];

        const edge = document.createElement('div');
        edge.className = 'edge';
        
        edge.style.transformOrigin = '0 0';
        
        const x1 = parseFloat(sourceNode.style.left) + 15;
        const y1 = parseFloat(sourceNode.style.top) + 15;
        const x2 = parseFloat(targetNode.style.left) + 15;
        const y2 = parseFloat(targetNode.style.top) + 15;

        const dx = x2 - x1;
        const dy = y2 - y1;
        const length = Math.sqrt(dx * dx + dy * dy);

        edge.style.width = length + 'px';
        edge.style.left = x1 + 'px';
        edge.style.top = y1 + 'px';
        edge.style.transform = `rotate(${Math.atan2(dy, dx)}rad)`;

        nodesDiv.appendChild(edge);
        edges.push(edge);
    }

</script>

</body>
</html>