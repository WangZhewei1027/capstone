<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f4;
        }
        h1 {
            margin-bottom: 16px;
        }
        #input-section {
            margin-bottom: 16px;
        }
        #number-input {
            padding: 8px;
            width: 200px;
        }
        button {
            padding: 10px;
            margin: 8px;
            cursor: pointer;
        }
        #visualization {
            display: flex;
            margin: 24px 0;
        }
        .num-block {
            width: 40px;
            height: 40px;
            background-color: #4CAF50;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 8px;
            transition: background-color 0.5s, transform 0.5s;
        }
        #speed-slider {
            margin-top: 16px;
        }
    </style>
</head>
<body>
    <h1>Bubble Sort: Visualizing the Sorting Mechanism</h1>
    <div id="input-section">
        <input type="text" id="number-input" placeholder="Enter numbers (e.g., 5,3,8,4,2)">
        <button id="start-button">Start Sorting</button>
        <button id="reset-button">Reset</button>
    </div>
    <div id="visualization"></div>
    <input type="range" id="speed-slider" min="100" max="2000" value="500" step="100">
    <script>
        const startButton = document.getElementById('start-button');
        const resetButton = document.getElementById('reset-button');
        const numberInput = document.getElementById('number-input');
        const visualization = document.getElementById('visualization');
        const speedSlider = document.getElementById('speed-slider');
        let speed = 500;

        startButton.onclick = () => {
            let numbers = numberInput.value.split(',').map(Number).filter(n => !isNaN(n));
            bubbleSort(numbers);
        };

        resetButton.onclick = () => {
            numberInput.value = '';
            visualization.innerHTML = '';
        };

        speedSlider.oninput = () => {
            speed = speedSlider.value;
        };

        function bubbleSort(arr) {
            visualization.innerHTML = '';
            arr.forEach(num => {
                const block = document.createElement('div');
                block.className = 'num-block';
                block.innerText = num;
                visualization.appendChild(block);
            });

            let n = arr.length;
            let sorted = false;

            const sort = (i) => {
                if (i < n - 1 && !sorted) {
                    sorted = true;

                    for (let j = 0; j < n - i - 1; j++) {
                        const blocks = document.querySelectorAll('.num-block');
                        blocks[j].style.backgroundColor = 'orange'; // Highlight
                        blocks[j + 1].style.backgroundColor = 'orange'; // Highlight

                        if (arr[j] > arr[j + 1]) {
                            [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
                            blocks[j].style.transform = 'translateX(48px)'; // Animate movement
                            sorted = false;
                        }

                        setTimeout(() => {
                            blocks[j].style.backgroundColor = '#4CAF50'; // Reset color
                            blocks[j + 1].style.backgroundColor = '#4CAF50'; // Reset color
                            blocks[j].innerText = arr[j]; // Update value
                            blocks[j + 1].innerText = arr[j + 1]; // Update value
                        }, speed);
                    }
                    setTimeout(() => sort(i + 1), speed);
                }
            };
            sort(0);
        }
    </script>


  <script id="fsm" type="application/json">
    {
  "topic": "Interactive Application",
  "description": "Finite State Machine for a Bubble Sort Visualization application.",
  "states": [
    {
      "name": "idle",
      "onEnter": "resetVisualization",
      "onExit": null,
      "on": {
        "START_BUTTON_CLICK": "sorting",
        "RESET_BUTTON_CLICK": "idle"
      }
    },
    {
      "name": "sorting",
      "onEnter": "initializeSorting",
      "onExit": "resetVisualization",
      "on": {
        "SORTING_COMPLETE": "done",
        "RESET_BUTTON_CLICK": "idle"
      }
    },
    {
      "name": "done",
      "onEnter": "displaySortedResult",
      "onExit": null,
      "on": {
        "RESET_BUTTON_CLICK": "idle"
      }
    }
  ],
  "events": [
    "START_BUTTON_CLICK",
    "RESET_BUTTON_CLICK",
    "SORTING_COMPLETE"
  ],
  "notes": "The sorting state transitions occur during the bubble sort process, with visual feedback provided through color changes and animations."
}
  </script>
</body>
</html>