<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 24px;
            text-align: center;
            background-color: #f4f4f4;
        }
        .bar {
            display: inline-block;
            margin: 4px;
            width: 40px;
            background-color: #3498db;
            transition: height 0.5s, background-color 0.5s;
        }
        #controls {
            margin-top: 20px;
        }
        button {
            margin: 8px 16px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>Exploring Bubble Sort</h1>
<p>Click "Start Sorting" to visualize the bubble sort algorithm in action!</p>

<div id="visualization"></div>

<div id="controls">
    <button id="startButton">Start Sorting</button>
    <button id="pauseButton">Pause</button>
    <button id="resetButton">Reset</button>
</div>

<script>
    let numbers = [];
    let pause = false;

    function generateNumbers() {
        numbers = Array.from({ length: 10 }, () => Math.floor(Math.random() * 100));
        renderBars();
    }

    function renderBars() {
        const visualization = document.getElementById('visualization');
        visualization.innerHTML = '';
        numbers.forEach(num => {
            const bar = document.createElement('div');
            bar.classList.add('bar');
            bar.style.height = `${num}px`;
            visualization.appendChild(bar);
        });
    }

    async function bubbleSort() {
        let len = numbers.length;
        for (let i = 0; i < len - 1; i++) {
            for (let j = 0; j < len - i - 1; j++) {
                if (pause) await new Promise(resolve => { const interval = setInterval(() => { if (!pause) { clearInterval(interval); resolve(); } }, 100); });
                
                const bars = document.querySelectorAll('.bar');
                bars[j].style.backgroundColor = 'red';
                bars[j + 1].style.backgroundColor = 'red';
                
                if (numbers[j] > numbers[j + 1]) {
                    [numbers[j], numbers[j + 1]] = [numbers[j + 1], numbers[j]];
                    bars[j].style.height = `${numbers[j]}px`;
                    bars[j + 1].style.height = `${numbers[j + 1]}px`;
                }

                await new Promise(resolve => setTimeout(resolve, 500));
                bars[j].style.backgroundColor = '#3498db';
                bars[j + 1].style.backgroundColor = '#3498db';
            }
        }
    }

    document.getElementById('startButton').onclick = function() {
        generateNumbers();
        this.disabled = true;
        bubbleSort();
    };

    document.getElementById('pauseButton').onclick = function() {
        pause = !pause;
        this.innerText = pause ? "Resume" : "Pause";
    };

    document.getElementById('resetButton').onclick = function() {
        generateNumbers();
        document.getElementById('startButton').disabled = false;
        pause = false;
        document.getElementById('pauseButton').innerText = 'Pause';
    };
</script>



  <script id="fsm" type="application/json">
    {
  "topic": "Interactive Application",
  "description": "Finite State Machine for the Bubble Sort Visualization application.",
  "states": [
    {
      "name": "idle",
      "onEnter": "generateNumbers",
      "onExit": null,
      "on": {
        "START_SORTING": "sorting"
      }
    },
    {
      "name": "sorting",
      "onEnter": "bubbleSort",
      "onExit": null,
      "on": {
        "PAUSE": "paused",
        "RESET": "idle"
      }
    },
    {
      "name": "paused",
      "onEnter": null,
      "onExit": null,
      "on": {
        "RESUME": "sorting",
        "RESET": "idle"
      }
    }
  ],
  "events": [
    "START_SORTING",
    "PAUSE",
    "RESUME",
    "RESET"
  ],
  "notes": "The application starts in the 'idle' state, generates random numbers, and transitions to 'sorting' when the user clicks 'Start Sorting'. The 'sorting' state can be paused or reset. The 'paused' state allows the user to resume sorting or reset the application."
}
  </script>
</body>
</html>